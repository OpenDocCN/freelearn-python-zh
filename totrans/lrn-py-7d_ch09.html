<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:pls="http://www.w3.org/2005/01/pronunciation-lexicon" xmlns:ssml="http://www.w3.org/2001/10/synthesis">
<head>
  <meta charset="UTF-8"/>
  <title>File Handling and Exceptions</title>
  <link type="text/css" rel="stylesheet" media="all" href="style.css"/>
  <link type="text/css" rel="stylesheet" media="all" href="core.css"/>
</head>
<body>
  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">File Handling and Exceptions</h1>
            </header>

            <article>
                
<p>So far you have seen the various Python programs, which took the input from the keyboard and delivered the output on the screen. In this chapter, you will, however, learn to take input from files and write result to the files. Also, we will go through the concept of exceptions.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">Reading text from a file </h1>
            </header>

            <article>
                
<p>In order to read and write into a file, we will use the&#160;<kbd>open()</kbd> built-in function to open the file. The <kbd>open()</kbd> function creates an&#160;<kbd>file_object</kbd>&#160;object. What is an object? &#160;You will understand in &#160;<a href="lrn-py-7d_ch11.html">Chapter 11</a>, <em>Class and Objects</em>.&#160;&#160;The Syntax is given as:</p>
<pre>file_object = open(file_name ,access_mode)
</pre>
<p>The first argument,<kbd>file_name</kbd>, specifies the filename that you want to open. The second argument,&#160;<kbd>access_mode</kbd>, determines in which mode the file has to be opened, that is, read, write, append, and so on.&#160;</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">The read() method</h1>
            </header>

            <article>
                
<p>Now we will&#160;read a file by a program. The access mode for reading is <kbd>r</kbd>.</p>
<p>Let's take the sample of a text file containing famous quotes:</p>
<div class="CDPAlignCenter CDPAlign"><img height="63" width="304" class="image-border" src="images/file_figure1.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Sample file</div>
<p>I have saved the preceding file with the name <kbd>sample1.txt</kbd>.</p>
<p>Let's write a&#160;<kbd>readfile.py</kbd> program to read the earlier file:&#160;</p>
<pre>file_input = open("sample1.txt",'r')<br/>all_read = file_input.read()<br/>print all_read<br/>file_input.close()<em> </em>
</pre>
<p>In the given&#160;code, first we created a&#160;<kbd>file_input</kbd>&#160;file object, then we called <kbd>file_input.read()</kbd> to read the file content. After reading, the&#160;<kbd>file_input</kbd> file object is closed by <kbd>file_input.close()</kbd>. &#160;To be sure the sample file and the code <kbd>readfile.py</kbd> must be in the same directory. Let's check the output:</p>
<div class="CDPAlignCenter CDPAlign"><img height="125" width="398" class="image-border" src="images/file_figure2.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Reading a file</div>
<p>The preceding code is running successfully. In order to read character from the file, you can pass the argument to the&#160;<kbd>read()</kbd> function, for example,&#160;<kbd>read(5)</kbd> would read the first five characters of the file.</p>
<p>Let's understand the sample code <kbd>readcount1.py</kbd>:</p>
<pre>file_input = open("sample1.txt",'r')<br/>print file_input.read(20)<br/>print file_input.read(15)<br/>print file_input.read(10)<br/>file_input.close()
</pre>
<p>Let's analyze the output:</p>
<div class="CDPAlignCenter CDPAlign"><img height="112" width="405" class="image-border" src="images/file_figure3.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of code read</div>
<p>The second line of code reads the first <kbd>20</kbd> characters of the file, the third line reads the next <kbd>15</kbd> characters, and the fourth line reads the next <kbd>10</kbd> characters of the file.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">The readline() method</h1>
            </header>

            <article>
                
<p>In order to read the file line by line, use <kbd>readline()</kbd>.</p>
<p>Let's see the sample code <kbd>readline1.py</kbd>:</p>
<pre>file_input = open("sample1.txt",'r')<br/>print file_input.readline()<br/>print file_input.readline()<br/>print file_input.readline()<br/>file_input.close()
</pre>
<p>Let's see the output of code:</p>
<div class="CDPAlignCenter CDPAlign"><img height="121" width="385" class="image-border" src="images/file_figure4.jpg"/></div>
<p>In code, we have printed three lines. What happens, if you specify <kbd>count</kbd> in <kbd>readline(count)</kbd>. See the code <kbd>readlinecount.py</kbd>:</p>
<pre>file_input = open("sample1.txt",'r')<br/>print  file_input.readline(100)<br/>print  file_input.readline(20)<br/>file_input.close()
</pre>
<p><em>&#160;</em>Let's see the output:</p>
<div class="CDPAlignCenter CDPAlign"><img height="122" width="413" class="image-border" src="images/file_figure5.jpg"/></div>
<p>In the&#160;<kbd>file_input.readline(100)</kbd> syntax prints&#160;<kbd>100</kbd> characters of the first line. But the first line contains only 48 characters. The syntax file<kbd>_input.readline(20)</kbd> prints the <kbd>20</kbd> characters from the second line of <kbd>sample1.txt</kbd>.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">The readlines() method</h1>
            </header>

            <article>
                
<p>Consider the situation where you want to make a list of lines of a file; in that case, the <kbd>readlines()</kbd>&#160;method allows you to do that.</p>
<p>See the code in&#160;<kbd>readlines1.py</kbd>:</p>
<pre>file_input = open("sample1.txt",'r')<br/>print  file_input.readlines()<br/>file_input.close()
</pre>
<p>Let's check the output of the code:</p>
<div class="CDPAlignCenter CDPAlign"><img height="124" width="488" class="image-border" src="images/file_figure6.jpg"/></div>
<p>In the preceding screenshot, you can easily see the list of lines.</p>
<p>For reading purposes, you can loop over the file object. Let's analyze the code in&#160;<kbd>readfileforloop.py</kbd>:</p>
<pre>file_input = open("sample1.txt",'r')<br/>for line in file_input:<br/>      print line
</pre>
<p>This is&#160;the output:</p>
<div class="CDPAlignCenter CDPAlign"><img height="182" width="449" class="image-border" src="images/file_figure7.jpg"/></div>
<p>You can see all the lines. This is memory efficient, fast, and leads to simple code.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">Exercise</h1>
            </header>

            <article>
                
<p>Let's do an&#160;exercise.</p>
<p>See the given file,&#160;<kbd>batman.txt</kbd>, containing the quotes from famous Hollywood movies.</p>
<p>Our aim is to write a program to find a&#160;given word from the file:</p>
<div class="CDPAlignCenter CDPAlign"><img height="146" width="378" class="image-border" src="images/file_figure_burce.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Screenshot of batman.txt</div>
<p>Let's write a&#160;program to find the particular word from the file. We are making the assumption that the program should be case insensitive, which means it does not matter&#160;whether the characters are in uppercase or&#160;lowercase.</p>
<p>See the code in&#160;<kbd>findword.py</kbd>:</p>
<pre>word = raw_input("Enter the word ")<br/>word = word.lower()<br/>file_txt = open("batman.txt", "r")<br/>count = 0<br/>for each in file_txt:<br/>    if word in each.lower():<br/>        count = count+1<br/>print "The ", word ," occured ",count, " times"
</pre>
<p>The program is very easy to understand. Let's see the output of the code:</p>
<div class="CDPAlignCenter CDPAlign"><img height="172" width="377" class="image-border" src="images/file_figure8.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of findword.py</div>
<p>The program <kbd>findword.py</kbd> is working fine.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">Writing text to a file</h1>
            </header>

            <article>
                
<p>In this section, we will learn how to write a new file using Python.</p>
<p>This time we'll use the write mode <kbd>'w'</kbd> in <kbd>open()</kbd>. The <kbd>'w'</kbd> mode creates a new file. If the file already exists, then the file would be overwritten.&#160;&#160;We will use the&#160;<kbd>write()</kbd> function.</p>
<p>Let's discuss the code in&#160;<kbd>filewrite1.py</kbd>:</p>
<pre>file_input = open("motivation.txt",'w')<br/>file_input.write("Never give up")<br/>file_input.write("nRise above hate")<br/>file_input.write("nNo body remember second place")<br/>file_input.close()
</pre>
<p>You can see that I have written the famous WWE star John Cena's quotes.</p>
<p>Let's see the output:</p>
<div class="CDPAlignCenter CDPAlign"><img height="186" width="361" class="image-border" src="images/file_figure9.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of code filewrite.py</div>
<p>We wrote lines one by one by adding a new line character <kbd>n</kbd>.&#160; You can supply all of them in one go as shown here:</p>
<pre>file_input = open("motivation.txt",'w')<br/>file_input.write("Never give up nRise above hate nNo body remember second place")<br/>file_input.close()
</pre>
<p>Next, I will&#160;use the&#160;<kbd>writelines()</kbd> function. This method writes a Python list of strings to a file.</p>
<p>Let's see the code:</p>
<pre>list1 = ["Blood sweat and respectn",<br/> "The first two you given"<br/> "The last you earnn"<br/> "Give it Earn it"]<br/>text_file = open("wwerockquotes.txt", 'w')<br/>text_file.writelines(list1)<br/>text_file.close()
</pre>
<p>In the preceding code, Python list,&#160;<kbd>list1</kbd>, contains some motivational lines, and we want to save that in a file. We could use the&#160;<kbd>writelines()</kbd> function for our requirement. Let's see the output:</p>
<div class="CDPAlignCenter CDPAlign"><img height="207" width="400" class="image-border" src="images/file_figure10.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of filewriteline.py</div>
<p>Every time you run the program, the file gets overwritten, means a new file would be created. Consider the situation where you want to add content to the previous file; you can use access mode <kbd>'a'</kbd>.</p>
<p>Letâ€™s use the preceding program <kbd>filewritea.py</kbd> with access mode <kbd>'a'</kbd>.</p>
<pre>file_input = open("newmotivation.txt",'a')<br/>file_input.write("Never give up")<br/>file_input.write("nRise above hate")<br/>file_input.write("nNo body remember second place")<br/>file_input.close() 
</pre>
<p>Let's see the output:</p>
<div class="CDPAlignCenter CDPAlign"><img height="231" width="400" class="image-border" src="images/file_figure11.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of filewritea.py</div>
<p>Let's run the program with different lines:</p>
<pre>file_input = open("newmotivation.txt",'a')<br/>file_input.write("nBlood sweat and respect")<br/>file_input.write("nThe first two you give")<br/>file_input.write("nThe last you earn")<br/>file_input.write("nGive it Earn it")<br/>file_input.close()
</pre>
<p>Let's see the output:</p>
<div class="CDPAlignCenter CDPAlign"><img height="218" width="380" class="image-border" src="images/file_figure12.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of program filewritea1.py</div>
<p>The&#160;<kbd>newmotivation.txt</kbd> file has been successfully appended.</p>
<p>There are other access modes too.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">Examples</h1>
            </header>

            <article>
                
<p>The <kbd>"r+"</kbd> opens a file for reading and writing. This mode places the pointer at the beginning of the file.</p>
<p>The <kbd>"w+"</kbd> opens a file for reading and writing. If the file doesn't exist, then a new file is created. &#160;If the file exists, then the file is overwritten.</p>
<p>The <kbd>"a+"</kbd> opens a file for appending and reading. If the file doesn't exist, it creates a new file. If the file already exists, the pointer is placed at the end of the file.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">Pickling</h1>
            </header>

            <article>
                
<p>Text files are convenient to use because you can read, write, and append them with any text editor, but they are limited to storing a series of characters. Sometimes you may want to store complex information such as&#160;list and dictionary. Here we would use Python's <kbd>pickle</kbd> module. The <kbd>pickle</kbd> module is used to store complex data such as&#160;list and dictionary. Let's discuss with the help of an example:</p>
<pre>import pickle<br/>name = ["mohit","bhaskar", "manish"]<br/>skill = ["Python", "Python", "Java"]<br/>pickle_file = open("emp1.dat","w")<br/>pickle.dump(name,pickle_file)<br/>pickle.dump(skill,pickle_file)<br/>pickle_file.close()
</pre>
<p>The program seems complex to understand. Let's understand the code line by line.</p>
<p>The <kbd>name</kbd>&#160;and <kbd>skill</kbd> are two lists which we have to store.</p>
<p>The&#160;<kbd>pickle_file = open("emp1.dat","w")</kbd>&#160;syntax creates a&#160;<kbd>pickle_file</kbd>&#160;object in write mode as we have done earlier.</p>
<p>The <kbd>pickle.dump()</kbd> is used to dump and store the lists <kbd>name</kbd> and <kbd>skill</kbd>&#160;in the&#160;<kbd>pick.dat</kbd>&#160;file. The <kbd>pickle.dump()</kbd>&#160;requires two arguments, first the data (like list) to <kbd>pickle</kbd> and second the file to store it. The <kbd>pickle_file.close()</kbd> finally close the file. Let's see the output:</p>
<div class="CDPAlignCenter CDPAlign"><img height="268" width="325" class="image-border" src="images/file_figure13.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of pickle file</div>
<p>Now you must have an idea&#160;how to store complex data.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">Unpickling</h1>
            </header>

            <article>
                
<p>Unpickling means retrieving the data from the <kbd>pickle</kbd>&#160;file. In the previous topic, you learned&#160;how to store&#160;<kbd>(list, dictionary)</kbd> data in the&#160;<kbd>pickle</kbd> file; now it's time to retrieve the stored data.&#160;In order to perform unpickling, we will use <kbd>pickle.load()</kbd>. The <kbd>pickle.load()</kbd> takes one file object as an argument.</p>
<p>Let's see the program:</p>
<pre>import pickle<br/>pickle_file = open("emp1.dat",'r')<br/>name_list = pickle.load(pickle_file)<br/>skill_list =pickle.load(pickle_file)<br/>print name_list ,"n", skill_list
</pre>
<p>Let's understand the program line by line. The&#160;<kbd>pickle_file = open("emp1.dat",'r')</kbd> syntax creates a file object in read mode. The&#160;<kbd>name_list = pickle.load(pickle_file)</kbd> syntax reads the first pickled object in the file and unpickles it to produce the&#160;<kbd>['mohit', 'bhaskar', 'manish']</kbd> list. Similarly, &#160;<kbd>skill_list =pickle.load(pickle_file)</kbd> reads the second pickled object in the file and unpickles it to produce the&#160;<kbd>['Python', 'Python', 'Java']</kbd>&#160;list.</p>
<p>Let's see the output to clear up any confusion:</p>
<div class="CDPAlignCenter CDPAlign"><img height="117" width="508" class="image-border" src="images/file_figure14.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of filepickle2.py</div>
<p>In <kbd>pickle,</kbd> you can not access the data randomly. <kbd>Pickle</kbd> stores and retrieves the list sequentially.</p>
<p>The data you dump in the <kbd>pickle</kbd> file first, would be retrieved first. This is the limitation of the&#160;<kbd>pickle</kbd> file.</p>
<p>Given&#160;the limitation of the&#160;<kbd>pickle</kbd> file, you can't access the list randomly, but you can use the dictionary with lists to retrieve the lists randomly.</p>
<p>Consider the following example:</p>
<pre>leapx_team = {<br/>name : ["mohit", "Ravender", "Himmat", "Robbin"],<br/>skill : ["Python","Data Analytic", "Information Security", "SAP"]<br/>             }
</pre>
<p>By dumping this dictionary, you can access any list randomly.</p>
<p>Let's see the program:</p>
<pre>import pickle<br/>pickle_file = open("emp2.dat",'w')<br/>leapx_team = {<br/>     'name' : ["Mohit", "Ravender", "Himmat", "Robbin"],<br/>     'skill' : ["Python","Data Analytic", "Information Security", "SAP"]<br/>     }<br/>pickle.dump(leapx_team,pickle_file)<br/>pickle_file.close() 
</pre>
<p>In the preceding program, we have dumped a dictionary referred by name <kbd>leapx_team</kbd>. Run the preceding program and check the directory. A file named <kbd>emp2.dat</kbd> must be formed.</p>
<p>Let's retrieve the content of the&#160;<kbd>emp2.dat</kbd>&#160;file.</p>
<pre>import pickle<br/>pickle_file = open("emp2.dat",'r')<br/>all_data = pickle.load(pickle_file)<br/>print all_data["skill"]<br/>print all_data["name"] 
</pre>
<p>In the preceding program, <kbd>all_data</kbd> is the dictionary and we are accessing the values of the dictionary by keys.</p>
<p>Let's see&#160;the output:</p>
<div class="CDPAlignCenter CDPAlign"><img height="117" width="480" class="image-border" src="images/file_figure15.jpg"/></div>
<p>We are accessing the list randomly.</p>
<p>The <kbd>pickle</kbd> module is written in Python, while the&#160;<kbd>cPickle</kbd> module is written in C language, which is faster than the&#160;<kbd>pickle</kbd> module.</p>
<p>Let's see the example code in&#160;<kbd>filecpickle1.py</kbd>:</p>
<pre>import cPickle as pickle<br/>name = ["mohit","bhaskar", "manish"]<br/>skill = ["Python", "Python", "Java"]<br/>pickle_file = open("emp1.dat","w")<br/>pickle.dump(name,pickle_file)<br/>pickle.dump(skill,pickle_file)<br/>pickle_file.close()
</pre>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">Exceptions</h1>
            </header>

            <article>
                
<p>Consider you have created a program <kbd>calc.py</kbd>&#160;and that it&#160;is running successfully. After some time, a third person&#160;edits the program <kbd>calc.py</kbd>. While executing the program, the interpreter throws some error. Due to the error, the whole program stops working. How can we avoid this situation, where, if any error occurs, then the whole program execution does not suffer?</p>
<p>The answer is simple: just use exception handling. Errors detected during execution are called exceptions. In the next section, you will see the example in detail, where we will see how to use exception handling with the&#160;<kbd>try...except</kbd> clause.&#160;</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">The try statement with an except clause</h1>
            </header>

            <article>
                
<p>In this section, you will see how to use the&#160;<kbd>try...except</kbd> block to handle the exceptions. Let's understand the usage of the&#160;<kbd>try...except</kbd> block with examples.</p>
<p>Consider the following program:</p>
<pre>def sum1(a,b):<br/>            c = a+b<br/>            return c<br/>print sum1(10,0)
</pre>
<p>Consider that a third&#160;person edits the program <kbd>calc.py</kbd>; the full program is shown here:</p>
<pre>def sum1(a,b):<br/>            c = a+b<br/>            return c<br/>def divide(a,b):<br/>            c = a/b<br/>            return c          <br/>print divide(10,0)<br/>print sum1(10,0)
</pre>
<p>Let's run the program:</p>
<div class="CDPAlignCenter CDPAlign"><img height="141" width="450" class="image-border" src="images/file_figure16.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of calc.py</div>
<p>In the preceding output, the program is showing an&#160;error because we performed division by <kbd>0</kbd>. Due to one error, the whole program stop. In order to deal with the situation, we use the&#160;<kbd>try and except</kbd> blocks.</p>
<p>Let's see the program <kbd>calc.py</kbd>:</p>
<pre>def sum1(a,b):<br/>    try:<br/>        c = a+b<br/>        return c<br/>    except :<br/>         print "Error in sum1 function"<br/>def divide(a,b):<br/>    try:<br/>        c = a/b<br/>        return c<br/>    except :<br/>        print "Error in divide function"<br/>print divide(10,0)<br/>print sum1(10,0)
</pre>
<p>Let's run it again:</p>
<div class="CDPAlignCenter CDPAlign"><img height="117" width="365" class="image-border" src="images/file_figure_calc.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of calc.py</div>
<p>Now the&#160;<kbd>sum1()</kbd> function is giving the output&#160;<kbd>Error occurred in divide function</kbd>.</p>
<p>Let's discuss <kbd>try...except</kbd> in detail. First see the syntax:</p>
<pre>try:<br/>            operation block;<br/>except Exception_name:<br/>            If there is Exception_name1 then execute this block.<br/>except Exception_name2:<br/>            If there is Exception_name2, then execute this block.<br/> else:<br/>            If there is no exception then execute this block.
</pre>
<p>In the&#160;<kbd>calc.py</kbd>&#160;program, a call to divide raises an exception; the exception is caught and the crafted message is displayed:&#160;<kbd>Error in divide function</kbd>. If no exception is raised, the program skips the except clause, continuing with the rest of the code.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">Multiple exception blocks</h1>
            </header>

            <article>
                
<p>In previous example, you learned how to catch the exceptions. But you don't know the type of error that occurred. Every exception has a certain type. The types in the example are <kbd>ZeroDivisionError</kbd>, <kbd>NameError</kbd>, and <kbd>TypeError.</kbd> Type is written in the error message. Consider a different program <kbd>divide1.py</kbd>:</p>
<pre>def divide1():<br/>    num = int(raw_input("Enter the number "))<br/>    c = 45/num<br/>    print c<br/>divide1()
</pre>
<p>In the given program, when we give the input from the keyboard, the input string will be converted into int type.</p>
<p>Let's run program with different inputs:</p>
<div class="CDPAlignCenter CDPAlign"><img height="242" width="447" class="image-border" src="images/file_figure17.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of program divied.py</div>
<p>When we give the input <kbd>5</kbd>, then the program returns <kbd>9</kbd>. When we supply a string instead of a number, then the interpreter returns a message with a &#160;<kbd>ValueError</kbd> error as highlighted under red line. When number <kbd>0</kbd> is supplied, then <kbd>ZeroDivisionError</kbd> is returned. &#160;By using multiple exception blocks, you can handle both the exceptions.</p>
<p>Refer to&#160;the program <kbd>divide1.py</kbd>:</p>
<pre> def divide1():<br/>    try:<br/>        num = int(raw_input("Enter the number "))<br/>        c = 45/num         <br/>        print c     <br/>    except ValueError :         <br/>        print "Value is not int type" <br/>    except ZeroDivisionError : <br/>       print "Don't use zero" <br/>    else: <br/>      print "result is ",c<br/>divide1()
</pre>
<p>In the preceding program, multiple exceptions have been handled and a crafted message has been displayed. Let's see the output:</p>
<div class="CDPAlignCenter CDPAlign"><img height="195" width="425" class="image-border" src="images/file_figure18.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of program divide1.py</div>
<p>In the preceding output, customized messages have been displayed so that the user can understand his mistake.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">The try...finally statement</h1>
            </header>

            <article>
                
<p>In a situation where you are completely sure that a certain block of code will be executed whether the program throws exceptions or not, <kbd>try...finally</kbd> is useful. Consider the situation when you open a file and read the input, but for&#160;some reason the program throws an exception and the file you want is&#160;closed whether the exception occurs or not, then <kbd>try...finally</kbd> will solve the problem.</p>
<p>The syntax is as follows:</p>
<pre>try:<br/>              #run this action first<br/>except:<br/>             # Run if exception occurs<br/>Finally :<br/>               #Always run this code
</pre>
<p>The order of the statement should be:</p>
<pre>try -&gt; except -&gt; else -&gt; finally
</pre>
<p>Let's discuss the code in&#160;<kbd>finally1.py</kbd>:</p>
<pre>try: <br/>    num = int(raw_input("Enter the number ")) <br/>    re = 100/num <br/>except: <br/>    print "Something is wrong" <br/>else: <br/>    print "result is ",re <br/>finally : <br/>    print "finally program ends"
</pre>
<p>In the preceding code, we used <kbd>try</kbd>, <kbd>except</kbd>, <kbd>else</kbd>, and <kbd>finally</kbd> blocks. Let's discuss the functionality by executing the code:</p>
<div class="CDPAlignCenter CDPAlign"><img height="156" width="437" class="image-border" src="images/file_figure19.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of finally1.py</div>
<p>In the preceding output, in the first run, <kbd>10</kbd> has been provided as the input and &#160;<kbd>try</kbd>, <kbd>else</kbd>, and <kbd>finally</kbd> blocks have been executed. In the second run, a string <kbd>Mohit</kbd> has been supplied. Due to error in type conversion <kbd>except</kbd> and <kbd>finally</kbd> blocks have been executed.</p>
<p>With this you have seen the importance of the&#160;<kbd>finally</kbd> statement.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">The exception argument</h1>
            </header>

            <article>
                
<p>When you write a program, it is very mundane and tedious to write each and every exception type. Instead of writing each exception, you could use just one line. See the code in&#160;<kbd>exceptiontype.py</kbd>:</p>
<pre>try: <br/>    num = int(raw_input("Enter the number ")) <br/>    re = 100/num <br/>    print re<br/>except Exception as e : <br/>    print e, type(e)
</pre>
<p>The preceding code catches the exception as <kbd>e</kbd> and <kbd>type(e)</kbd> displays its exception type. Let's see the output. In the code,&#160;<kbd>e</kbd> is the argument of the exception: the contents referred by&#160;the argument vary by exception:</p>
<div class="CDPAlignCenter CDPAlign"><img height="160" width="530" class="image-border" src="images/file_figure20.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of program exceptiontype.py</div>
<p>You can see that we run the program three times. The first time we passed the value <kbd>10</kbd>. It runs successfully. In the second run, we passed string <kbd>'mohit'</kbd>, which&#160;is when the interpreter handled the exception and showed the exception message and its type. In third run, we passed <kbd>0</kbd>, which is when interpreter showed the corresponding exception message and its type.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">Raising exceptions</h1>
            </header>

            <article>
                
<p>The <kbd>raise</kbd> statement allows the programmer to trigger specific exceptions explicitly.</p>
<p>Consider the following example:</p>
<pre>&gt;&gt;&gt; raise IOError<br/>Traceback (most recent call last):<br/>   File "&lt;pyshell#0&gt;", line 1, in &lt;module&gt;<br/>      raise IOError<br/>IOError
</pre>
<p>In the preceding example, the specific exception <kbd>IOError</kbd> has been raised by the&#160;<kbd>raise</kbd> keyword:</p>
<pre>&gt;&gt;&gt; raise IOError("Hi there")<br/>Traceback (most recent call last):<br/> File "&lt;pyshell#1&gt;", line 1, in &lt;module&gt;<br/> raise IOError("Hi there")<br/>IOError: Hi there<br/>&gt;&gt;&gt;
</pre>
<p>In the preceding example, a string <kbd>"Hi there"</kbd> argument has been passed, which is printed with the exception.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">User-defined exceptions</h1>
            </header>

            <article>
                
<p>In this section, we will&#160;use classes, as you have not read the <a href="lrn-py-7d_ch11.html">Chapter 11</a>, <em>Class and Objects</em>, you can skip the topic and get back once you complete the class and objects.</p>
<p>Python allows you to define your own exceptions. Exceptions should be inherited from the <kbd>Exception</kbd> class.</p>
<p>Let's discuss with an example: &#160;</p>
<pre>class MyException(Exception): <br/>    def __init__(self, value):<br/>       self.value = value <br/>    def __str__(self):<br/>       return (self.value) <br/>try: <br/>     num = raw_input("Enter the number : ")<br/>     if num == '2':<br/>         raise MyException("ohh") <br/>     else :<br/>         print "number is not 2"<br/>except MyException : <br/>     print "My exception occurred"
</pre>
<p>Do not be afraid to see the full code.</p>
<p>Let's see the class part:</p>
<pre>class MyException(Exception): <br/>      def __init__(self, value):<br/>           self.value = value <br/>      def __str__(self):<br/>           return (self.value)
</pre>
<p>The preceding code defined the&#160;<kbd>MyException</kbd> class, which inherits the base class <kbd>Exception</kbd>.</p>
<p>In this example, the <kbd>default __init__()</kbd>&#160;exception has been overridden.</p>
<pre>try: <br/>    num = raw_input("Enter the number : ")<br/>    if num == '2':<br/>         raise MyException("ohh") <br/>    else :<br/>         print "number is not 2"<br/>except MyException : <br/>    print "My exception occurred"
</pre>
<p>The preceding code raises the user-defined exception if you pass the value <kbd>2</kbd>. The raised exception is handled by the&#160;<kbd>except</kbd> block.</p>
<p>See the output of the code:</p>
<div class="CDPAlignCenter CDPAlign"><img height="143" width="471" class="image-border" src="images/file_figure21.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of code userdefined.py</div>
<p>In the preceding code, if you pass the value <kbd>2</kbd>, then it gives a user-defined custom error. If you pass a number other than <kbd>2</kbd>, then no error occurs. Let's make some changes in the code to understand the example clearly.</p>
<p>See the program <kbd>userdefined2.py</kbd>:</p>
<pre>class MyException(Exception): <br/>    def __init__(self, value):<br/>        self.value = value <br/>    def __str__(self):<br/>        return (self.value) <br/>try: <br/>     num = raw_input("Enter the number : ")<br/>     if num == '2':<br/>          raise MyException("ohh") <br/>     else :<br/>          print "number is not 2"<br/>except IOError: <br/>      print "My exception occurred"
</pre>
<p>Just the&#160;<kbd>except</kbd> block has been changed. Now, the&#160;<kbd>except</kbd> block is only handling <kbd>IOError</kbd> not <kbd>MyException</kbd>.</p>
<p>Let's see the output:</p>
<div class="CDPAlignCenter CDPAlign"><img height="158" width="439" class="image-border" src="images/file_figure22.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of program userdefind2.py</div>
<p>When you pass a value other than <kbd>2</kbd>, then the&#160;<kbd>MyException</kbd> exception is raised and the except block does not&#160;handle the raised exception. The interpreter shows the error with an exception type.</p>
<p>If you do not want to print an exception message, you can use pass the statement&#160;<kbd>except: pass</kbd>.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">Summary</h1>
            </header>

            <article>
                
<p>In this chapter, you learned how to read data from text files. You learned how to write data to the text files. Text files are not a good choice to store complex data such as&#160;list and dictionary. In order to store complex data, we have used <kbd>pickle</kbd> files. After that, you learned to handle&#160;exceptions. Without handling exceptions you cannot write standard code. In exceptions, you learned how to handle multiple exceptions and how to print its exception type. In end of the chapter,&#160;you learned how to create your own exception.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>
</body>
</html>