<html><head></head><body>
<div id="_idContainer066">
<h1 class="chapter-number" id="_idParaDest-111"><a id="_idTextAnchor142"/><span class="koboSpan" id="kobo.1.1">7</span></h1>
<h1 id="_idParaDest-112"><a id="_idTextAnchor143"/><span class="koboSpan" id="kobo.2.1">React Unit Testing</span></h1>
<p><span class="koboSpan" id="kobo.3.1">We sufficiently discussed the fundamentals of React in the preceding chapters. </span><span class="koboSpan" id="kobo.3.2">You have been exposed to React tools and resources to master modern frontend techniques in your full stack development journey. </span><span class="koboSpan" id="kobo.3.3">We explored in-depth useful information required to build rich interactive interfaces with React. </span><span class="koboSpan" id="kobo.3.4">We discussed the topics of components, props and state, JSX, event handling, forms, and routing </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">in React.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">In this chapter, we will focus on unit testing in React applications, a type of software testing that focuses on isolated piece(s) of code. </span><span class="koboSpan" id="kobo.5.2">Also, we will explore </span><strong class="bold"><span class="koboSpan" id="kobo.6.1">Jest</span></strong><span class="koboSpan" id="kobo.7.1">, a Node-based test</span><a id="_idIndexMarker391"/><span class="koboSpan" id="kobo.8.1"> runner. </span><span class="koboSpan" id="kobo.8.2">The test runner allows you to discover test files, run tests, and find out whether tests passed or failed automatically. </span><span class="koboSpan" id="kobo.8.3">You will then end with a report in a very clear, expressive, and </span><span class="No-Break"><span class="koboSpan" id="kobo.9.1">human-readable format.</span></span></p>
<p><span class="koboSpan" id="kobo.10.1">Jest is a popular testing framework developed with React in mind. </span><span class="koboSpan" id="kobo.10.2">The project was formally owned by </span><em class="italic"><span class="koboSpan" id="kobo.11.1">Meta</span></em><span class="koboSpan" id="kobo.12.1">, the same company behind React. </span><span class="koboSpan" id="kobo.12.2">However, with the recent transfer of Jest from Meta to the </span><em class="italic"><span class="koboSpan" id="kobo.13.1">OpenJs Foundation</span></em><span class="koboSpan" id="kobo.14.1">, Jest now has an independent core team working actively on it to ensure stability, security, and code bases that can stand the test </span><span class="No-Break"><span class="koboSpan" id="kobo.15.1">of time.</span></span></p>
<p><span class="koboSpan" id="kobo.16.1">In addition, we will briefly examine a useful testing tool in the React ecosystem – the </span><strong class="bold"><span class="koboSpan" id="kobo.17.1">React Testing Library</span></strong><span class="koboSpan" id="kobo.18.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.19.1">RTL</span></strong><span class="koboSpan" id="kobo.20.1">). </span><span class="koboSpan" id="kobo.20.2">This library provides us with arrays of methods to virtually run tests on </span><span class="No-Break"><span class="koboSpan" id="kobo.21.1">React components.</span></span></p>
<p><span class="koboSpan" id="kobo.22.1">Finally, in this chapter, we will deep-dive into </span><strong class="bold"><span class="koboSpan" id="kobo.23.1">test-driven development</span></strong><span class="koboSpan" id="kobo.24.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.25.1">TDD</span></strong><span class="koboSpan" id="kobo.26.1">), a software development paradigm</span><a id="_idIndexMarker392"/><span class="koboSpan" id="kobo.27.1"> that places priority on test implementation before actual coding. </span><span class="koboSpan" id="kobo.27.2">The coding and testing are interlaced. </span><span class="koboSpan" id="kobo.27.3">Testing always comes first, although it is obviously not a fun part of the software </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">development process.</span></span></p>
<p><span class="koboSpan" id="kobo.29.1">Most experienced developers still struggle with testing just as beginners do. </span><span class="koboSpan" id="kobo.29.2">Companies have different policies around testing, but in real-world development, you can’t have industrial-strength web applications </span><span class="No-Break"><span class="koboSpan" id="kobo.30.1">without testing.</span></span></p>
<p><span class="koboSpan" id="kobo.31.1">Testing ensures that you follow the best practice of the software development life cycle and that you and your application end users have confidence in your web application functionalities. </span><span class="koboSpan" id="kobo.31.2">With appropriate testing, the features of your web application will perform efficiently </span><span class="No-Break"><span class="koboSpan" id="kobo.32.1">as expected.</span></span></p>
<p><span class="koboSpan" id="kobo.33.1">In this chapter, we’ll cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.34.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.35.1">What is </span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">software testing?</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.37.1">Introducing Jest</span></span></li>
<li><span class="koboSpan" id="kobo.38.1">Writing tests </span><span class="No-Break"><span class="koboSpan" id="kobo.39.1">in Jest</span></span></li>
<li><span class="koboSpan" id="kobo.40.1">Unit-testing </span><span class="No-Break"><span class="koboSpan" id="kobo.41.1">React components</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.42.1">TDD</span></span></li>
</ul>
<h1 id="_idParaDest-113"><a id="_idTextAnchor144"/><span class="koboSpan" id="kobo.43.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.44.1">The complete code for this chapter is available on GitHub </span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">at: </span></span><a href="https://github.com/PacktPublishing/Full-Stack-Flask-and-React/tree/main/Chapter07"><span class="No-Break"><span class="koboSpan" id="kobo.46.1">https://github.com/PacktPublishing/Full-Stack-Flask-and-React/tree/main/Chapter07</span></span></a></p>
<h1 id="_idParaDest-114"><a id="_idTextAnchor145"/><span class="koboSpan" id="kobo.47.1">What is software testing?</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.48.1">Software testing</span></strong><span class="koboSpan" id="kobo.49.1"> is a process that ensures all the pieces of code</span><a id="_idIndexMarker393"/><span class="koboSpan" id="kobo.50.1"> in software or application development work as expected by all stakeholders. </span><span class="koboSpan" id="kobo.50.2">The process of testing is one of the key phases in software development life cycles that explains the standardized methodology of designing and developing </span><span class="No-Break"><span class="koboSpan" id="kobo.51.1">an application.</span></span></p>
<p><span class="koboSpan" id="kobo.52.1">Software testing ensures that web applications have fewer bugs, technical requirements are implemented as expected efficiently, development costs are reduced, and ultimately, business needs </span><span class="No-Break"><span class="koboSpan" id="kobo.53.1">are met.</span></span></p>
<p><span class="koboSpan" id="kobo.54.1">Interestingly, testing, if carried out effectively, usually gives software engineers the confidence to know full well that the product they ship to production is maintainable, readable, reliable, and </span><span class="No-Break"><span class="koboSpan" id="kobo.55.1">well structured.</span></span></p>
<p><span class="koboSpan" id="kobo.56.1">This creates less panic about possible costly bugs in an application, which may cost a company embarrassment or the erosion of customers’ confidence. </span><span class="koboSpan" id="kobo.56.2">There are various types of software testing worthy of note – unit testing, integration testing, performance testing, usability testing, acceptance testing, and </span><span class="No-Break"><span class="koboSpan" id="kobo.57.1">regression testing.</span></span></p>
<p><span class="koboSpan" id="kobo.58.1">Let’s briefly discuss the types of testing that we have in software development to refresh our minds and have a solid base to build on in the </span><span class="No-Break"><span class="koboSpan" id="kobo.59.1">subsequent sections.</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.60.1">Unit testing</span></strong><span class="koboSpan" id="kobo.61.1">: In this type of testing, the smallest piece</span><a id="_idIndexMarker394"/><span class="koboSpan" id="kobo.62.1"> of code or unit in software</span><a id="_idIndexMarker395"/><span class="koboSpan" id="kobo.63.1"> or application development is tested. </span><span class="koboSpan" id="kobo.63.2">In unit testing, you systematically go through three stages – planning, case scripting, and testing. </span><span class="koboSpan" id="kobo.63.3">You are primarily concerned with the functionality of the independent units of your application. </span><span class="koboSpan" id="kobo.63.4">In the </span><em class="italic"><span class="koboSpan" id="kobo.64.1">Unit-testing React components</span></em><span class="koboSpan" id="kobo.65.1"> section, we will deep-dive into unit testing and how you can implement unit tests in your </span><span class="No-Break"><span class="koboSpan" id="kobo.66.1">React applications.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.67.1">Integration testing</span></strong><span class="koboSpan" id="kobo.68.1">: In this type of testing, groups</span><a id="_idIndexMarker396"/><span class="koboSpan" id="kobo.69.1"> of individual units of codes</span><a id="_idIndexMarker397"/><span class="koboSpan" id="kobo.70.1"> are combined and tested for effective interaction with </span><span class="No-Break"><span class="koboSpan" id="kobo.71.1">one another.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.72.1">Performance testing</span></strong><span class="koboSpan" id="kobo.73.1">: In this type of testing, the speed</span><a id="_idIndexMarker398"/><span class="koboSpan" id="kobo.74.1"> and effectiveness of your application</span><a id="_idIndexMarker399"/><span class="koboSpan" id="kobo.75.1"> are tested against a given workload. </span><span class="koboSpan" id="kobo.75.2">This approach is used to identify early bottlenecks in the smooth running of a </span><span class="No-Break"><span class="koboSpan" id="kobo.76.1">software application.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.77.1">Usability testing</span></strong><span class="koboSpan" id="kobo.78.1">: In this type of testing, intended users</span><a id="_idIndexMarker400"/><span class="koboSpan" id="kobo.79.1"> of your application are allowed</span><a id="_idIndexMarker401"/><span class="koboSpan" id="kobo.80.1"> to get a feel for your product. </span><span class="koboSpan" id="kobo.80.2">The feedback from direct evaluations of your application design through usability testing ensures you are able to capture users’ frustration while interacting with your application so early. </span><span class="koboSpan" id="kobo.80.3">The report on usability testing can also provide other useful insights that might improve </span><span class="No-Break"><span class="koboSpan" id="kobo.81.1">your product.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.82.1">Acceptance testing</span></strong><span class="koboSpan" id="kobo.83.1">: In this type of testing, client satisfaction </span><a id="_idIndexMarker402"/><span class="koboSpan" id="kobo.84.1">is gauged – customer requirements</span><a id="_idIndexMarker403"/><span class="koboSpan" id="kobo.85.1"> are evaluated against a developed software or application. </span><span class="koboSpan" id="kobo.85.2">The customer is able to check that those requirements are captured properly and work </span><span class="No-Break"><span class="koboSpan" id="kobo.86.1">as expected.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.87.1">Regression testing</span></strong><span class="koboSpan" id="kobo.88.1">: In this type of testing, we check</span><a id="_idIndexMarker404"/><span class="koboSpan" id="kobo.89.1"> whether code changes</span><a id="_idIndexMarker405"/><span class="koboSpan" id="kobo.90.1"> occasioned by the addition of new functionality into your software or application do not break down the previously tested working functionality. </span><span class="koboSpan" id="kobo.90.2">Regression prevents the introduction of errors or unintended side effects as a result of modifying the code base of your application. </span><span class="koboSpan" id="kobo.90.3">With regression testing, all test cases are rerun so that no new bugs </span><span class="No-Break"><span class="koboSpan" id="kobo.91.1">are introduced.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.92.1">Next, we will explore one of the leading testing frameworks you can confidently work with when testing the functionality of your </span><span class="No-Break"><span class="koboSpan" id="kobo.93.1">frontend applications.</span></span></p>
<h1 id="_idParaDest-115"><a id="_idTextAnchor146"/><span class="koboSpan" id="kobo.94.1">Introducing Jest</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.95.1">Jest</span></strong><span class="koboSpan" id="kobo.96.1"> is an open source, robust, well-documented, fast, and safe</span><a id="_idIndexMarker406"/><span class="koboSpan" id="kobo.97.1"> JavaScript testing framework. </span><span class="koboSpan" id="kobo.97.2">Jest provides the tools and resources that you need to have absolute confidence in your JavaScript code base. </span><span class="koboSpan" id="kobo.97.3">Testing is fundamental to quality code writing, and Jest with almost zero configuration delightfully handles </span><span class="No-Break"><span class="koboSpan" id="kobo.98.1">test implementation.</span></span></p>
<p><span class="koboSpan" id="kobo.99.1">Jest is very popular in the JavaScript community. </span><span class="koboSpan" id="kobo.99.2">You can write tests in Jest leveraging its feature-rich set of APIs, such as matchers, mocked functions, code coverage, and snapshot testing. </span><span class="koboSpan" id="kobo.99.3">Jest can be used to test React components, and the React team actually recommends Jest to test </span><span class="No-Break"><span class="koboSpan" id="kobo.100.1">React projects.</span></span></p>
<p><span class="koboSpan" id="kobo.101.1">Jest is a Node.js test runner, which means that the tests always run in a Node environment. </span><span class="koboSpan" id="kobo.101.2">Jest is built with performance in mind. </span><span class="koboSpan" id="kobo.101.3">You can run a suite of tests in parallel effectively. </span><span class="koboSpan" id="kobo.101.4">The Jest toolkit comes with code coverage that enables you to have information about tested and untested files in your project. </span><span class="koboSpan" id="kobo.101.5">And when your tests fail, you are provided with insightful information about why </span><span class="No-Break"><span class="koboSpan" id="kobo.102.1">they failed.</span></span></p>
<p><span class="koboSpan" id="kobo.103.1">Let’s set up a Jest environment </span><span class="No-Break"><span class="koboSpan" id="kobo.104.1">for testing.</span></span></p>
<h2 id="_idParaDest-116"><a id="_idTextAnchor147"/><span class="koboSpan" id="kobo.105.1">Setting up the Jest environment</span></h2>
<p><span class="koboSpan" id="kobo.106.1">Node.js is required</span><a id="_idIndexMarker407"/><span class="koboSpan" id="kobo.107.1"> for Jest to run. </span><span class="koboSpan" id="kobo.107.2">Jest comes with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.108.1">npx create-react-app</span></strong><span class="koboSpan" id="kobo.109.1"> command we used to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.110.1">create-react-app</span></strong><span class="koboSpan" id="kobo.111.1"> boilerplate code in </span><a href="B18554_02.xhtml#_idTextAnchor038"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.112.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.113.1">, </span><em class="italic"><span class="koboSpan" id="kobo.114.1">Getting Started </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.115.1">with React</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.116.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.117.1">In this section, we will create a new working folder named </span><strong class="source-inline"><span class="koboSpan" id="kobo.118.1">bizza-test</span></strong><span class="koboSpan" id="kobo.119.1"> to better explore how Jest works with JavaScript</span><a id="_idIndexMarker408"/><span class="koboSpan" id="kobo.120.1"> functions, before we move on to using it in the unit testing of </span><span class="No-Break"><span class="koboSpan" id="kobo.121.1">React components:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.122.1">Inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.123.1">path/to/bizza-test/</span></strong><span class="koboSpan" id="kobo.124.1">, let’s execute the following commands in </span><span class="No-Break"><span class="koboSpan" id="kobo.125.1">the terminal:</span></span><ol><li class="upper-roman"><span class="koboSpan" id="kobo.126.1">Run </span><strong class="source-inline"><span class="koboSpan" id="kobo.127.1">npm init -y</span></strong><span class="koboSpan" id="kobo.128.1"> in the </span><span class="No-Break"><span class="koboSpan" id="kobo.129.1">command terminal.</span></span></li>
<li class="upper-roman"><span class="koboSpan" id="kobo.130.1">Install Jest as a dependency in the working folder (</span><strong class="source-inline"><span class="koboSpan" id="kobo.131.1">bizza-test</span></strong><span class="koboSpan" id="kobo.132.1">) with </span><strong class="source-inline"><span class="koboSpan" id="kobo.133.1">npm install --</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.134.1">save-dev jest</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.135.1">.</span></span></li>
</ol></li>
<li><span class="koboSpan" id="kobo.136.1">Update the </span><strong class="source-inline"><span class="koboSpan" id="kobo.137.1">package.json</span></strong><span class="koboSpan" id="kobo.138.1"> to be able to run Jest via </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.139.1">npm test</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.140.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.141.1">"scripts": {              "test": "jest"}</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.142.1">The complete </span><strong class="source-inline"><span class="koboSpan" id="kobo.143.1">package.json</span></strong><span class="koboSpan" id="kobo.144.1"> should look </span><span class="No-Break"><span class="koboSpan" id="kobo.145.1">like this:</span></span></p><pre class="source-code"><span class="koboSpan" id="kobo.146.1">{  "name": "bizza-test",  "version": "1.0.0",  "description": "",  "main": "index.js",  "scripts": {    "test": "jest"  },  "keywords": [],  "author": "",  "license": "ISC",  "devDependencies": {    "jest": "^29.2.1"  }}</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.147.1">The following is a screenshot showing the installation of Jest in </span><span class="No-Break"><span class="koboSpan" id="kobo.148.1">the terminal.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer055">
<span class="koboSpan" id="kobo.149.1"><img alt="Figure 7.1 – A screenshot of the Jest library setup" src="image/Figure_7.1_B18554.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.150.1">Figure 7.1 – A screenshot of the Jest library setup</span></p>
<p><span class="koboSpan" id="kobo.151.1">With this set, you are on the right path</span><a id="_idIndexMarker409"/><span class="koboSpan" id="kobo.152.1"> to run your test. </span><span class="koboSpan" id="kobo.152.2">Next, we will explore some key testing terminologies and write the </span><span class="No-Break"><span class="koboSpan" id="kobo.153.1">actual tests.</span></span></p>
<h2 id="_idParaDest-117"><a id="_idTextAnchor148"/><span class="koboSpan" id="kobo.154.1">Writing tests in Jest</span></h2>
<p><span class="koboSpan" id="kobo.155.1">Now that we have</span><a id="_idIndexMarker410"/><span class="koboSpan" id="kobo.156.1"> set up the test</span><a id="_idIndexMarker411"/><span class="koboSpan" id="kobo.157.1"> running environment, let’s briefly understand some of the keywords we will encounter in this section. </span><span class="koboSpan" id="kobo.157.2">In Jest, you have some test keywords and functions from the Jest API to structure your tests; let’s </span><span class="No-Break"><span class="koboSpan" id="kobo.158.1">examine them:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.159.1">test()</span></strong><span class="koboSpan" id="kobo.160.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.161.1">it()</span></strong><span class="koboSpan" id="kobo.162.1">: This is a descriptive unit test or test case. </span><span class="koboSpan" id="kobo.162.2">It contains three parameters – a descriptive test case string, a function that contains the expectations to test, and an optional timeout argument, specifying how long to wait before aborting a test case. </span><span class="koboSpan" id="kobo.162.3">The default timeout is </span><span class="No-Break"><span class="koboSpan" id="kobo.163.1">five seconds:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.164.1">test(name, fn, timeout)test("&lt;test case name&gt;", ()=&gt;{              ...    })</span></pre></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.165.1">describe()</span></strong><span class="koboSpan" id="kobo.166.1">: This groups related test cases together. </span><span class="koboSpan" id="kobo.166.2">It is used to group several related tests and describe their behaviors. </span><strong class="source-inline"><span class="koboSpan" id="kobo.167.1">describe()</span></strong><span class="koboSpan" id="kobo.168.1"> takes two parameters – a string describing your test group and a callback function that holds </span><span class="No-Break"><span class="koboSpan" id="kobo.169.1">test cases:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.170.1">describe(name, fn)describe("&lt;your test group name&gt;", ()=&gt;{    test("&lt;test case name&gt;",()=&gt;{      ...    });    ...    test("&lt;test case name&gt;",()=&gt;{      ...    });})</span></pre></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.171.1">beforeAll()</span></strong><span class="koboSpan" id="kobo.172.1">: This function is run before any of the tests in the test file run. </span><span class="koboSpan" id="kobo.172.2">And when you have a promise or generator returned from a function, Jest waits for that promise to resolve before </span><span class="No-Break"><span class="koboSpan" id="kobo.173.1">running tests:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.174.1">beforeAll(fn, timeout)</span></pre></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.175.1">beforeEach()</span></strong><span class="koboSpan" id="kobo.176.1">: This function runs before each of the tests in the test file runs. </span><span class="koboSpan" id="kobo.176.2">When you have a promise or generator returned from a function, Jest waits for that promise to resolve before running tests </span><span class="No-Break"><span class="koboSpan" id="kobo.177.1">as well.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.178.1">expect()</span></strong><span class="koboSpan" id="kobo.179.1">: In writing a test, you will need to check that a value meets certain conditions at the very least. </span><strong class="source-inline"><span class="koboSpan" id="kobo.180.1">expect()</span></strong><span class="koboSpan" id="kobo.181.1"> allows you to conditionally check a value with the help of matchers, which we will talk about in a little while. </span><span class="koboSpan" id="kobo.181.2">It is noteworthy that there are situations whereby a single test case could have multiple </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.182.1">expect()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.183.1"> functions:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.184.1">test("&lt;test case name&gt;",()=&gt;{    ...    expect(value);    ...})</span></pre></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.185.1">Matchers</span></strong><span class="koboSpan" id="kobo.186.1">: Jest uses matchers to test value validation. </span><span class="koboSpan" id="kobo.186.2">A matcher lets you test values in different ways to make the </span><span class="No-Break"><span class="koboSpan" id="kobo.187.1">right assertion.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.188.1">Assertion</span></strong><span class="koboSpan" id="kobo.189.1">: An assertion is defined as an expression that contains testable logic to verify assumptions made by programmers about a specific piece of code. </span><span class="koboSpan" id="kobo.189.2">This allows you to identify errors and other defects in </span><span class="No-Break"><span class="koboSpan" id="kobo.190.1">your application.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.191.1">So, with all these functions</span><a id="_idIndexMarker412"/><span class="koboSpan" id="kobo.192.1"> and terms </span><a id="_idIndexMarker413"/><span class="koboSpan" id="kobo.193.1">well defined, let’s write our first </span><span class="No-Break"><span class="koboSpan" id="kobo.194.1">test suite:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.195.1">Inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.196.1">bizza-test</span></strong><span class="koboSpan" id="kobo.197.1"> working directory, create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.198.1">__tests__</span></strong><span class="koboSpan" id="kobo.199.1"> folder. </span><span class="koboSpan" id="kobo.199.2">Jest searches your working directory for </span><strong class="source-inline"><span class="koboSpan" id="kobo.200.1">__tests__</span></strong><span class="koboSpan" id="kobo.201.1"> or a test suite file ending with </span><strong class="source-inline"><span class="koboSpan" id="kobo.202.1">.test.js</span></strong><span class="koboSpan" id="kobo.203.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.204.1">.spec.js</span></strong><span class="koboSpan" id="kobo.205.1">, and then it runs the file or all the files in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.206.1">__tests__</span></strong><span class="koboSpan" id="kobo.207.1"> folder. </span><span class="koboSpan" id="kobo.207.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.208.1">__tests__</span></strong><span class="koboSpan" id="kobo.209.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.210.1">.test.js</span></strong><span class="koboSpan" id="kobo.211.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.212.1">.spec.js</span></strong><span class="koboSpan" id="kobo.213.1"> trio are test </span><span class="No-Break"><span class="koboSpan" id="kobo.214.1">naming conventions.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.215.1">To name the test directory in this book, we will adopt the naming convention </span><strong class="source-inline"><span class="koboSpan" id="kobo.216.1">__tests__</span></strong><span class="koboSpan" id="kobo.217.1"> case; create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.218.1">__tests__</span></strong><span class="koboSpan" id="kobo.219.1"> directory inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.220.1">path/to/bizza-test/</span></strong><span class="koboSpan" id="kobo.221.1">. </span><span class="koboSpan" id="kobo.221.2">This is the folder</span><a id="_idIndexMarker414"/><span class="koboSpan" id="kobo.222.1"> we will keep the testing</span><a id="_idIndexMarker415"/> <span class="No-Break"><span class="koboSpan" id="kobo.223.1">files in.</span></span></p></li>
<li><span class="koboSpan" id="kobo.224.1">Now, create </span><strong class="source-inline"><span class="koboSpan" id="kobo.225.1">basicFunctions.js</span></strong><span class="koboSpan" id="kobo.226.1"> inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.227.1">bizza-test</span></strong><span class="koboSpan" id="kobo.228.1"> directory and add the following snippet </span><span class="No-Break"><span class="koboSpan" id="kobo.229.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.230.1">basicFunctions.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.231.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.232.1">const basicFunctions = {    multiply:(number1, number2) =&gt; number1 * number2}Module.exports = basicFunctions;</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.233.1">This snippet depicts a small JS function that multiplies two </span><span class="No-Break"><span class="koboSpan" id="kobo.234.1">numbers together.</span></span></p></li>
<li><span class="koboSpan" id="kobo.235.1">Inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.236.1">__tests__</span></strong><span class="koboSpan" id="kobo.237.1">, create a test suite file, </span><strong class="source-inline"><span class="koboSpan" id="kobo.238.1">basicFunctions.test.js</span></strong><span class="koboSpan" id="kobo.239.1">, and paste the following </span><span class="No-Break"><span class="koboSpan" id="kobo.240.1">code snippet:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.241.1">const basicFunctions = require ('../basicFunctions');test ('Multiply 9 * 5 to equal 45', () =&gt; {    expect (basicFunctions.multiply(9, 5)).toBe(45);});</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.242.1">Let’s briefly explain the working of the preceding test </span><span class="No-Break"><span class="koboSpan" id="kobo.243.1">file code:</span></span></p><ul><li><span class="koboSpan" id="kobo.244.1">The first line imports the </span><strong class="source-inline"><span class="koboSpan" id="kobo.245.1">basicFunctions.js</span></strong><span class="koboSpan" id="kobo.246.1"> module we want to test </span><span class="No-Break"><span class="koboSpan" id="kobo.247.1">into scope.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.248.1">Test()</span></strong><span class="koboSpan" id="kobo.249.1"> sets the test case description with its function to verify that the multiplication of </span><strong class="source-inline"><span class="koboSpan" id="kobo.250.1">9</span></strong><span class="koboSpan" id="kobo.251.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.252.1">5</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.253.1">equals </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.254.1">45</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.255.1">.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.256.1">toBe(45)</span></strong><span class="koboSpan" id="kobo.257.1"> lets us know we expect to have </span><strong class="source-inline"><span class="koboSpan" id="kobo.258.1">45</span></strong><span class="koboSpan" id="kobo.259.1"> as the expected result. </span><span class="koboSpan" id="kobo.259.2">If it’s anything else, the test </span><span class="No-Break"><span class="koboSpan" id="kobo.260.1">will fail.</span></span></li>
<li><span class="koboSpan" id="kobo.261.1">Then, inside the Terminal, run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.262.1">npm </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.263.1">test</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.264.1"> command.</span></span></li>
</ul><p class="list-inset"><span class="koboSpan" id="kobo.265.1">The following screenshot shows the output after running the </span><strong class="source-inline"><span class="koboSpan" id="kobo.266.1">npm </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.267.1">test</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.268.1"> command:</span></span></p></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer056">
<span class="koboSpan" id="kobo.269.1"><img alt="Figure 7.2 – Showing the screenshot for the test case output" src="image/Figure_7.2_B18554.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.270.1">Figure 7.2 – Showing the screenshot for the test case output</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.271.1">The preceding demonstrates</span><a id="_idIndexMarker416"/><span class="koboSpan" id="kobo.272.1"> how testing works</span><a id="_idIndexMarker417"/> <span class="No-Break"><span class="koboSpan" id="kobo.273.1">in Jest.</span></span></p>
<p><span class="koboSpan" id="kobo.274.1">Now, with these solid fundamentals on how we test simple JS functions, let’s dive into unit-testing </span><span class="No-Break"><span class="koboSpan" id="kobo.275.1">React components.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.276.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.277.1">A list of Jest’s useful functions</span><a id="_idIndexMarker418"/><span class="koboSpan" id="kobo.278.1"> can be found </span><span class="No-Break"><span class="koboSpan" id="kobo.279.1">here: </span></span><a href="https://jestjs.io/docs/api"><span class="No-Break"><span class="koboSpan" id="kobo.280.1">https://jestjs.io/docs/api</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.281.1">.</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.282.1">A list of commonly</span><a id="_idIndexMarker419"/><span class="koboSpan" id="kobo.283.1"> used matchers can also be found </span><span class="No-Break"><span class="koboSpan" id="kobo.284.1">at </span></span><a href="https://jestjs.io/docs/expect"><span class="No-Break"><span class="koboSpan" id="kobo.285.1">https://jestjs.io/docs/expect</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.286.1">.</span></span></p>
<h1 id="_idParaDest-118"><a id="_idTextAnchor149"/><span class="koboSpan" id="kobo.287.1">Unit-testing React components</span></h1>
<p><span class="koboSpan" id="kobo.288.1">React is hinged on the component-driven development</span><a id="_idIndexMarker420"/><span class="koboSpan" id="kobo.289.1"> philosophy, and testing</span><a id="_idIndexMarker421"/><span class="koboSpan" id="kobo.290.1"> a unit of a React component further takes us closer to the basic elements that make up a React component. </span><span class="koboSpan" id="kobo.290.2">The essence of unit testing is to test an individual chunk of code to ascertain that the functionality works as expected by </span><span class="No-Break"><span class="koboSpan" id="kobo.291.1">the users.</span></span></p>
<p><span class="koboSpan" id="kobo.292.1">As stated earlier, in unit testing, you systematically go through three stages – planning, case scripting, and testing. </span><span class="koboSpan" id="kobo.292.2">Writing a unit test should be thoroughly planned, descriptive test cases should be implemented, and assertions should be clear enough to be understood by everyone on </span><span class="No-Break"><span class="koboSpan" id="kobo.293.1">the team.</span></span></p>
<p><span class="koboSpan" id="kobo.294.1">However, before we delve into unit-testing a React component, how do we know what to test in a React application? </span><span class="koboSpan" id="kobo.294.2">It is simple. </span><span class="koboSpan" id="kobo.294.3">Every React application has one or more components with specific functions. </span><span class="koboSpan" id="kobo.294.4">So, what to test in a React application is subjective. </span><span class="koboSpan" id="kobo.294.5">Every project is different and so is the functionality of the applications. </span><span class="koboSpan" id="kobo.294.6">The application features to test in an e-commerce web application will be different from features of interest to test in a social </span><span class="No-Break"><span class="koboSpan" id="kobo.295.1">media application.</span></span></p>
<p><span class="koboSpan" id="kobo.296.1">However, there are general rules of thumb for selecting features to test. </span><span class="koboSpan" id="kobo.296.2">In application development, testing provides us with confidence and assurance that our software product still works as expected, even with code refactoring. </span><span class="koboSpan" id="kobo.296.3">It then boils down basically to the business values of those functions, in addition to those functionalities that significantly impact the end user experience with </span><span class="No-Break"><span class="koboSpan" id="kobo.297.1">your application.</span></span></p>
<p><span class="koboSpan" id="kobo.298.1">To test React components, there</span><a id="_idIndexMarker422"/><span class="koboSpan" id="kobo.299.1"> is another simple, useful testing tool called RTL. </span><span class="koboSpan" id="kobo.299.2">RTL can be used along with Jest to achieve React components testing objectives. </span><span class="koboSpan" id="kobo.299.3">RTL lets you test your component units just as a real user of your application would interact with your </span><span class="No-Break"><span class="koboSpan" id="kobo.300.1">application UI.</span></span></p>
<p><span class="koboSpan" id="kobo.301.1">Whereas Jest is a test runner to find tests in a testing environment, run the tests, and affirm whether the tests fail or pass, RTL provides utility functions on top of VDOM. </span><span class="koboSpan" id="kobo.301.2">You will come across methods such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.302.1">render()</span></strong><span class="koboSpan" id="kobo.303.1"> to simulate the rendering of components, </span><strong class="source-inline"><span class="koboSpan" id="kobo.304.1">fireEvent</span></strong><span class="koboSpan" id="kobo.305.1"> to dispatch a desired event as if a user interacts with the browser, and a screen to query the </span><span class="No-Break"><span class="koboSpan" id="kobo.306.1">rendered elements.</span></span></p>
<p><span class="koboSpan" id="kobo.307.1">RTL also uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.308.1">waitFor()</span></strong><span class="koboSpan" id="kobo.309.1"> method to wait for asynchronous codes and </span><strong class="source-inline"><span class="koboSpan" id="kobo.310.1">expect()</span></strong><span class="koboSpan" id="kobo.311.1">, which is a function used for making assertions, determining whether the expected outcomes match the actual outcomes, and indicating success or failure.With a React project set up using </span><strong class="source-inline"><span class="koboSpan" id="kobo.312.1">npx create-react-app</span></strong><span class="koboSpan" id="kobo.313.1">, you don’t have to explicitly install RTL. </span><span class="koboSpan" id="kobo.313.2">In a real-world application development environment, you would want to test that your components work as expected. </span><span class="koboSpan" id="kobo.313.3">RTL facilitates a simulation of how users would interact with </span><span class="No-Break"><span class="koboSpan" id="kobo.314.1">your component.</span></span></p>
<p><span class="koboSpan" id="kobo.315.1">This is achievable with the in-built utility in RTL</span><a id="_idIndexMarker423"/><span class="koboSpan" id="kobo.316.1"> that allows you to write tests that interact with DOM</span><a id="_idIndexMarker424"/><span class="koboSpan" id="kobo.317.1"> nodes directly, without actually rendering React components. </span><span class="koboSpan" id="kobo.317.2">Shortly, we will dive into the implementation of how RTL closely mimics how humans can interact with a React application UI in both stateless and </span><span class="No-Break"><span class="koboSpan" id="kobo.318.1">stateful components.</span></span></p>
<p><span class="koboSpan" id="kobo.319.1">Let’s start by writing a simple unit test to check whether a </span><span class="No-Break"><span class="koboSpan" id="kobo.320.1">component renders.</span></span></p>
<h2 id="_idParaDest-119"><a id="_idTextAnchor150"/><span class="koboSpan" id="kobo.321.1">Writing a unit test for a stateless component</span></h2>
<p><span class="koboSpan" id="kobo.322.1">For testing purposes, let’s create</span><a id="_idIndexMarker425"/><span class="koboSpan" id="kobo.323.1"> a fresh React test project with </span><strong class="source-inline"><span class="koboSpan" id="kobo.324.1">npx create-react-app bizzatest</span></strong><span class="koboSpan" id="kobo.325.1">. </span><span class="koboSpan" id="kobo.325.2">Delete some of the boilerplate files and let the directory structure appear </span><span class="No-Break"><span class="koboSpan" id="kobo.326.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.327.1">    /bizzatest        /.git
        /node_modules
        /public
        /src
        /App.js
        /index.js
        /setupTests.js
          .gitignore
            package.json
        package-lock.json
        README.md</span></pre>
<p><span class="koboSpan" id="kobo.328.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.329.1">App.js</span></strong><span class="koboSpan" id="kobo.330.1"> file should contain the </span><span class="No-Break"><span class="koboSpan" id="kobo.331.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.332.1">function App() {    return (
        &lt;div&gt;
            &lt;h1&gt;Bizza Tests&lt;/h1&gt;
        &lt;/div&gt;
    );
}export default App;</span></pre>
<p><span class="koboSpan" id="kobo.333.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.334.1">Index.js</span></strong><span class="koboSpan" id="kobo.335.1"> file should contain</span><a id="_idIndexMarker426"/><span class="koboSpan" id="kobo.336.1"> the </span><span class="No-Break"><span class="koboSpan" id="kobo.337.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.338.1">import React from 'react';import ReactDOM from 'react-dom/client';
import App from './App';
const root =
    ReactDOM.createRoot(document.getElementById('root'));
root.render(
    &lt;React.StrictMode&gt;
        &lt;App /&gt;
    &lt;/React.StrictMode&gt;
);</span></pre>
<p><span class="koboSpan" id="kobo.339.1">Now that we have the testing environment set up, let’s create a stateless component and write a unit test to check whether </span><strong class="source-inline"><span class="koboSpan" id="kobo.340.1">WelcomeScreen.js</span></strong><span class="koboSpan" id="kobo.341.1"> renders the </span><strong class="bold"><span class="koboSpan" id="kobo.342.1">Welcome to Bizza Conference Platform</span></strong><span class="koboSpan" id="kobo.343.1"> paragraph text. </span><span class="koboSpan" id="kobo.343.2">Even without actually mounting the component, we can test whether </span><strong class="source-inline"><span class="koboSpan" id="kobo.344.1">WelcomeScreen.js</span></strong><span class="koboSpan" id="kobo.345.1"> will render the intended </span><span class="No-Break"><span class="koboSpan" id="kobo.346.1">text paragraph.</span></span></p>
<p><span class="koboSpan" id="kobo.347.1">Follow the proceeding</span><a id="_idIndexMarker427"/><span class="koboSpan" id="kobo.348.1"> steps to create the component, and unit-test it for the presence of the specified </span><span class="No-Break"><span class="koboSpan" id="kobo.349.1">paragraph text.</span></span></p>
<h3><span class="koboSpan" id="kobo.350.1">Creating a WelcomeScreen.jsx component</span></h3>
<p><span class="koboSpan" id="kobo.351.1">Let’s create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.352.1">src/WelcomeScreen.jsx</span></strong><span class="koboSpan" id="kobo.353.1"> component</span><a id="_idIndexMarker428"/><span class="koboSpan" id="kobo.354.1"> and add the proceeding code snippet. </span><span class="koboSpan" id="kobo.354.2">This component displays the </span><strong class="source-inline"><span class="koboSpan" id="kobo.355.1">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.356.1">h1&gt;React&lt;/h1&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.357.1"> element:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.358.1">import React from "react";const WelcomeScreen = () =&gt; {
    return  &lt;h1&gt;React&lt;/h1&gt;
};
export default WelcomeScreen;</span></pre>
<h3><span class="koboSpan" id="kobo.359.1">Creating a test case file</span></h3>
<p><span class="koboSpan" id="kobo.360.1">Inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.361.1">src/__tests__</span></strong><span class="koboSpan" id="kobo.362.1"> folder, create a test case file</span><a id="_idIndexMarker429"/><span class="koboSpan" id="kobo.363.1"> and name it </span><strong class="source-inline"><span class="koboSpan" id="kobo.364.1">WelcomeScreen.test.js</span></strong><span class="koboSpan" id="kobo.365.1">. </span><span class="koboSpan" id="kobo.365.2">Use it to store all your test cases. </span><span class="koboSpan" id="kobo.365.3">You can also write your test in each of your component’s folders. </span><span class="koboSpan" id="kobo.365.4">However, in this case, we will store it inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.366.1">src/__tests__</span></strong><span class="koboSpan" id="kobo.367.1"> folder. </span><span class="koboSpan" id="kobo.367.2">Add the following </span><span class="No-Break"><span class="koboSpan" id="kobo.368.1">code snippet:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.369.1">import {render,screen,cleanup} from    "@testing-library/react";
import WelcomeScreen from "../WelcomeScreen";
afterEach(() =&gt; {
    return cleanup();
});
test("should show Welcome text to screen", () =&gt; {
    render(&lt;WelcomeScreen /&gt;);
    const showText = screen.getByText(/Welcome to Bizza
        Conference Platform/i);
    expect(showText).toBeInTheDocument();
});</span></pre>
<p><span class="koboSpan" id="kobo.370.1">Let’s briefly discuss what is happening in the </span><span class="No-Break"><span class="koboSpan" id="kobo.371.1">preceding snippet.</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.372.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.373.1">render</span></strong><span class="koboSpan" id="kobo.374.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.375.1">screen</span></strong><span class="koboSpan" id="kobo.376.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.377.1">cleanup</span></strong><span class="koboSpan" id="kobo.378.1"> utilities are imported from </span><strong class="source-inline"><span class="koboSpan" id="kobo.379.1">@testing-library/react</span></strong><span class="koboSpan" id="kobo.380.1">. </span><strong class="source-inline"><span class="koboSpan" id="kobo.381.1">render</span></strong><span class="koboSpan" id="kobo.382.1"> helps you to virtually render a component in a container that is appended to the body of the HTML </span><span class="No-Break"><span class="koboSpan" id="kobo.383.1">document (DOM).</span></span><p class="list-inset"><span class="koboSpan" id="kobo.384.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.385.1">screen</span></strong><span class="koboSpan" id="kobo.386.1"> object from RTL provides you with methods to find the rendered DOM elements to make the necessary assertions. </span><span class="koboSpan" id="kobo.386.2">Essentially, </span><strong class="source-inline"><span class="koboSpan" id="kobo.387.1">screen</span></strong><span class="koboSpan" id="kobo.388.1"> is used to interact with rendered components, and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.389.1">cleanup</span></strong><span class="koboSpan" id="kobo.390.1"> function is used to clean up the rendered component after </span><span class="No-Break"><span class="koboSpan" id="kobo.391.1">each test.</span></span></p></li>
<li><span class="koboSpan" id="kobo.392.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.393.1">WelcomeScreen</span></strong><span class="koboSpan" id="kobo.394.1"> component is imported</span><a id="_idIndexMarker430"/><span class="koboSpan" id="kobo.395.1"> as a required file for the test. </span><span class="koboSpan" id="kobo.395.2">This is the component to </span><span class="No-Break"><span class="koboSpan" id="kobo.396.1">be tested.</span></span></li>
<li><span class="koboSpan" id="kobo.397.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.398.1">afterEach()</span></strong><span class="koboSpan" id="kobo.399.1"> method is added to unmount every rendered component test before the next component is rendered to prevent memory leaks. </span><span class="koboSpan" id="kobo.399.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.400.1">afterEach()</span></strong><span class="koboSpan" id="kobo.401.1"> block is a Jest life cycle method that runs after each test. </span><span class="koboSpan" id="kobo.401.2">In this case, it calls the </span><strong class="source-inline"><span class="koboSpan" id="kobo.402.1">cleanup</span></strong><span class="koboSpan" id="kobo.403.1"> function to clean up any rendered components after each test. </span><span class="koboSpan" id="kobo.403.2">Using this cleanup utility from TRL is regarded as a best practice in React </span><span class="No-Break"><span class="koboSpan" id="kobo.404.1">component testing.</span></span></li>
<li><span class="koboSpan" id="kobo.405.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.406.1">test()</span></strong><span class="koboSpan" id="kobo.407.1"> function defines the actual test, named </span><strong class="source-inline"><span class="koboSpan" id="kobo.408.1">"should show Welcome text to screen"</span></strong><span class="koboSpan" id="kobo.409.1">, and a callback function to hold the test case. </span><span class="koboSpan" id="kobo.409.2">The test first calls the </span><strong class="source-inline"><span class="koboSpan" id="kobo.410.1">render</span></strong><span class="koboSpan" id="kobo.411.1"> function to render the </span><strong class="source-inline"><span class="koboSpan" id="kobo.412.1">WelcomeScreen</span></strong><span class="koboSpan" id="kobo.413.1"> component. </span><span class="koboSpan" id="kobo.413.2">Then, it uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.414.1">screen.getByText</span></strong><span class="koboSpan" id="kobo.415.1"> function to get the DOM element that contains the text </span><strong class="bold"><span class="koboSpan" id="kobo.416.1">Welcome to Bizza Conference Platform</span></strong><span class="koboSpan" id="kobo.417.1">. </span><span class="koboSpan" id="kobo.417.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.418.1">expect()</span></strong><span class="koboSpan" id="kobo.419.1"> function is then used to verify that the text is in the document, using the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.420.1">toBeInTheDocument</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.421.1"> matcher.</span></span></li>
<li><span class="koboSpan" id="kobo.422.1">When the </span><strong class="source-inline"><span class="koboSpan" id="kobo.423.1">WelcomeScreen</span></strong><span class="koboSpan" id="kobo.424.1"> component is rendered, we expect it to contain </span><strong class="bold"><span class="koboSpan" id="kobo.425.1">Welcome to Bizza </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.426.1">Conference Platform</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.427.1">.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.428.1">Now, run the test with </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.429.1">npm test</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.430.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.431.1">The following screenshot shows </span><span class="No-Break"><span class="koboSpan" id="kobo.432.1">the output:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer057">
<span class="koboSpan" id="kobo.433.1"><img alt="Figure 7.3 – A screenshot showing failed test case output" src="image/Figure_7.3_B18554.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.434.1">Figure 7.3 – A screenshot showing failed test case output</span></p>
<p><span class="koboSpan" id="kobo.435.1">As expected, the test failed. </span><span class="koboSpan" id="kobo.435.2">The paragraph</span><a id="_idIndexMarker431"/><span class="koboSpan" id="kobo.436.1"> text in the RTL-simulated rendered container in </span><strong class="source-inline"><span class="koboSpan" id="kobo.437.1">WelcomeScreen.jsx</span></strong><span class="koboSpan" id="kobo.438.1"> is </span><strong class="source-inline"><span class="koboSpan" id="kobo.439.1">&lt;h1&gt;React&lt;/h1&gt;</span></strong><span class="koboSpan" id="kobo.440.1"> and not </span><strong class="source-inline"><span class="koboSpan" id="kobo.441.1">&lt;h1&gt;Welcome to Bizza </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.442.1">Conference Platform&lt;/h1&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.443.1">.</span></span></p>
<h3><span class="koboSpan" id="kobo.444.1">Updating the WelcomeScreen component</span></h3>
<p><span class="koboSpan" id="kobo.445.1">Let’s now update </span><strong class="source-inline"><span class="koboSpan" id="kobo.446.1">WelcomeScreen.jsx</span></strong><span class="koboSpan" id="kobo.447.1"> with the expected text</span><a id="_idIndexMarker432"/><span class="koboSpan" id="kobo.448.1"> to be rendered on </span><span class="No-Break"><span class="koboSpan" id="kobo.449.1">the screen:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.450.1">import React from "react";const WelcomeScreen = () =&gt; {
    return &lt;h1&gt;Welcome to Bizza Conference Platform&lt;/h1&gt;
};
export default WelcomeScreen;</span></pre>
<p><span class="koboSpan" id="kobo.451.1">Awesome, the test passed! </span><span class="koboSpan" id="kobo.451.2">The updated test report now shows a </span><span class="No-Break"><span class="koboSpan" id="kobo.452.1">passed test:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer058">
<span class="koboSpan" id="kobo.453.1"><img alt="Figure 7.4 – A screenshot showing a passed test case output" src="image/Figure_7.4_B18554.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.454.1">Figure 7.4 – A screenshot showing a passed test case output</span></p>
<p><span class="koboSpan" id="kobo.455.1">You can write unit tests for the elements</span><a id="_idIndexMarker433"/><span class="koboSpan" id="kobo.456.1"> of your various components and use the appropriate queries from RTL. </span><span class="koboSpan" id="kobo.456.2">These RTL queries allow you to find elements in the same way that users of your application will interact with </span><span class="No-Break"><span class="koboSpan" id="kobo.457.1">your UI:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.458.1">getByRole()</span></strong><span class="koboSpan" id="kobo.459.1">: This function is used to locate an element by its role attribute, such as button, link, checkbox, radio, and heading. </span><span class="koboSpan" id="kobo.459.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.460.1">getByRole()</span></strong><span class="koboSpan" id="kobo.461.1"> function is useful for testing the accessibility of a component, as well as for general </span><span class="No-Break"><span class="koboSpan" id="kobo.462.1">testing purposes.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.463.1">getByLabelText()</span></strong><span class="koboSpan" id="kobo.464.1">: This function is used to locate a form element that is associated with a label element using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.465.1">for</span></strong><span class="koboSpan" id="kobo.466.1"> attribute. </span><strong class="source-inline"><span class="koboSpan" id="kobo.467.1">getByLabelText()</span></strong><span class="koboSpan" id="kobo.468.1"> is useful for testing form components and </span><span class="No-Break"><span class="koboSpan" id="kobo.469.1">their accessibility.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.470.1">getByPlaceholderText()</span></strong><span class="koboSpan" id="kobo.471.1">: This function is used to locate an input element by its placeholder attribute. </span><strong class="source-inline"><span class="koboSpan" id="kobo.472.1">getByPlaceholderText()</span></strong><span class="koboSpan" id="kobo.473.1"> is useful for testing input fields and </span><span class="No-Break"><span class="koboSpan" id="kobo.474.1">their behavior.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.475.1">getByText()</span></strong><span class="koboSpan" id="kobo.476.1">: This function is used to locate an element by its text content. </span><strong class="source-inline"><span class="koboSpan" id="kobo.477.1">getByText()</span></strong><span class="koboSpan" id="kobo.478.1"> is useful for testing the rendering of specific text or locating buttons or links that are identified by </span><span class="No-Break"><span class="koboSpan" id="kobo.479.1">their text.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.480.1">getByDisplayValue()</span></strong><span class="koboSpan" id="kobo.481.1">: This function is used to locate a form element by its displayed value, such as an input or select element that has a pre-filled value. </span><strong class="source-inline"><span class="koboSpan" id="kobo.482.1">getByDisplayValue()</span></strong><span class="koboSpan" id="kobo.483.1"> is useful for testing form components and </span><span class="No-Break"><span class="koboSpan" id="kobo.484.1">their behavior.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.485.1">getByAltText()</span></strong><span class="koboSpan" id="kobo.486.1">: This function is used to locate an image element by its </span><strong class="source-inline"><span class="koboSpan" id="kobo.487.1">alt</span></strong><span class="koboSpan" id="kobo.488.1"> attribute, which provides a textual description of the image. </span><strong class="source-inline"><span class="koboSpan" id="kobo.489.1">getByAltText()</span></strong><span class="koboSpan" id="kobo.490.1"> is useful for testing the accessibility of images in </span><span class="No-Break"><span class="koboSpan" id="kobo.491.1">a component.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.492.1">getByTitle()</span></strong><span class="koboSpan" id="kobo.493.1">: This function is used to locate an element by its </span><strong class="source-inline"><span class="koboSpan" id="kobo.494.1">title</span></strong><span class="koboSpan" id="kobo.495.1"> attribute. </span><span class="koboSpan" id="kobo.495.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.496.1">getByTitle()</span></strong><span class="koboSpan" id="kobo.497.1"> is useful for testing the accessibility and behavior of elements that have a </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.498.1">title</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.499.1"> attribute.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.500.1">getByTestId()</span></strong><span class="koboSpan" id="kobo.501.1">: This function is used to locate an element by its </span><strong class="source-inline"><span class="koboSpan" id="kobo.502.1">data-testid</span></strong><span class="koboSpan" id="kobo.503.1"> attribute. </span><strong class="source-inline"><span class="koboSpan" id="kobo.504.1">getByTestId()</span></strong><span class="koboSpan" id="kobo.505.1"> is useful for testing specific elements that are identified by a unique test ID, without relying</span><a id="_idIndexMarker434"/><span class="koboSpan" id="kobo.506.1"> on other attributes such as class </span><span class="No-Break"><span class="koboSpan" id="kobo.507.1">or ID.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.508.1">Let’s now examine how you can write a unit test for a stateful component. </span><span class="koboSpan" id="kobo.508.2">We will make use of a speaker card and test its units to </span><span class="No-Break"><span class="koboSpan" id="kobo.509.1">our satisfaction.</span></span></p>
<h2 id="_idParaDest-120"><a id="_idTextAnchor151"/><span class="koboSpan" id="kobo.510.1">Writing a unit test for a stateful component</span></h2>
<p><span class="koboSpan" id="kobo.511.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.512.1">components</span></strong><span class="koboSpan" id="kobo.513.1"> folder, create a stateful</span><a id="_idIndexMarker435"/><span class="koboSpan" id="kobo.514.1"> component</span><a id="_idIndexMarker436"/><span class="koboSpan" id="kobo.515.1"> named </span><strong class="source-inline"><span class="koboSpan" id="kobo.516.1">SpeakerCard</span></strong><span class="koboSpan" id="kobo.517.1">. </span><span class="koboSpan" id="kobo.517.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.518.1">SpeakerCard</span></strong><span class="koboSpan" id="kobo.519.1"> component is a functional component that renders a card with information about a speaker. </span><span class="koboSpan" id="kobo.519.2">The component takes a </span><strong class="source-inline"><span class="koboSpan" id="kobo.520.1">speaker</span></strong><span class="koboSpan" id="kobo.521.1"> object as a prop, which contains properties such as the speaker’s name, occupation, company, phone number, and </span><span class="No-Break"><span class="koboSpan" id="kobo.522.1">email address.</span></span></p>
<p><span class="koboSpan" id="kobo.523.1">Now, the following snippet shows the test snippet for the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.524.1">SpeakerCard</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.525.1"> component:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.526.1">import {useState} from 'react'const SpeakerCard=speaker=&gt;{
const {name, occupation, company, phone, email}= speaker;
const [showDetails, setShowDetails]= useState(false);
const toggleDetails = () =&gt; setShowDetails(!showDetails);
return(
&lt;div className="card" data-testid="card"&gt;
&lt;span&gt;&lt;h2&gt;Name:{name}&lt;/h2&gt;&lt;/span&gt;
&lt;span&gt;&lt;h2&gt;Occupation:{occupation}&lt;/h2&gt;&lt;/span&gt;
&lt;span&gt;&lt;h2&gt;Company:{company}&lt;/h2&gt;&lt;/span&gt;
&lt;button data-testid="toggle-test" onClick={toggleDetails}&gt;
{showDetails? </span><span class="koboSpan" id="kobo.526.2">"Hide Details":"Show Details"}
&lt;/button&gt;
{showDetails &amp;&amp; (&lt;div data-testid="test-details"&gt;
&lt;h2&gt;Email:{email}&lt;/h2&gt;
&lt;h2&gt;Phone:{phone}&lt;/h2&gt;
&lt;/div&gt;
)}
&lt;/div&gt;
)
}
export default SpeakerCard;</span></pre>
<p><span class="koboSpan" id="kobo.527.1">The preceding</span><a id="_idIndexMarker437"/><span class="koboSpan" id="kobo.528.1"> code snippet presented</span><a id="_idIndexMarker438"/><span class="koboSpan" id="kobo.529.1"> is </span><span class="No-Break"><span class="koboSpan" id="kobo.530.1">explained here:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.531.1">The component takes a </span><strong class="source-inline"><span class="koboSpan" id="kobo.532.1">speaker</span></strong><span class="koboSpan" id="kobo.533.1"> object as a prop, which contains properties such as the speaker’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.534.1">name</span></strong><span class="koboSpan" id="kobo.535.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.536.1">occupation</span></strong><span class="koboSpan" id="kobo.537.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.538.1">company</span></strong><span class="koboSpan" id="kobo.539.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.540.1">phone number</span></strong><span class="koboSpan" id="kobo.541.1">, and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.542.1">email address</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.543.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.544.1">The component uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.545.1">useState</span></strong><span class="koboSpan" id="kobo.546.1"> hook to manage a Boolean state variable called </span><strong class="source-inline"><span class="koboSpan" id="kobo.547.1">showDetails</span></strong><span class="koboSpan" id="kobo.548.1">, which controls whether additional details about the speaker are shown or hidden. </span><span class="koboSpan" id="kobo.548.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.549.1">toggleDetails</span></strong><span class="koboSpan" id="kobo.550.1"> function toggles the value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.551.1">showDetails</span></strong><span class="koboSpan" id="kobo.552.1"> variable when the toggle button </span><span class="No-Break"><span class="koboSpan" id="kobo.553.1">is clicked.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.554.1">If the </span><strong class="source-inline"><span class="koboSpan" id="kobo.555.1">showDetails</span></strong><span class="koboSpan" id="kobo.556.1"> variable is </span><strong class="source-inline"><span class="koboSpan" id="kobo.557.1">true</span></strong><span class="koboSpan" id="kobo.558.1">, the component renders additional details about the speaker, including their email and phone number, within a nested </span><strong class="source-inline"><span class="koboSpan" id="kobo.559.1">div</span></strong><span class="koboSpan" id="kobo.560.1"> element with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.561.1">data-testid</span></strong><span class="koboSpan" id="kobo.562.1"> attribute </span><span class="No-Break"><span class="koboSpan" id="kobo.563.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.564.1">test-details</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.565.1">.</span></span></p></li>
<li><span class="koboSpan" id="kobo.566.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.567.1">toggleDetails()</span></strong><span class="koboSpan" id="kobo.568.1"> function’s initial state is </span><strong class="source-inline"><span class="koboSpan" id="kobo.569.1">false</span></strong><span class="koboSpan" id="kobo.570.1">; when the toggle button is clicked, the state changes to </span><strong class="source-inline"><span class="koboSpan" id="kobo.571.1">true</span></strong><span class="koboSpan" id="kobo.572.1">. </span><span class="koboSpan" id="kobo.572.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.573.1">data-testid</span></strong><span class="koboSpan" id="kobo.574.1"> attribute in </span><strong class="source-inline"><span class="koboSpan" id="kobo.575.1">&lt;div data-testid="card"&gt;</span></strong><span class="koboSpan" id="kobo.576.1"> is used to identify the DOM node that you test. </span><span class="koboSpan" id="kobo.576.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.577.1">data-testid</span></strong><span class="koboSpan" id="kobo.578.1"> attribute has </span><strong class="source-inline"><span class="koboSpan" id="kobo.579.1">card</span></strong><span class="koboSpan" id="kobo.580.1"> as its value. </span><span class="koboSpan" id="kobo.580.2">This value allows </span><strong class="source-inline"><span class="koboSpan" id="kobo.581.1">expect()</span></strong><span class="koboSpan" id="kobo.582.1">, a Jest utility, to make assertions about whether the test fails </span><span class="No-Break"><span class="koboSpan" id="kobo.583.1">or passes.</span></span></li>
<li><span class="koboSpan" id="kobo.584.1">With the toggle button, we set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.585.1">data-testid</span></strong><span class="koboSpan" id="kobo.586.1"> attribute to </span><strong class="source-inline"><span class="koboSpan" id="kobo.587.1">toggle-test</span></strong><span class="koboSpan" id="kobo.588.1"> to assert that no button has been </span><span class="No-Break"><span class="koboSpan" id="kobo.589.1">clicked yet.</span></span></li>
<li><span class="koboSpan" id="kobo.590.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.591.1">data-testid="test-details"</span></strong><span class="koboSpan" id="kobo.592.1"> is used to assert that the toggle button is clicked and details are displayed on </span><span class="No-Break"><span class="koboSpan" id="kobo.593.1">the screen.</span></span></li>
<li><span class="koboSpan" id="kobo.594.1">Conditionally, when </span><strong class="source-inline"><span class="koboSpan" id="kobo.595.1">showDetails</span></strong><span class="koboSpan" id="kobo.596.1"> is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.597.1">true</span></strong><span class="koboSpan" id="kobo.598.1">, email and phone details are displayed on the screen; otherwise, they would </span><span class="No-Break"><span class="koboSpan" id="kobo.599.1">be hidden.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.600.1">Now, let’s write the unit test to show that </span><strong class="source-inline"><span class="koboSpan" id="kobo.601.1">&lt;SpeakerCard/&gt;</span></strong><span class="koboSpan" id="kobo.602.1"> can render on screen and when the toggle button is clicked, we can see more details about the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.603.1">speaker</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.604.1"> object.</span></span></p>
<p><span class="koboSpan" id="kobo.605.1">Inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.606.1">/src/__tests__/</span></strong><span class="koboSpan" id="kobo.607.1">, create a test </span><span class="No-Break"><span class="koboSpan" id="kobo.608.1">file, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.609.1">SpeakerCard.test.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.610.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.611.1">import {render,screen, fireEvent,cleanup} from    "@testing-library/react";
import SpeakerCard from
    '../components/SpeakerCard/SpeakerCard'
const speaker= {
    name: "Olatunde Adedeji",
    occupation: "Software Engineer",
    company: "Mowebsite",
    email:"admin@admin.com",
    phone: "01-333333",
}
afterEach(() =&gt; {
    return cleanup();
});
test("should render the SpeakerCard component", ()=&gt;{
    render(&lt;SpeakerCard/&gt;);
    const card = screen.getByTestId("card");
    expect(card).toBeDefined()
});
test("should make sure the toggle button shows or hides
    details", ()=&gt;{
    render(&lt;SpeakerCard speaker={speaker}/&gt;);
    const toggleButton = screen.getByTestId("toggle-test");
    expect(screen.queryByTestId(
        "test-details")).toBeNull();
    fireEvent.click(toggleButton);
    expect(screen.getByTestId(
        "test-details")).toBeInTheDocument();
});</span></pre>
<p><span class="koboSpan" id="kobo.612.1">Let’s go over</span><a id="_idIndexMarker439"/><span class="koboSpan" id="kobo.613.1"> the preceding </span><span class="No-Break"><span class="koboSpan" id="kobo.614.1">code</span></span><span class="No-Break"><a id="_idIndexMarker440"/></span><span class="No-Break"><span class="koboSpan" id="kobo.615.1"> snippet:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.616.1">Test 1</span></strong><span class="koboSpan" id="kobo.617.1">: This should render the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.618.1">SpeakerCard</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.619.1"> component.</span></span><ol><li class="upper-roman"><span class="koboSpan" id="kobo.620.1">Import </span><strong class="source-inline"><span class="koboSpan" id="kobo.621.1">SpeakerCard.jsx</span></strong><span class="koboSpan" id="kobo.622.1"> as a required file for </span><span class="No-Break"><span class="koboSpan" id="kobo.623.1">the test.</span></span></li>
<li class="upper-roman"><span class="koboSpan" id="kobo.624.1">Define the </span><strong class="source-inline"><span class="koboSpan" id="kobo.625.1">test()</span></strong><span class="koboSpan" id="kobo.626.1"> function from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.627.1">@testing-library/react</span></strong><span class="koboSpan" id="kobo.628.1"> library with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.629.1">test</span></strong><span class="koboSpan" id="kobo.630.1"> string describing what the test should do, which in this test case is </span><strong class="source-inline"><span class="koboSpan" id="kobo.631.1">"should render the SpeakerCard component"</span></strong><span class="koboSpan" id="kobo.632.1">, and a function that contains the </span><span class="No-Break"><span class="koboSpan" id="kobo.633.1">test code.</span></span></li>
<li class="upper-roman"><span class="koboSpan" id="kobo.634.1">Then, import and use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.635.1">render</span></strong><span class="koboSpan" id="kobo.636.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.637.1">screen</span></strong><span class="koboSpan" id="kobo.638.1"> utilities to simulate the rendering of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.639.1">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.640.1">SpeakerCard/&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.641.1"> component.</span></span></li>
<li class="upper-roman"><span class="koboSpan" id="kobo.642.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.643.1">SpeakerCard</span></strong><span class="koboSpan" id="kobo.644.1"> component accepts the props defined </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.645.1">speaker</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.646.1"> object.</span></span></li>
<li class="upper-roman"><span class="koboSpan" id="kobo.647.1">Query the node with </span><strong class="source-inline"><span class="koboSpan" id="kobo.648.1">.getByTestId("card")</span></strong><span class="koboSpan" id="kobo.649.1"> and assign its value to </span><strong class="source-inline"><span class="koboSpan" id="kobo.650.1">card</span></strong><span class="koboSpan" id="kobo.651.1">. </span><span class="koboSpan" id="kobo.651.2">This allows you to access the DOM node needed to make an assertion. </span><span class="koboSpan" id="kobo.651.3">You can then use </span><strong class="source-inline"><span class="koboSpan" id="kobo.652.1">expect()</span></strong><span class="koboSpan" id="kobo.653.1"> from the Jest utility to ascertain that </span><strong class="source-inline"><span class="koboSpan" id="kobo.654.1">&lt;SpeakerCard/&gt;</span></strong><span class="koboSpan" id="kobo.655.1"> is rendered. </span><span class="koboSpan" id="kobo.655.2">Expect it to </span><span class="No-Break"><span class="koboSpan" id="kobo.656.1">be defined!</span></span></li>
</ol><p class="list-inset"><span class="koboSpan" id="kobo.657.1">The following screenshot shows a passed test for the rendering </span><span class="No-Break"><span class="koboSpan" id="kobo.658.1">React component:</span></span></p></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer059">
<span class="koboSpan" id="kobo.659.1"><img alt="Figure 7.5 – A screenshot showing a passed rendering component test" src="image/Figure_7.5_B18554.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.660.1">Figure 7.5 – A screenshot showing a passed rendering component test</span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.661.1">Test 2</span></strong><span class="koboSpan" id="kobo.662.1">: This should make</span><a id="_idIndexMarker441"/><span class="koboSpan" id="kobo.663.1"> sure the toggle button</span><a id="_idIndexMarker442"/><span class="koboSpan" id="kobo.664.1"> shows or </span><span class="No-Break"><span class="koboSpan" id="kobo.665.1">hides details:</span></span><ol><li class="upper-roman" value="1"><span class="koboSpan" id="kobo.666.1">Define the </span><strong class="source-inline"><span class="koboSpan" id="kobo.667.1">test()</span></strong><span class="koboSpan" id="kobo.668.1">function from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.669.1">@testing-library/react</span></strong><span class="koboSpan" id="kobo.670.1"> library with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.671.1">test</span></strong><span class="koboSpan" id="kobo.672.1"> string describing what the test should do, which in this test case is </span><strong class="source-inline"><span class="koboSpan" id="kobo.673.1">"should make sure the toggle button shows or hides details"</span></strong><span class="koboSpan" id="kobo.674.1">, and a function that contains the </span><span class="No-Break"><span class="koboSpan" id="kobo.675.1">test code.</span></span></li>
<li class="upper-roman"><span class="koboSpan" id="kobo.676.1">Render the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.677.1">SpeakerCard</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.678.1"> component.</span></span></li>
<li class="upper-roman"><span class="koboSpan" id="kobo.679.1">When no button is clicked, we expect the </span><strong class="source-inline"><span class="koboSpan" id="kobo.680.1">data-testid</span></strong><span class="koboSpan" id="kobo.681.1"> attribute value </span><strong class="source-inline"><span class="koboSpan" id="kobo.682.1">toggle-test</span></strong><span class="koboSpan" id="kobo.683.1"> to be </span><em class="italic"><span class="koboSpan" id="kobo.684.1">n</span></em><span class="koboSpan" id="kobo.685.1">. </span><span class="koboSpan" id="kobo.685.2">The first assertion checks that the details section is not initially displayed, by checking that the element with </span><strong class="source-inline"><span class="koboSpan" id="kobo.686.1">test-details data-testid</span></strong><span class="koboSpan" id="kobo.687.1"> is not in the document. </span><span class="koboSpan" id="kobo.687.2">This is done using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.688.1">screen.queryByTestId()</span></strong><span class="koboSpan" id="kobo.689.1"> function, which returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.690.1">null</span></strong><span class="koboSpan" id="kobo.691.1"> if the element is </span><span class="No-Break"><span class="koboSpan" id="kobo.692.1">not found.</span></span></li>
<li class="upper-roman"><span class="koboSpan" id="kobo.693.1">Then, import and use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.694.1">fireEvent</span></strong><span class="koboSpan" id="kobo.695.1"> function. </span><span class="koboSpan" id="kobo.695.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.696.1">fireEvent.click(toggleButton)</span></strong><span class="koboSpan" id="kobo.697.1"> simulates a user clicking on a toggle button in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.698.1">SpeakerCard</span></strong><span class="koboSpan" id="kobo.699.1"> component. </span><span class="koboSpan" id="kobo.699.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.700.1">fireEvent</span></strong><span class="koboSpan" id="kobo.701.1"> utility is a part of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.702.1">@testing-library/react</span></strong><span class="koboSpan" id="kobo.703.1"> package, which provides a way of simulating user interactions in a test environment. </span><span class="koboSpan" id="kobo.703.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.704.1">fireEvent.click()</span></strong><span class="koboSpan" id="kobo.705.1"> function is used to simulate a click on the toggle button. </span><span class="koboSpan" id="kobo.705.2">This will trigger the </span><strong class="source-inline"><span class="koboSpan" id="kobo.706.1">toggleDetails</span></strong><span class="koboSpan" id="kobo.707.1"> function in the component, which should show or hide the details section based on the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.708.1">showDetails</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.709.1"> state.</span></span></li>
<li class="upper-roman"><span class="koboSpan" id="kobo.710.1">Query the node with </span><strong class="source-inline"><span class="koboSpan" id="kobo.711.1">getByTestId</span></strong><span class="koboSpan" id="kobo.712.1"> and assign its value to </span><strong class="source-inline"><span class="koboSpan" id="kobo.713.1">toggleButton</span></strong><span class="koboSpan" id="kobo.714.1">. </span><span class="koboSpan" id="kobo.714.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.715.1">data-testid</span></strong><span class="koboSpan" id="kobo.716.1"> attribute in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.717.1">SpeakerCard</span></strong><span class="koboSpan" id="kobo.718.1"> component checks whether the details are displayed or not by searching for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.719.1">test-details</span></strong><span class="koboSpan" id="kobo.720.1"> element </span><span class="No-Break"><span class="koboSpan" id="kobo.721.1">using </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.722.1">screen.getByTestId</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.723.1">.</span></span></li>
<li class="upper-roman"><span class="koboSpan" id="kobo.724.1">We expect </span><strong class="source-inline"><span class="koboSpan" id="kobo.725.1">test-details</span></strong><span class="koboSpan" id="kobo.726.1"> from </span><strong class="source-inline"><span class="koboSpan" id="kobo.727.1">data-testid</span></strong><span class="koboSpan" id="kobo.728.1"> to display on the screen. </span><span class="koboSpan" id="kobo.728.2">If </span><strong class="source-inline"><span class="koboSpan" id="kobo.729.1">test-details</span></strong><span class="koboSpan" id="kobo.730.1"> is present in the document, the test passes; otherwise, the </span><span class="No-Break"><span class="koboSpan" id="kobo.731.1">test fails.</span></span></li>
</ol><p class="list-inset"><span class="koboSpan" id="kobo.732.1">The following screenshot</span><a id="_idIndexMarker443"/><span class="koboSpan" id="kobo.733.1"> shows the testing of the </span><span class="No-Break"><span class="koboSpan" id="kobo.734.1">toggle</span></span><span class="No-Break"><a id="_idIndexMarker444"/></span><span class="No-Break"><span class="koboSpan" id="kobo.735.1"> button:</span></span></p></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer060">
<span class="koboSpan" id="kobo.736.1"><img alt="Figure 7.6 – Screenshot showing the passed toggle button test" src="image/Figure_7.6_B18554.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.737.1">Figure 7.6 – Screenshot showing the passed toggle button test</span></p>
<p><span class="koboSpan" id="kobo.738.1">Next, we will discuss TDD. </span><span class="koboSpan" id="kobo.738.2">This is a software development practice that encourages the testing of every functional unit of an application first before </span><span class="No-Break"><span class="koboSpan" id="kobo.739.1">coding it.</span></span></p>
<h1 id="_idParaDest-121"><a id="_idTextAnchor152"/><span class="koboSpan" id="kobo.740.1">TDD</span></h1>
<p><span class="koboSpan" id="kobo.741.1">TDD is a development paradigm</span><a id="_idIndexMarker445"/><span class="koboSpan" id="kobo.742.1"> that puts writing tests first. </span><span class="koboSpan" id="kobo.742.2">You write the test first and then write code to validate. </span><span class="koboSpan" id="kobo.742.3">The main purpose of TDD is rapid feedback. </span><span class="koboSpan" id="kobo.742.4">You write a test, run it, and it fails. </span><span class="koboSpan" id="kobo.742.5">You then write minimal code to pass the test. </span><span class="koboSpan" id="kobo.742.6">Once the test passes, you then refactor your </span><span class="No-Break"><span class="koboSpan" id="kobo.743.1">code appropriately.</span></span></p>
<p><span class="koboSpan" id="kobo.744.1">These processes are iteratively repeated. </span><span class="koboSpan" id="kobo.744.2">Focusing on writing tests before code implementation allows developers to see the product from the users’ point of view, thus ensuring a working functionality that meets the </span><span class="No-Break"><span class="koboSpan" id="kobo.745.1">users’ needs.</span></span></p>
<p><span class="koboSpan" id="kobo.746.1">TDD enables software developers to come up with units of code base with a single responsibility – allowing code to do just one thing that works properly. </span><span class="koboSpan" id="kobo.746.2">However, the traditional approach is to code and then test. </span><span class="koboSpan" id="kobo.746.3">The idea of testing a code base at the end of the development process has been proven to be flawed and comes with a high cost of </span><span class="No-Break"><span class="koboSpan" id="kobo.747.1">code maintenance.</span></span></p>
<p><span class="koboSpan" id="kobo.748.1">Most software developers are more agile than test-driven. </span><span class="koboSpan" id="kobo.748.2">The urgent need to get a product to market with often unrealistic deadlines places less priority on the quality of the units of code powering such software products. </span><span class="koboSpan" id="kobo.748.3">With the traditional approach to development, you have errors sneaking </span><span class="No-Break"><span class="koboSpan" id="kobo.749.1">into production.</span></span></p>
<p><span class="koboSpan" id="kobo.750.1">As we all know, web applications in production do have additional features added from time to time based on business demands. </span><span class="koboSpan" id="kobo.750.2">However, without quality tests, you can have a situation where new feature addition or fixes create </span><span class="No-Break"><span class="koboSpan" id="kobo.751.1">more problems.</span></span></p>
<p><span class="koboSpan" id="kobo.752.1">Another problem with the traditional approach is having a software development team for a product different from the testing team. </span><span class="koboSpan" id="kobo.752.2">This separation of teams can make the long-time maintenance of the code base difficult and may result in a terrible decline in code quality, owing to a chaotic clash </span><span class="No-Break"><span class="koboSpan" id="kobo.753.1">of intents.</span></span></p>
<p><span class="koboSpan" id="kobo.754.1">With TDD, you and other stakeholders have proof that your code does work and is of high quality. </span><span class="koboSpan" id="kobo.754.2">Right now, we will wear the hat and shoes of a web developer who is agile and simultaneously test-driven. </span><span class="koboSpan" id="kobo.754.3">We will examine a case study where we build a login component as part of our </span><em class="italic"><span class="koboSpan" id="kobo.755.1">Bizza</span></em><span class="koboSpan" id="kobo.756.1"> project using a </span><span class="No-Break"><span class="koboSpan" id="kobo.757.1">TDD methodology.</span></span></p>
<p><span class="koboSpan" id="kobo.758.1">The component development will comply with a </span><span class="No-Break"><span class="koboSpan" id="kobo.759.1">TDD principle:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.760.1">Write a single test case. </span><span class="koboSpan" id="kobo.760.2">This test will be expected </span><span class="No-Break"><span class="koboSpan" id="kobo.761.1">to fail.</span></span></li>
<li><span class="koboSpan" id="kobo.762.1">Write minimal code that satisfies the test and makes </span><span class="No-Break"><span class="koboSpan" id="kobo.763.1">it pass.</span></span></li>
<li><span class="koboSpan" id="kobo.764.1">Then, refactor your code and run it </span><span class="No-Break"><span class="koboSpan" id="kobo.765.1">to pass/fail.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.766.1">These steps </span><span class="No-Break"><span class="koboSpan" id="kobo.767.1">are repeated.</span></span></p>
<p><span class="koboSpan" id="kobo.768.1">So, now let’s write our initial tests. </span><span class="koboSpan" id="kobo.768.2">We expect them to fail anyway. </span><span class="koboSpan" id="kobo.768.3">This is the essence </span><span class="No-Break"><span class="koboSpan" id="kobo.769.1">of TDD.</span></span></p>
<h2 id="_idParaDest-122"><a id="_idTextAnchor153"/><span class="koboSpan" id="kobo.770.1">Writing a single test case</span></h2>
<p><span class="koboSpan" id="kobo.771.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.772.1">bizzatest</span></strong><span class="koboSpan" id="kobo.773.1"> directory</span><a id="_idIndexMarker446"/><span class="koboSpan" id="kobo.774.1"> for testing, create the </span><strong class="source-inline"><span class="koboSpan" id="kobo.775.1">bizzatest/src/components/Auth/SignInForm/SignInForm.jsx</span></strong><span class="koboSpan" id="kobo.776.1"> component and update the file as follows. </span><span class="koboSpan" id="kobo.776.2">This is a </span><strong class="source-inline"><span class="koboSpan" id="kobo.777.1">SignInForm</span></strong><span class="koboSpan" id="kobo.778.1"> component with no labels </span><span class="No-Break"><span class="koboSpan" id="kobo.779.1">and functionalities:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.780.1">import React from 'react';const SignInForm = () =&gt; {
    return (
        &lt;div className="signInContainer"&gt;
            &lt;form&gt;
                &lt;div className="signInForm"&gt;
                    &lt;label htmlFor="email"&gt;&lt;/label&gt;
                    &lt;input
                        type="email"
                    /&gt;
                    &lt;label htmlFor="password"&gt;&lt;/label&gt;
                    &lt;input
                        type="password"
                    /&gt;
                    &lt;button&gt;&lt;/button&gt;
                &lt;/div&gt;
            &lt;/form&gt;
        &lt;/div&gt;
    );
};
export default SignInForm;</span></pre>
<p><span class="koboSpan" id="kobo.781.1">Inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.782.1">App.js</span></strong><span class="koboSpan" id="kobo.783.1">, add the following</span><a id="_idIndexMarker447"/> <span class="No-Break"><span class="koboSpan" id="kobo.784.1">code snippet:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.785.1">import React from "react";import "./App.css";
import SignInForm from
    "./pages/Auth/SignInForm/SignInForm";
const App = () =&gt; {
    return &lt;SignInForm /&gt;;
};
export default App;</span></pre>
<p><span class="koboSpan" id="kobo.786.1">Then, run </span><strong class="source-inline"><span class="koboSpan" id="kobo.787.1">npm s</span></strong><span class="koboSpan" id="kobo.788.1"> to render the </span><span class="No-Break"><span class="koboSpan" id="kobo.789.1">following component:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer061">
<span class="koboSpan" id="kobo.790.1"><img alt="Figure 7.7 – A screenshot showing a rendered SignInForm component" src="image/Figure_7.7_B18554.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.791.1">Figure 7.7 – A screenshot showing a rendered SignInForm component</span></p>
<p><span class="koboSpan" id="kobo.792.1">In TDD, you want to start with a unit test</span><a id="_idIndexMarker448"/><span class="koboSpan" id="kobo.793.1"> of a component that will fail, and then work around to make it pass after the actual development of the </span><span class="No-Break"><span class="koboSpan" id="kobo.794.1">component features.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.795.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.796.1">Check the </span><em class="italic"><span class="koboSpan" id="kobo.797.1">Technical requirements</span></em><span class="koboSpan" id="kobo.798.1"> section for this chapter to get the styles for this form </span><span class="No-Break"><span class="koboSpan" id="kobo.799.1">component (</span></span><a href="https://github.com/PacktPublishing/Full-Stack-Flask-and-React/tree/main/Chapter07/05"><span class="No-Break"><span class="koboSpan" id="kobo.800.1">https://github.com/PacktPublishing/Full-Stack-Flask-and-React/tree/main/Chapter07/05</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.801.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.802.1">Now, let’s write and run the test for the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.803.1">SignInForm</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.804.1"> component.</span></span></p>
<p><span class="koboSpan" id="kobo.805.1">Create the </span><strong class="source-inline"><span class="koboSpan" id="kobo.806.1">test</span></strong><span class="koboSpan" id="kobo.807.1"> file inside </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.808.1">bizzatest/src/__tests__/ SignInForm.test.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.809.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.810.1">Update the file </span><span class="No-Break"><span class="koboSpan" id="kobo.811.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.812.1">import { render, screen,cleanup } from    '@testing-library/react';
import  SignInForm from
    '../components/Auth/SignInForm/SignInForm';
afterEach(() =&gt; {
    return cleanup();
  });
test("Email Address should be rendered to screen", () =&gt; {
    render(&lt;SignInForm /&gt;);
    const linkElEmailInput =
        screen.getByText(/Email Address/i);
    expect(linkElEmailInput).toBeInTheDocument();
});
test("Password should be rendered to screen", () =&gt; {
    render(&lt;SignInForm /&gt;);
    const linkElPasswordInput =
        screen.getByText(/Password/i);
    expect(linkElPasswordInput).toBeInTheDocument();  });
test("Sign In should be rendered to screen", () =&gt; {
    render(&lt;SignInForm /&gt;);
    const linkElSignInBtn = screen.getByTest(/SignIn/i);
    expect(linkElSignInBtn).toBeInTheDocument();
});</span></pre>
<p><span class="koboSpan" id="kobo.813.1">Let’s explain the workings of the </span><span class="No-Break"><span class="koboSpan" id="kobo.814.1">preceding snippet:</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.815.1">Import { render, screen } from '@testing-library/react'</span></strong><span class="koboSpan" id="kobo.816.1"> brings to scope the </span><strong class="source-inline"><span class="koboSpan" id="kobo.817.1">render</span></strong><span class="koboSpan" id="kobo.818.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.819.1">screen</span></strong><span class="koboSpan" id="kobo.820.1"> functions in RTL. </span><span class="koboSpan" id="kobo.820.2">This allows us to render components with VDOM</span><a id="_idIndexMarker449"/><span class="koboSpan" id="kobo.821.1"> in the </span><span class="No-Break"><span class="koboSpan" id="kobo.822.1">testing environment.</span></span></p>
<p><span class="koboSpan" id="kobo.823.1">The required </span><strong class="source-inline"><span class="koboSpan" id="kobo.824.1">SignInForm</span></strong><span class="koboSpan" id="kobo.825.1"> component file under test is </span><span class="No-Break"><span class="koboSpan" id="kobo.826.1">then imported.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.827.1">test("Email Address should be rendered to screen", () =&gt; {render(&lt;SignInForm /&gt;)</span></strong><span class="koboSpan" id="kobo.828.1"> defines a test case with a description and renders </span><strong class="source-inline"><span class="koboSpan" id="kobo.829.1">SignInForm-component</span></strong><span class="koboSpan" id="kobo.830.1">. </span><span class="koboSpan" id="kobo.830.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.831.1">render()</span></strong><span class="koboSpan" id="kobo.832.1"> method comes from the RTL. </span><span class="koboSpan" id="kobo.832.2">The same thing is repeated for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.833.1">Password</span></strong><span class="koboSpan" id="kobo.834.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.835.1">Sign In</span></strong><span class="koboSpan" id="kobo.836.1"> buttons with the individual test </span><span class="No-Break"><span class="koboSpan" id="kobo.837.1">case descriptions.</span></span></p>
<p><span class="koboSpan" id="kobo.838.1">In the first test, the test checks that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.839.1">Email Address</span></strong><span class="koboSpan" id="kobo.840.1"> label is rendered on the screen by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.841.1">getByText()</span></strong><span class="koboSpan" id="kobo.842.1"> method from </span><strong class="source-inline"><span class="koboSpan" id="kobo.843.1">@testing-library/react</span></strong><span class="koboSpan" id="kobo.844.1">. </span><span class="koboSpan" id="kobo.844.2">The test passes if the label is found on </span><span class="No-Break"><span class="koboSpan" id="kobo.845.1">the screen.</span></span></p>
<p><span class="koboSpan" id="kobo.846.1">In the second test, the test</span><a id="_idIndexMarker450"/><span class="koboSpan" id="kobo.847.1"> checks that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.848.1">Password</span></strong><span class="koboSpan" id="kobo.849.1"> label is rendered on the screen by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.850.1">getByText()</span></strong><span class="koboSpan" id="kobo.851.1"> method. </span><span class="koboSpan" id="kobo.851.2">The test passes if the label is found on </span><span class="No-Break"><span class="koboSpan" id="kobo.852.1">the screen.</span></span></p>
<p><span class="koboSpan" id="kobo.853.1">The third test checks that the button with the text </span><strong class="source-inline"><span class="koboSpan" id="kobo.854.1">SignIn</span></strong><span class="koboSpan" id="kobo.855.1"> is rendered on the screen by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.856.1">getByTestId()</span></strong><span class="koboSpan" id="kobo.857.1"> method. </span><span class="koboSpan" id="kobo.857.2">The test passes if the button is found on </span><span class="No-Break"><span class="koboSpan" id="kobo.858.1">the screen.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.859.1">expect(linkElEmailInput).toBeInTheDocument()</span></strong><span class="koboSpan" id="kobo.860.1"> is for the assertion. </span><span class="koboSpan" id="kobo.860.2">This is to verify that the values of the declared variables are present in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.861.1">SignInForm</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.862.1"> component.</span></span></p>
<p><span class="koboSpan" id="kobo.863.1">Now, in the Terminal, run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.864.1">npm test</span></strong><span class="koboSpan" id="kobo.865.1"> command. </span><span class="koboSpan" id="kobo.865.2">The test case descriptions are shown here with </span><span class="No-Break"><span class="koboSpan" id="kobo.866.1">failed statuses.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer062">
<span class="koboSpan" id="kobo.867.1"><img alt="Figure 7.8 – A screenshot of a failed SignInForm test" src="image/Figure_7.8_B18554.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.868.1">Figure 7.8 – A screenshot of a failed SignInForm test</span></p>
<p><span class="koboSpan" id="kobo.869.1">The following screenshot shows a detailed report of the Jest test runner. </span><span class="koboSpan" id="kobo.869.2">It shows one test suite and three </span><span class="No-Break"><span class="koboSpan" id="kobo.870.1">failed tests.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer063">
<span class="koboSpan" id="kobo.871.1"><img alt="Figure 7.9 – A screenshot of the failed SignInForm component test" src="image/Figure_7.9_B18554.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.872.1">Figure 7.9 – A screenshot of the failed SignInForm component test</span></p>
<h2 id="_idParaDest-123"><a id="_idTextAnchor154"/><span class="koboSpan" id="kobo.873.1">Writing minimal code that satisfies the test and making it pass</span></h2>
<p><span class="koboSpan" id="kobo.874.1">Now, update the </span><strong class="source-inline"><span class="koboSpan" id="kobo.875.1">SignInForm</span></strong><span class="koboSpan" id="kobo.876.1"> component to meet the expectations</span><a id="_idIndexMarker451"/><span class="koboSpan" id="kobo.877.1"> of the test cases in the </span><span class="No-Break"><span class="koboSpan" id="kobo.878.1">test suite:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.879.1">import React from 'react';const SignInForm = () =&gt; {
    return (
        &lt;&gt;
            &lt;div className="signInContainer"&gt;
                &lt;form&gt;
                    &lt;div className="signInForm"&gt;
                        &lt;label htmlFor="email"&gt;
                            Email Address&lt;/label&gt;
                        &lt;input
                            type="email"
                        /&gt;
                        &lt;label htmlFor="password"&gt;
                            Password&lt;/label&gt;
                        &lt;input
                            type="password"
                        /&gt;
                        &lt;button&gt;Sign In&lt;/button&gt;
                    &lt;/div&gt;
                &lt;/form&gt;
            &lt;/div&gt;
        &lt;/&gt;
    );
};
export default SignInForm;</span></pre>
<p><span class="koboSpan" id="kobo.880.1">In the preceding snippet, we refactored</span><a id="_idIndexMarker452"/><span class="koboSpan" id="kobo.881.1"> the code to pass the test as expected and complete the principle of TDD. </span><span class="koboSpan" id="kobo.881.2">The Jest test runner runs automatically and passes the test based on the refactoring of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.882.1">SignInForm</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.883.1"> component.</span></span></p>
<p><span class="koboSpan" id="kobo.884.1">In the following figure, we have the detailed Jest success report of our test-driven </span><span class="No-Break"><span class="koboSpan" id="kobo.885.1">component development.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer064">
<span class="koboSpan" id="kobo.886.1"><img alt="Figure 7.10 – A screenshot of a successful pass of the SignInForm component test" src="image/Figure_7.10_B18554.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.887.1">Figure 7.10 – A screenshot of a successful pass of the SignInForm component test</span></p>
<p><span class="koboSpan" id="kobo.888.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.889.1">SignInForm</span></strong><span class="koboSpan" id="kobo.890.1"> component</span><a id="_idIndexMarker453"/><span class="koboSpan" id="kobo.891.1"> now appears, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.892.1">Figure 7</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.893.1">.11</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.894.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer065">
<span class="koboSpan" id="kobo.895.1"><img alt="Figure 7.11 – A screenshot of a rendered SignInForm component after passing the test" src="image/Figure_7.11_B18554.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.896.1">Figure 7.11 – A screenshot of a rendered SignInForm component after passing the test</span></p>
<h2 id="_idParaDest-124"><a id="_idTextAnchor155"/><span class="koboSpan" id="kobo.897.1">Code refactoring</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.898.1">Code refactoring</span></strong><span class="koboSpan" id="kobo.899.1"> is the process of modifying</span><a id="_idIndexMarker454"/><span class="koboSpan" id="kobo.900.1"> existing code</span><a id="_idIndexMarker455"/><span class="koboSpan" id="kobo.901.1"> to improve its quality, maintainability, and efficiency without changing its behavior. </span><span class="koboSpan" id="kobo.901.2">Code refactoring involves analyzing and improving the code structure, design, and implementation to make it easier to understand, modify, and maintain. </span><span class="koboSpan" id="kobo.901.3">Refactoring is typically done to improve code readability, remove code duplication, and </span><span class="No-Break"><span class="koboSpan" id="kobo.902.1">increase performance.</span></span></p>
<p><span class="koboSpan" id="kobo.903.1">During code refactoring, it is important to test your code to ensure that any changes made do not affect the behavior of the system. </span><span class="koboSpan" id="kobo.903.2">The code is run multiple times after each refactoring step to ensure that it still passes all the positive tests or fails all the </span><span class="No-Break"><span class="koboSpan" id="kobo.904.1">negative tests.</span></span></p>
<p><span class="koboSpan" id="kobo.905.1">If a test fails when you expect</span><a id="_idIndexMarker456"/><span class="koboSpan" id="kobo.906.1"> it to pass, that means that the refactoring</span><a id="_idIndexMarker457"/><span class="koboSpan" id="kobo.907.1"> step introduced a bug and the code needs to be reverted to its previous state, or additional changes need to be made to fix the issue. </span><span class="koboSpan" id="kobo.907.2">Refactoring can be done manually, but there are also automated tools such as Jest, RTL, Enzyme, and React testing utilities that can help identify areas of the code that </span><span class="No-Break"><span class="koboSpan" id="kobo.908.1">need refactoring.</span></span></p>
<p><span class="koboSpan" id="kobo.909.1">Refactoring as a part of TDD methodology allows you to refactor your code and run it to pass/fail until you are confident in the test results. </span><span class="koboSpan" id="kobo.909.2">These code refactoring steps can be repeated as many times </span><span class="No-Break"><span class="koboSpan" id="kobo.910.1">as desired.</span></span></p>
<p><span class="koboSpan" id="kobo.911.1">Let’s refactor </span><strong class="source-inline"><span class="koboSpan" id="kobo.912.1">SignForm.test.js</span></strong><span class="koboSpan" id="kobo.913.1"> and examine one of the ways you can refactor your </span><span class="No-Break"><span class="koboSpan" id="kobo.914.1">test code.</span></span></p>
<p><span class="koboSpan" id="kobo.915.1">Create the </span><strong class="source-inline"><span class="koboSpan" id="kobo.916.1">test</span></strong><span class="koboSpan" id="kobo.917.1"> file inside </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.918.1">bizzatest/src/__tests__/ RefactorSignInForm.test.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.919.1">:</span></span></p>
<p><span class="koboSpan" id="kobo.920.1">Update the file </span><span class="No-Break"><span class="koboSpan" id="kobo.921.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.922.1">import { render, screen, cleanup } from    '@testing-library/react';
import SignInForm from
    '../components/Auth/SignInForm/SignInForm';
describe('SignInForm component', () =&gt; {
    afterEach(() =&gt; {
        cleanup();
    });
    it('should render the email address input', () =&gt; {
        render(&lt;SignInForm /&gt;);
        const emailInput =
            screen.getByLabelText(/Email Address/i);
        expect(emailInput).toBeInTheDocument();
    });
    it('should render the password input', () =&gt; {
        render(&lt;SignInForm /&gt;);
        const passwordInput =
            screen.getByLabelText(/Password/i);
        expect(passwordInput).toBeInTheDocument();
    });
    it('should render the sign in button', () =&gt; {
        render(&lt;SignInForm /&gt;);
        const signInButton =
            screen.getByRole('button', { name: /Sign In/i
            });
        expect(signInButton).toBeInTheDocument();
    });
});</span></pre>
<p><span class="koboSpan" id="kobo.923.1">Here are some of the changes</span><a id="_idIndexMarker458"/><span class="koboSpan" id="kobo.924.1"> that were made</span><a id="_idIndexMarker459"/><span class="koboSpan" id="kobo.925.1"> in the refactored </span><span class="No-Break"><span class="koboSpan" id="kobo.926.1">test code:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.927.1">The tests were wrapped in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.928.1">describe</span></strong><span class="koboSpan" id="kobo.929.1"> block to group them under the </span><span class="No-Break"><span class="koboSpan" id="kobo.930.1">same heading</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.931.1">test()</span></strong><span class="koboSpan" id="kobo.932.1"> was replaced with </span><strong class="source-inline"><span class="koboSpan" id="kobo.933.1">it()</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.934.1">for consistency</span></span></li>
<li><span class="koboSpan" id="kobo.935.1">The text matching was changed from </span><strong class="source-inline"><span class="koboSpan" id="kobo.936.1">getByText</span></strong><span class="koboSpan" id="kobo.937.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.938.1">getByLabelText</span></strong><span class="koboSpan" id="kobo.939.1"> for the email and password inputs, as this is a more appropriate way to target </span><span class="No-Break"><span class="koboSpan" id="kobo.940.1">form inputs</span></span></li>
<li><span class="koboSpan" id="kobo.941.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.942.1">getByTest</span></strong><span class="koboSpan" id="kobo.943.1"> query for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.944.1">Signin</span></strong><span class="koboSpan" id="kobo.945.1"> button was replaced</span><a id="_idIndexMarker460"/><span class="koboSpan" id="kobo.946.1"> with </span><strong class="source-inline"><span class="koboSpan" id="kobo.947.1">getByRole</span></strong><span class="koboSpan" id="kobo.948.1"> and a </span><span class="No-Break"><span class="koboSpan" id="kobo.949.1">name</span></span><span class="No-Break"><a id="_idIndexMarker461"/></span><span class="No-Break"><span class="koboSpan" id="kobo.950.1"> option</span></span></li>
</ul>
<h1 id="_idParaDest-125"><a id="_idTextAnchor156"/><span class="koboSpan" id="kobo.951.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.952.1">Testing is crucial to the successful deployment of an application product into production. </span><span class="koboSpan" id="kobo.952.2">In this chapter, we examined various testing types available, especially unit testing for code base quality and ease of maintainability. </span><span class="koboSpan" id="kobo.952.3">This ensures a lower cost of producing software </span><span class="No-Break"><span class="koboSpan" id="kobo.953.1">with confidence.</span></span></p>
<p><span class="koboSpan" id="kobo.954.1">We also explored Jest, a Node test runner that delightfully tests JavaScript code and, by extension, React applications. </span><span class="koboSpan" id="kobo.954.2">The Jest testing framework ensures that you work in an integrated testing environment, with virtually all your testing tools in one place and only a stone’s </span><span class="No-Break"><span class="koboSpan" id="kobo.955.1">throw away.</span></span></p>
<p><span class="koboSpan" id="kobo.956.1">We discussed RTL with its implementation and then, in depth, the unit testing of React components using Jest and RTL, which comes with the </span><strong class="bold"><span class="koboSpan" id="kobo.957.1">Create React App</span></strong><span class="koboSpan" id="kobo.958.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.959.1">CRA</span></strong><span class="koboSpan" id="kobo.960.1">) </span><span class="No-Break"><span class="koboSpan" id="kobo.961.1">boilerplate code.</span></span></p>
<p><span class="koboSpan" id="kobo.962.1">We wrote useful component tests to showcase the ability of the combined tools of Jest and TLR. </span><span class="koboSpan" id="kobo.962.2">Finally, we discussed a testing methodology, TDD, in software development and how it can be used in React-based applications </span><span class="No-Break"><span class="koboSpan" id="kobo.963.1">with examples.</span></span></p>
<p><span class="koboSpan" id="kobo.964.1">Next, we will temporarily shift the focus of this book and delve into the backend development aspect of full stack web development, which is what this book is all about. </span><span class="koboSpan" id="kobo.964.2">We will begin a backend application in the next chapter, discussing SQL and </span><span class="No-Break"><span class="koboSpan" id="kobo.965.1">data modeling.</span></span></p>
</div>


<div class="Content" id="_idContainer067">
<h1 id="_idParaDest-126" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor157"/><span class="koboSpan" id="kobo.1.1">Part 2 – Backend Development with Flask</span></h1>
<p><span class="koboSpan" id="kobo.2.1">Welcome to </span><em class="italic"><span class="koboSpan" id="kobo.3.1">Part 2</span></em><span class="koboSpan" id="kobo.4.1"> of our book, where we will delve into the dynamics of backend development with Flask. </span><span class="koboSpan" id="kobo.4.2">In this section, we will explore the fundamental concepts and techniques used in modern web development using the </span><span class="No-Break"><span class="koboSpan" id="kobo.5.1">Flask framework.</span></span></p>
<p><span class="koboSpan" id="kobo.6.1">You will gain the knowledge and tools necessary to tackle the complexities of backend development. </span><span class="koboSpan" id="kobo.6.2">From setting up your Flask environment to designing efficient RESTful APIs, implementing database integration, and integrating React frontends with Flask, we will cover </span><span class="No-Break"><span class="koboSpan" id="kobo.7.1">it all.</span></span></p>
<p><span class="koboSpan" id="kobo.8.1">By the end of this part, you will have a solid grasp of Flask’s core concepts and be well on your way to becoming a proficient full stack web developer. </span><span class="koboSpan" id="kobo.8.2">Let’s embark on this exciting journey together! </span></p>
<p><span class="koboSpan" id="kobo.9.1">This part has the </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">following chapters:</span></span></p>
<ul>
<li><a href="B18554_08.xhtml#_idTextAnchor158"><em class="italic"><span class="koboSpan" id="kobo.11.1">Chapter 8</span></em></a><span class="koboSpan" id="kobo.12.1">, </span><em class="italic"><span class="koboSpan" id="kobo.13.1">SQL and Data Modeling</span></em></li>
<li><a href="B18554_09.xhtml#_idTextAnchor186"><em class="italic"><span class="koboSpan" id="kobo.14.1">Chapter 9</span></em></a><span class="koboSpan" id="kobo.15.1">, </span><em class="italic"><span class="koboSpan" id="kobo.16.1">API Development and Documentation</span></em></li>
<li><a href="B18554_10.xhtml#_idTextAnchor221"><em class="italic"><span class="koboSpan" id="kobo.17.1">Chapter 10</span></em></a><span class="koboSpan" id="kobo.18.1">, </span><em class="italic"><span class="koboSpan" id="kobo.19.1">Integrating React Frontend with the Flask Backend</span></em></li>
<li><a href="B18554_11.xhtml#_idTextAnchor232"><em class="italic"><span class="koboSpan" id="kobo.20.1">Chapter 11</span></em></a><span class="koboSpan" id="kobo.21.1">, </span><em class="italic"><span class="koboSpan" id="kobo.22.1">Fetching and Displaying Data in a React-Flask Application</span></em></li>
<li><a href="B18554_12.xhtml#_idTextAnchor252"><em class="italic"><span class="koboSpan" id="kobo.23.1">Chapter 12</span></em></a><span class="koboSpan" id="kobo.24.1">, </span><em class="italic"><span class="koboSpan" id="kobo.25.1">Authentication and Authorization</span></em></li>
<li><a href="B18554_13.xhtml#_idTextAnchor273"><em class="italic"><span class="koboSpan" id="kobo.26.1">Chapter 13</span></em></a><span class="koboSpan" id="kobo.27.1">, </span><em class="italic"><span class="koboSpan" id="kobo.28.1">Error Handling</span></em></li>
<li><a href="B18554_14.xhtml#_idTextAnchor285"><em class="italic"><span class="koboSpan" id="kobo.29.1">Chapter 14</span></em></a><span class="koboSpan" id="kobo.30.1">, </span><em class="italic"><span class="koboSpan" id="kobo.31.1">Modular Architecture – The Power of Blueprints</span></em></li>
<li><a href="B18554_15.xhtml#_idTextAnchor298"><em class="italic"><span class="koboSpan" id="kobo.32.1">Chapter 15</span></em></a><span class="koboSpan" id="kobo.33.1">, </span><em class="italic"><span class="koboSpan" id="kobo.34.1">Flask Unit Testing</span></em></li>
<li><a href="B18554_16.xhtml#_idTextAnchor328"><em class="italic"><span class="koboSpan" id="kobo.35.1">Chapter 16</span></em></a><span class="koboSpan" id="kobo.36.1">, </span><em class="italic"><span class="koboSpan" id="kobo.37.1">Containerization and Flask Application Deployment</span></em></li>
</ul>
</div>
<div>
<div id="_idContainer068">
</div>
</div>
<div>
<div class="Basic-Graphics-Frame" id="_idContainer069">
</div>
</div>
</body></html>