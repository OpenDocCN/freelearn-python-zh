<html><head></head><body>
<div id="_idContainer272">
<h1 class="chapter-number" id="_idParaDest-200"><a id="_idTextAnchor203"/><span class="koboSpan" id="kobo.1.1">8</span></h1>
<h1 id="_idParaDest-201"><a id="_idTextAnchor204"/><span class="koboSpan" id="kobo.2.1">Building a Dynamic Web Application with Flask</span></h1>
<p><span class="koboSpan" id="kobo.3.1">I am fortunate enough to have been around the field of web development since its inception. </span><span class="koboSpan" id="kobo.3.2">I was a software engineer before there was a World Wide Web, at least one used by the general public. </span><span class="koboSpan" id="kobo.3.3">I remember the first time someone asked me to build a web application. </span><span class="koboSpan" id="kobo.3.4">I had to ask what it was. </span><span class="koboSpan" id="kobo.3.5">The guy told me, and I remember thinking “Well that’s dumb! </span><span class="koboSpan" id="kobo.3.6">Why wouldn’t people just use CompuServe or </span><strong class="bold"><span class="koboSpan" id="kobo.4.1">America Online</span></strong><span class="koboSpan" id="kobo.5.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.6.1">AOL</span></strong><span class="koboSpan" id="kobo.7.1">) for that?” </span><span class="koboSpan" id="kobo.7.2">I thought the internet was going to be, at best, a fad. </span><span class="koboSpan" id="kobo.7.3">It was complicated, loaded with jargon, the UI was terrible compared with online services of the day, and it all just seemed kind of janky. </span><span class="koboSpan" id="kobo.7.4">I guess I </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">was wrong.</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">Once I figured that out, I learned HTML and JavaScript. </span><span class="koboSpan" id="kobo.9.2">CSS wasn’t even a thing yet. </span><span class="koboSpan" id="kobo.9.3">It wasn’t long before I hit a wall with HTML’s capabilities. </span><span class="koboSpan" id="kobo.9.4">As you well know, HTML isn’t a programming language. </span><span class="koboSpan" id="kobo.9.5">It is a content markup language that controls the presentation of static content. </span><span class="koboSpan" id="kobo.9.6">The earliest version of JavaScript wasn’t very useful. </span><span class="koboSpan" id="kobo.9.7">You could validate forms. </span><span class="koboSpan" id="kobo.9.8">That’s about it. </span><span class="koboSpan" id="kobo.9.9">Dynamic content generation with JavaScript wasn’t a feature until HTML 3 </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">came out.</span></span></p>
<p><span class="koboSpan" id="kobo.11.1">Like I said, I hit a wall. </span><span class="koboSpan" id="kobo.11.2">I needed to take user interaction data from the browser and use it to interact with a database, generate files, and more. </span><span class="koboSpan" id="kobo.11.3">With HTML and JavaScript, this simply wasn’t possible. </span><span class="koboSpan" id="kobo.11.4">I needed a backend language. </span><span class="koboSpan" id="kobo.11.5">Initially, that was the C language. </span><span class="koboSpan" id="kobo.11.6">Even that was limited. </span><span class="koboSpan" id="kobo.11.7">You had to write modules in C that could interoperate with the Apache web server using</span><a id="_idIndexMarker673"/><span class="koboSpan" id="kobo.12.1"> an interface called the </span><strong class="bold"><span class="koboSpan" id="kobo.13.1">common gateway </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.14.1">interface</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.15.1"> (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.16.1">CGI</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.18.1">So that was it for the first few years. </span><span class="koboSpan" id="kobo.18.2">Writing dynamic web applications was hard, and nothing like the capabilities of today. </span><span class="koboSpan" id="kobo.18.3">New languages and paradigms emerged to make the practice of web development more accessible. </span><span class="koboSpan" id="kobo.18.4">My first good experience was with a product called </span><strong class="bold"><span class="koboSpan" id="kobo.19.1">Cold Fusion</span></strong><span class="koboSpan" id="kobo.20.1">. </span><span class="koboSpan" id="kobo.20.2">This program </span><a id="_idIndexMarker674"/><span class="koboSpan" id="kobo.21.1">consisted of a framework that effectively replaced the CGI development requirements and allowed you to create scripts in a custom</span><a id="_idIndexMarker675"/><span class="koboSpan" id="kobo.22.1"> language, called </span><strong class="bold"><span class="koboSpan" id="kobo.23.1">Cold Fusion Markup Language </span></strong><span class="koboSpan" id="kobo.24.1">(</span><strong class="bold"><span class="koboSpan" id="kobo.25.1">CFML</span></strong><span class="koboSpan" id="kobo.26.1">). </span><span class="koboSpan" id="kobo.26.2">It was a mixture of HTML markup and specialized tags. </span><span class="koboSpan" id="kobo.26.3">The web server would recognize files with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.27.1">.cfml</span></strong><span class="koboSpan" id="kobo.28.1"> extension and process those files differently than normal HTML files. </span><span class="koboSpan" id="kobo.28.2">I was able to access an Oracle database very easily and, coupled with a lot of long nights and the creativity of my youth, I created some graphics pipeline software that garnered my employer a </span><span class="No-Break"><span class="koboSpan" id="kobo.29.1">software patent.</span></span></p>
<p><span class="koboSpan" id="kobo.30.1">CFML was part of a growing trend. </span><span class="koboSpan" id="kobo.30.2">The same technology was employed by lots of other nascent companies and stacks, including </span><span class="No-Break"><span class="koboSpan" id="kobo.31.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.32.1">Microsoft created </span><strong class="bold"><span class="koboSpan" id="kobo.33.1">Active Server Pages </span></strong><span class="koboSpan" id="kobo.34.1">(</span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.35.1">ASP Classic</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">)</span></span></li>
<li><span class="koboSpan" id="kobo.37.1">Sun Microsystems introduced </span><strong class="bold"><span class="koboSpan" id="kobo.38.1">Java Server </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.39.1">Pages </span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.40.1">(</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.41.1">JSP</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.42.1">)</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.43.1">Hypertext </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.44.1">Preprocessor</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.45.1"> (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.46.1">PHP</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.47.1">)</span></span></li>
<li><span class="koboSpan" id="kobo.48.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.49.1">National Center for Supercomputing Applications </span></strong><span class="koboSpan" id="kobo.50.1">(</span><strong class="bold"><span class="koboSpan" id="kobo.51.1">NCSA)</span></strong><span class="koboSpan" id="kobo.52.1"> created </span><strong class="bold"><span class="koboSpan" id="kobo.53.1">Server -side Includes </span></strong><span class="koboSpan" id="kobo.54.1">(</span><strong class="bold"><span class="koboSpan" id="kobo.55.1">SSIs</span></strong><span class="koboSpan" id="kobo.56.1">), which were not as feature-rich as the others in this list, but nevertheless existed as a way to generate </span><span class="No-Break"><span class="koboSpan" id="kobo.57.1">dynamic content</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.58.1">In this chapter, we’re going to take a quantum leap forward and look at a more modern framework for creating dynamic content, which is generated on the server side rather than the client side within the browser. </span><span class="koboSpan" id="kobo.58.2">Specifically, we’ll be looking at a framework called </span><strong class="bold"><span class="koboSpan" id="kobo.59.1">Flask</span></strong><span class="koboSpan" id="kobo.60.1">, a popular, unopinionated </span><a id="_idIndexMarker676"/><span class="koboSpan" id="kobo.61.1">solution for creating web applications in Python. </span><span class="koboSpan" id="kobo.61.2">By the end of this chapter, you will understand </span><span class="No-Break"><span class="koboSpan" id="kobo.62.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.63.1">The basics of web development</span><a id="_idIndexMarker677"/><span class="koboSpan" id="kobo.64.1"> such as </span><strong class="bold"><span class="koboSpan" id="kobo.65.1">client-server architecture</span></strong><span class="koboSpan" id="kobo.66.1">, and the stateless </span><strong class="bold"><span class="koboSpan" id="kobo.67.1">request-response model</span></strong><span class="koboSpan" id="kobo.68.1"> employed by </span><span class="No-Break"><span class="koboSpan" id="kobo.69.1">the web</span></span></li>
<li><span class="koboSpan" id="kobo.70.1">What Flask is, and how it compares to other Python frameworks for </span><span class="No-Break"><span class="koboSpan" id="kobo.71.1">web development</span></span></li>
<li><span class="koboSpan" id="kobo.72.1">How to create a Flask application </span><span class="No-Break"><span class="koboSpan" id="kobo.73.1">in PyCharm</span></span></li>
<li><span class="koboSpan" id="kobo.74.1">How to work with </span><strong class="bold"><span class="koboSpan" id="kobo.75.1">Jinja2</span></strong><span class="koboSpan" id="kobo.76.1"> templates in PyCharm, which are used to serve dynamic content mixed with regular HTML markup, CSS styling, and </span><span class="No-Break"><span class="koboSpan" id="kobo.77.1">JavaScript interactivity</span></span></li>
<li><span class="koboSpan" id="kobo.78.1">How to create a RESTful API endpoint that returns data in JSON format rather </span><span class="No-Break"><span class="koboSpan" id="kobo.79.1">than content</span></span></li>
<li><span class="koboSpan" id="kobo.80.1">How to use PyCharm’s HTTP Requests feature to test </span><span class="No-Break"><span class="koboSpan" id="kobo.81.1">your API</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.82.1">Bear in mind, this chapter isn’t meant to be a tutorial on Flask. </span><span class="koboSpan" id="kobo.82.2">It is a tutorial on how to use PyCharm to work with Flask. </span><span class="koboSpan" id="kobo.82.3">If you’re looking for a full tutorial on Flask, visit my website at </span><a href="https://www.maddevskilz.com"><span class="koboSpan" id="kobo.83.1">https://www.maddevskilz.com</span></a><span class="koboSpan" id="kobo.84.1">. </span><span class="koboSpan" id="kobo.84.2">There are several expanded tutorials on Flask that go into a deep dive and entail building </span><span class="No-Break"><span class="koboSpan" id="kobo.85.1">entire proje</span><a id="_idTextAnchor205"/><span class="koboSpan" id="kobo.86.1">cts.</span></span></p>
<h1 id="_idParaDest-202"><a id="_idTextAnchor206"/><span class="koboSpan" id="kobo.87.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.88.1">In order to proceed through this chapter, and indeed the rest of the book, you will need </span><span class="No-Break"><span class="koboSpan" id="kobo.89.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.90.1">An installed and working Python interpreter. </span><span class="koboSpan" id="kobo.90.2">I’ll be using the latest </span><span class="No-Break"><span class="koboSpan" id="kobo.91.1">from </span></span><a href="https://python.org"><span class="No-Break"><span class="koboSpan" id="kobo.92.1">https://python.org</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.93.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.94.1">Installed copies of </span><strong class="source-inline"><span class="koboSpan" id="kobo.95.1">pip</span></strong><span class="koboSpan" id="kobo.96.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.97.1">virtualenv</span></strong><span class="koboSpan" id="kobo.98.1">. </span><span class="koboSpan" id="kobo.98.2">You get these automatically when you install Python on Windows, and macOS has them included on every system. </span><span class="koboSpan" id="kobo.98.3">If you are using Linux, you need to install the package managers, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.99.1">pip</span></strong><span class="koboSpan" id="kobo.100.1">, and virtual environment tools, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.101.1">virtualenv</span></strong><span class="koboSpan" id="kobo.102.1">, separately. </span><span class="koboSpan" id="kobo.102.2">Our examples will use </span><strong class="source-inline"><span class="koboSpan" id="kobo.103.1">pip</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.104.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.105.1">virtualenv</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.106.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.107.1">An installed and working copy of PyCharm. </span><span class="koboSpan" id="kobo.107.2">Installation was covered in </span><a href="B19644_02.xhtml#_idTextAnchor028"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.108.1">Chapter 2</span></em></span></a><em class="italic"><span class="koboSpan" id="kobo.109.1">, Installation and Configuration</span></em><span class="koboSpan" id="kobo.110.1">, in case you are jumping into the middle of </span><span class="No-Break"><span class="koboSpan" id="kobo.111.1">the book.</span></span></li>
<li><span class="koboSpan" id="kobo.112.1">This book’s sample source code is from GitHub. </span><span class="koboSpan" id="kobo.112.2">We covered cloning the code in </span><a href="B19644_02.xhtml#_idTextAnchor028"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.113.1">Chapter 2</span></em></span></a><em class="italic"><span class="koboSpan" id="kobo.114.1">, Installation and Configuration</span></em><span class="koboSpan" id="kobo.115.1">. </span><span class="koboSpan" id="kobo.115.2">You’ll find this chapter’s relevant code </span><span class="No-Break"><span class="koboSpan" id="kobo.116.1">at </span></span><a href="https://github.com/PacktPublishing/Hands-On-Application-Development-with-PyCharm---Second-Edition/tree/main/chapter-08"><span class="No-Break"><span class="koboSpan" id="kobo.117.1">https://github.com/PacktPublishing/Hands-On-Application-Development-with-PyCharm---Second-Edition/tree/main/chapter-08</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.118.1">.</span></span></li>
</ul>
<h1 id="_idParaDest-203"><a id="_idTextAnchor207"/><span class="koboSpan" id="kobo.119.1">Web basics – client-server architecture</span></h1>
<p><span class="koboSpan" id="kobo.120.1">When I began my career in IT back in 1991, I worked for a company called </span><strong class="bold"><span class="koboSpan" id="kobo.121.1">Electronic Data Systems </span></strong><span class="koboSpan" id="kobo.122.1">(</span><strong class="bold"><span class="koboSpan" id="kobo.123.1">EDS</span></strong><span class="koboSpan" id="kobo.124.1">). </span><span class="koboSpan" id="kobo.124.2">It was a </span><a id="_idIndexMarker678"/><span class="koboSpan" id="kobo.125.1">different era. </span><span class="koboSpan" id="kobo.125.2">Back then, any serious computing was performed by monolithic systems called </span><strong class="bold"><span class="koboSpan" id="kobo.126.1">mainframes</span></strong><span class="koboSpan" id="kobo.127.1">. </span><span class="koboSpan" id="kobo.127.2">Imagine a</span><a id="_idIndexMarker679"/><span class="koboSpan" id="kobo.128.1"> mainframe </span><a id="_idIndexMarker680"/><span class="koboSpan" id="kobo.129.1">computer as an incredibly powerful and large-scale computer that existed before the era of personal computers and smartphones. </span><span class="koboSpan" id="kobo.129.2">It was like a supercomputer, capable of handling massive amounts of data and performing </span><span class="No-Break"><span class="koboSpan" id="kobo.130.1">complex computations.</span></span></p>
<p><span class="koboSpan" id="kobo.131.1">Mainframe computers were typically housed in specially designed rooms or data centers because they required a lot of space and specialized power and cooling systems to function properly. </span><span class="koboSpan" id="kobo.131.2">The typical mainframe was usually about the size of a minivan while its separate </span><strong class="bold"><span class="koboSpan" id="kobo.132.1">Power Distribution Unit</span></strong><span class="koboSpan" id="kobo.133.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.134.1">PDU</span></strong><span class="koboSpan" id="kobo.135.1">) was </span><a id="_idIndexMarker681"/><span class="koboSpan" id="kobo.136.1">roughly twice the size of a typical </span><a id="_idIndexMarker682"/><span class="koboSpan" id="kobo.137.1">clothes dryer. </span><span class="koboSpan" id="kobo.137.2">The </span><strong class="bold"><span class="koboSpan" id="kobo.138.1">Direct Access Storage Device</span></strong><span class="koboSpan" id="kobo.139.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.140.1">DASD</span></strong><span class="koboSpan" id="kobo.141.1">) was in yet another similarly large rectangular metal box. </span><span class="koboSpan" id="kobo.141.2">Connecting these various components were heavy cables about the diameter of a spent paper towel roll. </span><span class="koboSpan" id="kobo.141.3">Models from IBM’s Z14 series weighed between 2,500 and 4,000 kg (5,500 and </span><span class="No-Break"><span class="koboSpan" id="kobo.142.1">8,800 lbs).</span></span></p>
<p><span class="koboSpan" id="kobo.143.1">In the past, mainframe computers were commonly used by large organizations, such as banks, government agencies, universities, and large </span><a id="_idIndexMarker683"/><span class="koboSpan" id="kobo.144.1">corporations. </span><span class="koboSpan" id="kobo.144.2">They were responsible for processing and managing huge volumes of data, running critical business applications, and supporting the operations of entire enterprises. </span><span class="koboSpan" id="kobo.144.3">In my case, I worked with the IBM mainframe systems responsible for running the automotive assembly line operations for </span><strong class="bold"><span class="koboSpan" id="kobo.145.1">General Motors</span></strong><span class="koboSpan" id="kobo.146.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.147.1">GM</span></strong><span class="koboSpan" id="kobo.148.1">), </span><span class="No-Break"><span class="koboSpan" id="kobo.149.1">among others.</span></span></p>
<p><span class="koboSpan" id="kobo.150.1">Mainframes were known for their reliability, security, and high-performance capabilities. </span><span class="koboSpan" id="kobo.150.2">They could handle multiple tasks simultaneously and provide fast response times, even when dealing with extensive workloads. </span><span class="koboSpan" id="kobo.150.3">People would access mainframes through terminals or other connected devices to perform tasks or </span><span class="No-Break"><span class="koboSpan" id="kobo.151.1">retrieve information.</span></span></p>
<p><span class="koboSpan" id="kobo.152.1">With the advancement of technology and the emergence of personal computers, the role of mainframes has evolved. </span><span class="koboSpan" id="kobo.152.2">While they still play a vital role in certain industries, many of the computing tasks that were once exclusive to mainframes are now handled by distributed systems, relatively cheap rack-mounted Intel and IBM Power-based systems, cloud computing, and smaller devices such as laptops </span><span class="No-Break"><span class="koboSpan" id="kobo.153.1">and smartphones.</span></span></p>
<p><span class="koboSpan" id="kobo.154.1">Mainframes were, and I suppose still are, very expensive to own and operate. </span><span class="koboSpan" id="kobo.154.2">Not only was the hardware expensive but it also generally took a team of expert computer operators and maintainers to keep the system running. </span><span class="koboSpan" id="kobo.154.3">The cost was out of reach for all but the largest corporations and universities. </span><span class="koboSpan" id="kobo.154.4">Smaller companies and even smaller nations had to buy time on other people’s mainframes to gain access to computing at scale. </span><span class="koboSpan" id="kobo.154.5">This, in fact, was the service rendered by EDS. </span><span class="koboSpan" id="kobo.154.6">We had acres of space in several very large data centers located throughout the world, and we sold time and provided services to nearly all of the Fortune 500 companies. </span><span class="koboSpan" id="kobo.154.7">The cost eventually, along with the implications of Moore’s Law, led to the downfall of </span><span class="No-Break"><span class="koboSpan" id="kobo.155.1">the mainframe.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.156.1">Moore’s Law</span></strong><span class="koboSpan" id="kobo.157.1"> is an observation </span><a id="_idIndexMarker684"/><span class="koboSpan" id="kobo.158.1">and projection made by Gordon Moore, the co-founder of Intel Corporation, in 1965. </span><span class="koboSpan" id="kobo.158.2">It states that the number of transistors on a microchip doubles approximately every two years, leading to a significant increase in computing power and performance while reducing the cost of </span><span class="No-Break"><span class="koboSpan" id="kobo.159.1">electronic devices.</span></span></p>
<p><span class="koboSpan" id="kobo.160.1">Moore originally noted that this exponential growth in transistor density had been occurring since the invention of the integrated circuit, and he predicted that it would continue for the foreseeable future. </span><span class="koboSpan" id="kobo.160.2">Over the years, Moore’s Law has held remarkably true, with advancements in semiconductor manufacturing technology allowing for increasingly smaller transistors and more complex </span><span class="No-Break"><span class="koboSpan" id="kobo.161.1">integrated circuits.</span></span></p>
<p><span class="koboSpan" id="kobo.162.1">The doubling of transistor density every </span><a id="_idIndexMarker685"/><span class="koboSpan" id="kobo.163.1">two years has had profound implications for the field of computing. </span><span class="koboSpan" id="kobo.163.2">It has enabled the development of more powerful and efficient computers, with increased processing speed, memory capacity, and storage capabilities. </span><span class="koboSpan" id="kobo.163.3">As more transistors can be packed onto a chip, the overall performance of electronic devices has improved while their physical size </span><span class="No-Break"><span class="koboSpan" id="kobo.164.1">has decreased.</span></span></p>
<p><span class="koboSpan" id="kobo.165.1">As computers became smaller, and chip </span><a id="_idIndexMarker686"/><span class="koboSpan" id="kobo.166.1">architectures such as </span><strong class="bold"><span class="koboSpan" id="kobo.167.1">Reduced Instruction Set Computing </span></strong><span class="koboSpan" id="kobo.168.1">(</span><strong class="bold"><span class="koboSpan" id="kobo.169.1">RISC</span></strong><span class="koboSpan" id="kobo.170.1">) and eventually Intel’s x86 architecture appeared, a new model of computing </span><span class="No-Break"><span class="koboSpan" id="kobo.171.1">emerged: </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.172.1">client-server</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.173.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.174.1">Mainframes were centralized and accessed using “dumb” terminals. </span><span class="koboSpan" id="kobo.174.2">These terminals had no compute capability, no storage, and only enough memory to maintain a communications buffer to send whatever you typed on the keyboard to the mainframe </span><span class="No-Break"><span class="koboSpan" id="kobo.175.1">for processing.</span></span></p>
<p><span class="koboSpan" id="kobo.176.1">Client-server architecture shifted some of the compute, storage, and memory to a local client, which was usually a PC. </span><span class="koboSpan" id="kobo.176.2">The client was</span><a id="_idIndexMarker687"/><span class="koboSpan" id="kobo.177.1"> connected via a </span><strong class="bold"><span class="koboSpan" id="kobo.178.1">local area network</span></strong><span class="koboSpan" id="kobo.179.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.180.1">LAN</span></strong><span class="koboSpan" id="kobo.181.1">) to a server, which was generally more powerful than a PC and capable of running enterprise-grade computing loads. </span><span class="koboSpan" id="kobo.181.2">You typically had client software, which was composed of a desktop user interface running on the PC’s operating system. </span><span class="koboSpan" id="kobo.181.3">The client software interfaced with centralized software running on </span><span class="No-Break"><span class="koboSpan" id="kobo.182.1">the server.</span></span></p>
<p><span class="koboSpan" id="kobo.183.1">Besides client and server hardware, one final piece came into existence around the same time: a standardized network protocol known as </span><strong class="bold"><span class="koboSpan" id="kobo.184.1">Transmission Control Protocol/Internet Protocol </span></strong><span class="koboSpan" id="kobo.185.1">(</span><strong class="bold"><span class="koboSpan" id="kobo.186.1">TCP/IP</span></strong><span class="koboSpan" id="kobo.187.1">). </span><span class="koboSpan" id="kobo.187.2">I was in </span><a id="_idIndexMarker688"/><span class="koboSpan" id="kobo.188.1">college before TCP/IP and in order to interact with the University of Oklahoma’s mainframe, I had to keep a stack of floppy disks on hand that held an odd, mismatched collection of communication protocols. </span><span class="koboSpan" id="kobo.188.2">Some systems used a protocol called </span><strong class="bold"><span class="koboSpan" id="kobo.189.1">Kernel for Efficient, Remote, and Multiple Computer Interactions</span></strong><span class="koboSpan" id="kobo.190.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.191.1">KERMIT</span></strong><span class="koboSpan" id="kobo.192.1">). </span><span class="koboSpan" id="kobo.192.2">I also had disks for </span><em class="italic"><span class="koboSpan" id="kobo.193.1">XMODEM</span></em><span class="koboSpan" id="kobo.194.1">, </span><em class="italic"><span class="koboSpan" id="kobo.195.1">YMODEM</span></em><span class="koboSpan" id="kobo.196.1">, and </span><em class="italic"><span class="koboSpan" id="kobo.197.1">ZMODEM</span></em><span class="koboSpan" id="kobo.198.1">. </span><span class="koboSpan" id="kobo.198.2">Depending on which type of computer I </span><a id="_idIndexMarker689"/><span class="koboSpan" id="kobo.199.1">wanted to access, I had to employ a different protocol. </span><span class="koboSpan" id="kobo.199.2">TCP/IP changed all that with a standard set of protocols supported by everything from mainframes and PCs to modern smartphones and </span><span class="No-Break"><span class="koboSpan" id="kobo.200.1">internet-connected toasters.</span></span></p>
<p><span class="koboSpan" id="kobo.201.1">If this sounds like the</span><a id="_idIndexMarker690"/><span class="koboSpan" id="kobo.202.1"> internet to you, you’d be right – but with a </span><span class="No-Break"><span class="koboSpan" id="kobo.203.1">few caveats:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.204.1">The client server was very slow, and often not even full duplex, meaning data could only flow in one direction at </span><span class="No-Break"><span class="koboSpan" id="kobo.205.1">a time.</span></span></li>
<li><span class="koboSpan" id="kobo.206.1">Most client programs did not have a real GUI and didn’t support mouse interactions. </span><span class="koboSpan" id="kobo.206.2">They were known as “green screen” interfaces</span><a id="_idIndexMarker691"/><span class="koboSpan" id="kobo.207.1"> because they were rendered using textual menus on monochrome screens that were often green. </span><span class="koboSpan" id="kobo.207.2">Later thick-client applications had real GUIs usually written in Java, Visual Basic, C++, or Delphi. </span><span class="koboSpan" id="kobo.207.3">They were called thick because the size of the program was large enough that downloading the GUI could take many hours over a typical connection. </span><span class="koboSpan" id="kobo.207.4">This sits in stark contrast to a typical web application running on the </span><span class="No-Break"><span class="koboSpan" id="kobo.208.1">modern internet.</span></span></li>
<li><span class="koboSpan" id="kobo.209.1">The client software was always designed around a specialized set of use cases. </span><span class="koboSpan" id="kobo.209.2">In contrast, web browsers today, which comprise the client, can be used to run any kind of software from general word processing applications to specific lines of </span><span class="No-Break"><span class="koboSpan" id="kobo.210.1">business applications.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.211.1">The web is the natural evolution in client server architecture. </span><span class="koboSpan" id="kobo.211.2">Lightweight client software, the web browser, connects to a centralized server where the bulk of the real work is handled using universally accepted </span><span class="No-Break"><span class="koboSpan" id="kobo.212.1">networking protocols.</span></span></p>
<h1 id="_idParaDest-204"><a id="_idTextAnchor208"/><span class="koboSpan" id="kobo.213.1">Exploring the request-response mechanism in HTTP – how clients and servers communicate</span></h1>
<p><span class="koboSpan" id="kobo.214.1">One of the great accomplishments of the 1980s, besides CFC-laden hairspray, was the development of a universal set of networking protocols known as TCP/IP. </span><span class="koboSpan" id="kobo.214.2">In case you are new to this, the correct </span><a id="_idIndexMarker692"/><span class="koboSpan" id="kobo.215.1">way to pronounce this is as letters: </span><em class="italic"><span class="koboSpan" id="kobo.216.1">tea sea pea eye pea</span></em><span class="koboSpan" id="kobo.217.1">. </span><span class="koboSpan" id="kobo.217.2">The slash is silent, just like it is </span><span class="No-Break"><span class="koboSpan" id="kobo.218.1">with ninjas.</span></span></p>
<p><span class="koboSpan" id="kobo.219.1">It took a while for it to be universally adopted, but ultimately it was, and the protocols of TCP/IP form the basis of the modern web. </span><span class="koboSpan" id="kobo.219.2">While there are many useful protocols serving a myriad of functions, I want to focus your attention on the </span><strong class="bold"><span class="koboSpan" id="kobo.220.1">Hypertext Transfer Protocol </span></strong><span class="koboSpan" id="kobo.221.1">(</span><strong class="bold"><span class="koboSpan" id="kobo.222.1">HTTP</span></strong><span class="koboSpan" id="kobo.223.1">). </span><span class="koboSpan" id="kobo.223.2">You can go ahead and include the secure counterpart, </span><em class="italic"><span class="koboSpan" id="kobo.224.1">HTTPS</span></em><span class="koboSpan" id="kobo.225.1">, where the </span><em class="italic"><span class="koboSpan" id="kobo.226.1">S</span></em><span class="koboSpan" id="kobo.227.1"> stands for </span><em class="italic"><span class="koboSpan" id="kobo.228.1">secure</span></em><span class="koboSpan" id="kobo.229.1">. </span><span class="koboSpan" id="kobo.229.2">They effectively work the same way, except that HTTPS </span><span class="No-Break"><span class="koboSpan" id="kobo.230.1">is encrypted.</span></span></p>
<p><span class="koboSpan" id="kobo.231.1">The request-response mechanism entails a chain of events that describes a conversation that happens between the web browser or client, and the web server. </span><span class="koboSpan" id="kobo.231.2">You can watch this conversation unfold in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.232.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.233.1">.1</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.234.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer259">
<span class="koboSpan" id="kobo.235.1"><img alt="Figure 8.1: The request-response mechanism in HTTP conveys a request from a browser to the server, which computes a response and sends it back to the browser" src="image/B19644_08_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.236.1">Figure 8.1: The request-response mechanism in HTTP conveys a request from a browser to the server, which computes a response and sends it back to the browser</span></p>
<p><span class="koboSpan" id="kobo.237.1">The request-response mechanism used by HTTP is the fundamental communication pattern between clients, such as web browsers or mobile applications, and servers on the World Wide Web. </span><span class="koboSpan" id="kobo.237.2">It works </span><span class="No-Break"><span class="koboSpan" id="kobo.238.1">like this:</span></span></p>
<ol>
<li><strong class="bold"><span class="koboSpan" id="kobo.239.1">An HTTP request originates from the browser</span></strong><span class="koboSpan" id="kobo.240.1">: The process begins when a client sends an HTTP request to a server. </span><span class="koboSpan" id="kobo.240.2">The request consists of a specific HTTP method, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.241.1">GET</span></strong><span class="koboSpan" id="kobo.242.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.243.1">POST</span></strong><span class="koboSpan" id="kobo.244.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.245.1">PUT</span></strong><span class="koboSpan" id="kobo.246.1">, or </span><strong class="source-inline"><span class="koboSpan" id="kobo.247.1">DELETE</span></strong><span class="koboSpan" id="kobo.248.1">, which indicates the desired</span><a id="_idIndexMarker693"/><span class="koboSpan" id="kobo.249.1"> action to be performed on the server’s resources, along with additional headers and, in some cases, a request body that </span><span class="No-Break"><span class="koboSpan" id="kobo.250.1">carries data.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.251.1">The request is received by the server</span></strong><span class="koboSpan" id="kobo.252.1">: Upon receiving the request, the server processes the information provided in the request. </span><span class="koboSpan" id="kobo.252.2">This may involve accessing databases, performing calculations, or executing other server-side operations based on the nature of the request. </span><span class="koboSpan" id="kobo.252.3">The simplest request is one for an HTML document, or other file that is </span><span class="No-Break"><span class="koboSpan" id="kobo.253.1">simply returned.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.254.1">The server generates a response and sends it back to the user</span></strong><span class="koboSpan" id="kobo.255.1">: After processing the request, the server generates an HTTP response. </span><span class="koboSpan" id="kobo.255.2">The response contains an appropriate status code indicating the outcome of the request. </span><span class="koboSpan" id="kobo.255.3">For example, a request that is successful bears a status code in the response header of 200. </span><span class="koboSpan" id="kobo.255.4">If you request a resource on the server that isn’t there, you’ll get a 404 code signaling the resource was not found. </span><span class="koboSpan" id="kobo.255.5">The response header also includes additional fields providing more information and a response body that contains the requested data or any </span><span class="No-Break"><span class="koboSpan" id="kobo.256.1">relevant information.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.257.1">The browser receives the response data</span></strong><span class="koboSpan" id="kobo.258.1">: The client receives the HTTP response from the server and processes the information contained within it. </span><span class="koboSpan" id="kobo.258.2">This could involve rendering HTML content, processing data, or performing other actions based on </span><span class="No-Break"><span class="koboSpan" id="kobo.259.1">the response.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.260.1">Request-response cycle is complete</span></strong><span class="koboSpan" id="kobo.261.1">: With the response received, the request-response cycle is complete. </span><span class="koboSpan" id="kobo.261.2">The client may choose to send additional requests to the server to perform further interactions, or the process </span><span class="No-Break"><span class="koboSpan" id="kobo.262.1">may end.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.263.1">This request-response mechanism forms the basis of how information is exchanged between clients and servers over HTTP. </span><span class="koboSpan" id="kobo.263.2">It allows clients to request resources or perform actions on the server, and the server responds with the corresponding results or necessary information. </span><span class="koboSpan" id="kobo.263.3">This cycle enables the dynamic and interactive nature of web applications </span><span class="No-Break"><span class="koboSpan" id="kobo.264.1">and services.</span></span></p>
<p><span class="koboSpan" id="kobo.265.1">One thing to remember is that HTTP is stateless. </span><span class="koboSpan" id="kobo.265.2">This means that every request-response cycle is discrete. </span><span class="koboSpan" id="kobo.265.3">There is no native way in HTTP to share or retain data </span><span class="No-Break"><span class="koboSpan" id="kobo.266.1">between requests.</span></span></p>
<h1 id="_idParaDest-205"><a id="_idTextAnchor209"/><span class="koboSpan" id="kobo.267.1">What is Flask?</span></h1>
<p><span class="koboSpan" id="kobo.268.1">Flask is an unopinionated framework for </span><a id="_idIndexMarker694"/><span class="koboSpan" id="kobo.269.1">working with the request-response mechanism found in HTTP. </span><span class="koboSpan" id="kobo.269.2">It does one thing and only one thing: it helps you receive requests into a simple Python object structure, then craft responses using </span><span class="No-Break"><span class="koboSpan" id="kobo.270.1">Python code.</span></span></p>
<p><span class="koboSpan" id="kobo.271.1">Let’s go back to the word </span><em class="italic"><span class="koboSpan" id="kobo.272.1">unopinionated</span></em><span class="koboSpan" id="kobo.273.1">. </span><span class="koboSpan" id="kobo.273.2">By this, I mean Flask by design only handles the request-response cycle. </span><span class="koboSpan" id="kobo.273.3">I realize I said that already, but it bears repeating. </span><span class="koboSpan" id="kobo.273.4">When you compare Flask to its virtual antithesis, which is Django, the difference </span><span class="No-Break"><span class="koboSpan" id="kobo.274.1">is stark.</span></span></p>
<p><span class="koboSpan" id="kobo.275.1">Django is extremely opinionated about how you create your web application. </span><span class="koboSpan" id="kobo.275.2">Django dictates the file structure, the application patterns, and the database to be used. </span><span class="koboSpan" id="kobo.275.3">It features its own object relational mapper, its own request response mechanism, and its own set of coding conventions. </span><span class="koboSpan" id="kobo.275.4">In short, Django will dictate your stack and most of the architectural details for </span><span class="No-Break"><span class="koboSpan" id="kobo.276.1">your project.</span></span></p>
<p><span class="koboSpan" id="kobo.277.1">Flask proffers some suggestions, but they are not set in stone, and you don’t have to use them if you don’t want to. </span><span class="koboSpan" id="kobo.277.2">A few years ago, I re-wrote my company’s flagship software product, Visual Storage</span><a id="_idIndexMarker695"/><span class="koboSpan" id="kobo.278.1"> Intelligence (see </span><a href="https://www.visualstorageintelligence.com"><span class="koboSpan" id="kobo.279.1">https://www.visualstorageintelligence.com</span></a><span class="koboSpan" id="kobo.280.1">) as a Flask application strictly because it is unopinionated. </span><span class="koboSpan" id="kobo.280.2">I consider myself an expert at selecting the best stack given my knowledge, experience, and understanding of my company’s </span><span class="No-Break"><span class="koboSpan" id="kobo.281.1">business requirements.</span></span></p>
<p><span class="koboSpan" id="kobo.282.1">For example, I pretty much never use an ORM. </span><span class="koboSpan" id="kobo.282.2">I have deep expertise in SQL and relational database systems. </span><span class="koboSpan" id="kobo.282.3">I can write and tune queries, stored procedures, and views to build a fast, responsive web application in a variety of commercial and open source databases. </span><span class="koboSpan" id="kobo.282.4">An ORM is designed to take all that out of your hands and give you a layer of abstraction above the database so a developer need only deal </span><span class="No-Break"><span class="koboSpan" id="kobo.283.1">with objects.</span></span></p>
<p><span class="koboSpan" id="kobo.284.1">An ORM is effectively a black box. </span><span class="koboSpan" id="kobo.284.2">Most developers don’t know how it works or how to improve the performance of the queries the ORM generates. </span><span class="koboSpan" id="kobo.284.3">To me, it’s just overhead. </span><span class="koboSpan" id="kobo.284.4">Personally, I would rather build and tweak those guts myself. </span><span class="koboSpan" id="kobo.284.5">Incidentally, if any of these database-related terms are mystifying to you, stay tuned. </span><span class="koboSpan" id="kobo.284.6">I’ll talk a lot more about databases in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.285.1">Chapter 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.286.1">, Understanding Database Management </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.287.1">with PyCharm</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.288.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.289.1">The point is, Flask doesn’t care how I interact with my database. </span><span class="koboSpan" id="kobo.289.2">It doesn’t care about how I structure my application, and it doesn’t care what my stack looks like. </span><span class="koboSpan" id="kobo.289.3">It only does two things, and one of them </span><span class="No-Break"><span class="koboSpan" id="kobo.290.1">is optional.</span></span></p>
<h2 id="_idParaDest-206"><a id="_idTextAnchor210"/><span class="koboSpan" id="kobo.291.1">Request-response handling and routing with Werkzeug</span></h2>
<p><span class="koboSpan" id="kobo.292.1">The first thing Flask does for us is to</span><a id="_idIndexMarker696"/><span class="koboSpan" id="kobo.293.1"> make dealing with the request-response mechanism in HTTP very easy. </span><span class="koboSpan" id="kobo.293.2">Strictly speaking, an inbound</span><a id="_idIndexMarker697"/><span class="koboSpan" id="kobo.294.1"> request is binary in nature. </span><span class="koboSpan" id="kobo.294.2">As developers, we would really rather deal with text-like object abstractions of binary structures. </span><span class="koboSpan" id="kobo.294.3">Dealing with binary anything directly is soooo 1939. </span><span class="koboSpan" id="kobo.294.4">Thankfully, </span><a id="_idIndexMarker698"/><span class="koboSpan" id="kobo.295.1">there is a Python library that handles this </span><span class="No-Break"><span class="koboSpan" id="kobo.296.1">called Werkzeug.</span></span></p>
<p><span class="koboSpan" id="kobo.297.1">The library’s name, “Werkzeug," is derived from the German language, where it translates to “tool” or “instrument.” </span><span class="koboSpan" id="kobo.297.2">The Flask framework, including its underlying utility library, Werkzeug, was originally developed by Armin Ronacher, a German </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">software developer.</span></span></p>
<p><span class="koboSpan" id="kobo.299.1">The name “Werkzeug” was chosen to reflect the nature of the library as a versatile and powerful toolset for building web applications. </span><span class="koboSpan" id="kobo.299.2">Just as a craftsperson relies on a set of tools to create and shape their work, developers can leverage Werkzeug to handle various aspects of web development, such as routing, request handling, and HTTP utilities. </span><span class="koboSpan" id="kobo.299.3">Flask builds on top of Werkzeug; it adds additional abstractions and features to provide a lightweight and user-friendly </span><span class="No-Break"><span class="koboSpan" id="kobo.300.1">web framework.</span></span></p>
<p><span class="koboSpan" id="kobo.301.1">Flask uses Werkzeug’s functionalities to handle the low-level details of HTTP requests and responses, allowing developers to focus on building web applications quickly and efficiently. </span><span class="koboSpan" id="kobo.301.2">The effect is the ability to create web applications as simple as you would create any other Python application: you create functions to handle an incoming HTTP request, which returns a properly formatted HTTP response. </span><span class="koboSpan" id="kobo.301.3">If you can write a function in Python, you can create a </span><span class="No-Break"><span class="koboSpan" id="kobo.302.1">web application.</span></span></p>
<p><span class="koboSpan" id="kobo.303.1">The implementation in Flask looks </span><span class="No-Break"><span class="koboSpan" id="kobo.304.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.305.1">
@app.route('/hello')
def hello_world():
  return 'Hello, World!'</span></pre> <p><span class="koboSpan" id="kobo.306.1">As you can see, this is a simple Python function that takes no arguments and returns a string. </span><span class="koboSpan" id="kobo.306.2">The only thing odd about it is the decoration above the function definition. </span><span class="koboSpan" id="kobo.306.3">We’ll learn a lot more about this later. </span><span class="koboSpan" id="kobo.306.4">For now, understand that this decoration matches a route on your application’s URL. </span><span class="koboSpan" id="kobo.306.5">You are used to typing in a URL with the usual syntax of </span><a href="https://www.maddevskilz.com/"><span class="koboSpan" id="kobo.307.1">https://www.maddevskilz.com/</span></a><span class="koboSpan" id="kobo.308.1">, which would take you to the root document of the website at that address. </span><span class="koboSpan" id="kobo.308.2">In the preceding code block, our function would answer any web request made to </span><a href="https://www.maddevskilz.com/hello"><span class="koboSpan" id="kobo.309.1">https://www.maddevskilz.com/hello</span></a><span class="koboSpan" id="kobo.310.1"> with the string </span><strong class="source-inline"><span class="koboSpan" id="kobo.311.1">'Hello, World!'</span></strong><span class="koboSpan" id="kobo.312.1">. </span><span class="koboSpan" id="kobo.312.2">Naturally, you’ll learn to do more than deal with a simple request like this, but my point remains: if you can create a function in Python, you can write a </span><span class="No-Break"><span class="koboSpan" id="kobo.313.1">web application!</span></span></p>
<p><span class="koboSpan" id="kobo.314.1">Using this feature of Flask is </span><a id="_idIndexMarker699"/><span class="koboSpan" id="kobo.315.1">non-negotiable. </span><span class="koboSpan" id="kobo.315.2">If you don’t want to use this abstraction of Werkzeug, then you don’t want to use Flask. </span><span class="koboSpan" id="kobo.315.3">Flask is, again, unopinionated, meaning this is really the only thing it “cares” about. </span><span class="koboSpan" id="kobo.315.4">We’ll see a contrast in </span><a href="B19644_12.xhtml#_idTextAnchor298"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.316.1">Chapter 12</span></em></span></a><em class="italic"><span class="koboSpan" id="kobo.317.1">, Building a Web Application in Django</span></em><span class="koboSpan" id="kobo.318.1">. </span><span class="koboSpan" id="kobo.318.2">Django is </span><a id="_idIndexMarker700"/><span class="koboSpan" id="kobo.319.1">highly opinionated. </span><span class="koboSpan" id="kobo.319.2">It wants you to use its pre-defined stack. </span><span class="koboSpan" id="kobo.319.3">Flask doesn’t care. </span><span class="koboSpan" id="kobo.319.4">It does, however, make one strong suggestion that you can safely ignore if </span><span class="No-Break"><span class="koboSpan" id="kobo.320.1">you’d like.</span></span></p>
<h2 id="_idParaDest-207"><a id="_idTextAnchor211"/><span class="koboSpan" id="kobo.321.1">Templating with Jinja2</span></h2>
<p><span class="koboSpan" id="kobo.322.1">Flask does come with a default suggestion regarding a templating library called Jinja2. </span><span class="koboSpan" id="kobo.322.2">When you</span><a id="_idIndexMarker701"/><span class="koboSpan" id="kobo.323.1"> install Flask, you get Jinja2 as a dependency. </span><span class="koboSpan" id="kobo.323.2">Templating systems </span><a id="_idIndexMarker702"/><span class="koboSpan" id="kobo.324.1">are designed to allow you to inject content into a markup document. </span><span class="koboSpan" id="kobo.324.2">Here is an example of a Jinja2 script that generates some items in an unordered list on an </span><span class="No-Break"><span class="koboSpan" id="kobo.325.1">HTML page:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.326.1">
from jinja2 import Template
# Define the template
template_str = '''
&lt;ul&gt;
{% for item in items %}
 &lt;li&gt;{{ item }}&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
'''</span></pre> <p><span class="koboSpan" id="kobo.327.1">The template is just a string that contains some special characters indicating where Python-like code is to be executed. </span><span class="koboSpan" id="kobo.327.2">This is how all templating languages work, from classic ASP to JSP to PHP. </span><span class="koboSpan" id="kobo.327.3">The Flask process gets the request from the web server. </span><span class="koboSpan" id="kobo.327.4">It parses the request, and here we’re rendering the response with our template. </span><span class="koboSpan" id="kobo.327.5">The template itself is a markup fragment. </span><span class="koboSpan" id="kobo.327.6">A variable called </span><strong class="source-inline"><span class="koboSpan" id="kobo.328.1">template_str</span></strong><span class="koboSpan" id="kobo.329.1"> is created and set to an empty string. </span><span class="koboSpan" id="kobo.329.2">Remember, this isn’t Python code, it’s Python-like code because it exists within the context of markup. </span><span class="koboSpan" id="kobo.329.3">The single quotes are escaped by single quotes, meaning </span><strong class="source-inline"><span class="koboSpan" id="kobo.330.1">``</span></strong><span class="koboSpan" id="kobo.331.1"> is interpreted as a single quote in </span><span class="No-Break"><span class="koboSpan" id="kobo.332.1">the code.</span></span></p>
<p><span class="koboSpan" id="kobo.333.1">As you can see, we have a </span><strong class="source-inline"><span class="koboSpan" id="kobo.334.1">for</span></strong><span class="koboSpan" id="kobo.335.1"> loop iterating over some list called </span><strong class="source-inline"><span class="koboSpan" id="kobo.336.1">items</span></strong><span class="koboSpan" id="kobo.337.1">, which will be passed into the template as data. </span><span class="koboSpan" id="kobo.337.2">The code in the template is delineated with </span><strong class="source-inline"><span class="koboSpan" id="kobo.338.1">{%</span></strong><span class="koboSpan" id="kobo.339.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.340.1">%}</span></strong><span class="koboSpan" id="kobo.341.1">. </span><span class="koboSpan" id="kobo.341.2">Each </span><strong class="source-inline"><span class="koboSpan" id="kobo.342.1">&lt;li&gt;</span></strong><span class="koboSpan" id="kobo.343.1"> has an expression bound in double curly braces. </span><span class="koboSpan" id="kobo.343.2">In this case, the expression is just the iterating </span><a id="_idIndexMarker703"/><span class="koboSpan" id="kobo.344.1">variable item defined with </span><span class="No-Break"><span class="koboSpan" id="kobo.345.1">the loop.</span></span></p>
<p><span class="koboSpan" id="kobo.346.1">In my example, the template string is defined in the code, but in real life, the template is usually in a file since that is much easier to</span><a id="_idIndexMarker704"/><span class="koboSpan" id="kobo.347.1"> maintain. </span><span class="koboSpan" id="kobo.347.2">Next, we create the </span><strong class="source-inline"><span class="koboSpan" id="kobo.348.1">template</span></strong><span class="koboSpan" id="kobo.349.1"> object and pass the </span><strong class="source-inline"><span class="koboSpan" id="kobo.350.1">template</span></strong><span class="koboSpan" id="kobo.351.1"> string into the </span><span class="No-Break"><span class="koboSpan" id="kobo.352.1">template constructor:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.353.1">
# Create the Jinja2 template object
template = Template(template_str)</span></pre> <p><span class="koboSpan" id="kobo.354.1">Now, we’re back to being in plain Python code. </span><span class="koboSpan" id="kobo.354.2">We’ll make a list called </span><strong class="source-inline"><span class="koboSpan" id="kobo.355.1">items</span></strong><span class="koboSpan" id="kobo.356.1"> and </span><span class="No-Break"><span class="koboSpan" id="kobo.357.1">populate it:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.358.1">
# Generate the list of items
items = ['Item 1', 'Item 2', 'Item 3', 'Item 4', 'Item 5', 'Item 6', 'Item 7', 'Item 8', 'Item 9', 'Item 10']</span></pre> <p><span class="koboSpan" id="kobo.359.1">Now, we render </span><strong class="source-inline"><span class="koboSpan" id="kobo.360.1">template</span></strong><span class="koboSpan" id="kobo.361.1">, which produces a new string set to a variable </span><span class="No-Break"><span class="koboSpan" id="kobo.362.1">called </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.363.1">output</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.364.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.365.1">
# Render the template with the items
output = template.render(items=items)</span></pre> <p><span class="koboSpan" id="kobo.366.1">Here we are printing the output, but in the context of a Flask application, the output would be returned as </span><span class="No-Break"><span class="koboSpan" id="kobo.367.1">the response:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.368.1">
# Print the rendered output
print(output)</span></pre> <p><span class="koboSpan" id="kobo.369.1">Jijna2 has a robust set of language features common to most good templating systems. </span><span class="koboSpan" id="kobo.369.2">Remember though that Flask bills itself as </span><em class="italic"><span class="koboSpan" id="kobo.370.1">unopinionated</span></em><span class="koboSpan" id="kobo.371.1">. </span><span class="koboSpan" id="kobo.371.2">You don’t have to use Jinja2. </span><span class="koboSpan" id="kobo.371.3">There are other templating libraries out there, or you can forgo the use of a template system entirely. </span><span class="koboSpan" id="kobo.371.4">In my company’s product, </span><em class="italic"><span class="koboSpan" id="kobo.372.1">Visual Storage Intelligence</span></em><span class="koboSpan" id="kobo.373.1">, I used Jinja2 for version 4 of the product. </span><span class="koboSpan" id="kobo.373.2">At the time, I didn’t know Python very well and was used to Microsoft’s MVC template for C# web </span><a id="_idIndexMarker705"/><span class="koboSpan" id="kobo.374.1">applications. </span><span class="koboSpan" id="kobo.374.2">I limited my learning curve to meet my deadline. </span><span class="koboSpan" id="kobo.374.3">Jinja2 is not difficult to learn at all. </span><span class="koboSpan" id="kobo.374.4">It is mostly HTML with some extra syntax. </span><span class="koboSpan" id="kobo.374.5">In version 5 of the product, I went back and replaced the UI layer of the application with a React </span><a id="_idIndexMarker706"/><span class="koboSpan" id="kobo.375.1">frontend. </span><span class="koboSpan" id="kobo.375.2">This didn’t require any changes to the Flask application beyond deleting the templates that I no </span><span class="No-Break"><span class="koboSpan" id="kobo.376.1">longer used.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.377.1">Reminder – this isn’t a book on Flask</span></p>
<p class="callout"><span class="koboSpan" id="kobo.378.1">I’ve spent some time going over the high-level basics of Flask in case you are encountering this as a web development novice. </span><span class="koboSpan" id="kobo.378.2">While it may appear that I’m about to teach you Flask, I only intend to cover the features of Flask development as they relate to PyCharm. </span><span class="koboSpan" id="kobo.378.3">While we will be building a project, I won’t be doing any really deep dives on how and why the code is what </span><span class="No-Break"><span class="koboSpan" id="kobo.379.1">it is.</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.380.1">As such, if you are indeed a novice and you are intrigued by the intentionally tacit coverage of Flask I’m providing here and you’d like a proper tutorial, I will include more in-depth resources in the </span><em class="italic"><span class="koboSpan" id="kobo.381.1">Further reading</span></em><span class="koboSpan" id="kobo.382.1"> section at the end of </span><span class="No-Break"><span class="koboSpan" id="kobo.383.1">this chapter.</span></span></p>
<h1 id="_idParaDest-208"><a id="_idTextAnchor212"/><span class="koboSpan" id="kobo.384.1">A note on naming files and folders</span></h1>
<p><span class="koboSpan" id="kobo.385.1">Before we get further into</span><a id="_idIndexMarker707"/><span class="koboSpan" id="kobo.386.1"> creating the next project, I want to give you some advice based on a principle I always point out to my students. </span><strong class="bold"><span class="koboSpan" id="kobo.387.1">The internet abhors spaces</span></strong><span class="koboSpan" id="kobo.388.1">. </span><span class="koboSpan" id="kobo.388.2">Spaces are not allowed in URLs as-is because they are reserved characters. </span><span class="koboSpan" id="kobo.388.3">When you include a space in a URL, it needs to be URL-encoded as </span><strong class="source-inline"><span class="koboSpan" id="kobo.389.1">%20</span></strong><span class="koboSpan" id="kobo.390.1"> to be considered valid. </span><span class="koboSpan" id="kobo.390.2">Web servers automatically handle this encoding, but manually encoding spaces can lead to readability issues in URLs, and it can cause issues when trying to run your projects on your </span><span class="No-Break"><span class="koboSpan" id="kobo.391.1">local computer.</span></span></p>
<p><span class="koboSpan" id="kobo.392.1">In a web project, most of your </span><a id="_idIndexMarker708"/><span class="koboSpan" id="kobo.393.1">project paths will become URLs at some point. </span><span class="koboSpan" id="kobo.393.2">This can happen even when your project isn’t even intended for the web. </span><span class="koboSpan" id="kobo.393.3">To add to the problem, different operating systems treat characters differently in their filesystems. </span><span class="koboSpan" id="kobo.393.4">Windows filenames are case insensitive. </span><span class="koboSpan" id="kobo.393.5">If you name your file or folder </span><strong class="source-inline"><span class="koboSpan" id="kobo.394.1">MyProject</span></strong><span class="koboSpan" id="kobo.395.1">, and then try to create a folder called </span><strong class="source-inline"><span class="koboSpan" id="kobo.396.1">myproject</span></strong><span class="koboSpan" id="kobo.397.1">, you’ll get a collision since the folder already exists, despite the difference in upper and lowercase letters in the name. </span><span class="koboSpan" id="kobo.397.2">On Linux and macOS, file and folder names are case sensitive. </span><span class="koboSpan" id="kobo.397.3">It is totally fine to have </span><strong class="source-inline"><span class="koboSpan" id="kobo.398.1">MyProject</span></strong><span class="koboSpan" id="kobo.399.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.400.1">myproject</span></strong><span class="koboSpan" id="kobo.401.1"> together in the </span><span class="No-Break"><span class="koboSpan" id="kobo.402.1">same folder.</span></span></p>
<p><span class="koboSpan" id="kobo.403.1">My suggestion in all of this is to pick a standard you like and use it. </span><span class="koboSpan" id="kobo.403.2">For Python projects, the most common convention is to </span><a id="_idIndexMarker709"/><span class="koboSpan" id="kobo.404.1">name your files with </span><strong class="bold"><span class="koboSpan" id="kobo.405.1">snake_case</span></strong><span class="koboSpan" id="kobo.406.1">, so named for its use in Python. </span><span class="koboSpan" id="kobo.406.2">Snake case involves using all lowercase letters and substituting an underscore character wherever you would normally find a space. </span><span class="koboSpan" id="kobo.406.3">You would never create a project in a folder called </span><strong class="source-inline"><span class="koboSpan" id="kobo.407.1">MyProject</span></strong><span class="koboSpan" id="kobo.408.1">. </span><span class="koboSpan" id="kobo.408.2">Instead, you would call </span><span class="No-Break"><span class="koboSpan" id="kobo.409.1">it </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.410.1">my_project</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.411.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.412.1">With that said, most of my projects in </span><a id="_idIndexMarker710"/><span class="koboSpan" id="kobo.413.1">this book are named with the PyCharm defaults, which are often rendered in camel or Pascal case. </span><span class="koboSpan" id="kobo.413.2">In these case standards, typically employed by Java and C# developers, spaces are omitted and the boundary between words is emphasized using capital letters. </span><strong class="source-inline"><span class="koboSpan" id="kobo.414.1">myProject</span></strong><span class="koboSpan" id="kobo.415.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.416.1">MyProject</span></strong><span class="koboSpan" id="kobo.417.1"> would be an example of camel and Pascal case respectively. </span><span class="koboSpan" id="kobo.417.2">I suspect the use of camel case in the project name defaults probably comes from the fact that PyCharm’s ancestry is a Java IDE. </span><span class="koboSpan" id="kobo.417.3">Other strategies exist for eliminating spaces in code files. </span><span class="koboSpan" id="kobo.417.4">Kebab case is common in JavaScript development and uses dashes</span><a id="_idIndexMarker711"/><span class="koboSpan" id="kobo.418.1"> instead of underscores. </span><strong class="source-inline"><span class="koboSpan" id="kobo.419.1">MyProject</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.420.1">becomes </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.421.1">my-project</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.422.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.423.1">I heartily recommend breaking any habit of using spaces in any of your folder or file names in your coding practice. </span><span class="koboSpan" id="kobo.423.2">This includes any upstream folders such as your operating system’s </span><span class="No-Break"><span class="koboSpan" id="kobo.424.1">home folder.</span></span></p>
<h1 id="_idParaDest-209"><a id="_idTextAnchor213"/><span class="koboSpan" id="kobo.425.1">Creating a Flask application in PyCharm Professional</span></h1>
<p><span class="koboSpan" id="kobo.426.1">The tooling for Flask is a feature</span><a id="_idIndexMarker712"/><span class="koboSpan" id="kobo.427.1"> found only in the Professional </span><a id="_idIndexMarker713"/><span class="koboSpan" id="kobo.428.1">edition of PyCharm. </span><span class="koboSpan" id="kobo.428.2">Naturally, you can make a Flask app in the free version of PyCharm, but you’ll be on your own in terms of creating the files and setting up run profiles, special debugging, and </span><span class="No-Break"><span class="koboSpan" id="kobo.429.1">so on.</span></span></p>
<p><span class="koboSpan" id="kobo.430.1">To create a Flask App in PyCharm, just select </span><strong class="bold"><span class="koboSpan" id="kobo.431.1">File</span></strong><span class="koboSpan" id="kobo.432.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.433.1">New Project</span></strong><span class="koboSpan" id="kobo.434.1"> and select the </span><strong class="bold"><span class="koboSpan" id="kobo.435.1">Flask</span></strong><span class="koboSpan" id="kobo.436.1"> template, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.437.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.438.1">.2</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.439.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer260">
<span class="koboSpan" id="kobo.440.1"><img alt="Figure 8.2: To create a new Flask project in PyCharm Professional, choose the template from the New Project dialog" src="image/B19644_08_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.441.1">Figure 8.2: To create a new Flask project in PyCharm Professional, choose the template from the New Project dialog</span></p>
<p><span class="koboSpan" id="kobo.442.1">I’ve numbered the</span><a id="_idIndexMarker714"/><span class="koboSpan" id="kobo.443.1"> most important </span><a id="_idIndexMarker715"/><span class="koboSpan" id="kobo.444.1">parts in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.445.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.446.1">.2</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.447.1">:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.448.1">In the </span><strong class="bold"><span class="koboSpan" id="kobo.449.1">New Project</span></strong><span class="koboSpan" id="kobo.450.1"> dialog of PyCharm Professional, you’ll find a template for </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.451.1">Flask</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.452.1"> projects.</span></span></li>
<li><span class="koboSpan" id="kobo.453.1">This part is no different than any project we’ve done so far. </span><span class="koboSpan" id="kobo.453.2">Fill in the location for </span><span class="No-Break"><span class="koboSpan" id="kobo.454.1">the project.</span></span></li>
<li><span class="koboSpan" id="kobo.455.1">Create your virtual environment. </span><span class="koboSpan" id="kobo.455.2">Once everything is filled in, PyCharm creates and activates the virtual environment and installs Flask and </span><span class="No-Break"><span class="koboSpan" id="kobo.456.1">its dependencies.</span></span></li>
<li><span class="koboSpan" id="kobo.457.1">This section is unique to Flask projects. </span><span class="koboSpan" id="kobo.457.2">I mentioned that Flask encourages the use of the Jinja2 templating engine. </span><span class="koboSpan" id="kobo.457.3">You can choose to leave it out and PyCharm will take care of that for you. </span><span class="koboSpan" id="kobo.457.4">There is also a setting for the folder you want to use for your Jinja2 templates. </span><span class="koboSpan" id="kobo.457.5">We’re </span><a id="_idIndexMarker716"/><span class="koboSpan" id="kobo.458.1">going to keep the defaults and I recommend if you are going to</span><a id="_idIndexMarker717"/><span class="koboSpan" id="kobo.459.1"> use Jinja2 templates that you leave the settings as they are because that is where most developers will </span><span class="No-Break"><span class="koboSpan" id="kobo.460.1">expect them.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.461.1">Once you have everything filled in, click the </span><strong class="bold"><span class="koboSpan" id="kobo.462.1">Create</span></strong><span class="koboSpan" id="kobo.463.1"> button at the bottom of the dialog and PyCharm will set up your project for you, including the creation of some starter code, as seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.464.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.465.1">.3</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.466.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer261">
<span class="koboSpan" id="kobo.467.1"><img alt="Figure 8.3: PyCharm generates your Flask project automatically" src="image/B19644_08_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.468.1">Figure 8.3: PyCharm generates your Flask project automatically</span></p>
<p><span class="koboSpan" id="kobo.469.1">At position </span><strong class="bold"><span class="koboSpan" id="kobo.470.1">(1)</span></strong><span class="koboSpan" id="kobo.471.1"> we see the code PyCharm generated. </span><span class="koboSpan" id="kobo.471.2">It is basically the </span><strong class="source-inline"><span class="koboSpan" id="kobo.472.1">Hello World</span></strong><span class="koboSpan" id="kobo.473.1"> idiom from earlier, except this one is responding to the root route of your web application. </span><span class="koboSpan" id="kobo.473.2">At the top, we import Flask, then we instantiate Flask as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.474.1">app</span></strong><span class="koboSpan" id="kobo.475.1"> variable. </span><span class="koboSpan" id="kobo.475.2">Now that you know that, the decoration for the route on </span><em class="italic"><span class="koboSpan" id="kobo.476.1">line 6</span></em><span class="koboSpan" id="kobo.477.1"> makes more sense; </span><strong class="source-inline"><span class="koboSpan" id="kobo.478.1">app.route</span></strong><span class="koboSpan" id="kobo.479.1"> is simply coming from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.480.1">app</span></strong><span class="koboSpan" id="kobo.481.1"> instance </span><span class="No-Break"><span class="koboSpan" id="kobo.482.1">of Flask.</span></span></p>
<p><span class="koboSpan" id="kobo.483.1">All this code is </span><a id="_idIndexMarker718"/><span class="koboSpan" id="kobo.484.1">contained in </span><strong class="source-inline"><span class="koboSpan" id="kobo.485.1">app.py</span></strong><span class="koboSpan" id="kobo.486.1"> at position </span><strong class="bold"><span class="koboSpan" id="kobo.487.1">(2)</span></strong><span class="koboSpan" id="kobo.488.1"> of </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.489.1">Figure 8</span></em></span><em class="italic"><span class="koboSpan" id="kobo.490.1">.3</span></em><span class="koboSpan" id="kobo.491.1">. </span><span class="koboSpan" id="kobo.491.2">The name isn’t a requirement, and you can change it if </span><a id="_idIndexMarker719"/><span class="koboSpan" id="kobo.492.1">you’d like. </span><span class="koboSpan" id="kobo.492.2">You can also see, at position </span><strong class="bold"><span class="koboSpan" id="kobo.493.1">(3)</span></strong><span class="koboSpan" id="kobo.494.1">, that PyCharm has generated two folders for Jinja2 templates and static files such as your images, CSS, and </span><span class="No-Break"><span class="koboSpan" id="kobo.495.1">JavaScript files.</span></span></p>
<h1 id="_idParaDest-210"><a id="_idTextAnchor214"/><span class="koboSpan" id="kobo.496.1">Creating a dynamic web application</span></h1>
<p><span class="koboSpan" id="kobo.497.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.498.1">Hello World</span></strong><span class="koboSpan" id="kobo.499.1"> program generated by PyCharm is a good starting point for new applications. </span><span class="koboSpan" id="kobo.499.2">It provides you with some nice cognitive prompting in case it’s been a while since you created the Flask application from scratch. </span><span class="koboSpan" id="kobo.499.3">Naturally, we’ll be wanting to replace </span><strong class="source-inline"><span class="koboSpan" id="kobo.500.1">Hello World</span></strong><span class="koboSpan" id="kobo.501.1"> with something a tad </span><span class="No-Break"><span class="koboSpan" id="kobo.502.1">more useful.</span></span></p>
<p><span class="koboSpan" id="kobo.503.1">Let’s create a very simple application for cataloging new Python libraries! </span><span class="koboSpan" id="kobo.503.2">This kind of project is usually done with a database, but it doesn’t have to be. </span><span class="koboSpan" id="kobo.503.3">Our app is going to hold a list of Python libraries along with</span><a id="_idIndexMarker720"/><span class="koboSpan" id="kobo.504.1"> their description and a rating from 1-5 on how useful we think they are. </span><span class="koboSpan" id="kobo.504.2">To accomplish the database part, we’re going to simply use an in-memory array of lists. </span><span class="koboSpan" id="kobo.504.3">Using this approach prevents the need to do a deep dive on the database features of PyCharm, which isn’t coming until </span><a href="B19644_11.xhtml#_idTextAnchor266"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.505.1">Chapter 11</span></em></span></a><em class="italic"><span class="koboSpan" id="kobo.506.1">, Understanding Database Management with PyCharm</span></em><span class="koboSpan" id="kobo.507.1">. </span><span class="koboSpan" id="kobo.507.2">We’ll also exercise every excuse to cover some features we’ve covered earlier in a practical setting, such as using the HTML features from the </span><span class="No-Break"><span class="koboSpan" id="kobo.508.1">last chapter.</span></span></p>
<h2 id="_idParaDest-211"><a id="_idTextAnchor215"/><span class="koboSpan" id="kobo.509.1">Setting up the static parts</span></h2>
<p><span class="koboSpan" id="kobo.510.1">The easiest place to start when building a</span><a id="_idIndexMarker721"/><span class="koboSpan" id="kobo.511.1"> web application is to get the static parts working. </span><span class="koboSpan" id="kobo.511.2">I’m talking about the non-dynamic parts of the application such as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.512.1">index.html</span></strong><span class="koboSpan" id="kobo.513.1"> page with its basic structure, any CSS, images, and JavaScript we </span><span class="No-Break"><span class="koboSpan" id="kobo.514.1">might need.</span></span></p>
<p><span class="koboSpan" id="kobo.515.1">Start off by right-clicking in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.516.1">Templates</span></strong><span class="koboSpan" id="kobo.517.1"> folder and creating a new file called </span><strong class="source-inline"><span class="koboSpan" id="kobo.518.1">index.html</span></strong><span class="koboSpan" id="kobo.519.1">. </span><span class="koboSpan" id="kobo.519.2">This is going to be a Jinja2 template, so it belongs in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.520.1">Templates</span></strong><span class="koboSpan" id="kobo.521.1"> folder rather than the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.522.1">static</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.523.1"> folder.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer262">
<span class="koboSpan" id="kobo.524.1"><img alt="Figure 8.4: Right-click﻿ing the Templates folder and creat﻿ing a new HTML file" src="image/B19644_08_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.525.1">Figure 8.4: Right-clicking the Templates folder and creating a new HTML file</span></p>
<p><span class="koboSpan" id="kobo.526.1">Note that we created a plain HTML file. </span><span class="koboSpan" id="kobo.526.2">There is no special file type for a Jinja2 file. </span><span class="koboSpan" id="kobo.526.3">The file is created using the Emmet templating</span><a id="_idIndexMarker722"/><span class="koboSpan" id="kobo.527.1"> system we covered in </span><a href="B19644_07.xhtml#_idTextAnchor172"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.528.1">Chapter 7</span></em></span></a><em class="italic"><span class="koboSpan" id="kobo.529.1">, Web Development with JavaScript</span></em><span class="koboSpan" id="kobo.530.1">, </span><em class="italic"><span class="koboSpan" id="kobo.531.1">HTML, and CSS</span></em><span class="koboSpan" id="kobo.532.1">. </span><span class="koboSpan" id="kobo.532.2">As you hopefully</span><a id="_idIndexMarker723"/><span class="koboSpan" id="kobo.533.1"> remember, </span><strong class="bold"><span class="koboSpan" id="kobo.534.1">Emmet</span></strong><span class="koboSpan" id="kobo.535.1"> is a templating language for generating code, particularly HTML. </span><span class="koboSpan" id="kobo.535.2">It provides a design-time template that provides a “fill-in-the-blank” approach. </span><span class="koboSpan" id="kobo.535.3">When you added the HTML file, you found the code was generated but the IDE took you straight to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.536.1">title</span></strong><span class="koboSpan" id="kobo.537.1"> attribute in the HTML file, allowing you to fill in that blank spot in the HTML template. </span><span class="koboSpan" id="kobo.537.2">You can see mine in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.538.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.539.1">.5</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.540.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer263">
<span class="koboSpan" id="kobo.541.1"><img alt="Figure 8.5: The HTML creation template puts your cursor in the title tag so you can fill in that part of the page" src="image/B19644_08_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.542.1">Figure 8.5: The HTML creation template puts your cursor in the title tag so you can fill in that part of the page</span></p>
<p><span class="koboSpan" id="kobo.543.1">Next, let’s modify the contents</span><a id="_idIndexMarker724"/><span class="koboSpan" id="kobo.544.1"> of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.545.1">&lt;head&gt;</span></strong><span class="koboSpan" id="kobo.546.1"> tag </span><span class="No-Break"><span class="koboSpan" id="kobo.547.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.548.1">
&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3
  .0/dist/css/bootstrap.min.css" rel="stylesheet"
     integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
     crossorigin="anonymous"&gt;
  &lt;title&gt;Python Libraries R Us&lt;/title&gt;
&lt;/head&gt;</span></pre> <p><span class="koboSpan" id="kobo.549.1">This brings in the bootstrap CSS and</span><a id="_idIndexMarker725"/><span class="koboSpan" id="kobo.550.1"> JavaScript libraries from a </span><strong class="bold"><span class="koboSpan" id="kobo.551.1">content delivery network</span></strong><span class="koboSpan" id="kobo.552.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.553.1">CDN</span></strong><span class="koboSpan" id="kobo.554.1">). </span><span class="koboSpan" id="kobo.554.2">If you don’t want to type all that in, you can copy the code from the book’s repository code, or you can go to </span><a href="https://getbootstrap.com"><span class="koboSpan" id="kobo.555.1">https://getbootstrap.com</span></a><span class="koboSpan" id="kobo.556.1"> and find the latest in the </span><strong class="bold"><span class="koboSpan" id="kobo.557.1">Getting Started</span></strong><span class="koboSpan" id="kobo.558.1"> section of their site, which usually includes copyable links to </span><span class="No-Break"><span class="koboSpan" id="kobo.559.1">their CDN.</span></span></p>
<p><span class="koboSpan" id="kobo.560.1">We’re using the CDN so we don’t need to keep these common files in our project. </span><span class="koboSpan" id="kobo.560.2">Besides, CDNs usually serve</span><a id="_idIndexMarker726"/><span class="koboSpan" id="kobo.561.1"> these kinds of files faster than will your own web server once you move your amazing app </span><span class="No-Break"><span class="koboSpan" id="kobo.562.1">into production.</span></span></p>
<p><span class="koboSpan" id="kobo.563.1">Next, change the contents of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.564.1">&lt;body&gt;</span></strong><span class="koboSpan" id="kobo.565.1"> tag to </span><span class="No-Break"><span class="koboSpan" id="kobo.566.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.567.1">
&lt;body&gt;
  &lt;h1&gt;Python Libraries R Us&lt;/h1&gt;
  &lt;h2&gt;All the libraries that are fit to use!&lt;/h2&gt;
&lt;/body&gt;</span></pre> <p><span class="koboSpan" id="kobo.568.1">Next, we’re going to use the Emmet feature we learned about in </span><a href="B19644_07.xhtml#_idTextAnchor172"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.569.1">Chapter 7</span></em></span></a><em class="italic"><span class="koboSpan" id="kobo.570.1">, Web Development with JavaScript, HTML, and CSS,</span></em><span class="koboSpan" id="kobo.571.1"> to generate an HTML table header. </span><span class="koboSpan" id="kobo.571.2">Type this Emmet code into the editor on a new line just below the </span><strong class="source-inline"><span class="koboSpan" id="kobo.572.1">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.573.1">h2&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.574.1"> tag:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.575.1">
table&gt;thead&gt;tr&gt;th*4</span></pre> <p><span class="koboSpan" id="kobo.576.1">This abbreviation will generate a table, followed by a </span><strong class="source-inline"><span class="koboSpan" id="kobo.577.1">thead</span></strong><span class="koboSpan" id="kobo.578.1"> tag, with one table row (</span><strong class="source-inline"><span class="koboSpan" id="kobo.579.1">tr</span></strong><span class="koboSpan" id="kobo.580.1">) and four table head fields (</span><strong class="source-inline"><span class="koboSpan" id="kobo.581.1">th*4</span></strong><span class="koboSpan" id="kobo.582.1">). </span><span class="koboSpan" id="kobo.582.2">Press </span><em class="italic"><span class="koboSpan" id="kobo.583.1">Tab</span></em><span class="koboSpan" id="kobo.584.1"> to expand the abbreviation. </span><span class="koboSpan" id="kobo.584.2">PyCharm’s Emmet plugin will generate your code and take you straight to the contents of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.585.1">th</span></strong><span class="koboSpan" id="kobo.586.1"> tags, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.587.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.588.1">.6</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.589.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer264">
<span class="koboSpan" id="kobo.590.1"><img alt="Figure 8.6: Emmet expands the code into all the code you need for the table header" src="image/B19644_08_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.591.1">Figure 8.6: Emmet expands the code into all the code you need for the table header</span></p>
<p><span class="koboSpan" id="kobo.592.1">Once Emmet has expanded your </span><a id="_idIndexMarker727"/><span class="koboSpan" id="kobo.593.1">code, you’ll see the prompts inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.594.1">th</span></strong><span class="koboSpan" id="kobo.595.1"> tags allowing you to edit the content, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.596.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.597.1">.7</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.598.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer265">
<span class="koboSpan" id="kobo.599.1"><img alt="Figure 8.7: Emmet expands the shorthand in line 15 in Figure 8.6 to what we see here" src="image/B19644_08_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.600.1">Figure 8.7: Emmet expands the shorthand in line 15 in Figure 8.6 to what we see here</span></p>
<p><span class="koboSpan" id="kobo.601.1">Traditionally, you’d use </span><strong class="bold"><span class="koboSpan" id="kobo.602.1">Tab</span></strong><span class="koboSpan" id="kobo.603.1"> to move between the fields, but in PyCharm, the </span><em class="italic"><span class="koboSpan" id="kobo.604.1">Tab</span></em><span class="koboSpan" id="kobo.605.1"> key is bound to the action that expands Emmet, as we just saw. </span><span class="koboSpan" id="kobo.605.2">You can’t use </span><em class="italic"><span class="koboSpan" id="kobo.606.1">Tab</span></em><span class="koboSpan" id="kobo.607.1"> to navigate as you’d expect if you’re coming from a different Emmet-enabled editor. </span><span class="koboSpan" id="kobo.607.2">Instead, you’ll need to find out what the shortcut is on your system since this will depend on which keyboard shortcut layout you configured when you installed PyCharm. </span><span class="koboSpan" id="kobo.607.3">I chose the Windows layout, so for me, moving </span><a id="_idIndexMarker728"/><span class="koboSpan" id="kobo.608.1">between the fields is done using </span><em class="italic"><span class="koboSpan" id="kobo.609.1">Alt + Shift + ]</span></em><span class="koboSpan" id="kobo.610.1">.</span></p>
<p><span class="koboSpan" id="kobo.611.1">Inside the first </span><strong class="source-inline"><span class="koboSpan" id="kobo.612.1">th</span></strong><span class="koboSpan" id="kobo.613.1"> tag, type </span><strong class="source-inline"><span class="koboSpan" id="kobo.614.1">Library Name</span></strong><span class="koboSpan" id="kobo.615.1">. </span><span class="koboSpan" id="kobo.615.2">Then use </span><em class="italic"><span class="koboSpan" id="kobo.616.1">Alt + Shift + ]</span></em><span class="koboSpan" id="kobo.617.1"> to move to the next field and change it to </span><strong class="source-inline"><span class="koboSpan" id="kobo.618.1">Description</span></strong><span class="koboSpan" id="kobo.619.1">. </span><span class="koboSpan" id="kobo.619.2">The third field will be called </span><strong class="source-inline"><span class="koboSpan" id="kobo.620.1">Rating</span></strong><span class="koboSpan" id="kobo.621.1"> and the fourth is </span><span class="No-Break"><span class="koboSpan" id="kobo.622.1">titled </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.623.1">URL</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.624.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.625.1">If </span><em class="italic"><span class="koboSpan" id="kobo.626.1">Alt + Shift + ]</span></em><span class="koboSpan" id="kobo.627.1"> doesn’t do it for you, let’s find out what will. </span><span class="koboSpan" id="kobo.627.2">Go into PyCharm’s settings and find the </span><strong class="bold"><span class="koboSpan" id="kobo.628.1">Keymap</span></strong><span class="koboSpan" id="kobo.629.1"> settings as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.630.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.631.1">.8</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.632.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.633.1">I’ve typed </span><strong class="source-inline"><span class="koboSpan" id="kobo.634.1">Emmet</span></strong><span class="koboSpan" id="kobo.635.1"> into the search box and I can see that my </span><strong class="bold"><span class="koboSpan" id="kobo.636.1">Navigate &gt; Next / Previous Emmet Edit Point</span></strong><span class="koboSpan" id="kobo.637.1"> settings are </span><strong class="bold"><span class="koboSpan" id="kobo.638.1">Alt + Shift + ]</span></strong><span class="koboSpan" id="kobo.639.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.640.1">Alt + Shift + [,</span></strong><span class="koboSpan" id="kobo.641.1"> respectively. </span><span class="koboSpan" id="kobo.641.2">If yours are different, you’ll see what they are here, and as we’ve learned, you can change them to anything you’d like so long as the change doesn’t conflict with </span><span class="No-Break"><span class="koboSpan" id="kobo.642.1">something else.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer266">
<span class="koboSpan" id="kobo.643.1"><img alt="Figure 8.8: Your Emmet navigation settings are found and set here in Settings" src="image/B19644_08_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.644.1">Figure 8.8: Your Emmet navigation settings are found and set here in Settings</span></p>
<p><span class="koboSpan" id="kobo.645.1">At this stage, your HTML </span><strong class="source-inline"><span class="koboSpan" id="kobo.646.1">table</span></strong><a id="_idIndexMarker729"/><span class="koboSpan" id="kobo.647.1"> code should look </span><span class="No-Break"><span class="koboSpan" id="kobo.648.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.649.1">
&lt;table&gt;
    &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Library Name&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
      &lt;th&gt;Rating&lt;/th&gt;
      &lt;th&gt;URL&lt;/th&gt;
    &lt;/tr&gt;
    &lt;/thead&gt;
  &lt;/table&gt;</span></pre> <p><span class="koboSpan" id="kobo.650.1">Let’s add one more thing to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.651.1">table</span></strong><a id="_idIndexMarker730"/><span class="koboSpan" id="kobo.652.1"> code. </span><span class="koboSpan" id="kobo.652.2">Put this below the </span><strong class="source-inline"><span class="koboSpan" id="kobo.653.1">&lt;/thead&gt;</span></strong><span class="koboSpan" id="kobo.654.1"> closure but before the </span><strong class="source-inline"><span class="koboSpan" id="kobo.655.1">&lt;/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.656.1">table&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.657.1"> closure:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.658.1">
&lt;tbody&gt;
  &lt;tr&gt;
    &lt;td colspan="4"&gt;No libraries to display&lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;</span></pre> <p><span class="koboSpan" id="kobo.659.1">If your code got messy, use PyCharm’s reformat code feature to clean things up. </span><span class="koboSpan" id="kobo.659.2">This is usually </span><em class="italic"><span class="koboSpan" id="kobo.660.1">Ctrl + Alt + L</span></em><span class="koboSpan" id="kobo.661.1">, or </span><em class="italic"><span class="koboSpan" id="kobo.662.1">Cmd + Opt + L</span></em><span class="koboSpan" id="kobo.663.1"> on </span><span class="No-Break"><span class="koboSpan" id="kobo.664.1">a Mac.</span></span></p>
<p><span class="koboSpan" id="kobo.665.1">We have a basic web page laid out. </span><span class="koboSpan" id="kobo.665.2">Before we make it dynamic, let’s create a run configuration for the app so we can preview </span><span class="No-Break"><span class="koboSpan" id="kobo.666.1">our handiwork.</span></span></p>
<h2 id="_idParaDest-212"><a id="_idTextAnchor216"/><span class="koboSpan" id="kobo.667.1">Running the Flask app</span></h2>
<p><span class="koboSpan" id="kobo.668.1">When we created our project, PyCharm</span><a id="_idIndexMarker731"/><span class="koboSpan" id="kobo.669.1"> created a Flask run configuration for us. </span><span class="koboSpan" id="kobo.669.2">Let’s take a look at it so we can </span><a id="_idIndexMarker732"/><span class="koboSpan" id="kobo.670.1">understand how the app will be run by PyCharm. </span><span class="koboSpan" id="kobo.670.2">Click the </span><strong class="bold"><span class="koboSpan" id="kobo.671.1">Run configuration</span></strong><span class="koboSpan" id="kobo.672.1"> dropdown and click </span><strong class="bold"><span class="koboSpan" id="kobo.673.1">Edit Configurations…</span></strong><span class="koboSpan" id="kobo.674.1">, as seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.675.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.676.1">.9</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.677.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer267">
<span class="koboSpan" id="kobo.678.1"><img alt="Figure 8.9: Edit﻿ing the run configurations so we can see what they’re made of" src="image/B19644_08_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.679.1">Figure 8.9: Editing the run configurations so we can see what they’re made of</span></p>
<p><span class="koboSpan" id="kobo.680.1">The settings look like those</span><a id="_idIndexMarker733"/><span class="koboSpan" id="kobo.681.1"> shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.682.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.683.1">.10</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.684.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer268">
<span class="koboSpan" id="kobo.685.1"><img alt="Figure 8.10: Flask run configuration generated by PyCharm" src="image/B19644_08_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.686.1">Figure 8.10: Flask run configuration generated by PyCharm</span></p>
<p><span class="koboSpan" id="kobo.687.1">Most of these settings will be familiar </span><a id="_idIndexMarker734"/><span class="koboSpan" id="kobo.688.1">now, so only a few </span><span class="No-Break"><span class="koboSpan" id="kobo.689.1">are marked.</span></span></p>
<p><span class="koboSpan" id="kobo.690.1">There are a couple of ways to run a Flask app. </span><span class="koboSpan" id="kobo.690.2">The easiest is to just run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.691.1">app.py</span></strong><span class="koboSpan" id="kobo.692.1"> file, which is the </span><strong class="bold"><span class="koboSpan" id="kobo.693.1">Script path</span></strong><span class="koboSpan" id="kobo.694.1"> option at </span><strong class="bold"><span class="koboSpan" id="kobo.695.1">(1)</span></strong><span class="koboSpan" id="kobo.696.1">. </span><span class="koboSpan" id="kobo.696.2">Because PyCharm generated a </span><strong class="source-inline"><span class="koboSpan" id="kobo.697.1">dunder-main</span></strong><span class="koboSpan" id="kobo.698.1"> line that runs the app, this works just fine. </span><span class="koboSpan" id="kobo.698.2">Recall the code at the bottom </span><span class="No-Break"><span class="koboSpan" id="kobo.699.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.700.1">app.py</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.701.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.702.1">
if __name__ == '__main__':
  app.run()</span></pre> <p><span class="koboSpan" id="kobo.703.1">You can also run it using the module name, but let’s stick with what PyCharm generated </span><span class="No-Break"><span class="koboSpan" id="kobo.704.1">for now.</span></span></p>
<p><span class="koboSpan" id="kobo.705.1">At position </span><strong class="bold"><span class="koboSpan" id="kobo.706.1">(2)</span></strong><span class="koboSpan" id="kobo.707.1">, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.708.1">FLASK_DEBUG</span></strong><span class="koboSpan" id="kobo.709.1"> environment</span><a id="_idIndexMarker735"/><span class="koboSpan" id="kobo.710.1"> variable gets its own checkbox. </span><span class="koboSpan" id="kobo.710.2">When you check this box, it puts the dedicated Flask development server into debug mode, which yields several benefits. </span><span class="koboSpan" id="kobo.710.3">The greatest of these is that the app server will restart whenever you change the code. </span><span class="koboSpan" id="kobo.710.4">This saves you from having to remember to stop and restart the server every time you make a change. </span><span class="koboSpan" id="kobo.710.5">Generally speaking, you want this box checked. </span><span class="koboSpan" id="kobo.710.6">Above the check is a commonly used </span><strong class="source-inline"><span class="koboSpan" id="kobo.711.1">FLASK_ENV</span></strong><span class="koboSpan" id="kobo.712.1"> environment variable that is also passed to the running app. </span><span class="koboSpan" id="kobo.712.2">It defaults to </span><strong class="source-inline"><span class="koboSpan" id="kobo.713.1">development</span></strong><span class="koboSpan" id="kobo.714.1">. </span><span class="koboSpan" id="kobo.714.2">You can use this environment variable to turn on and off certain behaviors in your app, including setting log </span><span class="No-Break"><span class="koboSpan" id="kobo.715.1">detail levels.</span></span></p>
<p><span class="koboSpan" id="kobo.716.1">The two </span><strong class="source-inline"><span class="koboSpan" id="kobo.717.1">PYTHONPATH</span></strong><span class="koboSpan" id="kobo.718.1"> checkboxes at position </span><strong class="bold"><span class="koboSpan" id="kobo.719.1">(3)</span></strong><span class="koboSpan" id="kobo.720.1"> add your project folders to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.721.1">PYTHONPATH</span></strong><span class="koboSpan" id="kobo.722.1"> folder, which prevents you from getting an error stating Python can’t find your application. </span><span class="koboSpan" id="kobo.722.2">You want </span><span class="No-Break"><span class="koboSpan" id="kobo.723.1">these checked.</span></span></p>
<p><span class="koboSpan" id="kobo.724.1">Note that with all these checkboxes, PyCharm gives you the ability to set common environment variables that are passed into the running app. </span><span class="koboSpan" id="kobo.724.2">This is nice, because setting them at the OS level is extra work that we often forget, and changing environment variables often doesn’t work as well as it should depending on your operating system. </span><span class="koboSpan" id="kobo.724.3">When you use environment variables at the OS level, you generally need to either reboot or log out and log back in to make sure the new values are active. </span><span class="koboSpan" id="kobo.724.4">PyCharm injects variables directly into the running development server, which saves a lot of time </span><span class="No-Break"><span class="koboSpan" id="kobo.725.1">and frustration.</span></span></p>
<p><span class="koboSpan" id="kobo.726.1">Click </span><strong class="bold"><span class="koboSpan" id="kobo.727.1">OK</span></strong><span class="koboSpan" id="kobo.728.1"> to close the run </span><span class="No-Break"><span class="koboSpan" id="kobo.729.1">configuration dialog.</span></span></p>
<p><span class="koboSpan" id="kobo.730.1">Before we fire it up, we need to make a code change to </span><strong class="source-inline"><span class="koboSpan" id="kobo.731.1">app.py</span></strong><span class="koboSpan" id="kobo.732.1">. </span><span class="koboSpan" id="kobo.732.2">We need to alter our </span><strong class="source-inline"><span class="koboSpan" id="kobo.733.1">Hello World</span></strong><span class="koboSpan" id="kobo.734.1"> code to load and display our template. </span><span class="koboSpan" id="kobo.734.2">The altered code looks </span><span class="No-Break"><span class="koboSpan" id="kobo.735.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.736.1">
from flask import Flask</span><strong class="bold"><span class="koboSpan" id="kobo.737.1">, render_template</span></strong><span class="koboSpan" id="kobo.738.1">
app = Flask(__name__)
@app.route('/'</span><strong class="bold"><span class="koboSpan" id="kobo.739.1">, methods=["GET"]</span></strong><span class="koboSpan" id="kobo.740.1">)
def root():
  </span><strong class="bold"><span class="koboSpan" id="kobo.741.1">return render_template("index.html")</span></strong><span class="koboSpan" id="kobo.742.1">
if __name__ == '__main__':
  app.run()</span></pre> <p><span class="koboSpan" id="kobo.743.1">First, I’ve added an import for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.744.1">render_template</span></strong><span class="koboSpan" id="kobo.745.1"> method from Flask. </span><span class="koboSpan" id="kobo.745.2">We’ll use this to, you guessed it, render our Jinja2 </span><span class="No-Break"><span class="koboSpan" id="kobo.746.1">HTML template.</span></span></p>
<p><span class="koboSpan" id="kobo.747.1">Next, I’ve added some code to the route decorator. </span><span class="koboSpan" id="kobo.747.2">Previously, we had </span><strong class="source-inline"><span class="koboSpan" id="kobo.748.1">@app.route('/')</span></strong><span class="koboSpan" id="kobo.749.1">, which defines the </span><strong class="source-inline"><span class="koboSpan" id="kobo.750.1">root</span></strong><span class="koboSpan" id="kobo.751.1"> route for our site that will be handed by our </span><strong class="source-inline"><span class="koboSpan" id="kobo.752.1">root</span></strong><span class="koboSpan" id="kobo.753.1"> function. </span><span class="koboSpan" id="kobo.753.2">I’ve added a second argument, </span><strong class="source-inline"><span class="koboSpan" id="kobo.754.1">methods=["GET"]</span></strong><span class="koboSpan" id="kobo.755.1">. </span><span class="koboSpan" id="kobo.755.2">Flask allows you to lock a route to one or</span><a id="_idIndexMarker736"/><span class="koboSpan" id="kobo.756.1"> more of the HTTP request methods I described earlier in the chapter. </span><span class="koboSpan" id="kobo.756.2">Locking Flask application endpoints to a particular HTTP method, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.757.1">GET</span></strong><span class="koboSpan" id="kobo.758.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.759.1">POST</span></strong><span class="koboSpan" id="kobo.760.1">, is a fundamental practice in web development for several </span><span class="No-Break"><span class="koboSpan" id="kobo.761.1">important reasons:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.762.1">Security</span></strong><span class="koboSpan" id="kobo.763.1">: Different HTTP methods have different purposes and security implications. </span><span class="koboSpan" id="kobo.763.2">For example, GET requests are typically used for retrieving data, and they should not have any side effects on the server. </span><span class="koboSpan" id="kobo.763.3">In contrast, POST requests are used for submitting data to the server, and they can have side effects, such as creating, updating, or deleting resources. </span><span class="koboSpan" id="kobo.763.4">By restricting endpoints to specific HTTP methods, you</span><a id="_idIndexMarker737"/><span class="koboSpan" id="kobo.764.1"> can prevent unintended or malicious actions. </span><span class="koboSpan" id="kobo.764.2">This is known as “method-based </span><span class="No-Break"><span class="koboSpan" id="kobo.765.1">access control.”</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.766.1">Predictability</span></strong><span class="koboSpan" id="kobo.767.1">: Locking endpoints to specific HTTP methods makes your API or web application more predictable and self-documenting. </span><span class="koboSpan" id="kobo.767.2">Other developers (or even your future self) will have a clearer understanding of how to interact with your application. </span><span class="koboSpan" id="kobo.767.3">For example, if an endpoint is designed for GET requests, it’s clear that it’s meant for </span><span class="No-Break"><span class="koboSpan" id="kobo.768.1">data retrieval.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.769.1">Consistency</span></strong><span class="koboSpan" id="kobo.770.1">: Consistency in your API design can improve the user experience and reduce confusion. </span><span class="koboSpan" id="kobo.770.2">When users or clients know that a specific HTTP method is expected for an endpoint, they are less likely to make </span><span class="No-Break"><span class="koboSpan" id="kobo.771.1">incorrect requests.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.772.1">Preventing accidents</span></strong><span class="koboSpan" id="kobo.773.1">: Accidental misuse of an endpoint can lead to unintended consequences. </span><span class="koboSpan" id="kobo.773.2">By restricting the allowed HTTP methods, you reduce the chances of UI developers making mistakes, such as trying to delete data with a </span><span class="No-Break"><span class="koboSpan" id="kobo.774.1">GET request.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.775.1">Framework support</span></strong><span class="koboSpan" id="kobo.776.1">: Flask, along with many other web frameworks, provides built-in support for routing requests based on HTTP methods. </span><span class="koboSpan" id="kobo.776.2">This makes it easier to implement method-based access control, as you can define separate routes and handlers for each </span><span class="No-Break"><span class="koboSpan" id="kobo.777.1">HTTP method.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.778.1">If you look closely, the argument we’re passing is an array. </span><span class="koboSpan" id="kobo.778.2">You can pass one or more methods allowing one route to handle </span><a id="_idIndexMarker738"/><span class="koboSpan" id="kobo.779.1">one or several methods differently. </span><span class="koboSpan" id="kobo.779.2">Here, we’re locking the </span><strong class="source-inline"><span class="koboSpan" id="kobo.780.1">root</span></strong><span class="koboSpan" id="kobo.781.1"> route function to the HTTP GET method, which is what your browser issues when you visit </span><span class="No-Break"><span class="koboSpan" id="kobo.782.1">a site.</span></span></p>
<p><span class="koboSpan" id="kobo.783.1">Next, we’ve added Flask’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.784.1">render_template</span></strong><span class="koboSpan" id="kobo.785.1"> method to our import. </span><span class="koboSpan" id="kobo.785.2">I changed the name of the function from </span><strong class="source-inline"><span class="koboSpan" id="kobo.786.1">hello_world</span></strong><span class="koboSpan" id="kobo.787.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.788.1">root</span></strong><span class="koboSpan" id="kobo.789.1">, then I changed the return from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.790.1">'Hello World'</span></strong><span class="koboSpan" id="kobo.791.1"> string to the result of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.792.1">render_template</span></strong><span class="koboSpan" id="kobo.793.1"> function that takes the filename of a template. </span><span class="koboSpan" id="kobo.793.2">Flask knows to find </span><strong class="source-inline"><span class="koboSpan" id="kobo.794.1">index.html</span></strong><span class="koboSpan" id="kobo.795.1"> in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.796.1">Templates</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.797.1"> folder.</span></span></p>
<p><span class="koboSpan" id="kobo.798.1">Now we’re ready to try it out. </span><span class="koboSpan" id="kobo.798.2">Make sure your Flask app is selected in the run configuration dropdown and click the green </span><strong class="bold"><span class="koboSpan" id="kobo.799.1">Run</span></strong><span class="koboSpan" id="kobo.800.1"> button. </span><span class="koboSpan" id="kobo.800.2">The </span><strong class="bold"><span class="koboSpan" id="kobo.801.1">Run</span></strong><span class="koboSpan" id="kobo.802.1"> tab will appear at the bottom of the PyCharm screen. </span><span class="koboSpan" id="kobo.802.2">Mine appears as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.803.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.804.1">.11</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.805.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer269">
<span class="koboSpan" id="kobo.806.1"><img alt="Figure 8.11: The Run window for our Flask app" src="image/B19644_08_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.807.1">Figure 8.11: The Run window for our Flask app</span></p>
<p><span class="koboSpan" id="kobo.808.1">There are a couple of remarkable elements to point out. </span><span class="koboSpan" id="kobo.808.2">The first is the big red warning message. </span><span class="koboSpan" id="kobo.808.3">I know, it’s gray for you, but you’ll see it the first time you try this out. </span><span class="koboSpan" id="kobo.808.4">We’re running our app using Flask’s built-in development web server. </span><span class="koboSpan" id="kobo.808.5">Please don’t use this in production. </span><span class="koboSpan" id="kobo.808.6">Instead, you need to use a production-quality app server such as Green Unicorn. </span><span class="koboSpan" id="kobo.808.7">This falls outside the scope of developing with PyCharm, but it is such a huge mistake to deploy your app using the</span><a id="_idIndexMarker739"/><span class="koboSpan" id="kobo.809.1"> built-in server that I felt it needed to point out and justify this warning being in big </span><span class="No-Break"><span class="koboSpan" id="kobo.810.1">red letters.</span></span></p>
<p><span class="koboSpan" id="kobo.811.1">Second, it tells you the app is running at </span><strong class="source-inline"><span class="koboSpan" id="kobo.812.1">http://127.0.0.1:5000</span></strong><span class="koboSpan" id="kobo.813.1">. </span><span class="koboSpan" id="kobo.813.2">The address is listed as a hyperlink, which you can click to open your browser. </span><span class="koboSpan" id="kobo.813.3">I have mine open in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.814.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.815.1">.12</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.816.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer270">
<span class="koboSpan" id="kobo.817.1"><img alt="Figure 8.12: It worked, but 1991 just called on the phone and they want their web design back" src="image/B19644_08_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.818.1">Figure 8.12: It worked, but 1991 just called on the phone and they want their web design back</span></p>
<p><span class="koboSpan" id="kobo.819.1">It is awfully ugly, isn’t it? </span><span class="koboSpan" id="kobo.819.2">We went to the trouble of adding Bootstrap, the least we can do is </span><span class="No-Break"><span class="koboSpan" id="kobo.820.1">use it.</span></span></p>
<h2 id="_idParaDest-213"><a id="_idTextAnchor217"/><span class="koboSpan" id="kobo.821.1">Let’s make it look a little better</span></h2>
<p><span class="koboSpan" id="kobo.822.1">The page doesn’t have much happening in terms of design, and while we won’t be building some amazing user experience </span><a id="_idIndexMarker740"/><span class="koboSpan" id="kobo.823.1">that might land you a design job at Apple, we can at least make this a little more presentable by adding some Bootstrap classes. </span><span class="koboSpan" id="kobo.823.2">We’ll be doing this within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.824.1">body</span></strong><span class="koboSpan" id="kobo.825.1"> tag inside our Jinja2 </span><span class="No-Break"><span class="koboSpan" id="kobo.826.1">template, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.827.1">index.html</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.828.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.829.1">First, let’s set up Bootstrap’s layout grid. </span><span class="koboSpan" id="kobo.829.2">This allows us to create apps that gracefully adjust to any size screen from the tiniest phone browser to the largest </span><span class="No-Break"><span class="koboSpan" id="kobo.830.1">8K display.</span></span></p>
<p><span class="koboSpan" id="kobo.831.1">Add this code just inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.832.1">body</span></strong><span class="koboSpan" id="kobo.833.1"> tag. </span><span class="koboSpan" id="kobo.833.2">When you’re done, it should bump up against the </span><strong class="source-inline"><span class="koboSpan" id="kobo.834.1">table</span></strong><span class="koboSpan" id="kobo.835.1"> code we </span><span class="No-Break"><span class="koboSpan" id="kobo.836.1">created earlier:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.837.1">
&lt;div class="container-fluid h-100"&gt;
  &lt;div class="row"&gt;
    &lt;div class="col-12"&gt;
      &lt;h1&gt;Python Libraries
        &lt;span class="flipped-letter"&gt;R&lt;/span&gt; Us&lt;/h1&gt;
      &lt;h2&gt;All the libraries that are fit to use!&lt;/h2&gt;
      &lt;hr/&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;div class="row"&gt;
    &lt;div class="col-8"&gt;
      &lt;h5&gt;Here are the libraries:&lt;/h5&gt;</span></pre> <p><span class="koboSpan" id="kobo.838.1">Here, we’ve added a </span><strong class="source-inline"><span class="koboSpan" id="kobo.839.1">div</span></strong><span class="koboSpan" id="kobo.840.1"> marked with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.841.1">container-fluid</span></strong><span class="koboSpan" id="kobo.842.1"> class. </span><span class="koboSpan" id="kobo.842.2">This is going to give us some much-needed layout and padding so our content doesn’t slam up against the edges of the browser window. </span><span class="koboSpan" id="kobo.842.3">I’ve also set this to take up the full height available in the browser window in anticipation of there being many useful libraries in our table. </span><span class="koboSpan" id="kobo.842.4">I did this with Bootstrap’s </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.843.1">h-100</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.844.1"> class.</span></span></p>
<p><span class="koboSpan" id="kobo.845.1">After that, I added a </span><strong class="source-inline"><span class="koboSpan" id="kobo.846.1">div</span></strong><span class="koboSpan" id="kobo.847.1"> to act as a row followed by one acting as a column. </span><span class="koboSpan" id="kobo.847.2">I’ve set the class on the column to </span><strong class="source-inline"><span class="koboSpan" id="kobo.848.1">col-12</span></strong><span class="koboSpan" id="kobo.849.1">, which in Bootstrap means it should take up the full width of the browser window with appropriate margins and padding defined by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.850.1">container-fluid</span></strong><span class="koboSpan" id="kobo.851.1"> class in the ancestral </span><strong class="source-inline"><span class="koboSpan" id="kobo.852.1">div</span></strong><span class="koboSpan" id="kobo.853.1"> tag we </span><span class="No-Break"><span class="koboSpan" id="kobo.854.1">added earlier.</span></span></p>
<p><span class="koboSpan" id="kobo.855.1">The next three tags are just content additions – some labeling that explains what the user is seeing using </span><strong class="source-inline"><span class="koboSpan" id="kobo.856.1">H1</span></strong><span class="koboSpan" id="kobo.857.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.858.1">H2</span></strong><span class="koboSpan" id="kobo.859.1"> tags followed by a horizontal rule. </span><span class="koboSpan" id="kobo.859.2">I added a CSS class to flip the letter R so it is reminiscent of a popular, yet presently bankrupt toy shop in the US. </span><span class="koboSpan" id="kobo.859.3">One more icon from my childhood has bitten the dust. </span><span class="koboSpan" id="kobo.859.4">Bear in mind, we haven’t created this CSS class yet. </span><span class="koboSpan" id="kobo.859.5">We’ll do that</span><a id="_idIndexMarker741"/><span class="koboSpan" id="kobo.860.1"> in just </span><span class="No-Break"><span class="koboSpan" id="kobo.861.1">a minute.</span></span></p>
<p><span class="koboSpan" id="kobo.862.1">Let’s add the Bootstrap </span><strong class="source-inline"><span class="koboSpan" id="kobo.863.1">.table</span></strong><span class="koboSpan" id="kobo.864.1"> class to the table. </span><span class="koboSpan" id="kobo.864.2">Change your </span><strong class="source-inline"><span class="koboSpan" id="kobo.865.1">table</span></strong><span class="koboSpan" id="kobo.866.1"> code by </span><span class="No-Break"><span class="koboSpan" id="kobo.867.1">adding </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.868.1">class="table"</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.869.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.870.1">
&lt;h5&gt;Here are the libraries:&lt;/h5&gt;
            &lt;table </span><strong class="bold"><span class="koboSpan" id="kobo.871.1">class="table"</span></strong><span class="koboSpan" id="kobo.872.1">&gt;
                &lt;thead&gt;
                &lt;tr&gt;
                    &lt;th&gt;Library Name&lt;/th&gt;
                    &lt;th&gt;Description&lt;/th&gt;
                    &lt;th&gt;Rating&lt;/th&gt;
                    &lt;th&gt;URL&lt;/th&gt;
                &lt;/tr&gt;</span></pre> <p><span class="koboSpan" id="kobo.873.1">This will fix up the spacing in and around the table so everything isn’t </span><span class="No-Break"><span class="koboSpan" id="kobo.874.1">squished together.</span></span></p>
<p><span class="koboSpan" id="kobo.875.1">To close all this out, we need to add all the necessary closing tags after our table is closed. </span><span class="koboSpan" id="kobo.875.2">That’s just three nested </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.876.1">div</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.877.1"> closures:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.878.1">
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</span></pre> <p><span class="koboSpan" id="kobo.879.1">The first closes the column, the second closes the row, and the third closes the container. </span><span class="koboSpan" id="kobo.879.2">The last step is to add </span><span class="No-Break"><span class="koboSpan" id="kobo.880.1">some CSS.</span></span></p>
<h2 id="_idParaDest-214"><a id="_idTextAnchor218"/><span class="koboSpan" id="kobo.881.1">Adding some CSS</span></h2>
<p><span class="koboSpan" id="kobo.882.1">Right-click the </span><strong class="source-inline"><span class="koboSpan" id="kobo.883.1">static</span></strong><span class="koboSpan" id="kobo.884.1"> folder and </span><a id="_idIndexMarker742"/><span class="koboSpan" id="kobo.885.1">create a new CSS file called </span><strong class="source-inline"><span class="koboSpan" id="kobo.886.1">index.css</span></strong><span class="koboSpan" id="kobo.887.1">. </span><span class="koboSpan" id="kobo.887.2">Add the following code to </span><span class="No-Break"><span class="koboSpan" id="kobo.888.1">the file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.889.1">
body {
  margin: 92px;
  height: 100%;
}
.flipped-letter {
 display: inline-block;
 transform: scaleX(-1);
}
.gold-star {
  color: gold;
}</span></pre> <p><span class="koboSpan" id="kobo.890.1">In this CSS file, we’re adding some extra margin around the page and setting the height to 100% so we don’t wind up with a stubby little page that is fully dependent on how much content is in </span><span class="No-Break"><span class="koboSpan" id="kobo.891.1">our table.</span></span></p>
<p><span class="koboSpan" id="kobo.892.1">I added a </span><strong class="source-inline"><span class="koboSpan" id="kobo.893.1">flipped-letter</span></strong><span class="koboSpan" id="kobo.894.1"> class in </span><strong class="source-inline"><span class="koboSpan" id="kobo.895.1">index.css</span></strong><span class="koboSpan" id="kobo.896.1"> to flip the letter R in our imaginary site’s title. </span><span class="koboSpan" id="kobo.896.2">We’re going to be displaying a rating for each library. </span><span class="koboSpan" id="kobo.896.3">I thought, instead of just a boring old number, we’d put some stars in there. </span><span class="koboSpan" id="kobo.896.4">Not just any stars – gold stars! </span><span class="koboSpan" id="kobo.896.5">So, there’s a class for that, which I called </span><strong class="source-inline"><span class="koboSpan" id="kobo.897.1">.gold-star</span></strong><span class="koboSpan" id="kobo.898.1">. </span><span class="koboSpan" id="kobo.898.2">If you’re new to CSS, the leading dot is significant. </span><span class="koboSpan" id="kobo.898.3">It flags the rest, </span><strong class="source-inline"><span class="koboSpan" id="kobo.899.1">gold-star</span></strong><span class="koboSpan" id="kobo.900.1"> as a custom class. </span><span class="koboSpan" id="kobo.900.2">In CSS, a class has nothing to do with object-oriented development, so if you’ve learned some Java or other class based language, the word </span><em class="italic"><span class="koboSpan" id="kobo.901.1">class</span></em><span class="koboSpan" id="kobo.902.1"> is not related to the concepts from those languages. </span><span class="koboSpan" id="kobo.902.2">You’ll see in a minute when the class is used within the HTML, the dot will be absent. </span><span class="koboSpan" id="kobo.902.3">This is not </span><span class="No-Break"><span class="koboSpan" id="kobo.903.1">an error.</span></span></p>
<p><span class="koboSpan" id="kobo.904.1">Now that we have a CSS file in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.905.1">static</span></strong><span class="koboSpan" id="kobo.906.1"> folder, we need to reference it in the HTML file. </span><span class="koboSpan" id="kobo.906.2">Since it is in the static folder, which has special meaning in a Flask app, our code is a little different than a straight CSS reference like those we saw earlier with plain HTML. </span><span class="koboSpan" id="kobo.906.3">Add this line of code inside your </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.907.1">head</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.908.1"> tag:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.909.1">
&lt;link href="{{ url_for('static', filename='index.css') }}"
     rel="stylesheet"
     type="text/css"&gt;</span></pre> <p><span class="koboSpan" id="kobo.910.1">Note the Jinja2 expression that resolves the location of the </span><span class="No-Break"><span class="koboSpan" id="kobo.911.1">static folder.</span></span></p>
<p><span class="koboSpan" id="kobo.912.1">I mentioned a moment ago that I want to</span><a id="_idIndexMarker743"/><span class="koboSpan" id="kobo.913.1"> use stars to show my ratings. </span><span class="koboSpan" id="kobo.913.2">I don’t really want to use graphics for this. </span><span class="koboSpan" id="kobo.913.3">Instead, I’d rather use a font, specifically </span><strong class="bold"><span class="koboSpan" id="kobo.914.1">Font Awesome</span></strong><span class="koboSpan" id="kobo.915.1">. </span><span class="koboSpan" id="kobo.915.2">Font Awesome</span><a id="_idIndexMarker744"/><span class="koboSpan" id="kobo.916.1"> is essentially agigantic web font that, instead of containing alphabetical characters, contains hundreds of useful  graphical icons useful for making modern UI and website designs. </span><span class="koboSpan" id="kobo.916.2">For more information on Font Awesome, </span><span class="No-Break"><span class="koboSpan" id="kobo.917.1">see </span></span><a href="https://www.fontawesome.com"><span class="No-Break"><span class="koboSpan" id="kobo.918.1">https://www.fontawesome.com</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.919.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.920.1">Rather than include Font Awesome in our project, which of course is an option, I’m going to link to a version of it </span><a id="_idIndexMarker745"/><span class="koboSpan" id="kobo.921.1">hosted on a </span><strong class="bold"><span class="koboSpan" id="kobo.922.1">content delivery network</span></strong><span class="koboSpan" id="kobo.923.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.924.1">CDN</span></strong><span class="koboSpan" id="kobo.925.1">). </span><span class="koboSpan" id="kobo.925.2">CDNs are a desirable way to host content because they are designed to serve static content with great speed. </span><span class="koboSpan" id="kobo.925.3">They do this not only through normal server optimizations but also by strategically positioning servers all over the world. </span><span class="koboSpan" id="kobo.925.4">When your page loads static content from a CDN, the request for that content is routed to the closest server. </span><span class="koboSpan" id="kobo.925.5">Your users in India will reach a CDN server in India, while users in Kansas (the middle of the United States) will be served the content from a server </span><span class="No-Break"><span class="koboSpan" id="kobo.926.1">much closer.</span></span></p>
<p><span class="koboSpan" id="kobo.927.1">Font Awesome lists its CDN links on its website. </span><span class="koboSpan" id="kobo.927.2">I’m going to use a link I have copied from the Font Awesome website and add this to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.928.1">head</span></strong><span class="koboSpan" id="kobo.929.1"> tag of our page. </span><span class="koboSpan" id="kobo.929.2">Since this is coming from a CDN instead of the static folder, I don’t need any Jinja2 voodoo magic to </span><span class="No-Break"><span class="koboSpan" id="kobo.930.1">resolve it:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.931.1">
&lt;link rel="stylesheet"
     href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"&gt;</span></pre> <p><span class="koboSpan" id="kobo.932.1">Things should be looking much better! </span><span class="koboSpan" id="kobo.932.2">I’ll hold off on the revealing screenshot until we’ve added the dynamic content. </span><span class="koboSpan" id="kobo.932.3">I don’t want to spoil the big reveal! </span><span class="koboSpan" id="kobo.932.4">Don’t forget, you can check the final code in the chapter’s repository folder cloned </span><span class="No-Break"><span class="koboSpan" id="kobo.933.1">from GitHub.</span></span></p>
<h2 id="_idParaDest-215"><a id="_idTextAnchor219"/><span class="koboSpan" id="kobo.934.1">Making the page dynamic</span></h2>
<p><span class="koboSpan" id="kobo.935.1">We’ve created a Flask app and gotten a template working. </span><span class="koboSpan" id="kobo.935.2">Let’s add dynamism to the page using Flask and Jinja2. </span><span class="koboSpan" id="kobo.935.3">We’re going to </span><a id="_idIndexMarker746"/><span class="koboSpan" id="kobo.936.1">simulate a database using a list of </span><strong class="source-inline"><span class="koboSpan" id="kobo.937.1">dicts</span></strong><span class="koboSpan" id="kobo.938.1"> with fields that correspond to the fields we’ve put in </span><span class="No-Break"><span class="koboSpan" id="kobo.939.1">our table.</span></span></p>
<p><span class="koboSpan" id="kobo.940.1">Switch to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.941.1">app.py</span></strong><span class="koboSpan" id="kobo.942.1"> file and find this line, which should be near line </span><span class="No-Break"><span class="koboSpan" id="kobo.943.1">number 3:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.944.1">
app = Flask(__name__)</span></pre> <p><span class="koboSpan" id="kobo.945.1">This line, which was generated by PyCharm when we created the project, creates an instance of Flask and assigns that instance to a variable called </span><strong class="source-inline"><span class="koboSpan" id="kobo.946.1">app</span></strong><span class="koboSpan" id="kobo.947.1">. </span><span class="koboSpan" id="kobo.947.2">We’ll begin adding new code below this line. </span><span class="koboSpan" id="kobo.947.3">Let’s start by creating a global variable to hold </span><span class="No-Break"><span class="koboSpan" id="kobo.948.1">our data:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.949.1">
library_data = list()
library_data.append({"python_library": "Flask",
           "description": "An unopinionated web framework",
           "rating": 5,
           "url": "https://pypi.org/project/Flask"})
library_data.append({"python_library": "Jinja2",
           "description": "Templating library",
           "rating": 3,
           "url": "https://pypi.org/project/Jinja2"})</span></pre> <p><span class="koboSpan" id="kobo.950.1">In general, global variables, especially in a large program, are to be avoided. </span><span class="koboSpan" id="kobo.950.2">In this case, we’re using the global variable to simulate a database connection, which is generally an exception to </span><span class="No-Break"><span class="koboSpan" id="kobo.951.1">the rule.</span></span></p>
<p><span class="koboSpan" id="kobo.952.1">Here, we’re adding a few records to our fake database. </span><span class="koboSpan" id="kobo.952.2">If you’re a fan of Jinja2, please don’t hate me. </span><span class="koboSpan" id="kobo.952.3">I rated it a 3 in the content just to have some visual difference between the two </span><span class="No-Break"><span class="koboSpan" id="kobo.953.1">sample records.</span></span></p>
<p><span class="koboSpan" id="kobo.954.1">There’s just one more change. </span><span class="koboSpan" id="kobo.954.2">Add a second parameter to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.955.1">render_template</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.956.1"> call:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.957.1">
return render_template("index.html", library_data=library_data)</span></pre> <p><span class="koboSpan" id="kobo.958.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.959.1">render_template</span></strong><span class="koboSpan" id="kobo.960.1"> method is a </span><strong class="bold"><span class="koboSpan" id="kobo.961.1">variadic function</span></strong><span class="koboSpan" id="kobo.962.1">. </span><span class="koboSpan" id="kobo.962.2">You can pass as many parameters into it as you’d like. </span><span class="koboSpan" id="kobo.962.3">Jinja2</span><a id="_idIndexMarker747"/><span class="koboSpan" id="kobo.963.1"> will be able to render the passed data in the template. </span><span class="koboSpan" id="kobo.963.2">Here, we’re just adding one </span><span class="No-Break"><span class="koboSpan" id="kobo.964.1">data </span></span><span class="No-Break"><a id="_idIndexMarker748"/></span><span class="No-Break"><span class="koboSpan" id="kobo.965.1">variable.</span></span></p>
<p><span class="koboSpan" id="kobo.966.1">We’re done with </span><strong class="source-inline"><span class="koboSpan" id="kobo.967.1">app.py</span></strong><span class="koboSpan" id="kobo.968.1">! </span><span class="koboSpan" id="kobo.968.2">The final code looks </span><span class="No-Break"><span class="koboSpan" id="kobo.969.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.970.1">
from flask import Flask, render_template
app = Flask(__name__)
library_data = list()
library_data.append({"python_library": "Flask",
           "description": "An unopinionated web framework",
           "rating": 5,
           "url": "https://pypi.org/project/Flask"})
library_data.append({"python_library": "Jinja2",
           "description": "Templating library",
           "rating": 3,
           "url": "https://pypi.org/project/Jinja2"})
@app.route('/', methods=['GET'])
def root(): # put application's code here
  return render_template("index.html", library_data=library_data)
if __name__ == '__main__':
  app.run()</span></pre> <p><span class="koboSpan" id="kobo.971.1">Now that we’re passing some data into the template, we need to go back and modify the </span><strong class="source-inline"><span class="koboSpan" id="kobo.972.1">index.html</span></strong><span class="koboSpan" id="kobo.973.1"> template to render the data. </span><span class="koboSpan" id="kobo.973.2">You need to change the contents of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.974.1">tbody</span></strong><span class="koboSpan" id="kobo.975.1"> tag </span><span class="No-Break"><span class="koboSpan" id="kobo.976.1">to this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.977.1">
&lt;tbody&gt;
        {% if library_data|length &gt; 0 %}</span></pre> <p><span class="koboSpan" id="kobo.978.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.979.1">{%</span></strong><span class="koboSpan" id="kobo.980.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.981.1">{{</span></strong><span class="koboSpan" id="kobo.982.1"> markers in the template are marking out places where logic and content take place. </span><span class="koboSpan" id="kobo.982.2">Here, we are checking the length</span><a id="_idIndexMarker749"/><span class="koboSpan" id="kobo.983.1"> of the array. </span><span class="koboSpan" id="kobo.983.2">If it is greater than zero, we’re rendering table rows using the contents of the array. </span><span class="koboSpan" id="kobo.983.3">Further down, there’s an </span><strong class="source-inline"><span class="koboSpan" id="kobo.984.1">else</span></strong><span class="koboSpan" id="kobo.985.1"> that will render what we have now, which is a single row stating there is </span><span class="No-Break"><span class="koboSpan" id="kobo.986.1">no data:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.987.1">
          {% for data in library_data %}
            &lt;tr&gt;
              &lt;td&gt;{{ data.python_library }} &lt;/td&gt;
              &lt;td&gt;{{ data.description }}&lt;/td&gt;
              &lt;td&gt;
                {% for _ in range(data.rating) %}
                  &lt;i class="fas fa-star gold-star"&gt;&lt;/i&gt;
                {% endfor %}
              &lt;/td&gt;
              &lt;td&gt;&lt;a href="{{ data.url }}"
                  target="_blank"&gt;View on pypi.org&lt;/a&gt;&lt;/td&gt;
            &lt;/tr&gt;
          {% endfor %}</span></pre> <p><span class="koboSpan" id="kobo.988.1">In the preceding code, we are looping through the </span><strong class="source-inline"><span class="koboSpan" id="kobo.989.1">library_data</span></strong><span class="koboSpan" id="kobo.990.1"> list and generating a table row (</span><strong class="source-inline"><span class="koboSpan" id="kobo.991.1">tr</span></strong><span class="koboSpan" id="kobo.992.1">). </span><span class="koboSpan" id="kobo.992.2">The table row is then supplied with columns. </span><span class="koboSpan" id="kobo.992.3">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.993.1">{{ }}</span></strong><span class="koboSpan" id="kobo.994.1"> placeholders denote where contents from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.995.1">dict</span></strong><span class="koboSpan" id="kobo.996.1"> from the current list iteration should be placed. </span><span class="koboSpan" id="kobo.996.2">The first column shows the contents of </span><strong class="source-inline"><span class="koboSpan" id="kobo.997.1">data.python_library</span></strong><span class="koboSpan" id="kobo.998.1">. </span><span class="koboSpan" id="kobo.998.2">The second shows </span><span class="No-Break"><span class="koboSpan" id="kobo.999.1">the description.</span></span></p>
<p><span class="koboSpan" id="kobo.1000.1">The third is where we add some razzle-dazzle! </span><span class="koboSpan" id="kobo.1000.2">We add a code block that loops using a range to generate stars in that column. </span><span class="koboSpan" id="kobo.1000.3">If</span><a id="_idIndexMarker750"/><span class="koboSpan" id="kobo.1001.1"> the rating is 3, the loop runs 3 times and we get </span><span class="No-Break"><span class="koboSpan" id="kobo.1002.1">3 stars!</span></span></p>
<p><span class="koboSpan" id="kobo.1003.1">For the URL, I used the value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1004.1">data.url</span></strong><span class="koboSpan" id="kobo.1005.1"> as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1006.1">href</span></strong><span class="koboSpan" id="kobo.1007.1"> attribute on </span><span class="No-Break"><span class="koboSpan" id="kobo.1008.1">a hyperlink.</span></span></p>
<p><span class="koboSpan" id="kobo.1009.1">That just leaves the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1010.1">else</span></strong><span class="koboSpan" id="kobo.1011.1"> statement I told </span><span class="No-Break"><span class="koboSpan" id="kobo.1012.1">you about:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1013.1">
        {% else %}
          &lt;tr&gt;
            &lt;td colspan="4"&gt;No libraries to display&lt;/td&gt;
          &lt;/tr&gt;
        {% endif %}
        &lt;/tbody&gt;</span></pre> <p><span class="koboSpan" id="kobo.1014.1">To summarize, if we pass in an array with zero elements, Jinja2 will render the row we had before, which states there is no data. </span><span class="koboSpan" id="kobo.1014.2">If there’s data in the array, Jinja2 loops over the array and generates a table row for each row in </span><span class="No-Break"><span class="koboSpan" id="kobo.1015.1">the data.</span></span></p>
<p><span class="koboSpan" id="kobo.1016.1">Run the project and direct your browser to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1017.1">http://localhost:5000</span></strong><span class="koboSpan" id="kobo.1018.1">. </span><span class="koboSpan" id="kobo.1018.2">You’ll see a table rendered with two records, as seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1019.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1020.1">.13</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1021.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer271">
<span class="koboSpan" id="kobo.1022.1"><img alt="Figure 8.13: The big reveal! Our page is now dynamic﻿" src="image/B19644_08_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1023.1">Figure 8.13: The big reveal! </span><span class="koboSpan" id="kobo.1023.2">Our page is now dynamic</span></p>
<p><span class="koboSpan" id="kobo.1024.1">Let’s pause for a moment and take stock of how PyCharm has </span><span class="No-Break"><span class="koboSpan" id="kobo.1025.1">helped us.</span></span></p>
<h2 id="_idParaDest-216"><a id="_idTextAnchor220"/><span class="koboSpan" id="kobo.1026.1">Editor enhancements for working with Flask and Jinja2</span></h2>
<p><span class="koboSpan" id="kobo.1027.1">You’ve been getting a lot </span><a id="_idIndexMarker751"/><span class="koboSpan" id="kobo.1028.1">of help during this exercise. </span><span class="koboSpan" id="kobo.1028.2">If you don’t believe me, try repeating this exercise with Vim or Notepad! </span><span class="koboSpan" id="kobo.1028.3">By now, you’re becoming accustomed to how much PyCharm takes </span><a id="_idIndexMarker752"/><span class="koboSpan" id="kobo.1029.1">off your plate in terms of lightening your cognitive</span><a id="_idIndexMarker753"/><span class="koboSpan" id="kobo.1030.1"> load, and physically handling a lot </span><span class="No-Break"><span class="koboSpan" id="kobo.1031.1">of typing.</span></span></p>
<p><span class="koboSpan" id="kobo.1032.1">You might not have even noticed </span><span class="No-Break"><span class="koboSpan" id="kobo.1033.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1034.1">The HTML editing features, such as syntax highlighting, automatic tag closures, and color-coded indicators for your nested opening and closing tags in </span><span class="No-Break"><span class="koboSpan" id="kobo.1035.1">the markup.</span></span></li>
<li><span class="koboSpan" id="kobo.1036.1">We used Emmet to generate some of </span><span class="No-Break"><span class="koboSpan" id="kobo.1037.1">our markups.</span></span></li>
<li><span class="koboSpan" id="kobo.1038.1">PyCharm understands Jinja2 syntax and the inspection doesn’t freak out when you start putting curly </span><span class="No-Break"><span class="koboSpan" id="kobo.1039.1">braces everywhere.</span></span></li>
<li><span class="koboSpan" id="kobo.1040.1">In fact, it auto-closes the curly braces for both </span><strong class="source-inline"><span class="koboSpan" id="kobo.1041.1">{{ expressions }}</span></strong><span class="koboSpan" id="kobo.1042.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1043.1">{% code </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1044.1">blocks %}</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1045.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1046.1">If you made any mistakes along the way, you might have noticed that PyCharm’s inspections and suggestions clearly understand how to use Flask. </span><span class="koboSpan" id="kobo.1046.2">It’s not simple introspective auto-completion. </span><span class="koboSpan" id="kobo.1046.3">PyCharm will give you specific assistance tailored to </span><span class="No-Break"><span class="koboSpan" id="kobo.1047.1">Flask development.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1048.1">Let’s look at a few features that are not </span><span class="No-Break"><span class="koboSpan" id="kobo.1049.1">so obvious:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1050.1">Switch to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1051.1">app.py</span></strong><span class="koboSpan" id="kobo.1052.1">, put your cursor inside the template filename (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1053.1">index.html</span></strong><span class="koboSpan" id="kobo.1054.1">), then press </span><em class="italic"><span class="koboSpan" id="kobo.1055.1">Ctrl </span></em><span class="koboSpan" id="kobo.1056.1">/</span><em class="italic"><span class="koboSpan" id="kobo.1057.1"> Cmd </span></em><span class="koboSpan" id="kobo.1058.1">+</span><em class="italic"><span class="koboSpan" id="kobo.1059.1"> B</span></em><span class="koboSpan" id="kobo.1060.1">. </span><span class="koboSpan" id="kobo.1060.2">This activates the </span><strong class="bold"><span class="koboSpan" id="kobo.1061.1">Go to declaration</span></strong><span class="koboSpan" id="kobo.1062.1"> shortcut, which takes you directly to the template file. </span><span class="koboSpan" id="kobo.1062.2">This also works the other way round. </span><span class="koboSpan" id="kobo.1062.3">If you place your cursor on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1063.1">library_data</span></strong><span class="koboSpan" id="kobo.1064.1"> variable in the template and press </span><em class="italic"><span class="koboSpan" id="kobo.1065.1">Ctrl </span></em><span class="koboSpan" id="kobo.1066.1">/</span><em class="italic"><span class="koboSpan" id="kobo.1067.1"> Cmd </span></em><span class="koboSpan" id="kobo.1068.1">+</span><em class="italic"><span class="koboSpan" id="kobo.1069.1"> B</span></em><span class="koboSpan" id="kobo.1070.1">, it will take you to the render template call, which passes that variable </span><span class="No-Break"><span class="koboSpan" id="kobo.1071.1">into Jinja2.</span></span></li>
<li><span class="koboSpan" id="kobo.1072.1">It shouldn’t surprise you that the debugger works in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1073.1">app.py</span></strong><span class="koboSpan" id="kobo.1074.1">. </span><span class="koboSpan" id="kobo.1074.2">It also works in the Jinja2 template within the code blocks. </span><span class="koboSpan" id="kobo.1074.3">Place a breakpoint in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1075.1">for</span></strong><span class="koboSpan" id="kobo.1076.1"> loop in the Jinja2 template, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1077.1">index.html</span></strong><span class="koboSpan" id="kobo.1078.1">. </span><span class="koboSpan" id="kobo.1078.2">Start </span><a id="_idIndexMarker754"/><span class="koboSpan" id="kobo.1079.1">your app with </span><strong class="source-inline"><span class="koboSpan" id="kobo.1080.1">debug</span></strong><span class="koboSpan" id="kobo.1081.1">, and the debugger will stop on the loop. </span><span class="koboSpan" id="kobo.1081.2">You</span><a id="_idIndexMarker755"/><span class="koboSpan" id="kobo.1082.1"> can use the same step-through capabilities as with anything else you are debugging. </span><span class="koboSpan" id="kobo.1082.2">You can inspect template variables just as you would variables in a normal Python script. </span><span class="koboSpan" id="kobo.1082.3">Considering Jinja2 is effectively a meta-language, completely distinct from Python, and specialized in what it can do, this is </span><span class="No-Break"><span class="koboSpan" id="kobo.1083.1">quite remarkable.</span></span></li>
<li><span class="koboSpan" id="kobo.1084.1">If you made any mistakes, Werkzeug has a nifty error page with links to your stack trace, which includes a</span><a id="_idIndexMarker756"/><span class="koboSpan" id="kobo.1085.1"> trace of your template. </span><span class="koboSpan" id="kobo.1085.2">PyCharm captures this information and displays it, complete with hyperlinks in the </span><strong class="bold"><span class="koboSpan" id="kobo.1086.1">Run</span></strong><span class="koboSpan" id="kobo.1087.1"> window. </span><span class="koboSpan" id="kobo.1087.2">The hyperlinks take you to the code in PyCharm rather than just displaying it as Werkzeug does in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1088.1">browser window.</span></span></li>
<li><span class="koboSpan" id="kobo.1089.1">You’ll see the same level of support for popular Flask plugins as you do for Jinja2. </span><span class="koboSpan" id="kobo.1089.2">Flask is designed to be extensible. </span><span class="koboSpan" id="kobo.1089.3">There is a plethora of plugins to make your life easier in many areas of web development, from REST API development to database ORMs to session handling and authentication. </span><span class="koboSpan" id="kobo.1089.4">You’ll find PyCharm guiding you through development in any Flask development scenario in which you </span><span class="No-Break"><span class="koboSpan" id="kobo.1090.1">find yourself.</span></span></li>
</ul>
<h1 id="_idParaDest-217"><a id="_idTextAnchor221"/><span class="koboSpan" id="kobo.1091.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.1092.1">I’ve pointed out a few times now that this chapter is a poor tutorial on Flask. </span><span class="koboSpan" id="kobo.1092.2">We just barely scratched the surface of what Flask can do, but we covered all the ways PyCharm can help you with Flask development and it is one of the few IDEs that provides the level of help and tooling we’ve seen as we developed this </span><span class="No-Break"><span class="koboSpan" id="kobo.1093.1">simple project.</span></span></p>
<p><span class="koboSpan" id="kobo.1094.1">For starters, Flask provides an easy way to generate a project structure and starter code for a Flask project. </span><span class="koboSpan" id="kobo.1094.2">Like any other project, PyCharm sets up your virtual environment and gives you some starter code. </span><span class="koboSpan" id="kobo.1094.3">When we use the Flask template in PyCharm Professional, PyCharm also installs your project dependencies for you and sets up a specialized run configuration for </span><span class="No-Break"><span class="koboSpan" id="kobo.1095.1">your project.</span></span></p>
<p><span class="koboSpan" id="kobo.1096.1">Once you get into editing your project, you find all the features we’ve covered in earlier chapters coming together. </span><span class="koboSpan" id="kobo.1096.2">The HTML, CSS, and JavaScript-related features work not only with normal HTML projects but also with the Jinja2 templating language native to Flask. </span><span class="koboSpan" id="kobo.1096.3">We get Flask-specific inspections, code hints, and documentation not just for Flask but also for the extended </span><span class="No-Break"><span class="koboSpan" id="kobo.1097.1">Flask ecosystem.</span></span></p>
<p><span class="koboSpan" id="kobo.1098.1">We even found we can debug Jinja2 templates as if they were actually Python code! </span><span class="koboSpan" id="kobo.1098.2">Combine that with some very nice navigational enhancements to help you move between presentation logic and backend logic and you’ve got an unbeatable combination of power and functionality at your fingertips as a </span><span class="No-Break"><span class="koboSpan" id="kobo.1099.1">Flask developer.</span></span></p>
<p><span class="koboSpan" id="kobo.1100.1">Flask isn’t the only game in town. </span><span class="koboSpan" id="kobo.1100.2">Newer</span><a id="_idIndexMarker757"/><span class="koboSpan" id="kobo.1101.1"> development models have become popular over the last few years: specifically </span><strong class="bold"><span class="koboSpan" id="kobo.1102.1">single-page apps</span></strong><span class="koboSpan" id="kobo.1103.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1104.1">SPAs</span></strong><span class="koboSpan" id="kobo.1105.1">) combined with pure RESTful APIs on the backend. </span><span class="koboSpan" id="kobo.1105.2">The next chapter focuses on a fast, modern approach to building RESTful APIs using a framework called FastAPI. </span></p>
<p><span class="koboSpan" id="kobo.1106.1">As you will see, FastAPI bears some resemblence to Flask but with some important differences. </span><span class="koboSpan" id="kobo.1106.2">Flask uses a worker model to serve content or data while FastAPI works a little more like NodeJS, which uses an asychronous programming model. </span><span class="koboSpan" id="kobo.1106.3">FastAPI tends to focus solely on creating RESTful APIs and lacks the templating utilities found </span><span class="No-Break"><span class="koboSpan" id="kobo.1107.1">in Flask.</span></span></p>
<h1 id="_idParaDest-218"><a id="_idTextAnchor222"/><span class="koboSpan" id="kobo.1108.1">Further reading</span></h1>
<p><span class="koboSpan" id="kobo.1109.1">Be sure to check out the companion website for the book at </span><a href="https://www.pycharm-book.com"><span class="koboSpan" id="kobo.1110.1">https://www.pycharm-book.com</span></a><span class="koboSpan" id="kobo.1111.1">. </span><span class="koboSpan" id="kobo.1111.2">The site allows me to list newer resources as they become available. </span><span class="koboSpan" id="kobo.1111.3">The following resources will also </span><span class="No-Break"><span class="koboSpan" id="kobo.1112.1">be useful:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1113.1">Gaspar, D., &amp; Stouffer, J. </span><span class="koboSpan" id="kobo.1113.2">(2018). </span><em class="italic"><span class="koboSpan" id="kobo.1114.1">Mastering Flask Web Development: Build Enterprise-grade, Scalable Python Web Applications</span></em><span class="koboSpan" id="kobo.1115.1">. </span><span class="koboSpan" id="kobo.1115.2">Packt </span><span class="No-Break"><span class="koboSpan" id="kobo.1116.1">Publishing Ltd.</span></span></li>
<li><span class="koboSpan" id="kobo.1117.1">Van Horn II, B. </span><span class="koboSpan" id="kobo.1117.2">(2019). </span><em class="italic"><span class="koboSpan" id="kobo.1118.1">Building RESTful APIs with Flask</span></em><span class="koboSpan" id="kobo.1119.1">. </span><span class="koboSpan" id="kobo.1119.2">LinkedIn </span><span class="No-Break"><span class="koboSpan" id="kobo.1120.1">Learning</span></span><span class="No-Break"><span class="koboSpan" id="kobo.1121.1">: </span></span><a href="https://www.linkedin.com/learning/building-restful-apis-with-flask/restful-apis-with-python-3-and-fl"><span class="No-Break"><span class="koboSpan" id="kobo.1122.1">https://www.linkedin.com/learning/building-restful-apis-with-flask/restful-apis-with-python-3-and-flask-4</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1123.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1124.1">Van Horn II, B. </span><span class="koboSpan" id="kobo.1124.2">(2021). </span><span class="koboSpan" id="kobo.1124.3">MongoDB for Python Developers. </span><span class="koboSpan" id="kobo.1124.4">MadDevSkilz.com. </span><a href="https://www.maddevskilz.com/courses/mongodb-for-python-developers"><span class="koboSpan" id="kobo.1125.1">https://www.maddevskilz.com/courses/mongodb-for-python-developers</span></a><span class="koboSpan" id="kobo.1126.1">. </span><span class="koboSpan" id="kobo.1126.2">Note:  Despite the title, this is a short tutorial on creating a Flask application that uses MongoDB. </span><span class="koboSpan" id="kobo.1126.3">It is very similar to, and newer than, my </span><span class="No-Break"><span class="koboSpan" id="kobo.1127.1">LinkedIn course.</span></span></li>
</ul>
</div>
</body></html>