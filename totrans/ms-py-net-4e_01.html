<html><head></head><body>
  <div class="Basic-Text-Frame" id="_idContainer020">
    <h1 class="chapterNumber">1</h1>
    <h1 class="chapterTitle" id="_idParaDest-15">Review of TCP/IP Protocol Suite and Python</h1>
    <p class="normal">Welcome to the new and exciting age of network engineering! When I started working as a network engineer at the turn of the millennium some 20 years ago, the role was distinctly different than the network engineering role of today. At the time, network engineers mainly possessed domain-specific knowledge to manage and operate local and wide area networks using the command-line interface. While they might occasionally cross over the discipline wall to handle tasks normally associated with systems administration and developers, there was no explicit expectation for a network engineer to write code or understand programming concepts. This is no longer the case today.</p>
    <p class="normal">Over the <a id="_idIndexMarker000"/>years, the DevOps and <strong class="keyWord">Software–Defined Networking</strong> (<strong class="keyWord">SDN</strong>) movement, among other factors, have significantly blurred the lines between network engineers, systems engineers, and developers.</p>
    <p class="normal">The fact that you have picked up this book suggests that you might already be an adopter of network DevOps, or maybe you are considering going down that path of checking out network programmability. Maybe you have been working as a network engineer for many years, just as I had, and wanted to know what the buzz around the Python programming language is all about. You might even already have been fluent in the Python programming language but wonder what its applications are in the network engineering field.</p>
    <p class="normal">If you fall into any of these camps or are simply just curious about Python in the network engineering field, I believe this book is for you:</p>
    <figure class="mediaobject"><img alt="Diagram, venn diagram  Description automatically generated" src="../Images/B18403_01_01.png"/></figure>
    <p class="packt_figref">Figure 1.1: The intersection between Python and network engineering</p>
    <p class="normal">There are already many great books written that dive into the topics of network engineering and Python separately. I do not intend to repeat their efforts with this book. Instead, this book assumes you have some hands-on experience in managing networks, as well as a basic understanding of network protocols. It’s helpful if you’re already familiar with Python as a programming language, but you do not need to be an expert. We will cover some Python basics later in the chapter as a baseline of Python knowledge. Again, you do not need to be an expert in Python or network engineering to read this book. This book intends to build on the basic foundations of network engineering and Python to help readers learn and practice various applications that can make their lives easier.</p>
    <p class="normal">In this chapter, we will do a general review of some networking and Python concepts. The rest of the chapter should set the level of expectation of the prior knowledge required to get the most out of this book. If you want to brush up on the contents of this chapter, there are lots of free or low-cost resources to bring you up to speed. I would recommend the free Khan Academy (<a href="https://www.khanacademy.org/"><span class="url">https://www.khanacademy.org/</span></a>) and the official Python tutorials from the Python Software Foundation at <a href="https://www.python.org/"><span class="url">https://www.python.org/</span></a>.</p>
    <p class="normal">This chapter will pay a very quick visit to the relevant networking topics at a high level without going too much into the details. There is simply not enough space in one chapter to do a deep dive on any of the topics. To be honest, most of us do not get to a deep level when doing day-to-day jobs. What is the level of required networking knowledge? Judging from my experience of working in the field, a typical network engineer or developer <a id="_idIndexMarker001"/>might not remember the exact <strong class="keyWord">Transmission Control Protocol</strong> (<strong class="keyWord">TCP</strong>) state machine to accomplish their daily tasks (I know I don’t), but they <a id="_idIndexMarker002"/>would be familiar with the basics of the <strong class="keyWord">Open Systems Interconnection</strong> (<strong class="keyWord">OSI</strong>) model, the TCP and <strong class="keyWord">User Datagram Protocol</strong> (<strong class="keyWord">UDP</strong>) operations, different IP header fields, and other fundamental <a id="_idIndexMarker003"/>concepts. That is what we will cover in this chapter. </p>
    <p class="normal">We will also look at a high-level review of the Python language first; just enough for those readers who do not code in Python daily to have ground to walk on for the rest of the book.</p>
    <p class="normal">Specifically, we will cover the following topics:</p>
    <ul>
      <li class="bulletList">An overview of the Internet</li>
      <li class="bulletList">The OSI and client-server model</li>
      <li class="bulletList">TCP, UDP, and IP protocol suites</li>
      <li class="bulletList">Python syntax, types, operators, and loops</li>
      <li class="bulletList">Extending Python with functions, classes, and packages</li>
    </ul>
    <p class="normal">Of course, the information presented in this chapter is not exhaustive; please check out the references for further information if required.</p>
    <p class="normal">As network engineers, often we are challenged by the scale and complexity of the networks we need to manage. They range from small home-based networks, medium-size networks that make a small business go, to large multi-national enterprise networks spanning across the globe. The most extensive network of them all is, of course, the Internet. Without the Internet, there would be no email, websites, API, streaming media, or cloud computing as we know it. Therefore, before we dive deeper into the specifics of protocols and Python, let us begin with an overview of the Internet.</p>
    <h1 class="heading-1" id="_idParaDest-16">An overview of the Internet</h1>
    <p class="normal">What is the Internet? This seemingly easy question might receive different answers depending <a id="_idIndexMarker004"/>on each of our backgrounds. The Internet means different things to different people; the young, the old, students, teachers, business people, and poets could all give different answers to the same question.</p>
    <p class="normal">To a network engineer, the Internet is a global computer network consisting of a web of inter-networks connecting large and small networks together. In other words, it is <em class="italic">a network of networks without a centralized owner</em>. Take your home network as an example. It might consist of a device that integrates the functions of routing, Ethernet switching, and wireless access points connecting your smartphones, tablets, computers, and internet-enabled <a id="_idIndexMarker005"/>TVs together for the devices to communicate with each other. This is your <strong class="keyWord">Local Area Network</strong> (<strong class="keyWord">LAN</strong>).</p>
    <p class="normal">When your home network needs to communicate with the outside world, it passes information <a id="_idIndexMarker006"/>from your LAN to a larger network, often appropriately named the <strong class="keyWord">Internet Service Provider</strong> (<strong class="keyWord">ISP</strong>). The ISP is typically thought of as a business that you pay to get online. They can do this by aggregating small networks into bigger networks that they maintain. </p>
    <p class="normal">Your ISP network often consists of many edge nodes that aggregate the traffic to their core network. The core network’s function is to interconnect these edge networks via a high-speed network.</p>
    <p class="normal">At some of the more specialized edge nodes, called Internet exchange points, your ISP is connected to other ISPs to pass your traffic appropriately to your destination. The return path from your destination to your home computer, tablet, or smartphone may or may not follow the same path through all these in-between networks back to your original device, while the source and destination remain the same. This asymmetrical behavior is designed to be fault-tolerant so that no one node can take down the whole connection. </p>
    <p class="normal">Let’s look at the components making up this web of networks.</p>
    <h2 class="heading-2" id="_idParaDest-17">Servers, hosts, and network components</h2>
    <p class="normal"><strong class="keyWord">Hosts</strong> are end <a id="_idIndexMarker007"/>nodes on the network that communicate with other nodes. In today’s world, a host can be a traditional computer, or it can be your smartphone, tablet, or TV. With <a id="_idIndexMarker008"/>the rise of the <strong class="keyWord">Internet of Things</strong> (<strong class="keyWord">IoT</strong>), the broad <a id="_idIndexMarker009"/>definition of a host can be expanded to include an <strong class="keyWord">Internet Protocol</strong> (<strong class="keyWord">IP</strong>) camera, TV set-top boxes, and the ever-increasing types of sensors <a id="_idIndexMarker010"/>we use in agriculture, farming, automobiles, and <a id="_idIndexMarker011"/>more. With the explosion of the number <a id="_idIndexMarker012"/>of hosts connected to the Internet, they all need to be addressed, routed, and managed. The demand for proper networking has never been greater.</p>
    <p class="normal">Most of the time when we are on the Internet, we make requests for services. This could be viewing a web page, sending or receiving emails, transferring files, and other online activities. These <a id="_idIndexMarker013"/>services are provided by <strong class="keyWord">servers</strong>. As the name implies, servers provide services to multiple nodes and generally have higher levels of hardware specification. In a way, servers are particular “super nodes” on the network that offer additional capabilities to their peers. We will look at servers again later, in the <em class="italic">The client-server model</em> section.</p>
    <p class="normal">If you think of servers and hosts as cities and towns, the <em class="italic">network components</em> are the roads and highways that connect them together. In fact, the term information superhighway <a id="_idIndexMarker014"/>comes to mind when describing the network <a id="_idIndexMarker015"/>components that transmit the ever-increasing <a id="_idIndexMarker016"/>bits and bytes across the globe. In the Seven-Layer OSI model that we will look at in <em class="italic">The OSI model</em>, these network components are layer-one to layer-three devices that sometimes venture into layer four as well. They are layer-two and layer-three routers and switches that direct traffic, as well as layer-one <a id="_idIndexMarker017"/>transports such as fiber optic cables, coaxial cables, twisted copper pairs, and some <strong class="keyWord">Dense Wavelength Division Multiplexing</strong> (<strong class="keyWord">DWDM</strong>) equipment, to name a few.</p>
    <p class="normal">Collectively, hosts, servers, storage, and network components make up the internet as we know it today.</p>
    <h2 class="heading-2" id="_idParaDest-18">The rise of data centers</h2>
    <p class="normal">In the last section, we looked at the different roles that servers, hosts, and network components <a id="_idIndexMarker018"/>play in the inter-network. Because of the higher hardware <a id="_idIndexMarker019"/>capacity that servers demand, they are often put together in a central location to be managed more efficiently. We often refer to these locations as data centers. They can generally be classified into three broad categories: </p>
    <ul>
      <li class="bulletList">Enterprise data centers</li>
      <li class="bulletList">Cloud data centers</li>
      <li class="bulletList">Edge data centers</li>
    </ul>
    <p class="normal">Let us take a look at enterprise data centers first. </p>
    <h3 class="heading-3" id="_idParaDest-19">Enterprise data centers</h3>
    <p class="normal">In a typical <a id="_idIndexMarker020"/>enterprise, the company generally <a id="_idIndexMarker021"/>has business needs for internal tools such as emailing, document storage, sales tracking, ordering, HR tools, and a knowledge-sharing intranet. These services become file and mail servers, database servers, and web servers. Unlike user computers, these are generally high-end computers that require higher power, cooling, and high bandwidth network connections. A byproduct of the hardware is also the amount of noise it makes, which is not suitable for a normal workspace. The <a id="_idIndexMarker022"/>servers are generally placed in a central location, called the <strong class="keyWord">Main Distribution Frame</strong> (<strong class="keyWord">MDF</strong>), in the enterprise building to provide the necessary power feed, power redundancy, cooling, and network connectivity.</p>
    <p class="normal">To connect to the MDF, the user’s traffic is generally aggregated at locations closer to the user, which <a id="_idIndexMarker023"/>are sometimes called the <strong class="keyWord">Intermediate Distribution Frame</strong> (<strong class="keyWord">IDF</strong>), before they are bundled up and connected to the MDF. It is not unusual for the IDF-MDF spread to follow the physical layout of the enterprise building or campus. For example, each building floor can consist of an IDF that aggregates to the centralized MDF on another floor in the same building. If the enterprise consists of several buildings, further aggregation can be done by combining the buildings’ traffic before connecting them to the enterprise data center.</p>
    <p class="normal">Many enterprise <a id="_idIndexMarker024"/>data centers (sometimes referred to as campus networks) follow the three-layer network design. The layers are the access layer, the distribution layer, and the core layer. Of course, as with any design, there are no hard rules or one-size-fits-all model; the three-layer designs are just a general guide. As an example, to overlay the three-layer design to our User-IDF-MDF example earlier, the access layer is analogous to the ports each user connects to, the IDF can be thought of as the distribution layer, while the core layer consists of the connection to the MDF and the enterprise data centers. This is, of course, a generalization of enterprise networks, as some of them will not follow the same model.</p>
    <h3 class="heading-3" id="_idParaDest-20">Cloud data centers</h3>
    <p class="normal">With the <a id="_idIndexMarker025"/>rise of cloud computing and software, or <strong class="keyWord">Infrastructure as a Service</strong> (<strong class="keyWord">IaaS</strong>), the data centers the cloud providers have built are big in <a id="_idIndexMarker026"/>scale, sometimes referred to as hyper-scale data centers. What <a id="_idIndexMarker027"/>we referred to as cloud computing is the on-demand availability of computing resources offered by the likes of Amazon AWS, Microsoft Azure, and Google Cloud without the user having to manage the resources directly. Many web-scale service providers, such as Facebook, can also be grouped into this category. </p>
    <p class="normal">Because of the number of servers they need to house, cloud data centers generally demand a much, much higher capacity of power, cooling, and network capacity than any enterprise data center. Even after working on cloud providers’ data centers for many years, every time I visit a cloud provider’s data center, I am still amazed at their scale. Just to give examples of their sheer scale, cloud data centers are so big and power-hungry that they are typically built close to power plants where they can get the cheapest power rate, without losing too much efficiency during the transportation of the power. Their cooling needs are so high that some are forced to be creative about where the data center is built. Facebook, for example, has built its Lulea data center in northern Sweden (just 70 miles south of the Arctic Circle) in part to leverage the cold temperature for cooling. Any search engine can give you some astounding numbers when it <a id="_idIndexMarker028"/>comes to the science of building and managing cloud data centers for the likes of Amazon, Microsoft, Google, and Facebook. The Microsoft data center in West Des Moines, Iowa, for example, consisted of 1.2 million square feet of the facility <a id="_idIndexMarker029"/>on 200 acres of land and required the city to spend an estimated $65 million in public infrastructure upgrades.</p>
    <p class="normal">At the cloud provider scale, the services they need to provide are generally not cost-effective or feasible to be housed in a single server. The services are spread between a fleet of servers, sometimes across many racks, to provide redundancy and flexibility for service owners.</p>
    <p class="normal">The latency and redundancy requirements, as well as the physical spread of servers, put a tremendous amount of pressure on the network. The interconnections required to connect the server fleets equate to an explosive growth of network equipment such as cables, switches, and routers. These requirements translate into the amount of equipment that needs to be racked, provisioned, and managed. A typical network design would be a multi-staged Clos network:</p>
    <figure class="mediaobject"><img alt="" src="../Images/B18403_01_02.png"/></figure>
    <p class="packt_figref">Figure 1.2: Clos network</p>
    <p class="normal">In a way, cloud data centers and the increasing adaptions in other networks are where network automation becomes a necessity for the speed, flexibility, and reliability automation can provide. If we follow the traditional way of managing network devices via a Terminal and command-line interface, the number of engineering hours required will not allow the service to be available in a reasonable amount of time. Not to mention that human <a id="_idIndexMarker030"/>repetition is error-prone, inefficient, and a terrible <a id="_idIndexMarker031"/>waste of engineering talent. To add further complexity, there is often the need to quickly change some of the network configurations to accommodate rapidly changing business needs, such as redesigning a three-tier campus network into a CLOS-based topology.</p>
    <p class="normal">Personally, cloud data center networking is where I started my path of network automation with Python several years ago, and I’ve never looked back since.</p>
    <h3 class="heading-3" id="_idParaDest-21">Edge data centers</h3>
    <p class="normal">If we have sufficient computing power at the data center level, why keep anything else but at these data centers? All the connections from clients worldwide can be routed back to <a id="_idIndexMarker032"/>the data center servers, and we can call it a day, right? The answer, of course, depends on the use case. The most significant limitation in <a id="_idIndexMarker033"/>routing the request and session all the way back from the client to a large data center is the latency introduced in the transport. In other words, significant latency is where the network becomes a bottleneck.</p>
    <p class="normal">Of course, any elementary physics textbook can tell you that the network latency number would never be zero: even as fast as light can travel in a vacuum, it still takes time for physical transportation. In the real world, latency would be much higher than light in a vacuum. Why? Because the network packet must traverse through multiple networks, sometimes through an undersea cable, slow satellite links, 4G or 5G cellular links, or Wi-Fi connections.</p>
    <p class="normal">How can we reduce network latency? One solution would be to reduce the number of networks the end-user requests traverse through. We can try to be as closely connected to the end-user as possible, perhaps meeting the user at the edge where the requests enter our network. We can place enough resources at these edge locations to serve the request. This is especially common for servicing media content such as music and videos.</p>
    <p class="normal">Let’s take a minute and imagine that you are building the next generation of video streaming services. To increase customer satisfaction with smooth streaming, you would want to place the video server as close to the customer as possible, either inside or very near to the customer’s ISP. Also, for redundancy and connection speed, the upstreaming of the video server farm would not just be connected to one or two ISPs, but all the ISPs that we can connect to reduce the hop count, thus reducing the number of devices we need to pass thru. All the connections would have as much bandwidth as needed to decrease peak-hour latency. This need gave rise to the peering exchange’s edge data centers of big ISP and content providers. Even when the number of network devices is not as high as cloud data centers, they too can benefit from network automation in terms of the increased reliability, flexibility, security, and visibility network automation brings.</p>
    <p class="normal">If we extend <a id="_idIndexMarker034"/>the concept of edge nodes and get creative, we can see <a id="_idIndexMarker035"/>that some of the latest technologies, such <a id="_idIndexMarker036"/>as self-driving cars and <strong class="keyWord">Software-Defined Wide-Area-Networks</strong> (<strong class="keyWord">SD-WANs</strong>) are also applications of edge nodes. The self-driving car needs to make split-second decisions based on its sensors. SD-WAN routers need to route packets locally, without the need to consult a central “brain.” These are all concepts of intelligent edge nodes. </p>
    <p class="normal">As with many complex subjects, we can tackle the complexity by dividing the subject into smaller digestible pieces. Networking breaks the complexity by using layers to model the functions of its elements. Over the years, there have been different networking models. We will look at two of the most important models in this book, starting with the OSI model.</p>
    <h1 class="heading-1" id="_idParaDest-22">The OSI model</h1>
    <p class="normal">No network book is complete without first going over the OSI model. The model is a conceptual <a id="_idIndexMarker037"/>model that componentizes the telecommunication functions into different layers. The model defines seven layers, and each layer sits independently on top of another one with defined structures and characteristics.</p>
    <p class="normal">For example, in the network layer, IP is located on top of the different data link layers, such as Ethernet or frame relay. The OSI reference model is a good way to normalize different and diverse technologies into a set of common languages that people can agree on. This greatly reduces the scope for parties working on individual layers and allows them to look at specific tasks in depth without worrying too much about compatibility:</p>
    <figure class="mediaobject"><img alt="Table  Description automatically generated with medium confidence" src="../Images/B18403_01_03.png"/></figure>
    <p class="packt_figref">Figure 1.3: OSI model</p>
    <p class="normal">The OSI <a id="_idIndexMarker038"/>model was initially worked on in <a id="_idIndexMarker039"/>the late 1970s and was later published jointly by the <strong class="keyWord">International Organization for Standardization</strong> (<strong class="keyWord">ISO</strong>), what is <a id="_idIndexMarker040"/>now known as the <strong class="keyWord">Telecommunication Standardization Sector of the International Telecommunication Union</strong> (<strong class="keyWord">ITU-T</strong>). It is widely accepted and commonly referred to when introducing a new topic in telecommunication.</p>
    <p class="normal">Around the same time as the OSI model development, the Internet was taking shape. The reference model the original designer used for the Internet is often referred to as the TCP/IP model. The TCP and the IP were the original protocol suites contained in the design. This is somewhat similar to the OSI model in the sense that they divide end-to-end data communication into abstraction layers.</p>
    <p class="normal">What is different in the TCP/IP model is it combines layers 5 to 7 in the OSI model in the <strong class="keyWord">Application</strong> layer, while the <strong class="keyWord">Physical</strong> and <strong class="keyWord">Data link</strong> layers are combined in the <strong class="keyWord">Link</strong> layer:</p>
    <figure class="mediaobject"><img alt="" src="../Images/B18403_01_04.png"/></figure>
    <p class="packt_figref">Figure 1.4: Internet protocol suite</p>
    <p class="normal">Both the <a id="_idIndexMarker041"/>OSI and TCP/IP models are useful for providing standards for end-to-end data communication. We will refer to either the OSI or the TCP/IP model when needed, such as when we are discussing the web framework in the upcoming chapters. Just like models at the transport layer, there are also reference models that govern communication at the application level. In the modern network, the client-server model is what most applications are based on. We will look at the client-server model in the next section.</p>
    <h1 class="heading-1" id="_idParaDest-23">The client-server model</h1>
    <p class="normal">The client-server reference models demonstrated a standard way for data to communicate <a id="_idIndexMarker042"/>between two nodes. Of course, by now, we all know <a id="_idIndexMarker043"/>that not all nodes are created equal. Even in the earliest <strong class="keyWord">Advanced Research Projects Agency Network</strong> (<strong class="keyWord">ARPANET</strong>) days, there were workstation nodes, and there were server nodes with the purpose of providing content to other workstation nodes. </p>
    <p class="normal">These server nodes typically have higher hardware specifications and are managed more closely by engineers. Since these nodes provide resources and services to others, they are appropriately referred to as servers. Servers typically sit idle, waiting for clients to initiate requests for their resources. This model of distributed resources that are requested by the client request is referred to as the client-server model.</p>
    <p class="normal">Why is this important? If you think about it for a minute, the importance of networking is greatly highlighted by this client-server model. Without the need to transfer services between clients and servers, there is not a lot of need for network interconnections. It is the need to transfer bits and bytes from the client to the server that shines a light on the importance of network engineering. Of course, we are all aware of how the biggest network of them all, the Internet, has been transforming the lives of all of us and is continuing to do so.</p>
    <p class="normal">You might be asking, how can each node determine the time, speed, source, and destination every time they need to talk to each other? This brings us to network protocols.</p>
    <h1 class="heading-1" id="_idParaDest-24">Network protocol suites</h1>
    <p class="normal">In the early days of computer networking, protocols were proprietary and closely controlled <a id="_idIndexMarker044"/>by the company that designed the connection method. If you <a id="_idIndexMarker045"/>were using <strong class="keyWord">Novell’s IPX/SPX</strong> protocol in your hosts, the same hosts would not be able to communicate with Apple’s <strong class="keyWord">AppleTalk</strong> hosts, and vice versa. These proprietary protocol suites generally have analogous layers to the OSI reference model and follow the client-server communication method but are not compatible with each other. The proprietary protocols generally only work in LANs that are closed, without the need to communicate with the outside world. When traffic does need to move beyond the local LAN, typically a protocol translation device, such as a router, is used to translate from one protocol to another. For example, to connect an AppleTalk-based network to the Internet, a router would be used to connect and translate the AppleTalk protocol to an IP-based network. The additional translation is usually not perfect, but since most of the communication happened within the LAN in the early days, it was accepted by the network administrators.</p>
    <p class="normal">However, as the need for inter-network communication rises beyond the LAN, the need for standardizing the network protocol suites becomes greater. The proprietary protocols <a id="_idIndexMarker046"/>eventually gave way to the standardized protocol suites of TCP, UDP, and IP, which greatly enhanced the ability of one network to talk to another. The Internet, the greatest network of them all, relies on these protocols to function properly. In the next few sections, we will look at each of the protocol suites.</p>
    <h2 class="heading-2" id="_idParaDest-25">The transmission control protocol</h2>
    <p class="normal">TCP is one of the main protocols used for the Internet today. If you have opened a web page <a id="_idIndexMarker047"/>or have sent an email, you have come across the TCP protocol. The protocol sits at layer 4 of the OSI model, and it <a id="_idIndexMarker048"/>is responsible for delivering the data segment between two nodes in a reliable and error-checked manner. The TCP consists of a 160-bit header that contains, among other fields, source and destination ports, a sequence number, an acknowledgment number, control flags, and a checksum:</p>
    <figure class="mediaobject"><img alt="Table  Description automatically generated" src="../Images/B18403_01_05.png"/></figure>
    <p class="packt_figref">Figure 1.5: TCP header</p>
    <h3 class="heading-3" id="_idParaDest-26">Functions and characteristics of TCP</h3>
    <p class="normal">TCP uses datagram sockets or ports to establish host-to-host communication. The standard <a id="_idIndexMarker049"/>body, called the <strong class="keyWord">Internet Assigned Numbers Authority</strong> (<strong class="keyWord">IANA</strong>), designates well-known ports to indicate <a id="_idIndexMarker050"/>certain services, such as <code class="inlineCode">port 80</code> for HTTP (web) and <code class="inlineCode">port 25</code> for SMTP (mail). The server in the client-server model typically listens on one of these well-known ports in order to receive communication requests from the client. The TCP connection is managed by the operating system with the socket representing the local endpoint for the connection.</p>
    <p class="normal">The protocol operation consists of a state machine, which the machine needs to keep track of when it is listening for an incoming connection during the communication session, as well as releasing resources once the connection is closed. Each TCP connection goes through a series of states such as <code class="inlineCode">Listen</code>, <code class="inlineCode">SYN-SENT</code>, <code class="inlineCode">SYN-RECEIVED</code>, <code class="inlineCode">ESTABLISHED</code>, <code class="inlineCode">FIN-WAIT</code>, <code class="inlineCode">CLOSE-WAIT</code>, <code class="inlineCode">CLOSING</code>, <code class="inlineCode">LAST-ACK</code>, <code class="inlineCode">TIME-WAIT</code>, and <code class="inlineCode">CLOSED</code>. The different states help in managing the TCP messages. </p>
    <h3 class="heading-3" id="_idParaDest-27">TCP messages and data transfer</h3>
    <p class="normal">The biggest difference between TCP and UDP, which is its close cousin on the same layer, is that <a id="_idIndexMarker051"/>it transmits data in an ordered and reliable fashion. The fact that the TCP operation guarantees delivery is often referred to TCP as a connection-oriented protocol. It does this by first establishing a three-way handshake to synchronize the sequence number between the transmitter and the receiver, <code class="inlineCode">SYN</code>, <code class="inlineCode">SYN-ACK</code>, and <code class="inlineCode">ACK</code>.</p>
    <p class="normal">The acknowledgment is used to keep track of subsequent segments in the conversation. Finally, at the end of the conversation, one side will send a <code class="inlineCode">FIN</code> message, and the other side will <code class="inlineCode">ACK</code> the <code class="inlineCode">FIN</code> message as well as sending a <code class="inlineCode">FIN</code> message of its own. The <code class="inlineCode">FIN</code> initiator will then <code class="inlineCode">ACK</code> the <code class="inlineCode">FIN</code> message that it received.</p>
    <p class="normal">As many of us who have troubleshot a TCP connection can tell you, the operation can get quite complex. One can certainly appreciate that, most of the time, the operation just happens silently in the background.</p>
    <p class="normal">A whole book could be written about the TCP protocol; in fact, many excellent books have been written on the protocol.</p>
    <p class="normal">As this <a id="_idIndexMarker052"/>section is a quick overview, if interested, The <em class="italic">TCP/IP Guide</em> (<a href="http://www.tcpipguide.com"><span class="url">http://www.tcpipguide.com</span></a>) is an excellent free resource that you can use to dig deeper into the subject.</p>
    <h2 class="heading-2" id="_idParaDest-28">The user datagram protocol</h2>
    <p class="normal">The UDP is <a id="_idIndexMarker053"/>also a core member of the protocol suites used. Like TCP, it operates on layer 4 of the OSI model that is responsible for delivering <a id="_idIndexMarker054"/>data segments between the application and the IP layer. Unlike TCP, the header is only 64 bits, which only consists of a source and destination port, length, and checksum. The lightweight header makes it ideal for applications that prefer faster data delivery without setting up the session between two hosts or needing reliable data delivery. Perhaps it’s hard to imagine with today’s fast internet connections, but the lightweight header made a big difference to the speed of transmission in the early days of <code class="inlineCode">X.21</code> and frame relay links.</p>
    <p class="normal">Besides the speed difference, not having to maintain various states, such as TCP, also saves computer resources on the two endpoints:</p>
    <figure class="mediaobject"><img alt="" src="../Images/B18403_01_06.png"/></figure>
    <p class="packt_figref">Figure 1.6: UDP header</p>
    <p class="normal">You might now wonder why UDP was ever used at all in the modern age; given the lack of reliable transmissions, wouldn’t we want all the connections to be reliable and error-free? If you think about multimedia video streaming or Skype calls, those applications benefit from a lighter header when the application just wants to deliver the datagram as quickly as possible. You <a id="_idIndexMarker055"/>can also consider the fast <strong class="keyWord">Domain Name System</strong> (<strong class="keyWord">DNS</strong>) lookup process based on the UDP protocol. The tradeoff between accuracy and latency usually tips to the side of low latency.</p>
    <p class="normal">When the address you type in on the browser is translated into a computer-understandable address, the user will benefit from a lightweight process, since this has to happen before even the first bit of information is delivered to you from your favorite website.</p>
    <p class="normal">Again, this section does not do justice to the topic of UDP, and you are encouraged to explore the topic through various resources if you are interested in learning more about UDP.</p>
    <p class="normal">The Wikipedia <a id="_idIndexMarker056"/>article on UDP, <a href="https://en.wikipedia.org/wiki/User_Datagram_Protocol"><span class="url">https://en.wikipedia.org/wiki/User_Datagram_Protocol</span></a>, is a good starting point to learn more about UDP.</p>
    <h2 class="heading-2" id="_idParaDest-29">The Internet protocol</h2>
    <p class="normal">As network engineers will tell you, we live at the IP layer, which is layer 3 on the OSI model. IP has <a id="_idIndexMarker057"/>the job of addressing and routing between end nodes, among others. The addressing of an IP is probably its most important job. The address <a id="_idIndexMarker058"/>space is divided into two parts: the network and the host portion. The subnet mask is used to indicate which portion in the network address consists of the network and which portion is the host by matching the network portion with a 1 and the host portion with a 0. IPv4 expresses the address in the dotted notation, for example, <code class="inlineCode">192.168.0.1</code>.</p>
    <p class="normal">The subnet mask can either be in a dotted notation (<code class="inlineCode">255.255.255.0</code>) or use a forward slash to express the number of bits that should be considered in the network bit (<code class="inlineCode">255.255.255.0</code> or <code class="inlineCode">/24</code>):</p>
    <figure class="mediaobject"><img alt="Graphical user interface, application, table  Description automatically generated" src="../Images/B18403_01_07.png"/></figure>
    <p class="packt_figref">Figure 1.7: IPv4 header</p>
    <p class="normal">The IPv6 header, the next generation of the IP header of IPv4, has a fixed portion and various extension headers:</p>
    <figure class="mediaobject"><img alt="Graphical user interface, text, application, table  Description automatically generated" src="../Images/B18403_01_08.png"/></figure>
    <p class="packt_figref">Figure 1.8: IPv6 header</p>
    <p class="normal">The IPv6 <strong class="keyWord">Next Header</strong> field in the fixed header section can indicate an extension header to be followed that carries additional information. It can also identify the upper-layer protocol such as TCP and UDP. The extension headers can include routing and fragment information. For example, the extension header can include how the original packet is fragmented <a id="_idIndexMarker059"/>so the destination node can <a id="_idIndexMarker060"/>reassemble the packet accordingly. As much as the protocol designer would like to move from IPv4 to IPv6, the Internet today is still mainly addressed with IPv4, with some of the service provider networks addressed with IPv6 natively.</p>
    <h3 class="heading-3" id="_idParaDest-30">IP network address translation (NAT) and network security</h3>
    <p class="normal">NAT is typically used for translating a range of private IPv4 addresses into publicly routable IPv4 addresses. But it can also mean a translation between IPv4 and IPv6, such as at <a id="_idIndexMarker061"/>a carrier edge when they <a id="_idIndexMarker062"/>use IPv6 inside of the network that needs to <a id="_idIndexMarker063"/>be translated to IPv4 when the packet leaves the network. Sometimes, NAT6 to IPv6 is used as well for security reasons.</p>
    <p class="normal">Security is <a id="_idIndexMarker064"/>a continuous process that integrates all the aspects of networking, including automation and Python. This book aims to use Python to help you manage the network; security will be addressed as part of the following chapters in the book, such as using Python to implement access lists, search for breaches in the log, and so on. We will also look at how we can use Python and other tools to gain visibility in the network, such as a graphic network topology dynamically based on the network device information.</p>
    <h3 class="heading-3" id="_idParaDest-31">IP routing concepts</h3>
    <p class="normal">IP routing is about having the intermediate devices between the two endpoints transmit the packets <a id="_idIndexMarker065"/>between them based on the IP header. For all communication that happens on the Internet, the packet will traverse through various intermediate devices. As mentioned, the intermediate devices consist of routers, switches, optical gears, and various other gears that might not examine beyond the network and transport layer. In a road trip analogy, you might travel in the United States from the city of San Diego in California to the city of Seattle in Washington. The IP source address is analogous to San Diego and the destination IP address can be thought of as Seattle. On your road trip, you will stop by many different intermediate spots, such as Los Angeles, San Francisco, and Portland; these can be thought of as the intermediary routers and switches between the source and destination.</p>
    <p class="normal">Why was this important? In a way, this book is about managing and optimizing these intermediate devices. In the age of mega data centers that span the size of multiple American football fields, the need for efficient, agile, reliable, and cost-effective ways to manage the network becomes a major point of competitive advantage for companies. In future chapters, we will dive into how we can use Python programming to effectively manage a network.</p>
    <p class="normal">Now that we’ve looked at network reference models and protocol suites, we’re ready to dive into the Python language itself. In this chapter, we’ll begin with a broad overview of Python.</p>
    <h1 class="heading-1" id="_idParaDest-32">Python language overview</h1>
    <p class="normal">In a nutshell, this book is about making our network engineering lives easier with Python. But <a id="_idIndexMarker066"/>what is Python and why is it the language of choice of many DevOps engineers? In the words of the Python Foundation Executive Summary (<a href="https://www.python.org/doc/essays/blurb/"><span class="url">https://www.python.org/doc/essays/blurb/</span></a>):</p>
    <blockquote class="packt_quote">
      <p class="quote">”Python is an interpreted, object-oriented, high-level programming language with dynamic semantics. Its high-level, built-in data structure, combined with dynamic typing and dynamic binding, makes it very attractive for Rapid Application Development, as well as for use as a scripting or glue language to connect existing components together. Python’s simple, easy-to-learn syntax emphasizes readability and therefore reduces the cost of program maintenance.”</p>
    </blockquote>
    <p class="normal">If you are somewhat new to programming, the “object-oriented,” and “dynamic semantics” mentioned in the summary probably do not mean much to you. But I think we can all agree that “rapid application development” and “simple, easy-to-learn syntax” sound good. Python, as an interpreted language, means there is little to no compilation process required before execution, so the time needed to write, test, and edit Python programs is significantly reduced. For simple scripts, if your script fails, a print statement could be all you need to troubleshoot the issue.</p>
    <p class="normal">Using the <a id="_idIndexMarker067"/>interpreter also means that Python is easily ported to different operating systems, such as Windows and Linux. A Python program written on one operating system can be used on another with little to no change.</p>
    <p class="normal">The functions, modules, and packages encourage code reuse by breaking a large program into simple reusable pieces. The object-oriented nature of Python takes it one step further for grouping the components into objects. In fact, all Python files are modules that can be reused or imported into another Python program. This makes it easy to share programs between engineers and encourages code reuse. Python also has a <em class="italic">batteries-included</em> mantra, which means for everyday tasks, you need not download any additional packages outside of the Python language itself. To achieve this goal without the code being too bloated, a set of Python modules, a.k.a. standard libraries, are installed when you install the Python interpreter. For common tasks such as regular expressions, mathematical functions, and JSON decoding, all you need is the <em class="italic">import</em> statement, and the interpreter will move those functions into your program. This <em class="italic">batteries-included</em> mantra is what I would consider one of the killer features of the Python language.</p>
    <p class="normal">Lastly, the fact that Python code can start in a relatively small-sized script with a few lines of code and grow into a complete production system is convenient for network engineers. As many of us know, the network typically grows organically without a master plan. A language that can grow with your network is invaluable. You might be surprised to see that a language deemed a scripting language by many is being used for whole production systems of many cutting-edge companies (organizations using Python: <a href="https://wiki.python.org/moin/OrganizationsUsingPython"><span class="url">https://wiki.python.org/moin/OrganizationsUsingPython</span></a>).</p>
    <p class="normal">If you have ever worked in an environment where you must switch between working on different vendor platforms, such as Cisco IOS and Juniper Junos, you know how painful it is to switch between syntaxes and usage when trying to achieve the same task. Since Python is flexible enough for both small and large programs, there is no such dramatic context switching. It is just the same Python code from small to large!</p>
    <p class="normal">For the <a id="_idIndexMarker068"/>rest of the chapter, we will take a high-level tour of the Python language. If you are already familiar with the basics, feel free to quickly scan through it or skip ahead to <em class="chapterRef">Chapter 2</em>. </p>
    <h3 class="heading-3" id="_idParaDest-33">Python versions</h3>
    <p class="normal">As many readers will already be aware, Python has been going through a transition from Python 2 to Python 3 for the last few years. Python 3 was released in 2008, over 10 years ago, <strong class="keyWord">with active development</strong>, with the most recent release of 3.10. Unfortunately, Python 3 is not backward compatible with Python 2.</p>
    <p class="normal">At the time <a id="_idIndexMarker069"/>of writing the fourth edition of this book, in mid-2022, the Python community has all but moved over to Python 3. In fact, Python 2 officially entered end-of-life as of January 1, 2020. The latest Python 2.x release, 2.7, was released over six years ago in mid-2010. Since Python 2 is end-of-life and is no longer maintained by the Python Software Foundation, we should all be using Python 3. In this book, we will be using the latest stable Python 3 release, Python 3.10. Python 3.10 has many exciting features, such as a stable asynchronous I/O that is very helpful in network automation. This book will use Python 3 for the code examples unless otherwise stated. When applicable, we will point out the Python 2 and Python 3 differences. </p>
    <h2 class="heading-2" id="_idParaDest-34">Operating system</h2>
    <p class="normal">As mentioned, Python is cross-platform. Python programs can be run on Windows, Mac, and Linux. In reality, certain care needs to be taken when you need to ensure cross-platform <a id="_idIndexMarker070"/>compatibilities, such as taking care of the subtle differences between backslashes in Windows filenames and the steps to activate Python virtual environments on different operating systems. Since this book is written for DevOps, systems, and network engineers, Linux is the preferred platform for the intended audience, especially in production. </p>
    <p class="normal">The code in this book will be tested on Linux Ubuntu 22.04 LTS machines. As of this writing, Python 3.10.4 is the default version that ships with 22.04, so we do not need to install Python 3 separately. I will also try my best to make sure the code runs the same on the Windows and the macOS platforms.</p>
    <p class="normal">If you are interested in the OS details, they are as follows:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">$ </span><span class="hljs-con-built_in">uname</span> -a
Linux network-dev-4 5.15.0-39-generic #42-Ubuntu SMP Thu Jun 9 23:42:32 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux
<span class="hljs-con-meta">$ </span>lsb_release -a
No LSB modules are available.
Distributor ID:	Ubuntu
Description:	Ubuntu 22.04 LTS
Release:	22.04
Codename:	jammy
</code></pre>
    <h2 class="heading-2" id="_idParaDest-35">Running a Python program</h2>
    <p class="normal">Python programs are executed by an interpreter, which means the code is fed through this interpreter to be executed by the underlying operating system. There are several different <a id="_idIndexMarker071"/>implementations of the interpreter by the Python development community, such as IronPython and Jython. In this book, we will use the most common Python interpreter today, CPython. Whenever we mention Python in this book, we refer to CPython unless otherwise indicated.</p>
    <p class="normal">One way you can use Python is by taking advantage of the interactive prompt. This is useful when you want to quickly test a piece of Python code or concept without writing a whole program.</p>
    <p class="normal">This is typically done by simply typing in the <code class="inlineCode">Python3</code> keyword:</p>
    <pre class="programlisting con"><code class="hljs-con">$ python3
Python 3.10.4 (main, Apr  2 2022, 09:04:19) [GCC 11.2.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-built_in">print</span>(<span class="hljs-con-string">"hello world"</span>)
hello world
</code></pre>
    <p class="normal">The interactive mode is one of Python’s most useful features. In the interactive shell, you can type any valid statement or sequence of statements and immediately get a result back. I typically use the interactive shell to explore a feature or library that I am not familiar with. </p>
    <p class="normal">The interactive mode can also be used for more complex tasks such as experimenting with data structure behaviors, for example, mutable versus immutable data types. Talk about instant gratification!</p>
    <p class="normal">On Windows, if you do not get a Python shell prompt back, you might not have the program in your system search path. The latest Windows Python installation program provides a checkbox for adding Python to your system path; make sure that is checked during installation. Or, you can add the program to the path manually by going to <strong class="screenText">Environment settings</strong>.</p>
    <p class="normal">A more common way to run the Python program, however, is to save your Python file and run it via the interpreter after. This will save you from typing in the same statements repeatedly. Python files are just regular text files typically saved with the <code class="inlineCode">.py</code> extension. In the *Nix world, you can also add the <strong class="keyWord">shebang</strong> (#!) line on top to specify the interpreter <a id="_idIndexMarker072"/>that will be used to run the file. The <code class="inlineCode">#</code> character can be used to specify comments that will not be executed by the interpreter. The file <code class="inlineCode">helloworld.py</code> has the following statements:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"># This is a comment </span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"hello world"</span>)
</code></pre>
    <p class="normal">This can be executed as follows:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">$ </span>python helloworld.py
hello world
</code></pre>
    <p class="normal">Let us take a look at the basic Python building structures, built-in data types. </p>
    <h2 class="heading-2" id="_idParaDest-36">Python built-in types</h2>
    <p class="normal">In computer programming, data types typically refer to a way for the computer program to know <a id="_idIndexMarker073"/>the kind of value a variable can have, such as a word or a number. Python implements dynamic typing, or duck typing, and tries to determine the object’s type as you declare it automatically. Python has several standard types built into the interpreter:</p>
    <ul>
      <li class="bulletList"><strong class="keyWord">Numerics</strong>: <code class="inlineCode">int</code>, <code class="inlineCode">float</code>, complex, and <code class="inlineCode">bool</code> (the subclass of <code class="inlineCode">int</code> with a <code class="inlineCode">True</code> or <code class="inlineCode">False</code> value)</li>
      <li class="bulletList"><strong class="keyWord">Sequences</strong>: <code class="inlineCode">str</code>, <code class="inlineCode">list</code>, <code class="inlineCode">tuple</code>, and <code class="inlineCode">range</code></li>
      <li class="bulletList"><strong class="keyWord">Mappings</strong>: <code class="inlineCode">dict</code></li>
      <li class="bulletList"><strong class="keyWord">Sets</strong>: <code class="inlineCode">set</code> and <code class="inlineCode">frozenset</code></li>
      <li class="bulletList"><strong class="keyWord">None</strong>: The <code class="inlineCode">null</code> object </li>
    </ul>
    <p class="normal">We will briefly examine the different types in Python. If they do not make sense to you at this moment, they might make more sense when we apply them in examples in the section that follows.</p>
    <h3 class="heading-3" id="_idParaDest-37">The None type</h3>
    <p class="normal">The <code class="inlineCode">None</code> type denotes an object with no value. The <code class="inlineCode">None</code> type is returned in functions that do <a id="_idIndexMarker074"/>not explicitly return anything <a id="_idIndexMarker075"/>such as a function but just do some math calculation and exit. The <code class="inlineCode">None</code> type is also used in function arguments to error out if the caller does not pass in an actual value. For example, we can specify in a function ‘if a==None, raise an error’. </p>
    <h3 class="heading-3" id="_idParaDest-38">Numerics</h3>
    <p class="normal">Python numeric <a id="_idIndexMarker076"/>objects are basically numbers. With <a id="_idIndexMarker077"/>the exception of Booleans, the numeric types of <code class="inlineCode">int</code>, <code class="inlineCode">long</code>, <code class="inlineCode">float</code>, and <code class="inlineCode">complex</code> are all signed, meaning they can be positive or negative. A Boolean is a subclass of the integer, which can be one of two values: 1 for True, and 0 for False. In practice, we are almost always testing Booleans with True or False instead of the numerics 1 and 0. The rest of the numeric types are differentiated by how precisely they can represent the number; in Python 3, <code class="inlineCode">int</code> does not have a maximum size while in Python 2 <code class="inlineCode">int</code> indicates whole numbers with a limited range. Floats are numbers using the double-precision representation (64-bit) on the machine.</p>
    <h3 class="heading-3" id="_idParaDest-39">Sequences</h3>
    <p class="normal">Sequences are ordered sets of objects with an index of non-negative integers. Since there are <a id="_idIndexMarker078"/>many different sequence types in <a id="_idIndexMarker079"/>Python (str, lists, tuple, etc), let us use the interactive interpreter to illustrate the different sequence types.</p>
    <p class="normal">Please feel free to type along on your own computer.</p>
    <p class="normal">Sometimes, it surprises people that <code class="inlineCode">string</code> (think of words) is a sequence type. But if you look closely, strings are a series of characters put together. Strings are enclosed by either single, double, or triple quotes.</p>
    <p class="normal">Note in the following examples, the quotes must match. A beginning double quote needs to be matched with an ending double quote. Triple quotes allow the string to span different lines:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">&gt;&gt;&gt;</span> a = <span class="hljs-con-string">"networking is fun"</span>
<span class="hljs-con-meta">&gt;&gt;&gt;</span> b = <span class="hljs-con-string">'DevOps is fun too'</span>
<span class="hljs-con-meta">&gt;&gt;&gt;</span> c = <span class="hljs-con-string">"""what about coding?</span>
<span class="hljs-con-meta">...</span> <span class="hljs-con-string">super fun!"""</span>
<span class="hljs-con-meta">&gt;&gt;&gt;</span>
</code></pre>
    <p class="normal">The other two commonly used sequence types are lists and tuples. Lists are sequences of arbitrary objects. Lists can be created by enclosing objects in square brackets. Just like strings, lists are indexed by non-zero integers that start at zero. </p>
    <p class="normal">The values of a list are retrieved by referencing the index number:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">&gt;&gt;&gt;</span> vendors = [<span class="hljs-con-string">"</span><span class="hljs-con-string">Cisco"</span>, <span class="hljs-con-string">"Arista"</span>, <span class="hljs-con-string">"Juniper"</span>]
<span class="hljs-con-meta">&gt;&gt;&gt;</span> vendors[<span class="hljs-con-number">0</span>]
'Cisco'
<span class="hljs-con-meta">&gt;&gt;&gt;</span> vendors[<span class="hljs-con-number">1</span>]
'Arista'
<span class="hljs-con-meta">&gt;&gt;&gt;</span> vendors[<span class="hljs-con-number">2</span>]
'Juniper'
</code></pre>
    <p class="normal">Tuples <a id="_idIndexMarker080"/>are like lists, created by enclosing values in parentheses. Like lists, the values <a id="_idIndexMarker081"/>in the tuple are retrieved by referencing its index number. Unlike lists, the values cannot be modified after creation:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">&gt;&gt;&gt;</span> datacenters = (<span class="hljs-con-string">"SJC1"</span>, <span class="hljs-con-string">"LAX1"</span>, <span class="hljs-con-string">"SFO1"</span>)
<span class="hljs-con-meta">&gt;&gt;&gt;</span> datacenters[<span class="hljs-con-number">0</span>]
'SJC1'
<span class="hljs-con-meta">&gt;&gt;&gt;</span> datacenters[<span class="hljs-con-number">1</span>]
'LAX1'
<span class="hljs-con-meta">&gt;&gt;&gt;</span> datacenters[<span class="hljs-con-number">2</span>]
'SFO1'
</code></pre>
    <p class="normal">Some operations are common to all sequence types, such as returning an element by index. A sequence can also be sliced for a portion of its elements:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">&gt;&gt;&gt;</span> a
'networking is fun'
<span class="hljs-con-meta">&gt;&gt;&gt;</span> a[<span class="hljs-con-number">1</span>]
'e'
<span class="hljs-con-meta">&gt;&gt;&gt;</span> vendors
['Cisco', 'Arista', 'Juniper']
<span class="hljs-con-meta">&gt;&gt;&gt;</span> vendors[<span class="hljs-con-number">1</span>]
'Arista'
<span class="hljs-con-meta">&gt;&gt;&gt;</span> datacenters
('SJC1', 'LAX1', 'SFO1')
<span class="hljs-con-meta">&gt;&gt;&gt;</span> datacenters[<span class="hljs-con-number">1</span>]
'LAX1'
<span class="hljs-con-meta">&gt;&gt;&gt;</span>
<span class="hljs-con-meta">&gt;&gt;&gt;</span> a[<span class="hljs-con-number">0</span>:<span class="hljs-con-number">2</span>]
'ne'
<span class="hljs-con-meta">&gt;&gt;&gt;</span> vendors[<span class="hljs-con-number">0</span>:<span class="hljs-con-number">2</span>]
['Cisco', 'Arista']
<span class="hljs-con-meta">&gt;&gt;&gt;</span> datacenters[<span class="hljs-con-number">0</span>:<span class="hljs-con-number">2</span>]
('SJC1', 'LAX1')
<span class="hljs-con-meta">&gt;&gt;&gt;</span>
</code></pre>
    <p class="normal">Remember that the index starts at 0. Therefore, the index of 1 is the second element in the sequence.</p>
    <p class="normal">There are <a id="_idIndexMarker082"/>also common functions that can <a id="_idIndexMarker083"/>be applied to sequence types, such as checking the number of elements and finding the minimum and maximum values amongst all the elements:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-built_in">len</span>(a)
17
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-built_in">len</span>(vendors)
3
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-built_in">len</span>(datacenters)
3
<span class="hljs-con-meta">&gt;&gt;&gt;</span>
<span class="hljs-con-meta">&gt;&gt;&gt;</span> b = [<span class="hljs-con-number">1</span>, <span class="hljs-con-number">2</span>, <span class="hljs-con-number">3</span>, <span class="hljs-con-number">4</span>, <span class="hljs-con-number">5</span>]
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-built_in">min</span>(b)
1
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-built_in">max</span>(b)
5
</code></pre>
    <p class="normal">There are various methods that are applicable only to strings. It is worth noting that these methods do not modify the underlying string data itself and always return a new string. In short, mutable objects such as lists and dictionaries can be changed after creation, and immutable objects, for example, strings, cannot. If you want to use the new returned value for other operations, you will need to catch the return value and assign it to a different variable:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">&gt;&gt;&gt;</span> a
'networking is fun'
<span class="hljs-con-meta">&gt;&gt;&gt;</span> a.capitalize()
'Networking is fun'
<span class="hljs-con-meta">&gt;&gt;&gt;</span> a.upper()
'NETWORKING IS FUN'
<span class="hljs-con-meta">&gt;&gt;&gt;</span> a
'networking is fun'
<span class="hljs-con-meta">&gt;&gt;&gt;</span> b = a.upper()
<span class="hljs-con-meta">&gt;&gt;&gt;</span> b
'NETWORKING IS FUN'
<span class="hljs-con-meta">&gt;&gt;&gt;</span> a.split()
['networking', 'is', 'fun']
<span class="hljs-con-meta">&gt;&gt;&gt;</span> a
'networking is fun'
<span class="hljs-con-meta">&gt;&gt;&gt;</span> b = a.split()
<span class="hljs-con-meta">&gt;&gt;&gt;</span> b
['networking', 'is', 'fun']
<span class="hljs-con-meta">&gt;&gt;&gt;</span>
</code></pre>
    <p class="normal">Here are some of the common methods for a list. The Python list data type is a very useful structure <a id="_idIndexMarker084"/>in terms of putting multiple items together and iterating <a id="_idIndexMarker085"/>through them one at a time. For example, we can make a list of data center spine switches and apply the same access list to all of them by iterating through them one by one. Since a list’s value can be modified after creation (unlike tuples), we can also expand and contract the existing list as we move along the program:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">&gt;&gt;&gt;</span> routers = [<span class="hljs-con-string">'r1'</span>, <span class="hljs-con-string">'r2'</span>, <span class="hljs-con-string">'r3'</span>, <span class="hljs-con-string">'r4'</span>, <span class="hljs-con-string">'r5'</span>]
<span class="hljs-con-meta">&gt;&gt;&gt;</span> routers.append(<span class="hljs-con-string">'r6'</span>)
<span class="hljs-con-meta">&gt;&gt;&gt;</span> routers
['r1', 'r2', 'r3', 'r4', 'r5', 'r6']
<span class="hljs-con-meta">&gt;&gt;&gt;</span> routers.insert(<span class="hljs-con-number">2</span>, <span class="hljs-con-string">'r100'</span>)
<span class="hljs-con-meta">&gt;&gt;&gt;</span> routers
['r1', 'r2', 'r100', 'r3', 'r4', 'r5', 'r6']
<span class="hljs-con-meta">&gt;&gt;&gt;</span> routers.pop(<span class="hljs-con-number">1</span>)
'r2'
<span class="hljs-con-meta">&gt;&gt;&gt;</span> routers
['r1', 'r100', 'r3', 'r4', 'r5', 'r6']
</code></pre>
    <p class="normal">Python lists are great for storing data, but it is a bit tricky at times to keep track of data if we need to reference it by location. If that is an issue, we can use a different Python data type. Let’s look at Python mapping type next.</p>
    <h3 class="heading-3" id="_idParaDest-40">Mapping</h3>
    <p class="normal">Python <a id="_idIndexMarker086"/>provides one mapping type, called <a id="_idIndexMarker087"/>the <strong class="keyWord">dictionary</strong>. The <a id="_idIndexMarker088"/>dictionary data type is what I think of as a poor man’s database because it contains objects that can be indexed by keys. This is often referred to as an <em class="italic">associated array or hashing table</em> in other programming languages. If you have used any of the dictionary-like objects in other languages, you will know how powerful this type can be, because you can refer to the object with a human-readable key. </p>
    <p class="normal">This key, instead of just a number, will make much more sense to the poor guy who is trying to maintain and troubleshoot the code. That guy could be you only a few months after you wrote the code, trying to troubleshoot the code at 2 AM. </p>
    <p class="normal">The object <a id="_idIndexMarker089"/>in the dictionary value can also be another data type, such as a list. As we have used square brackets for lists and round braces for tuples, we use curly braces <a id="_idIndexMarker090"/>to create a dictionary. Here is an example of how we can use a dictionary to represent our data center devices:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">&gt;&gt;&gt;</span> datacenter1 = {<span class="hljs-con-string">'spines'</span>: [<span class="hljs-con-string">'r1'</span>, <span class="hljs-con-string">'r2'</span>, <span class="hljs-con-string">'r3'</span>, <span class="hljs-con-string">'r4'</span>]}
<span class="hljs-con-meta">&gt;&gt;&gt;</span> datacenter1[<span class="hljs-con-string">'leafs'</span>] = [<span class="hljs-con-string">'l1'</span>, <span class="hljs-con-string">'l2'</span>, <span class="hljs-con-string">'l3'</span>, <span class="hljs-con-string">'l4'</span>]
<span class="hljs-con-meta">&gt;&gt;&gt;</span> datacenter1
{'leafs': ['l1', 'l2', 'l3', 'l4'], 'spines': ['r1',
'r2', 'r3', 'r4']}
<span class="hljs-con-meta">&gt;&gt;&gt;</span> datacenter1[<span class="hljs-con-string">'spines'</span>]
['r1', 'r2', 'r3', 'r4']
<span class="hljs-con-meta">&gt;&gt;&gt;</span> datacenter1[<span class="hljs-con-string">'leafs'</span>]
['l1', 'l2', 'l3', 'l4']
</code></pre>
    <p class="normal">The Python dictionary is one of my favorite data containers to use in network scripts and I use it all the time. However, there are other data containers that can come in handy in different use cases – a set is one of them.</p>
    <h3 class="heading-3" id="_idParaDest-41">Sets</h3>
    <p class="normal">A <strong class="keyWord">set</strong> is used <a id="_idIndexMarker091"/>to contain an unordered collection of objects. Unlike lists and tuples, sets are unordered and cannot be indexed by numbers. But there is one character <a id="_idIndexMarker092"/>that makes sets stand out as useful: the elements of a set are never duplicated. Imagine you have a list of IPs that you need to put in an access list. The only problem with this list of IPs is that they are full of duplicates.</p>
    <p class="normal">Now, think about how many lines of code you would use to loop through the list of IPs to sort out unique items, one at a time. Now consider this: the built-in set type would allow you to eliminate duplicate entries with just one line of code. Personally, the Python set data type is not used that much in my code, but when I need it, I am always very thankful it exists. Once the set or sets are created, they can be compared with each other using the <code class="inlineCode">union</code>, <code class="inlineCode">intersection</code>, and <code class="inlineCode">differences</code>:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">&gt;&gt;&gt;</span> a = <span class="hljs-con-string">"hello"</span>
# Use the built-in function set() to convert the string to a set
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-built_in">set</span>(a)
{'h', 'l', 'o', 'e'}
<span class="hljs-con-meta">&gt;&gt;&gt;</span> b = <span class="hljs-con-built_in">set</span>([<span class="hljs-con-number">1</span>, <span class="hljs-con-number">1</span>, <span class="hljs-con-number">2</span>, <span class="hljs-con-number">2</span>, <span class="hljs-con-number">3</span>, <span class="hljs-con-number">3</span>, <span class="hljs-con-number">4</span>, <span class="hljs-con-number">4</span>])
<span class="hljs-con-meta">&gt;&gt;&gt;</span> b
{1, 2, 3, 4}
<span class="hljs-con-meta">&gt;&gt;&gt;</span> b.add(<span class="hljs-con-number">5</span>)
<span class="hljs-con-meta">&gt;&gt;&gt;</span> b
{1, 2, 3, 4, 5}
<span class="hljs-con-meta">&gt;&gt;&gt;</span> b.update([<span class="hljs-con-string">'a'</span>, <span class="hljs-con-string">'a'</span>, <span class="hljs-con-string">'</span><span class="hljs-con-string">b'</span>, <span class="hljs-con-string">'b'</span>])
<span class="hljs-con-meta">&gt;&gt;&gt;</span> b
{1, 2, 3, 4, 5, 'b', 'a'}
<span class="hljs-con-meta">&gt;&gt;&gt;</span> a = <span class="hljs-con-built_in">set</span>([<span class="hljs-con-number">1</span>, <span class="hljs-con-number">2</span>, <span class="hljs-con-number">3</span>, <span class="hljs-con-number">4</span>, <span class="hljs-con-number">5</span>])
<span class="hljs-con-meta">&gt;&gt;&gt;</span> b = <span class="hljs-con-built_in">set</span>([<span class="hljs-con-number">4</span>, <span class="hljs-con-number">5</span>, <span class="hljs-con-number">6</span>, <span class="hljs-con-number">7</span>, <span class="hljs-con-number">8</span>])
<span class="hljs-con-meta">&gt;&gt;&gt;</span> a.intersection(b)
{4, 5}
<span class="hljs-con-meta">&gt;&gt;&gt;</span> a.union(b)
{1, 2, 3, 4, 5, 6, 7, 8}
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-number">1</span> *
{1, 2, 3}
</code></pre>
    <p class="normal">Now that <a id="_idIndexMarker093"/>we have looked at different data types, we <a id="_idIndexMarker094"/>will take a tour of Python operators next.</p>
    <h2 class="heading-2" id="_idParaDest-42">Python operators</h2>
    <p class="normal">Python has <a id="_idIndexMarker095"/>some <em class="italic">numeric operators</em> that you would expect from any programming language, such as <code class="inlineCode">+</code>, <code class="inlineCode">-</code>, and so on; note that the truncating division (<code class="inlineCode">//</code>, also <a id="_idIndexMarker096"/>known as <strong class="keyWord">floor division</strong>) truncates the result to an integer and a floating-point but only the integer value is returned. The modulo (<code class="inlineCode">%</code>) operator returns the remainder value in the division:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-number">1</span> + <span class="hljs-con-number">2</span>
3
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-number">2</span> - <span class="hljs-con-number">1</span>
1
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-number">1</span> * <span class="hljs-con-number">5</span>
5
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-number">5</span> / <span class="hljs-con-number">1</span> <span class="hljs-con-comment">#returns float</span>
5.0
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-number">5</span> // <span class="hljs-con-number">2</span> <span class="hljs-con-comment"># // floor division</span>
2
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-number">5</span> % <span class="hljs-con-number">2</span> <span class="hljs-con-comment"># modulo operator</span>
1
</code></pre>
    <p class="normal">There are also <em class="italic">comparison operators</em>. Note the double equals sign is used for comparison and a single equals sign is used for variable assignment:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">&gt;&gt;&gt;</span> a = <span class="hljs-con-number">1</span>
<span class="hljs-con-meta">&gt;&gt;&gt;</span> b = <span class="hljs-con-number">2</span>
<span class="hljs-con-meta">&gt;&gt;&gt;</span> a == b
False
<span class="hljs-con-meta">&gt;&gt;&gt;</span> a &gt; b
False
<span class="hljs-con-meta">&gt;&gt;&gt;</span> a &lt; b
True
<span class="hljs-con-meta">&gt;&gt;&gt;</span> a &lt;= b
True
</code></pre>
    <p class="normal">We can <a id="_idIndexMarker097"/>also use two of the common membership operators to test whether an object is in a sequence type:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">&gt;&gt;&gt;</span> a = <span class="hljs-con-string">'hello world'</span>
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-string">'h'</span> <span class="hljs-con-keyword">in</span> a
True
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-string">'z'</span> <span class="hljs-con-keyword">in</span> a
False
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-string">'h'</span> <span class="hljs-con-keyword">not</span> <span class="hljs-con-keyword">in</span> a
False
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-string">'z'</span> <span class="hljs-con-keyword">not</span> <span class="hljs-con-keyword">in</span> a
True
</code></pre>
    <p class="normal">The Python operators allow us to perform simple operations efficiently. In the next section, we will look at how we can use control flows to repeat these operations.</p>
    <h2 class="heading-2" id="_idParaDest-43">Python control flow tools</h2>
    <p class="normal">The <code class="inlineCode">if</code>, <code class="inlineCode">else</code>, and <code class="inlineCode">elif</code> statements control conditional code execution. Unlike some other <a id="_idIndexMarker098"/>programming languages, Python uses indentation to structure blocks. There can be any number of indentation spaces as long as they align. Common practice is typically to use 2 or 4 spaces. The format of the conditional statement is as follows:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">if</span> expression:
  do something
<span class="hljs-keyword">elif</span> expression:
  do something <span class="hljs-keyword">if</span> the expression meets
<span class="hljs-keyword">elif</span> expression:
  do something <span class="hljs-keyword">if</span> the expression meets
...
<span class="hljs-keyword">else</span>:
  statement
</code></pre>
    <p class="normal">Here is a simple example:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">&gt;&gt;&gt;</span> a = <span class="hljs-con-number">10</span>
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-keyword">if</span> a &gt; <span class="hljs-con-number">1</span>:
<span class="hljs-con-meta">...</span>   <span class="hljs-con-built_in">print</span>(<span class="hljs-con-string">"a is larger than 1"</span>)
<span class="hljs-con-meta">...</span> <span class="hljs-con-keyword">elif</span> a &lt; <span class="hljs-con-number">1</span>:
<span class="hljs-con-meta">...</span>   <span class="hljs-con-built_in">print</span>(<span class="hljs-con-string">"a is smaller than 1"</span>)
<span class="hljs-con-meta">...</span> <span class="hljs-con-keyword">else</span>:
<span class="hljs-con-meta">...</span>   <span class="hljs-con-built_in">print</span>(<span class="hljs-con-string">"a is equal to 1"</span>)
<span class="hljs-con-meta">...</span>
a is larger than 1
<span class="hljs-con-meta">&gt;&gt;&gt;</span>
</code></pre>
    <p class="normal">The <code class="inlineCode">while</code> loop will continue to execute until the condition is <code class="inlineCode">False</code>, so be careful with this one <a id="_idIndexMarker099"/>if you don’t want to continue to execute (and crash your process):</p>
    <pre class="programlisting con"><code class="hljs-con">while expression:
  do something
  
<span class="hljs-con-meta">&gt;&gt;&gt;</span> a = <span class="hljs-con-number">10</span>
<span class="hljs-con-meta">&gt;&gt;&gt;</span> b = <span class="hljs-con-number">1</span>
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-keyword">while</span> b &lt; a:
<span class="hljs-con-meta">...</span>   <span class="hljs-con-built_in">print</span>(b)
<span class="hljs-con-meta">...</span>   b += <span class="hljs-con-number">1</span>
<span class="hljs-con-meta">...</span>
1
2
3
4
5
6
7
8
9
</code></pre>
    <p class="normal">The <code class="inlineCode">for</code> loop works with any object that supports iteration; this means all the built-in sequence types, such as <code class="inlineCode">lists</code>, <code class="inlineCode">tuples</code>, and <code class="inlineCode">strings</code>, can be used in a <code class="inlineCode">for</code> loop. The letter <code class="inlineCode">i</code> in the following for loop is an iterating variable, so you can typically pick something <a id="_idIndexMarker100"/>that makes sense within the context of your code:</p>
    <pre class="programlisting con"><code class="hljs-con">for i in sequence:
  do something
<span class="hljs-con-meta">&gt;&gt;&gt;</span> a = [<span class="hljs-con-number">100</span>, <span class="hljs-con-number">200</span>, <span class="hljs-con-number">300</span>, <span class="hljs-con-number">400</span>]
<span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-keyword">for</span> number <span class="hljs-con-keyword">in</span> a:
<span class="hljs-con-meta">...</span>   <span class="hljs-con-built_in">print</span>(number)
<span class="hljs-con-meta">...</span>
100
200
300
400
</code></pre>
    <p class="normal">Now that we have looked at Python data types, operators, and control flows, we are ready to group them together into reusable code pieces called functions.</p>
    <h2 class="heading-2" id="_idParaDest-44">Python functions</h2>
    <p class="normal">Often times when you find yourself copying and pasting some pieces of code, it is a good sign <a id="_idIndexMarker101"/>you should break it up into self-contained chunks of functions. This practice allows for better modularity, is easier to maintain, and allows for code reuse. Python functions are defined by using the <code class="inlineCode">def</code> keyword with the function name, followed by the function parameters. The body of the function consists of the Python statements that are to be executed. At the end of the function, you can choose to return a value to the function caller. By default, it will return the <code class="inlineCode">None</code> object if you do not specify a return value:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">def</span><span class="hljs-function"> </span><span class="hljs-title">name</span><span class="hljs-params">(parameter1, parameter2)</span>:
  statements
  <span class="hljs-keyword">return</span> value
</code></pre>
    <p class="normal">We will see a lot more examples of functions in the following chapters, but here is a quick example. In the following example, we use positional parameters, so the first element is referred to by the first variable in the function. Another way of referring to parameters is keywords with default values, such as <code class="inlineCode">def subtract(a=10, b=5)</code>:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-keyword">def</span> <span class="hljs-con-title">subtract</span>(<span class="hljs-con-params">a, b</span>):
<span class="hljs-con-meta">...</span>   c = a - b
<span class="hljs-con-meta">...</span>   <span class="hljs-con-keyword">return</span> c
<span class="hljs-con-meta">...</span>
<span class="hljs-con-meta">&gt;&gt;&gt;</span> result = subtract(<span class="hljs-con-number">10</span>, <span class="hljs-con-number">5</span>)
<span class="hljs-con-meta">&gt;&gt;&gt;</span> result
5
</code></pre>
    <p class="normal">Python functions <a id="_idIndexMarker102"/>are great for grouping tasks together. Can we group different functions into a bigger piece of reusable code? Yes, we can do that via Python classes.</p>
    <h2 class="heading-2" id="_idParaDest-45">Python classes</h2>
    <p class="normal">Python <a id="_idIndexMarker103"/>is an <strong class="keyWord">object-oriented programming</strong> (<strong class="keyWord">OOP</strong>) language. The way Python creates objects is with the <code class="inlineCode">class</code> keyword. A Python object is <a id="_idIndexMarker104"/>most commonly a collection of functions (methods), variables, and attributes (properties). Once a class is defined, you can create instances of the class. The class serves as a blueprint for subsequent instances.</p>
    <p class="normal">The topic of OOP is outside the scope of this chapter, but here is a simple example of a <code class="inlineCode">router</code> object definition to illustrate the point:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-keyword">class</span> <span class="hljs-con-title">router</span>(<span class="hljs-con-title">object</span>):
<span class="hljs-con-meta">...</span>   <span class="hljs-con-keyword">def</span> <span class="hljs-con-title">__init__</span>(<span class="hljs-con-params">self, name, interface_number, vendor</span>):
<span class="hljs-con-meta">...</span>     self.name = name
<span class="hljs-con-meta">...</span>     self.interface_number = interface_number
<span class="hljs-con-meta">...</span>     self.vendor = vendor
<span class="hljs-con-meta">...</span>
<span class="hljs-con-meta">&gt;&gt;&gt;</span>
</code></pre>
    <p class="normal">Once defined, we can create as many instances of that class as we’d like:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">&gt;&gt;&gt;</span> r1 = router(<span class="hljs-con-string">"SFO1-R1"</span>, <span class="hljs-con-number">64</span>, <span class="hljs-con-string">"Cisco"</span>)
<span class="hljs-con-meta">&gt;&gt;&gt;</span> r1.name
'SFO1-R1'
<span class="hljs-con-meta">&gt;&gt;&gt;</span> r1.interface_number
64
<span class="hljs-con-meta">&gt;&gt;&gt;</span> r1.vendor
'Cisco'
<span class="hljs-con-meta">&gt;&gt;&gt;</span>
<span class="hljs-con-meta">&gt;&gt;&gt;</span> r2 = router(<span class="hljs-con-string">"LAX-R2"</span>, <span class="hljs-con-number">32</span>, <span class="hljs-con-string">"Juniper"</span>)
<span class="hljs-con-meta">&gt;&gt;&gt;</span> r2.name
'LAX-R2'
<span class="hljs-con-meta">&gt;&gt;&gt;</span> r2.interface_number
32
<span class="hljs-con-meta">&gt;&gt;&gt;</span> r2.vendor
'Juniper'
<span class="hljs-con-meta">&gt;&gt;&gt;</span>
</code></pre>
    <p class="normal">Of course, there <a id="_idIndexMarker105"/>is a lot more to Python objects and OOP. We will look at more examples in future chapters.</p>
    <h2 class="heading-2" id="_idParaDest-46">Python modules and packages</h2>
    <p class="normal">Any Python source file can be used as a module and any functions and classes you define in <a id="_idIndexMarker106"/>that source file can be reused by other Python scripts. To load the code, the file referencing the module needs to use the <code class="inlineCode">import</code> keyword. Three things happen when the file is imported:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">The file creates a new namespace for the objects defined in the source file.</li>
      <li class="numberedList">The caller executes all the code contained in the module.</li>
      <li class="numberedList">The file creates a name within the caller that refers to the module being imported. The name matches the name of the module.</li>
    </ol>
    <p class="normal">Remember the <code class="inlineCode">subtract()</code> function that we defined using the interactive shell? To reuse the function, we can put it into a file named <code class="inlineCode">subtract.py</code>:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">def</span> <span class="hljs-title">subtract</span>(<span class="hljs-params">a, b</span>):
  c = a - b
  <span class="hljs-keyword">return</span> c
</code></pre>
    <p class="normal">In a file within the same directory of <code class="inlineCode">subtract.py</code>, you can start the Python interpreter and import this function:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-keyword">import</span> subtract
<span class="hljs-con-meta">&gt;&gt;&gt;</span> result = subtract.subtract(<span class="hljs-con-number">10</span>, <span class="hljs-con-number">5</span>)
<span class="hljs-con-meta">&gt;&gt;&gt;</span> result
5
</code></pre>
    <p class="normal">This works because, by default, Python will first search for the current directory for the available modules. Remember the standard library that we mentioned a while back? You guessed it, those are just Python files being used as modules.</p>
    <p class="normal">If you are in a different directory, you can manually add a search path location using the <code class="inlineCode">sys</code> module with <code class="inlineCode">sys.path</code>.</p>
    <p class="normal">Can we group multiple modules together in Python? Yes, Python packages allow a collection of modules to be grouped together. This further organizes Python modules for more namespace protection and better reusability. A package is defined by creating a directory with a name you want to use as the namespace, then placing the module source file under that directory.</p>
    <p class="normal">In order <a id="_idIndexMarker107"/>for Python to recognize the directory as a Python package, just create a <code class="inlineCode">__init__.py</code> file in this directory. The <code class="inlineCode">__init__.py</code> file can be an empty file. In the same example as the <code class="inlineCode">subtract.py</code> file, let’s say if you were to create a directory called <code class="inlineCode">math_stuff</code>, we can create a <code class="inlineCode">__init__.py</code> file in the directory:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">$ </span><span class="hljs-con-built_in">mkdir</span> math_stuff
<span class="hljs-con-meta">$ </span><span class="hljs-con-built_in">touch</span> math_stuff/__init__.py
<span class="hljs-con-meta">$ </span>tree
.
 ├── helloworld.py
 └── math_stuff
  ├── __init__.py
  └── subtract.py
1 directory, 3 files
<span class="hljs-con-meta">$</span>
</code></pre>
    <p class="normal">The way to refer to the module is to include the package name using dot notation, for example, <code class="inlineCode">math_stuff.subtract</code>:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">&gt;&gt;&gt;</span> <span class="hljs-con-keyword">from</span> math_stuff.subtract <span class="hljs-con-keyword">import</span> subtract
<span class="hljs-con-meta">&gt;&gt;&gt;</span> result = subtract(<span class="hljs-con-number">10</span>, <span class="hljs-con-number">5</span>)
<span class="hljs-con-meta">&gt;&gt;&gt;</span> result
5
<span class="hljs-con-meta">&gt;&gt;&gt;</span>
</code></pre>
    <p class="normal">As you can see, modules and packages are great ways to organize large code files and make sharing Python code a lot easier.</p>
    <h1 class="heading-1" id="_idParaDest-47">Summary</h1>
    <p class="normal">In this chapter, we covered the OSI model and reviewed network protocol suites, such as TCP, UDP, and IP. They work as the layers that handle the addressing and communication negotiation between any two hosts. The protocols were designed with extensibility in mind and have largely been unchanged from their original design. Considering the explosive growth of the internet, that is quite an accomplishment.</p>
    <p class="normal">We also quickly reviewed the Python language, including built-in types, operators, control flows, functions, classes, modules, and packages. Python is a powerful, production-ready language that is also easy to read. This makes the language an ideal choice when it comes to network automation. Network engineers can leverage Python to start with simple scripts and gradually move on to other advanced features.</p>
    <p class="normal">In <em class="chapterRef">Chapter 2</em>, <em class="italic">Low-Level Network Device Interactions</em>, we will start to look at using Python to programmatically interact with network equipment.</p>
    <h1 class="heading-1">Join our book community</h1>
    <p class="normal">To join our community for this book – where you can share feedback, ask questions to the author, and learn about new releases – follow the QR code below:</p>
    <p class="normal"><a href="https://packt.link/networkautomationcommunity"><span class="url">https://packt.link/networkautomationcommunity</span></a></p>
    <p class="normal"><img alt="" src="../Images/QR_Code2903617220506617062.png"/></p>
  </div>
</body></html>