- en: Chapter 10. Analyzing Huge Amounts of Data with Cloud-based IoT Analytics
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第10章. 使用基于云的物联网分析分析大量数据
- en: 'In this chapter, we will work with Intel IoT Analytics to analyze huge amounts
    of data with this powerful cloud-based service. We will:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将使用英特尔物联网分析，利用这个强大的基于云的服务来分析大量数据。我们将：
- en: Understand the relationship between Internet of Things and Big Data
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解物联网与大数据之间的关系
- en: Learn the Intel IoT Analytics structure
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 学习英特尔物联网分析的结构
- en: Set up devices in Intel IoT Analytics
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在英特尔物联网分析中设置设备
- en: Configure components in Intel IoT Analytics
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在英特尔物联网分析中配置组件
- en: Collect sensor data with Intel IoT Analytics
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用英特尔物联网分析收集传感器数据
- en: Analyze sensor data with Intel IoT Analytics
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用英特尔物联网分析分析传感器数据
- en: Trigger alerts with rules in Intel IoT Analytics
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在英特尔物联网分析中使用规则触发警报
- en: Understanding the relationship between Internet of Things and Big Data
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解物联网与大数据之间的关系
- en: Big Data is watching us. We are generating valuable data each time we perform
    an action without even knowing that. Every time we tap, click, tweet, stop on
    a red light signal, hop on a bus, or perform an action caught by the millions
    of real-time sensors in any city around the world, we are generating valuable
    data. We interact with IoT devices that have sensors, collect data, and publish
    it to the Cloud. In order to analyze and process Big Data, managers, architects,
    developers, and system administrators require many skills that were not necessary
    for applications that worked with smaller data sets.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 大数据在监视我们。每次我们执行一个动作，即使我们不知道，我们都在生成有价值的数据。每次我们轻触、点击、发推文、在红灯信号前停下、乘坐公交车，或者在世界任何城市的数百万个实时传感器捕捉到的任何动作，我们都在生成有价值的数据。我们与具有传感器的物联网设备互动，收集数据并将其发布到云端。为了分析和处理大数据，管理者、架构师、开发人员和系统管理员需要许多在处理较小数据集的应用程序中并不必要的技能。
- en: We have been working with examples that collected data from the real world through
    sensors and published it to the Cloud. We also published messages that include
    data from sensors and commands that have to be processed by code running on an
    IoT device. Sometimes, we are retrieving data from the sensors every second. Thus,
    it is very easy to realize that we generate huge amounts of data, and therefore,
    it is very important to learn many things related to Big Data. Internet of Things
    comprises Big Data.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 我们一直在使用示例，通过传感器从现实世界收集数据并将其发布到云端。我们还发布了包含传感器数据和必须由物联网设备上运行的代码处理的命令的消息。有时，我们每秒从传感器中检索数据。因此，很容易意识到我们正在生成大量数据，因此，学习与大数据相关的大量知识非常重要。物联网包含大数据。
- en: 'Imagine we write Python code that runs on an Intel Galileo Gen 2 board and
    performs the following actions every second:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们编写了在英特尔Galileo Gen 2板上运行的Python代码，并且每秒执行以下操作：
- en: Read the measured ambient temperature from a temperature and humidity sensor
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从温度和湿度传感器中读取测量的环境温度
- en: Read the measured ambient humidity level from a temperature and humidity sensor
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从温度和湿度传感器中读取测量的环境湿度水平
- en: Read the measured volumetric water content in soil from ten soil moisture sensor
    that measure the values in different locations
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从测量值位于不同位置的十个土壤湿度传感器中读取测量的体积水含量
- en: Publish a message with the ambient temperature, ambient humidity, and the ten
    volumetric water contents
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发布包含环境温度、环境湿度和十个体积水含量的消息
- en: The first things that might come to our mind are the number of sensors we have
    to connect to our board. Let's consider that all the sensors are digital sensors
    and we have to connect them to the I²C bus. We can connect the digital temperature
    and humidity sensor plus then ten soil-moisture sensors to the I²C bus as long
    as all the sensors have different I²C bus addresses. We just need to make sure
    that we can configure the I²C bus address for the soil moisture sensors and we
    can assign a different I²C address to each of these sensors.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 可能首先出现在我们脑海中的是我们需要连接到板上的传感器数量。让我们假设所有的传感器都是数字传感器，并且我们必须将它们连接到I²C总线上。只要所有传感器都有不同的I²C总线地址，我们就可以将数字温度和湿度传感器以及十个土壤湿度传感器连接到I²C总线上。我们只需要确保我们可以配置土壤湿度传感器的I²C总线地址，并且我们可以为这些传感器中的每一个分配不同的I²C地址。
- en: 'Catnip Electronics designed a digital soil moisture sensor that provides an
    I²C interface and one of its features is that it allows an I²C address change.
    The default I²C address for this sensor is 0x20 (hexadecimal 20) but we can easily
    change it. We just need to connect each sensor to the I²C bus, write the new address
    to register one and the new address will take effect after we reset the sensor.
    We just need to write a 6 to the sensor''s I²C address to reset the sensor. We
    can follow the same procedure for all the sensors and assign different I²C addresses
    to them. You can read more about the digital soil moisture sensor in the following
    webpage: [http://www.tindie.com/products/miceuz/i2c-soil-moisture-sensor](http://www.tindie.com/products/miceuz/i2c-soil-moisture-sensor).'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: Catnip Electronics设计了一种数字土壤湿度传感器，它提供了一个I²C接口，其一个特性是它允许更改I²C地址。该传感器的默认I²C地址为0x20（十六进制20），但我们可以轻松地更改它。我们只需将每个传感器连接到I²C总线，将新地址写入寄存器，并在重置传感器后，新地址将生效。我们只需将6写入传感器的I²C地址即可重置传感器。我们可以对所有的传感器执行相同的程序，并为它们分配不同的I²C地址。您可以在以下网页上了解更多关于数字土壤湿度传感器的信息：[http://www.tindie.com/products/miceuz/i2c-soil-moisture-sensor](http://www.tindie.com/products/miceuz/i2c-soil-moisture-sensor)。
- en: 'We want to analyze hourly, daily, monthly, quarterly, and yearly data. However,
    we do need to measure every second and not every single day because it is very
    important to analyze how data changes per second. We are going to collect the
    following:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望分析每小时、每天、每月、每季度和每年的数据。然而，我们确实需要每秒测量一次，而不是每天测量一次，因为分析数据每秒的变化非常重要。我们将收集以下数据：
- en: 60 measurements for all the variables per minute
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每分钟对所有变量进行60次测量
- en: 3,600 (60 * 60) measurements per hour
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每小时3,600（60 * 60）次测量
- en: 86,400 (3,600 x 24) measurements per day
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每天进行86,400（3,600 x 24）次测量
- en: 31,536,000 (86,400 * 365) measurements per year (considering that we aren't
    talking about a leap year)
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每年31,536,000（86,400 * 365）次测量（考虑到我们不是在谈论闰年）
- en: 'We won''t have just one IoT device collecting data and publishing it. We will
    have 3,000 IoT devices running the same code and they will generate 94,608,000,000
    (31,356,300 * 3,000), that is, ninety-four billion six hundred eight million,
    measurements per year. In addition, we have other data sources that we have to
    analyze: all the tweets about weather related issues in the locations in which
    the sensors are capturing data. Thus, we have huge volumes of both structured
    and unstructured data that we want to analyze computationally, to reveal patterns
    and associations. We are definitely talking about Big Data practices.'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不会只有一个物联网设备收集数据并发布它。我们将有3,000个物联网设备运行相同的代码，并且它们每年将生成94,608,000,000（31,356,300
    * 3,000），即九百四十亿六千八百万次测量。此外，我们还有其他必须分析的数据来源：所有关于传感器捕获数据位置天气相关问题的推文。因此，我们拥有大量结构化和非结构化数据，我们希望对其进行计算分析，以揭示模式和关联。我们无疑是在谈论大数据实践。
- en: The sample numbers are useful to understand the relationship between Big Data
    and IoT. We won't deploy 3,000 boards for our next example and we won't cover
    all the topics related to IoT analytics and Big Data because it would be out of
    the scope of this book. However, we will work with the cloud-based analytics system
    that works with a component included in the Intel IoT Development Kit image that
    we have been using to boot the board with the Yocto Linux meta distribution in
    [Chapter 2](ch02.html "Chapter 2. Working with Python on Intel Galileo Gen 2"),
    *Working with Python on Intel Galileo Gen 2*.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 样本数量有助于理解大数据和物联网之间的关系。在下一个示例中，我们不会部署3,000块板，也不会涵盖与物联网分析和大数据相关的所有主题，因为这超出了本书的范围。然而，我们将使用基于云的分析系统，该系统与我们在[第2章](ch02.html
    "第2章。在英特尔Galileo Gen 2上使用Python")中使用的英特尔物联网开发套件镜像中的组件一起工作，以使用Yocto Linux元分布启动板。
- en: Understanding the Intel IoT Analytics structure
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解英特尔物联网分析结构
- en: Imagine that we have to collect and analyze sensor data for 3,000 IoT devices,
    that is, 3,000 Intel Galileo Gen 2 boards running the Python code that interacts
    with sensors. We would need to invest in the storage and processing capacity to
    perform IoT analytics with such a huge amount of data. Whenever we have a similar
    requirement, we can take advantage of a cloud-based solution. Intel IoT Analytics
    is one of them and it works very well with the Intel Galileo Gen 2 board and Python.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们需要收集和分析 3,000 个物联网设备的数据，即 3,000 个运行与传感器交互的 Python 代码的 Intel Galileo Gen
    2 板。我们需要投资存储和处理能力来处理如此大量的物联网分析数据。每当我们有类似的需求时，我们可以利用基于云的解决方案。Intel IoT Analytics
    就是其中之一，它与 Intel Galileo Gen 2 板和 Python 非常兼容。
- en: 'Intel IoT Analytics requires us to sign up, create an account with a valid
    e-mail and a password, and click on the activation link of a confirmation e-mail
    before we can publish the sensor data using their free services. We aren''t required
    to enter any credit card or payment information. If you already have an account
    at Intel IoT Analytics, you can skip this step. You can also use your existing
    Facebook, Google+, or GitHub account to log in. The following is the main web
    page for the Intel IoT Analytics site: [https://dashboard.us.enableiot.com](https://dashboard.us.enableiot.com).
    Make sure to review the terms and conditions before you use this cloud-based service
    with sensitive data.'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: Intel IoT Analytics 要求我们注册，使用有效的电子邮件地址和密码创建账户，并在发布传感器数据之前点击确认电子邮件的激活链接。我们不需要输入任何信用卡或支付信息。如果您已经在
    Intel IoT Analytics 上有账户，您可以跳过此步骤。您也可以使用现有的 Facebook、Google+ 或 GitHub 账户登录。以下是
    Intel IoT Analytics 网站的主页：[https://dashboard.us.enableiot.com](https://dashboard.us.enableiot.com)。在使用此基于云的服务处理敏感数据之前，请务必查看条款和条件。
- en: 'Once you create your account and log in for the first time to Intel IoT Analytics,
    the site will display the **Create new Account** page. Enter the desired name
    to identity the account, that is, your analytics project in **Account Name**.
    Enter `Temperature and humidity` for our example and leave the default option
    for **Sensor health report**. Then, click **Create** and the site will display
    the **My Dashboard** page for the recently created account. Each account represents
    a separate workspace with its own set of sensors and related data. The site allows
    us to create more than one account and easily switch between them. The following
    screenshot shows the initial view for the **My Dashboard** page after we created
    a new account:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您在 Intel IoT Analytics 上创建账户并首次登录，网站将显示**创建新账户**页面。输入您希望用于识别账户的名称，即您的分析项目在**账户名称**中。以我们的示例为例，输入`温度和湿度`，并保留**传感器健康报告**的默认选项。然后，点击**创建**，网站将显示为最近创建的账户的**我的仪表板**页面。每个账户代表一个独立的工作空间，拥有自己的传感器和相关数据集。网站允许我们创建多个账户，并轻松地在它们之间切换。以下截图显示了创建新账户后**我的仪表板**页面的初始视图：
- en: '![Understanding the Intel IoT Analytics structure](img/B05042_10_01.jpg)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![理解 Intel IoT Analytics 结构](img/B05042_10_01.jpg)'
- en: The **My Dashboard** page indicates that we still don't have registered devices,
    and therefore, we don't have either transmitting devices or observations. Each
    time we publish data from a registered device to Intel IoT Analytics, we create
    an observation for the device. Thus, the **My Dashboard** page provides the number
    of last observations in a specific period. By default, the page displays the sum
    of the last hour observations for all the registered devices. Keep the web site
    opened in your web browser because we will continue working with it later.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '**我的仪表板**页面表明我们尚未注册任何设备，因此我们也没有传输设备或观测数据。每次我们从注册设备向 Intel IoT Analytics 发布数据时，我们都会为该设备创建一个观测数据。因此，**我的仪表板**页面提供了特定时间段内最后观测数据的数量。默认情况下，页面显示所有注册设备过去一小时的观测数据总和。请保持您的网页浏览器打开，因为我们稍后将继续使用它。'
- en: As a user, we can work with many accounts. Each account can contain many devices,
    has a name and an identifier known as `accountId`. Each device has a globally
    unique identifier known as `deviceId`. So, each Intel Galileo Gen 2 board that
    includes sensors will become one device for the account we have created. In our
    case, we will just work with a single Intel Galileo Gen 2 board. However, remember
    that our goal is to demonstrate how we can work with 3,000 IoT devices handled
    by a single account.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
- en: 'We can think of each device as an endpoint that contains one or more components
    that can provide one of the following in Intel IoT Analytics:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
- en: '**Actuator**: A setting that can be modified on a device. For example, rotate
    the angle of a servo''s shaft or turn on an LED.'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Time series**: A series of values captured from a sensor, that is, a collection
    of observations. For example, a collection of observations with ambient temperature
    values retrieved with a temperature and humidity sensor, expressed in degrees
    Fahrenheit and including timestamps.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'In our case, we need a device to use the following components that will retrieve
    the values from the digital temperature and humidity sensor connected to our board:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
- en: A time series with ambient temperature observations expressed in degrees Fahrenheit
    (ºF)
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A time series with ambient temperature observations expressed in degrees Celsius
    (ºC)
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A time series with ambient humidity level observations expressed in percentage
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: First, we will work with the UI provided by the Intel IoT Analytics web site
    in combination with the `iotkit-admin` utility to set up the device, activate
    it and register the three components included in the previous list. This way,
    we will learn to work with the structure required by Intel IoT Analytics. Then,
    we will write Python code that uses the REST API to create observations for the
    defined components that belong to an activated device included in our recently
    created account.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
- en: We can also the REST API to perform the previously explained setup tasks by
    writing a Python code. In case we have to work with more than a dozen devices,
    we won't want to perform the setup tasks by working with the UI provided by the
    Intel IoT Analytics web site, we would definitely want to write code that automates
    the setup tasks.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: Setting up devices in Intel IoT Analytics
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The image that we have been using to boot our Intel Galileo Gen 2 board includes
    a local agent for Intel IoT Analytics preinstalled. Unless we have made specific
    changes to the Yocto Linux meta distribution to disable specific components, we
    will have the agent running as a daemon on the device. The agent includes the
    `iotkit-admin` command-line utility that allows us to perform specific interactions
    with Intel IoT Analytics. We will use this command-line utility to perform the
    following tasks:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
- en: Test the proper communication with Intel IoT Analytics
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Obtain the device id
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Activate a device
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Register three time series components for the device.
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Send test observations
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发送测试观测值
- en: 'First, we will check whether the `iotkit-admin` command-line utility can establish
    proper communication with Intel IoT Analytics. We just need to run the following
    command in the SSH terminal:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们将检查`iotkit-admin`命令行工具是否能够与英特尔物联网分析服务建立适当的通信。我们只需在SSH终端中运行以下命令：
- en: '[PRE0]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: If the connection is successful, we will see lines similar to the following
    ones. The last line provides information about the build, that is, the version.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 如果连接成功，我们将看到类似以下的一些行。最后一行提供了有关构建的信息，即版本。
- en: '[PRE1]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Now, run the following command in the SSH terminal to obtain the device ID,
    also known as `deviceId`:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，在SSH终端中运行以下命令以获取设备ID，也称为`deviceId`：
- en: '[PRE2]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The previous command will generate an output line such as the following one
    with the device ID. By default, the device ID is equal to the MAC address of the
    network interface card.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 上一条命令将生成类似以下行的输出行，其中包含设备ID。默认情况下，设备ID等于网络接口卡的MAC地址。
- en: '[PRE3]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'You can use the following command to change the device ID to a different one:
    `iotkit-admin set-device-id new-device-id`. You just need to replace `new-device-id`
    with the new device id you want to set up for your device. However, bear in mind
    the new device ID must be a globally unique identifier.'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用以下命令将设备ID更改为不同的一个：`iotkit-admin set-device-id new-device-id`。您只需将`new-device-id`替换为您为设备设置的新的设备ID。然而，请注意，新的设备ID必须是一个全局唯一标识符。
- en: In this case, we will use `kansas-temperature-humidity-01` as our device ID
    for all our samples. You must replace it in all the commands, then include this
    name with the device name you retrieved or the new device ID you assign to the
    device.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，我们将使用`kansas-temperature-humidity-01`作为我们所有示例的设备ID。您必须在所有命令中替换它，然后包括您检索到的设备名称或分配给设备的新的设备ID。
- en: 'The following command in the SSH terminal will rename the device:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在SSH终端中运行的以下命令将重命名设备：
- en: '[PRE4]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The following lines show the output for the previous command:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 以下行显示了上一条命令的输出：
- en: '[PRE5]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Go to the web browser in which you are working with the Intel IoT Analytics
    dashboard, click on the menu icon (a button with three horizontal lines located
    at the upper-left corner). Select **Account** and the site will display the **My
    Account** page with detailed information about the account we previously created.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 前往您正在使用的英特尔物联网分析仪表板的网页浏览器，点击菜单图标（位于左上角的一个有三个横线的按钮）。选择**账户**，网站将显示我们之前创建的账户的**我的账户**页面，其中包含详细的账户信息。
- en: 'The initial view will display the **Details** tab. In case the **Activation
    Code** includes the **(Code Expired)** text, it means that the activation code
    is not valid anymore and it is necessary to click on the refresh icon located
    on the right-hand side of the **Activation Code** textbox (the second icon with
    the two arrows). We have to make sure that the activation code hasn''t expired
    in order to activate the device successfully. The following screenshot gives the
    initial view for the **My Account** page for the **Temperature and humidity**
    account with the activation code expired:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 初始视图将显示**详细信息**选项卡。如果**激活码**包含**（代码已过期）**文本，则意味着激活码已不再有效，并且有必要点击位于**激活码**文本框右侧的刷新图标（第二个带有两个箭头的图标）。我们必须确保激活码尚未过期，以便成功激活设备。以下截图显示了**我的账户**页面的初始视图，对于**温度和湿度**账户，激活码已过期：
- en: '![Setting up devices in Intel IoT Analytics](img/B05042_10_02.jpg)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![在英特尔物联网分析中设置设备](img/B05042_10_02.jpg)'
- en: Once you refresh the activation code by clicking on the refresh button, a countdown
    stopwatch will indicate the time left for the activation code until it expires.
    You will have one hour after you click on the refresh button. Click on the eye
    icon to view the hidden activation code and copy it. We will use `01aCti0e` as
    our sample activation code and you will have to replace it with your activation
    code.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您通过点击刷新按钮刷新激活码，倒计时计时器将指示激活码到期前的剩余时间。您在点击刷新按钮后将有一个小时。点击眼睛图标以查看隐藏的激活码并复制它。我们将使用`01aCti0e`作为我们的示例激活码，您必须将其替换为您自己的激活码。
- en: Now, run the following command in the SSH terminal to activate the device with
    the previously generated activation code. Replace `01aCti0e` with your activation
    code.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，在SSH终端中运行以下命令以使用之前生成的激活码激活设备。将`01aCti0e`替换为您的激活码。
- en: '[PRE6]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The previous command will generate an output similar to the following lines:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 上一条命令将生成类似以下行的输出：
- en: '[PRE7]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Our Intel Galileo Gen 2 board, that is, the device, is now associated with the
    **Temperature and humidity** account that provided us with the activation code
    and the command generated the necessary security credentials, that is, the device
    token.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
- en: 'Go to the web browser in which you are working with the Intel IoT Analytics
    dashboard, click on the menu icon (a button with three horizontal lines located
    at the upper-left corner). Select **Devices** and the site will display the **My
    Devices** page with the list of all the devices that we have activated for the
    current account. The previously activated `kansas-temperature-humidity-01` device
    will appear in the list with **Kansas-temperature-humidity-01-NAME** in its **Name**
    column and **active** in the **Status** column. The following screenshot shows
    the device listed in the **My Devices** page:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
- en: '![Setting up devices in Intel IoT Analytics](img/B05042_10_03.jpg)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
- en: Click on the device **Id** in the previous list (**kansas-temperature-humidity-01**)
    to see and edit the device details. You can add tags and attributes to make it
    easier to filter the devices in the previous list. These possibilities are extremely
    useful when we have to work with more than a dozen devices as they make it easy
    for us to filter the devices in the list.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
- en: Setting up components in Intel IoT Analytics
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Go to the web browser in which you are working with the Intel IoT Analytics
    dashboard, click on the menu icon, select **Account** and the site will display
    the **My Account** page. Then, click on the **Catalog** tab and the site will
    display the components registered in the catalog grouped in the following three
    categories:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
- en: Humidity
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Powerswitch
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Temperature
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Make sure that the **Humidity** components panel is expanded and click on **humidity.v1.0**.
    The site will display the **Component definition** dialog box for the **humidity.v1.0**
    component, that is, the component named **humidity** whose version is `1.0`. The
    following screenshot shows the values for the different fields in the component
    definition:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
- en: '![Setting up components in Intel IoT Analytics](img/B05042_10_04.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
- en: The `humidity` component version `1.0` represents a time series with ambient
    humidity level expressed in percentage. The **Data type** is **Number**, the **Unit
    of measure** is **Percent (%)**, the **Format** is **Float** and the **Display**
    is **Time Series**. We can use this component for our ambient humidity level observations.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
- en: 'Click on **Close**, make sure that the **Temperature** components panel is
    expanded and click on **temperature.v1.0**. The site will display the **Component
    definition** dialog box for the **temperature.v1.0** component, that is, the component
    named **temperature** whose version is `1.0`. The following screenshot shows the
    values for the different fields in the component definition:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: '![Setting up components in Intel IoT Analytics](img/B05042_10_05.jpg)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
- en: The `temperature` component version **1.0** represents a time series with temperature
    expressed in degrees Celsius. The **Data type** is **Number**, the **Unit of measure**
    is **Degrees Celsius**, the **Format** is **Float** and the **Display** is **Time
    Series**. We can use this component for our ambient temperature observations expressed
    in degrees Celsius.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
- en: Click on **Close** and make sure that the **Temperature** components panel is
    expanded. There is no other temperature component, and therefore, we will have
    to create a new component for our ambient temperature observations expressed in
    degrees Fahrenheit.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
- en: 'Click on **Add new Catalog Item** at the bottom of the page and the site will
    display the **Component definition** dialog box with all the fields empty except
    from the version that will have a fixed `1.0` value. We are creating the first
    version of a new catalog item. Enter and select the following values:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
- en: Enter **temperaturef** in **Component Name**
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Select **Sensor** in **Type**
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Select **Number** in **Data type**
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Enter **Degrees Fahrenheit** in **Unit of measure**
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Select **Float** in **Format**
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Select **Time Series** in **Display**
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Finally, click on **Save** and the site will add the new component definition
    at the bottom of the list with the `temperaturef.v.1.0` name.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
- en: 'Now that we are sure that we have all the required component definitions in
    the catalog, we have to register the components that our device will use to create
    observations. We must give a name or alias of each component we register, and
    we must specify the component type and version from the previous catalog. The
    following table summarizes the components that we will register for our device:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
- en: '| Component name or alias | Component type | Description |'
  id: totrans-96
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- |'
  id: totrans-97
  prefs: []
  type: TYPE_TB
- en: '| `temperaturec` | temperature.v1.0 | A time series with ambient temperature
    observations expressed in degrees Celsius (ºC) |'
  id: totrans-98
  prefs: []
  type: TYPE_TB
- en: '| `temperaturef` | temperaturef.v1.0 | A time series with ambient temperature
    observations expressed in degrees Fahrenheit (ºF) |'
  id: totrans-99
  prefs: []
  type: TYPE_TB
- en: '| `humidity` | humidity.v1.0 | A time series with ambient humidity level observations
    expressed in percentage |'
  id: totrans-100
  prefs: []
  type: TYPE_TB
- en: 'We can use the following command to register each component: `iotkit-admin
    register component-name component-type`. We just need to replace `component-name`
    with the name that will identify the component and component-type with the name
    that identifies the component type in the catalog, including the version number.'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
- en: 'The following command in the SSH terminal will register the `temperaturec`
    component from the previous table:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: The following lines show the output for the previous command.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: The last line provides us with the component id, that is, the value after `cid=`
    and before the next comma (`,`). In the previous output, the component id is `c37cb57d-002c-4a66-866e-ce66bc3b2340`.
    We have to save each component id because we will need it later to write code
    that creates observations using the REST API.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
- en: 'The following command in the SSH terminal will register the `temperaturef`
    component from the previous table:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The following lines show the output for the previous command:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: As happened with the other command, the last line provides us with the component
    id, that is, the value after `cid=` and before the next comma (`,`). In the previous
    output, the component id is `0f3b3aae-ce40-4fb4-a939-e7c705915f0c`. We have to
    save this one for its later usage in our code.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
- en: 'The following command in the SSH terminal will register the `humidity` component
    from the previous table:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: The following lines show the output for the previous command and the last line
    includes the component id.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Tip
  id: totrans-116
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The component ids will be different from the values indicated in the previous
    outputs and you will have to take note of each of the component ids that have
    been generated with the previous commands.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
- en: 'Go to the web browser in which you are working with the Intel IoT Analytics
    dashboard, click on the menu icon. Select **Devices** and the site will display
    the **My Devices** page. Click on the device **Id** in the previous list (**kansas-temperature-humidity-01**)
    to see and edit the device details. Click on **+Components** to expand the components
    registered for the device and you will see a list with the following three components:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
- en: '**temperaturec**'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**temperaturef**'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**humidity**'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The following screenshot shows the three components registered for the selected
    device:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
- en: '![Setting up components in Intel IoT Analytics](img/B05042_10_06.jpg)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
- en: We can click on any of the three components and check the details for the registered
    component. In case we lose the component id, we can retrieve it by clicking on
    the component and the **Component Definition** dialog box will display the component
    id just below the component type description. The following screenshot shows the
    component definition for the `temperaturef` component. The component id **0f3b3aae-ce40-4fb4-a939-e7c705915f0c**
    appears below the **Custom Component** label on the right-hand side.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
- en: '![Setting up components in Intel IoT Analytics](img/B05042_10_07.jpg)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
- en: 'Unluckily, there is no way to retrieve the device token that was generated
    when we activated the device with the features included in the site. We need the
    device token to create observations for the registered components. The agent for
    Intel IoT Analytics saves the device token with other configuration values for
    the device in the `device.json` file and its default path is `/usr/lib/node_modules/iotkit-agent/data/device.json`.
    As the file name suggests, the file contains JSON code. We just need to run the
    following command in the SSH terminal to display the text content from the previous
    file and allow us to retrieve the device token:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: The following lines show the output for the previous command that includes all
    the configurations we have made so far for our device. The line that defines the
    value for the device token is highlighted.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: The previous lines also show the component id for each of the components that
    we have registered. Thus, we have all the necessary configuration values that
    we will have to use in our code in just one place. In this case, the device token
    is the following, that is, the string value for the `"device_token"` key. However,
    the value that you will retrieve will be different.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Collecting sensor data with Intel IoT Analytics
  id: totrans-132
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We will take the code we wrote in [Chapter 8](ch08.html "Chapter 8. Displaying
    Information and Performing Actions"), *Displaying Information and Performing Actions*,
    when we read temperature and humidity values from the sensor, we printed the values
    in an OLED matrix and rotated a servo's shaft to display the measured temperature
    expressed in degrees Fahrenheit with the shaft. The code file for the sample was
    `iot_python_chapter_08_03.py`. We will use this code as a baseline to add new
    features that will allow us to create observations for the three components we
    registered for our activated device.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
- en: In [Chapter 2](ch02.html "Chapter 2. Working with Python on Intel Galileo Gen
    2"), *Working with Python on Intel Galileo Gen 2*, we made sure that the `pip`
    installer was available to install additional Python 2.7.3 packages in the Yocto
    Linux that we are running on the board. Now, we will use `pip` installer to make
    sure that the `requests` package is installed. This package is a very popular
    HTTP library for Python that allows us to easily build and send HTTP requests
    with an extremely easy to understand syntax.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
- en: If you have worked with examples from the previous chapter, you will have this
    package already installed. However, in case you just jumped into this chapter,
    it might be necessary to install it. We just need to run the following command
    in the SSH terminal to install the package. Notice that it can take a few minutes
    to complete the installation.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: In case you see the following output, it means that the requests package was
    already installed and you can move on to the next step.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'We will create an `IntelIotAnalytics` class to represent the interface to Intel
    IoT Analytics and make it easy for us to publish observations for the three components.
    However, before we code the class, we have to make sure that we can replace the
    content for many class attributes that define important values related to our
    account, the components, and the device. You will have to replace the strings
    specified for the following class attributes with the appropriate values:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
- en: '`account_name`: The value of the **Account name** field in the **My Account**
    page. In our example, we used `"Temperature and humidity"` for our account name.'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`account_id`: The value of the **Account ID** field in the **My Account** page.
    In our example, we use `"22612154-0f71-4f64-a68e-e116771115d5"` for our account
    id. We can also retrieve the account id value by reading the string value specified
    for the `"account_id"` key in the `device.json` file.'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`device_id`: The value of the **ID** field in the **Add / Edit a Device** page
    that the site shows when we click on a device name in the list displayed in the
    **My Devices** page. In our example, we use `"kansas-temperature-humidity-01"`
    for our device id. We can also retrieve the device_id by running the following
    command in an SSH terminal: `iotkit-admin device-id` or by reading the string
    value specified for the `"device_id"` key in the `device.json` file.'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`device_token`: The value of the device token that was generated when we activated
    the device. As previously explained, we can retrieve the device token by reading
    the string value specified for the `"device_token"` key in the `device.json` file.'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`component_id_temperature_fahrenheit`: The value of the component id that was
    generated when we registered the `temperaturef` component. The component id is
    displayed below the component type in the **Component Definition** dialog box.
    In our example, we use `"0f3b3aae-ce40-4fb4-a939-e7c705915f0c"` for this value.
    We can also retrieve the component id value by reading the string value specified
    for the `"cid"` key in the same block that declares the `"name": "temperaturef"`
    key-value pair, in the `device.json` file.'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`component_id_temperature_celsius`: The value of the component id that was
    generated when we registered the `temperaturec` component. In our example, we
    use `"c37cb57d-002c-4a66-866e-ce66bc3b2340"` for this value.'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`component_id_humidity_level_percentage`: The value of the component id that
    was generated when we registered the `humidity` component. In our example, we
    use `"71aba984-c485-4ced-bf19-c0f32649bcee"` for this value.'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The code file for the sample is `iot_python_chapter_10_01.py`. Remember that
    we use the code file `iot_python_chapter_08_03.py` as a baseline, and therefore,
    we will add the `IntelIotAnalytics` class to the existing code in this file and
    we will create a new Python file. The following lines show the code for the `IntelIotAnalytics`
    class that allows us to publish observations for the `temperaturef`, `temperaturec`
    and `humidity` components through the REST API.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'The `IntelIotAnalytics` class declares many class attributes that we explained
    before and that you need to replace with your own string values: `account_name`,
    `account_id`, `device_token`, `device_id`, `component_id_temperature_fahrenheit`,
    `component_id_temperature_celsius` and `component_id_humidity_level_percentage`.
    The `base_url` class attribute defines the base URL to access the REST API: `https://dashboard.us.enableiot.com/v1/api`.
    We will use this value in combination with a `data` path and the `device_id` class
    attribute to build the URL to which we will send the HTTP request to publish an
    observation.'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
- en: The class declares the `publish_observation` method that receives the temperature
    expressed in degrees Fahrenheit, the temperature expressed in degrees Celsius
    and the humidity level percentage in the `temperature_fahrenheit`, `temperature_celsius`
    and `humidity_level` arguments. The method builds the URL to which we will send
    the HTTP request to create an observation for the device and the three components.
    The URL is composed of the `base_url` class attribute, `/data/` and the `device_id`
    class attribute. As happens with many REST APIs, the `base_url` class attribute
    specifies the version number for the API. This way, we make sure that we are always
    working with a specific version and that our requests are compatible with this
    version. The code saves the value for the build URL in the `url` local variable.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
- en: 'Then, the code saves the board''s current time in seconds multiplied by 1000
    in the `now` local variable. The code creates a `body` dictionary that represents
    the request''s body with the following key-value pairs:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
- en: '`"on"`: The value stored in the `now` local variable, that is, the board''s
    current time. It is the time for the observations.'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`"accountId"`: The value stored in the `accountId` class attribute, that is,
    the Intel IoT Analytics account to which we will publish the observation.'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`"data"`: An empty array that we will fill later with one observation for each
    component.'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Then, the code creates three dictionaries with the following key-value pairs
    that represent an observation for a specific component:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
- en: '`"componentId"`: The value stored in the class attribute that specifies the
    component id to which we will publish the observation.'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`"on"`: The value stored in the `now` local variable, that is, the board''s
    current time. It is the time for the observation. We use the same variable for
    all the observations, and therefore, they are registered with the same time.'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`"value"`: The string representation of the value received as an argument in
    the method.'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Then, the code calls the `append` method to add the three dictionaries to the
    `data` key in the `body` dictionary. This way, the `data` key will have an array
    with three dictionaries as its value. The code calls the `json.dumps` function
    to serialize the `body` dictionary to a JSON formatted string and saves it in
    the `data` local variable.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
- en: 'The next line creates a `headers` dictionary with the following key-value pairs
    that represent the headers for the HTTP request:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
- en: '`"Authorization"`: The authorization string composed of the concatenation of
    `"Bearer"` and the device token saved in the `device_token` class attribute'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`"content-type"`: Declares the content type as JSON: `"application/json"`'
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: At this point, the code has built the headers and the body for the HTTP request
    that will publish the observations to Intel IoT Analytics. The next line calls
    the `requests.post` function to send an HTTP POST request to the URL specified
    by the `url` local variable, with the `data` dictionary as the JSON body data
    and the `headers` dictionary as the headers.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
- en: The `requests.post` method returns a response saved in the `response` local
    variable and the code evaluates whether the code attribute for response is not
    equal to 201\. In case the code is different than `201`, it means that the observations
    weren't successfully published, that is, something went wrong. In this case, the
    code prints the values for the `status_code` and `text` attributes for the response
    to the console output to allow us to understand what went wrong. In case we use
    a wrong device token or a wrong id for the account, the device or the components,
    we will receive errors.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
- en: Now, we will use the previously coded `IntelIoTAnalytics` class to create a
    new version of the `__main__` method that publishes observations to Intel IoT
    Analytics every 5 seconds. The following lines show the new version of the `__main__`
    method. The code file for the sample is `iot_python_chapter_10_01.py`.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: The highlighted lines show the code that creates an instance of the previously
    created `IntelIoTAnalytics` class and saves its reference in the `intel_iot_analytics`
    local variable. Then, the code within the loop that runs every 5 seconds calls
    the `publish_observation` method with the temperature and humidity values retrieved
    from the temperature and humidity sensor as arguments.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
- en: 'The following line will start the example:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  id: totrans-169
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: After you run the example, turn on an air conditioner or a heating system, to
    generate a change in the ambient temperature and humidity. This way, we will notice
    changes in the data that is being published every 5 seconds. Keep the code running
    while we explore different features included in Intel IoT Analytics.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
- en: 'Go to the web browser in which you are working with the Intel IoT Analytics
    dashboard, click on the menu icon and select **Dashboard**. The site will display
    the **My Dashboard** page that will indicate you have one active device and it
    will update the number of observations published in the last hour as it receives
    observations from the board. The following pictures show the dashboard with the
    active device and the counter that includes `945` observations published in the
    last hour:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
- en: '![Collecting sensor data with Intel IoT Analytics](img/B05042_10_08.jpg)'
  id: totrans-172
  prefs: []
  type: TYPE_IMG
- en: Keep the browser open with the dashboard view and you will notice that observations
    value increases in the last hour, as the code continues running on the board.
    You can click on the configuration icon located at the upper-right corner of the
    panel that displays the number of observations and a context-menu will allow you
    to configure the observations period you want to see in this panel. For example,
    you can change from **Last hour** to **Last week** to display the number of observations
    the device has registered during the last week.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
- en: Analyzing sensor data with Intel IoT Analytics
  id: totrans-174
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Intel IoT Analytics allows us to generate charts with the data generated for
    each component that has observations for a specific device. First, we have to
    select the device and then we have to choose one or more component to generate
    the chart with historic time series or the time series that are being generated
    with the code running on the board, that is, live data for the component.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
- en: Go to the web browser in which you are working with the Intel IoT Analytics
    dashboard, click on the menu icon and select **Charts**. The site will display
    the **My Charts** page that will allow you to search for devices using many search
    criteria, such as the device name, the associated tags, and its properties.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
- en: In this case, we just have one activated device, and therefore, we can select
    the device from the list of devices that the site shows us below the **Select
    Device** section. This section displays the first characters for the device name
    at the right-hand side of a checkbox and the number of components that have been
    registered for this device at the right-hand side of the text. The following picture
    shows the **Select Device** section with **kansas-temp…** representing the `kansas-temperature-humidity-01`
    device. If you hover the mouse over the checkbox or tap on the text, the site
    will display a popup with the complete name for the device and the types of the
    registered components. The following screenshot show the popup with this information
    displayed for the **kansas-temp…** checkbox.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
- en: '![Analyzing sensor data with Intel IoT Analytics](img/B05042_10_09.jpg)'
  id: totrans-178
  prefs: []
  type: TYPE_IMG
- en: Check the **kansas-temp…** checkbox and the site will display the three registered
    components for the selected device. In this case, the site displays the component
    names (`temperaturec`, `temperaturef`, and `humidity`) while in the previously
    explained popup the site showed the component types (`temperature.v1.0`, `temperaturef.v1.0`,
    and `humidity.v1.0`).
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
- en: Check the `temperaturef` checkbox and the site will display a chart with the
    ambient temperature measured in degrees Fahrenheit for the past hour. By default,
    the chart uses a line and generates a graph with the time series values registered
    in the past hour. By default, the refresh rate for the graph is set to 30 seconds,
    and therefore, the chart will be updated every 30 seconds and will display all
    the new observations that were published by the board through the REST API in
    this period.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
- en: '![Analyzing sensor data with Intel IoT Analytics](img/B05042_10_10.jpg)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
- en: We can use the different buttons at the top of the chart to change the chart
    type and to select the time range we want to view displayed in the graph. We can
    also change the refresh rate to as low as five seconds or as high as 60 seconds.
    If we save the graph as favorite, the site will display it as part of the dashboard
    in **My Dashboard**.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
- en: Click on the **Raw data** button (A bullets icon) located at the right-hand
    side of the **Chart** button (A picture icon with mountains). The site will display
    a list with the raw data that has been sent to build the time series, that is,
    all the observations received for the selected component. The following screenshot
    shows an example of the first page of the raw data view for the `temperaturef`
    component in the past hour.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
- en: '![Analyzing sensor data with Intel IoT Analytics](img/B05042_10_11.jpg)'
  id: totrans-184
  prefs: []
  type: TYPE_IMG
- en: 'In this example, it is extremely useful to generate a chart with the temperature
    and the humidity level. Go back to the Chart view by clicking on the **Chart**
    button (A picture icon with mountains) and check the checkbox for humidity. This
    way, the site will generate a graph that combines the temperature expressed in
    degrees Fahrenheit and the humidity level expressed in percentage. The following
    screenshot shows the generated chart when **temperaturef** and **humidity** are
    both checked:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
- en: '![Analyzing sensor data with Intel IoT Analytics](img/B05042_10_12.jpg)'
  id: totrans-186
  prefs: []
  type: TYPE_IMG
- en: Triggering alerts with rules in Intel IoT Analytics
  id: totrans-187
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Intel IoT Analytics allows us to define the rules that can trigger any of the
    following notification types:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
- en: Email
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: HTTP Endpoint
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Actuation
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Go to the web browser in which you are working with the Intel IoT Analytics
    dashboard, click on the menu icon and select **Rules**. The site will display
    the **My Rules** page that will allow you to define rules for the activated devices.
    In this case, we will define a rule that will send us an e-mail when the humidity
    level is lower than 10%.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
- en: Click on **Add a rule** and the site will display us a form that will allow
    us to enter the details for the new rule. Enter `Very low humidity level` in **Rule
    Name**, select `Low` in **Priority** and `Email` in **Notifications type**. Select
    the e-mail address to which you want to receive the notifications in the dropdown
    in the **Notifications To** panel.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
- en: Click **Next** and the site will ask us to select the devices to which the new
    rule has to be applied. In this case, we just have one activated device, and therefore,
    we can select the device from the list of devices that the site shows us below
    the **Select Device** section. As seen in previous device selection pages, this
    section displays the first characters for the device name at the right-hand side
    of a checkbox and the number of components that have been registered for this
    device at the right-hand side of the text. Check the **kansas-temp…** checkbox
    and the name will appear in the **Selected Devices** list.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
- en: Click **Next** and the site will ask us to specify the conditions for the new
    rule. Leave the **Enable Automatic Reset** checkbox unchecked because we want
    the rule to become inactive after every alert until it is acknowledged. This way,
    after we receive an alert, we will only receive additional alerts when we acknowledge
    the first alert that was generated.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
- en: 'Select `humidity (Number)` in **Monitored Measure** and `Basic Condition` in
    **Trigger When**. Then, select `<` in the additional dropdown that appears and
    enter `10` in the **Enter a value** textbox. This way, we are creating a rule
    that will trigger when the value in a humidity observation is lower than 10 (`humidity
    < 10`). The following screenshot shows the defined condition:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
- en: '![Triggering alerts with rules in Intel IoT Analytics](img/B05042_10_13.jpg)'
  id: totrans-197
  prefs: []
  type: TYPE_IMG
- en: 'Click **Done** and the rule will be added to the list shown in **My Rules**.
    The following screenshot shows the rule definition included in this list after
    we define it:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
- en: '![Triggering alerts with rules in Intel IoT Analytics](img/B05042_10_14.jpg)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
- en: 'After the humidity level is lower than 10%, an alert will be triggered and
    we will see a number 1 in the alerts icon (the bell). After we click on the icon,
    the site will display all the unread alerts we have. The following screenshot
    shows the My Dashboard page with one unread alert:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
- en: '![Triggering alerts with rules in Intel IoT Analytics](img/B05042_10_15.jpg)'
  id: totrans-201
  prefs: []
  type: TYPE_IMG
- en: 'If we click on the alert, the site will display the details of the situation
    that triggered the alert. We can also go **Alerts** in the menu and see the list
    of the received alerts. The following screenshot show the alert included in the
    list of received alerts:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
- en: '![Triggering alerts with rules in Intel IoT Analytics](img/B05042_10_16.jpg)'
  id: totrans-203
  prefs: []
  type: TYPE_IMG
- en: 'If we click on the **Alert** number, the site will display the details for
    the alert including the condition defined in the rule that triggered the alert
    and the measured value. In this case, the measured value was `7.99`. It is possible
    to add comments to an alert. The following screenshot shows the details for the
    alert:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
- en: '![Triggering alerts with rules in Intel IoT Analytics](img/B05042_10_17.jpg)'
  id: totrans-205
  prefs: []
  type: TYPE_IMG
- en: 'In addition, we receive an e-mail that includes the following text:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'In this case, we defined a very simple condition in our rule. However, we can
    define a more complex condition that can include any of the following conditions:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
- en: Time-based condition
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Statistics based condition
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Single-sensor change detection
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Multisensory change detection
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: We can play with the different options to trigger alerts for a large number
    of devices with multiple sensors and huge amounts of data. One of the most interesting
    features of Intel IoT Analytics is that we can easily work with huge amounts of
    data with the charts, the rules and the alerts.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
- en: Test your knowledge
  id: totrans-214
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The components for each device in Intel IoT Analytics can be either:'
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Actuator or time series.
  id: totrans-216
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: Account, actuator or time series.
  id: totrans-217
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: Proxy, account, actuator or time series.
  id: totrans-218
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Each time we publish data from a registered device to Intel IoT Analytics,
    we create:'
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: An actuator.
  id: totrans-220
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: An account.
  id: totrans-221
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: An observation.
  id: totrans-222
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'A time series is:'
  id: totrans-223
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: A series of actions performed by an actuator, that is, a collection of actions.
  id: totrans-224
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: A series of values captured from a sensor, that is, a collection of observations.
  id: totrans-225
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: A series of triggered alarms, that is, a collection of alarms.
  id: totrans-226
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'We can use the following command-line utility to activate our board as a device
    in an Intel IoT Analytics account:'
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: iotkit-admin
  id: totrans-228
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: iotkit-configure
  id: totrans-229
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: iotkit-setup
  id: totrans-230
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In order to send observations from a device with the REST API provided by Intel
    IoT Analytics, we need the following token:'
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The sensor token.
  id: totrans-232
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: The observation token.
  id: totrans-233
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: The device token.
  id: totrans-234
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: Summary
  id: totrans-235
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we understood the close relationship between Internet of Things
    and Big Data. We worked with a cloud-based service that allowed us to organize
    huge amounts of data collected by multiple devices and their sensors. We took
    advantage of the `requests` package to write a few lines of Python code that could
    interact with the Intel IoT Analytics REST API.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
- en: We used the Intel IoT Analytics web site to set up a device and its components.
    Then, we made changes to one of our examples to collect data from the sensors
    and publish observations to Intel IoT Analytics. Then, we learned about the different
    options that Intel IoT Analytics offers us to analyze huge amounts of data. Finally,
    we defined rules that triggered alerts. Now that we are able to take advantage
    of Intel IoT Analytics to analyze huge amounts of data, we are ready to deploy
    thousands of IoT devices that collect data from multiple sensors.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
- en: We learned to use Python and the Intel Galileo Gen 2 board to create low cost
    devices that collect huge amounts of data, interact with each other and take advantage
    of cloud-services and cloud-based storage. We can develop IoT prototypes from
    the hardware selection to all the necessary stacks with Python 2.7.3, its libraries
    and tools. In case we need a smaller board or a different alternative, we can
    switch to any of the compatible Intel Edison boards, and therefore, we can switch
    to this board in case we need to.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
- en: We are able to leverage our existing Python knowledge to capture data from the
    real world, interact with physical objects, develop APIs and use different IoT
    protocols. We learned to use specific libraries to work with low-level hardware,
    sensors, actuators, buses, and displays. We are ready to become makers and to
    be part of the exciting IoT world.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
- en: We can start working on fascinating projects that can transform everyday objects
    into smart devices with sensors and actuators. We are ready to start building
    ecosystems composed of thousands of IoT devices, with Python as our main programming
    language.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
- en: Appendix A. Exercise Answers
  id: totrans-241
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Chapter 1, Understanding and Setting up the Base IoT Hardware
  id: totrans-242
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '| Q1 | 2 |'
  id: totrans-243
  prefs: []
  type: TYPE_TB
- en: '| Q2 | 1 |'
  id: totrans-244
  prefs: []
  type: TYPE_TB
- en: '| Q3 | 2 |'
  id: totrans-245
  prefs: []
  type: TYPE_TB
- en: '| Q4 | 3 |'
  id: totrans-246
  prefs: []
  type: TYPE_TB
- en: '| Q5 | 1 |'
  id: totrans-247
  prefs: []
  type: TYPE_TB
- en: Chapter 2, Working with Python on Intel Galileo Gen 2
  id: totrans-248
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '| Q1 | 2 |'
  id: totrans-249
  prefs: []
  type: TYPE_TB
- en: '| Q2 | 1 |'
  id: totrans-250
  prefs: []
  type: TYPE_TB
- en: '| Q3 | 2 |'
  id: totrans-251
  prefs: []
  type: TYPE_TB
- en: '| Q4 | 3 |'
  id: totrans-252
  prefs: []
  type: TYPE_TB
- en: '| Q5 | 1 |'
  id: totrans-253
  prefs: []
  type: TYPE_TB
- en: Chapter 3, Interacting with Digital Outputs with Python
  id: totrans-254
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '| Q1 | 3 |'
  id: totrans-255
  prefs: []
  type: TYPE_TB
- en: '| Q2 | 1 |'
  id: totrans-256
  prefs: []
  type: TYPE_TB
- en: '| Q3 | 1 |'
  id: totrans-257
  prefs: []
  type: TYPE_TB
- en: '| Q4 | 2 |'
  id: totrans-258
  prefs: []
  type: TYPE_TB
- en: '| Q5 | 2 |'
  id: totrans-259
  prefs: []
  type: TYPE_TB
- en: Chapter 4, Working with a RESTful API and Pulse Width Modulation
  id: totrans-260
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '| Q1 | 3 |'
  id: totrans-261
  prefs: []
  type: TYPE_TB
- en: '| Q2 | 3 |'
  id: totrans-262
  prefs: []
  type: TYPE_TB
- en: '| Q3 | 2 |'
  id: totrans-263
  prefs: []
  type: TYPE_TB
- en: '| Q4 | 1 |'
  id: totrans-264
  prefs: []
  type: TYPE_TB
- en: '| Q5 | 2 |'
  id: totrans-265
  prefs: []
  type: TYPE_TB
- en: Chapter 5, Working with Digital Inputs, Polling and Interrupts
  id: totrans-266
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '| Q1 | 1 |'
  id: totrans-267
  prefs: []
  type: TYPE_TB
- en: '| Q2 | 2 |'
  id: totrans-268
  prefs: []
  type: TYPE_TB
- en: '| Q3 | 1 |'
  id: totrans-269
  prefs: []
  type: TYPE_TB
- en: '| Q4 | 2 |'
  id: totrans-270
  prefs: []
  type: TYPE_TB
- en: '| Q5 | 3 |'
  id: totrans-271
  prefs: []
  type: TYPE_TB
- en: Chapter 6, Working with Analog Inputs and Local Storage
  id: totrans-272
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '| Q1 | 3 |'
  id: totrans-273
  prefs: []
  type: TYPE_TB
- en: '| Q2 | 1 |'
  id: totrans-274
  prefs: []
  type: TYPE_TB
- en: '| Q3 | 2 |'
  id: totrans-275
  prefs: []
  type: TYPE_TB
- en: '| Q4 | 1 |'
  id: totrans-276
  prefs: []
  type: TYPE_TB
- en: '| Q5 | 3 |'
  id: totrans-277
  prefs: []
  type: TYPE_TB
- en: Chapter 7, Retrieving Data from the Real World with Sensors
  id: totrans-278
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '| Q1 | 2 |'
  id: totrans-279
  prefs: []
  type: TYPE_TB
- en: '| Q2 | 1 |'
  id: totrans-280
  prefs: []
  type: TYPE_TB
- en: '| Q3 | 2 |'
  id: totrans-281
  prefs: []
  type: TYPE_TB
- en: '| Q4 | 3 |'
  id: totrans-282
  prefs: []
  type: TYPE_TB
- en: '| Q5 | 1 |'
  id: totrans-283
  prefs: []
  type: TYPE_TB
- en: Chapter 8, Displaying Information and Performing Actions
  id: totrans-284
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '| Q1 | 1 |'
  id: totrans-285
  prefs: []
  type: TYPE_TB
- en: '| Q2 | 1 |'
  id: totrans-286
  prefs: []
  type: TYPE_TB
- en: '| Q3 | 3 |'
  id: totrans-287
  prefs: []
  type: TYPE_TB
- en: '| Q4 | 3 |'
  id: totrans-288
  prefs: []
  type: TYPE_TB
- en: '| Q5 | 2 |'
  id: totrans-289
  prefs: []
  type: TYPE_TB
- en: Chapter 9, Working with the Cloud
  id: totrans-290
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '| Q1 | 2 |'
  id: totrans-291
  prefs: []
  type: TYPE_TB
- en: '| Q2 | 1 |'
  id: totrans-292
  prefs: []
  type: TYPE_TB
- en: '| Q3 | 3 |'
  id: totrans-293
  prefs: []
  type: TYPE_TB
- en: '| Q4 | 2 |'
  id: totrans-294
  prefs: []
  type: TYPE_TB
- en: '| Q5 | 1 |'
  id: totrans-295
  prefs: []
  type: TYPE_TB
- en: Chapter 10, Analyzing Huge Amounts of Data with Cloud-based IoT Analytics
  id: totrans-296
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '| Q1 | 1 |'
  id: totrans-297
  prefs: []
  type: TYPE_TB
- en: '| Q2 | 3 |'
  id: totrans-298
  prefs: []
  type: TYPE_TB
- en: '| Q3 | 2 |'
  id: totrans-299
  prefs: []
  type: TYPE_TB
- en: '| Q4 | 1 |'
  id: totrans-300
  prefs: []
  type: TYPE_TB
- en: '| Q5 | 3 |'
  id: totrans-301
  prefs: []
  type: TYPE_TB
