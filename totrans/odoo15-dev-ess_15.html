<html><head></head><body><div><div><h1 id="_idParaDest-395"><em class="italic"><a id="_idTextAnchor400"/></em><a href="B16119_14_PreFinal_RK_ePub.xhtml#_idTextAnchor400"><em class="italic">Chapter 14</em></a>: Understanding Odoo Built-In Models</h1>
			<p>When a new database is created, an initial data model is populated, providing basic entities that can be used for <strong class="bold">Odoo Apps</strong>. This chapter identifies the most relevant basic entities and explains how to inspect them from the <strong class="bold">user interface</strong> (<strong class="bold">UI</strong>), as well as what their role is.</p>
			<p>While this understanding is not indispensable for you to be able to develop Odoo apps, it will provide a solid base to understand the Odoo framework core concepts and help to leverage the technical menu to address more complex requirements or issues.</p>
			<p>The following topics are discussed in this chapter:</p>
			<ul>
				<li>Understanding the contacts data model</li>
				<li>Understanding the users and companies data model</li>
				<li>Understanding the security-related information repository</li>
				<li>Understanding the database structure models</li>
				<li>Understanding the UI-related repository</li>
				<li>Understanding the configuration properties and company parameters</li>
				<li>Understanding the messaging data model</li>
			</ul>
			<p>By the end of this chapter, you will be able to use the technical menu to inspect the most relevant internal data record of the Odoo framework, helping you with issue analysis and resolution.</p>
			<p>Throughout the chapter, simplified <strong class="bold">entity-relationship diagrams</strong> (<strong class="bold">ERDs</strong>) are presented, allowing you to visualize how the core models are interrelated and thus have a deeper understanding of how these can be used in your business applications.</p>
			<h1 id="_idParaDest-396"><a id="_idTextAnchor401"/>Technical requirements</h1>
			<p>To follow this chapter, you will only need admin access to an Odoo 15 instance and to enable the developer mode in the <strong class="bold">Settings</strong> | <strong class="bold">Technical</strong> menu. To follow the contacts data model section, the <strong class="bold">Contacts</strong> app must be installed, and to follow the messaging data model section, the <strong class="bold">Discuss</strong> app must be installed.</p>
			<h1 id="_idParaDest-397"><a id="_idTextAnchor402"/>Understanding the contacts data model</h1>
			<p>Resource models<a id="_idIndexMarker1117"/> carry the <code>res.</code> prefix on their<a id="_idIndexMarker1118"/> technical <strong class="bold">identifiers</strong> (<strong class="bold">IDs</strong>). They hold Odoo's basic master data, such as users, companies, and currencies.</p>
			<p>A central model for Odoo is the <code>res.partner</code>. It is used anywhere an address, person, or organization needs to be represented. Examples are customers, suppliers, contact persons, invoicing or shipping addresses, employees, and applicants. It is also used to complement the contact data for users and configured companies.</p>
			<p>While the <code>res.partner</code> model is provided by the Odoo base module and requires no specific app to be installed, to have the corresponding menus available, the <strong class="bold">Contacts</strong> app needs to be installed. These are the relevant <strong class="bold">Contact</strong> related models:</p>
			<ul>
				<li><code>res.bank</code>, holds <a id="_idIndexMarker1119"/>bank identification data, as it turns out to be hard to do business without having a bank involved somehow. Bank data can be browsed from the <strong class="bold">Contacts</strong> | <strong class="bold">Configuration</strong> | <strong class="bold">Bank Accounts</strong> | <strong class="bold">Banks</strong> menu option.</li>
				<li><code>res.partner.bank</code>, holds <a id="_idIndexMarker1120"/>bank account details. Bank accounts are related to a <code>res.partner</code> and, not surprisingly, also reference the <code>res.bank</code> bank they are related to. Bank accounts can be browsed at <strong class="bold">Contacts</strong> | <strong class="bold">Configuration</strong> | <strong class="bold">Bank Accounts</strong> | <strong class="bold">Banks Accounts</strong>.</li>
				<li><code>res.partner.industry</code>, is a <a id="_idIndexMarker1121"/>high-level list <a id="_idIndexMarker1122"/>of economic activities. It is populated with NACE codes. <strong class="bold">NACE</strong>, the <strong class="bold">Nomenclature of Economic Activities</strong>, is the European statistical classification of economic activities. The list can be found at <strong class="bold">Contacts</strong> | <strong class="bold">Configuration</strong> | <strong class="bold">Industries</strong>.</li>
				<li><code>res.country</code>, lists the world countries and includes useful data such as the <a id="_idIndexMarker1123"/>two-digit <code>res.partner</code> model. The country list can be browsed at <strong class="bold">Contacts</strong> | <strong class="bold">Configuration</strong> | <strong class="bold">Localization</strong> | <strong class="bold">Countries</strong>.</li>
				<li><code>res.country.state</code>, lists country states and similar administrative<a id="_idIndexMarker1125"/> regions. The list is populated by default, and the data can be seen at <strong class="bold">Contacts</strong> | <strong class="bold">Configuration</strong> | <strong class="bold">Localization</strong> | <strong class="bold">Feb. States</strong>.</li>
				<li><code>res.country.group</code>, allows us to define country groups. The default<a id="_idIndexMarker1126"/> groups provided by Odoo are<a id="_idIndexMarker1127"/> Europe, <strong class="bold">Single Euro Payments Area</strong> (<strong class="bold">SEPA</strong>) Countries, and South America. Other groups can be added per need, at <strong class="bold">Contacts</strong> | <strong class="bold">Configuration</strong> | <strong class="bold">Localization</strong> | <strong class="bold">Country Groups</strong>.</li>
				<li><code>res.currency</code>, contains<a id="_idIndexMarker1128"/> a currency list, relevant when multi-currency is enabled. The list is pre-populated by Odoo, and the relevant currencies should be set as <code>active</code>. The menu option to access the list is in the <strong class="bold">Invoicing</strong>/<strong class="bold">Accounting</strong> app (if <strong class="bold">multi-currency</strong> is enabled), in the corresponding <strong class="bold">Configuration</strong> | <strong class="bold">Accounting</strong> | <strong class="bold">Currencies</strong> menu option.</li>
			</ul>
			<p>The following diagram provides a high-level overview of these models and their relations:</p>
			<div><div><img src="img/Figure_14.1_B16119.jpg" alt="Figure 14.1 – Contacts data model&#13;&#10;" width="682" height="642"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.1 – Contacts data model</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The data model diagrams <a id="_idIndexMarker1129"/>provided here are simplified ERDs. Part of the simplification is replacing the <em class="italic">crow's foot</em> notation, which may not be familiar to many of you, with simple arrows. An <strong class="bold">arrow</strong> represents <a id="_idIndexMarker1130"/>a many-to-one relation. A <strong class="bold">bidirectional arrow</strong> represents <a id="_idIndexMarker1131"/>a many-to-many relation. Dotted lines represent soft relations that don't use a database ID or a <a id="_idIndexMarker1132"/>database <strong class="bold">foreign key</strong> (<strong class="bold">FK</strong>). Model names use the singular form, as is the convention for ERDs, even if the Odoo model's name may use the plural form.</p>
			<p>Other resource models are the users and companies, described in the next section.</p>
			<h1 id="_idParaDest-398"><a id="_idTextAnchor403"/>Understanding the users and companies data model</h1>
			<p>Users and companies are <a id="_idIndexMarker1133"/>central elements of the Odoo data model. They can be accessed in the <strong class="bold">Settings</strong> | <strong class="bold">Users &amp; Companies</strong> menu. The menu options available are listed here:</p>
			<ul>
				<li><code>res.users</code>, stores<a id="_idIndexMarker1134"/> the system users. These have an implicit partner record in the <code>partner_id</code> field, where the name, email, image, and other contact details are stored.</li>
				<li><code>res.group</code>, stores the security access groups. This menu is only available<a id="_idIndexMarker1135"/> with the developer mode enabled. Users belonging to a group will be granted that group's privileges. Groups can inherit other groups, meaning that they will also provide the privileges from these inherited groups.</li>
				<li><code>res.company</code>, stores the organization's details and the company-specific configurations. It <a id="_idIndexMarker1136"/>has an implicit partner record, holding the address and contact details, stored in the <code>partner_id</code> field. A default <a id="_idIndexMarker1137"/>company is provided on new databases, with the <code>base.main_company</code> <strong class="bold">Extensible Markup Language</strong> (<strong class="bold">XML</strong>) ID.</li>
			</ul>
			<p>The following diagram provides a high-level view of relations between these models:</p>
			<div><div><img src="img/Figure_14.2_B16119.jpg" alt="Figure 14.2 – Users and companies data model&#13;&#10;" width="509" height="382"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.2 – Users and companies data model</p>
			<p>The user and access group models<a id="_idIndexMarker1138"/> are the foundation for the Odoo access security definitions. The next section details these models, accessible from the <strong class="bold">Technical</strong> menu.</p>
			<h1 id="_idParaDest-399"><a id="_idTextAnchor404"/>Understanding the security-related information repository</h1>
			<p>Odoo <a id="_idIndexMarker1139"/>users are granted access to features through access groups. These access groups hold the definitions of the privileges access they provide. The most relevant access models are listed here:</p>
			<ul>
				<li><code>res.users</code>, are the Odoo system users.</li>
				<li><code>res.group</code>, are the access groups. Users belong to one or more groups, and each <a id="_idIndexMarker1140"/>group grants certain privileges.</li>
				<li><code>ir.model.access</code>, grants<a id="_idIndexMarker1141"/> a group <strong class="bold">create-read-update-delete</strong> (<strong class="bold">CRUD</strong>) privileges <a id="_idIndexMarker1142"/>on a model.</li>
				<li><code>ir.rule</code>, grants<a id="_idIndexMarker1143"/> a group CRUD privileges on a subset of the model records, defined by a domain expression. For example, with regular access rights, you can grant write access, and then a record rule can limit certain records to be read-only.</li>
			</ul>
			<p>The following diagram provides a simplified view of this part of the data model:</p>
			<div><div><img src="img/Figure_14.3_B16119.jpg" alt="Figure 14.3 – Security-related data model&#13;&#10;" width="509" height="352"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.3 – Security-related data model</p>
			<p>You have learned about the data model for users, access groups, partners, and access rights, which all have a close connection between them. In the next section, you will continue further improving your understanding of the database structure definition, such as models and fields.</p>
			<h1 id="_idParaDest-400"><a id="_idTextAnchor405"/>Understanding the database structure models</h1>
			<p>The<a id="_idIndexMarker1144"/> information repository (<code>ir.</code>) models describe the Odoo internal configuration, such as models, fields, and UI. These definitions can be accessed under the <strong class="bold">Settings</strong> | <strong class="bold">Technical</strong> menu.</p>
			<p>The data models-related information repository can be found using the <strong class="bold">Settings</strong> | <strong class="bold">Technical</strong> | <strong class="bold">Database Structure</strong> menu. Following the most relevant option in that menu, we have these settings:</p>
			<ul>
				<li><code>decimal.precision</code>, is used to configure the number of <a id="_idIndexMarker1145"/>precision digits for different use cases, such as product prices.</li>
				<li><code>ir.model</code>, describes<a id="_idIndexMarker1146"/> the Odoo installed data models that most of the time map to a database table where the data is stored. It is useful to find the model's XML ID, using the developer menu <strong class="bold">View Metadata</strong> option. The <strong class="bold">In Apps</strong> field is also useful for finding out the modules involved in the model data structure definition.</li>
				<li><code>ir.model.field</code>, stores<a id="_idIndexMarker1147"/> the model fields defined in the database. This list can be accessed using the <strong class="bold">Settings</strong> | <strong class="bold">Technical</strong> | <strong class="bold">Database Structure</strong> | <strong class="bold">Fields</strong> menu, or the developer menu <strong class="bold">View Fields</strong> option.</li>
				<li><code>ir.attachment</code>, is the <a id="_idIndexMarker1148"/>model used to store attachment files. It is a single storage place used across Odoo.</li>
			</ul>
			<p>The <strong class="bold">Settings</strong> | <strong class="bold">Technical</strong> | <strong class="bold">Sequences &amp; Identifiers</strong> menu includes models related to data record IDs and contains the following settings:</p>
			<ul>
				<li><code>ir.model.data</code>, is <a id="_idIndexMarker1149"/>where external IDs, also known as XML IDs are stored. They map ID names that are database instance-agnostic to database instance-specific ID keys. They are accessible at <strong class="bold">Settings</strong> | <strong class="bold">Technical</strong> | <strong class="bold">Sequences &amp; Identifiers</strong> | <strong class="bold">External Identifiers</strong>.</li>
				<li><code>ir.sequence</code>, describes<a id="_idIndexMarker1150"/> the automatic number assignment sequences used—for example, on <strong class="bold">sales orders</strong> or <strong class="bold">stock transfers</strong>.</li>
			</ul>
			<p>The following diagram presents a high-level view of the relations between these models:</p>
			<div><div><img src="img/Figure_14.4_B16119.jpg" alt="Figure 14.4 – Database structure data model&#13;&#10;" width="482" height="342"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.4 – Database structure data model</p>
			<p>You have learned about the key models used to hold the Odoo model definition. Next, we have the presentation layer definition, discussed in the next section.</p>
			<h1 id="_idParaDest-401"><a id="_idTextAnchor406"/>Understanding the UI-related information repository</h1>
			<p>UI elements, such <a id="_idIndexMarker1151"/>as menus and views, are stored in information repository models. The corresponding data can be accessed through the <strong class="bold">Settings</strong> | <strong class="bold">Technical</strong> | <strong class="bold">User Interface</strong> menu. The most relevant options found there are listed here:</p>
			<ul>
				<li><code>ir.ui.menu</code>, defines<a id="_idIndexMarker1152"/> the menu options. These form a hierarchy tree, and the leaf items can trigger an <strong class="bold">Action</strong>, then often provide instructions to display the composition of views.</li>
				<li><code>ir.ui.view</code>, stores <a id="_idIndexMarker1153"/>the view definitions and their extensions. View types include form, list, Kanban, and QWeb (both for reports and for web page templates).</li>
			</ul>
			<p>Under the <strong class="bold">Settings</strong> | <strong class="bold">Technical</strong> | <strong class="bold">Actions</strong> menu, you can find a definition for these UI elements. The most relevant options are listed here:</p>
			<ul>
				<li><code>ir.actions.actions</code>, is the base <a id="_idIndexMarker1154"/>model that other action types derive from. Usually, you won't need to deal with it directly.</li>
				<li><code>ir.actions.report</code>, are<a id="_idIndexMarker1155"/> actions to print a report. They will have related QWeb views, providing the report definition, used to generate the report <strong class="bold">HyperText Markup Language</strong> (<strong class="bold">HTML</strong>) that<a id="_idIndexMarker1156"/> can then be converted<a id="_idIndexMarker1157"/> to a <strong class="bold">Portable Desktop Format</strong> (<strong class="bold">PDF</strong>) format.</li>
				<li><code>ir.actions.act_window</code>, is used to present the composition of a<a id="_idIndexMarker1158"/> view and is probably the most frequently used action type. The simplest view composition is a list view and a form view.</li>
				<li><code>ir.actions.server</code>, is used to run a server process, such as creating or<a id="_idIndexMarker1159"/> modifying a record, sending an email, or even running Python code.</li>
			</ul>
			<p>The following diagram provides a simplified view of the previous models and their relations:</p>
			<div><div><img src="img/Figure_14.5_B16119.jpg" alt="Figure 14.5 – Actions and UI data model&#13;&#10;" width="723" height="602"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.5 – Actions and UI data model</p>
			<p>With this section, you <a id="_idIndexMarker1160"/>should have gained a better understanding of the several elements relevant to defining the Odoo UI and how to use the technical menu to inspect them. In the next section, you will be introduced to the technical models used for global configuration parameters and for company-dependent data.</p>
			<h1 id="_idParaDest-402"><a id="_idTextAnchor407"/>Understanding the configuration properties and company parameters</h1>
			<p>Another important<a id="_idIndexMarker1161"/> menu in the technical options is <strong class="bold">Settings</strong> | <strong class="bold">Technical</strong> | <strong class="bold">User Parameters</strong>. You can find <a id="_idIndexMarker1162"/>two options there: <strong class="bold">System Parameters</strong> and <strong class="bold">Company Properties</strong>.</p>
			<p><code>ir.config_parameter</code>, stores global configuration options. Some are defaults that can be adjusted, while others are set when some options are selected in the <code>web.base.url</code> option stores the Odoo<a id="_idIndexMarker1163"/> server <strong class="bold">Uniform Resource Locator</strong> (<strong class="bold">URL</strong>) and can be used to create links in email templates.</p>
			<p><code>ir.property</code>, is where data for multi-company fields is stored. Some fields can have different values depending on the active company. These are also known<a id="_idIndexMarker1164"/> as <strong class="bold">property fields</strong>.</p>
			<p>For example, the <a id="_idIndexMarker1165"/>partner fields <code>property_account_receivable_id</code>), relevant for customers, and <code>property_account_payable_id</code>), relevant for suppliers, are both property fields.</p>
			<p>Since the same field <a id="_idIndexMarker1166"/>name can hold different values, depending on the active company, it can be a regular database file. That is where the <code>ir.property</code> model comes in as the place where these values can be stored.</p>
			<p>This model has the following fields:</p>
			<ul>
				<li><code>property_account_receivable_id</code>.</li>
				<li><code>ir.model.fields</code> record.</li>
				<li><code>Float</code> or <code>Many2one</code>.</li>
				<li><code>res.partner,62</code> means a reference for the <code>res.partner</code> record with database ID 62.</li>
				<li><strong class="bold">Company</strong>: The company this value is valid for.</li>
				<li><code>account.account,813</code> for a chart of accounts with ID 813.<p class="callout-heading">Tip</p><p class="callout">The <strong class="bold">Resource</strong> field is optional. If blank, it is used as the default value for new records in that company. This is used for the case of the <strong class="bold">Account Receivable</strong> and <strong class="bold">Account Payable</strong> fields used as an example here.</p></li>
			</ul>
			<p>Understanding the<a id="_idIndexMarker1167"/> relevance of these company properties and <a id="_idIndexMarker1168"/>parameters can be useful for advanced configuration tweaks, such as adjusting the public web URL to be used or defining a multi-company field default value. The next section will continue the technical menu exploration journey, this time covering message-related models.</p>
			<h1 id="_idParaDest-403"><a id="_idTextAnchor408"/>Understanding messaging data models</h1>
			<p>A relevant technical area <a id="_idIndexMarker1169"/>you might need to work with is the messaging-related models used by the Chatter widget found in many forms. These features are provided by the <code>mail</code>, so it needs to be installed before the following menu items are available.</p>
			<p>The relevant technical models can be found in the <strong class="bold">Settings</strong> | <strong class="bold">Technical</strong> | <strong class="bold">Discuss</strong> menu. The most important options found there are listed here:</p>
			<ul>
				<li><code>mail.message</code>, stores each message. It is related to a <em class="italic">resource</em>, a particular<a id="_idIndexMarker1170"/> record in a model, through<a id="_idIndexMarker1171"/> the <strong class="bold">Mail Thread</strong> abstract model.</li>
				<li><code>mail.message.subtype</code>, is used for each message. The basic <a id="_idIndexMarker1172"/>subtypes are <strong class="bold">Note</strong>, for internal discussions, <strong class="bold">Discussion,</strong> for outside messages, and <strong class="bold">Activities</strong>, for scheduled activities. These are available for any model. Other subtypes, usually model-specific, can be added to identify different events. This allows the configuring of default subscriptions, deciding which events should trigger notifications to which followers.</li>
				<li><code>mail.tracking.value</code>, stores the field values change log for tracked <a id="_idIndexMarker1173"/>fields. For a field to be tracked, check the <code>tracked=True</code> field attribute. These changelogs are presented in the Chatter message, and so the tracking values are linked to a Chatter message.</li>
				<li><code>mail.activity</code>, stores <a id="_idIndexMarker1174"/>the individual activities for a record. The <strong class="bold">Activity Mixin</strong> abstract adds other models the ability to link to activities, similarly to what <strong class="bold">Mail Thread</strong> does for messages.</li>
				<li><code>mail.activity.type</code>, are <a id="_idIndexMarker1175"/>the configurable activity types, such as <strong class="bold">Email</strong>, <strong class="bold">Call</strong>, <strong class="bold">Meeting</strong>, or <strong class="bold">Todo</strong>.</li>
				<li><code>mail.followers</code>, stores a list of <a id="_idIndexMarker1176"/>followers for each message thread. Each follower record also has a list of subtypes it has subscribed to. Whenever a new message with any of these subtypes is added, the follower will get a notification.<p class="callout-heading">Tip</p><p class="callout">Data access and changelogs are important features in some environments with strict control policies. An alternative to the out-of-the-box tracking feature is the <strong class="bold">Audit Log</strong> community module. You can <a id="_idIndexMarker1177"/>find it at <a href="https://odoo-community.org/shop/product/audit-log-533">https://odoo-community.org/shop/product/audit-log-533</a>.</p></li>
			</ul>
			<p>The following diagram provides a high-level view of these models and their relations:</p>
			<div><div><img src="img/Figure_14.6_B16119.jpg" alt="Figure 14.6 – Message and activity data model&#13;&#10;" width="902" height="542"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.6 – Message and activity data model</p>
			<p>Most of the time, you<a id="_idIndexMarker1178"/> would use a few handpicked <strong class="bold">application programming interface</strong> (<strong class="bold">API</strong>) methods to create messages and activities and will not need to delve into the details on how the corresponding data is stored.</p>
			<p>For some <a id="_idIndexMarker1179"/>advanced cases, having a good understanding of the underlying data model can be valuable. In particular, understanding message subtypes and follower subscriptions to them can be useful for fine-grained control of notifications. This completes our overview of the Odoo framework's most important technical models.</p>
			<h1 id="_idParaDest-404"><a id="_idTextAnchor409"/>Summary</h1>
			<p>In this chapter, you learned about the internal structures of the Odoo framework, provided by information repository (<code>ir</code>) and resource (<code>res</code>) models.</p>
			<p>The <strong class="bold">Contacts</strong> model is central for storing all people and address data in Odoo, and installing the <strong class="bold">Contacts</strong> app adds the UI for this model and related data. Understanding how company contacts can have child contacts and addresses is important to effectively use Odoo. The <strong class="bold">Users &amp; Companies</strong> menu, from the <strong class="bold">Settings</strong> app, was also discussed, to introduce <strong class="bold">Users</strong>, <strong class="bold">Access Groups</strong>, and <strong class="bold">Companies</strong>. The role of <strong class="bold">Access Groups</strong> to grant access privileges to <strong class="bold">Users</strong> is a key idea here. The remaining relevant elements are exposed in the <strong class="bold">Technical</strong> menu of the <strong class="bold">Settings</strong> app. Let's review some key ideas here addressed in the chapter.</p>
			<p>Starting from the top of the menu, the <strong class="bold">Discuss</strong> submenu holds the message and activities data model, and a key idea is how subtypes are used to control automatic notifications. The <strong class="bold">Actions</strong> menu exposes the actions used in menu items and the context menu, and is used to present views, print reports, or execute code in the server. The <strong class="bold">User Interface</strong> menu introduces the <strong class="bold">Menu Items</strong> that make use of the <strong class="bold">Actions</strong>, as well as the <strong class="bold">Views</strong> menu option, used to hold both backend views and frontend HTML templates. Next in the menu is the <strong class="bold">Database Structure</strong> submenu. Here, the models used to describe all the Odoo data structures are available. These are referenced in multiple places during app development, such as in view definitions or model extensions. Closely related to models are the <strong class="bold">Security</strong> definitions, granting members of access groups access privileges to read or write to models, or specific record domains in a model.</p>
			<p>While not every single technical menu option was reviewed, the most relevant ones were presented and should provide a solid understating of the data structures underlying the <code>base</code> and <code>mail</code> modules. Your journey through the Odoo development horizon is close to an end. Now that you have all the tools and skills to develop your business applications, the final piece missing is to deploy them and make them available for the end users.</p>
			<p>The Odoo project's last mile is to deploy our work for real usage. Installing Odoo for a production environment has additional requirements when compared to a development installation. The next chapter will guide you through the setup of an Odoo production installation, avoiding the most common pitfalls.</p>
		</div>
	</div></body></html>