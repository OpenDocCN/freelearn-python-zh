<html><head></head><body>
		<div><h1 id="_idParaDest-182"><em class="italic"><a id="_idTextAnchor186"/>Chapter 12:</em> Code Quality</h1>
			<p>There are many aspects of code quality. We can talk about efficient code, which is code that runs fast or doesn't waste resources such as memory. It can also be source code that is easy to read and understand for us humans and therefore is easy to read and maintain. In this chapter, we'll talk about this and look at some best practices for writing high-quality code.</p>
			<p>We will also look at some examples of things we should try to avoid if we want to write high-quality code.</p>
			<p>In this chapter, we will learn about the following topics:</p>
			<ul>
				<li>Understanding what code quality is</li>
				<li><a id="_idTextAnchor187"/>Writing readable code</li>
				<li>Writing efficient code</li>
				<li>Understanding that smart code is not always smart</li>
				<li>Understanding some of the best practices for writing quality code</li>
			</ul>
			<p>Before we learn how to write quality code, we should define what code quality is.</p>
			<h1 id="_idParaDest-183"><a id="_idTextAnchor188"/>Defining code quality</h1>
			<p>It is tough to define the meaning of<a id="_idIndexMarker759"/> quality when it comes to program code. The reason is that all developers will have their own opinion of what it means. One developer can argue that we should focus on writing readable code as it will be easier to understand and maintain and, by that, reduce the chance of us inserting any bugs into the code. Another developer could argue that we shall focus on writing compact code; that is, as few code lines as possible. Even if the code is harder to read, less code will give us fewer chances to introduce bugs in the code.</p>
			<p>Here, the two developers would argue for the same thing – fewer bugs in the code – with two contradictory positions.</p>
			<p>Let's look at a small example using Python as our language. We want to create a list that holds all possible combinations we can get by rolling two dice.</p>
			<p>The first one will use more code, but it will be easier to understand:</p>
			<pre>two_dice = []
for d1 in range(1, 7):
   for d2 in range(1, 7):
       two_dice.append((d1, d2))</pre>
			<p>On the first line, we create an empty list.</p>
			<p>Then, we have a <code>for</code> loop for the<a id="_idIndexMarker760"/> first dice. The <code>d1</code> variable will get the value <code>1</code> the first iteration, <code>2</code> the second, and so on. Remember that the end value, <code>7</code>, is when it will stop, so this is <code>7</code>, not <code>6</code>, as it will stop when it reaches this, giving us the values 1 to 6. </p>
			<p>We will then do the same kind of loop for the second dice.</p>
			<p>On the last line, we will insert the values of <code>d1</code> and <code>d2</code> into the list. Having an extra pair of parentheses on appending the <a id="_idIndexMarker761"/>values will put them in what is called a <code>d1</code> and <code>d2</code> belong together as one combination.</p>
			<p>We can accomplish the same things with a single line of code. It will look like this:</p>
			<pre>two_dice = [(d1, d2) for d1 in range(1, 7) for d2 in range(1,     7)]</pre>
			<p>As we can see, the second example has less code but at the cost of readability.</p>
			<p>But who is right – the developer arguing for readability or the one arguing for less code? We can't say, as they both are right.</p>
			<p>What we need is a better definition of what code quality is, and more importantly, it should be measurable.</p>
			<p>Many efforts to define a model for measuring code quality have been made, and one of the better known is CISQ's quality model. We'll see what that is next.</p>
			<h2 id="_idParaDest-184"><a id="_idTextAnchor189"/>CISQ's quality model</h2>
			<p>The <strong class="bold">Consortium for Information Software Quality</strong> (<strong class="bold">CISQ</strong>) has defined five rules that can be used to measure the quality of code. It was<a id="_idIndexMarker762"/> first defined with business software in mind but was later extended to also include embedded <a id="_idIndexMarker763"/>systems, used mainly in <strong class="bold">Internet of Things</strong> (<strong class="bold">IoT</strong>) applications. These rules are as follows:</p>
			<ul>
				<li><strong class="bold">Reliability</strong>: Reliability measures the level of risk and the likelihood of failures. It will also measure the defects that <a id="_idIndexMarker764"/>are injected into existing code when it is updated or modified. The goal of measuring reliability is to prevent the time an application can't run because of severe bugs.</li>
				<li><strong class="bold">Performance efficiency</strong>: When an application is running, the speed with which it performs its operations depends on how the code is written and structured. Measuring the efficiency at a code level will help to improve both the overall response time of an application and how we identify the potential risk of applications that need to process data at a high speed that fail as they fail to process data fast enough.</li>
				<li><strong class="bold">Security</strong>: The security rule will measure the likelihood of potential security breaches due to poor coding practices.</li>
				<li><strong class="bold">Maintainability</strong>: When we are talking about the maintainability of code, we usually refer to three things. We say that the code should be, namely, <em class="italic">adaptable</em>, which is code that we can adapt to changes as per the requirements; <em class="italic">portable</em>, which is code that can be used on different platforms, such as different operating systems; and <em class="italic">transferable</em>, which is code that can be transferred from one development team to another.</li>
			</ul>
			<p>This can be applied to, more or less, all code, but we want to be able to do all three of these with as little effort as possible.</p>
			<ul>
				<li><strong class="bold">Size</strong>: Size is not a quality attribute per se, but the size of the code can have an impact on its maintainability. The more code we have, the harder it will be to navigate, understand, and <a id="_idIndexMarker765"/>follow its logic.</li>
			</ul>
			<p>We have now talked about the quality aspects regarding code. But what about quality from the user's perspective?</p>
			<h2 id="_idParaDest-185"><a id="_idTextAnchor190"/>Understanding user quality</h2>
			<p>What the CISQ model focuses very little on is quality from the user's perspective. An application can match all the <a id="_idIndexMarker766"/>CISQ rules, but a user of this application may still consider it being of poor quality.</p>
			<p>Dr. Tom DeMarco, an American software engineer, has proposed that <em class="italic">a product's quality is a function of how much it changes the world for the better.</em></p>
			<p>This statement can be interpreted as meaning that an application's functional quality and user satisfaction are more important than the structural quality of the code.</p>
			<p>The American computer scientist Gerald Weinberg has said that <em class="italic">Quality is value to some person</em>. This implies that quality is subjective – what one person would define as quality in an application might be the opposite for another person. This view will focus on asking the questions <em class="italic">Who are the people that want to value our software?</em> and <em class="italic">What will be valuable to them?</em></p>
			<p>With these definitions in mind, we will start to realize that crafting software is much more than just writing code. Even if the code has excellent quality, if the users don't like what we have created, they will not use it. It is like if we build a chair using the best craftsmanship, but if it is incredibly uncomfortable, no one will buy it.</p>
			<p>We must, therefore, understand our users and their needs. Doing so is not always easy as our potential users might not know about these needs. Before you had your first smartphone, you did not miss it as you did not know what it could offer you. Now, on the other hand, you would miss it just after a few hours if it was taken away from you.</p>
			<p>To get to the point where we understand our user's needs before they understand it, we need to use our imagination. We can start by asking some simple questions. They could be, what problem will this application solve? Who will benefit from it? Is there a pattern that the people who will benefit from using this application have in common? What kind of applications does this group already use? Are there features, patterns, or ideas used in those applications that we can reuse in our application to make this group more familiar with how our application works from the start? </p>
			<p>When we have an idea about who our future users might be, we will need to focus on the flow within the application. We all know how frustrating it is when we use a program, or any other product for that matter, and we can't figure out what to do. We try one thing after the other, and rather soon, we lose all interest in using it.</p>
			<p>If you invest time and <a id="_idIndexMarker767"/>money in developing something, you should at least give that great idea of yours every chance to succeed.</p>
			<p>Great! We now have an idea of what code quality is and we also understand the quality aspects from a user perspective. I am sure you want both in your software, so let's put them together.</p>
			<h2 id="_idParaDest-186"><a id="_idTextAnchor191"/>Putting them together</h2>
			<p>If we think about it, the art of creating<a id="_idIndexMarker768"/> quality software is, of course, neither<a id="_idIndexMarker769"/> writing code with high quality nor writing an application that the users find valuable; it is both. </p>
			<p>As we have seen in earlier chapters, applications that are used will be updated, modified, and extended. This means that the code needs to be read by other programmers (or by us) if we want to find where changes need to be made.</p>
			<p>It will all boil down to a question about money. We want to create software that gives our users added value and we can sell our application. But maybe even more important is that the programmers that maintain the code of the application can work efficiently. If they can find a bug quickly, they will spend less time fixing it.</p>
			<p>If the code is easy to read and understand, the programmers will also have a higher chance of avoiding inserting new bugs into the code, thus reducing the cost of fixing them.</p>
			<p>One problem many programmers will face is that they are not given the time needed to create the quality code they want and that can be understood. Tight time schedules, managers who don't fully understand the importance of well-crafted code, and impatient customers can all be aspects that will force programmers to produce code quickly, resulting in a loss of quality. This is, of course, a very short-term approach.</p>
			<p>You might ship the software faster, but with lower quality, both for the users and for the programmers who will need to maintain the code in the future. This will most likely be less cost-efficient than crafting high-quality code to begin with. </p>
			<p>It should also be noted that if we start a project with poorly written code, this project will most likely always contain low-quality code as the cost of going back and improving all the code will be too high.</p>
			<p>We have everything to win if we do a good job and write quality code and deliver software that is considered high quality by our users.</p>
			<p>The rest of this chapter<a id="_idIndexMarker770"/> will not focus on user quality. That does <a id="_idIndexMarker771"/>not mean that it's not essential, but this is a book about writing code, so let's see how we can do that with quality and style.</p>
			<h1 id="_idParaDest-187"><a id="_idTextAnchor192"/>Writing code with readability in mind</h1>
			<p>Code that you write will not <a id="_idIndexMarker772"/>only be executed by the computer. It will also be read both by yourself and by others. Therefore, is it essential that you write code that is as easy to read and understand as possible.</p>
			<p>There are some simple rules we can follow that will assist in achieving readable code. </p>
			<h2 id="_idParaDest-188"><a id="_idTextAnchor193"/>Using comments and documentation wisely</h2>
			<p>When creating code, you need an<a id="_idIndexMarker773"/> understanding what you do and why you do it. But when coming back to your code a couple of months later, it is not always as clear what these thoughts were and why you wrote things the way you did. Commenting on tricky lines of code is a great way to document your thoughts for both your future self and others that will read your code.</p>
			<p>But comments can also make the code less readable. Never comment on things that are obvious – things that any programmer, including yourself, will understand.</p>
			<p>You should use comments when you look at a line of code and understand that a reader who sees this line will need to stop and think before understanding what it does. </p>
			<p>Commenting on functions and methods is often a good idea. These comments will usually come right before the function or method or as the first thing inside it. What you should use depends on what language you are using, as well as the conventions used by programmers of that language.</p>
			<p>In the following screenshot, we can see an example of this for a JavaScript function:</p>
			<div><div><img src="img/Figure_12.1_B15554.jpg" alt="Figure 12.1 – Documenting a JavaScript function"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.1 – Documenting a JavaScript function</p>
			<p>The following is what we can infer from the preceding code:</p>
			<ul>
				<li>The first text line in this comment describes the overall responsibility of this function. Then, using the predefined <code>@param</code> name, the meaning of the two parameters are documented. </li>
				<li>Within the curly <a id="_idIndexMarker774"/>braces, the data type that is expected is defined. This is especially important if the language we are using is dynamically typed. A dynamically typed language will accept any type we assign to a variable, rather than using only the type we specify. JavaScript is dynamically typed, so this will assist any programmers using this function.</li>
				<li>After that comes the name of the parameter (table and headers).</li>
				<li>Then, after a dash, we will document what this parameter is used for.</li>
			</ul>
			<p>Many editors used by programmers can use this documentation if formatted correctly. The format we can see here is called JSDoc.</p>
			<p>In the following screenshot, we can see that when we write the code that will call this function, the editor can show us the information that was found in this comment:</p>
			<div><div><img src="img/Figure_12.2_B15554.jpg" alt="Figure 12.2 – Programming editor showing data from the function documentation"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.2 – Programming editor showing data from the function documentation</p>
			<p>Comments are not the only<a id="_idIndexMarker775"/> way we can document our code. We can also let the code be partly self-documenting by naming things nicely.</p>
			<h2 id="_idParaDest-189"><a id="_idTextAnchor194"/>Using names as documentation</h2>
			<p>By naming variables<a id="_idIndexMarker776"/> and functions wisely, the names by themselves will act as documentation. Look at the following function:</p>
			<pre>function download_and_extract_links(url)
    page = download_page(url)
    links = extract_links(page)
    return links
end_function</pre>
			<p>Here, we have a function that will download a web page and extract all the links found on that page. When we call this function, we pass the address to the page we want to extract the links from. That address is stored in the <code>url</code> parameter.</p>
			<p>Inside, a function called <code>download_page</code> is called. As the name describes clearly what that function does, when reading the code, there is no need for us to go to that function to understand what it does. The variable that receives the returned data is called <code>page</code>, so we understand what data it holds.</p>
			<p>We can see the same thing on the next line. If a function is called <code>extract_links</code>, we can assume that is what that function does. We store the data we get back in a variable called <code>links</code>, so our assumption seems to be right.</p>
			<p>The function names will almost act like a table of content when reading this function. We understand what happens there, and we can go there if we want, but there is no need to do so just to learn what it does. The idea of a table of content in a book is that you will both learn what a chapter is about and learn where to find it. The same thing applies here. If we name our <a id="_idIndexMarker777"/>functions well, they will let us know what they do. Most integrated development environments will let us click the name, which means we will be taken to that function if we want to read it.</p>
			<p>Later in this chapter, in the <em class="italic">Limiting function/method length</em> section, we will learn more about how to use this technique.</p>
			<p>To be able to understand what good code looks like, we must see both good and bad code. Therefore, to become a good programmer, we must read code.</p>
			<h2 id="_idParaDest-190"><a id="_idTextAnchor195"/>Reading other people's code</h2>
			<p>As a beginner<a id="_idIndexMarker778"/> programmer, the best thing we can do is read code written by experienced developers. </p>
			<p>A good source is open source projects. Experienced programmers develop these projects, and their code is available online for anyone.</p>
			<p>Pick any project, preferably in the same language you are using. At first, approaching such a project might be overwhelming as there will be maybe hundreds of files structured in several folders. But take your time and poke around in this file structure. Maybe the most important thing is not to understand the file structure of the project, but just looking at the code and trying to understand parts of it.</p>
			<p>This will give you an insight into how experienced programmers structure their code. It should be noted that all senior developers will not always do a perfect job, but most of the time, the code you can see here would be considered to be of relatively high quality.</p>
			<p>If you look at code written by a beginner programmer and compare it with the code written by an experienced one, you will see the difference. Now, refer to the following code:</p>
			<div><div><img src="img/Figure_12.3_B15554.jpg" alt="Figure 12.3 – A program that was written by a beginner programmer"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.3 – A program that was written by a beginner programmer</p>
			<p>Look at the preceding program. It is written in C# and will ask the user for a sentence. It will then calculate the number of <a id="_idIndexMarker779"/>characters, not counting spaces, that the user entered and finally calculate and print the average number of characters of the words in the sentence.</p>
			<p>This code has many characteristics of a beginner programmer. I have been teaching programming for 30 years and this is not, by far, the worst example I have seen. Now, refer to the following code:</p>
			<div><div><img src="img/Figure_12.4_B15554.jpg" alt="Figure 12.4 – The same program shown previously, written by an experienced programmer"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.4 – The same program shown previously, written by an experienced programmer</p>
			<p>Now, compare the code we provided at the start of this section with the code shown in the preceding screenshot, which is the very same program written by an experienced programmer. A user of these two programs will not be able to tell any difference. Executing both will produce an output like this:</p>
			<pre>Enter your sentence
hi there people
There are 13 characters in total.
There are 4.333333333333333 characters on average in these words.</pre>
			<p>From the user's perspective, we can say that the quality of the two programs is identical. </p>
			<p>But the quality of the code is<a id="_idIndexMarker780"/> not identical at all. Let's list some of the differences:</p>
			<ul>
				<li>The first version – written by a beginner programmer – does not use any indentation, making the code very compact and hard to read.</li>
				<li>The first version does not use any blank lines, while in the other version, the blank lines divide the code into sections.</li>
				<li>In the first version, the <code>newScen</code> variable is assigned values, but it is never used, so it can be removed from the program.</li>
				<li>In the first version, the variable <code>names</code> do not reflect what they are storing. In the second version, the <code>myScen</code> variable is renamed to <code>sentence</code>, <code>n</code> is renamed to <code>word</code>, and <code>countedWords</code> is renamed to <code>averageCharCount</code>.</li>
				<li>The first version is<a id="_idIndexMarker781"/> using a <code>for</code> loop to count all the characters except spaces. In the second version, a language-specific construct is used to do the same thing on a single line.</li>
				<li>The first version declares all the variables at the beginning of the <code>main</code> method. In the second version, they are declared when they are first used.</li>
				<li>The first version uses some other unnecessary code, such as <code>Convert.ToString</code> on line 16, and some of the comments do not add any new knowledge to the reader of the code.</li>
			</ul>
			<p>Even if you don't understand the code, just looking at it reveals that the second version is much more pleasant to look at.</p>
			<p>Also, note that even though the second program introduced blank lines in the code, the number of lines dropped from 31 to 22.</p>
			<p>As a beginner programmer, you are very focused on getting things to work, and you should. But when you get there and your program is working, you should go back and look at your code and think about how you can raise the quality. Maybe you won't come up with the same one-line solutions the experienced programmer is using, but at least you can use blank lines, indentation, and sensible variable names.</p>
			<p>To be able to learn to write high-quality code, you will need to be exposed to it, which is why reading code written by senior developers will help you write better code. Don't forget that when you do read it, try to understand as much as you can about the code you are reading. It might be a slow process, but it is not like reading a book – you don't have to read all the code there is. Take a function or a method and focus on only the code you find there. A good source to go to is the Stack Overflow website, where programmers can ask questions and other programmers will answer them. Go to <a href="https://stackoverflow.com/">https://stackoverflow.com/</a> and look around. You can filter the questions so that you will only see questions related to the language you are interested in. Focus on the answers, as the people who <a id="_idIndexMarker782"/>answer these questions are often very experienced and their code is often of high quality. You can, of course, also use this site to ask your own programming questions, and who knows – soon, you might be answering some too.</p>
			<h2 id="_idParaDest-191"><a id="_idTextAnchor196"/>Rewriting your code</h2>
			<p>As we saw in the previous example, just<a id="_idIndexMarker783"/> making the program work is not enough. When it does, we shall go back and look at the code we just wrote to see if we can restructure it to make it more pleasant to look at and read, and maybe come up with a better solution to the problem we are trying to solve.</p>
			<p>An excellent way to tackle a programming task is first to come up with a working solution, and then when you have it, work on it and tweak it to make it better. This will not only result in better code quality, but you will also learn from it, and the next time you face a similar problem, you will start with a better first solution.</p>
			<p>This is why an experienced programmer will not start with something like what was shown in <em class="italic">Figure 12.3</em>, but with something closer to what was shown in <em class="italic">Figure 12.4</em>. </p>
			<p>Going back to the code you have written will make you look at it with fresh eyes, and you will see things that you did not see when you first wrote the code.</p>
			<p>Letting your code go through several iterations will be beneficial in more than one way. Hopefully, it will give you higher quality code. You also understand the problem your code is trying to solve better because if you process the problem in your head and work on a solution, you will gain a broader and more in-depth understanding of the problem itself and how it could be solved.</p>
			<p>You will also improve your language and programming skills as you will need to learn more about the language you are using, in order to use the right features the language has to offer for this problem.</p>
			<p>Even programmers who have used a language for years will discover things they had no idea existed.</p>
			<p>With more experience, you will also recognize patterns in the problems you are solving and the code you are writing. As you do, the process of rewriting your code will be faster. Not only will you come up with improved ideas quicker, but your code will also start at a higher level to begin with.</p>
			<p>Always have readability as your primary focus when rewriting your code. Sometimes, you need to sacrifice readability to make the code more efficient or faster, but if it is your primary goal, this will be reflected in your code. </p>
			<p>When you look at your code, you should always ask yourself the most fundamental question: Is this code I would like to read if someone else wrote it?</p>
			<p>If the answer is no, change<a id="_idIndexMarker784"/> it so you can answer yes.</p>
			<p>Readable code is excellent, but the code should be efficient too.</p>
			<h1 id="_idParaDest-192"><a id="_idTextAnchor197"/>Writing code with efficiency in mind</h1>
			<p>When we talk about efficient code, we can <a id="_idIndexMarker785"/>mean several different things. Let's look at some of the things people might mean when they talk about efficient code.</p>
			<h2 id="_idParaDest-193"><a id="_idTextAnchor198"/>Removing redundant or unnecessary code</h2>
			<p>You should always make<a id="_idIndexMarker786"/> sure that you remove redundant code. Redundant code is code that does not affect the output of the application, but will be executed.</p>
			<p>Look at the following code:</p>
			<pre>number = 10
for i  = 1 to 1000
  number = number + i
end_for
number = 20
print number</pre>
			<p>Here, we created a variable, <code>number</code>, and set it to <code>10</code>.</p>
			<p>Then, we have a <code>for</code> loop. This loop will iterate 999 times. The first time this happens, the <code>i</code> variable will have a value of <code>1</code>; the second time, it will be <code>2</code>, and so on until it reaches <code>1000</code>. Then, we will exit the loop.</p>
			<p>Each time we're inside the loop, we will take whatever value the variable number currently has, add the current value of <code>i</code> to it, and store the result in the <code>number</code> variable.</p>
			<p>After we exit the loop, we assign the value <code>20</code> to the <code>variable</code> number, and by doing that, we will overwrite the value we just calculated.</p>
			<p>This means that everything <a id="_idIndexMarker787"/>we did before the line where we assigned <code>20</code> to <code>number</code> is unnecessary. Deleting those lines will not have any effect on the output of the program, but when we run the application, this unnecessary loop will run, and by that, consume some resources and waste time.</p>
			<p>Having code like this will also make the code harder to read as we will spend some time trying to figure out what the loop does and why it is there.</p>
			<p>With the unnecessary code removed, we can now see how we can use the computer's hardware more efficiently.</p>
			<h2 id="_idParaDest-194"><a id="_idTextAnchor199"/>Optimizing the use of memory and processors</h2>
			<p>It is easy to waste<a id="_idIndexMarker788"/> memory without even knowing it. Depending on what language you use, memory will be handled differently. </p>
			<p>There might also be features in your programming language that will use the computer hardware in a more efficient way than the first solution you come up with. Let's look at one example from Python. </p>
			<p>In this example, we will concatenate strings together using two different techniques. In the first version, we will use the <code>+</code> operator to concatenate them. We will repeat this 2 million times and measure how long it takes. Refer to the following code:</p>
			<pre>s1 = "aaaabbbb"
s2 = "ccccdddd"
result = ""
for _ in range(2000000):
    result += s1 + s2</pre>
			<p>Let's see how this code works:</p>
			<ul>
				<li>On the two first lines, we create two variables, <code>s1</code> and <code>s2</code>, that hold the two strings we want to concatenate. </li>
				<li>On the third line, we create a variable called <code>result</code>, which, initially, is an empty string.</li>
				<li>We then enter our loop, which will iterate 2 million times. The underscore after <code>for</code> is there because we won't need a variable to hold the current iteration value (which is 0 the first iteration, 1 for the second, and so on).</li>
				<li>Each time we're<a id="_idIndexMarker789"/> inside the loop, we take what is currently in the <code>result</code> variable and add it together with the content of the <code>s1</code> and <code>s2</code> variables.</li>
			</ul>
			<p>After the first iteration, <code>result</code> will contain the following:</p>
			<pre>aaaabbbbccccdddd</pre>
			<p>After the second iteration, it will contain the following: </p>
			<pre>aaaabbbbccccddddaaaabbbbccccdddd</pre>
			<p>The result, after 2 million iterations, will be a string that is 32 million characters long!</p>
			<p>Now, let's create the same application but use another technique for concatenating the strings. This is not as easy to understand, and don't worry if you don't get how the code works. </p>
			<p>Python has something called the <strong class="bold">string join</strong> method. It is designed to join strings together in a very efficient way. The code for the <a id="_idIndexMarker790"/>program looks like this:</p>
			<pre>s1 = "aaaabbbb"
s2 = "ccccdddd"
result = "".join(s1 + s2 for _ in range(2000000)) </pre>
			<p>This program will also iterate 2 million times, concatenate the two strings together, and produce a string that is 32 million characters long. </p>
			<p>The first program we wrote took about 42 seconds to complete on my computer.</p>
			<p>The second program will, on the same machine, complete in 0.34 seconds.</p>
			<p>Adding two strings together as<a id="_idIndexMarker791"/> many times as we did here is, of course, not something we do very often, but these two programs illustrate the impact of choosing one solution instead of another.</p>
			<p>It is not only language constructs such as the one we saw here that can also improve the performance of our applications. Choosing the right algorithm can also have a significant impact on speed and memory usage.</p>
			<h2 id="_idParaDest-195"><a id="_idTextAnchor200"/>Using efficient algorithms</h2>
			<p>An algorithm is a solution to a<a id="_idIndexMarker792"/> problem. The algorithm will describe the logical steps needed to get something done. Let's look at an example. If we have a sequence of numbers and we want this sequence sorted, we can use a sorting algorithm. We have several algorithms to choose from, and all will get the job done; that is, sorting a sequence.</p>
			<p>The reason we have more than one algorithm is that they are more or less effective when it comes to speed and usage of memory. How hard it is to write the code that implements the algorithm will also differ. </p>
			<p>Let's look at one of the easiest sorting algorithms to implement: bubble sort. It is also one of the least effective algorithms, as we will see:</p>
			<pre>function bubbel_sort(sequence)
    do   
        swapped = false
        for i = 1 to length(sequence) – 2
            if sequence[i] &gt; sequence[i+1] then
                swap(sequence[i], sequence[i+1])
		     swapped = true
            end_if
        end_for
    while swapped
    return sequence
end_function</pre>
			<p>Look at the code and see if you understand what it does. I will not go through the details of it. Instead, we will go through the bubble sort algorithm step by step. After we have done that, you can come back to the <a id="_idIndexMarker793"/>code and try to figure out what is happening here.</p>
			<p>The sequence we will work with looks like this:</p>
			<pre>sequence = [5, 3, 1, 8, 2]</pre>
			<p>Let's look at the logic of bubble sort:</p>
			<ol>
				<li value="1">In the following image, you can see a graphical representation of the sequence we are working on:<div><img src="img/Figure_12.5_B15554.jpg" alt="Figure 12.5 – The sequence to be sorted"/></div><p class="figure-caption">Figure 12.5 – The sequence to be sorted</p></li>
				<li>Bubble sort will start by comparing the first two values – in our case, <strong class="bold">5</strong> and <strong class="bold">3</strong> – as shown in the following image:<div><img src="img/Figure_12.6_B15554.jpg" alt="Figure 12.6 – Comparing the first two values"/></div><p class="figure-caption">Figure 12.6 – Comparing the first two values</p><p>If they are not in the right order, they will be swapped. As they are out of order, <strong class="bold">3</strong> will be moved to the first position, while <strong class="bold">5</strong> will be moved to the second, resulting in the following sequence:</p><div><img src="img/Figure_12.7_B15554.jpg" alt="Figure 12.7 – The values 5 and 3 swap places"/></div><p class="figure-caption">Figure 12.7 – The values 5 and 3 swap places</p></li>
				<li>Next, <strong class="bold">5</strong> and <strong class="bold">1</strong> will be compared, and again get swapped if they're not in order, as shown in the following image:<div><img src="img/Figure_12.8_B15554.jpg" alt="Figure 12.8 – Comparing 5 and 1"/></div><p class="figure-caption">Figure 12.8 – Comparing 5 and 1</p><p>They are not in the correct order, so they get swapped, as shown here:</p><div><img src="img/Figure_12.9_B15554.jpg" alt="Figure 12.9 – The values 5 and 1 swap places"/></div><p class="figure-caption">Figure 12.9 – The values 5 and 1 swap places</p></li>
				<li>Now, <strong class="bold">5</strong> and <strong class="bold">8</strong> are compared, but as they are in the right order, nothing is done, as shown in the<a id="_idIndexMarker794"/> following image:<div><img src="img/Figure_12.10_B15554.jpg" alt="Figure 12.10 – The values 5 and 8 are in the right order"/></div><p class="figure-caption">Figure 12.10 – The values 5 and 8 are in the right order</p></li>
				<li>Then, <strong class="bold">8</strong> and <strong class="bold">2</strong> will be compared, as follows:</li>
			</ol>
			<div><div><img src="img/Figure_12.11_B15554.jpg" alt="Figure 12.11 – The values 8 and 2 are compared"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.11 – The values 8 and 2 are compared</p>
			<p>They will be swapped as they are out of order, as shown here:</p>
			<div><div><img src="img/Figure_12.12_B15554.jpg" alt="Figure 12.12 – The values 8 and 2 swap places"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.12 – The values 8 and 2 swap places</p>
			<p>We have now reached the end of the sequence and, as you can see, it is not sorted. But one item is sorted, and that is the value 8. As this is the largest value in the sequence, it has been pushed to the end, and by that, it has reached its correct location.</p>
			<p>This is where the name of the algorithm comes from, since one value has bubbled to the end.</p>
			<p>At this point, the algorithm<a id="_idIndexMarker795"/> will start over, comparing the first two values and swapping them if necessary. This time, though, the last value – 8, in our case – will not be part of the comparison as it has already found its place. </p>
			<p>After the second round, the sequence will look as follows:</p>
			<div><div><img src="img/Figure_12.13_B15554.jpg" alt="Figure 12.13 – The sequence after two rounds"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.13 – The sequence after two rounds</p>
			<p>5 and 8 are now in the correct location (marked with a thicker border), and the algorithm will start over again.</p>
			<p>In the third run, the values <strong class="bold">1</strong>, <strong class="bold">3</strong>, and <strong class="bold">2</strong> will be considered, and after that run, the sequence will look as follows:</p>
			<div><div><img src="img/Figure_12.14_B15554.jpg" alt="Figure 12.14 – The sequence after three rounds"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.14 – The sequence after three rounds</p>
			<p>As we can see, the sequence is now sorted, but the algorithm will pass over the remaining values once more. It will discover that it could go over them without swapping any values, and this means that the sequence is sorted, and we are done.</p>
			<p>The reason bubble sort is inefficient is because it will go over the sequence multiple times. In fact, in the worst case, it will need to do as many passes as there are items. For a short sequence such as this one, this isn't a problem, but for a larger sequence, it will be noticeable.</p>
			<p>Other sorting algorithms are<a id="_idIndexMarker796"/> much more efficient, but they're harder to write code for. Examples of these include Quicksort and Merge sort. We will not cover how they work here as they are somewhat complicated. If you want to know more about these algorithms, you can do a web search – you will find lots of useful resources that will explain how they work and give you readymade code for them in any programming language you want.</p>
			<p>If we compare bubble sort and Quicksort, we will see the difference. On my computer, bubble sort sorted a sequence of 10,000 values in 9.8 seconds. Quicksort managed to sort the same sequence in 0.03 seconds.</p>
			<p>The reason Quicksort and Merge sort will do better in most cases is that they will need to perform fewer operations. It should also be noted that bubble sort can beat the others if the sequence is sorted or almost sorted to begin with. If we have a sorted sequence, bubble sort will go through it once and discover that it is sorted and stop.</p>
			<p>This was just a small example, but it illustrates the impact of choosing an efficient algorithm can have on the performance of your application.</p>
			<p>We will sometimes hear people talk about smart code. What is it, and is it always smart to use it? Let's check it out!</p>
			<h1 id="_idParaDest-196"><a id="_idTextAnchor201"/>Is smart code smart?</h1>
			<p>When you are a beginner programmer, you are happy that your programs work at all, and you will not pay much attention to what your code looks like or how it performs. The important<a id="_idIndexMarker797"/> thing is that you get the result you want on the screen.</p>
			<p>But as you get more experienced and learn more, you will start to embrace what you might consider smart solutions. A smart solution, for you, might be that you can rewrite 10 lines of code so that it now is done in three.</p>
			<p>The question you always should ask yourself is whether changes that are made to working code improve it in any way. Only if they do will the new code be considered smarter than it was before.</p>
			<p>Imagine that you wrote<a id="_idIndexMarker798"/> a little game in Python. It has a loop that runs 10 times, and in each iteration, it will ask the user for a number, either <code>0</code> or <code>1</code>. It will also randomly pick either a <code>0</code> or a <code>1</code>. If the user guessed the same number as the computer picked, the user wins; otherwise, the user loses. The code might look as follows:</p>
			<div><div><img src="img/Figure_12.15_B15554.jpg" alt="Figure 12.15 – A small guessing game in Python"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.15 – A small guessing game in Python</p>
			<p>This program does not have an error checker for if the user enters a number other than 0 or 1, but apart from that, it works fine, and you feel happy.</p>
			<p>But then you feel it is time to code this game smarter, and you end up with something like the following:</p>
			<div><div><img src="img/Figure_12.16_B15554.jpg" alt="Figure 12.16 – Same program as before, written in one line"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.16 – Same program as before, written in one line</p>
			<p>When running the two programs, you won't notice any difference. But is the second version smarter in any way? It sure takes up fewer lines, and if we count, also fewer characters. But what have we gained? Will the second program run faster? That is a somewhat irrelevant question for this kind of application as the program will spend most of its time waiting for the user to enter a number. </p>
			<p>What about readability? Just because the second program has fewer lines and fewer characters does not make it easier to read and understand – it is the opposite. Even an experienced programmer will <a id="_idIndexMarker799"/>need to spend more time understanding the second program compared to the first.</p>
			<p>There is only one reason for you to create something like the second example, and that is as an exercise to use language features, but that's it. Go ahead and make your small programs as compact as you can; you will learn a lot from it, but when writing code that will be used for something else, you should have readability in mind.</p>
			<p>There are situations when small, smart tricks are in their correct places. Look at the following function:</p>
			<pre>function is_legal_age(age)
    if age &gt;= 21 then
         return true
    else
         return false
    end_if
end_function</pre>
			<p>You can pass an <code>age</code> to this function, and it will return <code>true</code> if this age is equal to or greater than <code>21</code>; if not, it will return <code>false</code>.</p>
			<p>This function works, but we can make it smarter, and this time the change will be an improvement. If we think about what is happening inside the function, we see that the <code>if</code> statement will compare the <code>age</code> passed to this function with <code>21</code>. If the <code>if</code> statement is true, we return <code>true</code>. If it is false, we return <code>false</code>. This means that we return the same thing as the condition evaluates to, so why not return that? Let's change the function:</p>
			<pre>function is_legal_age(age)
    return age &gt;= 21
end_function</pre>
			<p>That is a smart change as we made the code more compact and easier to read and got rid of any unnecessary code.</p>
			<p>Being smart when coding can mean different things to different people. I was once working on a telecom project that was written in C. There was a bug, and I was assigned to fix it. But when reading the code, I was horrified. I have tried to recreate what parts of it looked like:</p>
			<div><div><img src="img/Figure_12.17_B15554.jpg" alt="Figure 12.17 – Code that is extremely hard to read"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.17 – Code that is extremely hard to read</p>
			<p>As you can see, there are three <code>if</code> statements nested inside each other. In the real example, there were at least 20 levels<a id="_idIndexMarker800"/> of nested <code>if</code> statements like this!</p>
			<p>Also, the variable names are saying nothing about what data they hold. We need to try to figure out what values these variables will have for us in order to enter the innermost <code>if</code> statement. </p>
			<p>I did spend almost 2 weeks understanding and rewriting the code before I could even begin searching for the bug.</p>
			<p>Now, you might be wondering why I am showing this example here. This can hardly be considered smart code. The consultant who wrote it probably thought this was smart. Maybe the idea was to be irreplaceable, and that can be smart from a consultant's point of view. But that's not smart from the point of view of the company that owns the code. I can also mention that if that was down to the tactics from the consultant's side, it did not work as he or she was no longer with this company. </p>
			<p>Whatever you do, never write code like this. Instead, you should keep some best practices for writing quality code in mind.</p>
			<h1 id="_idParaDest-197"><a id="_idTextAnchor202"/>Code quality – best practices</h1>
			<p>As stated earlier in this chapter, what we<a id="_idIndexMarker801"/> focus on here is the quality of the<a id="_idIndexMarker802"/> code, not the quality of the user experience when using our applications.</p>
			<p>When writing code, there are some things we can keep in mind to make our code <em class="italic">better</em>, quality-wise. </p>
			<p>We will look at some best practices and talk about why it is a good idea to use them.</p>
			<h2 id="_idParaDest-198"><a id="_idTextAnchor203"/>Limiting line length</h2>
			<p>Long lines are never a<a id="_idIndexMarker803"/> good idea. Look at any newspaper and think about why the text hardly ever runs on one line across the full width of the page:</p>
			<div><div><img src="img/Figure_12.18_B15554.jpg" alt="Figure 12.18 – A newspaper uses columns to limit the line length. Photo by Wan Chen on Unsplash"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.18 – A newspaper uses columns to limit the line length. Photo by Wan Chen on Unsplash</p>
			<p>A rule of thumb is that if the line is wider than what can fit on the screen, then it is too wide. Use your common sense and divide the code into several lines if needed, but do so in a way that makes sense.</p>
			<p>Take a look at the following screenshot. The code shown here is just one single statement and could have been written on a single line, but that line would have been very long and hard to read. Instead, it has been broken up in separate lines, and the line breaks occur in a natural location so that the code is easier to read:</p>
			<div><div><img src="img/Figure_12.19_B15554.jpg" alt="Figure 12.19 – A lengthy statement that has been broken up into several lines"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.19 – A lengthy statement that has been broken up into several lines</p>
			<p>Some programming editors will <a id="_idIndexMarker804"/>assist you in determining the maximum length of your code lines by showing a line to indicate when it is time to add a line break.</p>
			<p>It is not only the length of the code lines that should be limited. Next, we will see that this also applies to the length of functions and methods.</p>
			<h2 id="_idParaDest-199"><a id="_idTextAnchor204"/>Limiting function/method length</h2>
			<p>A function or method should do one<a id="_idIndexMarker805"/> thing only, and they should be small. If your functions are hundreds of lines long, you need to make them smaller. When they are 50 lines long, you should probably make them even smaller. </p>
			<p>Long functions are hard to read, and it is hard to follow the logic as it goes in and out of <code>if</code> statements and loops. </p>
			<p>There is no fixed rule for how long a function should be, but I try to keep my functions below 20 lines if I can. </p>
			<p>The important thing is not the actual line count. Instead, you should focus on writing code that is easy to read. To help you write your functions and methods, you should let logic guide you.</p>
			<p>If you have a long function, just by looking at it, there might be clues that it is made up of multiple logical blocks. The things that can be an indication of this is blanks lines in the code as they are often used to indicate a logical transition of sorts. These decided segments of code can be good candidates to be lifted out of the original function and instead go into a function of their own. We can then just call that function from the place where the code was previously.</p>
			<p>Another hint can be code that is indented by more than one level. Each level of indentation marks a block of code. Look at the logic that goes on there and ask yourself if you can't make the code cleaner by turning these blocks into functions.</p>
			<p>Writing high-quality small functions is an art that takes practice to master, but if you don't practice, you will never <a id="_idIndexMarker806"/>master it. Get into the habit of always reviewing code you've written and ask yourself if the function or method you just wrote only does one thing. </p>
			<p>But what is one thing? Is the game Mario Kart one thing? Is asking the user for their credit card number one thing? Is incrementing a number one thing?</p>
			<p>If a function has a single task, then we might be able to break this task into several subtasks. We could then let the main task be a function and let this function call a function for each subtask. </p>
			<p>Look at the following screenshot. Here, we can see a function written in C++. Its task is to search a file for a specified string pattern and replace it with a new pattern. Instead of doing all the steps needed, it is broken up into sub-tasks, each located in a separate function:</p>
			<div><div><img src="img/Figure_12.20_B15554.jpg" alt="Figure 12.20 – An example of a C++ function that uses other functions to fulfill its task"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.20 – An example of a C++ function that uses other functions to fulfill its task</p>
			<p>From the preceding code, we can observe that the following:</p>
			<ol>
				<li value="1">First, we will call a function that reads all the contents of the file specified and returns it to us as a string.</li>
				<li>Next, we will call a function that will call a function called <code>update_content</code>. To this, we are passing the original content of the file, the string we want to be replaced, and the string we want to replace the old string with.<p>This function will return an updated version of the file content. This updated content is then saved to a file with the same name as the original file, and by that, the old file will be overwritten.</p></li>
			</ol>
			<p>As the function names describe what the function is doing and the variable names describe what gets returned from those functions, reading this code is now very easy.</p>
			<p>Reading this function will almost be like reading an index of a book. We can see that, first, we read the content of a file. Good – and if we trust that the only thing that function does is performing exactly the same thing, there is no need for us to go and look at that code. The same thing goes for <code>update_content</code> and <code>save_file_content</code>. </p>
			<p>This is much more readable than what it<a id="_idIndexMarker807"/> would have looked like if we had everything in one function. Look at the preceding screenshot once more and compare it to the following one:</p>
			<div><div><img src="img/Figure_12.21_B15554.jpg" alt="Figure 12.21 – The original update_file function"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.21 – The original update_file function</p>
			<p>When we see these two versions of the function, it is easy to understand why we want to reduce the function's length and let the function and variable names do the documentation.</p>
			<p>If we look at the structure of the code in the preceding screenshot, we can see two blank lines. They divide the code into three sections, and these sections are what we have moved into the three functions. The first section is what became the <code>read_file_content</code> function. The second section became <code>update_content</code>, while the last section became <code>save_file_content</code>.</p>
			<p>When we move the code sections into separate functions, we will need to modify the code slightly, but that is usually not <a id="_idIndexMarker808"/>hard and is done rather quickly. The main logic is already there.</p>
			<p>The final version of all four functions will look something like the following:</p>
			<div><div><img src="img/Figure_12.22_B15554.jpg" alt="Figure 12.22 – The primary function and its three helper functions"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.22 – The primary function and its three helper functions</p>
			<p>If we want to, we can ignore the first three functions and just read the last one to get an idea of what is going on here.</p>
			<p>Another thing we should consider is<a id="_idIndexMarker809"/> avoiding deep nesting when it comes to control structures, such as conditional and loop statements.</p>
			<h2 id="_idParaDest-200"><a id="_idTextAnchor205"/>Avoiding deep nesting </h2>
			<p>It is sometimes tempting to put<a id="_idIndexMarker810"/> several <code>if</code> statements or <code>for</code> loops inside each other. But many levels of nested <code>if</code> statements or <code>for</code> loops can make them hard to read and understand.</p>
			<p>Look at the following code:</p>
			<pre>function calculate_pay(age)
    if age &gt; 65 then
        result = 25000
    else
        if age &gt; 20 then
            result = 20000
        else
            result = 15000
        end_if
    end_if
    return result
end_function</pre>
			<p>Here, we have an <code>if</code> statement and in its <code>else</code> part, we have a new <code>if</code> statement with an <code>else</code> part. This is unnecessarily complex and hard to follow. We can rewrite it like this:</p>
			<pre>function calculate_pay(age)
    if age &gt; 65 then
        return 25000
    if age &gt; 20 then
        return 20000
    return 15000
end_function</pre>
			<p>The two functions will give us the same result, but the second one will return as soon as it knows the correct amount. By doing that, it reduces the number of lines, avoids the nested <code>if</code> statement, and overall makes the code cleaner and easier to read.</p>
			<p>When you have nested<a id="_idIndexMarker811"/> structures that go beyond one level, you should ask yourself if there is a better way to do this. The first thing you can do is what we did here and place the control structures after each other, rather than within each other.</p>
			<p>Another option is to move the logic into separate functions and call them instead. In some situations, this will simplify the code and make it easier to read.</p>
			<p>Another thing we want to avoid is repeating ourselves. To help us avoid that, we can use the DRY principle.</p>
			<h2 id="_idParaDest-201"><a id="_idTextAnchor206"/>Using the DRY principle</h2>
			<p><strong class="bold">DRY</strong> stands for <strong class="bold">Don't Repeat Yourself</strong> and was <a id="_idIndexMarker812"/>formulated by Andy<a id="_idIndexMarker813"/> Hunt and Dave Thomas. It states the following:</p>
			<p><em class="italic">"Every piece of knowledge must have a single, unambiguous, authoritative representation within a system."</em></p>
			<p>This states that we should not repeat the same or similar code more than once. A clear indication that you are about to contradict this principle is when you copy and paste code to a new location in your program, maybe with only some slight changes. This should always be avoided. </p>
			<p>The idea of DRY boils down to dividing the code into small reusable parts. Let's look at an example. </p>
			<p>Let's assume you have some data and that this data is stored in a dictionary type (you can read more about the dictionary type in <a href="B15554_06_Final_NM_ePub.xhtml#_idTextAnchor091"><em class="italic">Chapter 6</em></a>, <em class="italic">Working with Data – Variables</em>, in the <em class="italic">Dictionary type</em> section).</p>
			<p>Sometimes, you want to print this data to the screen, while other times, you want to save it to a file. You might end up with two functions that look as follows:</p>
			<pre>function show(data)
    print data["name"]
    print data["price"]
    print data["weight"]
    print data["height"]
    print data["width"]
end_function
function save(data)
    data_to_save = data["name"] + "\n" +
                   data["price"] + "\n" +
                   data["weight"] + "\n" +
                   data["height"] + "\n" +
                   data["width"] + "\n"
    save_file("data.txt", data)
end_function</pre>
			<p>The first function, <code>show</code>, will print the items in the dictionary on the screen.</p>
			<p>The second function, <code>save</code>, will build a string containing all the items in the dictionary. It adds a line break between <a id="_idIndexMarker814"/>each item. <code>\n</code> means newline and is used to indicate that a linefeed should occur at this location. </p>
			<p>Both functions deal with the same data, but it might not be obvious that we are repeating ourselves here – at least not until we need to update the dictionary. Let's say that we need to add<a id="_idTextAnchor207"/> an item to<a id="_idIndexMarker815"/> the dictionary, maybe the manufacturer. We would need to make changes to both functions. The new code would look like this:</p>
			<pre>function show(data)
    print data["name"]
    print data["manufacturer"]
    print data["price"]
    print data["weight"]
    print data["height"]
    print data["width"]
end_function
function save(data)
    data_to_save = data["name"] + "\n" +
                   data["manufacturer"] + "\n" +
                   data["price"] + "\n" +
                   data["weight"] + "\n" +
                   data["height"] + "\n" +
                   data["width"] + "\n"
    save_file("data.txt", data)
end_function</pre>
			<p>As you can see, the line for the manufacturer was added to both functions. What would happen if we forgot to add it to one of them? At some point, we will discover the difference, but when we do, we can't be sure if the <code>manufacturer</code> line was added to one function or removed from the other.</p>
			<p>Let's apply the DRY principle to the code. If we think about what is happening, we will discover that the <code>show</code> function has multiple lines within <code>print</code>. We also know that <code>print</code> will print something on one line and then insert a line feed so that the next <code>print</code> will start on a new line. </p>
			<p>But what would happen if we had one <code>print</code> that printed a string like the one in the <code>save</code> function? It contains the new line indicator, <code>\n</code>, in all the locations where we want a new line, so printing that string will give the same result as our current <code>show</code> function. </p>
			<p>We can make use of this<a id="_idIndexMarker816"/> and add a function that creates and returns that string, and then both functions can call that function, as shown in the following code:</p>
			<pre>function create_string(data)
    return data["name"] + "\n" +
           data["manufacturer"] + "\n" +
           data["price"] + "\n" +
           data["weight"] + "\n" +
           data["height"] + "\n" +
           data["width"] + "\n"
end_function
function show(data)
    print create_string(data)
end_function
function save(data)
    save_file("data.txt", create_string(data))
end_function</pre>
			<p>Here, we have the <code>create_data</code> function, which creates the string and returns it to the caller. It is called from both the <code>show</code> and the <code>save</code> functions. In <code>show</code>, the <code>create_string</code> function is called first of all, and the string that gets returned will be printed.</p>
			<p>In the <code>save</code> function, we call the <code>create_string</code> function from within the call to a function called <code>save_file</code>. The returned string will be passed as the second argument to the <code>save_file</code> function, just as it was in our first version.</p>
			<p>This also makes the code more<a id="_idIndexMarker817"/> readable and shorter.</p>
			<p>Many languages or software companies have <em class="italic">scandalized</em> the way we format the code we write. This is called <em class="italic">code conventions</em>, and this is what we will look at next.</p>
			<h2 id="_idParaDest-202"><a id="_idTextAnchor208"/>Using code conventions</h2>
			<p>Most programming languages have code<a id="_idIndexMarker818"/> conventions. These are recommendations for how we shall organize our files, indent our code, format comments, and use naming conventions, just to mention a few. </p>
			<p>These are not rules but a recommended<a id="_idIndexMarker819"/> code style and the idea is that if all programmers using a language use the same code convention, their code will look more or less the same. This means that if you know the convention, it is easier for you to navigate the code and read it. It is, therefore, essential to learn the convention for every programming language you are using.</p>
			<p>We will look at some typical conventions and see how they differ among a couple of languages.</p>
			<h3>Naming conventions</h3>
			<p>A naming convention is a<a id="_idIndexMarker820"/> set of rules for formatting the<a id="_idIndexMarker821"/> names of variables, types, functions, and other entities in the source code.</p>
			<p>Sometimes, programming languages come with official naming conventions. Other times, they are not official but commonly used by the community using a language. Some companies have developed their own naming conventions for the code written within that company.</p>
			<p>A naming convention is not about how you name things, but how you format the names. A naming convention dictates how uppercase and lowercase characters should be used and how names consisting of multiple words should be formatted. Some different styles are frequently <a id="_idIndexMarker822"/>used. Let's look at <a id="_idIndexMarker823"/>some of them.</p>
			<h4>Camel case</h4>
			<p>In camel case, each word in<a id="_idIndexMarker824"/> a multi-word name has an initial capital letter, except for the initial letter. For example, if we want to store a value for the outside temperature, the name used for that variable would be <code>outsideTemperature</code> in camel case.</p>
			<p>Camel case is also known as camel caps. The <a id="_idIndexMarker825"/>name refers to the apparent humps that the capital letters form. One early use of this style was by the Swedish chemist Jöns Jacob Berzelius, who suggested, in an 1813 essay in Annals of Philosophy 2, that chemical elements should be written as one-letter or two-letter symbols with the first letter capitalized. That would allow formulae such as <em class="italic">NaCl</em> to be written without any spaces.</p>
			<h4>Pascal case</h4>
			<p>Pascal case is like camel case, with the only<a id="_idIndexMarker826"/> difference being that the first letter is also written using a capital case. So, the pascal case, the outside temperature variable would be named <code>OutsideTemperature</code>.</p>
			<p>Pascal case gets its name from the programming language Pascal. Even though Pascal is case-insensitive, the practice was popularized by the Pascal convention to use this style.</p>
			<h4>Snake case</h4>
			<p>In snake case, all letters are written<a id="_idIndexMarker827"/> in lowercase, and an underscore separates words. The outside temperature variable, when written in snake case, would be <code>outside_temperature</code>.</p>
			<p>Snake case has been in use for a long time but did not have any established name. An early reference to the name <em class="italic">snake_case</em> comes from Gavin Kistner, who, in 2004, wrote a post named <em class="italic">Appropriate use of CamelCase</em> in the group <em class="italic">comp.lang.ruby on Usenet</em>. In it, he said the following: </p>
			<p><em class="italic">"BTW...what *do* you call that naming style? snake_case? That's what I'll call it until someone corrects me."</em></p>
			<h3>Indentation conventions</h3>
			<p>There are several different styles<a id="_idIndexMarker828"/> that are used when it comes to indentation and how compound statements are indicated.</p>
			<p>For languages that use<a id="_idIndexMarker829"/> braces, how the braces are placed is a never-ending debate. Let's look at some variants.</p>
			<p><strong class="bold">K&amp;R style</strong></p>
			<p>The K&amp;R style originates from<a id="_idIndexMarker830"/> the Kernighan and Ritchie book <em class="italic">The C Programming Language</em> from 1978.</p>
			<p>When following this style, each function <a id="_idIndexMarker831"/>has its opening brace on a new line and the same indentation level as the function header.</p>
			<p>Blocks inside the function will have their opening brace at the same line as the statement they are opening.</p>
			<p>The following screenshot shows an example of the K&amp;R style:</p>
			<div><div><img src="img/Figure_12.23_B15554.jpg" alt="Figure 12.23 – The K&amp;R bracing style"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.23 – The K&amp;R bracing style</p>
			<p><strong class="bold">1TBS </strong></p>
			<p><strong class="bold">1TBS</strong> is an<a id="_idIndexMarker832"/> abbreviation for <strong class="bold">one true brace style</strong> and is a<a id="_idIndexMarker833"/> variant on the K&amp;R style. The only difference is that the opening brace for functions is located on the same line as the function header. Also, in 1TBS, control structures only containing one line will always have braces, a habit not <a id="_idIndexMarker834"/>always used in the K&amp;R style. See the following screenshot for an example of this style:</p>
			<div><div><img src="img/Figure_12.24_B15554.jpg" alt="Figure 12.24 – The 1TBS bracing style"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.24 – The 1TBS bracing style</p>
			<p><strong class="bold">Java</strong></p>
			<p>In Java, a commonly accepted <a id="_idIndexMarker835"/>practice is to use the K&amp;R style, extended <a id="_idIndexMarker836"/>so that all opening braces are on the same line as the statement it opens. This applies to control structures, classes, and methods. </p>
			<p>See the following screenshot for an example of this style:</p>
			<div><div><img src="img/Figure_12.25_B15554.jpg" alt="Figure 12.25 – The Java bracing style"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.25 – The Java bracing style</p>
			<p><strong class="bold">Allman style</strong></p>
			<p>The Allman style, named after the<a id="_idIndexMarker837"/> American programmer Eric Allman, puts all opening braces on a new line.</p>
			<p>People arguing for this style means that it becomes easier to see where a block begins and ends, when the <a id="_idIndexMarker838"/>opening and closing braces are on the same indentation level.</p>
			<p>See the following screenshot for an example of this style:</p>
			<div><div><img src="img/Figure_12.26_B15554.jpg" alt="Figure 12.26 – The Allman bracing style"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.26 – The Allman bracing style</p>
			<p><strong class="bold">Lisp or Python style</strong></p>
			<p>This style can be used in any language that <a id="_idIndexMarker839"/>uses braces, but is mostly used by languages that don't use braces and use an<a id="_idIndexMarker840"/> indentation level to identify blocks of code instead, such as Lisp and Python. In the following screenshot, we can see a Lisp program that uses this style:</p>
			<div><div><img src="img/Figure_12.27_B15554.jpg" alt="Figure 12.27 – The Lisp block indentation style"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.27 – The Lisp block indentation style</p>
			<p>In the following screenshot, we can see the same program written in Python, using the same type of indentation to<a id="_idIndexMarker841"/> mark blocks:</p>
			<div><div><img src="img/Figure_12.28_B15554.jpg" alt="Figure 12.28 – The Python block indentation style"/>
				</div>
			</div>
			<p class="figure-caption">Figure 12.28 – The Python block indentation style</p>
			<p>In Python, the indentation levels are<a id="_idIndexMarker842"/> part of the language. This is sometimes called the <strong class="bold">offside rule</strong>, a name coined by the British computer scientist Peter J. Landin, most<a id="_idIndexMarker843"/> likely as a pun on the offside rule in football, compared to languages that use braces, meaning indentation levels are not decided on by the language.</p>
			<p>These are not the only conventions you will find described in a convention document. Next, we will look at some other things you most likely will find when reading them.</p>
			<h3>Other conventions</h3>
			<p>Other conventions might be described for a language. One thing that is often described in a convention document is how comments should be formatted. </p>
			<p>Some languages have<a id="_idIndexMarker844"/> tools that can generate documentation from the comments found in the code. For this to work, the comments must follow a strict format. Some examples of these are Java's Javadoc and Doxygen for C and C++.</p>
			<p>Some languages also support<a id="_idIndexMarker845"/> special kind of comments known as <strong class="bold">docstrings</strong>. They are comments, but when regular comments are stripped away from the executable code by the compiler, they are retained so that the programmer can inspect them when the program is running.</p>
			<p>There can also be conventions for how the source code files should be organized in folders and packages (to learn more about packages, see <a href="B15554_04_Final_NM_ePub.xhtml#_idTextAnchor067"><em class="italic">Chapter 4</em></a>, <em class="italic">Software Projects and How We Organize Our Code</em>, in the <em class="italic">Working with packages to share code</em> section). There can also be conventions in place for how to name files.</p>
			<p>A code convention can also dictate the use of tabs versus spaces when we indent our code. Here, most conventions prefer the use of spaces over tabs, but there are exceptions to this.</p>
			<p>You might also find things that are not directly related to coding and coding style in a coding convention document. For example, one thing that you might find is recommendations for source file encoding. The file encoding dictates how the characters in the file will be interpreted. The two most frequent encodings are ASCII and UTF-8. Sometimes, there are recommendations about part of a file. The convention document might state that <a id="_idIndexMarker846"/>comments or string literals must use a particular encoding, not the whole file.</p>
			<p>Another thing often found in code convention documents is how blanks lines and spaces should be used. For example, in the official Python style guide, called Pep 8, it is stated that two blank lines should separate functions and <a id="_idIndexMarker847"/>methods within a class by one blank line, and that there should never be more than one blank line between code lines within a function or method.</p>
			<p>There can also be recommendations regarding how to write expressions. Again, the Python style guide says that these lines use a recommended style:</p>
			<pre>i = i + 1
submitted += 1
x = x*2 - 1
hypot2 = x*x + y*y
c = (a+b) * (a-b)</pre>
			<p>Compare those to the following lines, which do not follow the recommended style:</p>
			<pre>i=i+1
submitted +=1
x = x * 2 - 1
hypot2 = x * x + y * y
c = (a + b) * (a - b)</pre>
			<p>The last convention we will cover here, which can also be found in code conventions, is how long lines should be break up long lines into several lines.</p>
			<p>For example, when working with a long line that contains binary operators (such as +, -. *, and /), we can break up these operators, but what would happen if the operator appears as the last character on a line or as the first on the next one?</p>
			<p>Look at this example:</p>
			<pre>full_name = title +
            first_name +
            middle_name +
            last_name</pre>
			<p>Now, compare it to this variant, where<a id="_idIndexMarker848"/> the operators are moved to the next line:</p>
			<pre>full_name = title 
            + first_name 
            + middle_name 
            + last_name</pre>
			<p>The American computer scientist Donald Knuth states, in his book <em class="italic">The TeXbook</em> from 1984, the following:</p>
			<p><em class="italic">"Although formulas within a paragraph always break after binary operations and relations, displayed formulas always break before binary operations and relations."</em></p>
			<p>This would suggest that when a formula is printed, it is always printed in the form shown in the second example. This is not a universal truth, though. If you read mathematical texts, you will find both forms represented, and sometimes even a third form where the operator is both at the end of the line and the beginning of the next.</p>
			<p>But sometimes, this argument by Knuth is used to recommend the form where the operator begins a line over the one where it comes at the end.</p>
			<p>Different conventions are a topic most programmers have an opinion about. Still, if there is one in place, either for the language you are using or the project you are working on, you should stick to it, even if it contradicts what you think is a good way of writing code.</p>
			<h1 id="_idParaDest-203"><a id="_idTextAnchor209"/>Summary</h1>
			<p>In this chapter, you have reached the end of this journey into programming, and you now know what it takes to write quality code that is efficient and easy to read and maintain.</p>
			<p>We talked about the fact that we have two aspects of quality when it comes to software – one being the quality of the code and the other being quality from the user's perspective.</p>
			<p>We then turned our attention to how to achieve code quality. First, we talked about how we can create readable code and how this will improve the code's overall quality.</p>
			<p>After that, we looked at how efficient code, which is code that efficiently uses the computer's resources, will improve the quality of our code.</p>
			<p>Smart coding tricks are not always the smart way to write code if code quality is something we value. We saw some examples of things we should avoid.</p>
			<p>Finally, we looked at some best practices that we can use to increase the quality of the code we write.</p>
			<p>With this, we have come to the end of the main chapters of the book. I hope you have enjoyed this journey as much as I have. I have tried to put together everything that is relevant and important from a beginner's point of view, and I am sure many of you will benefit from it.</p>
		</div>
	</body></html>