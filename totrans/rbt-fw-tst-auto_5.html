<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch05"/>Chapter 5. Generating Reports</h1></div></div></div><p>While creating and executing tests does provide numerous benefits, there is a need to convey the results effectively to any viewer of the test, as an acceptance test can provide the fact that a given software can execute in a provided manner but cannot preserve this hypothesis. In this chapter, the concept of test reports in the Robot Framework will be discussed in detail, which covers understanding and customization of the generated reports through provided options, manual as well as automated changes. As the report internals are discussed in detail, report customization can be done with more confidence.</p><div><div><div><div><h1 class="title"><a id="ch05lvl1sec36"/>The need for reports</h1></div></div></div><p>In order to save the events <a id="id171" class="indexterm"/>and actions that occurred during the test execution apart from what appears on the console where the results are displayed to the user, there is a need to create test reports in files as it offers numerous benefits, some of which are outlined as follows:</p><div><div><div><div><h2 class="title"><a id="ch05lvl2sec54"/>Quick-test run assessment</h2></div></div></div><p>The test results can be<a id="id172" class="indexterm"/> recalled at a glance quickly if there is a standardized format that can clearly identify the success or failure of tests as well as easily determining individual test details.</p></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec55"/>Result comparison</h2></div></div></div><p>The test results can be<a id="id173" class="indexterm"/> compared side-by-side for the same acceptance test that can be taken across different states of the same test, across different external variables, or at different times.</p></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec56"/>Individual result detailing</h2></div></div></div><p>The test report can detail the<a id="id174" class="indexterm"/> environment and test execution steps and other data in an ordered manner that is essential to determine the success of a test execution.</p></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec57"/>Intelligent assessment</h2></div></div></div><p>Through the use of reports and logs, it becomes a lot easier for a person to analyze the execution of a test. <a id="id175" class="indexterm"/>This is quite handy when it comes to automation tests as analyzing the causes of failure can be tedious after the test has run. The populated data can also be used to obtain necessary metrics as well infer secondary data, such as performance of tests over a period of time, and to infer other details as necessary.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch05lvl1sec37"/>Generated files</h1></div></div></div><p>As mentioned earlier, the Robot Framework generates two HTML files that are log and report files. These are complementary to each other and while analyzing any project, you will find yourself using both of them. Apart from these files, an XML is generated by default that contains the metadata of all the output of the test results. This is helpful in in many ways that are discussed in detail in this chapter.</p><p>The log file <a id="id176" class="indexterm"/>presents the detailed execution report in a hierarchical manner based on the different test suites. It also has the test statistics, but the high level overview of tests is present in the report file. The report presents the results in multiple ways, detailed in the following sections.</p></div>
<div><div><div><div><h1 class="title"><a id="ch05lvl1sec38"/>Output structure</h1></div></div></div><p>The test report contains the results of test execution under the following headlines that are explained next.</p><div><div><div><div><h2 class="title"><a id="ch05lvl2sec58"/>Heading</h2></div></div></div><p>The heading is <a id="id177" class="indexterm"/>the first element of the page which contains the test name and the time when it was generated. It also displays the elapsed time since its generation.</p></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec59"/>Summary information</h2></div></div></div><p>This contains<a id="id178" class="indexterm"/> the summary of the test, the start and end time of the test, and the total time taken in the test execution.</p><div><div><div><div><h3 class="title"><a id="ch05lvl3sec06"/>Test statistics</h3></div></div></div><p>These are the number of tests that are present in the test; the various tests are grouped on the basis of their criticality,<a id="id179" class="indexterm"/> tag, and suite. By default, all the tests are critical, but you can explicitly specify whether a test is critical or not by passing <code class="literal">--critical</code> or <code class="literal">--noncritical</code> followed by the test name in the pybot/jybot command. Tags can be set/unset in tests through the use of <strong>Set Tags</strong>/<strong>Remove Tags</strong> keywords<a id="id180" class="indexterm"/> in test cases. Additionally, this can be specified in suite setup that tags all the test cases in that suite file.</p></div><div><div><div><div><h3 class="title"><a id="ch05lvl3sec07"/>Test details</h3></div></div></div><p>Test details are <a id="id181" class="indexterm"/>only present in test reports and contain the same information which is present above it in test statistics; however, they provide a more concise view as the different statistics are present in tabular manner. Beneath this column is empty space but as soon as you click any test suite above, a detailed table containing various properties associated with that suite and its children appear and the test details display the information pertaining to the suite.</p></div><div><div><div><div><h3 class="title"><a id="ch05lvl3sec08"/>Test execution log</h3></div></div></div><p>This is only present in <a id="id182" class="indexterm"/>the log file and contains all the logs generated from tests. To see the test suite hierarchy, click on the expand all button to see all the test suite hierarchies present in your tests. It contains the location of suite source files and folders, and information down to the level of keywords present within the tests.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch05lvl1sec39"/>Test coloring information</h1></div></div></div><p>In any xUnit test<a id="id183" class="indexterm"/> result, red denotes failure and green denotes success. This coloring has also led to the popular TDD mantra of "Red, Green, Refactor" in unit tests, which denotes the order of development as first the tests are created with an intention to naturally fail followed by writing code in such a manner that the tests pass and finally refactoring over existing code can be made in such a manner that nothing is broken.</p><p>The following screenshot demonstrates a test application passing entirely as the green color background is clearly visible:</p><div><img src="img/3033_05_01.jpg" alt="Test coloring information"/></div><p>Similarly, the<a id="id184" class="indexterm"/> failure of the test suite can also be reflected through the background color. Note that, even if a single test case fails, the entire report will have the color of failure and the end user can easily take note, as shown in the following screenshot:</p><div><img src="img/3033_05_02.jpg" alt="Test coloring information"/></div><p>This <a id="id185" class="indexterm"/>convention is also followed in the Robot Framework as is evident from the report background color as well as the colors used in the executed tests inside the log file.</p><div><div><div><div><h2 class="title"><a id="ch05lvl2sec60"/>Separating files</h2></div></div></div><p>The generated <a id="id186" class="indexterm"/>reports are generally overwritten on every execution. However, this can be made unique for every run by providing a unique name that can be provided by naming the files with a timestamp. In order to do this, the <code class="literal">pybot</code>/<code class="literal">jybot</code>/<code class="literal">ipybot</code> commands<a id="id187" class="indexterm"/> can be supplied with arguments that insert a timestamp along with the file name, which ensures uniqueness of the file names and ensures that no file overwrite takes place. To do this, there is a need to add the <code class="literal">--timestampoutputs</code> argument to these commands. This inserts the timestamp in the format, <code class="literal">YYYYMMDD-hhmmss</code> between<a id="id188" class="indexterm"/> the name and extension of the generated report file.</p><p>For instance, this can be used to specify the timestamped files:</p><div><pre class="programlisting">
<strong>pybot --timestampoutputs -o metadata -l log -r report testsuites</strong>
</pre></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch05lvl1sec40"/>Making changes in outputs</h1></div></div></div><p>Certain<a id="id189" class="indexterm"/> customizations in the generated report and log file can be made that can be used out of box in the Robot Framework. This can be helpful in setting up the test reports according to requirements without changing the report structure as well as without affecting the codebase in any manner.</p><div><div><div><div><h2 class="title"><a id="ch05lvl2sec61"/>Customizing the report title</h2></div></div></div><p>The <code class="literal">--logtitle</code> and <code class="literal">--reporttitle</code> arguments can be used before the log file and report file names <a id="id190" class="indexterm"/>respectively to set their customized titles; otherwise, the defaults of the Test Log or Test Report are used wherever necessary.</p><div><div><h3 class="title"><a id="note08"/>Note</h3><p>While using custom names through arguments, underscores are converted into spaces just like the test suite file and folder names.</p></div></div><p>In order to not allow files to have the standard <code class="literal">&lt;root test suite&gt; Test Report/Log</code> headline, these options can be used as follows:</p><div><pre class="programlisting">
<strong>pybot --logtitle info_log -l log --reporttitle Tests_at_a_glance -r report testsuites</strong>
</pre></div></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec62"/>Background color customization</h2></div></div></div><p>The color scheme <a id="id191" class="indexterm"/>used in reports does not need to be changed as it confirms the color used in the xUnit configuration and used in most of the other tests/testing tools. However, there may some cases where this might not be as good as other alternatives for example, a color-blind person may have trouble differentiating between the default colors; this could contrast with the colors used in branding, and so on. To specify the colors, <code class="literal">--reportbackground successcolor:failurecolor</code> option is provided where the color names can be provided as is, such as red, blue, yellow, or by providing the color hex codes like #05AE04.</p></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec63"/>Changing how much is logged</h2></div></div></div><p>The logging done in the tests can also be customized, which can help in allowing various elements and information types within the test logs. Various log levels can be assigned that allow<a id="id192" class="indexterm"/> the message to be printed under various scenarios. Some messages, however, are only issued by the Robot Framework itself, such as FAIL, which happens only when some test keyword is missing. Other messages such as Warn, Info, Debug, and Trace can also be used in problems of varying importance, which is similar to how most popular logging frameworks operate.</p><p>Also, logging can be customized by using logging APIs in Python programs where both the <code class="literal">robot.api.logger</code> as well as standard Python logging can be used.</p><p>The <code class="literal">--loglevel</code> argument is used to specify various log levels for the generated log file. If this is done at a level below info, then a dropdown appears below the report link in the log file, as shown in the following image:</p><div><img src="img/3033_05_03.jpg" alt="Changing how much is logged"/></div></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec64"/>Changing the report format</h2></div></div></div><p>At times, there is a need to make slight changes in the generated reports, which can be done either by customizing a CSS for the output files or making changes in the downloaded<a id="id193" class="indexterm"/> source code and rebuilding a custom installation of the framework. In this section, both these strategies of customization are discussed.</p><p>If the log file is opened in a text editor, it will display the internally used CSS that is inline to the file. Similarly, the report also contains jQuery embedded inline. By doing this, the file can be used without any dependency over an external file or website, and the report works over any modern browser.</p><p>These files can be freely used as the user requires but the only thing to remember is that, if the reports are not generated uniquely, then the subsequent executions of the Robot Framework will override the report/log file.</p><p>To do the customization, let's use a previously generated report, where the test is already completed. As this report has already been generated, it cannot be customized. So after loading up the report in the text editor, jump to line number 1247 that contains the JavaScript function which adds the content shown at the top right of the page as shown:</p><div><pre class="programlisting">function addHeader() { 
….
           '&lt;div id="top-right-header"&gt;' + 
             '&lt;div id="report-or-log-link"&gt;&lt;a href="#"&gt;&lt;/a&gt;&lt;/div&gt;' +
           '&lt;/div&gt;', { 
        generated: window.output.generatedTimestamp,
….</pre></div><p>This function loads<a id="id194" class="indexterm"/> up the time elapsed and the link to the other (log/report) file. Here, another div can be appended right after the <code class="literal">report-or-log-link</code> div that contains an image that will serve as our icon. The changed div structure within the same function therefore becomes:</p><div><pre class="programlisting">...
           '&lt;div id="top-right-header"&gt;' + 
             '&lt;div id="report-or-log-link"&gt;&lt;a href="#"&gt;&lt;/a&gt;&lt;/div&gt;' + 
             <strong>'&lt;div id="my_custom_image"&gt;&lt;img src="img/github-icon.jpg" /&gt;&lt;/div&gt;'+ </strong>
           '&lt;/div&gt;', { 
        generated: window.output.generatedTimestamp, 
  ….</pre></div><p>This code will be responsible for the presence of an icon in the report. However, as this is an external image, its path must resolve correctly to the report. So, a web-based image URL can also be used if the report is to be sent between different computers or bundled together with the reports if they are also to be used offline.</p><p>Similarly, if the color of the report needs to be changed right before sending this report to the manager or stakeholder and that person prefers a specific color, then the report can be further tweaked. In line 1472, there is a JavaScript function that sets up the report color:</p><div><pre class="programlisting">function setBackground(topsuite) { 
    var color; 
    if (topsuite.criticalFailed) 
        color = window.settings.background.fail; 
    else if (topsuite.totalFailed) 
        color = window.settings.background.nonCriticalFail; 
    else 
        color = window.settings.background.pass; 
    $('body').css('background-color', color); 
}</pre></div><p>Before changing this function with hardcoded values, the colors used can be manipulated. So, this function can be used to simply set the background color to white by performing the following changes to this function:</p><div><pre class="programlisting">function setBackground(topsuite) { 
    var color = 'White'; 
    $('body').css('background-color', color); 
}</pre></div><div><img src="img/3033_05_04.jpg" alt="Changing the report format"/></div><p>After the previous<a id="id195" class="indexterm"/> two changes, only a page refresh is needed in order to view the changes which include the presence of an icon below the log link as well as changing the background to white.</p><p>This is quite handy while quickly adjusting the generated reports but as this process is manual, changing reports like this becomes a chore, especially if the reports are large in number or are frequently overwritten.</p><p>To solve this limitation, a custom built the Robot Framework can be used. Assuming you have access to the entire Robot Framework repository, the files present in the <code class="literal">src/robot/htmldata</code> folder can be manipulated to send any customized changes into the framework itself; after installing the Robot Framework, such changes become permanent and apply over each and every report generated from the Robot Framework.</p></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec65"/>Creating derived reports</h2></div></div></div><p>Apart from the log and report files, an XML file is also generated as an output from each execution of the <a id="id196" class="indexterm"/>test and at times there may be a need to use these files as a basis for further analysis of tests, such as a time analysis over a piece of software. The XML file can be parsed and analyzed as per the custom requirements. In Python, processing XML is quite easy with the built in <strong>elementtree</strong> library<a id="id197" class="indexterm"/> and the different XML elements can be traversed as a tree and different operations can be performed over them.</p></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec66"/>Recreating reports</h2></div></div></div><p>As mentioned earlier, the Robot Framework provides a tool to recreate test output files from the generated metadata through the use of the <strong>rebot</strong> tool. This tool supports all the arguments of the <code class="literal">pybot</code> command as mentioned in <a class="link" href="ch01.html" title="Chapter 1. Getting Started with the Robot Framework">Chapter 1</a>, <em>Getting Started with the Robot Framework</em> and uses only the XML file generated as an output. This is handy if the other files are not present or while storing a huge collection of test results in only the XML format. However, the most important feature of rebot lies in combining multiple XML files into a single <a id="id198" class="indexterm"/>test, which is handy if you have run the same acceptance test in different environments and want to present the results in a single file.</p><p>Suppose you have test results from different states in files such as state0.xml, state1.xml, state2.xml, and so on in your folder, then you can simply recreate a single test result with a custom named top level test suite by using:</p><div><pre class="programlisting">
<strong>rebot --name Country_Results state/*.xml</strong>
</pre></div></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec67"/>Viewing differences</h2></div></div></div><p>Sometimes, <a id="id199" class="indexterm"/>you have multiple test results and want to compare the differences between themselves. To do this, a diff tool known as <strong>robotdiff</strong><a id="id200" class="indexterm"/> provides comparison between test cases. This is present under the <code class="literal">tools/robotdiff</code> folder in the robotframework source. To generate the comparison, do the following:</p><div><pre class="programlisting">
<strong>python robotdiff.py output1.xml output2.xml output-n.xml</strong>
</pre></div><p>The default generated report is <code class="literal">robotdiff.html</code> in the user home folder and the result is titled "Test Run Diff Report" with each test name obtained from the XML file names.</p></div><div><div><div><div><h2 class="title"><a id="ch05lvl2sec68"/>Further result usage</h2></div></div></div><p>As the<a id="id201" class="indexterm"/> generated metadata result file is in xUnit-compatible XML format, it can be used as an input for external tools that understand this format. One such example is the Jenkins plugin (<a class="ulink" href="https://wiki.jenkins-ci.org/display/JENKINS/Robot+Framework+Plugin">https://wiki.jenkins-ci.org/display/JENKINS/Robot+Framework+Plugin</a>) that supports statistics generation based on these files.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch05lvl1sec41"/>Summary</h1></div></div></div><p>This chapter covered the output customization of the generated contents from test execution as the data and results arising out of tests can be re-used and re-analyzed. The different files and their formats used in the test outputs are detailed in order to proceed with their modification. Different methods of modifying individual reports, as well as report generation itself to suit an organization's demands, are explained. Further pointers on how to modify the framework and use programs to generate custom reports is also mentioned, along with report generation and usage of test reports.</p></div></body></html>