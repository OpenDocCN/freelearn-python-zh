<html><head></head><body><div><div><h2>Chapter 40 <br/>More with Files</h2>
<h3 id="toc_1">40.1 Exercises of a General Nature with Files</h3>
<h4 id="toc_2">Exercise 40.1-1 Calculating the Sum of 10 Numbers</h4>
<p class="my_exercise_wordings">Suppose there is a file named “f_data40.1-1.txt” that contains 10 3-digit integers (separated by a single space character). An example of the structure of the file is shown here.</p>
<div><p>131 500 122 152 127 191 111 290 156 161</p>
</div>
<p class="my_exercise_wordings">Write a Python program that calculates and displays their sum.</p>
<p class="intense_quote">Solution</p>
<p class="my_basic">There are two approaches to iterate through the numbers of this file.</p>
<p class="strong">First approach</p>
<p class="my_basic">In this approach, a string variable named values gets the content of the whole line of the file. Then, the slicing mechanism is used in a for-loop to split the content into individual three-digit numbers. These numbers are then converted to integers using the int() function to calculate their sum.</p>
<div><img alt="" class="my_exercise_header_image" src="img/my_exercise_header.png"/> file_40.1-1a</div>
<div><p>PATH = "c:/temp/"</p>
<div></div>
<p>fin = open(PATH + "f_data40.1-1.txt")</p>
<p>values = fin.readline()</p>
<p>fin.close()</p>
<div></div>
<p>total = 0</p>
<p>for i in range(10):</p>
<p>total += int(values[i * 4 : i * 4 + 3])</p>
<div></div>
<p>print(total)</p>
</div>
<p class="strong">Second approach</p>
<p class="my_basic">A for-loop is used to read and process each of the 10 integers in the file. Within the loop, the fin.read(3) method reads the next 3 characters from the file. Since the file contains 3-digit integers, this reads one integer. The int() function converts the read string to an integer, and then it is added to the total. Next, the second statement within the for-loop reads and ignores the space character that separates the integers.</p>
<div><img alt="" class="my_exercise_header_image" src="img/my_exercise_header.png"/> file_40.1-1b</div>
<div><p>PATH = "c:/temp/"</p>
<div></div>
<p>fin = open(PATH + "f_data40.1-1.txt")</p>
<div></div>
<p>total = 0</p>
<p>for i in range(10):</p>
<p>total += int(fin.read(3))   #Read 3 characters</p>
<p>space = fin.read(1)  #Read and ignore the space character</p>
<p>fin.close()</p>
<div></div>
<p>print(total)</p>
</div>
<h4 id="toc_3">Exercise 40.1-2 Calculating the Average Value of an Unknown Quantity of Numbers</h4>
<p class="my_exercise_wordings">Suppose there is a file named “f_data40.1-2.txt” that contains numbers, one on each line, except the last one which contains the phrase “End of file”. An example of the structure of the file is shown here.</p>
<div><p>16</p>
<p>13.172</p>
<p>33.5</p>
<p>.</div>
<div>.</p>
<p>End of file</p>
</div>
<p class="my_exercise_wordings">Write a Python program that calculates and displays their average value.</p>
<p class="intense_quote">Solution</p>
<p class="my_basic">According to the “Ultimate” rule discussed in <a href="chapter28.html#toc_3">Section 28.3</a>, the while-loop should be as follows, given in general form.</p>
<div><p>sNumber = fin.readline()</p>
<p>while sNumber != "End of file":</p>
<div><p>A statement or block of statements</p></div>
<p>sNumber = fin.readline()</p>
</div>
<p class="my_basic">The final program is as follows.</p>
<div><img alt="" class="my_exercise_header_image" src="img/my_exercise_header.png"/> file_40.1-2</div>
<div><p>PATH = "c:/temp/"</p>
<div></div>
<p>fin = open(PATH + "f_data40.1-2.txt")</p>
<p>total = 0</p>
<p>count = 0</p>
<div></div>
<p>sNumber = fin.readline()</p>
<p>while sNumber != "End of file":</p>
<p>total += float(sNumber)</p>
<p>count += 1</p>
<div></div>
<p>sNumber = fin.readline()</p>
<div></div>
<p>fin.close()</p>
<div></div>
<p>if count &gt; 0:</p>
<p>print(total / count)</p>
</div>
<h4 id="toc_4">Exercise 40.1-3 Finding Minimum and Maximum Values</h4>
<p class="my_exercise_wordings">Suppose there is a file named “f_data40.1-3.txt” that contains numbers, one on each line. An example of the structure of the file is shown here.</p>
<div><p>16</p>
<p>13.172</p>
<p>33.5</p>
<p>.</div>
<div>.</p>
</div>
<p class="my_exercise_wordings">Write a Python program that finds the greatest and lowest values and stores them in a file named “output.txt” in the following form</p>
<div><p>33.5  13.172</p>
</div>
<p class="my_exercise_wordings">Assume that there is at least one value in the file “f_data40.1-3.txt”.</p>
<p class="intense_quote">Solution</p>
<p class="my_basic">The final program is as follows.</p>
<div><img alt="" class="my_exercise_header_image" src="img/my_exercise_header.png"/> file_40.1-3</div>
<div><p>PATH = "c:/temp/"</p>
<div></div>
<p>fin = open(PATH + "f_data40.1-3.txt")</p>
<div></div>
<p>#Read the first value</p>
<p>maximum = float(fin.readline())</p>
<p>minimum = maximum</p>
<div></div>
<p>#Read the rest of the values, line by line</p>
<p>for sNumber in fin:</p>
<p>number = float(sNumber)</p>
<div></div>
<p>if number &gt; maximum:</p>
<div><blockquote><p>maximum = number</p></blockquote></div>
<div></div>
<p>if number &lt; minimum:</p>
<div><blockquote><p>minimum = number</p></blockquote></div>
<div></div>
<p>fin.close()</p>
<div></div>
<p>#Write the greatest and lowest value in a file</p>
<p>fout = open(PATH + "output.txt", "w")</p>
<p>fout.write(str(maximum) + " " + str(minimum))</p>
<p>fout.close()</p>
</div>
<h4 id="toc_5">Exercise 40.1-4 Concatenating Files</h4>
<p class="my_exercise_wordings">Suppose there are two text files named “text1.txt” and “text2.txt”. Write a Python program that concatenates the contents of the two files and writes the concatenated text in a third file named “final.txt”, placing the contents of the file “text1.txt” before the contents of the file “text2.txt”.</p>
<p class="intense_quote">Solution</p>
<p class="my_basic">This exercise can be solved using several approaches. Let's see two of them.</p>
<p class="strong">First approach</p>
<p class="my_basic">The program opens the file “text1.txt”, reads all of its contents, assigns them to the variable contents, and then closes the file. Next, it opens the file “text2.txt”, reads all of its contents, concatenates them with the previous ones (those in the variable contents), and closes the file. Finally, it opens the file “final.txt” and writes the concatenated contents in it, as shown in the program that follows.</p>
<div><img alt="" class="my_exercise_header_image" src="img/my_exercise_header.png"/> file_40.1-4a</div>
<div><p>PATH = "c:/temp/"</p>
<div></div>
<p>fin = open(PATH + "text1.txt")</p>
<p>contents = fin.read()</p>
<p>fin.close()</p>
<div></div>
<p>fin = open(PATH + "text2.txt")</p>
<p>contents += fin.read()  #Concatenation</p>
<p>fin.close()</p>
<div></div>
<p>fout = open(PATH + "final.txt", "w")</p>
<p>fout.write(contents)</p>
<p>fout.close()</p>
</div>
<p class="strong">Second approach</p>
<p class="my_basic">The program that follows opens all the three files at the beginning, writes the concatenated contents, and then closes them.</p>
<div><img alt="" class="my_exercise_header_image" src="img/my_exercise_header.png"/> file_40.1-4b</div>
<div><p>PATH = "c:/temp/"</p>
<div></div>
<p>fin1 = open(PATH + "text1.txt")</p>
<p>fin2 = open(PATH + "text2.txt")</p>
<p>fout = open(PATH + "final.txt", "w")</p>
<div></div>
<p>fout.write(fin1.read() + fin2.read())</p>
<div></div>
<p>fout.close()</p>
<p>fin2.close()</p>
<p>fin1.close()</p>
</div>
<div><p class="notice"><img alt="" class="notice_image" src="img/notice.jpg"/>The order in which you close the files doesn't need to correspond to the order in which you opened them. You can open, for example, the file “text2.txt” first, and close it last, or open it first and close it first.</p>
</div>
<h4 id="toc_6">Exercise 40.1-5 Searching in a File</h4>
<p class="my_exercise_wordings">In the United States, the Social Security Number (SSN) is a nine-digit identity number applied to all U.S. citizens in order to identify them for the purposes of Social Security. Suppose there is a file named “SSN.txt” that contains the SSNs (Social Security Numbers) of all citizens of the state of California, as well as their full name, one record on each line. An example of the structure of the file is shown here.</p>
<div><p>123456789 Aristides Bouras</p>
<p>123000000 Loukia Ainarozidou</p>
<p>121212121 John Papas Junior</p>
<p>.</div>
<div>.</p>
</div>
<p class="my_exercise_wordings">Write a Python program that prompts the user to enter the first digits of an SSN to search and then searches in the file and displays the first and last names of all citizens whose SSN starts with those digits.</p>
<p class="intense_quote">Solution</p>
<p class="my_basic">In this particular exercise, if the user enters all nine digits of an SSN to search, and this SSN is found, the program must display the first and last name of the corresponding citizen and stop searching thereafter. On the other hand, if the user enters less than nine digits to search, the program must search and display the first and last name of all the citizens whose SSN starts with those digits. The solution to this exercise is as follows.</p>
<div><img alt="" class="my_exercise_header_image" src="img/my_exercise_header.png"/> file_40.1-5</div>
<div><p>PATH = "c:/temp/"</p>
<div></div>
<p>ssnToSearch = input("Enter an SSN to search: ")</p>
<p>length = len(ssnToSearch)</p>
<div></div>
<p>fin = open(PATH + "SSN.txt")</p>
<div></div>
<p>found = False</p>
<p>for line in fin:</p>
<p>ssn = line[:9]</p>
<p>fullName = line[10:]</p>
<div></div>
<p>#If it is found</p>
<p>if ssnToSearch == ssn[0:length]:</p>
<div><blockquote><p>print(fullName, end = "")  #Variable fullName already contains a line break</p></blockquote></div>
<div><blockquote><p>found = True</p></blockquote></div>
<div></div>
<div><blockquote><p>#If SSN to search contains 9 digits and it is found, exit loop</p></blockquote></div>
<div><blockquote><p>if length == 9:</p></blockquote></div>
<div><blockquote><blockquote><p>break</p></blockquote></blockquote></div>
<div></div>
<p>fin.close()</p>
<p>if not found:</p>
<p>print("Not found!")</p>
</div>
<h4 id="toc_7">Exercise 40.1-6 Combining Files with Subprograms</h4>
<p class="my_exercise_wordings">Do the following:</p>
<p>i)Write a subprogram named readContent that accepts the filename of a file and returns its contents.</p>
<p>ii)Write a subprogram named writeContent that accepts the filename of a file and a string, and writes that string in the file.</p>
<p>iii)Using the subprograms cited above, write a Python program that prompts the user to enter the filenames of two files and then copies the contents of the first file to the second one. Assume that the user enters valid filenames.</p>
<p class="intense_quote">Solution</p>
<p class="my_basic">Even though this particular exercise seems quite easy, it is necessary to highlight some things about the readContent() function. Examine the readContent() function that follows and try to find the error it contains. The error is a logic error, not a syntax one. This function is executed successfully without any syntax errors thrown by the Python interpreter. However, the error is there and quite difficult to spot!</p>
<div><p>def readContent(filename):</p>
<p>fin = open(filename)</p>
<p>return fin.read()</p>
<p>fin.close()</p>
</div>
<p class="my_basic">What happens here is that, when the return statement is executed, Python ignores the rest of the statements of the function, which means that the file probably won't close. Imaging calling this particular function many times in a program. You would end up with many open files that will probably never close.</p>
<div><p class="notice"><img alt="" class="notice_image" src="img/notice.jpg"/>Latest versions of Python will probably close the file automatically when there is no reference (fin) to it, but it is bad practice to leave a file open and wait for Python to close it for you.</p>
</div>
<p class="my_basic">A good practice is to place the return statement at the end of the function, as shown in the following program.</p>
<div><img alt="" class="my_exercise_header_image" src="img/my_exercise_header.png"/> file_40.1-6</div>
<div><p>def readContent(filename):</p>
<p>fin = open(filename)</p>
<p>contents = fin.read()</p>
<p>fin.close()</p>
<p>return contents</p>
<div></div>
<p>def writeContent(filename, contents):</p>
<p>fout = open(filename, "w")</p>
<p>fout.write(contents)</p>
<p>fout.close()</p>
<div></div>
<p>#Main code starts here</p>
<p>source = input("Enter source filename: ")</p>
<p>destination = input("Enter destination filename: ")</p>
<div></div>
<p>c = readContent(source)         #Equivalent to:</p>
<p>writeContent(destination, c)    #writeContent(destination, readContent(source))</p>
</div>
<h3 id="toc_8">40.2 Review Exercises</h3>
<p class="my_basic">Complete the following exercises.</p>
<p>1)Suppose there is a file named “f_data40.2-1.txt” that contains 10 2-digit integers (separated by a single space character). An example of the structure of the file is shown here.</p>
<div><p>13 55 12 61 12 19 80 91 15 16</p>
</div>
<p class="my_basic ptab1 KBHeading">Write a Python program that calculates and displays the average value of those that are greater than 50.</p>
<p>2)Suppose there is a file named “f_data40.2-2.txt” that contains 3-digit integers (separated by a comma character). An example of the structure of the file is shown here.</p>
<div><p>130,501,322,415,527,191</p>
</div>
<p class="my_basic ptab1 KBHeading">Write a Python program that calculates and displays the average value of those that are between 300 and 500. Assume there is at least one number in the file.</p>
<p>3)Suppose there is a file named “f_data40.2-3.txt” that contains the grades and the full names of the students of a class (separated by a comma character), one record on each line. An example of the structure of the file is shown here.</p>
<div><p>96,George Papas</p>
<p>100,Anna Maria Garcia</p>
<p>89,Peter Smith</p>
<p>.</div>
<div>.</p>
</div>
<p class="my_basic ptab1 KBHeading">Write a Python program that finds and displays the full name of the best and the worst student of the class. Assume there is at least one record in the file and that all of the grades are different.</p>
<p>4)The IT administrator of a transportation company needs a program to extract useful information from a file named “f_data40.2-4.txt” regarding the items the company transports. Suppose the file contains the width, length, height and description of each item. The dimensions of the items are in inches and each dimension occupies 4 characters in the file (2 characters for the integer part, one for the decimal point and one for the decimal digit). An example of the file's structure is shown below:</p>
<div><p>110.5 011.2 020.9 Box No 37 (Plastic bottles)</p>
<p>022.6 023.1 040.2 Container No 23 (6 glasses)</p>
<p>009.5 156.6 020.0 Package No 12 (Fragile items)</p>
<p>024.2 020.1 030.1 Container No 29 (Glass bottles)</p>
</div>
<p class="my_basic ptab1 KBHeading">Write a Python program that:</p>
<p>i)prompts the user to enter a keyword to search within the description of the items. For example, if the user enters the word “glass”, then the program must display the following messages</p>
<p class="my_basic ptab3 KBHeading">Keyword 'glass' found!</p>
<p class="my_basic ptab3 KBHeading">Container No 23 (6 glasses) – Dimensions: 22.6 x 23.1 x 40.2</p>
<p class="my_basic ptab3 KBHeading">Container No 29 (Glass bottles) - Dimensions: 24.2 x 20.1 x 30.1</p>
<p>ii)finds and displays the volume (in cubic feet) of each item. The messages must be formatted as in the example below:</p>
<p class="my_basic ptab3 KBHeading">Volume of each item:</p>
<p class="my_basic ptab3 KBHeading">Box No 37 (Plastic bottles): Volume = 14.9686 cubic feet</p>
<p class="my_basic ptab3 KBHeading">Container No 23 (6 glasses): Volume = 12.1451 cubic feet</p>
<p class="my_basic ptab3 KBHeading">Package No 12 (Fragile items): Volume = 17.2187 cubic feet</p>
<p class="my_basic ptab3 KBHeading">Container No 29 (Glass bottles): Volume = 8.472940 cubic feet</p>
<p>iii)finds and displays the total volume (in cubic feet) of all the items.</p>
<p>iv)finds and displays the description of the box with the greatest volume.</p>
<p class="my_basic ptab1 KBHeading">Keep in mind that one cubic foot is equivalent to 1728 cubic inches.</p>
<p>5)Write a Python program that prompts the user to enter the filenames of two files. The program must then concatenate the contents of the two files and write the concatenated text in a third file named “final.txt”, placing the contents of the first file after the contents of the second file. If the user-provided filenames do not contain the “.txt” extension the program must display an error message.</p>
<p>6)Suppose there is a file named “f_data40.2-6.txt” that contains 15 numbers, one on each line. Write a Python program that sorts those numbers in ascending order using the bubble sort algorithm and writes the sorted values in the same file, below the initial unsorted values.</p>
<p>7)Suppose there is a file named “f_data40.2-7.txt” that contains names of eight cities as well as their maximum temperatures on a specific day. An example of the structure of the file is shown here.</p>
<div><p>New York</p>
<p>82.3</p>
<p>Washington DC</p>
<p>84.3</p>
<p>.</div>
<div>.</p>
</div>
<p class="my_basic ptab1 KBHeading">Thus, the odd-numbered lines contain city names and the even-numbered lines contain the maximum temperature of each city. Write a Python program that reads the file line by line and stores the city names and the temperatures in the lists cities and temperatures correspondingly. Assume there is at least one name of a city and its corresponding temperature in the file. The program must then</p>
<p>i)calculate and display the average temperature of all cities.</p>
<p>ii)find and display the highest temperature as well as all city names that have this temperature.</p>
<p>8)Some words such as “revolutionary” and “internationalization” are so lengthy that writing them out repeatedly can become quite tiresome. Let's consider a word too long if its length is more than 10 characters. In such cases, this word must be replaced with a special abbreviation which is made like this: you keep the first and the last letter of the word and insert the number of letters between them. For instance, “revolutionary” becomes “r11y” and “internationalization” becomes “i18n”.</p>
<p class="my_basic ptab1 KBHeading">Suppose there is a file named “f_data40.2-8.txt” that contains an English text. Do the following:</p>
<p>i)Write a subprogram named abbreviate that accepts a word and when it is more than 10 characters long, it returns its abbreviation; it must return the same word otherwise.</p>
<p>ii)Using the subprogram cited above, write a Python program that reads the text from the file and displays it with all long words replaced by their abbreviations.</p>
<p class="my_basic ptab1 KBHeading">Assume that the words are separated by a single space character.</p>
<p>9)Pig Latin is a playful language game often used in English-speaking countries. It involves altering the letters of a word based on a set of simple rules. Here are the rules for translating a word into Pig Latin:</p>
<p>►If the word begins with a vowel, simply add “way” to the end of the word. For example, “apple” becomes “appleway”.</p>
<p>►If the word begins with one or more consonants, move the consonant(s) to the end of the word and add “ay”. For example, “banana” becomes “ananabay” and “flower” becomes “owerflay”.</p>
<p class="my_basic ptab1 KBHeading">Suppose there is a file named “f_data40.2-9.txt” that contains an English text. Do the following:</p>
<p>i)Write a subprogram named pigLatinTranslator that accepts an English word and returns the corresponding Pig Latin translation.</p>
<p>ii)Using the subprogram cited above, write a Python program that reads the text from the file and writes the corresponding Pig Latin translation in a file named “pig_latin_translation.txt”.</p>
<p class="my_basic ptab1 KBHeading">Assume that the text contains only lowercase characters of the English alphabet and the words are separated by a single space character.</p>
<p>10)Given two strings, X = "ABCDEFGHIJKLMNOPQRSTUVWXYZ" and Y = "JKWCTAMEDXSLFBYUNG RZOIQVHP", you can encrypt any message. The person who holds the Y string can decrypt the encrypted message by mapping the letters of string X to string Y, one by one. To be more specific, the letter “A” is encrypted as “J”, the letter “B” as “K”, the letter “C” as “W”, and so on. According to this encryption method, write a Python program that prompts the user to enter a message and then writes the encrypted message in a file named “encrypted.txt”. Space characters must not be encrypted and should remain as is in the encrypted message.</p>
<p>11)Write a Python program that decrypts the message of the previous exercise (in the file “encrypted.txt”) and writes the decrypted message in a file named “decrypted.txt”.</p>
<p>12)Write a subprogram named copyFile that accepts two arguments (source and destination) and then creates a new copy of the file source using the name destination.</p>
<p>13)Suppose there is a file named “f_data40.2-13.txt” that contains the lengths of all three sides of a triangle (one on each line). An example of the structure of the file is shown here.</p>
<div><p>16.0</p>
<p>20.6</p>
<p>22.7</p>
</div>
<p class="my_basic ptab1 KBHeading">Do the following</p>
<p>i)Write a class named Triangle that includes</p>
<p>a)a constructor that reads the three sides from the file and assigns them to three private fields named _sideA, _sideB, and _sideC.</p>
<p>b)a method named canBeTriangle that checks and returns True when the values in fields _sideA, _sideB, and _sideC can be lengths of the three sides of a triangle. It must return False otherwise.</p>
<p class="my_basic ptab5 KBHeading">Hint: In any triangle, the length of each side is less than the sum of the lengths of the other two sides.</p>
<p>c)a void method named displayLengths that displays the lengths of all three sides as well as a message indicating whether those lengths can be lengths of the three sides of a triangle or not.</p>
<p>d)a void method named displayArea that, in case the lengths can be lengths of the three sides of a triangle, calculates and displays the area of the triangle. You can use Heron's formula, which has been known for nearly 2,000 years!</p>
<p class="my_basic ptab5 centered_image KBHeading">.<img alt="Image" class="height2" src="img/chapter12-24.png"/></p>
<p class="my_basic ptab5 KBHeading">where S is the semi-perimeter <img alt="Image" class="height2" src="img/chapter12-25.png"/></p>
<p>e)a void method named displayPerimeter that, in case the lengths can be lengths of the three sides of a triangle, calculates and displays the perimeter of the triangle.</p>
<p>ii)Using the class cited above, write a Python program that displays all available information about the triangle.</p>
</div></div></body></html>