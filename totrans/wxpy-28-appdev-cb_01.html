<html><head></head><body>
  <div id="sbo-rt-content"><div class="chapter" title="Chapter 1. Getting Started with wxPython"><div class="titlepage"><div><div><h1 class="title"><a id="ch01"/>Chapter 1. Getting Started with wxPython</h1></div></div></div><p>In this chapter, we will cover the components that are at the foundation of nearly all wxPython applications, such as:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The application object</li><li class="listitem" style="list-style-type: disc">The main frame</li><li class="listitem" style="list-style-type: disc">Understanding the window hierarchy</li><li class="listitem" style="list-style-type: disc">Referencing controls</li><li class="listitem" style="list-style-type: disc">Using Bitmaps</li><li class="listitem" style="list-style-type: disc">Adding icons to Windows</li><li class="listitem" style="list-style-type: disc">Utilizing Stock IDs</li><li class="listitem" style="list-style-type: disc">Accessing the clipboard</li><li class="listitem" style="list-style-type: disc">Supporting drag and drop</li><li class="listitem" style="list-style-type: disc">Two-stage widget creation</li><li class="listitem" style="list-style-type: disc">Understanding inheritance limitations</li></ul></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec01"/>Introduction</h1></div></div></div><p>In today's world of desktop applications there is a great amount of incentive to be able to develop applications that can run on multiple operating systems and desktop platforms. Currently there are a handful of cross-platform Python frameworks that can be used to develop desktop applications. The wxPython Library is a set of Python bindings to the wxWidgets Library, which is a powerful cross-platform C++ application framework that can be used to create user interfaces. What sets wxPython apart is that, unlike other UI toolkits that draw their own controls, wxPython uses the platform's own native UI toolkit for creating and displaying UI components. This means that a wxPython application will have the same look and feel as other applications on the system since it is using the same controls and themes as the rest of the system.<a id="id0" class="indexterm"/>
</p><p>Developing an application in wxPython provides great flexibility for writing applications that will run on Windows, Macintosh OS X, Linux, and other UNIX like environments. Applications can rapidly be developed on one platform and often deployed to another with little or no changes necessary.</p></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="The application object"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec02"/>The application object</h1></div></div></div><p>The<code class="literal"> App</code> object bootstraps the library and initializes the underlying toolkit. All wxPython applications must create an<code class="literal"> App</code> object. This should be instantiated before trying to create any other GUI objects to ensure that all the dependant parts of the library have been properly initialized. The<code class="literal"> App</code> object also maintains the<code class="literal"> MainLoop</code>, which is used to drive a wxPython application.<a id="id1" class="indexterm"/>
</p><p>This recipe will demonstrate the basic pattern that all wxPython applications can be built from.<a id="id2" class="indexterm"/>
</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec01"/>How to do it...</h2></div></div></div><p>Here we will create a "Hello World" like application to show the basic structure of a wxPython application:</p><div class="informalexample"><pre class="programlisting">import wx

class MyApp(wx.App):
    def OnInit(self):
        wx.MessageBox("Hello wxPython", "wxApp") 
        return True

if __name__ == "__main__":
    app = MyApp(False)
    app.MainLoop()


</pre></div><p>Running the previous script will result in the following pop-up dialog shown on the screen. Click on<span class="strong"><strong> OK</strong></span> to close it and exit the application.</p><div class="mediaobject"><img src="images/1780_01_01.jpg" alt="How to do it..."/></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec02"/>How it works...</h2></div></div></div><p>The application object calls its<code class="literal"> OnInit</code> method when it is created. This method is overridden and used as the main entry point for initializing this application. By returning<code class="literal"> True</code>, the method informs the framework that it is good to go.<code class="literal"> OnInit</code> is where most applications will do their initialization and create their main window(s).<a id="id3" class="indexterm"/>
</p><p>In this example, we created the<code class="literal"> App</code> object by passing<code class="literal"> False</code> as the first argument. This argument is used to tell wxPython whether to redirect output or not. When developing an application, it is advised to always set this to<code class="literal"> False</code>, and to run scripts from the command line so that you can see any error output that might be missed when running the script by double clicking on it.</p><p>After creating the application object and once all initializations are complete, the last thing that you need to do is to call the<code class="literal"> App</code> objects<code class="literal"> MainLoop</code> method in order to start the event loop. This method will not return until the last top-level window is destroyed or until the<code class="literal"> App</code> object is told to exit. wxPython is an event-driven system and the<code class="literal"> MainLoop</code> is the heart of the whole system. During each iteration of the loop, events are dispatched to perform all of the tasks in the GUI, such as handling mouse clicks, moving the window, and redrawing the screen.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec03"/>There's more...</h2></div></div></div><p>The<code class="literal"> wx.App</code> class constructor has four optional keyword arguments:<a id="id4" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">wWx.App((redirect=True, filename=None, 
       useBestVisual=False,clearSigInt=True))
</pre></div><p>The four optional keyword arguments are as follows:<a id="id5" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">redirect:</code> Redirect<code class="literal"> stdout</code>.<a id="id6" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">filename:</code> If redirect is<code class="literal"> True</code> this can be used to specify an output file to redirect to.<a id="id7" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">useBestVisual:</code> Specifies whether the application should try to use the best visuals provided by the underlying toolkit. (It does not have an affect on most systems.)<a id="id8" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">clearSigInt:</code> Should<code class="literal"> SIGINT</code> be cleared? Setting this to<code class="literal"> True</code> will allow the application to be terminated by pressing<span class="emphasis"><em> Ctrl</em></span> +<span class="emphasis"><em> C</em></span>, like most other applications.<a id="id9" class="indexterm"/></li></ul></div></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="The main frame"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec03"/>The main frame</h1></div></div></div><p>For most applications, you will want to display a window for its users to interact with. In wxPython, the most typical window object is known as a<code class="literal"> Frame</code>. This recipe will show you how to sublass a<code class="literal"> Frame</code> and display it in an application.<a id="id10" class="indexterm"/>
</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec04"/>How to do it...</h2></div></div></div><p>This example extends upon the previous recipe to add a minimal empty application window:</p><div class="informalexample"><pre class="programlisting">import wx

class MyApp(wx.App):
    def OnInit(self):
        self.frame = MyFrame(None, title="The Main Frame")
        self.SetTopWindow(self.frame)
        self.frame.Show()

        return True

class MyFrame(wx.Frame):
    def __init__(self, parent, id=wx.ID_ANY, title="", 
                 pos=wx.DefaultPosition, size=wx.DefaultSize,
                 style=wx.DEFAULT_FRAME_STYLE,
                 name="MyFrame"):
        super(MyFrame, self).__init__(parent, id, title,
                                      pos, size, style, name)

        # Attributes
        self.panel = wx.Panel(self)

if __name__ == "__main__":
    app = MyApp(False)
    app.MainLoop()


</pre></div><p>Running the previous code will result in a window like the following being shown:</p><div class="mediaobject"><img src="images/1780_01_02.jpg" alt="How to do it..."/></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec05"/>How it works...</h2></div></div></div><p>The<code class="literal"> Frame</code> is the main top-level window and container for most applications. Let's start by examining our<code class="literal"> MyFrame</code> class. In this class there is one important thing to note. We created a<code class="literal"> Panel</code> object as a child window of the<code class="literal"> Frame</code>. You can think of a<code class="literal"> Panel</code> as a box for containing other controls. Also, in order for a<code class="literal"> Frame</code> to operate and look correct on all platforms, it is important that it has a<code class="literal"> Panel</code> as its main child.<a id="id12" class="indexterm"/>
</p><p>Firstly, in the<code class="literal"> OnInit</code> method of our<code class="literal"> App</code>, we create an instance of<code class="literal"> MyFrame</code>, passing<code class="literal"> None</code> as its first parameter. This parameter is used to specify the parent window of the<code class="literal"> Frame</code>. Because this is our main window, we pass in<code class="literal"> None</code> to indicate that it has no parent. Secondly, we call the<code class="literal"> SetTopWindow</code> method of our<code class="literal"> App</code> in order to set our newly-created<code class="literal"> MyFrame</code> instance as the application's top window. Thirdly and finally, we call<code class="literal"> Show</code> on our<code class="literal"> Frame</code>; this simply does what its name suggests, and shows the<code class="literal"> Frame</code> so that a user can see it, though the<code class="literal"> Frame</code> will not actually be visible on the screen until the<code class="literal"> MainLoop</code> is started.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec06"/>There's more...</h2></div></div></div><p>The<code class="literal"> Frame</code> class has a number of style flags that can be set in its constructor to modify the behavior and appearance of the window. These style flags can be combined as a bitmask and are supplied as the value to the constructors' style parameter. The following table outlines some of the common ones. A full list of all available styles can be found in the wxPython online documentation, at<a class="ulink" href="http://wxpython.org/onlinedocs.php"> http://wxpython.org/onlinedocs.php</a>.<a id="id13" class="indexterm"/>
</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Style flags</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.DEFAULT_FRAME_STYLE</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This is a bitwise OR of the following flags:
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">wx.MINIMIZE_BOX</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.MAXIMIZE_BOX</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.RESIZE_BORDER</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.SYSTEM_MENU</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.CAPTION</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.CLOSE_BOX</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.CLIP_CHILDREN</code></li></ul></div><p>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.MINIMIZE_BOX</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Display a title bar button that minimizes the Frame</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.MAXIMIZE_BOX</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Display a title bar button that maximizes the Frame</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.CLOSE_BOX</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Display a title bar button that allows the Frame to be closed. (the "X" button)</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.RESIZE_BORDER</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Allow the Frame to be resized by the user when they drag the border</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.CAPTION</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Displays a caption on the Frame</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.SYSTEM_MENU</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Display a system menu (that is, the menu that is shown when clicking in the frames icon on Windows)</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.CLIP_CHILDREN</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Eliminates flicker caused by the background being repainted (Windows only)</p>
</td></tr></tbody></table></div></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Understanding the window hierarchy"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec04"/>Understanding the window hierarchy</h1></div></div></div><p>All of the different windows and controls in wxPython have a hierarchy of containment. Some controls can be containers for other controls and some cannot. This recipe is geared towards giving an understanding of this hierarchy.<a id="id14" class="indexterm"/>
</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec07"/>Getting ready</h2></div></div></div><p>We will be making just a minor change to the<code class="literal"> Frame</code> from the previous recipe, so let's open the code from that recipe to get ready for the new changes.<a id="id15" class="indexterm"/>
</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec08"/>How to do it...</h2></div></div></div><p>Here is the new code that will replace our existing Frame class.</p><div class="informalexample"><pre class="programlisting">class MyFrame(wx.Frame):
    def __init__(self, parent, id=wx.ID_ANY, title="", 
                 pos=wx.DefaultPosition, size=wx.DefaultSize,
                 style=wx.DEFAULT_FRAME_STYLE,
                 name="MyFrame"):
        super(MyFrame, self).__init__(parent, id, title,
                                      pos, size, style, name)

        # Attributes
        self.panel = wx.Panel(self)
        self.panel.SetBackgroundColour(wx.BLACK)
        self.button = wx.Button(self.panel,
                                label="Push Me",
                                pos=(50, 50))

</pre></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec09"/>How it works...</h2></div></div></div><p>Basically, there are three general categories of window objects that are tiered, in the following containment order:<a id="id16" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Top-Level Windows (Frames and Dialogs)</li><li class="listitem" style="list-style-type: disc">General Containers (Panels and Notebooks, ...)</li><li class="listitem" style="list-style-type: disc">Controls (Buttons, CheckBoxes, ComboBoxes, ...)</li></ul></div><p>The Top-Level Window is at the top of the hierarchy and it can contain any kind of window except another Top-Level Window. General Containers come next, and they can arbitrarily hold any other General Container or Control. Finally, at the bottom of the Hierarchy are the Controls. These are the functional part of a UI that the user will interact with. They can, in some cases, be used to hold other controls, but typically will not. The containment hierarchy is connected to the parental hierarchy of controls. A parent will be the container for its children.</p><p>When running the previous sample, this hierarchy becomes apparent. The<code class="literal"> Frame</code>, as we have previously seen, is the outer-most container object; next you can see the<code class="literal"> Panel</code>, which we turned black to make it more visible; finally you can see the<code class="literal"> Button</code>, which was added as a child of the<code class="literal"> Panel</code>.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec10"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The<span class="emphasis"><em> Referencing controls</em></span> recipe in this chapter offers further explanation as to how the window hierarchy is connected together.</li></ul></div></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Referencing controls"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec05"/>Referencing controls</h1></div></div></div><p>All<code class="literal"> Window</code> objects in an application are connected in various ways. Quite often it is useful to get a reference to an instance of a control so that you can perform some operation on the control or retrieve some data from it. This recipe will show some of the facilities that are available for finding and getting references to controls.<a id="id17" class="indexterm"/>
</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec11"/>How to do it...</h2></div></div></div><p>Here we extend the<code class="literal"> MyFrame</code> class from the previous recipe to have an event handler for when its Button is clicked. In the event handler we can see some ways to access different controls in our UI during runtime:</p><div class="informalexample"><pre class="programlisting">class MyFrame(wx.Frame):
    def __init__(self, parent, id=wx.ID_ANY, title="", 
                 pos=wx.DefaultPosition, size=wx.DefaultSize,
                 style=wx.DEFAULT_FRAME_STYLE,
                 name="MyFrame"):
        super(MyFrame, self).__init__(parent, id, title,
                                      pos, size, style, name)

        # Attributes
        self.panel = wx.Panel(self)
        self.panel.SetBackgroundColour(wx.BLACK)
        button = wx.Button(self.panel,
                           label="Get Children",
                           pos=(50, 50))
        self.btnId = button.GetId()

        # Event Handlers
        self.Bind(wx.EVT_BUTTON, self.OnButton, button)

    def OnButton(self, event):
        """Called when the Button is clicked"""
        print "\nFrame GetChildren:"
        for child in self.GetChildren():
            print "%s" % repr(child)

        print "\nPanel FindWindowById:"
        button = self.panel.FindWindowById(self.btnId)
        print "%s" % repr(button)
        # Change the Button's label
        button.SetLabel("Changed Label")

        print "\nButton GetParent:"
        panel = button.GetParent()
        print "%s" % repr(panel)

        print "\nGet the Application Object:"
        app = wx.GetApp()
        print "%s" % repr(app)

        print "\nGet the Frame from the App:"
        frame = app.GetTopWindow()
        print "%s" % repr(frame)

</pre></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec12"/>How it works...</h2></div></div></div><p>Each window in the framework keeps a reference to its parent and to its children. Running our program now will print out the results of using the accessor functions that all windows have for finding and retrieving references to their children and other related controls.<a id="id20" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">GetChildren:</code> This method will return a list of all of the children that the given control has<a id="id21" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">FindWindowById:</code> This can be used to find a specific child window by using its ID<a id="id22" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">GetParent:</code> This method will retrieve the window's parent window<a id="id23" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.GetApp:</code> This is a global function for getting access to the one and only application object<a id="id24" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">App.GetTopWindow:</code> This gets the main Top-Level Window in the application<a id="id25" class="indexterm"/></li></ul></div><p>Clicking on the<code class="literal"> Button</code> will cause the<code class="literal"> OnButton</code> method to be called. In<code class="literal"> OnButton</code>, there are examples that show how to use each of the above methods. Each of them will return a reference to a GUI object. In our example, calling<code class="literal"> GetChildren</code> on the<code class="literal"> Panel</code> will return a list of its children controls. Iterating over this list, we print out each of the children, which will just be the Button in this case.<code class="literal"> FindWindowById</code> can be used to find a specific child control; again, we called this on our<code class="literal"> Panel</code> to find the<code class="literal"> Button</code> control. Just to show that we found the<code class="literal"> Button</code>, we used its<code class="literal"> SetLabel</code> method to change its label. Next, calling<code class="literal"> GetParent</code> on the<code class="literal"> Button</code> will return the<code class="literal"> Button's</code> parent, which is the<code class="literal"> Panel</code>. Finally, by using the global<code class="literal"> GetApp</code> function, we can get a reference to the application object. The<code class="literal"> App</code> object's<code class="literal"> GetTopWindow</code> will return a reference to our Frame.<a id="id26" class="indexterm"/>
</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec13"/>There's more...</h2></div></div></div><p>Here are a few more useful methods available for getting references to controls.</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Function Name</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.FindWindowByLabel(label)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Finds a child window by looking for it by Label</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.FindWindowByName(name)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Finds a child window by looking for it by Name</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.GetTopLevelParent()</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Gets the Top-Level Window, which is at the top of the given control's parental hierarchy</p>
</td></tr></tbody></table></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec14"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The<span class="emphasis"><em> Understanding the window hierarchy</em></span> recipe in this chapter outlines the structure of how windows are contained within and are related to each other.</li></ul></div></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Using Bitmaps"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec06"/>Using Bitmaps</h1></div></div></div><p>It's likely that, at some point, you will want to be able to display an image in your application. A<code class="literal"> Bitmap</code> is the basic data type that is used to display images in an application. This recipe will show how to load an image file into a<code class="literal"> Bitmap</code> and then display it in a<code class="literal"> Frame</code>.<a id="id27" class="indexterm"/>
</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec15"/>How to do it...</h2></div></div></div><p>To see how to use Bitmaps, we will create a little application that loads an image from the hard disk and displays it in a Frame:</p><div class="informalexample"><pre class="programlisting">import os
import wx

class MyApp(wx.App):
    def OnInit(self):
        self.frame = MyFrame(None, title="Bitmaps")
        self.SetTopWindow(self.frame)
        self.frame.Show()

        return True

class MyFrame(wx.Frame):
    def __init__(self, parent, id=wx.ID_ANY, title="", 
                 pos=wx.DefaultPosition, size=wx.DefaultSize,
                 style=wx.DEFAULT_FRAME_STYLE,  
                 name="MyFrame"):
        super(MyFrame, self).__init__(parent, id, title,
                                      pos, size, style, name)

        # Attributes
        self.panel = wx.Panel(self)

        img_path = os.path.abspath("./face-grin.png")
        bitmap = wx.Bitmap(img_path, type=wx.BITMAP_TYPE_PNG)
        self.bitmap = wx.StaticBitmap(self.panel, 
                                      bitmap=bitmap)

if __name__ == "__main__":
    app = MyApp(False)
    app.MainLoop()

</pre></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec16"/>How it works...</h2></div></div></div><p>The<code class="literal"> StaticBitmap</code> control is the simplest method of displaying a Bitmap in an application. In the example code that accompanies this recipe, we have an image in the same directory as our script, called<code class="literal"> face-grin.png</code>, that we want to display. In order to display the image we first use the<code class="literal"> Bitmap</code> constructor to load the image into memory, and then pass it to the<code class="literal"> StaticBitmap</code> control in order to display the image on the screen. The constructor takes a path to the file, and a type argument that specifies the image format.<a id="id29" class="indexterm"/>
</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec17"/>There's more...</h2></div></div></div><p>There is built-in support for the most common image formats. The following list shows the supported image file formats:<a id="id30" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">wx.BITMAP_TYPE_ANY</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.BITMAP_TYPE_BMP</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.BITMAP_TYPE_ICO</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.BITMAP_TYPE_CUR</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.BITMAP_TYPE_XBM</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.BITMAP_TYPE_XPM</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.BITMAP_TYPE_TIF</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.BITMAP_TYPE_GIF</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.BITMAP_TYPE_PNG</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.BITMAP_TYPE_JPEG</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.BITMAP_TYPE_PNM</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.BITMAP_TYPE_PCX</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.BITMAP_TYPE_PICT</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.BITMAP_TYPE_ICON</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.BITMAP_TYPE_ANI</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.BITMAP_TYPE_IFF</code></li></ul></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec18"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The<span class="emphasis"><em> Working with ToolBars</em></span> recipe in<a class="link" href="ch03.html" title="Chapter 3. Basic Building Blocks of a User Interface"> Chapter 3</a>,<span class="emphasis"><em> Basic Building Blocks of a User Interface</em></span> contains some more Bitmap usage examples.</li><li class="listitem" style="list-style-type: disc">The<span class="emphasis"><em> Customizing the ArtProvider</em></span> recipe in<a class="link" href="ch10.html" title="Chapter 10. Creating Components and Extending Functionality"> Chapter 10</a>,<span class="emphasis"><em> Creating Components and Extending Functionality</em></span> provides more on information how to create Bitmaps.</li></ul></div></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Adding icons to Windows"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec07"/>Adding icons to Windows</h1></div></div></div><p>Adding an icon to your application's title bar as a way of branding the application that will help to set it apart and distinguish it from the other applications running on the desktop. This recipe will show how easy it is to add an icon to a Frame.<a id="id31" class="indexterm"/>
</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note02"/>Note</h3><p>Support for adding an Icon to the title bar on OS X is currently not supported by wxPython 2.8.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec19"/>How to do it...</h2></div></div></div><p>Here we will create a<code class="literal"> Frame</code> subclass that loads an image file from the hard disk and displays it on its title bar:</p><div class="informalexample"><pre class="programlisting">class MyFrame(wx.Frame):
    def __init__(self, parent, id=wx.ID_ANY, title="", 
                 pos=wx.DefaultPosition, size=wx.DefaultSize,
                 style=wx.DEFAULT_FRAME_STYLE,
                 name="MyFrame"):
        super(MyFrame, self).__init__(parent, id, title, pos,
                                      size, style, name)

        # Attributes
        self.panel = wx.Panel(self)

        # Setup
        path = os.path.abspath("./face-monkey.png")
        icon = wx.Icon(path, wx.BITMAP_TYPE_PNG)
        self.SetIcon(icon)
</pre></div><p>Displaying this Frame subclass will result in a window like the following. Comparing this to the one in the Main Frame recipe, you can see the new icon to the left of the title:</p><div class="mediaobject"><img src="images/1780_01_03.jpg" alt="How to do it..."/></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec20"/>How it works...</h2></div></div></div><p>In this recipe we have a small (16x16) image of a monkey that we want to show in the title bar of the<code class="literal"> Frame</code>. For simplicity, this image is located in the same directory as our script and we load it using a relative path. The<code class="literal"> Frame</code> requires an icon instead of a<code class="literal"> Bitmap</code>, so we have to use an<code class="literal"> Icon</code> to load our image into memory. After loading the image, all that is left is to call the Frame's<code class="literal"> SetIcon</code> method in order to set the Icon for the<code class="literal"> Frame</code>.<a id="id32" class="indexterm"/>
</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec21"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The<span class="emphasis"><em> Using Bitmaps</em></span> recipe in this chapter discusses the more commonly-used Bitmap image type.<a id="id33" class="indexterm"/></li></ul></div></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Utilizing Stock IDs"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec08"/>Utilizing Stock IDs</h1></div></div></div><p>All controls, and many other user-interface elements, such as menus, take an ID as an argument in their constructor that can be used to identify the control or object inside event handlers. Typically, the value of<code class="literal"> wx.ID_ANY</code> is used to let the system automatically generate an ID for the item, or the<code class="literal"> wx.NewId</code> function is used to create a new ID. However, there are also a number of predefined IDs available in the<code class="literal"> wx</code> module that have special meaning for certain common items that many applications tend to have, such as Copy/Paste menu items or Ok/Cancel buttons. The expected behavior and appearance of some of these items can vary from platform to platform. By using the stock ID, wxPython will take care of the differences for you. This recipe will show a few of the places in which these IDs can come in handy.<a id="id34" class="indexterm"/>
</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec22"/>How to do it...</h2></div></div></div><p>This code snippet shows how to make use of some of the predefined IDs to simplify the creation of some common UI elements:</p><div class="informalexample"><pre class="programlisting">class MyFrame(wx.Frame):
    def __init__(self, parent, id=wx.ID_ANY, title="", 
                 pos=wx.DefaultPosition, size=wx.DefaultSize,
                 style=wx.DEFAULT_FRAME_STYLE,
                 name="MyFrame"):
        super(MyFrame, self).__init__(parent, id, title, 
                                      pos, size, style, name)

        # Attributes
        self.panel = wx.Panel(self)

        # Setup
        ok_btn = wx.Button(self.panel, wx.ID_OK)
        cancel_btn = wx.Button(self.panel, wx.ID_CANCEL,
                               pos=(100, 0))

        menu_bar = wx.MenuBar()
        edit_menu = wx.Menu()
        edit_menu.Append(wx.NewId(), "Test")
        edit_menu.Append(wx.ID_PREFERENCES)
        menu_bar.Append(edit_menu, "Edit")
        self.SetMenuBar(menu_bar)

</pre></div><p><a id="id36" class="indexterm"/>
The previous class will create the following window:</p><div class="mediaobject"><img src="images/1780_01_04.jpg" alt="How to do it..."/></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec23"/>How it works...</h2></div></div></div><p>The first thing to notice in this recipe is that no labels were specified for the two buttons that we created. By using the Stock IDs for OK and Cancel as their IDs, the framework will automatically put the proper label on the control.<a id="id37" class="indexterm"/>
</p><p>This also applies to menu items, as can be seen in our Edit menu for the Preferences item. Another important thing to note is that if this sample is run on Macintosh OS X, the framework will also automatically move the Preferences menu item to its expected location in the Application menu.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec24"/>There's more...</h2></div></div></div><p>Using buttons with Stock IDs in a Modal Dialog will also allow the dialog to be dismissed, and return the appropriate value, such as<code class="literal"> wx.OK</code> or<code class="literal"> wx.CANCEL</code>, without the need to connect event handlers to the buttons for performing this standard action. Automatically getting the correct button layout for a dialog can also be achieved by using Stock IDs with<code class="literal"> StdDialogButtonSizer</code>.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec25"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The<span class="emphasis"><em> Creating Stock Buttons</em></span> recipe in<a class="link" href="ch03.html" title="Chapter 3. Basic Building Blocks of a User Interface"> Chapter 3</a>,<span class="emphasis"><em> Basic Building Blocks of a User Interface</em></span> shows how Stock IDs can be used to construct standard buttons.</li><li class="listitem" style="list-style-type: disc">The<span class="emphasis"><em> Standard dialog button layout</em></span> recipe in<a class="link" href="ch07.html" title="Chapter 7. Window Layout and Design"> Chapter 7</a>,<span class="emphasis"><em> Window Layout and Design</em></span> shows how to easily add common buttons to dialogs by using Stock IDs.</li><li class="listitem" style="list-style-type: disc">The<span class="emphasis"><em> Optimizing for OS X</em></span> recipe in<a class="link" href="ch12.html" title="Chapter 12. Building and Managing Applications for Distribution"> Chapter 12</a>,<span class="emphasis"><em> Building and Managing Applications for Distribution</em></span> shows more uses for Stock IDs.</li></ul></div></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Accessing the clipboard"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec09"/>Accessing the clipboard</h1></div></div></div><p>The Clipboard is a system-wide, accessible way of getting data to and from one application to another. This recipe will show how to get text from the clipboard, as well as how to put text in the clipboard for other applications to access.<a id="id38" class="indexterm"/>
</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec26"/>How to do it...</h2></div></div></div><p>The following two functions can be used to get text from and put text on the clipboard:<a id="id39" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">def SetClipboardText(text):
    """Put text in the clipboard
    @param text: string
    """
    data_o = wx.TextDataObject()
    data_o.SetText(text)
    if wx.TheClipboard.IsOpened() or wx.TheClipboard.Open():
        wx.TheClipboard.SetData(data_o)
        wx.TheClipboard.Close()

def GetClipboardText():
    """Get text from the clipboard
    @return: string
    """
    text_obj = wx.TextDataObject()
    rtext = ""
    if wx.TheClipboard.IsOpened() or wx.TheClipboard.Open():
        if wx.TheClipboard.GetData(text_obj):
            rtext = text_obj.GetText()
        wx.TheClipboard.Close()
    return rtext

</pre></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec27"/>How it works...</h2></div></div></div><p>wxPython provides a singleton clipboard object that can be used to interact with the systems clipboard. This class works with data objects that are used to represent the underlying system data types. The use of the clipboard is a three-step process:<a id="id40" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Open the Clipboard</li><li class="listitem" style="list-style-type: disc">Set/Get the DataObject</li><li class="listitem" style="list-style-type: disc">Close the Clipboard</li></ul></div></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec28"/>There's more...</h2></div></div></div><p>The clipboard supports many other data types besides just text. wxPython provides built-in support for some additional types, as well as classes for defining your own custom types. The usage of these different data types follows the same general pattern as the<code class="literal"> TextDataObject.</code>
<a id="id41" class="indexterm"/>
</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Data types</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.BitmapDataObject</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Used to get Bitmaps from and put Bitmaps on the Clipboard</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.CustomDataObject</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Can hold any Python picklable data type</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.DataObjectComposite</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Can contain any arbitrary number of simple data types and make them all available at once</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.FileDataObject</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Used for holding filenames</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.URLDataObject</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Used for holding URLs</p>
</td></tr></tbody></table></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec29"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The<span class="emphasis"><em> Supporting drag and drop</em></span> recipe in this chapter is related to the clipboard in that it allows for the transfer of data between applications.</li></ul></div></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Supporting drag and drop"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec10"/>Supporting drag and drop</h1></div></div></div><p>In order to improve usability, it is good to support drag and drop in an application so that the user can simply drop files or other objects into your application. This recipe will show how to support accepting a<code class="literal"> CompositeDataObject</code> that supports both files and text.<a id="id42" class="indexterm"/>
</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec30"/>How to do it...</h2></div></div></div><p>First we will define a custom drop target class:<a id="id43" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">class FileAndTextDropTarget(wx.PyDropTarget):
    """Drop target capable of accepting dropped 
    files and text
    """
    def __init__(self, file_callback, text_callback):
        assert callable(file_callback)
        assert callable(text_callback)
        super(FileAndTextDropTarget, self).__init__()wx.PyDropTarget.__init__(self)

        # Attributes
        self.fcallback = file_callback # Drop File Callback
        self.tcallback = text_callback # Drop Text Callback
        self._data = None
        self.txtdo = None
        self.filedo = None

        # Setup
        self.InitObjects()
        
    def InitObjects(self):
        """Initializes the text and file data objects"""
        self._data = wx.DataObjectComposite()
        self.txtdo = wx.TextDataObject()
        self.filedo = wx.FileDataObject()
        self._data.Add(self.txtdo, False)
        self._data.Add(self.filedo, True)
        self.SetDataObject(self._data)

    def OnData(self, x_cord, y_cord, drag_result):
        """Called by the framework when data is dropped 
        on the target
        """
        if self.GetData():
            data_format = self._data.GetReceivedFormat()
            if data_format.GetType() == wx.DF_FILENAME:
                self.fcallback(self.filedo.GetFilenames())
            else:
                self.tcallback(self.txtdo.GetText())
            
        return drag_result

</pre></div><p>Then to make use of the<code class="literal"> FileAndTextDropTarget</code>, we assign it to a window using the window object's<code class="literal"> SetDropTarget</code> method.<a id="id45" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">class DropTargetFrame(wx.Frame):
    def __init__(self, parent, id=wx.ID_ANY, title="", 
                 pos=wx.DefaultPosition, size=wx.DefaultSize,
                 style=wx.DEFAULT_FRAME_STYLE,
                 name="DropTargetFrame"):
        super(DropTargetFrame, self).__init__(parent, id,
                                              title, pos,
                                              size, style,
                                              name)

        # Attributes
        choices = ["Drag and Drop Text or Files here",]
        self.list = wx.ListBox(self, 
                               choices=choices)
        self.dt = FileAndTextDropTarget(self.OnFileDrop,
                                        self.OnTextDrop)
        self.list.SetDropTarget(self.dt)

        # Setup
        self.CreateStatusBar()

    def OnFileDrop(self, files):
        self.PushStatusText("Files Dropped")
        for f in files:
            self.list.Append(f)

    def OnTextDrop(self, text):
        self.PushStatusText("Text Dropped")
        self.list.Append(text)

<a id="id46" class="indexterm"/>
</pre></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec31"/>How it works...</h2></div></div></div><p>The framework will call the<code class="literal"> OnData</code> method of our<code class="literal"> DropTarget</code> when the window has received the drop data. When<code class="literal"> OnData</code> is called, we simply get the data from our<code class="literal"> DataObject</code> and pass it to the appropriate callback function to let our window decide how to handle the data.<a id="id47" class="indexterm"/>
</p><p>All window objects have a<code class="literal"> SetDropTarget</code> method that can be used to assign a<code class="literal"> DropTarget</code>, so this class can be reused for almost any type of control. In the previous example, we assigned it to a<code class="literal"> ListBox</code> and then appended the dropped data to the list in each of our callbacks.<a id="id48" class="indexterm"/>
</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec32"/>There's more...</h2></div></div></div><p>The<code class="literal"> PyDropTarget</code> class provides a few more methods that can be called at different times during the drag operation. These methods can also be overridden in order to do things such as change the mouse cursor, show a custom drag image, or reject the drag object.</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Methods</p>
</th><th style="text-align: left" valign="bottom">
<p>When the methods are called</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">OnEnter(x, y, drag_result)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Called when a drag object enters the window. Returns a drag result value (that is,<code class="literal"> wx.DragNone, wx.DragCopy</code>, ...)</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">OnDragOver(x, y, drag_result)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Called while the mouse is dragging the object over the target</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">OnLeave()</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Called when the mouse leaves the drop target</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">OnDrop(x, y)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Called when the user drops the object. Return<code class="literal"> True</code> to accept the object or<code class="literal"> False</code> to reject it</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">OnData(x, y, drag_result)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Called after<code class="literal"> OnDrop</code>, when the data object was accepted</p>
</td></tr></tbody></table></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec33"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="emphasis"><em>The Accessing the clipboard</em></span> recipe in this chapter shows another way to perform data transfer between applications.</li></ul></div></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Two-stage widget creation"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec11"/>Two-stage widget creation</h1></div></div></div><p>Two-stage widget creation is a way of initialzing a widget and then its UI part, in two steps. This method of object creation is used by class factories such as XRC (XML Resource) and to set extra style flags that cannot be set by using the constructor's regular style parameter. This recipe will show how to use two-stage creations to create a frame that has a special button that can be used to put it into a context-sensitive help mode.<a id="id49" class="indexterm"/>
</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note03"/>Note</h3><p>This is a Windows-specific example; other platforms do not support having a<code class="literal"> ContextButton</code> in their title bar.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec34"/>How to do it...</h2></div></div></div><p>Here we will create a<code class="literal"> Frame</code> subclass that uses two stage creation in order to set an extra style flag:</p><div class="informalexample"><pre class="programlisting">class MyFrame(wx.Frame):
    def __init__(self, parent, *args, **kwargs):
        pre = wx.PreFrame()
        pre.SetExtraStyle(wx.FRAME_EX_CONTEXTHELP)
        pre.Create(parent, *args, **kwargs)
        self.PostCreate(pre)

<a id="id50" class="indexterm"/>
</pre></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec35"/>How it works...</h2></div></div></div><p>In wxPython, two-stage widget creation is actually a three-step process. First, each class that supports it has its own<code class="literal"> PreClass</code> that is used as a factory constructor that pre-creates the object. At this point, the pre object can be used to set the extra style flag. The next step is to call<code class="literal"> Create. Create</code> acts like the regular constructor and creates the UI portion of the control. The final step is to call<code class="literal"> PostCreate, PostCreate</code> does the work of translating the<code class="literal"> pre</code> object into<code class="literal"> self</code> so that the object will appear just as if the class's<code class="literal"> __init__</code> method had been called normally.<a id="id51" class="indexterm"/>
</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec36"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The<span class="emphasis"><em> Using XRC</em></span> recipe in<a class="link" href="ch07.html" title="Chapter 7. Window Layout and Design"> Chapter 7</a>,<span class="emphasis"><em> Window Layout and Design</em></span> discusses XRC.</li></ul></div></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Understanding inheritance limitations"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec12"/>Understanding inheritance limitations</h1></div></div></div><p>wxPython is a wrapper around the wxWidgets C++ framework. This relationship means that inside most wxPython objects there is a C++ object. Because of this, methods that belong to wxPython classes cannot always be overridden in the same way as they can with a normal Python object.<a id="id52" class="indexterm"/>
</p><p>To demonstrate this behavior, this recipe will show how to create a class that will automatically add its children windows to its<code class="literal"> Sizer</code> layout. This will be contrasted to a class that does not expose its virtual methods to the Python layer of the class.</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec37"/>How to do it...</h2></div></div></div><p>To demonstrate the difference in overriding methods, we will create two similar classes first starting with one that derives from the standard<code class="literal"> Panel</code> class:</p><div class="informalexample"><pre class="programlisting">import wx

class MyPanel(wx.Panel):
    def __init__(self, parent):
        super(MyPanel, self).__init__(parent)

        sizer = wx.BoxSizer()
        self.SetSizer(sizer)

    def AddChild(self, child):
        sizer = self.GetSizer()
        sizer.Add(child, 0, wx.ALIGN_LEFT|wx.ALL, 8)
        return super(MyPanel, self).AddChild(child)

</pre></div><p>Now we will create a class that is exactly the same except that it derives from the<code class="literal"> Py</code> version of the class:</p><div class="informalexample"><pre class="programlisting">class MyVirtualPanel(wx.PyPanel):
    """Class that automatically adds children
    controls to sizer layout.
    """
    def __init__(self, parent):
        super(MyVirtualPanel, self).__init__(parent)

        sizer = wx.BoxSizer()
        self.SetSizer(sizer)

    def AddChild(self, child):
        sizer = self.GetSizer()
        sizer.Add(child, 0, wx.ALIGN_LEFT|wx.ALL, 8)
        return super(MyVirtualPanel, self).AddChild(child)

</pre></div><p>Now below we have a little sample application that uses the above two classes:</p><div class="informalexample"><pre class="programlisting">class MyFrame(wx.Frame):
    def __init__(self, parent, *args, **kwargs):
        super(MyFrame, self).__init__(parent,
                                      *args, **kwargs)

        # Attributes
        self.mypanel = MyPanel(self)
        self.mypanel.SetBackgroundColour(wx.BLACK)
        self.virtpanel = MyVirtualPanel(self)
        self.virtpanel.SetBackgroundColour(wx.WHITE)

        # Setup
        self.__DoLayout()

    def __DoLayout(self):
        """Layout the window"""
        # Layout the controls using a sizer
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.mypanel, 1, wx.EXPAND)
        sizer.Add(self.virtpanel, 1, wx.EXPAND)
        self.SetSizer(sizer)
        
        # Create 3 children for the top panel
        for x in range(3):
            wx.Button(self.mypanel,
                      label="MyPanel %d" % x)
        # Create 3 children for the bottom panel
        for x in range(3):
            wx.Button(self.virtpanel,
                      label="VirtPanel %d" % x)

        self.SetInitialSize(size=(300, 200))

class MyApp(wx.App):
    def OnInit(self):
        self.frame = MyFrame(None,
                             title="Virtualized Methods")
        self.SetTopWindow(self.frame)
        self.frame.Show()

        return True

if __name__ == "__main__":
    app = MyApp(False)
    app.MainLoop()

<a id="id55" class="indexterm"/>
</pre></div><p>Running this code will result in a window like the following one being displayed:</p><div class="mediaobject"><img src="images/1780_01_05.jpg" alt="How to do it..."/></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec38"/>How it works...</h2></div></div></div><p>In each version of our<code class="literal"> Panel</code> class we override the<code class="literal"> AddChild</code> method, which is called every time that a window has a new child window created.<code class="literal"> AddChild</code> is called inside the C++ part of the class when this happens, so in order to be able to override the method in our Python version of the class, we need to use the special version that provides access to overriding the virtualized method from the C++ class.<a id="id56" class="indexterm"/>
</p><p>The classes in wxPython that have a version of the class prefixed with<code class="literal"> Py</code> have the virtualized versions of many of the methods exposed, so that when they are overridden in a Python subclass they get bound to the method in the C++ layer of the object and will be called by the framework instead of the base class's implementation.</p><p>This can be seen in the screenshot of our recipe application that was shown above. The top version of the class that does not derive from<code class="literal"> PyPanel</code> has all three of its<code class="literal"> Buttons</code> stacked on top of each other in the top left-hand corner of the window, because its overridden<code class="literal"> AddChild</code> method is never called. On the other hand, the version of the class that does derive from<code class="literal"> PyPanel</code> has its<code class="literal"> AddChild</code> method called and is able to lay out the<code class="literal"> Buttons</code> in its<code class="literal"> Sizer</code>.<a id="id57" class="indexterm"/>
</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec39"/>There's more...</h2></div></div></div><p>It is not well documented as to which methods are exposed as virtual methods and which ones are not. Here is a little trick that can help you to identify which virtual methods are available in a given class. Just run the following code inside the Python interpreter:</p><div class="informalexample"><pre class="programlisting">import wx
for method in dir(wx.PyPanel):
    if method.startswith('base_'):
        print method

</pre></div><p>The argument in the<code class="literal"> dir()</code> call can be changed to whatever class you want to inspect. Running this will print out a list of all of the methods in the class that are virtualized. The<code class="literal"> base_</code> methods are generated by SWIG as a part of the wxPython bindings to wxWidgets, and should not be used directly in your code. Instead, the methods without the<code class="literal"> base_</code> prefix should be used.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec40"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The<span class="emphasis"><em> Creating a custom control</em></span> recipe in<a class="link" href="ch10.html" title="Chapter 10. Creating Components and Extending Functionality"> Chapter 10</a>,<span class="emphasis"><em> Creating Components and Extending Functionality</em></span>, shows more usage examples of overriding virtual methods.</li><li class="listitem" style="list-style-type: disc">The<span class="emphasis"><em> Using a BoxSizer</em></span> recipe in<a class="link" href="ch07.html" title="Chapter 7. Window Layout and Design"> Chapter 7</a>,<span class="emphasis"><em> Window Design and Layout</em></span>, explains how the BoxSizer class can be used to perform the layout of controls in a window.</li></ul></div></div></div></div>
</body></html>