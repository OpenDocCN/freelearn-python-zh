<html><head></head><body>
  <div><div><div><div><div><h1 class="title"><a id="ch03"/>Chapter 3. Finding Elements</h1></div></div></div><p>Web applications and the web pages within these applications are written in a mixture of the <strong>Hyper </strong>
<a id="id120" class="indexterm"/>
<strong>Text Markup Language</strong> (<strong>HTML</strong>), <strong>Cascading </strong>
<a id="id121" class="indexterm"/>
<strong>Style Sheets</strong> (<strong>CSS</strong>), and JavaScript code. Based on user actions such as navigating to a website <strong>Uniform Resource Locator</strong> (<strong>URL</strong>) <a id="id122" class="indexterm"/>or clicking on a submit button, a browser sends a request to a web server. The web server processes this request and sends the response with HTML and related resources such as JavaScript, CSS, and images, and so on back to the browser. The information received from the server is used by the browser to render a web page with various visual elements such as textboxes, buttons, labels, tables, forms, checkboxes, radio boxes, lists, images, and so on, on the page. While doing so, the browser hides the HTML code and related resources from the user. The user is presented with a graphical user interface in the browser window. The various visual elements or controls <a id="id123" class="indexterm"/>used on pages are known as <strong>WebElements</strong> in Selenium.</p><p>In this chapter, we will cover the following topics:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Understanding more about finding elements with Selenium WebDriver</li><li class="listitem" style="list-style-type: disc">Understanding how to investigate and define locators to find elements using developer tools options available in various browsers</li><li class="listitem" style="list-style-type: disc">Finding out various ways to find elements, including <code class="literal">ID</code>, <code class="literal">Name</code>, and <code class="literal">Class</code> attribute values and use XPath and CSS selectors to define more dynamic locators</li><li class="listitem" style="list-style-type: disc">Implementing various <code class="literal">find_element_by</code> methods to find elements so that we can automate interaction on these elements using Selenium WebDriver</li></ul></div><p>When we want to automate browser interaction using Selenium, we need to tell Selenium how to find a particular element or set of elements on a web page programmatically and simulate user actions on these elements. Selenium provides various selector or locator methods to find elements based on their attribute/value criteria or selector value that we supply in script.</p><p>How do we find the selector or locator information? Web pages are written in a mixture of HTML, CSS, and JavaScript. We can derive this information by looking at the HTML source of the page. We need to find information such as what HTML tag is used for the element that we want to interact with, the defined attribute, and the values for the attributes and the structure of the page. Let's take a look at a sample form in the application we're testing. Here is an example of the search field and the search (the magnifying glass) icon from the sample application in the following screenshot:</p><div><img src="img/3506_OS_03_01.jpg" alt="Finding Elements"/></div><p>Let's look at the <a id="id124" class="indexterm"/>HTML code written for the search form:</p><div><pre class="programlisting">&lt;form id="search_mini_form" action="http://demo.magentocommerce.com/catalogsearch/result/" method="get"&gt;
    &lt;div class="form-search"&gt;
        &lt;label for="search"&gt;Search:&lt;/label&gt;
        &lt;input id="search" type="text" name="q" value="" class="input-text" maxlength="128" /&gt;
        &lt;button type="submit" title="Search" class="button"&gt;&lt;span&gt;&lt;span&gt;Search&lt;/span&gt;&lt;/span&gt;&lt;/button&gt;
        &lt;div id="search_autocomplete" class="search-autocomplete"&gt;&lt;/div&gt;
        &lt;script type="text/javascript"&gt;
        //&lt;![CDATA[
            var searchForm = new Varien.searchForm('search_mini_form', 'search', 'Search entire store here...');
            searchForm.initAutocomplete('http://demo.magentocommerce.com/catalogsearch/ajax/suggest/', 'search_autocomplete');
        //]]&gt;
        &lt;/script&gt;
    &lt;/div&gt;
&lt;/form&gt;</pre></div><p>Each element such as the search textbox and search button is implemented using an <code class="literal">&lt;input&gt;</code> tag inside a <code class="literal">&lt;form&gt;</code> tag and labels are implemented using the <code class="literal">&lt;label&gt;</code> tag. There is some JavaScript code written in the <code class="literal">&lt;script&gt;</code> tag.</p><p>The search textbox that is represented as the <code class="literal">&lt;input&gt;</code> tag has <code class="literal">id</code>, <code class="literal">type</code>, <code class="literal">name</code>, <code class="literal">value</code>, <code class="literal">class</code>, and <code class="literal">maxlength</code> attributes defined:</p><div><pre class="programlisting">&lt;input id="search" type="text" name="q" value="" class="input-text" maxlength="128" /&gt;</pre></div><p>We can view code <a id="id125" class="indexterm"/>written for a page by right-clicking on the browser window and selecting the <strong>View Page Source</strong> option from the pop-up menu. It will display HTML and client-side JavaScript code for the page in a separate window.</p><div><div><h3 class="title"><a id="tip05"/>Tip</h3><p>If you're new to HTML, CSS, and JavaScript, then it's worth looking at some useful tutorials at <a class="ulink" href="http://www.w3schools.com/">http://www.w3schools.com/</a>. These will help you in identifying locators using different ways supported by Selenium WebDriver.</p></div></div><div><div><div><div><h1 class="title"><a id="ch03lvl1sec15"/>Using developer tools to find locators</h1></div></div></div><p>While writing <a id="id126" class="indexterm"/>Selenium tests, we will often need to look at the web page code and might need special tools that can display information in <a id="id127" class="indexterm"/>a structured and easy-to-understand format. Good news, the majority of the browsers have built-in features or add-ons to help us. These tools provide us with a neat and clean way to understand how elements and their attributes are defined on a page, DOM structure, JavaScript blocks, CSS style attributes, and so on. Let's explore these tools in more detail and see how we can use them.</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec18"/>Inspecting pages and elements with Firefox using the Firebug add-in</h2></div></div></div><p>Newer <a id="id128" class="indexterm"/>versions of Firefox provide <a id="id129" class="indexterm"/>built-in ways to analyze the <a id="id130" class="indexterm"/>page and elements; however, we will use the Firebug add-in, which has more powerful features, by following <a id="id131" class="indexterm"/>the given steps:</p><div><ol class="orderedlist arabic"><li class="listitem">You need to <a id="id132" class="indexterm"/>download and install the Firebug add-in in Firefox available at <a class="ulink" href="https://addons.mozilla.org/en-us/firefox/addon/firebug/">https://addons.mozilla.org/en-us/firefox/addon/firebug/</a>.</li><li class="listitem">To inspect the page using Firebug, move the mouse over a desired element and right-click to open the pop-up menu.</li><li class="listitem">Select the <strong>Inspect Element with Firebug</strong> option from the pop-up menu.<p>This will display the Firebug section along with all the information about the page and the selected element including HTML code in a tree <a id="id133" class="indexterm"/>format <a id="id134" class="indexterm"/>as <a id="id135" class="indexterm"/>shown in the following screenshot:</p><div><img src="img/3506_OS_03_02.jpg" alt="Inspecting pages and elements with Firefox using the Firebug add-in"/></div></li><li class="listitem">Using <a id="id136" class="indexterm"/>Firebug, we can also validate XPath or CSS selectors using the search box shown in the Firebug section. Just enter the XPath or CSS selector, and Firebug will highlight the element(s) <a id="id137" class="indexterm"/>that match the <a id="id138" class="indexterm"/>expression, as <a id="id139" class="indexterm"/>shown in the following screenshot:<div><img src="img/3506_OS_03_03.jpg" alt="Inspecting pages and elements with Firefox using the Firebug add-in"/></div></li></ol></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec19"/>Inspecting pages and elements with Google Chrome</h2></div></div></div><p>Google <a id="id140" class="indexterm"/>Chrome provides a built-in feature to <a id="id141" class="indexterm"/>analyze an element or page. You can <a id="id142" class="indexterm"/>inspect pages and elements by <a id="id143" class="indexterm"/>following the given steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Move the mouse over a desired element on a page and right-click to open the pop-up menu; then select the <strong>Inspect element</strong> option.<p>This will open the developer tools in the browser, which display information similar to that of Firebug, as shown in the following screenshot:</p><div><img src="img/3506_OS_03_04.jpg" alt="Inspecting pages and elements with Google Chrome"/></div></li><li class="listitem">Similar to Firebug in Firefox, we can also test XPath and CSS selectors in the Google <a id="id144" class="indexterm"/>Chrome Developer Tools. Press <a id="id145" class="indexterm"/><em>Ctrl</em> + <em>F</em> in the <strong>Elements</strong> tab. This will display a search box. Just enter the XPath or CSS selector and <a id="id146" class="indexterm"/>Firebug will highlight <a id="id147" class="indexterm"/>element(s) that match the expression, as shown in the following screenshot:<div><img src="img/3506_OS_03_05.jpg" alt="Inspecting pages and elements with Google Chrome"/></div></li></ol></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec20"/>Inspecting pages and elements with Internet Explorer</h2></div></div></div><a id="id148" class="indexterm"/><p>Microsoft Internet <a id="id149" class="indexterm"/>Explorer also provides built-in features to <a id="id150" class="indexterm"/>analyze elements or pages. You <a id="id151" class="indexterm"/>can inspect pages and elements by following the given steps:</p><div><ol class="orderedlist arabic"><li class="listitem">To open the developer tools, press the <em>F12</em> key. The developer tools section will be displayed at the bottom of browser.</li><li class="listitem">To inspect an element, click on the pointer icon and hover over the desired element on the page. The developer tools will highlight the element with a blue outline and display the HTML code in a tree as shown in the following screenshot:<div><img src="img/3506_OS_03_06.jpg" alt="Inspecting pages and elements with Internet Explorer"/></div></li></ol></div><p>You will find <a id="id152" class="indexterm"/>these tools very useful while writing <a id="id153" class="indexterm"/>tests. Some of these tools also <a id="id154" class="indexterm"/>provide the ability to run JavaScript <a id="id155" class="indexterm"/>code for debugging and testing.</p></div></div></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch03lvl1sec16"/>Finding elements with Selenium WebDriver</h1></div></div></div><p>We need <a id="id156" class="indexterm"/>to tell Selenium how to find an element so that it can simulate a desired user action, or look at the attributes or state of an <a id="id157" class="indexterm"/>element so that we can perform a check. For example, if we want to search for a product, we need to find the search text field and search button visually. We enter the search term by pressing various keys on the keyboard and click on the search button to submit our search request.</p><p>We can automate the same actions using Selenium. However, Selenium does not understand these fields or buttons visually as we do. It needs to find the search textbox and search button to simulate keyboard entry and mouse click programmatically.</p><p>Selenium provides various <code class="literal">find_element_by</code> methods to find elements on a web page. These methods search for an element based on the criteria supplied to them. If a matching element is found, an instance of WebElement is returned or the <code class="literal">NoSuchElementException</code> exception is thrown if Selenium is not able to find any element matching the search criteria.</p><p>Selenium also <a id="id158" class="indexterm"/>provides various <code class="literal">find_elements_by</code> methods to locate multiple elements. These methods search and return a list of <a id="id159" class="indexterm"/>elements that match the supplied values.</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec21"/>Using the find methods</h2></div></div></div><p>Selenium <a id="id160" class="indexterm"/>provides eight <code class="literal">find_element_by</code> methods to locate elements. In this section, we will see each one of them in detail. The following table lists <code class="literal">find_element_by</code> methods:</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Method</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th><th style="text-align: left" valign="bottom">
<p>Argument</p>
</th><th style="text-align: left" valign="bottom">
<p>Example</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">find_element_by_id(id)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id161" class="indexterm"/>method finds an element by the ID attribute value</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">id</code>: The ID of the element to be found</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.find_element_by_id('search')</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">find_element_by_name(name)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id162" class="indexterm"/>method finds an element by the name attribute value</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">name</code>: The name of the element to be found</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.find_element_by_name('q')</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">find_element_by_class_name(name)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id163" class="indexterm"/>method finds an element by the class attribute value</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">name</code>: The class name of the element to be found</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.find_element_by_class_name('input-text')</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">find_element_by_tag_name(name)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id164" class="indexterm"/>method finds an element by its tag name</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">name</code>: The tag name of the element to be found</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.find_element_by_tag_name('input')</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">find_element_by_xpath(xpath)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id165" class="indexterm"/>method finds an element using XPath</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">xpath</code>: The xpath of the element to be found</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.find_element_by_xpath('//form[0]/div[0]/input[0]')</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">find_element_by_css_selector(css_selector)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id166" class="indexterm"/>method finds an element by the CSS selector</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">css_selector</code>: The CSS selector of the element to be found</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.find_element_by_css_selector('#search')</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">find_element_by_link_text(link_text)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id167" class="indexterm"/>method finds an element by the link text</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">link_text</code>: The text of the element to be found</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.find_element_by_link_text('Log In')</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">find_element_by_partial_link_text(link_text)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id168" class="indexterm"/>method finds an element by a partial match of its link text</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">link_text</code>: The text to match part of the text of the element</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.find_element_by_partial_link_text('Log')</code>
</p>
</td></tr></tbody></table></div><p>The following table lists the <code class="literal">find_elements_by</code> methods that return a list of elements matching the specified criteria:</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Method</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th><th style="text-align: left" valign="bottom">
<p>Argument</p>
</th><th style="text-align: left" valign="bottom">
<p>Example</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">find_elements_by_id(id_)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id169" class="indexterm"/>method finds multiple elements using the ID</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">id_</code>: The ID of the elements to be found</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.find_element_by_id('product')</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">find_elements_by_name(name)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id170" class="indexterm"/>method finds elements using the name</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">name</code>: The name of the elements to be found</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.find_elements_by_name('products')</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">find_elements_by_class_name(name)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id171" class="indexterm"/>method finds elements using the class name</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">name</code>: The class name of the elements to be found</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.find_elements_by_class_name('foo')</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">find_elements_by_tag_name(name)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id172" class="indexterm"/>method finds elements using the tag name</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">name</code>: The tag name of the element to be found</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.find_elements_by_tag_name('a')</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">find_elements_by_xpath(xpath)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id173" class="indexterm"/>method finds multiple elements by XPath</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">xpath</code>: The xpath of the elements to be found</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.find_elements_by_xpath("//div[contains(@class, 'lists')]")</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">find_elements_by_css_selector(css_selector)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id174" class="indexterm"/>method finds elements using the CSS selector</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">css_selector</code>: The CSS selector of the element to be found</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.find_element_by_css_selector('.input-class')</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">find_elements_by_link_text(text)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id175" class="indexterm"/>method finds elements using the link text</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">text</code>: The text of the elements to be found</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.find_elements_by_link_text('Log In')</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">find_elements_by_partial_link_text(link_text)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id176" class="indexterm"/>method finds elements by a partial match of their link text</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">link_text</code>: The text to match part of the text of the elements</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.find_element_by_partial_link_text('Add to,')</code>
</p>
</td></tr></tbody></table></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec09"/>Finding elements using the ID attribute</h3></div></div></div><p>Finding <a id="id177" class="indexterm"/>elements using the ID is the most preferable <a id="id178" class="indexterm"/>way to find elements on a page. The <code class="literal">find_element_by_id()</code> and <code class="literal">find_elements_by_id()</code> methods return an element or a set of elements that have matching ID attribute values.</p><p>The <code class="literal">find_element_by_id()</code> method returns the first element that has a matching ID attribute value. If no element with matching ID attribute is found, a <code class="literal">NoSuchElementException</code> will be raised.</p><p>Let's try finding the search textbox from the sample application as shown in the following screenshot:</p><div><img src="img/3506_OS_03_07.jpg" alt="Finding elements using the ID attribute"/></div><p>Here is the HTML code for the search textbox with an ID attribute value defined as <code class="literal">search</code>:</p><div><pre class="programlisting">&lt;input id="search" type="text" name="q" value="" class="input-text" maxlength="128" autocomplete="off"&gt;</pre></div><p>Here is a test that uses the <code class="literal">find_element_by_id()</code> method to find the search textbox and check its <code class="literal">maxlength</code> attribute. We will pass the ID attribute's value, <code class="literal">search</code>, to the <code class="literal">find_element_by_id()</code> method:</p><div><pre class="programlisting">def test_search_text_field_max_length(self):
  # get the search textbox
  search_field = self.driver.find_element_by_id("search")

  # check maxlength attribute is set to 128
  self.assertEqual("128", search_field.get_attribute("maxlength"))</pre></div><p>The <a id="id179" class="indexterm"/>
<code class="literal">find_elements_by_id()</code> method returns all the <a id="id180" class="indexterm"/>elements that have the same ID attribute values.</p></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec10"/>Finding elements using the name attribute</h3></div></div></div><p>Finding an <a id="id181" class="indexterm"/>element by its name attribute value is another preferred method<a id="id182" class="indexterm"/>. The <code class="literal">find_element_by_name()</code> and <code class="literal">find_elements_by_name()</code> methods return element(s) that have matching name attribute value. If no element is found with matching name attribute value, a <code class="literal">NoSuchElementException</code> will be raised.</p><p>In the previous example, we can find the search textbox using its name attribute value instead of the ID attribute value in the following way:</p><div><pre class="programlisting"># get the search textbox
<strong>self.search_field = self.driver.find_element_by_name("q")</strong>
</pre></div><p>The <code class="literal">find_elements_by_name()</code> method returns all the elements that have the same name attribute values.</p></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec11"/>Finding elements using the class name</h3></div></div></div><p>Apart from <a id="id183" class="indexterm"/>using the ID and name attributes, we can also use the class attributes to find elements. The class attribute is used to apply CSS to an element. The <code class="literal">find_element_by_class_name()</code> and <code class="literal">find_elements_by_class_name()</code> methods return element(s) that have matching class attribute <a id="id184" class="indexterm"/>value. If no element is found with the matching name attribute value, a <code class="literal">NoSuchElementException</code> will be raised.</p><div><div><h3 class="title"><a id="tip06"/>Tip</h3><p>Finding elements using ID, name, or class attributes is the most preferred and fastest way to find elements. Selenium WebDriver also offers a set of methods when these methods are not sufficient to find an element. We will see these methods later in the chapter.</p></div></div><p>Let's find the <a id="id185" class="indexterm"/>search button displayed in the following screenshot using its class attribute value using the <code class="literal">find_element_by_class_name()</code> method:</p><div><img src="img/3506_OS_03_08.jpg" alt="Finding elements using the class name"/></div><p>The search button (the magnifying glass icon) is implemented using the <code class="literal">&lt;button&gt;</code> element with type, title, and class attribute values defined as shown in the following HTML code:</p><div><pre class="programlisting">&lt;button type="submit" title="Search" <strong>class="button</strong>"&gt;&lt;span&gt;&lt;span&gt;Search&lt;/span&gt;&lt;/span&gt;&lt;/button&gt;</pre></div><p>Let's create a test that finds the search button element using its class attribute value and check whether it is enabled as shown in following code:</p><div><pre class="programlisting">def test_search_button_enabled(self):
    # get Search button
    search_button = self.driver.find_element_by_class_name("button")

    # check Search button is enabled
    self.assertTrue(search_button.is_enabled())</pre></div><p>The <code class="literal">find_elements_by_class_name()</code> method returns all the elements that have the identical class <a id="id186" class="indexterm"/>name attribute values.</p></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec12"/>Finding elements using the tag name</h3></div></div></div><p>The <code class="literal">find_element_by_tag_name()</code> and <code class="literal">find_elements_by_tag_name()</code> methods find <a id="id187" class="indexterm"/>element(s) by their HTML tag name. These methods are similar to the <code class="literal">getElementsByTagName()</code> DOM method in JavaScript. If no <a id="id188" class="indexterm"/>element is found with a matching tag name, a <code class="literal">NoSuchElementException</code> will be raised.</p><p>These methods are useful when we want to find elements using their tag name. For example, to find all the <code class="literal">&lt;tr&gt;</code> tags in a table to find the number of rows.</p><p>The home page of the sample application displays promotional banner images as shown in the following <a id="id189" class="indexterm"/>screenshot:</p><div><img src="img/3506_OS_03_09.jpg" alt="Finding elements using the tag name"/></div><p>These banners are implemented using an <code class="literal">&lt;img&gt;</code> or image tag inside a <code class="literal">&lt;ul&gt;</code> or unordered list tag as shown in the following HTML code:</p><div><pre class="programlisting">&lt;ul class="promos"&gt;
    &lt;li&gt;
        &lt;a href="http://demo.magentocommerce.com/home-decor.html"&gt; 
            &lt;img src="img/homepage-three-column-promo-01B.png" alt="Physical &amp;amp; Virtual Gift Cards"&gt; 
        &lt;/a&gt;
    &lt;/li&gt;
    &lt;li&gt;
        &lt;a href="http://demo.magentocommerce.com/vip.html"&gt; 
            &lt;img src="img/homepage-three-column-promo-02.png" alt="Shop Private Sales - Members Only"&gt;
        &lt;/a&gt;
    &lt;/li&gt;
    &lt;li&gt;
        &lt;a href="http://demo.magentocommerce.com/accessories/bags-luggage.html"&gt; 
            &lt;img src="img/homepage-three-column-promo-03.png" alt="Travel Gear for Every Occasion"&gt;
        &lt;/a&gt;
    &lt;/li&gt;
&lt;/ul&gt;</pre></div><p>We will use the <code class="literal">find_elements_by_tag_name()</code> method to get all the images. In this example, we <a id="id190" class="indexterm"/>will first find the list of banners implemented as <code class="literal">&lt;ul&gt;</code> or unordered lists using the <code class="literal">find_element_by_class_name()</code> method and then get all the <code class="literal">&lt;img&gt;</code> or image elements <a id="id191" class="indexterm"/>by calling the <code class="literal">find_elements_by_tag_name()</code> method on the banners list:</p><div><pre class="programlisting">def test_count_of_promo_banners_images(self):
    # get promo banner list
    banner_list = self.driver.find_element_by_class_name("promos")

    # get images from the banner_list
    banners = banner_list.find_elements_by_tag_name("img")

    # check there are 20 tags displayed on the page
    self.assertEqual(2, len(banners))</pre></div></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec13"/>Finding elements using XPath</h3></div></div></div><p>XPath is a query language used to search and locate nodes in an XML document. All the major web browsers support <a id="id192" class="indexterm"/>XPath. Selenium can leverage and use powerful <a id="id193" class="indexterm"/>XPath queries to find elements on a web page.</p><p>One of the advantages of using XPath is when we can't find a suitable ID, name, or class attribute value for the element. We can use XPath to either find the element in absolute terms or relative to an element that does have an ID or name attribute. We can also use defined attributes other than the ID, name, or class with XPath queries. We can also find elements with the help of a partial check on attribute values using XPath functions such as <code class="literal">starts-with()</code>, <code class="literal">contains()</code>, and <code class="literal">ends-with()</code>.</p><div><div><h3 class="title"><a id="tip07"/>Tip</h3><p>To know more about XPath, visit <a class="ulink" href="http://www.w3schools.com/Xpath/">http://www.w3schools.com/Xpath/</a> and <a class="ulink" href="http://www.zvon.org/comp/r/tut-XPath_1.html">http://www.zvon.org/comp/r/tut-XPath_1.html</a>.</p></div></div><p>You can find more about XPath locators in the book <em>Selenium Testing Tools Cookbook</em>, <em>Packt Publishing</em>.</p><p>The <code class="literal">find_element_by_xpath()</code> and <code class="literal">find_elements_by_xpath()</code> methods return element(s) that are found by the specified XPath query. For example, we can check whether the promo banners displayed on the home page work as intended and we can open the promotion pages using these images as shown in the following screenshot:</p><div><img src="img/3506_OS_03_10.jpg" alt="Finding elements using XPath"/></div><p>Here is how the Shop Private Sales banner is defined as an <code class="literal">&lt;img&gt;</code> tag. The image does not have the ID, name, or class attributes defined. Also, we cannot use the <code class="literal">find_by_tag_name()</code> method as there are <a id="id194" class="indexterm"/>multiple <code class="literal">&lt;img&gt;</code> tags defined on the page. However, by <a id="id195" class="indexterm"/>looking at the following HTML code, we can get the <code class="literal">&lt;img&gt;</code> tag using the <code class="literal">alt</code> attribute:</p><div><pre class="programlisting">&lt;ul class="promos"&gt;
    ...
    &lt;li&gt;
        &lt;a href="http://demo.magentocommerce.com/vip.html"&gt; 
            &lt;img src="img/homepage-three-column-promo-02.png" alt="Shop Private Sales - Members Only"&gt;
        &lt;/a&gt;
    &lt;/li&gt;
    ...
&lt;/ul&gt;</pre></div><p>Let's create a test that uses the <code class="literal">find_element_by_xpath()</code> method. We are using a relative XPath query to find this <code class="literal">&lt;img&gt;</code> tag using its <code class="literal">alt</code> attribute (this is how we can use ID, name, and class attributes as well as other attributes such as <code class="literal">title</code>, <code class="literal">type</code>, <code class="literal">value</code>, <code class="literal">alt</code>, and so on within XPath queries):</p><div><pre class="programlisting">def test_vip_promo(self):
    # get vip promo image
    vip_promo = self.driver.\
        find_element_by_xpath("//img[@alt='Shop Private Sales - Members Only']")

    # check vip promo logo is displayed on home page
    self.assertTrue(vip_promo.is_displayed())
    # click on vip promo images to open the page
    vip_promo.click()
    # check page title
    self.assertEqual("VIP",  self.driver.title)</pre></div><p>The <code class="literal">find_elements_by_xpath()</code>
<a id="id196" class="indexterm"/>method returns all the <a id="id197" class="indexterm"/>elements that match the XPath query.</p></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec14"/>Finding elements using CSS selectors</h3></div></div></div><p>CSS is a <a id="id198" class="indexterm"/>style sheet language used by web designers to describe the look and feel of an HTML document. CSS is used to define various style <a id="id199" class="indexterm"/>classes that can be applied to elements for formatting. CSS selectors are used to find HTML elements based on their attributes such as ID, classes, types, attributes, or values and much more to apply the defined CSS rules.</p><p>Similar to XPath, Selenium can leverage and use CSS selectors to find elements on a web page. To know more about CSS selectors, visit <a class="ulink" href="http://www.w3schools.com/css/css_selectors.asp">http://www.w3schools.com/css/css_selectors.asp</a> and <a class="ulink" href="http://www.w3.org/TR/CSS2/selector.html">http://www.w3.org/TR/CSS2/selector.html</a>.</p><p>The <code class="literal">find_element_by_css_selector()</code> and <code class="literal">find_elements_by_css_selector()</code> methods return element(s) that are found by the specified CSS selector.</p><p>On the home page of the sample application, we can see the shopping cart icon. When we click on the icon, we can see the shopping cart. When there are no items added to the shopping cart, a message should be displayed saying <strong>You have no items in your shopping cart</strong>, as shown in the following screenshot:</p><div><img src="img/3506_OS_03_11.jpg" alt="Finding elements using CSS selectors"/></div><p>This is implemented as shown in the following HTML code:</p><div><pre class="programlisting">&lt;div class="minicart-wrapper"&gt;
&lt;p class="block-subtitle"&gt;
    Recently added item(s) 
    &lt;a class="close skip-link-close" href="#" title="Close"&gt;×&lt;/a&gt;
&lt;/p&gt;
    &lt;p class="empty"&gt;You have no items in your shopping cart.&lt;/p&gt;
&lt;/div&gt;</pre></div><p>Let's create a test to validate this message. We will use CSS selectors to find the shopping cart icon, click <a id="id200" class="indexterm"/>on it, and then find the shopping cart <a id="id201" class="indexterm"/>message implemented in the <code class="literal">&lt;p&gt;</code> or paragraph element:</p><div><pre class="programlisting">def test_shopping_cart_status(self):
    # check content of My Shopping Cart block on Home page
    # get the Shopping cart icon and click to open the # Shopping Cart section
    shopping_cart_icon = self.driver.\
        find_element_by_css_selector("div.header-minicart span.icon")
    shopping_cart_icon.click()

    # get the shopping cart status 
    shopping_cart_status = self.driver.\
        find_element_by_css_selector("p.empty").text
    self.assertEqual("You have no items in your shopping cart.", shopping_cart_status)
    # close the shopping cart section
    close_button = self.driver.\
        find_element_by_css_selector("div.minicart-wrapper a.close")
    close_button.click()  </pre></div><p>We used the element tag along with the class name in this example. For example, to get the shopping cart icon, we used the following selector:</p><div><pre class="programlisting">shopping_cart_icon = self.driver.\
        find_element_by_css_selector("<strong>div.header-minicart span.icon</strong>")</pre></div><p>This will first find a <code class="literal">&lt;div&gt;</code> element with the <code class="literal">header_minicart</code> class name and then find a <code class="literal">&lt;span&gt;</code> element under this <code class="literal">div</code>, which has <code class="literal">icon</code> as its class name.</p><p>You can find more <a id="id202" class="indexterm"/>about CSS selectors in <em>Selenium Testing Tools Cookbook</em>, <em>Packt Publishing</em>.</p></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec15"/>Finding links</h3></div></div></div><p>The <code class="literal">find_element_by_link_text()</code> and <code class="literal">find_elements_by_link_text()</code> methods find link(s) <a id="id203" class="indexterm"/>using the text displayed for the link. For example:</p><div><ol class="orderedlist arabic"><li class="listitem">To get the <strong>Account</strong> link displayed on the Home page, as shown in the following screenshot, we can use the <code class="literal">find_element_by_link_text()</code> method:<div><img src="img/3506_OS_03_12.jpg" alt="Finding links"/></div></li><li class="listitem">Here is the HTML code for the <strong>Account</strong> link implemented as the <code class="literal">&lt;a&gt;</code> (or anchor tag) and the <code class="literal">&lt;span&gt;</code> tag with text:<div><pre class="programlisting">&lt;a href="#header-account" class="skip-link skip-account"&gt;
  &lt;span class="icon"&gt;&lt;/span&gt;
  &lt;span class="label"&gt;Account&lt;/span&gt;
&lt;/a&gt;</pre></div></li><li class="listitem">Let's create a test that locates the <strong>Account</strong> link using its text and check whether it's displayed:<div><pre class="programlisting">    def test_my_account_link_is_displayed(self):
        # get the Account link
        account_link = self.driver.find_element_by_link_text("ACCOUNT")

        # check My Account link is displayed/visible in
		# the Home page footer
        self.assertTrue(account_link.is_displayed())</pre></div></li></ol></div><p>The <code class="literal">find_elements_by_link_text()</code> method gets all the link elements that have matching link text.</p></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec16"/>Finding links with partial text</h3></div></div></div><p>The <code class="literal">find_element_by_partial_link_text()</code> and <code class="literal">find_elements_by_partial_link_text()</code> methods find link(s) using partial text. These methods are useful where we want to find links using partial text values. Consider the following steps as an example:</p><div><ol class="orderedlist arabic"><li class="listitem">On the <a id="id204" class="indexterm"/>home page of the application, two links are <a id="id205" class="indexterm"/>displayed to open the Account page: one in the header section with <code class="literal">Account</code> as text and the other in the footer with <code class="literal">My Account</code> as text.</li><li class="listitem">Let's use the <code class="literal">find_elements_by_partial_link_text()</code> method to find these links using the <code class="literal">Account</code> text and check whether we have two of these links available on the page:<div><pre class="programlisting">def test_account_links(self):
    # get the all the links with Account text in it
    account_links = self.driver.\
        find_elements_by_partial_link_text("ACCOUNT")

    # check Account and My Account link is displayed/visible in the Home page footer
    self.assertTrue(2, len(account_links))</pre></div></li></ol></div></div></div></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch03lvl1sec17"/>Putting all the tests together using find methods</h1></div></div></div><p>In the <a id="id206" class="indexterm"/>previous sections, we saw various <code class="literal">find_element_by</code> methods along with examples. Let's pull together all these examples in a test.</p><div><ol class="orderedlist arabic"><li class="listitem">Create a new <code class="literal">homepagetest.py</code> file and copy all the tests that we created earlier as shown in the following code:<div><pre class="programlisting">import unittest
from selenium import webdriver

class HomePageTest(unittest.TestCase):
    @classmethod
    def setUpClass(cls):
        # create a new Firefox session
        cls.driver = webdriver.Firefox()
        cls.driver.implicitly_wait(30)
        cls.driver.maximize_window()

        # navigate to the application home page
        cls.driver.get('http://demo.magentocommerce.com/')

    def test_search_text_field_max_length(self):
        # get the search textbox
        search_field = self.driver.find_element_by_id("search")

        # check maxlength attribute is set to 128
        self.assertEqual("128", search_field.get_attribute ("maxlength"))

    def test_search_button_enabled(self):
        # get Search button
        search_button = self.driver.find_element_by_class_name("button")

        # check Search button is enabled
        self.assertTrue(search_button.is_enabled())

    def test_my_account_link_is_displayed(self):
        # get the Account link
        account_link = self.driver.find_element_by_link_text("ACCOUNT")

        # check My Account link is displayed/visible in # the Home page footer
        self.assertTrue(account_link.is_displayed())

    def test_account_links(self):
        # get the all the links with Account text in it
        account_links = self.driver.\
            find_elements_by_partial_link_text("ACCOUNT")

        # check Account and My Account link is
		# displayed/visible in the Home page footer
        self.assertTrue(2, len(account_links))

    def test_count_of_promo_banners_images(self):
        # get promo banner list
        banner_list = self.driver.find_element_by_class_name("promos")

        # get images from the banner_list
        banners = banner_list.find_elements_by_tag_name("img")

        # check there are 3 banners displayed on the page
        self.assertEqual(2, len(banners))

    def test_vip_promo(self):
        # get vip promo image
        vip_promo = self.driver.\
            find_element_by_xpath("//img[@alt='Shop Private Sales - Members Only']")

        # check vip promo logo is displayed on home page
        self.assertTrue(vip_promo.is_displayed())
        # click on vip promo images to open the page
        vip_promo.click()
        # check page title
        self.assertEqual("VIP", self.driver.title)

    def test_shopping_cart_status(self):
        # check content of My Shopping Cart block
		# on Home page
        # get the Shopping cart icon and click to # open the Shopping Cart section
        shopping_cart_icon = self.driver.\
            find_element_by_css_selector("div.header-minicart span.icon")
        shopping_cart_icon.click()

        # get the shopping cart status
        shopping_cart_status = self.driver.\
            find_element_by_css_selector("p.empty").text
        self.assertEqual("You have no items in your shopping cart.", shopping_cart_status)
        # close the shopping cart section
        close_button = self.driver.\
          find_element_by_css_selector("div.minicart-wrapper a.close")
        close_button.click()

    @classmethod
    def tearDownClass(cls):
        # close the browser window
        cls.driver.quit()

if __name__ == '__main__':
    unittest.main(verbosity=2)</pre></div></li><li class="listitem">Let's execute all the tests through the command line using the following command:<div><pre class="programlisting">
<strong>python homepagetest.py</strong>
</pre></div></li><li class="listitem">After running the tests, <code class="literal">unittest</code> shows that seven tests were run and all passed with OK status <a id="id207" class="indexterm"/>as shown in the following screenshot:<div><img src="img/3506_OS_03_13.jpg" alt="Putting all the tests together using find methods"/></div></li></ol></div></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch03lvl1sec18"/>Summary</h1></div></div></div><p>In this chapter, you learned one of the most important features of Selenium for finding elements on web pages to simulate user actions.</p><p>We looked at various <code class="literal">find_element_by_</code> methods to find an element using ID, name, class name attributes, tags names, XPath, CSS selectors, and to find links using link text and partial link text.</p><p>We implemented tests using various <code class="literal">find_element_by</code> methods to understand various strategies that we can use to find elements.</p><p>This chapter will be the foundation for the coming chapters that delve into using the Selenium API for user interactions.</p><p>In the next chapter, you will learn how to use Selenium WebDriver functions to interact with various HTML elements and perform actions such as entering a value in a textbox, clicking on a button, selecting drop-down options, handling JavaScript alerts, and working with frames and windows.</p></div></div>
</body></html>