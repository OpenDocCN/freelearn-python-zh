["```py\n    <st c=\"9124\">python3 manage.py startapp cart</st>\n    ```", "```py\n    <st c=\"9196\">python manage.py startapp cart</st>\n    ```", "```py\n …\nINSTALLED_APPS = [\n    …\n    'movies',\n    'accounts', <st c=\"9807\">'cart',</st> ]\n…\n```", "```py\n …\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('', include('home.urls')),\n    path('movies/', include('movies.urls')),\n    path('accounts/', include('accounts.urls')), <st c=\"10103\">path('cart/', include('cart.urls')),</st> ]\n…\n```", "```py\n from django.urls import path\nfrom . import views\nurlpatterns = [\n    path('<int:id>/add/', views.add, name='cart.add'),\n]\n```", "```py\n from django.shortcuts import render <st c=\"11477\">from django.shortcuts import get_object_or_404, redirect</st>\n<st c=\"11533\">from movies.models import Movie</st>\n<st c=\"11565\">def add(request, id):</st>\n <st c=\"11587\">get_object_or_404(Movie, id=id)</st>\n <st c=\"11619\">cart = request.session.get('cart', {})</st>\n <st c=\"11658\">cart[id] = request.POST['quantity']</st>\n <st c=\"11694\">request.session['cart'] = cart</st>\n <st c=\"11725\">return redirect('home.index')</st>\n```", "```py\n …\n        <p><b>Description:</b> {{\n          template_data.movie.description }}</p>\n        <p>\n          <b>Price:</b> ${{ template_data.movie.price }}\n        </p> <st c=\"13168\"><p class=\"card-text\"></st>\n <st c=\"13189\"><form method=\"post\"</st>\n <st c=\"13209\">action=\"{% url 'cart.add'</st>\n <st c=\"13235\">id=template_data.movie.id %}\"></st>\n <st c=\"13266\"><div class=\"row\"></st>\n <st c=\"13284\">{% csrf_token %}</st>\n <st c=\"13301\"><div class=\"col-auto\"></st>\n <st c=\"13324\"><div class=\"input-group col-auto\"></st>\n <st c=\"13359\"><div class=\"input-group-text\">Quantity</st>\n <st c=\"13398\"></div></st>\n**<st c=\"13405\"><input type=\"number\" min=\"1\" max=\"10\"</st>**\n **<st c=\"13443\">class=\"form-control quantity-input\"</st>**\n **<st c=\"13479\">name=\"quantity\" value=\"1\"></st>**\n **<st c=\"13506\"></div></st>**\n **<st c=\"13513\"></div></st>**\n **<st c=\"13520\"><div class=\"col-auto\"></st>**\n **<st c=\"13543\"><button class=\"btn bg-dark text-white\"</st>**\n **<st c=\"13582\">type=\"submit\">Add to cart</button></st>**\n **<st c=\"13617\"></div></st>**\n **<st c=\"13624\"></div></st>**\n****<st c=\"13631\"></form></st>**\n **<st c=\"13639\"></p></st>** <st c=\"13644\">…</st>**\n```", "```py\n from django.urls import path\nfrom . import views\nurlpatterns = [ <st c=\"14909\">path('', views.index, name='cart.index'),</st> path('<int:id>/add/', views.add, name='cart.add'),\n]\n```", "```py\n def calculate_cart_total(cart, movies_in_cart):\n    total = 0\n    for movie in movies_in_cart:\n        quantity = cart[str(movie.id)]\n        total += movie.price * int(quantity)\n    return total\n```", "```py\n from django import template\nregister = template.Library()\n@register.filter(name='get_quantity')\ndef get_cart_quantity(cart, movie_id):\n    return cart[str(movie_id)]\n```", "```py\n from django.shortcuts import render\nfrom django.shortcuts import get_object_or_404, redirect\nfrom movies.models import Movie <st c=\"19789\">from .utils import calculate_cart_total</st>\n<st c=\"19828\">def index(request):</st>\n <st c=\"19848\">cart_total = 0</st>\n <st c=\"19863\">movies_in_cart = []</st>\n <st c=\"19883\">cart = request.session.get('cart', {})</st>\n <st c=\"19922\">movie_ids = list(cart.keys())</st>\n <st c=\"19952\">if (movie_ids != []):</st>\n <st c=\"19974\">movies_in_cart =</st>\n <st c=\"19991\">Movie.objects.filter(id__in=movie_ids)</st>\n <st c=\"20030\">cart_total = calculate_cart_total(cart,</st>\n <st c=\"20070\">movies_in_cart)</st>\n <st c=\"20086\">template_data = {}</st>\n <st c=\"20105\">template_data['title'] = 'Cart'</st>\n <st c=\"20137\">template_data['movies_in_cart'] = movies_in_cart</st>\n <st c=\"20186\">template_data['cart_total'] = cart_total</st>\n <st c=\"20227\">return render(request, 'cart/index.html',</st>\n <st c=\"20269\">{'template_data': template_data})</st> def add(request, id):\n    …\n```", "```py\n {% extends 'base.html' %}\n{% block content %}\n{% load static %}\n{% load cart_filters %}\n<div class=\"p-3\">\n  <div class=\"container\">\n    <div class=\"row mt-3\">\n      <div class=\"col mx-auto mb-3\">\n        <h2>Shopping Cart</h2>\n        <hr />\n      </div>\n    </div>\n    <div class=\"row m-1\">\n      <table class=\"table table-bordered table-striped\n        text-center\">\n        <thead>\n          <tr>\n            <th scope=\"col\">ID</th>\n            <th scope=\"col\">Name</th>\n            <th scope=\"col\">Price</th>\n            <th scope=\"col\">Quantity</th>\n          </tr>\n        </thead>\n        <tbody>\n          {% for movie in template_data.movies_in_cart %}\n          <tr>\n            <td>{{ movie.id }}</td>\n            <td>{{ movie.name }}</td>\n            <td>${{ movie.price }}</td>\n            <td>{{\n              request.session.cart|get_quantity:movie.id }}\n            </td>\n          </tr>\n          {% endfor %}\n        </tbody>\n      </table>\n    </div>\n    <div class=\"row\">\n      <div class=\"text-end\">\n        <a class=\"btn btn-outline-secondary mb-2\"><b>Total\n          to pay:</b> ${{ template_data.cart_total }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n{% endblock content %}\n```", "```py\n …\ndef add_to_cart(request, id):\n    get_object_or_404(Movie, id=id)\n    cart = request.session.get('cart', {})\n    cart[id] = request.POST['quantity']\n    request.session['cart'] = cart\n    return redirect('<st c=\"23046\">cart</st>.index')\n```", "```py\n …\n            <a class=\"nav-link\"\n              href=\"{% url 'home.about' %}\">About</a>\n            <a class=\"nav-link\"\n              href=\"{% url 'movies.index' %}\">Movies</a> <st c=\"23449\"><a class=\"nav-link\"</st>\n <st c=\"23468\">href=\"{% url 'cart.index' %}\">Cart</a></st> …\n```", "```py\n from django.urls import path\nfrom . import views\nurlpatterns = [\n    path('', views.index, name='cart.index'),\n    path('<int:id>/add/', views.add, name='cart.add'), <st c=\"24540\">path('clear/', views.clear, name='cart.clear'),</st> ]\n```", "```py\n … <st c=\"24826\">def clear(request):</st>\n <st c=\"24845\">request.session['cart'] = {}</st>\n <st c=\"24874\">return redirect('cart.index')</st>\n```", "```py\n …\n    <div class=\"row\">\n      <div class=\"text-end\">\n        <a class=\"btn btn-outline-secondary mb-2\"><b>Total\n          to pay:</b> ${{ template_data.cart_total }}</a> <st c=\"25315\">{% if template_data.movies_in_cart|length > 0 %}</st>\n <st c=\"25363\"><a href=\"{% url 'cart.clear' %}\"></st>\n <st c=\"25397\"><button class=\"btn btn-danger mb-2\"></st>\n <st c=\"25434\">Remove all movies from Cart</st>\n <st c=\"25462\"></button></st>\n <st c=\"25472\"></a></st>\n <st c=\"25477\">{% endif %}</st> </div>\n    </div>\n    …\n```"]