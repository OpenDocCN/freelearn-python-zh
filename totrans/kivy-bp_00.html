<html><head></head><body><div class="preface" title="Preface"><div class="titlepage"><div><div><h1 class="title"><a id="pref05"/>Preface</h1></div></div></div><p>Mobile applications ceased to be the "new hotness" a long time ago, and these days users routinely expect that new software—be it a videogame or a social network—has a mobile version. Similar trend affects desktop operating systems; writing cross-platform software, once uncommon, has swiftly become a norm. Even game developers, usually limited to Microsoft operating systems on desktop, can be seen working on Mac and Linux ports for many new titles (for example, Steam, at the time of writing, hosts more than a hundred games that run on Mac and more than 50 that run on Linux).</p><p>This is especially valuable for start-ups and indie developers: building truly cross-platform software widens the potential audience, which leads to increased sales and may create good press along the way.</p><p>On the downside, writing portable software can be a very resource-hungry process, and this also affects small developers much more than big corporations.</p><p>In particular, many platforms have a preferred programming language and <span class="strong"><strong>software development kit</strong></span> (<span class="strong"><strong>SDK</strong></span>): iOS apps are mostly written in Objective-C and Swift, Android suggests the subpar Java programming language, and Microsoft promotes the use of the .NET framework, especially C#, for building Windows software.</p><p>Employing these tools allows you to leverage the native user interface and underlying functionality of an OS, but it also automatically prevents code reuse. This means that even if you are equally proficient in all programming languages and interfaces involved, porting the code may still take a non-trivial amount of time and introduce new bugs.</p><div class="section" title="Write once, run anywhere"><div class="titlepage"><div><div><h1 class="title"><a id="ch00lvl1sec02"/>Write once, run anywhere</h1></div></div></div><p>This whole situation creates a demand for a universal, multi-platform way to program. The problem isn't exactly new: one solution to it, created by Sun in 1995, is the Java programming language. Its marketing promise—<span class="emphasis"><em>write once, run anywhere</em></span>—was never fulfilled and the language itself is unreasonably cumbersome to use. This led to many mocking variations of the slogan, culminating with <span class="emphasis"><em>write once, run away</em></span> that refers to many developers abandoning Java in favor of better programming languages, including Python.</p><p>Not coincidentally, Kivy—the main topic of this book—is a graphical user interface library facilitating easy creation of multi-platform Python applications. The main features of Kivy toolkit are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Compatibility</strong></span>: Kivy-based apps work in Linux, Mac OS X, Windows, Android, and iOS—all from a single codebase.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Natural user interface</strong></span>: Kivy bridges the gap between different input methods, allowing you to handle a multitude of possible user interactions with similar code, mouse events and multitouch gestures alike.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Fast hardware-accelerated graphics</strong></span>: OpenGL rendering makes Kivy suitable for creating graphics-heavy applications such as videogames, and also improves the user experience with smooth transitions.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>The use of Python</strong></span>: Kivy apps are written in Python, one of the better general purpose programming languages. In addition to being inherently portable, expressive, and readable, Python features a useful standard library and a rich ecosystem of third-party packages, the <span class="strong"><strong>Python Package Index</strong></span> (<span class="strong"><strong>PyPI</strong></span>).</li></ul></div><p>Speaking of third-party packages, Kivy can be seen as a superset of many battle-tested components: a large part of its functionality relies on well-known libraries such as Pygame, SDL, and GStreamer. The API that Kivy exposes, however, is very high-level and unified.</p><p>It's worth mentioning that Kivy is free and open source MIT licensed software. In practice, this means that you can use it commercially without paying licensing fees. Its full source code is hosted on GitHub, so you can also patch bugs or add new features to it.</p></div></div>
<div class="section" title="What this book covers"><div class="titlepage"><div><div><h1 class="title"><a id="ch00lvl1sec03"/>What this book covers</h1></div></div></div><p>
<a class="link" href="ch01.html" title="Chapter 1. Building a Clock App">Chapter 1</a>, <span class="emphasis"><em>Building a Clock App</em></span> provides a gentle introduction to writing applications with Kivy. It covers the Kivy language, layouts, widgets and timers. By the end of the chapter we build a simple Clock app, similar to the one found in your cellphone.</p><p>
<a class="link" href="ch02.html" title="Chapter 2. Building a Paint App">Chapter 2</a>, <span class="emphasis"><em>Building a Paint App</em></span> is a further exploration of the Kivy framework's components and functionality. The resulting Paint app showcases the customization of built-in widgets, drawing arbitrary shapes on canvas and handling multi-touch events.</p><p>
<a class="link" href="ch03.html" title="Chapter 3. Sound Recorder for Android">Chapter 3</a>, <span class="emphasis"><em>Sound Recorder for Android</em></span> serves as an example of writing a Kivy-based Android app. It shows how to use the Pyjnius interoperability layer to load Java classes into Python, which enables us to mix Android API calls with a Kivy-based user interface.</p><p>
<a class="link" href="ch04.html" title="Chapter 4. Kivy Networking">Chapter 4</a>, <span class="emphasis"><em>Kivy Networking</em></span> is a hands-on guide to building a network application from the ground up. In covers a number of topics, from creating a simple protocol to writing server and client software in Python, and culminates with the Kivy Chat application.</p><p>
<a class="link" href="ch05.html" title="Chapter 5. Making a Remote Desktop App">Chapter 5</a>, <span class="emphasis"><em>Making a Remote Desktop App</em></span> exemplifies another way of writing client-server apps. This chapter's program is based on the HTTP protocol—the one that powers the Internet. We develop a command-line HTTP server first, and then build the Remote Desktop client app with Kivy.</p><p>
<a class="link" href="ch06.html" title="Chapter 6. Making the 2048 Game">Chapter 6</a>, <span class="emphasis"><em>Making the 2048 Game</em></span> walks you through building a playable replica of the 2048 game. We demonstrate more complex Kivy functionality, such as creating custom widgets, using Kivy properties for data binding, and processing touch screen gestures.</p><p>
<a class="link" href="ch07.html" title="Chapter 7. Writing a Flappy Bird Clone">Chapter 7</a>, <span class="emphasis"><em>Writing a Flappy Bird Clone</em></span> introduces another Kivy-based game, this time it's an arcade game similar to the well-known Flappy Bird title. Over the course of this chapter we discuss the use of texture coordinates and sounds effects, implement arcade physics and collision detection.</p><p>
<a class="link" href="ch08.html" title="Chapter 8. Introducing Shaders">Chapter 8</a>, <span class="emphasis"><em>Introducing Shaders</em></span> demonstrates the use of GLSL shaders in the context of a Kivy application. In this tutorial you will learn about OpenGL primitives such as indices and vertices, and then write incredibly fast low-level code that runs directly on the GPU.</p><p>
<a class="link" href="ch09.html" title="Chapter 9. Making a Shoot-Em-Up Game">Chapter 9</a>, <span class="emphasis"><em>Making a Shoot-Em-Up Game</em></span> continues where the previous chapter left off: we use the knowledge of GLSL in order to build a side-scrolling shooter. A reusable particle system class is developed along the way. This project concludes the series and capitalizes on many techniques that were explained throughout the book, such as collision detection, touch screen controls, sound effects and so on.</p><p>
<a class="link" href="apa.html" title="Appendix A. The Python Ecosystem">Appendix</a>, <span class="emphasis"><em>The Python Ecosystem</em></span>, gives you more on Python libraries and tools.</p></div>
<div class="section" title="Setting up the working environment"><div class="titlepage"><div><div><h1 class="title"><a id="ch00lvl1sec04"/>Setting up the working environment</h1></div></div></div><p>This section briefly discusses the requirements needed to effectively follow the narrative, implement, and run Kivy applications. Personal computer running a modern operating system—a Mac, Linux, or Windows box—is implied.</p><div class="section" title="A note on Python"><div class="titlepage"><div><div><h2 class="title"><a id="ch00lvl2sec03"/>A note on Python</h2></div></div></div><p>Python is the primary programming language used in the book; good knowledge of it, while not strictly necessary, may help.</p><p>At the time of writing, there are two incompatible versions of Python in wide use. Python 2.7 is monumentally stable but no longer actively developed, and Python 3 is a newer and slightly more controversial version bringing many improvements to the language, but occasionally breaking compatibility along the way.</p><p>The code in this book should largely work in both Python versions, but it may need minor adjustments to be fully compatible with Python 3; for best results, it's recommended that you use Python 2.7, or the latest Python 2 version available for your system.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note01"/>Note</h3><p>Installing Python separately for Kivy development is not necessary on most platforms: it either comes preinstalled (Mac OS X), bundled with Kivy (MS Windows), or included as a dependency (Linux, Ubuntu in particular).</p></div></div></div><div class="section" title="Installing and running Kivy"><div class="titlepage"><div><div><h2 class="title"><a id="ch00lvl2sec04"/>Installing and running Kivy</h2></div></div></div><p>Kivy can be downloaded from the official site (<a class="ulink" href="http://kivy.org/">http://kivy.org/</a>); just choose an appropriate version and follow the instructions. This whole procedure should be pretty straightforward and simple.</p><div class="mediaobject"><img src="graphics/7849OS_Preface_01.jpg" alt="Installing and running Kivy"/><div class="caption"><p>Kivy downloads</p></div></div><p>To check whether the installation is working, follow these instructions:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">On a Mac:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open <span class="strong"><strong>Terminal.app</strong></span>.</li><li class="listitem">Run <code class="literal">kivy</code>.</li><li class="listitem">The Python prompt, <code class="literal">&gt;&gt;&gt;</code>, should appear. Type <code class="literal">import kivy</code>.</li><li class="listitem">The command should complete with no errors, printing a message along the lines of <code class="literal">[INFO] Kivy v1.8.0</code>.</li></ol></div></li><li class="listitem" style="list-style-type: disc">On a Linux machine:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open a terminal.</li><li class="listitem">Run <code class="literal">python</code>.</li><li class="listitem">The Python prompt, <code class="literal">&gt;&gt;&gt;</code>, should appear. Type <code class="literal">import kivy</code>.</li><li class="listitem">The command should print a message similar to <code class="literal">[INFO] Kivy v1.8.0</code>.</li></ol></div></li><li class="listitem" style="list-style-type: disc">On a Windows box:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Double-click <span class="strong"><strong>kivy.bat</strong></span> inside the Kivy package directory.</li><li class="listitem">Type <code class="literal">python</code> at the command prompt.</li><li class="listitem">Type <code class="literal">import kivy</code>.</li><li class="listitem">The command should print a message similar to <code class="literal">[INFO] Kivy v1.8.0</code>.</li></ol></div><div class="mediaobject"><img src="graphics/7849OS_Preface_02.jpg" alt="Installing and running Kivy"/><div class="caption"><p>A terminal session</p></div></div></li></ul></div><p>Running a Kivy application (basically, a Python program) is achieved similarly:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">On a Mac, use <code class="literal">kivy main.py</code></li><li class="listitem" style="list-style-type: disc">On Linux, use <code class="literal">python main.py</code></li><li class="listitem" style="list-style-type: disc">On Windows, use <code class="literal">kivy.bat main.py</code> (or drag-and-drop the <span class="strong"><strong>main.py</strong></span> file on top of <span class="strong"><strong>kivy.bat</strong></span>).</li></ul></div></div><div class="section" title="Note on coding"><div class="titlepage"><div><div><h2 class="title"><a id="ch00lvl2sec05"/>Note on coding</h2></div></div></div><p>Programming typically amounts to working with text a lot; hence, it's important to choose a good text editor. This is why I profoundly recommend trying Vim before you consider other options.</p><p>Vim is one of the better text editors largely available; it's highly configurable and built specifically for effective text editing (way more so than a typical alternative). Vim has a vibrant community, is actively maintained, and comes preinstalled with many Unix-like operating systems—including Mac OS X and Linux. It is known that (at least some) developers of the Kivy framework also prefer Vim.</p><p>Here are some quick Kivy-related tips for Vim users out there:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Python-mode</strong></span> (<a class="ulink" href="https://github.com/klen/python-mode">https://github.com/klen/python-mode</a>) is great for writing Python code. It throws in a lot of extra functionality, such as stylistic and static checker, smart completion, and support for refactoring.</li><li class="listitem" style="list-style-type: disc">Source code of GLSL shaders can be properly highlighted using the <code class="literal">vim-glsl</code> syntax (<a class="ulink" href="https://github.com/tikhomirov/vim-glsl">https://github.com/tikhomirov/vim-glsl</a>).</li><li class="listitem" style="list-style-type: disc">Kivy texture maps (the <code class="literal">.atlas</code> files, covered in <a class="link" href="ch08.html" title="Chapter 8. Introducing Shaders">Chapter 8</a>, <span class="emphasis"><em>Introducing Shaders</em></span>) are basically JSON, so you can use, for example, <span class="strong"><strong>vim-json</strong></span> (<a class="ulink" href="https://github.com/elzr/vim-json">https://github.com/elzr/vim-json</a>), and add a file association to your <code class="literal">.vimrc</code> file like this:<div class="informalexample"><pre class="programlisting">au BufNewFile,BufRead *.atlas set filetype=json</pre></div></li><li class="listitem" style="list-style-type: disc">Kivy layout files, <code class="literal">.kv</code>, are slightly more complicated to handle as they're similar to Python, but don't really parse as Python. There is an incomplete Vim plugin in the Kivy repository, but at the time of writing, Vim's built-in <span class="strong"><strong>YAML</strong></span> support highlights these files better (this obviously might change in future). To load <code class="literal">.kv</code> files as YAML, add the following line to your <code class="literal">.vimrc</code> file:<div class="informalexample"><pre class="programlisting">au BufNewFile,BufRead *.kv set filetype=yaml</pre></div></li></ul></div><p>Clearly, you are not <span class="emphasis"><em>obliged</em></span> to use Vim to follow examples of this book—this is but a mere suggestion. Now let's write a bit of code, shall we?</p></div></div>
<div class="section" title="Hello, Kivy"><div class="titlepage"><div><div><h1 class="title"><a id="ch00lvl1sec05"/>Hello, Kivy</h1></div></div></div><p>When learning a new programming language or technology, the first thing demonstrated to students is traditionally a "hello, world" program. This is how it looks in Python:</p><div class="informalexample"><pre class="programlisting">print('hello, world')</pre></div><p>The Kivy version of a "hello, world" is a little lengthier and consists of two files, namely, a Python module and a <code class="literal">.kv</code> layout definition.</p><div class="section" title="Code"><div class="titlepage"><div><div><h2 class="title"><a id="ch00lvl2sec06"/>Code</h2></div></div></div><p>A Kivy application's entry point is customarily called <code class="literal">main.py</code>, and its contents are as follows:</p><div class="informalexample"><pre class="programlisting">from kivy.app import App

class HelloApp(App):
    pass

if __name__ == '__main__':
    HelloApp().run()</pre></div><p>As you can see, this takes Kivy's <code class="literal">App</code> class, adds absolutely nothing to it, and calls <code class="literal">run()</code>.</p></div><div class="section" title="Layout"><div class="titlepage"><div><div><h2 class="title"><a id="ch00lvl2sec07"/>Layout</h2></div></div></div><p>A layout file is typically named after the application class, in this case <code class="literal">HelloApp</code>, sans the <code class="literal">App</code> suffix and in lowercase: <code class="literal">hello.kv</code>. It contains the following lines:</p><div class="informalexample"><pre class="programlisting">Label:
    text: 'Hello, Kivy'</pre></div><p>This is a very simple Kivy layout definition consisting of a single widget, <code class="literal">Label</code>, with the desired text inside. Layout files allow building complex widget hierarchies in a concise, declarative fashion, which is clearly not displayed here, but will be heavily used over the course of this book.</p><p>If we run the program now (refer to the <span class="emphasis"><em>Installing and running Kivy </em></span>section for details), this is what we'll get:</p><div class="mediaobject"><img src="graphics/7849OS_Preface_03.jpg" alt="Layout"/><div class="caption"><p>Our first application powered by Kivy</p></div></div><p>Now you're ready to move on to the first chapter and start writing real programs.</p></div></div>
<div class="section" title="Who this book is for"><div class="titlepage"><div><div><h1 class="title"><a id="ch00lvl1sec06"/>Who this book is for</h1></div></div></div><p>This book is intended for programmers who are comfortable with the Python language and who want to build desktop and mobile applications with a rich graphical user interface in Python with minimal hassle. Knowledge of Kivy, while certainly won't hurt, is not required—every aspect of the framework is described when it's first used.</p><p>At various points in this book, we will make an analogy between Kivy and web development practices. However, an extensive knowledge of the latter also isn't required to follow the narrative.</p></div>
<div class="section" title="Conventions"><div class="titlepage"><div><div><h1 class="title"><a id="ch00lvl1sec07"/>Conventions</h1></div></div></div><p>In this book, you will find a number of text styles that distinguish between different kinds of information. Here are some examples of these styles and an explanation of their meaning.</p><p>Code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles are shown as follows: "Kivy application's entry point is customarily called <code class="literal">main.py</code>."</p><p>A block of code is set as follows:</p><div class="informalexample"><pre class="programlisting">from kivy.app import App

class HelloApp(App):
    pass

if __name__ == '__main__':
    HelloApp().run()</pre></div><p>When we wish to draw your attention to a particular part of a code block, the relevant lines or items are set in bold:</p><div class="informalexample"><pre class="programlisting"># In Python code
LabelBase.register(name="Roboto",
    <span class="strong"><strong>fn_regular</strong></span>="Roboto-Regular.ttf",
    <span class="strong"><strong>fn_bold</strong></span>="Roboto-Bold.ttf",
    <span class="strong"><strong>fn_italic</strong></span>="Roboto-Italic.ttf",
    <span class="strong"><strong>fn_bolditalic</strong></span>="Roboto-BoldItalic.ttf")</pre></div><p>Any command-line input or output is written as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>pip install -U twisted</strong></span>
</pre></div><p>
<span class="strong"><strong>New terms</strong></span> and <span class="strong"><strong>important words</strong></span> are shown in bold. Words that you see on the screen, for example, in menus or dialog boxes, appear in the text like this: "The first event handler is for the <span class="strong"><strong>Start</strong></span> and <span class="strong"><strong>Stop</strong></span> buttons."</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note02"/>Note</h3><p>Warnings or important notes appear in a box like this.</p></div></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip01"/>Tip</h3><p>Tips and tricks appear like this.</p></div></div></div>
<div class="section" title="Reader feedback"><div class="titlepage"><div><div><h1 class="title"><a id="ch00lvl1sec08"/>Reader feedback</h1></div></div></div><p>Feedback from our readers is always welcome. Let us know what you think about this book—what you liked or disliked. Reader feedback is important for us as it helps us develop titles that you will really get the most out of.</p><p>To send us general feedback, simply e-mail <code class="email">&lt;<a class="email" href="mailto:feedback@packtpub.com">feedback@packtpub.com</a>&gt;</code>, and mention the book's title in the subject of your message.</p><p>If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, see our author guide at <a class="ulink" href="http://www.packtpub.com/authors">www.packtpub.com/authors</a>.</p></div>
<div class="section" title="Customer support"><div class="titlepage"><div><div><h1 class="title"><a id="ch00lvl1sec09"/>Customer support</h1></div></div></div><p>Now that you are the proud owner of a Packt book, we have a number of things to help you to get the most from your purchase.</p><div class="section" title="Downloading the example code"><div class="titlepage"><div><div><h2 class="title"><a id="ch00lvl2sec08"/>Downloading the example code</h2></div></div></div><p>You can download the example code files from your account at <a class="ulink" href="http://www.packtpub.com">http://www.packtpub.com</a> for all the Packt Publishing books you have purchased. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you. Another option of getting the up-to-date source code is by cloning the GitHub repository, <a class="ulink" href="https://github.com/mvasilkov/kb">https://github.com/mvasilkov/kb</a>.</p></div><div class="section" title="Downloading the color images of this book"><div class="titlepage"><div><div><h2 class="title"><a id="ch00lvl2sec09"/>Downloading the color images of this book</h2></div></div></div><p>We also provide you with a PDF file that has color images of the screenshots/diagrams used in this book. The color images will help you better understand the changes in the output. You can download this file from: <a class="ulink" href="http://www.packtpub.com/sites/default/files/downloads/7849OS_ColorImages.pdf">http://www.packtpub.com/sites/default/files/downloads/7849OS_ColorImages.pdf</a>.</p></div><div class="section" title="Errata"><div class="titlepage"><div><div><h2 class="title"><a id="ch00lvl2sec10"/>Errata</h2></div></div></div><p>Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you find a mistake in one of our books—maybe a mistake in the text or the code—we would be grateful if you could report this to us. By doing so, you can save other readers from frustration and help us improve subsequent versions of this book. If you find any errata, please report them by visiting <a class="ulink" href="http://www.packtpub.com/submit-errata">http://www.packtpub.com/submit-errata</a>, selecting your book, clicking on the <span class="strong"><strong>Errata Submission Form</strong></span> link, and entering the details of your errata. Once your errata are verified, your submission will be accepted and the errata will be uploaded to our website or added to any list of existing errata under the Errata section of that title.</p><p>To view the previously submitted errata, go to <a class="ulink" href="https://www.packtpub.com/books/content/support">https://www.packtpub.com/books/content/support</a> and enter the name of the book in the search field. The required information will appear under the <span class="strong"><strong>Errata</strong></span> section.</p></div><div class="section" title="Piracy"><div class="titlepage"><div><div><h2 class="title"><a id="ch00lvl2sec11"/>Piracy</h2></div></div></div><p>Piracy of copyrighted material on the Internet is an ongoing problem across all media. At Packt, we take the protection of our copyright and licenses very seriously. If you come across any illegal copies of our works in any form on the Internet, please provide us with the location address or website name immediately so that we can pursue a remedy.</p><p>Please contact us at <code class="email">&lt;<a class="email" href="mailto:copyright@packtpub.com">copyright@packtpub.com</a>&gt;</code> with a link to the suspected pirated material.</p><p>We appreciate your help in protecting our authors and our ability to bring you valuable content.</p></div><div class="section" title="Questions"><div class="titlepage"><div><div><h2 class="title"><a id="ch00lvl2sec12"/>Questions</h2></div></div></div><p>If you have a problem with any aspect of this book, you can contact us at <code class="email">&lt;<a class="email" href="mailto:questions@packtpub.com">questions@packtpub.com</a>&gt;</code>, and we will do our best to address the problem.</p></div></div></body></html>