<html xml:lang="en-US" xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
<head>
<meta charset="utf-8"/>
<meta content="pandoc" name="generator"/>
<title>ch010.xhtml</title>
<link href="../styles/stylesheet1.css" rel="stylesheet" type="text/css"/>
<!-- kobo-style -->
<style id="koboSpanStyle" type="text/css" xmlns="http://www.w3.org/1999/xhtml">.koboSpan { -webkit-text-combine: inherit; }</style>
</head>
<body epub:type="bodymatter">
<section class="level1" data-number="10" id="chapter-6-project-2.1-data-inspection-notebook">
<h1 data-number="10"><span class="titlemark"><span class="koboSpan" id="kobo.1.1" xmlns="http://www.w3.org/1999/xhtml">Chapter 6</span></span><br/>
<span id="x1-1460006"/><span class="koboSpan" id="kobo.2.1" xmlns="http://www.w3.org/1999/xhtml">Project 2.1: Data Inspection Notebook</span></h1>
<p><span class="koboSpan" id="kobo.3.1" xmlns="http://www.w3.org/1999/xhtml">We often need to do an ad hoc inspection of source data. </span><span class="koboSpan" id="kobo.3.2" xmlns="http://www.w3.org/1999/xhtml">In particular, the very first time we acquire new data, we need to see the file to be sure it meets expectations. </span><span class="koboSpan" id="kobo.3.3" xmlns="http://www.w3.org/1999/xhtml">Additionally, debugging and problem-solving also benefit from ad hoc data inspections. </span><span class="koboSpan" id="kobo.3.4" xmlns="http://www.w3.org/1999/xhtml">This chapter will guide you through using a Jupyter notebook to survey data and find the structure and domains of the attributes.</span></p>
<p><span class="koboSpan" id="kobo.4.1" xmlns="http://www.w3.org/1999/xhtml">The previous chapters have focused on a simple dataset where the data types look like obvious floating-point values. </span><span class="koboSpan" id="kobo.4.2" xmlns="http://www.w3.org/1999/xhtml">For such a trivial dataset, the inspection isn’t going to be very complicated.</span></p>
<p><span class="koboSpan" id="kobo.5.1" xmlns="http://www.w3.org/1999/xhtml">It can help to start with a trivial dataset and focus on the tools and how they work together. </span><span class="koboSpan" id="kobo.5.2" xmlns="http://www.w3.org/1999/xhtml">For this reason, we’ll continue using relatively small datasets to let you learn about the tools without having the burden of </span><strong><span class="koboSpan" id="kobo.6.1" xmlns="http://www.w3.org/1999/xhtml">also</span></strong><span class="koboSpan" id="kobo.7.1" xmlns="http://www.w3.org/1999/xhtml"> trying to understand the data.</span></p>
<p><span class="koboSpan" id="kobo.8.1" xmlns="http://www.w3.org/1999/xhtml">This chapter’s projects cover how to create and use a Jupyter notebook for data inspection. </span><span class="koboSpan" id="kobo.8.2" xmlns="http://www.w3.org/1999/xhtml">This permits tremendous flexibility, something often required when looking at new data for the first time. </span><span class="koboSpan" id="kobo.8.3" xmlns="http://www.w3.org/1999/xhtml">It’s also essential when diagnosing problems with data that has — unexpectedly — changed.</span></p>
<p><span class="koboSpan" id="kobo.9.1" xmlns="http://www.w3.org/1999/xhtml">A Jupyter notebook is inherently interactive and saves us from having to design and build an interactive application. </span><span class="koboSpan" id="kobo.9.2" xmlns="http://www.w3.org/1999/xhtml">Instead, we need to be disciplined in using a notebook only to examine data, never to apply changes.</span></p>
<p><span class="koboSpan" id="kobo.10.1" xmlns="http://www.w3.org/1999/xhtml">This chapter has one project, to build an inspection notebook. </span><span class="koboSpan" id="kobo.10.2" xmlns="http://www.w3.org/1999/xhtml">We’ll start with a description of the notebook’s purpose. </span><span id="x1-146001r156"/></p>
<section class="level2" data-number="10.1" id="description-6">
<h2 data-number="10.1"><span class="titlemark"><span class="koboSpan" id="kobo.11.1" xmlns="http://www.w3.org/1999/xhtml">6.1 </span></span> <span id="x1-1470001"/><span class="koboSpan" id="kobo.12.1" xmlns="http://www.w3.org/1999/xhtml">Description</span></h2>
<p><span class="koboSpan" id="kobo.13.1" xmlns="http://www.w3.org/1999/xhtml">When confronted with raw data acquired from a source application, database, or web API, it’s prudent to inspect the </span><span id="dx1-147001"/><span class="koboSpan" id="kobo.14.1" xmlns="http://www.w3.org/1999/xhtml">data to be sure it really can be used for the desired analysis. </span><span class="koboSpan" id="kobo.14.2" xmlns="http://www.w3.org/1999/xhtml">It’s common to find that data doesn’t precisely match the given descriptions. </span><span class="koboSpan" id="kobo.14.3" xmlns="http://www.w3.org/1999/xhtml">It’s also possible to discover that the metadata is out of date or incomplete.</span></p>
<p><span class="koboSpan" id="kobo.15.1" xmlns="http://www.w3.org/1999/xhtml">The foundational principle behind this project is the following:</span></p>
<p><strong><span class="koboSpan" id="kobo.16.1" xmlns="http://www.w3.org/1999/xhtml">We don’t always know what the actual data looks like.</span></strong></p>
<p><span class="koboSpan" id="kobo.17.1" xmlns="http://www.w3.org/1999/xhtml">Data may have errors because source applications have bugs. </span><span class="koboSpan" id="kobo.17.2" xmlns="http://www.w3.org/1999/xhtml">There could be ”undocumented features,” which are similar to bugs but have better explanations. </span><span class="koboSpan" id="kobo.17.3" xmlns="http://www.w3.org/1999/xhtml">There may have been actions made by users that have introduced new codes or status flags. </span><span class="koboSpan" id="kobo.17.4" xmlns="http://www.w3.org/1999/xhtml">For example, an application may have a ”comments” field on an accounts-payable record, and accounting clerks may have invented their own set of coded values, which they put in the last few characters of this field. </span><span class="koboSpan" id="kobo.17.5" xmlns="http://www.w3.org/1999/xhtml">This defines a manual process outside the enterprise software. </span><span class="koboSpan" id="kobo.17.6" xmlns="http://www.w3.org/1999/xhtml">It’s an essential business process that contains valuable data; it’s not part of any software.</span></p>
<p><span class="koboSpan" id="kobo.18.1" xmlns="http://www.w3.org/1999/xhtml">The general process for building a useful Jupyter notebook often proceeds through the following phases:</span></p>
<ol>
<li><div id="x1-147003x1">
<p><span class="koboSpan" id="kobo.19.1" xmlns="http://www.w3.org/1999/xhtml">Start with a simple display of selected rows.</span></p>
</div></li>
<li><div id="x1-147005x2">
<p><span class="koboSpan" id="kobo.20.1" xmlns="http://www.w3.org/1999/xhtml">Then, show ranges for what appear to be numerical fields.</span></p>
</div></li>
<li><div id="x1-147007x3">
<p><span class="koboSpan" id="kobo.21.1" xmlns="http://www.w3.org/1999/xhtml">Later, in a separate analysis notebook, we can find central tendency (mean, median, and standard deviation) values after they’ve been cleaned.</span></p>
</div></li>
</ol>
<p><span class="koboSpan" id="kobo.22.1" xmlns="http://www.w3.org/1999/xhtml">Using a notebook moves us away from the previous chapters’ focus on CLI applications. </span><span class="koboSpan" id="kobo.22.2" xmlns="http://www.w3.org/1999/xhtml">This is necessary because a </span><span id="dx1-147008"/><span class="koboSpan" id="kobo.23.1" xmlns="http://www.w3.org/1999/xhtml">notebook is interactive. </span><span class="koboSpan" id="kobo.23.2" xmlns="http://www.w3.org/1999/xhtml">It is designed to allow exploration with few constraints.</span></p>
<p><span class="koboSpan" id="kobo.24.1" xmlns="http://www.w3.org/1999/xhtml">The </span><strong><span class="koboSpan" id="kobo.25.1" xmlns="http://www.w3.org/1999/xhtml">User Experience </span></strong><span class="koboSpan" id="kobo.26.1" xmlns="http://www.w3.org/1999/xhtml">(</span><strong><span class="koboSpan" id="kobo.27.1" xmlns="http://www.w3.org/1999/xhtml">UX</span></strong><span class="koboSpan" id="kobo.28.1" xmlns="http://www.w3.org/1999/xhtml">) has two general steps to it:</span></p>
<ol>
<li><div id="x1-147010x1">
<p><span class="koboSpan" id="kobo.29.1" xmlns="http://www.w3.org/1999/xhtml">Run a data acquisition application. </span><span class="koboSpan" id="kobo.29.2" xmlns="http://www.w3.org/1999/xhtml">This is one of the CLI commands for projects in any of the previous chapters.</span></p>
</div></li>
<li><div id="x1-147012x2">
<p><span class="koboSpan" id="kobo.30.1" xmlns="http://www.w3.org/1999/xhtml">Start a Jupyter Lab server. </span><span class="koboSpan" id="kobo.30.2" xmlns="http://www.w3.org/1999/xhtml">This is a second CLI command to start the server. </span><span class="koboSpan" id="kobo.30.3" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.31.1" xmlns="http://www.w3.org/1999/xhtml">jupyter</span></code><code><span class="koboSpan" id="kobo.32.1" xmlns="http://www.w3.org/1999/xhtml"> lab</span></code><span class="koboSpan" id="kobo.33.1" xmlns="http://www.w3.org/1999/xhtml"> command will launch a browser session. </span><span class="koboSpan" id="kobo.33.2" xmlns="http://www.w3.org/1999/xhtml">The rest of the work is done through the browser:</span></p>
<ol>
<li><div id="x1-147014x1">
<p><span class="koboSpan" id="kobo.34.1" xmlns="http://www.w3.org/1999/xhtml">Create a notebook by clicking the notebook icon.</span></p>
</div></li>
<li><div id="x1-147016x2">
<p><span class="koboSpan" id="kobo.35.1" xmlns="http://www.w3.org/1999/xhtml">Load data by entering some Python code into a cell.</span></p>
</div></li>
<li><div id="x1-147018x3">
<p><span class="koboSpan" id="kobo.36.1" xmlns="http://www.w3.org/1999/xhtml">Determine if the data is useful by creating cells to show the data and show properties of the data.</span></p>
</div></li>
</ol>
</div></li>
</ol>
<p><span class="koboSpan" id="kobo.37.1" xmlns="http://www.w3.org/1999/xhtml">For more information on Jupyter, see </span><a class="url" href="https://www.packtpub.com/product/learning-jupyter/9781785884870"><span class="koboSpan" id="kobo.38.1" xmlns="http://www.w3.org/1999/xhtml">https://www.packtpub.com/product/learning-jupyter/9781785884870</span></a><span class="koboSpan" id="kobo.39.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span id="x1-147019r159"/></p>
<section class="level3" data-number="10.1.1" id="about-the-source-data-4">
<h3 data-number="10.1.1"><span class="titlemark"><span class="koboSpan" id="kobo.40.1" xmlns="http://www.w3.org/1999/xhtml">6.1.1 </span></span> <span id="x1-1480001"/><span class="koboSpan" id="kobo.41.1" xmlns="http://www.w3.org/1999/xhtml">About the source data</span></h3>
<p><span class="koboSpan" id="kobo.42.1" xmlns="http://www.w3.org/1999/xhtml">An essential ingredient here is </span><span id="dx1-148001"/><span class="koboSpan" id="kobo.43.1" xmlns="http://www.w3.org/1999/xhtml">that all of the data acquisition projects </span><strong><span class="koboSpan" id="kobo.44.1" xmlns="http://www.w3.org/1999/xhtml">must</span></strong><span class="koboSpan" id="kobo.45.1" xmlns="http://www.w3.org/1999/xhtml"> produce output in a consistent format. </span><span class="koboSpan" id="kobo.45.2" xmlns="http://www.w3.org/1999/xhtml">We’ve suggested using NDJSON (sometimes called JSON NL) as a format for preserving the raw data. </span><span class="koboSpan" id="kobo.45.3" xmlns="http://www.w3.org/1999/xhtml">See </span><a href="ch007.xhtml#x1-560003"><em><span class="koboSpan" id="kobo.46.1" xmlns="http://www.w3.org/1999/xhtml">Chapter</span></em><em><span class="koboSpan" id="kobo.47.1" xmlns="http://www.w3.org/1999/xhtml"> 3</span></em></a><span class="koboSpan" id="kobo.48.1" xmlns="http://www.w3.org/1999/xhtml">, </span><a href="ch007.xhtml#x1-560003"><em><span class="koboSpan" id="kobo.49.1" xmlns="http://www.w3.org/1999/xhtml">Project 1.1: Data Acquisition Base Application</span></em></a><span class="koboSpan" id="kobo.50.1" xmlns="http://www.w3.org/1999/xhtml">, for more information on the file format.</span></p>
<p><span class="koboSpan" id="kobo.51.1" xmlns="http://www.w3.org/1999/xhtml">It’s imperative to review the previous projects’ acceptance test suites to be sure there is a test to confirm the output files have the correct, consistent format.</span></p>
<p><span class="koboSpan" id="kobo.52.1" xmlns="http://www.w3.org/1999/xhtml">To recap the data flow, we’ve done the following:</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.53.1" xmlns="http://www.w3.org/1999/xhtml">Read from some source. </span><span class="koboSpan" id="kobo.53.2" xmlns="http://www.w3.org/1999/xhtml">This includes files, RESTful APIs, HTML pages, and SQL databases.</span></p></li>
<li><p><span class="koboSpan" id="kobo.54.1" xmlns="http://www.w3.org/1999/xhtml">Preserved the raw data in an essentially textual form, stripping away any data type information that may have been imposed by a SQL database or RESTful JSON document.</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.55.1" xmlns="http://www.w3.org/1999/xhtml">The inspection step will look at the text versions of values in these files. </span><span class="koboSpan" id="kobo.55.2" xmlns="http://www.w3.org/1999/xhtml">Later projects, starting with </span><a href="ch013.xhtml#x1-2080009"><em><span class="koboSpan" id="kobo.56.1" xmlns="http://www.w3.org/1999/xhtml">Chapter</span></em><em><span class="koboSpan" id="kobo.57.1" xmlns="http://www.w3.org/1999/xhtml"> 9</span></em></a><span class="koboSpan" id="kobo.58.1" xmlns="http://www.w3.org/1999/xhtml">, </span><a href="ch013.xhtml#x1-2080009"><em><span class="koboSpan" id="kobo.59.1" xmlns="http://www.w3.org/1999/xhtml">Project 3.1: Data Cleaning Base Application</span></em></a><span class="koboSpan" id="kobo.60.1" xmlns="http://www.w3.org/1999/xhtml">, will look at converting data from text into something more useful for analytic work.</span></p>
<p><span class="koboSpan" id="kobo.61.1" xmlns="http://www.w3.org/1999/xhtml">An inspection notebook will </span><span id="dx1-148002"/><span class="koboSpan" id="kobo.62.1" xmlns="http://www.w3.org/1999/xhtml">often be required to do some data cleanup in order to show data problems. </span><span class="koboSpan" id="kobo.62.2" xmlns="http://www.w3.org/1999/xhtml">This will be enough cleanup to understand the data and no more. </span><span class="koboSpan" id="kobo.62.3" xmlns="http://www.w3.org/1999/xhtml">Later projects will expand the cleanup to cover all of the data problems.</span></p>
<p><span class="koboSpan" id="kobo.63.1" xmlns="http://www.w3.org/1999/xhtml">In many data acquisition projects, it’s unwise to attempt any data conversion before an initial inspection. </span><span class="koboSpan" id="kobo.63.2" xmlns="http://www.w3.org/1999/xhtml">This is because the data is highly variable and poorly documented. </span><span class="koboSpan" id="kobo.63.3" xmlns="http://www.w3.org/1999/xhtml">A disciplined, three-step approach separates acquisition and inspection from attempts at data conversion and processing.</span></p>
<p><span class="koboSpan" id="kobo.64.1" xmlns="http://www.w3.org/1999/xhtml">We may find a wide variety of unexpected things in a data source. </span><span class="koboSpan" id="kobo.64.2" xmlns="http://www.w3.org/1999/xhtml">For example, a CSV file may have an unexpected header, leading to a row of bad data. </span><span class="koboSpan" id="kobo.64.3" xmlns="http://www.w3.org/1999/xhtml">Or, a CSV file may — sometimes — lack headers, forcing the acquire application to supply default headers. </span><span class="koboSpan" id="kobo.64.4" xmlns="http://www.w3.org/1999/xhtml">A file that’s described as CSV may not have delimiters, but may have fixed-size text fields padded with spaces. </span><span class="koboSpan" id="kobo.64.5" xmlns="http://www.w3.org/1999/xhtml">There may be empty rows that can be ignored. </span><span class="koboSpan" id="kobo.64.6" xmlns="http://www.w3.org/1999/xhtml">There may be empty rows that delimit the useful data and separate it from footnotes or other non-data in the file. </span><span class="koboSpan" id="kobo.64.7" xmlns="http://www.w3.org/1999/xhtml">A ZIP archive may contain a surprising collection of irrelevant files in addition to the desired data file.</span></p>
<p><span class="koboSpan" id="kobo.65.1" xmlns="http://www.w3.org/1999/xhtml">Perhaps one of the worst problems is trying to process files that are not prepared using a widely used character encoding such as UTF-8. </span><span class="koboSpan" id="kobo.65.2" xmlns="http://www.w3.org/1999/xhtml">Files encoded with CP-1252 encoding may have a few odd-looking characters when the decoder assumes it’s UTF-8 encoding. </span><span class="koboSpan" id="kobo.65.3" xmlns="http://www.w3.org/1999/xhtml">Python’s </span><code><span class="koboSpan" id="kobo.66.1" xmlns="http://www.w3.org/1999/xhtml">codecs</span></code><span class="koboSpan" id="kobo.67.1" xmlns="http://www.w3.org/1999/xhtml"> module provides a number of forms of alternative file encoding to handle this kind of problem. </span><span class="koboSpan" id="kobo.67.2" xmlns="http://www.w3.org/1999/xhtml">This problem seems rare; some organizations will note the encoding for text to prevent problems.</span></p>
<p><span class="koboSpan" id="kobo.68.1" xmlns="http://www.w3.org/1999/xhtml">Inspection notebooks often start as </span><code><span class="koboSpan" id="kobo.69.1" xmlns="http://www.w3.org/1999/xhtml">print()</span></code><span class="koboSpan" id="kobo.70.1" xmlns="http://www.w3.org/1999/xhtml"> functions in the data acquisition process to show what the data is. </span><span class="koboSpan" id="kobo.70.2" xmlns="http://www.w3.org/1999/xhtml">The idea here is to </span><span id="dx1-148003"/><span class="koboSpan" id="kobo.71.1" xmlns="http://www.w3.org/1999/xhtml">extend this concept a little and use an interactive notebook instead of </span><code><span class="koboSpan" id="kobo.72.1" xmlns="http://www.w3.org/1999/xhtml">print()</span></code><span class="koboSpan" id="kobo.73.1" xmlns="http://www.w3.org/1999/xhtml"> to get a look at the data and see that it meets expectations.</span></p>
<div class="tcolorbox tipbox" id="tcolobox-102">
<div class="tcolorbox-content">
<p><span class="koboSpan" id="kobo.74.1" xmlns="http://www.w3.org/1999/xhtml">Not all managers agree with taking time to build an inspection notebook. </span><span class="koboSpan" id="kobo.74.2" xmlns="http://www.w3.org/1999/xhtml">Often, this is a conflict between assumptions and reality with the following potential outcomes:</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.75.1" xmlns="http://www.w3.org/1999/xhtml">A manager can assume there will be no surprises in the data; the data will be entirely as specified in a data contract or other schema definition.</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.76.1" xmlns="http://www.w3.org/1999/xhtml">When the data doesn’t match expectations, a data inspection notebook will be a helpful part of the debugging effort.</span></p></li>
<li><p><span class="koboSpan" id="kobo.77.1" xmlns="http://www.w3.org/1999/xhtml">In the unlikely event the data does match expectations, the data inspection notebook can be used to show that the data is valid.</span></p></li>
</ul></li>
<li><p><span class="koboSpan" id="kobo.78.1" xmlns="http://www.w3.org/1999/xhtml">A manager can assume the data is unlikely to be correct. </span><span class="koboSpan" id="kobo.78.2" xmlns="http://www.w3.org/1999/xhtml">In this case, the data inspection notebook will be seen as useful for uncovering the inevitable problems.</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.79.1" xmlns="http://www.w3.org/1999/xhtml">Notebooks often start as </span><code><span class="koboSpan" id="kobo.80.1" xmlns="http://www.w3.org/1999/xhtml">print()</span></code><span class="koboSpan" id="kobo.81.1" xmlns="http://www.w3.org/1999/xhtml"> or logger output to confirm the data is useful. </span><span class="koboSpan" id="kobo.81.2" xmlns="http://www.w3.org/1999/xhtml">This debugging output can be migrated to an informal notebook — at a low cost — and evolve into something more complete and focused on inspection and data quality assurance.</span></p>
</div>
</div>
<p><span class="koboSpan" id="kobo.82.1" xmlns="http://www.w3.org/1999/xhtml">This initial project won’t build a complicated notebook. </span><span class="koboSpan" id="kobo.82.2" xmlns="http://www.w3.org/1999/xhtml">The intent is to provide an </span><strong><span class="koboSpan" id="kobo.83.1" xmlns="http://www.w3.org/1999/xhtml">interactive </span></strong><span class="koboSpan" id="kobo.84.1" xmlns="http://www.w3.org/1999/xhtml">display of data, allowing exploration and investigation. </span><span class="koboSpan" id="kobo.84.2" xmlns="http://www.w3.org/1999/xhtml">In the next section, we’ll outline an approach to this project, and to working with notebooks in general. </span><span id="x1-148004r161"/></p>
</section>
</section>
<section class="level2" data-number="10.2" id="approach-5">
<h2 data-number="10.2"><span class="titlemark"><span class="koboSpan" id="kobo.85.1" xmlns="http://www.w3.org/1999/xhtml">6.2 </span></span> <span id="x1-1490002"/><span class="koboSpan" id="kobo.86.1" xmlns="http://www.w3.org/1999/xhtml">Approach</span></h2>
<p><span class="koboSpan" id="kobo.87.1" xmlns="http://www.w3.org/1999/xhtml">We’ll take some </span><span id="dx1-149001"/><span class="koboSpan" id="kobo.88.1" xmlns="http://www.w3.org/1999/xhtml">guidance from the C4 model ( </span><a class="url" href="https://c4model.com"><span class="koboSpan" id="kobo.89.1" xmlns="http://www.w3.org/1999/xhtml">https://c4model.com</span></a><span class="koboSpan" id="kobo.90.1" xmlns="http://www.w3.org/1999/xhtml">) when looking at our approach.</span></p>
<ul>
<li><p><strong><span class="koboSpan" id="kobo.91.1" xmlns="http://www.w3.org/1999/xhtml">Context</span></strong><span class="koboSpan" id="kobo.92.1" xmlns="http://www.w3.org/1999/xhtml">: For this project, the context diagram has two use cases: acquire and inspect</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.93.1" xmlns="http://www.w3.org/1999/xhtml">Containers</span></strong><span class="koboSpan" id="kobo.94.1" xmlns="http://www.w3.org/1999/xhtml">: There’s one container for the various applications: the user’s personal computer</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.95.1" xmlns="http://www.w3.org/1999/xhtml">Components</span></strong><span class="koboSpan" id="kobo.96.1" xmlns="http://www.w3.org/1999/xhtml">: There are two significantly different collections of software components: the acquisition program and inspection notebooks</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.97.1" xmlns="http://www.w3.org/1999/xhtml">Code</span></strong><span class="koboSpan" id="kobo.98.1" xmlns="http://www.w3.org/1999/xhtml">: We’ll touch on this to provide some suggested directions</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.99.1" xmlns="http://www.w3.org/1999/xhtml">A context diagram for this application is shown in </span><a href="#6.1"><em><span class="koboSpan" id="kobo.100.1" xmlns="http://www.w3.org/1999/xhtml">Figure 6.1</span></em></a><span class="koboSpan" id="kobo.101.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
<figure class="IMG---Figure">
<span class="koboSpan" id="kobo.102.1" xmlns="http://www.w3.org/1999/xhtml"><img alt="Figure 6.1: Context Diagram " src="../media/file31.jpg"/></span>
<figcaption class="IMG---Caption"><span class="id" id="6.1"><span class="koboSpan" id="kobo.103.1" xmlns="http://www.w3.org/1999/xhtml">Figure 6.1: </span></span><span class="content"><span class="koboSpan" id="kobo.104.1" xmlns="http://www.w3.org/1999/xhtml">Context Diagram </span></span></figcaption>
</figure>
<p><span class="koboSpan" id="kobo.105.1" xmlns="http://www.w3.org/1999/xhtml">The data analyst will use the CLI to run the data acquisition program. </span><span class="koboSpan" id="kobo.105.2" xmlns="http://www.w3.org/1999/xhtml">Then, the analyst will use the CLI to start a Jupyter Lab server. </span><span class="koboSpan" id="kobo.105.3" xmlns="http://www.w3.org/1999/xhtml">Using a browser, the analyst can then use Jupyter Lab to inspect the data.</span></p>
<p><span class="koboSpan" id="kobo.106.1" xmlns="http://www.w3.org/1999/xhtml">The components fall into two overall categories. </span><span class="koboSpan" id="kobo.106.2" xmlns="http://www.w3.org/1999/xhtml">The component diagram is shown in </span><a href="#6.2"><em><span class="koboSpan" id="kobo.107.1" xmlns="http://www.w3.org/1999/xhtml">Figure </span></em><em><span class="koboSpan" id="kobo.108.1" xmlns="http://www.w3.org/1999/xhtml">6.2</span></em></a><span class="koboSpan" id="kobo.109.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
<figure class="IMG---Figure">
<span class="koboSpan" id="kobo.110.1" xmlns="http://www.w3.org/1999/xhtml"><img alt="Figure 6.2: Component diagram " src="../media/file32.jpg"/></span>
<figcaption class="IMG---Caption"><span class="id" id="6.2"><span class="koboSpan" id="kobo.111.1" xmlns="http://www.w3.org/1999/xhtml">Figure 6.2: </span></span><span class="content"><span class="koboSpan" id="kobo.112.1" xmlns="http://www.w3.org/1999/xhtml">Component diagram </span></span></figcaption>
</figure>
<p><span class="koboSpan" id="kobo.113.1" xmlns="http://www.w3.org/1999/xhtml">The diagram shows the interfaces </span><span id="dx1-149006"/><span class="koboSpan" id="kobo.114.1" xmlns="http://www.w3.org/1999/xhtml">seen by the data analyst, the </span><code><span class="koboSpan" id="kobo.115.1" xmlns="http://www.w3.org/1999/xhtml">terminal</span></code><span class="koboSpan" id="kobo.116.1" xmlns="http://www.w3.org/1999/xhtml"> and the </span><code><span class="koboSpan" id="kobo.117.1" xmlns="http://www.w3.org/1999/xhtml">browser</span></code><span class="koboSpan" id="kobo.118.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.118.2" xmlns="http://www.w3.org/1999/xhtml">These are shown with the </span><em><span class="koboSpan" id="kobo.119.1" xmlns="http://www.w3.org/1999/xhtml">boundary </span></em><span class="koboSpan" id="kobo.120.1" xmlns="http://www.w3.org/1999/xhtml">icon from the </span><strong><span class="koboSpan" id="kobo.121.1" xmlns="http://www.w3.org/1999/xhtml">Unified Modeling</span></strong> <strong><span class="koboSpan" id="kobo.122.1" xmlns="http://www.w3.org/1999/xhtml">Language </span></strong><span class="koboSpan" id="kobo.123.1" xmlns="http://www.w3.org/1999/xhtml">(</span><strong><span class="koboSpan" id="kobo.124.1" xmlns="http://www.w3.org/1999/xhtml">UML</span></strong><span class="koboSpan" id="kobo.125.1" xmlns="http://www.w3.org/1999/xhtml">).</span></p>
<p><span class="koboSpan" id="kobo.126.1" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.127.1" xmlns="http://www.w3.org/1999/xhtml">Acquisition</span></code><span class="koboSpan" id="kobo.128.1" xmlns="http://www.w3.org/1999/xhtml"> group of components contains the various modules and the overall acquire application. </span><span class="koboSpan" id="kobo.128.2" xmlns="http://www.w3.org/1999/xhtml">This is run from the command line to acquire the raw data from an appropriate source. </span><span class="koboSpan" id="kobo.128.3" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.129.1" xmlns="http://www.w3.org/1999/xhtml">db_extract</span></code><span class="koboSpan" id="kobo.130.1" xmlns="http://www.w3.org/1999/xhtml"> module is associated with an external SQL database. </span><span class="koboSpan" id="kobo.130.2" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.131.1" xmlns="http://www.w3.org/1999/xhtml">api_download</span></code><span class="koboSpan" id="kobo.132.1" xmlns="http://www.w3.org/1999/xhtml"> module is associated </span><span id="dx1-149007"/><span class="koboSpan" id="kobo.133.1" xmlns="http://www.w3.org/1999/xhtml">with an external RESTful API. </span><span class="koboSpan" id="kobo.133.2" xmlns="http://www.w3.org/1999/xhtml">Additional sources and processing modules could be added to this part of the diagram.</span></p>
<p><span class="koboSpan" id="kobo.134.1" xmlns="http://www.w3.org/1999/xhtml">The processing performed by the </span><code><span class="koboSpan" id="kobo.135.1" xmlns="http://www.w3.org/1999/xhtml">Acquisition</span></code><span class="koboSpan" id="kobo.136.1" xmlns="http://www.w3.org/1999/xhtml"> group of components creates the data files shown in the </span><code><span class="koboSpan" id="kobo.137.1" xmlns="http://www.w3.org/1999/xhtml">Storage</span></code><span class="koboSpan" id="kobo.138.1" xmlns="http://www.w3.org/1999/xhtml"> group. </span><span class="koboSpan" id="kobo.138.2" xmlns="http://www.w3.org/1999/xhtml">This group depicts the raw data files acquired by the </span><code><span class="koboSpan" id="kobo.139.1" xmlns="http://www.w3.org/1999/xhtml">acquire</span></code><span class="koboSpan" id="kobo.140.1" xmlns="http://www.w3.org/1999/xhtml"> application. </span><span class="koboSpan" id="kobo.140.2" xmlns="http://www.w3.org/1999/xhtml">These files will be refined and processed by further analytic applications.</span></p>
<p><span class="koboSpan" id="kobo.141.1" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.142.1" xmlns="http://www.w3.org/1999/xhtml">Inspection</span></code><span class="koboSpan" id="kobo.143.1" xmlns="http://www.w3.org/1999/xhtml"> group shows the </span><code><span class="koboSpan" id="kobo.144.1" xmlns="http://www.w3.org/1999/xhtml">jupyter</span></code><span class="koboSpan" id="kobo.145.1" xmlns="http://www.w3.org/1999/xhtml"> component. </span><span class="koboSpan" id="kobo.145.2" xmlns="http://www.w3.org/1999/xhtml">This is the entire Jupyter Lab application, summarized as a single icon. </span><span class="koboSpan" id="kobo.145.3" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.146.1" xmlns="http://www.w3.org/1999/xhtml">notebook</span></code><span class="koboSpan" id="kobo.147.1" xmlns="http://www.w3.org/1999/xhtml"> component is the notebook we’ll build in this application. </span><span class="koboSpan" id="kobo.147.2" xmlns="http://www.w3.org/1999/xhtml">This notebook depends on Jupyter Lab.</span></p>
<p><span class="koboSpan" id="kobo.148.1" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.149.1" xmlns="http://www.w3.org/1999/xhtml">browser</span></code><span class="koboSpan" id="kobo.150.1" xmlns="http://www.w3.org/1999/xhtml"> is shown with the boundary icon. </span><span class="koboSpan" id="kobo.150.2" xmlns="http://www.w3.org/1999/xhtml">The intention is to characterize the notebook interaction via the browser as the user experience.</span></p>
<p><span class="koboSpan" id="kobo.151.1" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.152.1" xmlns="http://www.w3.org/1999/xhtml">notebook</span></code><span class="koboSpan" id="kobo.153.1" xmlns="http://www.w3.org/1999/xhtml"> component will use a </span><span id="dx1-149008"/><span class="koboSpan" id="kobo.154.1" xmlns="http://www.w3.org/1999/xhtml">number of built-in Python modules. </span><span class="koboSpan" id="kobo.154.2" xmlns="http://www.w3.org/1999/xhtml">This notebook’s cells can be decomposed into two smaller kinds of components:</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.155.1" xmlns="http://www.w3.org/1999/xhtml">Functions to gather data from acquisition files.</span></p></li>
<li><p><span class="koboSpan" id="kobo.156.1" xmlns="http://www.w3.org/1999/xhtml">Functions to show the raw data. </span><span class="koboSpan" id="kobo.156.2" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.157.1" xmlns="http://www.w3.org/1999/xhtml">collections.Counter</span></code><span class="koboSpan" id="kobo.158.1" xmlns="http://www.w3.org/1999/xhtml"> class is very handy for this.</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.159.1" xmlns="http://www.w3.org/1999/xhtml">You will need to locate (and install) a version of Jupyter Lab for this project. </span><span class="koboSpan" id="kobo.159.2" xmlns="http://www.w3.org/1999/xhtml">This needs to be added to the </span><code><span class="koboSpan" id="kobo.160.1" xmlns="http://www.w3.org/1999/xhtml">requirements-dev.txt</span></code><span class="koboSpan" id="kobo.161.1" xmlns="http://www.w3.org/1999/xhtml"> file so other developers know to install it.</span></p>
<p><span class="koboSpan" id="kobo.162.1" xmlns="http://www.w3.org/1999/xhtml">When using </span><code><span class="koboSpan" id="kobo.163.1" xmlns="http://www.w3.org/1999/xhtml">conda</span></code><span class="koboSpan" id="kobo.164.1" xmlns="http://www.w3.org/1999/xhtml"> to manage virtual environments, the command might look like the following:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-103">
<div class="tcolorbox-content">
<pre class="console"><span class="koboSpan" id="kobo.165.1" xmlns="http://www.w3.org/1999/xhtml">% conda install jupyterlab</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.166.1" xmlns="http://www.w3.org/1999/xhtml">When using other tools to manage virtual environments, the command might look like the following:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-104">
<div class="tcolorbox-content">
<pre class="console"><span class="koboSpan" id="kobo.167.1" xmlns="http://www.w3.org/1999/xhtml">% python -m pip install jupyterlab</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.168.1" xmlns="http://www.w3.org/1999/xhtml">Once the </span><code><span class="koboSpan" id="kobo.169.1" xmlns="http://www.w3.org/1999/xhtml">jupyter</span></code><span class="koboSpan" id="kobo.170.1" xmlns="http://www.w3.org/1999/xhtml"> products are installed, it must be started from the command line. </span><span class="koboSpan" id="kobo.170.2" xmlns="http://www.w3.org/1999/xhtml">This command will start the server and launch a browser window:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-105">
<div class="tcolorbox-content">
<pre class="console"><span class="koboSpan" id="kobo.171.1" xmlns="http://www.w3.org/1999/xhtml">% jupyter lab</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.172.1" xmlns="http://www.w3.org/1999/xhtml">For information on using Jupyter Lab, see </span><a class="url" href="https://jupyterlab.readthedocs.io/en/latest/"><span class="koboSpan" id="kobo.173.1" xmlns="http://www.w3.org/1999/xhtml">https://jupyterlab.readthedocs.io/en/latest/</span></a><span class="koboSpan" id="kobo.174.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
<p><span class="koboSpan" id="kobo.175.1" xmlns="http://www.w3.org/1999/xhtml">If you’re not familiar with Jupyter, now is the time to use tutorials and learn the basics before moving on with this project.</span></p>
<div class="tcolorbox tipbox" id="tcolobox-106">
<div class="tcolorbox-content">
<p><span class="koboSpan" id="kobo.176.1" xmlns="http://www.w3.org/1999/xhtml">Many of the notebook examples will include </span><code><span class="koboSpan" id="kobo.177.1" xmlns="http://www.w3.org/1999/xhtml">import</span></code><span class="koboSpan" id="kobo.178.1" xmlns="http://www.w3.org/1999/xhtml"> statements.</span></p>
<p><span class="koboSpan" id="kobo.179.1" xmlns="http://www.w3.org/1999/xhtml">Developers new to working with a Jupyter notebook should not take this as advice to repeat </span><code><span class="koboSpan" id="kobo.180.1" xmlns="http://www.w3.org/1999/xhtml">import</span></code><span class="koboSpan" id="kobo.181.1" xmlns="http://www.w3.org/1999/xhtml"> statements in multiple cells throughout a notebook.</span></p>
<p><span class="koboSpan" id="kobo.182.1" xmlns="http://www.w3.org/1999/xhtml">In a practical notebook, the imports can be collected together, often in a separate cell to introduce all of the needed packages.</span></p>
<p><span class="koboSpan" id="kobo.183.1" xmlns="http://www.w3.org/1999/xhtml">In some enterprises, a startup script is used to provide a common set of imports for a number of closely related notebooks.</span></p>
<p><span class="koboSpan" id="kobo.184.1" xmlns="http://www.w3.org/1999/xhtml">We’ll return to more flexible ways to handle Python libraries from notebooks in </span><a href="ch017.xhtml#x1-29700013"><em><span class="koboSpan" id="kobo.185.1" xmlns="http://www.w3.org/1999/xhtml">Chapter</span></em><em><span class="koboSpan" id="kobo.186.1" xmlns="http://www.w3.org/1999/xhtml"> 13</span></em></a><span class="koboSpan" id="kobo.187.1" xmlns="http://www.w3.org/1999/xhtml">, </span><a href="ch017.xhtml#x1-29700013"><em><span class="koboSpan" id="kobo.188.1" xmlns="http://www.w3.org/1999/xhtml">Project 4.1: Visual Analysis Techniques</span></em></a><span class="koboSpan" id="kobo.189.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
</div>
</div>
<p><span class="koboSpan" id="kobo.190.1" xmlns="http://www.w3.org/1999/xhtml">There are two other important considerations for this project: the ability to write automated tests for a notebook and the interaction of </span><span id="dx1-149012"/><span class="koboSpan" id="kobo.191.1" xmlns="http://www.w3.org/1999/xhtml">Python modules and notebooks. </span><span class="koboSpan" id="kobo.191.2" xmlns="http://www.w3.org/1999/xhtml">We’ll look at these topics in separate sections. </span><span id="x1-149013r162"/></p>
<section class="level3" data-number="10.2.1" id="notebook-test-cases-for-the-functions">
<h3 data-number="10.2.1"><span class="titlemark"><span class="koboSpan" id="kobo.192.1" xmlns="http://www.w3.org/1999/xhtml">6.2.1 </span></span> <span id="x1-1500001"/><span class="koboSpan" id="kobo.193.1" xmlns="http://www.w3.org/1999/xhtml">Notebook test cases for the functions</span></h3>
<p><span class="koboSpan" id="kobo.194.1" xmlns="http://www.w3.org/1999/xhtml">It’s common to require unit test cases for a Python package. </span><span class="koboSpan" id="kobo.194.2" xmlns="http://www.w3.org/1999/xhtml">To be sure the test cases are meaningful, some enterprises insist the </span><span id="dx1-150001"/><span class="koboSpan" id="kobo.195.1" xmlns="http://www.w3.org/1999/xhtml">test cases exercise 100% of the lines of code in the module. </span><span class="koboSpan" id="kobo.195.2" xmlns="http://www.w3.org/1999/xhtml">For some industries, all logic paths must be tested. </span><span class="koboSpan" id="kobo.195.3" xmlns="http://www.w3.org/1999/xhtml">For more information, see </span><a href="ch005.xhtml#x1-170001"><em><span class="koboSpan" id="kobo.196.1" xmlns="http://www.w3.org/1999/xhtml">Chapter</span></em><em><span class="koboSpan" id="kobo.197.1" xmlns="http://www.w3.org/1999/xhtml"> 1</span></em></a><span class="koboSpan" id="kobo.198.1" xmlns="http://www.w3.org/1999/xhtml">, </span><a href="ch005.xhtml#x1-170001"><em><span class="koboSpan" id="kobo.199.1" xmlns="http://www.w3.org/1999/xhtml">Project Zero: A Template for Other</span></em> <em><span class="koboSpan" id="kobo.200.1" xmlns="http://www.w3.org/1999/xhtml">Projects</span></em></a><span class="koboSpan" id="kobo.201.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
<p><span class="koboSpan" id="kobo.202.1" xmlns="http://www.w3.org/1999/xhtml">For notebooks, automated testing can be a shade more complicated than it is for a Python module or package. </span><span class="koboSpan" id="kobo.202.2" xmlns="http://www.w3.org/1999/xhtml">The complication is that notebooks can contain arbitrary code that is not designed with testability in mind.</span></p>
<p><span class="koboSpan" id="kobo.203.1" xmlns="http://www.w3.org/1999/xhtml">In order to have a disciplined, repeatable approach to creating notebooks, it’s helpful to develop a notebook in a series of stages, evolving toward a notebook that supports automated testing.</span></p>
<p><span class="koboSpan" id="kobo.204.1" xmlns="http://www.w3.org/1999/xhtml">A notebook is software, and without test cases, any software is untrustworthy. </span><span class="koboSpan" id="kobo.204.2" xmlns="http://www.w3.org/1999/xhtml">In rare cases, the notebook’s code is simple enough that we can inspect it to develop some sense of its overall fitness for purpose. </span><span class="koboSpan" id="kobo.204.3" xmlns="http://www.w3.org/1999/xhtml">In most cases, complex computations, functions, and class definitions require a test </span><span id="dx1-150002"/><span class="koboSpan" id="kobo.205.1" xmlns="http://www.w3.org/1999/xhtml">case to demonstrate the code can be trusted to work properly.</span></p>
<p><span class="koboSpan" id="kobo.206.1" xmlns="http://www.w3.org/1999/xhtml">The stages of notebook evolution often work as follows:</span></p>
<ol>
<li><div id="x1-150003x1">
<p><span class="koboSpan" id="kobo.207.1" xmlns="http://www.w3.org/1999/xhtml">At stage zero, a notebook is often started with arbitrary Python code in cells and few or no function or class definitions. </span><span class="koboSpan" id="kobo.207.2" xmlns="http://www.w3.org/1999/xhtml">This is a great way to start development because the interactive nature of the notebook provides immediate results. </span><span class="koboSpan" id="kobo.207.3" xmlns="http://www.w3.org/1999/xhtml">Some cells will have errors or bad ideas in them. </span><span class="koboSpan" id="kobo.207.4" xmlns="http://www.w3.org/1999/xhtml">The order for processing the cells is not simply top to bottom. </span><span class="koboSpan" id="kobo.207.5" xmlns="http://www.w3.org/1999/xhtml">This code is difficult (or impossible) to validate with any automated testing.</span></p>
</div></li>
<li><div id="x1-150004x1">
<p><span class="koboSpan" id="kobo.208.1" xmlns="http://www.w3.org/1999/xhtml">Stage one will transform cell expressions into function and class definitions. </span><span class="koboSpan" id="kobo.208.2" xmlns="http://www.w3.org/1999/xhtml">This version of the notebook can also have cells with examples using the functions and classes. </span><span class="koboSpan" id="kobo.208.3" xmlns="http://www.w3.org/1999/xhtml">The order is closer to strictly top-to-bottom; there are fewer cells with known errors. </span><span class="koboSpan" id="kobo.208.4" xmlns="http://www.w3.org/1999/xhtml">The presence of examples serves as a basis for validating the notebook’s processing, but an automated test isn’t available.</span></p>
</div></li>
<li><div id="x1-150005x1">
<p><span class="koboSpan" id="kobo.209.1" xmlns="http://www.w3.org/1999/xhtml">Stage two has more robust tests, using formal </span><code><span class="koboSpan" id="kobo.210.1" xmlns="http://www.w3.org/1999/xhtml">assert</span></code><span class="koboSpan" id="kobo.211.1" xmlns="http://www.w3.org/1999/xhtml"> statements or </span><code><span class="koboSpan" id="kobo.212.1" xmlns="http://www.w3.org/1999/xhtml">doctest</span></code><span class="koboSpan" id="kobo.213.1" xmlns="http://www.w3.org/1999/xhtml"> comments to define a repeatable test procedure. </span><span class="koboSpan" id="kobo.213.2" xmlns="http://www.w3.org/1999/xhtml">Rerunning the notebook from the beginning after any change will validate the notebook by executing the </span><code><span class="koboSpan" id="kobo.214.1" xmlns="http://www.w3.org/1999/xhtml">assert</span></code><span class="koboSpan" id="kobo.215.1" xmlns="http://www.w3.org/1999/xhtml"> statements. </span><span class="koboSpan" id="kobo.215.2" xmlns="http://www.w3.org/1999/xhtml">All the cells are valid and the notebook processing is strictly top to bottom.</span></p>
</div></li>
<li><div id="x1-150006x1">
<p><span class="koboSpan" id="kobo.216.1" xmlns="http://www.w3.org/1999/xhtml">When there is more complicated or reusable processing, it may be helpful to refactor the function and class definitions out of the notebook and into a module. </span><span class="koboSpan" id="kobo.216.2" xmlns="http://www.w3.org/1999/xhtml">The module will have a unit test module or may be tested via </span><strong><span class="koboSpan" id="kobo.217.1" xmlns="http://www.w3.org/1999/xhtml">doctest </span></strong><span class="koboSpan" id="kobo.218.1" xmlns="http://www.w3.org/1999/xhtml">examples. </span><span class="koboSpan" id="kobo.218.2" xmlns="http://www.w3.org/1999/xhtml">This new module will be imported by the notebook; the notebook is used more for the presentation of results than the development of new ideas.</span></p>
</div></li>
</ol>
<p><span class="koboSpan" id="kobo.219.1" xmlns="http://www.w3.org/1999/xhtml">One easy road to automated testing is to include </span><strong><span class="koboSpan" id="kobo.220.1" xmlns="http://www.w3.org/1999/xhtml">doctest </span></strong><span class="koboSpan" id="kobo.221.1" xmlns="http://www.w3.org/1999/xhtml">examples inside function and class definitions. </span><span class="koboSpan" id="kobo.221.2" xmlns="http://www.w3.org/1999/xhtml">For example, we might have a notebook cell that contains something like the following function definition:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-107">
<div class="tcolorbox-content">
<pre class="source-code"><span class="koboSpan" id="kobo.222.1" xmlns="http://www.w3.org/1999/xhtml">def min_x(series: Series) -&gt; float:
    """
    &gt;&gt;&gt; s = [
    ...     </span><span class="koboSpan" id="kobo.222.2" xmlns="http://www.w3.org/1999/xhtml">{’x’: ’3’, ’y’: ’4’},
    ...     </span><span class="koboSpan" id="kobo.222.3" xmlns="http://www.w3.org/1999/xhtml">{’x’: ’2’, ’y’: ’3’},
    ...     </span><span class="koboSpan" id="kobo.222.4" xmlns="http://www.w3.org/1999/xhtml">{’x’: ’5’, ’y’: ’6’}]
    &gt;&gt;&gt; min_x(s)
    2
    """
    return min(int(s[’x’]) for s in series.samples)</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.223.1" xmlns="http://www.w3.org/1999/xhtml">The lines in the function’s docstring marked with </span><code><span class="koboSpan" id="kobo.224.1" xmlns="http://www.w3.org/1999/xhtml">&gt;&gt;&gt;</span></code><span class="koboSpan" id="kobo.225.1" xmlns="http://www.w3.org/1999/xhtml"> are spotted by the </span><strong><span class="koboSpan" id="kobo.226.1" xmlns="http://www.w3.org/1999/xhtml">doctest</span></strong><span class="koboSpan" id="kobo.227.1" xmlns="http://www.w3.org/1999/xhtml"> tool. </span><span class="koboSpan" id="kobo.227.2" xmlns="http://www.w3.org/1999/xhtml">The lines are evaluated and the results are compared with the example from the docstring.</span></p>
<p><span class="koboSpan" id="kobo.228.1" xmlns="http://www.w3.org/1999/xhtml">The last cell in the notebook can execute the </span><code><span class="koboSpan" id="kobo.229.1" xmlns="http://www.w3.org/1999/xhtml">doctest.testmod()</span></code><span class="koboSpan" id="kobo.230.1" xmlns="http://www.w3.org/1999/xhtml"> function. </span><span class="koboSpan" id="kobo.230.2" xmlns="http://www.w3.org/1999/xhtml">This will examine all of the class and function definitions in the notebook, locate their </span><strong><span class="koboSpan" id="kobo.231.1" xmlns="http://www.w3.org/1999/xhtml">doctest </span></strong><span class="koboSpan" id="kobo.232.1" xmlns="http://www.w3.org/1999/xhtml">examples, and confirm the </span><span id="dx1-150017"/><span class="koboSpan" id="kobo.233.1" xmlns="http://www.w3.org/1999/xhtml">actual results match the expectations.</span></p>
<p><span class="koboSpan" id="kobo.234.1" xmlns="http://www.w3.org/1999/xhtml">For additional tools to help with notebook testing, see </span><a class="url" href="https://testbook.readthedocs.io/en/latest/"><span class="koboSpan" id="kobo.235.1" xmlns="http://www.w3.org/1999/xhtml">https://testbook.readthedocs.io/en/latest/</span></a><span class="koboSpan" id="kobo.236.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
<p><span class="koboSpan" id="kobo.237.1" xmlns="http://www.w3.org/1999/xhtml">This evolution from a place for recording good ideas to an engineered solution is not trivially linear. </span><span class="koboSpan" id="kobo.237.2" xmlns="http://www.w3.org/1999/xhtml">There are often exploration and learning opportunities that lead to changes and shifts in focus. </span><span class="koboSpan" id="kobo.237.3" xmlns="http://www.w3.org/1999/xhtml">Using a notebook as a tool for tracking ideas, both good and bad, is common.</span></p>
<p><span class="koboSpan" id="kobo.238.1" xmlns="http://www.w3.org/1999/xhtml">A notebook is also a tool for presenting a final, clear picture of whether or not the data is what the users expect. </span><span class="koboSpan" id="kobo.238.2" xmlns="http://www.w3.org/1999/xhtml">In this second use case, separating function and class definitions becomes more important. </span><span class="koboSpan" id="kobo.238.3" xmlns="http://www.w3.org/1999/xhtml">We’ll look at this briefly in the next section. </span><span id="x1-150018r166"/></p>
</section>
<section class="level3" data-number="10.2.2" id="common-code-in-a-separate-module">
<h3 data-number="10.2.2"><span class="titlemark"><span class="koboSpan" id="kobo.239.1" xmlns="http://www.w3.org/1999/xhtml">6.2.2 </span></span> <span id="x1-1510002"/><span class="koboSpan" id="kobo.240.1" xmlns="http://www.w3.org/1999/xhtml">Common code in a separate module</span></h3>
<p><span class="koboSpan" id="kobo.241.1" xmlns="http://www.w3.org/1999/xhtml">As we noted earlier, a notebook </span><span id="dx1-151001"/><span class="koboSpan" id="kobo.242.1" xmlns="http://www.w3.org/1999/xhtml">lets an idea evolve through several forms.</span></p>
<p><span class="koboSpan" id="kobo.243.1" xmlns="http://www.w3.org/1999/xhtml">We might have a cell with the following</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-108">
<div class="tcolorbox-content">
<pre class="source-code"><span class="koboSpan" id="kobo.244.1" xmlns="http://www.w3.org/1999/xhtml">x_values = []
for s in source_data[1:]:
    x_values.append(float(s[’x’]))
min(x_values)</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.245.1" xmlns="http://www.w3.org/1999/xhtml">Note that this computation skips the first value in the series. </span><span class="koboSpan" id="kobo.245.2" xmlns="http://www.w3.org/1999/xhtml">This is because the source data has a header line that’s read by the </span><code><span class="koboSpan" id="kobo.246.1" xmlns="http://www.w3.org/1999/xhtml">csv.reader()</span></code><span class="koboSpan" id="kobo.247.1" xmlns="http://www.w3.org/1999/xhtml"> function. </span><span class="koboSpan" id="kobo.247.2" xmlns="http://www.w3.org/1999/xhtml">Switching to </span><code><span class="koboSpan" id="kobo.248.1" xmlns="http://www.w3.org/1999/xhtml">csv.DictReader()</span></code><span class="koboSpan" id="kobo.249.1" xmlns="http://www.w3.org/1999/xhtml"> can politely skip this line, but also changes the result structure from a list of strings into a dictionary.</span></p>
<p><span class="koboSpan" id="kobo.250.1" xmlns="http://www.w3.org/1999/xhtml">This computation of the minimum </span><span id="dx1-151006"/><span class="koboSpan" id="kobo.251.1" xmlns="http://www.w3.org/1999/xhtml">value can be restated as a function definition. </span><span class="koboSpan" id="kobo.251.2" xmlns="http://www.w3.org/1999/xhtml">Since it does three things — drops the first line, extracts the </span><code><span class="koboSpan" id="kobo.252.1" xmlns="http://www.w3.org/1999/xhtml">’x’</span></code><span class="koboSpan" id="kobo.253.1" xmlns="http://www.w3.org/1999/xhtml"> attribute, and converts it into a float — it might be better to decompose it into three functions. </span><span class="koboSpan" id="kobo.253.2" xmlns="http://www.w3.org/1999/xhtml">It can be refactored again to include </span><strong><span class="koboSpan" id="kobo.254.1" xmlns="http://www.w3.org/1999/xhtml">doctest</span></strong><span class="koboSpan" id="kobo.255.1" xmlns="http://www.w3.org/1999/xhtml"> examples in each function. </span><span class="koboSpan" id="kobo.255.2" xmlns="http://www.w3.org/1999/xhtml">See </span><a href="#x1-1500001"><em><span class="koboSpan" id="kobo.256.1" xmlns="http://www.w3.org/1999/xhtml">Notebook test cases for the functions</span></em></a><span class="koboSpan" id="kobo.257.1" xmlns="http://www.w3.org/1999/xhtml"> for the example.</span></p>
<p><span class="koboSpan" id="kobo.258.1" xmlns="http://www.w3.org/1999/xhtml">Later, this function can be cut from the notebook cell and pasted into a separate module. </span><span class="koboSpan" id="kobo.258.2" xmlns="http://www.w3.org/1999/xhtml">We’ll assume the overall function was named </span><code><span class="koboSpan" id="kobo.259.1" xmlns="http://www.w3.org/1999/xhtml">min_x()</span></code><span class="koboSpan" id="kobo.260.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.260.2" xmlns="http://www.w3.org/1999/xhtml">We might add this to a module named </span><code><span class="koboSpan" id="kobo.261.1" xmlns="http://www.w3.org/1999/xhtml">series_stats.py</span></code><span class="koboSpan" id="kobo.262.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.262.2" xmlns="http://www.w3.org/1999/xhtml">The notebook can then import and use the function, leaving the definition as a sidebar detail:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-109">
<div class="tcolorbox-content">
<pre class="source-code"><span class="koboSpan" id="kobo.263.1" xmlns="http://www.w3.org/1999/xhtml">from series_stats import min_x</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.264.1" xmlns="http://www.w3.org/1999/xhtml">When refactoring a notebook to a reusable module, it’s important to use </span><strong><span class="koboSpan" id="kobo.265.1" xmlns="http://www.w3.org/1999/xhtml">cut</span></strong> <strong><span class="koboSpan" id="kobo.266.1" xmlns="http://www.w3.org/1999/xhtml">and paste</span></strong><span class="koboSpan" id="kobo.267.1" xmlns="http://www.w3.org/1999/xhtml">, not copy and paste. </span><span class="koboSpan" id="kobo.267.2" xmlns="http://www.w3.org/1999/xhtml">A copy of the function will lead to questions if one of the copies is changed to improve performance or fix a problem and the other copy is left untouched. </span><span class="koboSpan" id="kobo.267.3" xmlns="http://www.w3.org/1999/xhtml">This is </span><span id="dx1-151008"/><span class="koboSpan" id="kobo.268.1" xmlns="http://www.w3.org/1999/xhtml">sometimes called the </span><strong><span class="koboSpan" id="kobo.269.1" xmlns="http://www.w3.org/1999/xhtml">Don’t Repeat</span></strong> <strong><span class="koboSpan" id="kobo.270.1" xmlns="http://www.w3.org/1999/xhtml">Yourself </span></strong><span class="koboSpan" id="kobo.271.1" xmlns="http://www.w3.org/1999/xhtml">(</span><strong><span class="koboSpan" id="kobo.272.1" xmlns="http://www.w3.org/1999/xhtml">DRY</span></strong><span class="koboSpan" id="kobo.273.1" xmlns="http://www.w3.org/1999/xhtml">) principle.</span></p>
<p><span class="koboSpan" id="kobo.274.1" xmlns="http://www.w3.org/1999/xhtml">When working with external modules that are still under development, any changes to a module will require stopping the notebook kernel and rerunning the notebook from the very beginning to remove and reload the function definitions. </span><span class="koboSpan" id="kobo.274.2" xmlns="http://www.w3.org/1999/xhtml">This can become awkward. </span><span class="koboSpan" id="kobo.274.3" xmlns="http://www.w3.org/1999/xhtml">There are some extensions to iPython that can be used to reload modules, or even auto-reload modules when the source module changes.</span></p>
<p><span class="koboSpan" id="kobo.275.1" xmlns="http://www.w3.org/1999/xhtml">An alternative is to wait until a function or class seems mature and unlikely to change before refactoring the notebook to create a separate module. </span><span class="koboSpan" id="kobo.275.2" xmlns="http://www.w3.org/1999/xhtml">Often, this decision is made as part of creating a final presentation </span><span id="dx1-151009"/><span class="koboSpan" id="kobo.276.1" xmlns="http://www.w3.org/1999/xhtml">notebook to display useful results.</span></p>
<p><span class="koboSpan" id="kobo.277.1" xmlns="http://www.w3.org/1999/xhtml">We can now look at the specific list of deliverables for this project. </span><span id="x1-151010r163"/></p>
</section>
</section>
<section class="level2" data-number="10.3" id="deliverables-6">
<h2 data-number="10.3"><span class="titlemark"><span class="koboSpan" id="kobo.278.1" xmlns="http://www.w3.org/1999/xhtml">6.3 </span></span> <span id="x1-1520003"/><span class="koboSpan" id="kobo.279.1" xmlns="http://www.w3.org/1999/xhtml">Deliverables</span></h2>
<p><span class="koboSpan" id="kobo.280.1" xmlns="http://www.w3.org/1999/xhtml">This project has the following deliverables:</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.281.1" xmlns="http://www.w3.org/1999/xhtml">A </span><code><span class="koboSpan" id="kobo.282.1" xmlns="http://www.w3.org/1999/xhtml">pyproject.toml</span></code><span class="koboSpan" id="kobo.283.1" xmlns="http://www.w3.org/1999/xhtml"> file that identifies the </span><span id="dx1-152001"/><span class="koboSpan" id="kobo.284.1" xmlns="http://www.w3.org/1999/xhtml">tools used. </span><span class="koboSpan" id="kobo.284.2" xmlns="http://www.w3.org/1999/xhtml">For this book, we used </span><code><span class="koboSpan" id="kobo.285.1" xmlns="http://www.w3.org/1999/xhtml">jupyterlab==3.5.3</span></code><span class="koboSpan" id="kobo.286.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.286.2" xmlns="http://www.w3.org/1999/xhtml">Note that while the book was being prepared for publication, version 4.0 was released. </span><span class="koboSpan" id="kobo.286.3" xmlns="http://www.w3.org/1999/xhtml">This ongoing evolution of components makes it important for you to find the latest version, not the version quoted here.</span></p></li>
<li><p><span class="koboSpan" id="kobo.287.1" xmlns="http://www.w3.org/1999/xhtml">Documentation in the </span><code><span class="koboSpan" id="kobo.288.1" xmlns="http://www.w3.org/1999/xhtml">docs</span></code><span class="koboSpan" id="kobo.289.1" xmlns="http://www.w3.org/1999/xhtml"> folder.</span></p></li>
<li><p><span class="koboSpan" id="kobo.290.1" xmlns="http://www.w3.org/1999/xhtml">Unit tests for any new application modules in the </span><code><span class="koboSpan" id="kobo.291.1" xmlns="http://www.w3.org/1999/xhtml">tests</span></code><span class="koboSpan" id="kobo.292.1" xmlns="http://www.w3.org/1999/xhtml"> folder.</span></p></li>
<li><p><span class="koboSpan" id="kobo.293.1" xmlns="http://www.w3.org/1999/xhtml">Any new application modules in the </span><code><span class="koboSpan" id="kobo.294.1" xmlns="http://www.w3.org/1999/xhtml">src</span></code><span class="koboSpan" id="kobo.295.1" xmlns="http://www.w3.org/1999/xhtml"> folder with code to be used by the inspection notebook.</span></p></li>
<li><p><span class="koboSpan" id="kobo.296.1" xmlns="http://www.w3.org/1999/xhtml">A notebook to inspect the raw data acquired from any of the sources.</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.297.1" xmlns="http://www.w3.org/1999/xhtml">The project directory structure suggested in </span><a href="ch005.xhtml#x1-170001"><em><span class="koboSpan" id="kobo.298.1" xmlns="http://www.w3.org/1999/xhtml">Chapter</span></em><em><span class="koboSpan" id="kobo.299.1" xmlns="http://www.w3.org/1999/xhtml"> 1</span></em></a><span class="koboSpan" id="kobo.300.1" xmlns="http://www.w3.org/1999/xhtml">, </span><a href="ch005.xhtml#x1-170001"><em><span class="koboSpan" id="kobo.301.1" xmlns="http://www.w3.org/1999/xhtml">Project Zero: A Template</span></em> <em><span class="koboSpan" id="kobo.302.1" xmlns="http://www.w3.org/1999/xhtml">for Other Projects</span></em></a><span class="koboSpan" id="kobo.303.1" xmlns="http://www.w3.org/1999/xhtml"> mentions a </span><code><span class="koboSpan" id="kobo.304.1" xmlns="http://www.w3.org/1999/xhtml">notebooks</span></code><span class="koboSpan" id="kobo.305.1" xmlns="http://www.w3.org/1999/xhtml"> directory. </span><span class="koboSpan" id="kobo.305.2" xmlns="http://www.w3.org/1999/xhtml">See </span><a href="ch005.xhtml#x1-260003"><em><span class="koboSpan" id="kobo.306.1" xmlns="http://www.w3.org/1999/xhtml">List of deliverables</span></em></a><span class="koboSpan" id="kobo.307.1" xmlns="http://www.w3.org/1999/xhtml"> for more information. </span><span class="koboSpan" id="kobo.307.2" xmlns="http://www.w3.org/1999/xhtml">Previous chapters haven’t used any notebooks, so this directory might not have been created in the first place. </span><span class="koboSpan" id="kobo.307.3" xmlns="http://www.w3.org/1999/xhtml">For this project, the </span><code><span class="koboSpan" id="kobo.308.1" xmlns="http://www.w3.org/1999/xhtml">snotebooks</span></code><span class="koboSpan" id="kobo.309.1" xmlns="http://www.w3.org/1999/xhtml"> directory is needed.</span></p>
<p><span class="koboSpan" id="kobo.310.1" xmlns="http://www.w3.org/1999/xhtml">Let’s look at a few of these deliverables in a little more detail. </span><span id="x1-152002r167"/></p>
<section class="level3" data-number="10.3.1" id="notebook-.ipynb-file">
<h3 data-number="10.3.1"><span class="titlemark"><span class="koboSpan" id="kobo.311.1" xmlns="http://www.w3.org/1999/xhtml">6.3.1 </span></span> <span id="x1-1530001"/><span class="koboSpan" id="kobo.312.1" xmlns="http://www.w3.org/1999/xhtml">Notebook .ipynb file</span></h3>
<p><span class="koboSpan" id="kobo.313.1" xmlns="http://www.w3.org/1999/xhtml">The notebook can (and should) be a </span><span id="dx1-153001"/><span class="koboSpan" id="kobo.314.1" xmlns="http://www.w3.org/1999/xhtml">mixture of Markdown cells </span><span id="dx1-153002"/><span class="koboSpan" id="kobo.315.1" xmlns="http://www.w3.org/1999/xhtml">providing notes and context, and computation cells showing the data.</span></p>
<p><span class="koboSpan" id="kobo.316.1" xmlns="http://www.w3.org/1999/xhtml">Readers who have followed the projects up to this point will likely have a directory with NDJSON files that need to be read to construct useful Python objects. </span><span class="koboSpan" id="kobo.316.2" xmlns="http://www.w3.org/1999/xhtml">One good approach is to define a function to read lines from a file, and use </span><code><span class="koboSpan" id="kobo.317.1" xmlns="http://www.w3.org/1999/xhtml">json.loads()</span></code><span class="koboSpan" id="kobo.318.1" xmlns="http://www.w3.org/1999/xhtml"> to transform the line of text into a small dictionary of useful data.</span></p>
<p><span class="koboSpan" id="kobo.319.1" xmlns="http://www.w3.org/1999/xhtml">There’s no compelling reason to use the </span><code><span class="koboSpan" id="kobo.320.1" xmlns="http://www.w3.org/1999/xhtml">model</span></code><span class="koboSpan" id="kobo.321.1" xmlns="http://www.w3.org/1999/xhtml"> module’s class definitions for this inspection. </span><span class="koboSpan" id="kobo.321.2" xmlns="http://www.w3.org/1999/xhtml">The class definitions can help to make the data somewhat more accessible.</span></p>
<p><span class="koboSpan" id="kobo.322.1" xmlns="http://www.w3.org/1999/xhtml">The inspection process starts </span><span id="dx1-153003"/><span class="koboSpan" id="kobo.323.1" xmlns="http://www.w3.org/1999/xhtml">with cells that name </span><span id="dx1-153004"/><span class="koboSpan" id="kobo.324.1" xmlns="http://www.w3.org/1999/xhtml">the files, creating </span><code><span class="koboSpan" id="kobo.325.1" xmlns="http://www.w3.org/1999/xhtml">Path</span></code><span class="koboSpan" id="kobo.326.1" xmlns="http://www.w3.org/1999/xhtml"> objects.</span></p>
<p><span class="koboSpan" id="kobo.327.1" xmlns="http://www.w3.org/1999/xhtml">A function code like the following example might be helpful:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-110">
<div class="tcolorbox-content">
<pre class="source-code"><span class="koboSpan" id="kobo.328.1" xmlns="http://www.w3.org/1999/xhtml">import csv
from collections.abc import Iterator
import json
from typing import TextIO

def samples_iter(source: TextIO) -&gt; Iterator[dict[str, str]]:
    yield from (json.loads(line) for line in source)</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.329.1" xmlns="http://www.w3.org/1999/xhtml">This function will iterate over the acquired data. </span><span class="koboSpan" id="kobo.329.2" xmlns="http://www.w3.org/1999/xhtml">In many cases, we can use the iterator to scan through a large collection of samples, picking individual attribute values or some subset of the samples.</span></p>
<p><span class="koboSpan" id="kobo.330.1" xmlns="http://www.w3.org/1999/xhtml">We can use the following statement to create a list-of-dictionary structure from the given path:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-111">
<div class="tcolorbox-content">
<pre class="source-code"><span class="koboSpan" id="kobo.331.1" xmlns="http://www.w3.org/1999/xhtml">from pathlib import Path
source_path = Path("/path/to/quartet/Series_1.ndjson")
with source_path.open() as source_file:
    source_data = list(samples_iter(source_file))</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.332.1" xmlns="http://www.w3.org/1999/xhtml">We can start with these basics in a few cells of the notebook. </span><span class="koboSpan" id="kobo.332.2" xmlns="http://www.w3.org/1999/xhtml">Given this foundation, further cells can explore the available data.</span></p>
<section class="level4 likesubsubsectionHead" data-number="10.3.1.1" id="cells-and-functions-to-analyze-data">
<h4 class="likesubsubsectionHead" data-number="10.3.1.1"><span id="x1-1540001"/><span class="koboSpan" id="kobo.333.1" xmlns="http://www.w3.org/1999/xhtml">Cells and functions to analyze data</span></h4>
<p><span class="koboSpan" id="kobo.334.1" xmlns="http://www.w3.org/1999/xhtml">For this initial inspection project, the analysis </span><span id="dx1-154001"/><span class="koboSpan" id="kobo.335.1" xmlns="http://www.w3.org/1999/xhtml">requirements are small. </span><span class="koboSpan" id="kobo.335.2" xmlns="http://www.w3.org/1999/xhtml">The example datasets from the previous </span><span id="dx1-154002"/><span class="koboSpan" id="kobo.336.1" xmlns="http://www.w3.org/1999/xhtml">chapters are artificial data, designed to demonstrate the need to use graphical techniques for exploratory data analysis.</span></p>
<p><span class="koboSpan" id="kobo.337.1" xmlns="http://www.w3.org/1999/xhtml">For other datasets, however, there may be a variety of odd or unusual problems.</span></p>
<p><span class="koboSpan" id="kobo.338.1" xmlns="http://www.w3.org/1999/xhtml">For example, the </span><strong><span class="koboSpan" id="kobo.339.1" xmlns="http://www.w3.org/1999/xhtml">CO</span></strong><strong><span class="koboSpan" id="kobo.340.1" xmlns="http://www.w3.org/1999/xhtml">2</span></strong> <strong><span class="koboSpan" id="kobo.341.1" xmlns="http://www.w3.org/1999/xhtml">PPM — Trends in Atmospheric Carbon</span></strong> <strong><span class="koboSpan" id="kobo.342.1" xmlns="http://www.w3.org/1999/xhtml">Dioxide </span></strong><span class="koboSpan" id="kobo.343.1" xmlns="http://www.w3.org/1999/xhtml">dataset, available at </span><a class="url" href="https://datahub.io/core/co2-ppm"><span class="koboSpan" id="kobo.344.1" xmlns="http://www.w3.org/1999/xhtml">https://datahub.io/core/co2-ppm</span></a><span class="koboSpan" id="kobo.345.1" xmlns="http://www.w3.org/1999/xhtml">, has a </span><span id="dx1-154003"/><span class="koboSpan" id="kobo.346.1" xmlns="http://www.w3.org/1999/xhtml">number of ”missing value” codes in the data. </span><span class="koboSpan" id="kobo.346.2" xmlns="http://www.w3.org/1999/xhtml">Here are two examples:</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.347.1" xmlns="http://www.w3.org/1999/xhtml">The CO2 average values sometimes have values of </span><span class="cmsy-10x-x-109"><span class="koboSpan" id="kobo.348.1" xmlns="http://www.w3.org/1999/xhtml">−</span></span><span class="koboSpan" id="kobo.349.1" xmlns="http://www.w3.org/1999/xhtml">99</span><em><span class="koboSpan" id="kobo.350.1" xmlns="http://www.w3.org/1999/xhtml">.</span></em><span class="koboSpan" id="kobo.351.1" xmlns="http://www.w3.org/1999/xhtml">99 as a placeholder for a time when a measurement wasn’t available. </span><span class="koboSpan" id="kobo.351.2" xmlns="http://www.w3.org/1999/xhtml">In these cases, a statistical process used data from adjacent months to interpolate the missing value.</span></p></li>
<li><p><span class="koboSpan" id="kobo.352.1" xmlns="http://www.w3.org/1999/xhtml">Additionally, the number of days of valid data for a month’s summary wasn’t recorded, and a </span><span class="cmsy-10x-x-109"><span class="koboSpan" id="kobo.353.1" xmlns="http://www.w3.org/1999/xhtml">−</span></span><span class="koboSpan" id="kobo.354.1" xmlns="http://www.w3.org/1999/xhtml">1 value is used.</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.355.1" xmlns="http://www.w3.org/1999/xhtml">This dataset requires a bit more care to be sure of the values in each column and what the columns mean.</span></p>
<p><span class="koboSpan" id="kobo.356.1" xmlns="http://www.w3.org/1999/xhtml">Capturing the domain of values in a </span><span id="dx1-154004"/><span class="koboSpan" id="kobo.357.1" xmlns="http://www.w3.org/1999/xhtml">given column is helpful here. </span><span class="koboSpan" id="kobo.357.2" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.358.1" xmlns="http://www.w3.org/1999/xhtml">collections</span></code><span class="koboSpan" id="kobo.359.1" xmlns="http://www.w3.org/1999/xhtml"> module has a </span><code><span class="koboSpan" id="kobo.360.1" xmlns="http://www.w3.org/1999/xhtml">Counter</span></code><span class="koboSpan" id="kobo.361.1" xmlns="http://www.w3.org/1999/xhtml"> object that’s ideal for understanding </span><span id="dx1-154005"/><span class="koboSpan" id="kobo.362.1" xmlns="http://www.w3.org/1999/xhtml">the data in a specific column.</span></p>
<p><span class="koboSpan" id="kobo.363.1" xmlns="http://www.w3.org/1999/xhtml">A cell can use a three-step computation to see the domain of values:</span></p>
<ol>
<li><div id="x1-154007x1">
<p><span class="koboSpan" id="kobo.364.1" xmlns="http://www.w3.org/1999/xhtml">Use the </span><code><span class="koboSpan" id="kobo.365.1" xmlns="http://www.w3.org/1999/xhtml">samples_iter()</span></code><span class="koboSpan" id="kobo.366.1" xmlns="http://www.w3.org/1999/xhtml"> function to yield the source documents.</span></p>
</div></li>
<li><div id="x1-154009x2">
<p><span class="koboSpan" id="kobo.367.1" xmlns="http://www.w3.org/1999/xhtml">Create a generator with sample attribute values.</span></p>
</div></li>
<li><div id="x1-154011x3">
<p><span class="koboSpan" id="kobo.368.1" xmlns="http://www.w3.org/1999/xhtml">Create a </span><code><span class="koboSpan" id="kobo.369.1" xmlns="http://www.w3.org/1999/xhtml">Counter</span></code><span class="koboSpan" id="kobo.370.1" xmlns="http://www.w3.org/1999/xhtml"> to summarize the values.</span></p>
</div></li>
</ol>
<p><span class="koboSpan" id="kobo.371.1" xmlns="http://www.w3.org/1999/xhtml">This can lead to a cell in the notebook with the following statements:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-112">
<div class="tcolorbox-content">
<pre class="source-code"><span class="koboSpan" id="kobo.372.1" xmlns="http://www.w3.org/1999/xhtml">from collections import Counter

values_x = (sample[’x’] for sample in source_data)
domain_x = Counter(values_x)</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.373.1" xmlns="http://www.w3.org/1999/xhtml">The next cell in the notebook can display the value of the </span><code><span class="koboSpan" id="kobo.374.1" xmlns="http://www.w3.org/1999/xhtml">domain_x</span></code><span class="koboSpan" id="kobo.375.1" xmlns="http://www.w3.org/1999/xhtml"> value. </span><span class="koboSpan" id="kobo.375.2" xmlns="http://www.w3.org/1999/xhtml">If the </span><code><span class="koboSpan" id="kobo.376.1" xmlns="http://www.w3.org/1999/xhtml">csv.reader()</span></code><span class="koboSpan" id="kobo.377.1" xmlns="http://www.w3.org/1999/xhtml"> function is used, it will reveal the header along with the domain of values. </span><span class="koboSpan" id="kobo.377.2" xmlns="http://www.w3.org/1999/xhtml">If the </span><code><span class="koboSpan" id="kobo.378.1" xmlns="http://www.w3.org/1999/xhtml">csv.DictReader()</span></code><span class="koboSpan" id="kobo.379.1" xmlns="http://www.w3.org/1999/xhtml"> class is used, this collection will not include the header. </span><span class="koboSpan" id="kobo.379.2" xmlns="http://www.w3.org/1999/xhtml">This permits a tidy exploration of the various attributes in the collection of samples.</span></p>
<p><span class="koboSpan" id="kobo.380.1" xmlns="http://www.w3.org/1999/xhtml">An inspection </span><span id="dx1-154016"/><span class="koboSpan" id="kobo.381.1" xmlns="http://www.w3.org/1999/xhtml">notebook is not the </span><span id="dx1-154017"/><span class="koboSpan" id="kobo.382.1" xmlns="http://www.w3.org/1999/xhtml">place to attempt more sophisticated data analysis. </span><span class="koboSpan" id="kobo.382.2" xmlns="http://www.w3.org/1999/xhtml">Computing means or medians should only be done on cleaned data. </span><span class="koboSpan" id="kobo.382.3" xmlns="http://www.w3.org/1999/xhtml">We’ll return to this in </span><a href="ch019.xhtml#x1-32500015"><em><span class="koboSpan" id="kobo.383.1" xmlns="http://www.w3.org/1999/xhtml">Chapter</span></em><em><span class="koboSpan" id="kobo.384.1" xmlns="http://www.w3.org/1999/xhtml"> 15</span></em></a><span class="koboSpan" id="kobo.385.1" xmlns="http://www.w3.org/1999/xhtml">, </span><a href="ch019.xhtml#x1-32500015"><em><span class="koboSpan" id="kobo.386.1" xmlns="http://www.w3.org/1999/xhtml">Project 5.1: Modeling Base</span></em> <em><span class="koboSpan" id="kobo.387.1" xmlns="http://www.w3.org/1999/xhtml">Application</span></em></a><span class="koboSpan" id="kobo.388.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
</section>
<section class="level4 likesubsubsectionHead" data-number="10.3.1.2" id="cells-with-markdown-to-explain-things">
<h4 class="likesubsubsectionHead" data-number="10.3.1.2"><span id="x1-1550001"/><span class="koboSpan" id="kobo.389.1" xmlns="http://www.w3.org/1999/xhtml">Cells with Markdown to explain things</span></h4>
<p><span class="koboSpan" id="kobo.390.1" xmlns="http://www.w3.org/1999/xhtml">It’s very helpful to include cells using Markdown to provide information, insights, and lessons learned about the data.</span></p>
<p><span class="koboSpan" id="kobo.391.1" xmlns="http://www.w3.org/1999/xhtml">For information on the markdown language, see the Daring Fireball website: </span><a class="url" href="https://daringfireball.net/projects/markdown/basics"><span class="koboSpan" id="kobo.392.1" xmlns="http://www.w3.org/1999/xhtml">https://daringfireball.net/projects/markdown/basics</span></a><span class="koboSpan" id="kobo.393.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
<p><span class="koboSpan" id="kobo.394.1" xmlns="http://www.w3.org/1999/xhtml">As noted earlier in this chapter, there are </span><span id="dx1-155001"/><span class="koboSpan" id="kobo.395.1" xmlns="http://www.w3.org/1999/xhtml">two general flavors of notebooks:</span></p>
<ul>
<li><p><strong><span class="koboSpan" id="kobo.396.1" xmlns="http://www.w3.org/1999/xhtml">Exploratory</span></strong><span class="koboSpan" id="kobo.397.1" xmlns="http://www.w3.org/1999/xhtml">: These notebooks are a series of blog posts about the data and the process of exploring and inspecting the data. </span><span class="koboSpan" id="kobo.397.2" xmlns="http://www.w3.org/1999/xhtml">Cells may not all work because they’re works in process.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.398.1" xmlns="http://www.w3.org/1999/xhtml">Presentation</span></strong><span class="koboSpan" id="kobo.399.1" xmlns="http://www.w3.org/1999/xhtml">: These notebooks are a more polished, final report on data or problems. </span><span class="koboSpan" id="kobo.399.2" xmlns="http://www.w3.org/1999/xhtml">The paths that lead to dead ends should be pruned into summaries of the lessons learned.</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.400.1" xmlns="http://www.w3.org/1999/xhtml">A bright line separates these two flavors of notebooks. </span><span class="koboSpan" id="kobo.400.2" xmlns="http://www.w3.org/1999/xhtml">The distinguishing factor is the reproducibility of the notebook. </span><span class="koboSpan" id="kobo.400.3" xmlns="http://www.w3.org/1999/xhtml">A notebook that’s useful for presentations can be run from beginning to end without manual intervention to fix problems or skip over cells with syntax errors or other problems. </span><span class="koboSpan" id="kobo.400.4" xmlns="http://www.w3.org/1999/xhtml">Otherwise, the notebook is part of an exploration. </span><span class="koboSpan" id="kobo.400.5" xmlns="http://www.w3.org/1999/xhtml">It’s often necessary to copy and edit an exploratory notebook to create a derived notebook focused on presentation.</span></p>
<p><span class="koboSpan" id="kobo.401.1" xmlns="http://www.w3.org/1999/xhtml">Generally, a notebook designed for a presentation uses Markdown cells to create a narrative flow that looks like any chapter of a book or article in a journal. </span><span class="koboSpan" id="kobo.401.2" xmlns="http://www.w3.org/1999/xhtml">We’ll return to more formal reporting in </span><a href="ch018.xhtml#x1-31300014"><em><span class="koboSpan" id="kobo.402.1" xmlns="http://www.w3.org/1999/xhtml">Chapter</span></em><em><span class="koboSpan" id="kobo.403.1" xmlns="http://www.w3.org/1999/xhtml"> 14</span></em></a><span class="koboSpan" id="kobo.404.1" xmlns="http://www.w3.org/1999/xhtml">, </span><a href="ch018.xhtml#x1-31300014"><em><span class="koboSpan" id="kobo.405.1" xmlns="http://www.w3.org/1999/xhtml">Project 4.2: Creating</span></em> <em><span class="koboSpan" id="kobo.406.1" xmlns="http://www.w3.org/1999/xhtml">Reports</span></em></a><span class="koboSpan" id="kobo.407.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
</section>
<section class="level4 likesubsubsectionHead" data-number="10.3.1.3" id="cells-with-test-cases">
<h4 class="likesubsubsectionHead" data-number="10.3.1.3"><span id="x1-1560001"/><span class="koboSpan" id="kobo.408.1" xmlns="http://www.w3.org/1999/xhtml">Cells with test cases</span></h4>
<p><span class="koboSpan" id="kobo.409.1" xmlns="http://www.w3.org/1999/xhtml">Earlier, we introduced a </span><code><span class="koboSpan" id="kobo.410.1" xmlns="http://www.w3.org/1999/xhtml">samples_iter()</span></code><span class="koboSpan" id="kobo.411.1" xmlns="http://www.w3.org/1999/xhtml"> function </span><span id="dx1-156001"/><span class="koboSpan" id="kobo.412.1" xmlns="http://www.w3.org/1999/xhtml">that lacked any unit tests or examples. </span><span class="koboSpan" id="kobo.412.2" xmlns="http://www.w3.org/1999/xhtml">It’s considerably more helpful to provide a </span><strong><span class="koboSpan" id="kobo.413.1" xmlns="http://www.w3.org/1999/xhtml">doctest </span></strong><span class="koboSpan" id="kobo.414.1" xmlns="http://www.w3.org/1999/xhtml">string within a notebook:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-113">
<div class="tcolorbox-content">
<pre class="source-code"><span class="koboSpan" id="kobo.415.1" xmlns="http://www.w3.org/1999/xhtml">def samples_iter(source: TextIO) -&gt; Iterator[dict[str, str]]:
    """
    # Build NDJSON file with two lines
    &gt;&gt;&gt; import json
    &gt;&gt;&gt; from io import StringIO
    &gt;&gt;&gt; source_data = [
    ...     </span><span class="koboSpan" id="kobo.415.2" xmlns="http://www.w3.org/1999/xhtml">{’x’: 0, ’y’: 42},
    ...     </span><span class="koboSpan" id="kobo.415.3" xmlns="http://www.w3.org/1999/xhtml">{’x’: 1, ’y’: 99},
    ... </span><span class="koboSpan" id="kobo.415.4" xmlns="http://www.w3.org/1999/xhtml">]
    &gt;&gt;&gt; source_text = [json.dumps(sample) for sample in source_data]
    &gt;&gt;&gt; ndjson_file = StringIO(’\\n’.join(source_text))

    # Parse the file
    &gt;&gt;&gt; list(samples_iter(ndjson_file))
    [{’x’: 0, ’y’: 42}, {’x’: 1, ’y’: 99}]
    """
    yield from (json.loads(line) for line in source)</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.416.1" xmlns="http://www.w3.org/1999/xhtml">This function’s docstrings include an extensive test case. </span><span class="koboSpan" id="kobo.416.2" xmlns="http://www.w3.org/1999/xhtml">The test case builds an NDJSON document from a list of two dictionaries. </span><span class="koboSpan" id="kobo.416.3" xmlns="http://www.w3.org/1999/xhtml">The test case then applies the </span><code><span class="koboSpan" id="kobo.417.1" xmlns="http://www.w3.org/1999/xhtml">samples_iter()</span></code><span class="koboSpan" id="kobo.418.1" xmlns="http://www.w3.org/1999/xhtml"> function to parse the NDJSON file and recover the original two samples.</span></p>
<p><span class="koboSpan" id="kobo.419.1" xmlns="http://www.w3.org/1999/xhtml">To execute this test, the notebook needs a cell to examine the docstrings in all of the functions and classes defined in the notebook:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-114">
<div class="tcolorbox-content">
<pre class="source-code"><span class="koboSpan" id="kobo.420.1" xmlns="http://www.w3.org/1999/xhtml">import doctest
doctest.testmod()</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.421.1" xmlns="http://www.w3.org/1999/xhtml">This works because the global context for a notebook is treated like a module with a default name of </span><code><span class="koboSpan" id="kobo.422.1" xmlns="http://www.w3.org/1999/xhtml">__main__</span></code><span class="koboSpan" id="kobo.423.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.423.2" xmlns="http://www.w3.org/1999/xhtml">This module will be examined by the </span><code><span class="koboSpan" id="kobo.424.1" xmlns="http://www.w3.org/1999/xhtml">textmod()</span></code><span class="koboSpan" id="kobo.425.1" xmlns="http://www.w3.org/1999/xhtml"> function to find docstrings that look like they contain doc test examples.</span></p>
<p><span class="koboSpan" id="kobo.426.1" xmlns="http://www.w3.org/1999/xhtml">Having the last cell run the </span><strong><span class="koboSpan" id="kobo.427.1" xmlns="http://www.w3.org/1999/xhtml">doctest </span></strong><span class="koboSpan" id="kobo.428.1" xmlns="http://www.w3.org/1999/xhtml">tool makes it </span><span id="dx1-156021"/><span class="koboSpan" id="kobo.429.1" xmlns="http://www.w3.org/1999/xhtml">easy to run the notebook, scroll to the end, and confirm the tests have all passed. </span><span class="koboSpan" id="kobo.429.2" xmlns="http://www.w3.org/1999/xhtml">This is an excellent form of validation. </span><span id="x1-156022r169"/></p>
</section>
</section>
<section class="level3" data-number="10.3.2" id="executing-a-notebooks-test-suite">
<h3 data-number="10.3.2"><span class="titlemark"><span class="koboSpan" id="kobo.430.1" xmlns="http://www.w3.org/1999/xhtml">6.3.2 </span></span> <span id="x1-1570002"/><span class="koboSpan" id="kobo.431.1" xmlns="http://www.w3.org/1999/xhtml">Executing a notebook’s test suite</span></h3>
<p><span class="koboSpan" id="kobo.432.1" xmlns="http://www.w3.org/1999/xhtml">A Jupyter notebook is inherently interactive. </span><span class="koboSpan" id="kobo.432.2" xmlns="http://www.w3.org/1999/xhtml">This makes an automated acceptance test of a notebook potentially challenging.</span></p>
<p><span class="koboSpan" id="kobo.433.1" xmlns="http://www.w3.org/1999/xhtml">Fortunately, there’s a command </span><span id="dx1-157001"/><span class="koboSpan" id="kobo.434.1" xmlns="http://www.w3.org/1999/xhtml">that executes a notebook to </span><span id="dx1-157002"/><span class="koboSpan" id="kobo.435.1" xmlns="http://www.w3.org/1999/xhtml">confirm it works all the way through without problems.</span></p>
<p><span class="koboSpan" id="kobo.436.1" xmlns="http://www.w3.org/1999/xhtml">We can use the following command to execute a notebook to confirm that all the cells will execute without any errors:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-115">
<div class="tcolorbox-content">
<pre class="console"><span class="koboSpan" id="kobo.437.1" xmlns="http://www.w3.org/1999/xhtml">% jupyter execute notebooks/example_2.ipynb</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.438.1" xmlns="http://www.w3.org/1999/xhtml">A notebook may ingest a great deal of data, making it very time-consuming to test the notebook as a whole. </span><span class="koboSpan" id="kobo.438.2" xmlns="http://www.w3.org/1999/xhtml">This can lead to using a cell to read a configuration file and using this information to use a subset of data for test purposes. </span><span id="x1-157004r168"/></p>
</section>
</section>
<section class="level2" data-number="10.4" id="summary-5">
<h2 data-number="10.4"><span class="titlemark"><span class="koboSpan" id="kobo.439.1" xmlns="http://www.w3.org/1999/xhtml">6.4 </span></span> <span id="x1-1580004"/><span class="koboSpan" id="kobo.440.1" xmlns="http://www.w3.org/1999/xhtml">Summary</span></h2>
<p><span class="koboSpan" id="kobo.441.1" xmlns="http://www.w3.org/1999/xhtml">This chapter’s project covered the basics of creating and using a Jupyter Lab notebook for data inspection. </span><span class="koboSpan" id="kobo.441.2" xmlns="http://www.w3.org/1999/xhtml">This permits tremendous flexibility, something often required when looking at new data for the first time.</span></p>
<p><span class="koboSpan" id="kobo.442.1" xmlns="http://www.w3.org/1999/xhtml">We also looked at adding </span><strong><span class="koboSpan" id="kobo.443.1" xmlns="http://www.w3.org/1999/xhtml">doctest </span></strong><span class="koboSpan" id="kobo.444.1" xmlns="http://www.w3.org/1999/xhtml">examples to functions and running the </span><strong><span class="koboSpan" id="kobo.445.1" xmlns="http://www.w3.org/1999/xhtml">doctest </span></strong><span class="koboSpan" id="kobo.446.1" xmlns="http://www.w3.org/1999/xhtml">tool in the last cell of a notebook. </span><span class="koboSpan" id="kobo.446.2" xmlns="http://www.w3.org/1999/xhtml">This lets us validate that the code in the notebook is very likely to work properly.</span></p>
<p><span class="koboSpan" id="kobo.447.1" xmlns="http://www.w3.org/1999/xhtml">Now that we’ve got an initial inspection notebook, we can start to consider the specific kinds of data being acquired. </span><span class="koboSpan" id="kobo.447.2" xmlns="http://www.w3.org/1999/xhtml">In the next chapter, we’ll add features to this notebook. </span><span id="x1-158001r174"/></p>
</section>
<section class="level2" data-number="10.5" id="extras-4">
<h2 data-number="10.5"><span class="titlemark"><span class="koboSpan" id="kobo.448.1" xmlns="http://www.w3.org/1999/xhtml">6.5 </span></span> <span id="x1-1590005"/><span class="koboSpan" id="kobo.449.1" xmlns="http://www.w3.org/1999/xhtml">Extras</span></h2>
<p><span class="koboSpan" id="kobo.450.1" xmlns="http://www.w3.org/1999/xhtml">Here are some ideas for you to add to this project. </span><span id="x1-159001r173"/></p>
<section class="level3" data-number="10.5.1" id="use-pandas-to-examine-data">
<h3 data-number="10.5.1"><span class="titlemark"><span class="koboSpan" id="kobo.451.1" xmlns="http://www.w3.org/1999/xhtml">6.5.1 </span></span> <span id="x1-1600001"/><span class="koboSpan" id="kobo.452.1" xmlns="http://www.w3.org/1999/xhtml">Use pandas to examine data</span></h3>
<p><span class="koboSpan" id="kobo.453.1" xmlns="http://www.w3.org/1999/xhtml">A common tool for interactive data exploration is the </span><code><span class="koboSpan" id="kobo.454.1" xmlns="http://www.w3.org/1999/xhtml">pandas</span></code><span class="koboSpan" id="kobo.455.1" xmlns="http://www.w3.org/1999/xhtml"> package.</span></p>
<p><span class="koboSpan" id="kobo.456.1" xmlns="http://www.w3.org/1999/xhtml">See </span><a class="url" href="https://pandas.pydata.org"><span class="koboSpan" id="kobo.457.1" xmlns="http://www.w3.org/1999/xhtml">https://pandas.pydata.org</span></a><span class="koboSpan" id="kobo.458.1" xmlns="http://www.w3.org/1999/xhtml"> for more information.</span></p>
<p><span class="koboSpan" id="kobo.459.1" xmlns="http://www.w3.org/1999/xhtml">Also, see </span><a class="url" href="https://www.packtpub.com/product/learning-pandas/9781783985128"><span class="koboSpan" id="kobo.460.1" xmlns="http://www.w3.org/1999/xhtml">https://www.packtpub.com/product/learning-pandas/9781783985128</span></a><span class="koboSpan" id="kobo.461.1" xmlns="http://www.w3.org/1999/xhtml"> for resources for learning more about pandas.</span></p>
<p><span class="koboSpan" id="kobo.462.1" xmlns="http://www.w3.org/1999/xhtml">The value of using pandas for examining text may be limited. </span><span class="koboSpan" id="kobo.462.2" xmlns="http://www.w3.org/1999/xhtml">The real value of pandas is for doing more sophisticated statistical and graphical analysis of the data.</span></p>
<p><span class="koboSpan" id="kobo.463.1" xmlns="http://www.w3.org/1999/xhtml">We encourage you to load NDJSON documents using pandas and do some preliminary investigation of the data values. </span><span id="x1-160001r160"/></p>
</section>
</section>
</section>
</body>
</html>
