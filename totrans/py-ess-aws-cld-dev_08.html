<html><head></head><body>
<div id="sbo-rt-content"><div id="_idContainer220">
<h1 class="chapter-number" id="_idParaDest-80"><a id="_idTextAnchor012"/>8</h1>
<h1 id="_idParaDest-81">Database Operations with RDS</h1>
<p>In this chapter, we are going to learn the basics of <strong class="bold">Amazon Relational Database Service</strong> (<strong class="bold">Amazon RDS</strong>) and create an RDS instance in order to make a database operation. You can use RDS to create the most popular databases in AWS. You can create Oracle, MySQL, or MS SQL databases on the cloud with scaling capabilities. In general, when you need to create a database, you must manage the infrastructure using an on-premises system. Managing the hardware and infrastructure, installing the database, and then monitoring could require a lot of effort to set up. AWS allows you to select the database type that you want and then create it with a simple button click – that <span class="No-Break">is all:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer180">
<img alt="" height="661" src="image/Figure_8.01_B19195.jpg" width="753"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.1 – Click to create</p>
<p>In this chapter, we will create a database and make some operations using Python. The chapter covers the <span class="No-Break">following topics:</span></p>
<ul>
<li>Features <span class="No-Break">of RDS</span></li>
<li><span class="No-Break">Provisioning RDS</span></li>
<li>Connecting to <span class="No-Break">the RDS</span></li>
<li>Creating a table in <span class="No-Break">the database</span></li>
<li>Database operations <span class="No-Break">with Python</span></li>
<li><span class="No-Break">Secrets Manager</span></li>
</ul>
<h1 id="_idParaDest-82">Features of RDS</h1>
<p>RDS <a id="_idIndexMarker248"/>comes with different features that facilitate the creation and maintenance of the database. Let’s look at the most <span class="No-Break">important features:</span></p>
<ul>
<li><strong class="bold">Easy to use</strong>: You can easily create and maintain RDS via the AWS console. It also allows us to use some API capabilities to make some programmatic operations. For example, you can create and scale the database, and monitor <span class="No-Break">its usage.</span></li>
<li><strong class="bold">Scalability</strong>: RDS supports scalability; if there is a need to support more capacity, you can easily scale the database up. However, if the capacity is less than you estimate, you can reduce the capacity with a <em class="italic">scale-down request</em> to reduce the cost. Another option is Amazon Aurora, which allows cloud users to implement more <a id="_idIndexMarker249"/>performance-intensive applications that support a <strong class="bold">Relational Database Management </strong><span class="No-Break"><strong class="bold">System</strong></span><span class="No-Break"> (</span><span class="No-Break"><strong class="bold">RDBMS</strong></span><span class="No-Break">).</span></li>
<li><strong class="bold">Backup</strong>: A database backup is important in case any issue arises with the infrastructure. In some cases, the backup is used to create a new database. RDS supports both manual and automated backups. You can create a snapshot whenever you want, or RDS can take a snapshot at regular intervals. In general, the snapshots are stored in AWS <span class="No-Break">S3 buckets.</span></li>
<li><strong class="bold">Multi-AZ deployment</strong>: RDS can be available within different locations to improve availability. If the infrastructure is down in one location, RDS can serve in another location to improve availability. This approach can be used for critical applications that use databases in <span class="No-Break">the cloud.</span></li>
<li><strong class="bold">Monitoring</strong>: Monitoring is very important for critical applications. You can track how the database is behaving and see whether there are any issues in it. RDS has a supporting monitoring feature. For example, you can track when I/O problems are happening in the database, and you can take the <span class="No-Break">right action.</span></li>
<li><strong class="bold">Cost options</strong>: AWS offers different pricing options for using the database. One of the popular options is the <em class="italic">pay-as-you-go</em> option. In this option, you don’t need to commit to any long-term contract. You simply pay for how many resources you use in a specific period. Hence, you can pay the bill monthly. In other options, you make a contract with AWS for a specific duration; however, in this case, you <a id="_idIndexMarker250"/>have to pay for the contract even if you don’t use <span class="No-Break">the database.</span></li>
</ul>
<h1 id="_idParaDest-83">Provisioning RDS</h1>
<p>In this section, we are <a id="_idIndexMarker251"/>going to create a sample relational database on the cloud. To provision the RDS on AWS, carry out the <span class="No-Break">following steps:</span></p>
<ol>
<li>Open the AWS console and type <strong class="source-inline">rds</strong> in the <span class="No-Break">search box:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer181">
<img alt="" height="218" src="image/Figure_8.02_B19195.jpg" width="1063"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.2 – RDS on the console</p>
<ol>
<li value="2">Click <strong class="bold">Databases</strong> on the left pane to see the list of databases. To create a new database, click <span class="No-Break"><strong class="bold">Create database</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer182">
<img alt="" height="172" src="image/Figure_8.03_B19195.jpg" width="1101"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.3 – Database list</p>
<ol>
<li value="3">On the new<a id="_idIndexMarker252"/> panel, <strong class="bold">Create database</strong>, and fill out the information required for the new database. RDS supports multiple database types, such as Amazon Aurora, MySQL, MariaDB, PostgreSQL, Oracle, and Microsoft SQL Server. In this example, we will <span class="No-Break">use </span><span class="No-Break"><strong class="bold">MySQL</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer183">
<img alt="" height="692" src="image/Figure_8.04_B19195.jpg" width="753"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.4 – MySQL selection</p>
<ol>
<li value="4">After<a id="_idIndexMarker253"/> selecting <strong class="bold">MySQL</strong>, scroll down and select the correct version of MySQL. In this example, we will use one of the latest versions, <span class="No-Break"><strong class="bold">MySQL 8.0.28</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer184">
<img alt="" height="849" src="image/Figure_8.05_B19195.jpg" width="749"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.5 – Template selection</p>
<ol>
<li value="5">Templates are <a id="_idIndexMarker254"/>useful for working in different environments. When you select the <strong class="bold">Production</strong> template, it gives you high availability. In this example, we will select the <strong class="bold">Free tier</strong> template to avoid <span class="No-Break">any costs.</span></li>
<li>Scroll down and fill in the <strong class="bold">Settings</strong> details. In the <strong class="bold">Settings</strong> panel, you need to fill in the database identifier, username, <span class="No-Break">and password:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer185">
<img alt="" height="602" src="image/Figure_8.06_B19195.jpg" width="750"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.6 – Settings</p>
<p><strong class="bold">DB instance identifier</strong> is used to represent the database name in the cloud. You can also enter the <strong class="bold">Master username</strong> and <strong class="bold">Master password</strong> details. These credentials are important for security.</p>
<p>Scroll down and fill in the details with regard to storage and instance configuration.</p>
<ol>
<li value="7">In <strong class="bold">Instance configuration</strong>, in <strong class="bold">DB instance class</strong>, you can select the processor<a id="_idIndexMarker255"/> and memory types. Since we are creating it for education, you can select the simple instance type that has basic hardware features. Another hardware selection is made for <strong class="bold">Storage</strong>. You can keep what AWS has recommended or use the <span class="No-Break">minimum values.</span></li>
</ol>
<p>In <strong class="bold">Storage type</strong>, you can select the disk type. In <strong class="bold">Allocated storage</strong>, you have to specify the limit of the disk. For this example, we selected <strong class="bold">200</strong> GiB. If the disk needs to be scaled, you can check the <strong class="bold">Enable storage autoscaling</strong> checkbox. </p>
<p>When the disk is scaled, the value you enter in the <strong class="bold">Maximum storage threshold</strong> field is the<a id="_idIndexMarker256"/> maximum value of the database. In this case, the maximum threshold is <strong class="source-inline">1000</strong>:</p>
<div>
<div class="IMG---Figure" id="_idContainer186">
<img alt="" height="814" src="image/Figure_8.07_B19195.jpg" width="644"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.7 – Instance configuration (part 1)</p>
<p>Scroll down and fill in the details with regard to <strong class="bold">Connectivity</strong>.</p>
<ol>
<li value="8">In the first option, AWS asks whether you want to connect to EC2. For this example, we don’t need to connect to EC2, so we select <strong class="bold">Don’t connect to an EC2 compute resource</strong>. (After setting up the database, we will use Lambda for database operations.) RDS needs to be created in the VPC, so in <strong class="bold">Virtual private cloud (VPC)</strong>, we select <strong class="bold">Create new VPC</strong>, and it will automatically create <span class="No-Break">a VPC.</span></li>
</ol>
<p>Another option is to select a group in <strong class="bold">DB Subnet group</strong>. This allows you to define which IP group is going to connect to the database. It is also important in terms of security. You can limit the IP range with this option.</p>
<p><strong class="bold">Public access</strong> allows you to<a id="_idIndexMarker257"/> enable access over the internet. For this application, we will use public access. However, you need to be careful when you set production databases as public.</p>
<p>The final option for <strong class="bold">Connectivity</strong> is to select a group in <strong class="bold">VPC security group (firewall)</strong>. In this case, you can define the same security group that connects to RDS:</p>
<div>
<div class="IMG---Figure" id="_idContainer187">
<img alt="" height="839" src="image/Figure_8.08_B19195.jpg" width="664"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.8 – Instance configuration (part 2)</p>
<p>Scroll down and fill in<a id="_idIndexMarker258"/> the database port information.</p>
<ol>
<li value="9"><strong class="bold">Database port</strong> defines which port is used to connect to the database. The default value is <strong class="source-inline">3306</strong> for MySQL, but you can also <span class="No-Break">change it:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer188">
<img alt="" height="127" src="image/Figure_8.09_B19195.jpg" width="533"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.9 – Database port</p>
<p>Scroll down and fill in the authentication details.</p>
<ol>
<li value="10"><strong class="bold">Database authentication</strong> is used<a id="_idIndexMarker259"/> to define the approach for password management. You can connect with only a password, a combination of a password with IAM authentication, or a password with Kerberos authentication. Let’s keep it simple and just use <span class="No-Break"><strong class="bold">Password authentication</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer189">
<img alt="" height="233" src="image/Figure_8.10_B19195.jpg" width="496"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.10 – Database authentication</p>
<p>Scroll down and fill in the details regarding database creation.</p>
<ol>
<li value="11">As a final step, you can keep other values as is. Click <strong class="bold">Create database</strong> and proceed with the <span class="No-Break">database creation:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer190">
<img alt="" height="682" src="image/Figure_8.11_B19195.jpg" width="694"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.11 – Database creation</p>
<p>This forwards <a id="_idIndexMarker260"/>you to the <strong class="bold">Databases</strong> list, in which you can see the database is being created:</p>
<div>
<div class="IMG---Figure" id="_idContainer191">
<img alt="" height="240" src="image/Figure_8.12_B19195.jpg" width="1037"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.12 – Databases list with a Creating status</p>
<p>After some time, you can see the database is ready to use:</p>
<div>
<div class="IMG---Figure" id="_idContainer192">
<img alt="" height="167" src="image/Figure_8.13_B19195.jpg" width="1102"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.13 – Databases list with an Available status</p>
<p>We will connect from our computer. To connect to the database, we need to enable the connection from outside of AWS.</p>
<ol>
<li value="12">Click the <strong class="bold">Connectivity &amp; security</strong> tab. You <a id="_idIndexMarker261"/>will see <strong class="bold">VPC security groups</strong>; click <span class="No-Break">the link:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer193">
<img alt="" height="669" src="image/Figure_8.14_B19195.jpg" width="1054"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.14 – Security groups</p>
<ol>
<li value="13">In the new panel, click <strong class="bold">Edit inbound rules</strong>. This will allow us to define the <span class="No-Break">inbound connections:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer194">
<img alt="" height="266" src="image/Figure_8.15_B19195.jpg" width="1100"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.15 – Inbound rules</p>
<ol>
<li value="14">Add the rule for the<a id="_idIndexMarker262"/> MySQL/Aurora type and click <strong class="bold">Save</strong>, which isn’t depicted in the following figure but is situated at the bottom of <span class="No-Break">the page:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer195">
<img alt="" height="200" src="image/Figure_8.16_B19195.jpg" width="1100"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.16 – Adding the rule</p>
<p>These steps allow us to accept the connection from outside of AWS. Hence, we will connect to AWS via a <span class="No-Break">local computer.</span></p>
<p>Congrats! You have created the database on the cloud. As you can see in the steps, creating a database is easy and efficient on the cloud. Let’s connect to the database in the <span class="No-Break">next topic.</span></p>
<h1 id="_idParaDest-84">Connecting to the RDS</h1>
<p>In this section, we <a id="_idIndexMarker263"/>are going to connect to the RDS from one of the database viewers. For that purpose, you can install a free database viewer; I will use a MySQL viewer. To install the MySQL viewer, carry out the <span class="No-Break">following steps:</span></p>
<ol>
<li>Open the following <span class="No-Break">link: </span><a href="https://www.mysql.com/products/workbench/"><span class="No-Break">https://www.mysql.com/products/Workbench/</span></a><span class="No-Break">.</span></li>
<li>Click <strong class="bold">Download Now</strong> on the <span class="No-Break">main page:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer196">
<img alt="" height="218" src="image/Figure_8.17_B19195.jpg" width="674"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.17 – MySQL Workbench</p>
<ol>
<li value="3">Click <strong class="bold">Download</strong> on the <span class="No-Break">next page:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer197">
<img alt="" height="383" src="image/Figure_8.18_B19195.jpg" width="956"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.18 – MySQL Workbench download</p>
<ol>
<li value="4">Double-click <a id="_idIndexMarker264"/>and install the downloaded package, and the installation will <span class="No-Break">be done.</span></li>
<li>Once the installation has been completed, click the <strong class="bold">+</strong> symbol to connect to the <span class="No-Break">new database:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer198">
<img alt="" height="663" src="image/Figure_8.19_B19195.jpg" width="1006"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.19 – New connection</p>
<ol>
<li value="6">Open <a id="_idIndexMarker265"/>AWS and copy the <span class="No-Break">connection details:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer199">
<img alt="" height="613" src="image/Figure_8.20_B19195.jpg" width="672"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.20 – Endpoint name</p>
<ol>
<li value="7">Fill out the<a id="_idIndexMarker266"/> endpoint and password details in MySQL Workbench and click <span class="No-Break"><strong class="bold">Test Connection</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer200">
<img alt="" height="489" src="image/Figure_8.21_B19195.jpg" width="788"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.21 – Test Connection</p>
<p>After <a id="_idIndexMarker267"/>clicking <strong class="bold">Test Connection</strong>, you will be able to see the connection:</p>
<div>
<div class="IMG---Figure" id="_idContainer201">
<img alt="" height="382" src="image/Figure_8.22_B19195.jpg" width="257"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.22 – Connection is successful</p>
<p>Good work! We<a id="_idIndexMarker268"/> have successfully connected to the RDS database from MySQL Workbench. Let’s create a table and insert some records in the <span class="No-Break">next topic.</span></p>
<h1 id="_idParaDest-85">Creating a table in the database</h1>
<p>We have created <a id="_idIndexMarker269"/>a database in the cloud and have connected via <a id="_idIndexMarker270"/>MySQL Workbench. As a next step, we are going to create a table via <span class="No-Break">MySQL Workbench:</span></p>
<ol>
<li>Connect to the database via <span class="No-Break">MySQL Workbench.</span></li>
<li>Create a database with the following command and click the <em class="italic">lightning</em> symbol, as shown in the figure <span class="No-Break">that follows:</span></li>
</ol>
<pre class="console">
CREATE DATABASE address;</pre>
<div>
<div class="IMG---Figure" id="_idContainer202">
<img alt="" height="168" src="image/Figure_8.23_B19195.jpg" width="942"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.23 – Creating a database</p>
<ol>
<li value="3">Execute<a id="_idIndexMarker271"/> the <strong class="source-inline">USE address</strong> command in<a id="_idIndexMarker272"/> order to <span class="No-Break">switch databases:</span></li>
</ol>
<pre class="console">
USE address;</pre>
<div>
<div class="IMG---Figure" id="_idContainer203">
<img alt="" height="121" src="image/Figure_8.24_B19195.jpg" width="840"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.24 – USE address</p>
<ol>
<li value="4">Create an <span class="No-Break">address table:</span></li>
</ol>
<pre class="console">
CREATE TABLE address (id INT, address VARCHAR(20));</pre>
<div>
<div class="IMG---Figure" id="_idContainer204">
<img alt="" height="133" src="image/Figure_8.25_B19195.jpg" width="829"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.25 – Creating a table</p>
<p>We have created an address table, and for the next step, we are going to insert data into the table.</p>
<ol>
<li value="5">Execute the following script to insert data into <span class="No-Break">the table:</span></li>
</ol>
<pre class="console">
INSERT INTO address (id,address) VALUES(1,"Germany");
INSERT INTO address (id,address) VALUES(2,"USA");</pre>
<div>
<div class="IMG---Figure" id="_idContainer205">
<img alt="" height="145" src="image/Figure_8.26_B19195.jpg" width="844"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.26 – Inserting script</p>
<p>The table has<a id="_idIndexMarker273"/> two rows, and we are going to read <a id="_idIndexMarker274"/>these values from the Lambda function:</p>
<div>
<div class="IMG---Figure" id="_idContainer206">
<img alt="" height="373" src="image/Figure_8.27_B19195.jpg" width="666"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.27 – Select script</p>
<p>In this topic, we have created a simple table and inserted records. The insertion was made with MySQL Workbench, but you can also use other database tools. As a next step, we are going to read the records <span class="No-Break">using Python.</span></p>
<h1 id="_idParaDest-86">Database operations with Python</h1>
<p>In this section, we are <a id="_idIndexMarker275"/>going to read a table using Python. To <a id="_idIndexMarker276"/>execute a Python function, we will use PyCharm on a local computer. Carry out the <span class="No-Break">following steps:</span></p>
<ol>
<li>Open<a id="_idIndexMarker277"/> PyCharm or an IDE, whichever <span class="No-Break">you</span><span class="No-Break"><a id="_idIndexMarker278"/></span><span class="No-Break"> prefer.</span></li>
<li>We are going to install MySQL Connector to PyCharm. MySQL Connector will be used for database operations from Python. In PyCharm, select <strong class="bold">File</strong> | <strong class="bold">New Projects Setup</strong> | <strong class="bold">Preferences for </strong><span class="No-Break"><strong class="bold">New Projects…</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer207">
<img alt="" height="562" src="image/Figure_8.28_B19195.jpg" width="572"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.28 – Preferences</p>
<ol>
<li value="3">In the panel, select <span class="No-Break"><strong class="bold">Python Interpreter</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer208">
<img alt="" height="286" src="image/Figure_8.29_B19195.jpg" width="249"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.29 – Python Interpreter</p>
<ol>
<li value="4">To add <a id="_idIndexMarker279"/>a new <a id="_idIndexMarker280"/>package, click the <strong class="bold">+</strong> <span class="No-Break">symbol:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer209">
<img alt="" height="282" src="image/Figure_8.30_B19195.jpg" width="975"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.30 – Adding a package</p>
<ol>
<li value="5">In the <a id="_idIndexMarker281"/>upcoming panel, type <strong class="source-inline">mysql-conn</strong> to<a id="_idIndexMarker282"/> install <strong class="bold">mysql-connector</strong>. You will be able to see <strong class="bold">mysql-connector</strong>. Click <strong class="bold">Install Package</strong> to <span class="No-Break">install it:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer210">
<img alt="" height="528" src="image/Figure_8.31_B19195.jpg" width="915"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.31 – Installing mysql-connector</p>
<ol>
<li value="6">Once you install it, you will be able to see <strong class="bold">mysql-connector</strong> within the <span class="No-Break">installed packages:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer211">
<img alt="" height="404" src="image/Figure_8.32_B19195.jpg" width="975"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.32 – Package list</p>
<ol>
<li value="7">Copy and<a id="_idIndexMarker283"/> paste the following code to read data from <a id="_idIndexMarker284"/><span class="No-Break">the database:</span><pre class="console">
import mysql.connector
#rds settings
rds_host = "database-1.********.us-east-1.rds.amazonaws.com"
name = "**min"
password = "*****234"
db_name = "address"
if __name__ == '__main__':
    conn = mysql.connector.connect(host=rds_host, user=name, passwd=password, database=db_name, port=3306)
    cursor = conn.cursor()
    cursor.execute("select * from address")
    data = cursor.fetchall()
    print(data)</pre></li>
</ol>
<p>The preceding<a id="_idIndexMarker285"/> code block connects to the RDS database and<a id="_idIndexMarker286"/> reads from the address table by executing the <strong class="source-inline">select * from address</strong> query. For <strong class="source-inline">rds_host</strong>, <strong class="source-inline">name</strong>, and <strong class="source-inline">password</strong>, please fill out your database host and credentials:</p>
<div>
<div class="IMG---Figure" id="_idContainer212">
<img alt="" height="408" src="image/Figure_8.33_B19195.jpg" width="894"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.33 – Query from the database</p>
<ol>
<li value="8">When you click <strong class="bold">Run</strong>, you can see the results from <span class="No-Break">the database:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer213">
<img alt="" height="487" src="image/Figure_8.34_B19195.jpg" width="1075"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.34 – Results from the database</p>
<p>Congrats! You are <a id="_idIndexMarker287"/>able to read data from the AWS database via Python. You<a id="_idIndexMarker288"/> can also extend your query by implementing <strong class="source-inline">insert</strong> and <strong class="source-inline">update</strong> queries. In this topic, we learned how to make a database operation <span class="No-Break">via Python.</span></p>
<h1 id="_idParaDest-87">Secrets Manager</h1>
<p><strong class="bold">Secrets Manager</strong> is <a id="_idIndexMarker289"/>an AWS service that allows you to manage and retrieve database credentials, which can be helpful when using a database. Let’s learn how to use <span class="No-Break">Secrets Manager:</span></p>
<ol>
<li>Open <strong class="bold">Secrets Manager</strong> via <span class="No-Break">the</span><span class="No-Break"><a id="_idIndexMarker290"/></span><span class="No-Break"> console:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer214">
<img alt="" height="362" src="image/Figure_8.35_B19195.jpg" width="1060"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.35 – Opening Secrets Manager</p>
<ol>
<li value="2">Click <a id="_idIndexMarker291"/>the <strong class="bold">Store a new </strong><span class="No-Break"><strong class="bold">secret</strong></span><span class="No-Break"> button:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer215">
<img alt="" height="257" src="image/Figure_8.36_B19195.jpg" width="1098"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.36 – Storing a new secret</p>
<ol>
<li value="3">Select the secret type that you want to store a secret for, and fill out the username and password. In this case, we will select the <strong class="bold">database-1</strong> instance. After filling out the details, <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Next</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer216">
<img alt="" height="1101" src="image/Figure_8.37_B19195.jpg" width="927"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.37 – Filling out the details</p>
<ol>
<li value="4">You need to<a id="_idIndexMarker292"/> give a name to the upcoming path in the <strong class="bold">Secret </strong><span class="No-Break"><strong class="bold">name</strong></span><span class="No-Break"> textbox:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer217">
<img alt="" height="1089" src="image/Figure_8.38_B19195.jpg" width="980"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.38 – Naming the secret</p>
<ol>
<li value="5">On the next <a id="_idIndexMarker293"/>screen, you will see the options for using this secret with different programming languages. Click <strong class="bold">Store</strong> to <span class="No-Break">finalize it:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer218">
<img alt="" height="814" src="image/Figure_8.39_B19195.jpg" width="1043"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.39 – Store secret</p>
<ol>
<li value="6">As the <a id="_idIndexMarker294"/>final step, you will see the secret on <span class="No-Break">the list:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer219">
<img alt="" height="349" src="image/Figure_8.40_B19195.jpg" width="829"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.40 – List of secrets</p>
<p>Congrats! You <a id="_idIndexMarker295"/>have learned how to create and store secrets on the cloud in a <span class="No-Break">secure way.</span></p>
<h1 id="_idParaDest-88">Summary</h1>
<p>In this chapter, we learned about AWS RDS, which is used to create a relational database on the cloud. You can create your database in an efficient way. The point to note is that you have the possibility to create different databases, including MySQL, Microsoft SQL, and PostgreSQL. In this chapter, we have created an RDS instance on the cloud and run a Python application to make a read operation. In the following chapter, we will take a look at creating an API <span class="No-Break">in AWS.</span></p>
</div>
</div></body></html>