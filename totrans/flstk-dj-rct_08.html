<html><head></head><body>
		<div id="_idContainer098">
			<h1 id="_idParaDest-158" class="chapter-number"><a id="_idTextAnchor164"/>8</h1>
			<h1 id="_idParaDest-159"><a id="_idTextAnchor165"/>Social Media Posts</h1>
			<p>Social media already has authentication added on the frontend side. We can now authenticate the user through registration or login, fetch the user data, and show it. Now that we can store JWT tokens, we can make requests to the API for any protected resources, and we will start with the <span class="No-Break"><strong class="source-inline">post</strong></span><span class="No-Break"> resource.</span></p>
			<p>In this chapter, we’ll focus on <strong class="bold">CRUD</strong> operations on posts. We’ll implement listing, creating, updating, and deleting post features. You will learn how to create and manage a Modal in React, how to handle a form from validation to submission, and how to design and integrate components into a <span class="No-Break">React page.</span></p>
			<p>This chapter will cover the <span class="No-Break">following topics:</span></p>
			<ul>
				<li>Listing posts in <span class="No-Break">a feed</span></li>
				<li>Creating a post using <span class="No-Break">a form</span></li>
				<li>Editing and deleting <span class="No-Break">a post</span></li>
				<li>Liking <span class="No-Break">a post</span></li>
			</ul>
			<h1 id="_idParaDest-160"><a id="_idTextAnchor166"/>Technical requirements</h1>
			<p>Make sure to have VS Code and an updated browser installed and configured on your machine. You can find the code of this chapter <span class="No-Break">at </span><a href="https://github.com/PacktPublishing/Full-stack-Django-and-React/tree/chap8"><span class="No-Break">https://github.com/PacktPublishing/Full-stack-Django-and-React/tree/chap8</span></a><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-161"><a id="_idTextAnchor167"/>Creating the UI</h1>
			<p>The REST API is ready to<a id="_idIndexMarker479"/> accept requests and list the API. For the next steps, ensure that the Django server is running on the machine at port <strong class="source-inline">localhost:8000</strong>. The first step is implementing a post feed with a ready design and UI. Before coding the components for reading, creating, updating, and deleting a component, we need to analyze the UI and also make sure we have the right configurations and components to ease the development with React. We will mostly build the navigation bar and <span class="No-Break">the layout.</span></p>
			<p>Here’s the feed UI of the <span class="No-Break">home page:</span></p>
			<div>
				<div id="_idContainer084" class="IMG---Figure">
					<img src="image/Figure_8.01_B18221.jpg" alt="Figure 8.1 – Feed UI wireframe"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.1 – Feed UI wireframe</p>
			<p>In the following figure, we<a id="_idIndexMarker480"/> have another illustration representing the UI and the page’s structure. We are using flex columns, and we’ll use Bootstrap flex components to design <span class="No-Break">the page:</span></p>
			<div>
				<div id="_idContainer085" class="IMG---Figure">
					<img src="image/Figure_8.02_B18221.jpg" alt="Figure 8.2 – Wireframe"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.2 – Wireframe</p>
			<p>The navigation bar will <a id="_idIndexMarker481"/>be available on other pages of the React application, and by making the navigation bar a component, it’ll be reused. We can make the integration of the navigation bar easier by having a <strong class="source-inline">Layout</strong> component that will be used when building the pages. Let’s start by adding the navigation <span class="No-Break">bar component.</span></p>
			<h2 id="_idParaDest-162"><a id="_idTextAnchor168"/>Adding the NavBar component</h2>
			<p>The <strong class="source-inline">NavBar</strong> component, or <a id="_idIndexMarker482"/>the navigation bar component, should<a id="_idIndexMarker483"/> help to quickly navigate the UI. Here’s an screenshot of the <span class="No-Break"><strong class="source-inline">NavBar</strong></span><span class="No-Break"> component:</span></p>
			<div>
				<div id="_idContainer086" class="IMG---Figure">
					<img src="image/Figure_8.03_B18221.jpg" alt="Figure 8.3 – Navbar"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.3 – Navbar</p>
			<p>The <strong class="source-inline">NavBar</strong> will have <span class="No-Break">three links:</span></p>
			<ul>
				<li>A link to redirect to the feed <span class="No-Break">page (</span><span class="No-Break"><strong class="bold">1</strong></span><span class="No-Break">)</span></li>
				<li>A link to redirect to the profile <span class="No-Break">page (</span><span class="No-Break"><strong class="bold">2</strong></span><span class="No-Break">)</span></li>
				<li>A link to log <span class="No-Break">out (</span><span class="No-Break"><strong class="bold">3</strong></span><span class="No-Break">)</span></li>
			</ul>
			<p>Here’s a simple wireframe to better illustrate where the links <span class="No-Break">will go.</span></p>
			<div>
				<div id="_idContainer087" class="IMG---Figure">
					<img src="image/Figure_8.04_B18221.jpg" alt="Figure 8.4 – Wireframe of the navbar"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.4 – Wireframe of the navbar</p>
			<p>Let’s add the <a id="_idIndexMarker484"/>component. Follow these steps to <span class="No-Break">do so:</span></p>
			<ol>
				<li>Inside the <strong class="source-inline">src/components/</strong> directory, add a new file called <strong class="source-inline">Navbar.jsx</strong>. This file will contain the <a id="_idIndexMarker485"/>code for the <strong class="source-inline">NavBar</strong> component. Bootstrap already provides a <strong class="source-inline">NavBar</strong> component we can use. Let’s start with the component definition and the <span class="No-Break">necessary imports:</span></li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/Navbar.jsx</p>
			<pre class="source-code">
import React from "react";
import { randomAvatar } from "../utils";
import { Navbar, Container, Image, NavDropdown, Nav } from "react-bootstrap";
import { useNavigate } from "react-router-dom";
...</pre>
			<ol>
				<li value="2">With the already written function, we can add the <strong class="source-inline">NavBar</strong> component and style it. <strong class="source-inline">react-bootstrap</strong> provides components that we can use to make the coding of our components faster. The props that the components require make the customization of these <span class="No-Break">components easier:</span></li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/Navbar.jsx</p>
			<pre class="source-code">
...
function Navigationbar() {
 return (
   &lt;Navbar bg="primary" variant="dark"&gt;
     &lt;Container&gt;
       &lt;Navbar.Brand className="fw-bold" href="#home"&gt;
         Postagram
       &lt;/Navbar.Brand&gt;
       &lt;Navbar.Collapse
         className="justify-content-end"&gt;
         &lt;Nav&gt;
           &lt;NavDropdown
             title={
               &lt;Image
                 src={randomAvatar()}
                 roundedCircle
                 width={36}
                 height={36}
               /&gt;
             }
           &gt;
             &lt;NavDropdown.Item href="#"&gt;Profile
             &lt;/NavDropdown.Item&gt;
             &lt;NavDropdown.Item onClick={handleLogout}&gt;
               Logout&lt;/NavDropdown.Item&gt;
           &lt;/NavDropdown&gt;
         &lt;/Nav&gt;
       &lt;/Navbar.Collapse&gt;
     &lt;/Container&gt;
   &lt;/Navbar&gt;
 );
}
export default Navigationbar;</pre>
			<ol>
				<li value="3">Let’s add the<a id="_idIndexMarker486"/> function that handles <span class="No-Break">the</span><span class="No-Break"><a id="_idIndexMarker487"/></span><span class="No-Break"> logout:</span></li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/Navbar.jsx</p>
			<pre class="source-code">
...
function Navigationbar() {
 const navigate = useNavigate();
 const handleLogout = () =&gt; {
   localStorage.removeItem("auth");
   navigate("/login/");
 };
...</pre>
			<p>I will use a website that generates random avatars for the avatar. In the next chapter, we’ll do a little exercise to add an upload profile picture feature, but the image generator will do the work for <span class="No-Break">the moment.</span></p>
			<ol>
				<li value="4">In the <strong class="source-inline">src</strong> directory, add a new file called <strong class="source-inline">utils.js</strong>. This file will contain functions that we’ll reuse in the <span class="No-Break">React application:</span></li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/utils.js</p>
			<pre class="source-code">
export const randomAvatar = () =&gt;
 `https://i.pravatar.cc/300?img=${Math.floor(Math.random() * 60) + 1}`;</pre>
			<p>The <strong class="source-inline">pravatar</strong> service supports<a id="_idIndexMarker488"/> parameters in the URL and has over 60 images. We are using the Math library to generate a random number<a id="_idIndexMarker489"/> representing the image’s ID. We can now write the <span class="No-Break"><strong class="source-inline">Layout</strong></span><span class="No-Break"> component.</span></p>
			<h2 id="_idParaDest-163"><a id="_idTextAnchor169"/>Adding the Layout component</h2>
			<p>A good React project has visual<a id="_idIndexMarker490"/> consistency but should also come with less repetition of code. For example, the navigation bar on this React project will be <a id="_idIndexMarker491"/>present on the home page but also on the profile page. When developing in HTML and CSS directly, we would have repeated the same piece of code for the navigation bar, but we can avoid the repetition using React by creating a <span class="No-Break"><strong class="source-inline">Layout</strong></span><span class="No-Break"> component.</span></p>
			<p>In the <strong class="source-inline">src/components</strong> directory, add a file called <strong class="source-inline">Layout.jsx</strong>. This file will contain the code for the <span class="No-Break"><strong class="source-inline">Layout</strong></span><span class="No-Break"> component:</span></p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/Layout.jsx</p>
			<pre class="source-code">
import React from "react";
import Navigationbar from "./Navbar";
function Layout(props) {
 return (
   &lt;div&gt;
     &lt;Navigationbar /&gt;
     &lt;div className="container m-5"&gt;{props.children}&lt;/div&gt;
   &lt;/div&gt;
 );
}
export default Layout;</pre>
			<p>We have a new syntax here: <strong class="source-inline">children</strong>. In React, <strong class="source-inline">children</strong> is used for displaying whatever you include between<a id="_idIndexMarker492"/> the opening and closing tags when<a id="_idIndexMarker493"/> invoking a component. Here’s a simple example with an <span class="No-Break">image component:</span></p>
			<pre class="console">
const Picture = (props) =&gt; {
  return (
    &lt;div&gt;
      &lt;img src=""/&gt;
      {props.children}
    &lt;/div&gt;
  )
}</pre>
			<p>The component can then be used, and we can add content or <span class="No-Break">other components:</span></p>
			<pre class="console">
render () {
  return (
    &lt;div className='container'&gt;
      &lt;Picture&gt;
          &lt;p&gt;This a children element.&lt;/p&gt;
      &lt;/Picture&gt;
    &lt;/div&gt;
  )
}</pre>
			<p>Whenever the <strong class="source-inline">Picture</strong> component is invoked, <strong class="source-inline">props.children</strong> will also be displayed, which is just a reference to the component’s opening and closing tags. In our context, <strong class="source-inline">props.children</strong> will contain mostly the content of the pages of the <span class="No-Break">React application.</span></p>
			<p>For example, on the home<a id="_idIndexMarker494"/> page, we have posts and profiles listed; these elements will be children of the <strong class="source-inline">Layout</strong> component. Without further ado, let’s<a id="_idIndexMarker495"/> use the <span class="No-Break"><strong class="source-inline">Layout</strong></span><span class="No-Break"> component.</span></p>
			<h2 id="_idParaDest-164"><a id="_idTextAnchor170"/>Using the Layout component on the home page</h2>
			<p>Inside <strong class="source-inline">Home.jsx</strong>, we’ll rewrite the<a id="_idIndexMarker496"/> code to <a id="_idIndexMarker497"/>use the <strong class="source-inline">Layout</strong> component. Here’s the <a id="_idIndexMarker498"/><span class="No-Break">new code:</span></p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/pages/Home.jsx</p>
			<pre class="source-code">
import React from "react";
import Layout from "../components/Layout";
function Home() {
 return (
   &lt;Layout&gt;
   &lt;/Layout&gt;
 );
}
export default Home;</pre>
			<p>Great. Let’s start by adding the input to create a new post, as shown in <span class="No-Break"><em class="italic">Figure 8</em></span><span class="No-Break"><em class="italic">.2</em></span><span class="No-Break">.</span></p>
			<h2 id="_idParaDest-165"><a id="_idTextAnchor171"/>Creating a post</h2>
			<p>To create and add posts, follow <span class="No-Break">these steps:</span></p>
			<ol>
				<li value="1">In <strong class="source-inline">src/components</strong>, add a new directory called <strong class="source-inline">posts</strong>. This directory will contain all <a id="_idIndexMarker499"/>components used for the post feature. We’ll have components to create a post, display a post, and update <span class="No-Break">a post.</span></li>
				<li>Inside the newly<a id="_idIndexMarker500"/> created directory, add a file called <strong class="source-inline">CreatePost.jsx</strong>. This file will contain the code for the logic and the UI to make <span class="No-Break">a post.</span></li>
				<li>What we have here is a UI component called <strong class="source-inline">Modal</strong>. <strong class="source-inline">react-bootstrap</strong> provides a modal-ready element that we can easily customize for our needs. Let’s start by adding the needed imports and defining the <span class="No-Break">component function:</span></li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/post/CreatePost.jsx</p>
			<pre class="source-code">
import React, { useState } from "react";
import { Button, Modal, Form } from "react-bootstrap";
import axiosService from "../../helpers/axios";
import { getUser } from "../../hooks/user.actions";
function CreatePost()
  return ()
};
export default CreatePost;</pre>
			<ol>
				<li value="4">The input for the post creation will be within the <strong class="source-inline">Modal</strong> component. As we did earlier, we will also add methods and state management for the form. But first, let’s write the modal and the <span class="No-Break">clickable input:</span></li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/post/CreatePost.jsx</p>
			<pre class="source-code">
…
function CreatePost() {
 const [show, setShow] = useState(false);
 const handleClose = () =&gt; setShow(false);
 const handleShow = () =&gt; setShow(true);
 return (
   &lt;&gt;
     &lt;Form.Group className="my-3 w-75"&gt;
       &lt;Form.Control
         className="py-2 rounded-pill border-primary
                    text-primary"
         type="text"
         placeholder="Write a post"
         onClick={handleShow}
       /&gt;
     &lt;/Form.Group&gt;
     {/*Add modal code here*/}
   &lt;/&gt;
 );
}
export default CreatePost;</pre>
			<ol>
				<li value="5">We are first adding the<a id="_idIndexMarker501"/> input that will trigger the Modal to be displayed. A click on the modal will set the <strong class="source-inline">show</strong> state to <strong class="source-inline">True</strong>, the state that is used for opening the modal. Let’s add<a id="_idIndexMarker502"/> the code for <span class="No-Break">the modal:</span></li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/post/CreatePost.jsx</p>
			<pre class="source-code">
...
     &lt;Modal show={show} onHide={handleClose}&gt;
       &lt;Modal.Header closeButton className="border-0"&gt;
         &lt;Modal.Title&gt;Create Post&lt;/Modal.Title&gt;
       &lt;/Modal.Header&gt;
       &lt;Modal.Body className="border-0"&gt;
         &lt;Form noValidate validated={validated}
           onSubmit={handleSubmit}&gt;
           &lt;Form.Group className="mb-3"&gt;
             &lt;Form.Control
               name="body"
               value={form.body}
               onChange={(e) =&gt; setForm({ ...form,
                 body: e.target.value })}
               as="textarea"
               rows={3}
             /&gt;
           &lt;/Form.Group&gt;
         &lt;/Form&gt;
       &lt;/Modal.Body&gt;
       &lt;Modal.Footer&gt;
         &lt;Button variant="primary"
           onClick={handleSubmit}
           disabled={form.body === undefined}&gt;
           Post
         &lt;/Button&gt;
       &lt;/Modal.Footer&gt;
     &lt;/Modal&gt;
...</pre>
			<ol>
				<li value="6">The UI for the <a id="_idIndexMarker503"/>modal is created. We need now to add the <strong class="source-inline">handleSubmit</strong> function and the other<a id="_idIndexMarker504"/> logic for the <span class="No-Break">form handling:</span></li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/post/CreatePost.jsx</p>
			<pre class="source-code">
function CreatePost() {
...
 const [validated, setValidated] = useState(false);
 const [form, setForm] = useState({});
 const user = getUser();
...
 const handleSubmit = (event) =&gt; {
   event.preventDefault();
   const createPostForm = event.currentTarget;
   if (createPostForm.checkValidity() === false) {
     event.stopPropagation();
   }
   setValidated(true);
   const data = {
     author: user.id,
     body: form.body,
   };
   axiosService
     .post("/post/", data)
     .then(() =&gt; {
       handleClose();
       setForm({});
     })
     .catch((error) =&gt; {
       console.log(error);
     });
 };
...</pre>
			<div>
				<div id="_idContainer088" class="IMG---Figure">
					<img src="image/Figure_8.05_B18221.jpg" alt="Figure 8.5 – Create Post component"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.5 – Create Post component</p>
			<p>We are nearly done, but we<a id="_idIndexMarker505"/> need an essential feature for every action, such as form handling. We need to send feedback to the user to tell them whether their request <a id="_idIndexMarker506"/>has passed. In our context, when a user creates a post, we’ll show a success toast or an <span class="No-Break">error toast:</span></p>
			<div>
				<div id="_idContainer089" class="IMG---Figure">
					<img src="image/Figure_8.06_B18221.jpg" alt="Figure 8.6 – A successful toast"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.6 – A successful toast</p>
			<p>The toast will be reused for post deletion and also updating. It will also be used for comment creation, modification, and deletion, as well as the profile modification that we will add later. We will add the <strong class="source-inline">Toast</strong> component in the <span class="No-Break">next section.</span></p>
			<h2 id="_idParaDest-166"><a id="_idTextAnchor172"/>Adding the Toast component</h2>
			<p>Let’s quickly create a <a id="_idIndexMarker507"/>component called <strong class="source-inline">Toaster</strong> that we will use show toast in the <span class="No-Break">React application.</span></p>
			<p>In <strong class="source-inline">src/components</strong>, create a<a id="_idIndexMarker508"/> new file called <strong class="source-inline">Toaster.jsx</strong>. This file will contain the code for the <span class="No-Break"><strong class="source-inline">Toaster</strong></span><span class="No-Break"> component:</span></p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/Toaster.jsx</p>
			<pre class="source-code">
import React from "react";
import { Toast, ToastContainer } from "react-bootstrap";
function Toaster(props) {
 const { showToast, title, message, onClose, type } =
   props;
 return (
   &lt;ToastContainer position="top-center"&gt;
     &lt;Toast onClose={onClose} show={showToast} delay={3000}
       autohide bg={type}&gt;
       &lt;Toast.Header&gt;
         &lt;strong className="me-auto"&gt;{title}&lt;/strong&gt;
       &lt;/Toast.Header&gt;
       &lt;Toast.Body&gt;
         &lt;p className="text-white"&gt;{message}&lt;/p&gt;
       &lt;/Toast.Body&gt;
     &lt;/Toast&gt;
   &lt;/ToastContainer&gt;
 );
}
export default Toaster;</pre>
			<p>The <strong class="source-inline">Toaster</strong> component takes <span class="No-Break">some props:</span></p>
			<ul>
				<li><strong class="source-inline">showToast</strong>: The Boolean that is used to show the toast or not. Ideally, depending on the output we receive from a request on the server, we’ll set the state to <strong class="source-inline">true</strong>, which<a id="_idIndexMarker509"/> will show <span class="No-Break">the toast.</span></li>
				<li><strong class="source-inline">title</strong>: This represents the title of <span class="No-Break">the toast.</span></li>
				<li><strong class="source-inline">message</strong>: This conveys the message we’ll be showing in <span class="No-Break">the toast.</span></li>
				<li><strong class="source-inline">onClose</strong>: The function that handles the closing of the toast. This function is essential; otherwise, the toast will <span class="No-Break">never disappear.</span></li>
				<li><strong class="source-inline">type</strong>: This represents the type of toast to show. In our context, we’ll either use <strong class="source-inline">success</strong> <span class="No-Break">or </span><span class="No-Break"><strong class="source-inline">danger</strong></span><span class="No-Break">.</span></li>
			</ul>
			<p>Let’s import this component in <strong class="source-inline">CreatePost.jsx</strong> and <span class="No-Break">use it.</span></p>
			<h2 id="_idParaDest-167"><a id="_idTextAnchor173"/>Adding toaster to post creation</h2>
			<p>In the <strong class="source-inline">CreatePost.jsx</strong> file, we will add new <a id="_idIndexMarker510"/>states that we will pass as props to the <span class="No-Break"><strong class="source-inline">Toaster</strong></span><span class="No-Break"> component:</span></p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/post/CreatePost.jsx</p>
			<pre class="source-code">
…
import Toaster from "../Toaster";
function CreatePost() {
...
 const [showToast, setShowToast] = useState(false);
 const [toastMessage, setToastMessage] = useState("");
 const [toastType, setToastType] = useState("");
...
 const handleSubmit = (event) =&gt; {
   ...
   axiosService
     .post("/post/", data)
     .then(() =&gt; {
       handleClose();
       setToastMessage("Post created 🚀");
       setToastType("success");
       setForm({});
       setShowToast(true);
     })
     .catch(() =&gt; {
       setToastMessage("An error occurred.");
       setToastType("danger");
     });
 };</pre>
			<p>We can import the <strong class="source-inline">Toaster</strong> component<a id="_idIndexMarker511"/> and pass the newly added states <span class="No-Break">as props:</span></p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/post/CreatePost.jsx</p>
			<pre class="source-code">
...
   &lt;/Modal&gt;
     &lt;Toaster
       title="Post!"
       message={toastMessage}
       showToast={showToast}
       type={toastType}
       onClose={() =&gt; setShowToast(false)}
     /&gt;
   &lt;/&gt;
...</pre>
			<p>And we are done writing the <strong class="source-inline">CreatePost</strong> component. For the next step, we need to integrate it into the<a id="_idIndexMarker512"/> <span class="No-Break">home page.</span></p>
			<h2 id="_idParaDest-168"><a id="_idTextAnchor174"/>Adding the CreatePost component to the home page</h2>
			<p>The <strong class="source-inline">CreatePost</strong> component is<a id="_idIndexMarker513"/> ready now, and we <a id="_idIndexMarker514"/>can use it. First, import it<a id="_idIndexMarker515"/> into the <strong class="source-inline">Home.jsx</strong> file and modify <span class="No-Break">the UI.</span></p>
			<p>The home page will have <span class="No-Break">two parts:</span></p>
			<ul>
				<li>The first part will contain the list of posts (<strong class="bold">1</strong> in <span class="No-Break"><em class="italic">Figure 8</em></span><span class="No-Break"><em class="italic">.7</em></span><span class="No-Break">)</span></li>
				<li>The second part will include a list of five profiles (<strong class="bold">2</strong> in <span class="No-Break"><em class="italic">Figure 8</em></span><span class="No-Break"><em class="italic">.7</em></span><span class="No-Break">)</span></li>
			</ul>
			<div>
				<div id="_idContainer090" class="IMG---Figure">
					<img src="image/Figure_8.07_B18221.jpg" alt="Figure 8.7 – Structure of the home page"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.7 – Structure of the home page</p>
			<p>We can achieve the result quickly by using rows and columns components provided by <strong class="source-inline">react-bootstrap</strong>. We won’t <a id="_idIndexMarker516"/>focus on the<a id="_idIndexMarker517"/> second part (listing the profiles) for the moment. Let’s ensure we have all <strong class="bold">CRUD</strong> operations for<a id="_idIndexMarker518"/> the <span class="No-Break">post feature:</span></p>
			<ol>
				<li value="1">Inside the <strong class="source-inline">Home.jsx</strong> file, add the following content. We’ll start by importing and adding <span class="No-Break">the rows:</span></li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/pages/Home.jsx</p>
			<pre class="source-code">
import React from "react";
import Layout from "../components/Layout";
import { Row, Col, Image } from "react-bootstrap";
import { randomAvatar } from "../utils";
import useSWR from "swr";
import { fetcher } from "../helpers/axios";
import { getUser } from "../hooks/user.actions";
import CreatePost from "../components/posts/CreatePost";
function Home() {
 const user = getUser();
 if (!user) {
   return &lt;div&gt;Loading!&lt;/div&gt;;
 }
 return (
   &lt;Layout&gt;
     &lt;Row className="justify-content-evenly"&gt;
       &lt;Col sm={7}&gt;
         &lt;Row className="border rounded
           align-items-center"&gt;
           &lt;Col className="flex-shrink-1"&gt;
             &lt;Image
               src={randomAvatar()}
               roundedCircle
               width={52}
               height={52}
               className="my-2"
             /&gt;
           &lt;/Col&gt;
           &lt;Col sm={10} className="flex-grow-1"&gt;
             &lt;CreatePost /&gt;
           &lt;/Col&gt;
         &lt;/Row&gt;
       &lt;/Col&gt;
     &lt;/Row&gt;
   &lt;/Layout&gt;
 );
}
export default Home;</pre>
			<ol>
				<li value="2">Great! Make sure<a id="_idIndexMarker519"/> to save the<a id="_idIndexMarker520"/> changes, start the<a id="_idIndexMarker521"/> server, and go to the home page. You’ll have something similar <span class="No-Break">to this:</span></li>
			</ol>
			<div>
				<div id="_idContainer091" class="IMG---Figure">
					<img src="image/Figure_8.08_B18221.jpg" alt="Figure 8.8 – Create Post UI"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.8 – Create Post UI</p>
			<ol>
				<li value="3">Click on the<a id="_idIndexMarker522"/> input, and a modal will show up. Type anything you want in the input and submit it. The <a id="_idIndexMarker523"/>modal will close, and<a id="_idIndexMarker524"/> you’ll have a toast appearing at the top center of <span class="No-Break">the page:</span></li>
			</ol>
			<div>
				<div id="_idContainer092" class="IMG---Figure">
					<img src="image/Figure_8.09_B18221.jpg" alt="Figure 8.9 – Toast after successful post creation"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.9 – Toast after successful post creation</p>
			<p>Great! We can now create posts using our React application. To make it possible, we have created a <strong class="source-inline">Modal</strong> component and a form with React Bootstrap to handle data validation and submission. And because feedback is an important aspect of user experience, we have added a toaster with React Bootstrap and integrated it with the <strong class="source-inline">useContext</strong> Hook to notify the user of the result of <span class="No-Break">the requests.</span></p>
			<p>The next step is to list all the<a id="_idIndexMarker525"/> posts and add actions such as deletion <span class="No-Break">and modification.</span></p>
			<h1 id="_idParaDest-169"><a id="_idTextAnchor175"/>Listing posts on the home page</h1>
			<p>Now that users can create posts, we need to list the posts on the home page but also allow the user to access them. This<a id="_idIndexMarker526"/> will require the creation of a component to display information about a post. As shown in <span class="No-Break"><em class="italic">Figure 8</em></span><em class="italic">.1</em>, under the <strong class="bold">Write a post</strong> input, we have a list of posts. The home page structure is already added, so we need to add a component that will handle the logic behind showing information about <span class="No-Break">a post.</span></p>
			<p>Here’s the flow to list the posts on the <span class="No-Break">home page:</span></p>
			<ul>
				<li>We use the <strong class="source-inline">swr</strong> library to fetch a list <span class="No-Break">of posts</span></li>
				<li>We loop through the list of posts and then pass a post as props to a component called <strong class="source-inline">Post</strong>, which will show data about <span class="No-Break">a post</span></li>
			</ul>
			<p>Before starting to fetch data, let’s create the <span class="No-Break"><strong class="source-inline">Post</strong></span><span class="No-Break"> component.</span></p>
			<h2 id="_idParaDest-170"><a id="_idTextAnchor176"/>Writing the Post component</h2>
			<p>To create a <strong class="source-inline">Post</strong> component, follow <span class="No-Break">these</span><span class="No-Break"><a id="_idIndexMarker527"/></span><span class="No-Break"> steps:</span></p>
			<ol>
				<li value="1">Inside the <strong class="source-inline">src/components/post/</strong> directory, create a new file called <strong class="source-inline">Post.jsx</strong>. This file will contain the logic to show post data and logic such as like or remove like, deletion, and modification. Here’s a wireframe of the <span class="No-Break"><strong class="source-inline">Post</strong></span><span class="No-Break"> component:</span></li>
			</ol>
			<div>
				<div id="_idContainer093" class="IMG---Figure">
					<img src="image/Figure_8.10_B18221.jpg" alt="Figure 8.10 – Post component"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.10 – Post component</p>
			<ol>
				<li value="2">To make things faster, we will work with<a id="_idIndexMarker528"/> the <strong class="source-inline">Card</strong> component provided by <strong class="source-inline">react-bootstrap</strong>. The <strong class="source-inline">Card</strong> component comes with a structure containing a title, body, <span class="No-Break">and footer:</span></li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/post/Post.jsx</p>
			<pre class="source-code">
import React, { useState } from "react";
import { format } from "timeago.js";
import {
 LikeFilled,
 CommentOutlined,
 LikeOutlined,
} from "@ant-design/icons";
import { Image, Card, Dropdown } from "react-bootstrap";
import { randomAvatar } from "../../utils";
function Post(props) {
 const { post, refresh } = props;
 const handleLikeClick = (action) =&gt; {
   axiosService
     .post(`/post/${post.id}/${action}/`)
     .then(() =&gt; {
       refresh();
     })
     .catch((err) =&gt; console.error(err));
 };
 return (
   &lt;&gt;
     &lt;Card className="rounded-3 my-4"&gt;
      {/* Add card body here*/}
     &lt;/Card&gt;
   &lt;/&gt;
 );
}
export default Post;</pre>
			<p>The <strong class="source-inline">Post</strong> component <a id="_idIndexMarker529"/>accepts <span class="No-Break">two props:</span></p>
			<ul>
				<li>The <strong class="source-inline">post</strong> object containing data about <span class="No-Break">a post.</span></li>
				<li>The <strong class="source-inline">refresh</strong> function. This function will come from the SWR <strong class="source-inline">posts</strong> object, and SWR returns an object with a <strong class="source-inline">mutate</strong> method that can be used to trigger the fetching <span class="No-Break">of data.</span></li>
			</ul>
			<ol>
				<li value="3">We also profited from adding the <strong class="source-inline">handleLikeClick</strong> function. Two actions can be passed to the function: either <strong class="source-inline">like</strong> or <strong class="source-inline">remove_like</strong>. If the request succeeds, we can refresh the posts. Great! Let’s start by adding the <strong class="source-inline">Card</strong> body. It’ll contain the avatar<a id="_idIndexMarker530"/> of the author of the post, the name, and the time elapsed since the creation of <span class="No-Break">the post:</span></li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/post/Post.jsx</p>
			<pre class="source-code">
…
&lt;Card.Body&gt;
         &lt;Card.Title className="d-flex flex-row
           justify-content-between"&gt;
           &lt;div className="d-flex flex-row"&gt;
             &lt;Image
               src={randomAvatar()}
               roundedCircle
               width={48}
               height={48}
               className="me-2 border border-primary
                          border-2"
             /&gt;
             &lt;div className="d-flex flex-column
               justify-content-start
               align-self-center mt-2"&gt;
               &lt;p className="fs-6 m-0"&gt;
                 {post.author.name}&lt;/p&gt;
               &lt;p className="fs-6 fw-lighter"&gt;
                 &lt;small&gt;{format(post.created)}&lt;/small&gt;
               &lt;/p&gt;
             &lt;/div&gt;
           &lt;/div&gt;
         &lt;/Card.Title&gt;
       &lt;/Card.Body&gt;
...</pre>
			<ol>
				<li value="4">Go ahead and add the body<a id="_idIndexMarker531"/> of the post and the <span class="No-Break">likes count:</span></li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/post/Post.jsx</p>
			<pre class="source-code">
…
         &lt;/Card.Title&gt;
         &lt;Card.Text&gt;{post.body}&lt;/Card.Text&gt;
         &lt;div className="d-flex flex-row"&gt;
           &lt;LikeFilled
             style={{
               color: "#fff",
               backgroundColor: "#0D6EFD",
               borderRadius: "50%",
               width: "18px",
               height: "18px",
               fontSize: "75%",
               padding: "2px",
               margin: "3px",
             }}
           /&gt;
           &lt;p className="ms-1 fs-6"&gt;
             &lt;small&gt;{post.likes_count} like&lt;/small&gt;
           &lt;/p&gt;
         &lt;/div&gt;
       &lt;/Card.Body&gt;
...</pre>
			<ol>
				<li value="5">We can now move to the <strong class="source-inline">Card</strong> footer containing the like and comment UI. Let’s start by adding the <strong class="bold">Like </strong>icon followed <a id="_idIndexMarker532"/><span class="No-Break">by text:</span></li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/post/Post.jsx</p>
			<pre class="source-code">
...
       &lt;/Card.Body&gt;
       &lt;Card.Footer className="d-flex bg-white w-50
         justify-content-between border-0"&gt;
         &lt;div className="d-flex flex-row"&gt;
           &lt;LikeOutlined
             style={{
               width: "24px",
               height: "24px",
               padding: "2px",
               fontSize: "20px",
               color: post.liked ? "#0D6EFD" :
                 "#C4C4C4",
             }}
             onClick={() =&gt; {
               if (post.liked) {
                 handleLikeClick("remove_like");
               } else {
                 handleLikeClick("like");
               }
             }}
           /&gt;
           &lt;p className="ms-1"&gt;
             &lt;small&gt;Like&lt;/small&gt;
           &lt;/p&gt;
         &lt;/div&gt;
 {/* Add comment icon here*/}
       &lt;/Card.Footer&gt;
     &lt;/Card&gt;
...</pre>
			<ol>
				<li value="6">Now go ahead and <a id="_idIndexMarker533"/>add the <strong class="bold">Comment</strong> icon followed by <span class="No-Break">the text:</span></li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/post/Post.jsx</p>
			<pre class="source-code">
...
         &lt;div className="d-flex flex-row"&gt;
           &lt;CommentOutlined
             style={{
               width: "24px",
               height: "24px",
               padding: "2px",
               fontSize: "20px",
               color: "#C4C4C4",
             }}
           /&gt;
           &lt;p className="ms-1 mb-0"&gt;
             &lt;small&gt;Comment&lt;/small&gt;
           &lt;/p&gt;
         &lt;/div&gt;
       &lt;/Card.Footer&gt;
...</pre>
			<p>The <strong class="source-inline">Post</strong> component is entirely <a id="_idIndexMarker534"/>written; we can use it on the home <span class="No-Break">page now.</span></p>
			<h2 id="_idParaDest-171"><a id="_idTextAnchor177"/>Adding the Post component to the home page</h2>
			<p>Let’s now<a id="_idIndexMarker535"/> add our <strong class="source-inline">Post</strong> component to <a id="_idIndexMarker536"/>the <span class="No-Break">home page.</span></p>
			<p>In the <strong class="source-inline">Home.jsx</strong> file, import the <span class="No-Break"><strong class="source-inline">Post</strong></span><span class="No-Break"> component:</span></p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/pages/Home.jsx</p>
			<pre class="source-code">
...
import { Post } from "../components/posts";
...</pre>
			<p>We can now use the components in the code by first fetching posts from <span class="No-Break">the server:</span></p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/pages/Home.jsx</p>
			<pre class="source-code">
...
function Home() {
 const posts = useSWR("/post/", fetcher, {
   refreshInterval: 10000,
 });
...</pre>
			<p>The <strong class="source-inline">useSWR</strong> Hook can accept some parameters, such as <strong class="source-inline">refreshInterval</strong>. Here, the returned data is<a id="_idIndexMarker537"/> refreshed every 10 seconds. We can now use these objects in <span class="No-Break">the UI:</span></p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/pages/Home.jsx</p>
			<pre class="source-code">
...
           &lt;Col sm={10} className="flex-grow-1"&gt;
             &lt;CreatePost /&gt;
           &lt;/Col&gt;
         &lt;/Row&gt;
         &lt;Row className="my-4"&gt;
           {posts.data?.results.map((post, index) =&gt; (
             &lt;Post key={index} post={post}
               refresh={posts.mutate} /&gt;
           ))}
         &lt;/Row&gt;
       &lt;/Col&gt;
...</pre>
			<p>Great! After adding the <strong class="source-inline">Post</strong> component to the home page, you should have a similar result <span class="No-Break">to this:</span></p>
			<div>
				<div id="_idContainer094" class="IMG---Figure">
					<img src="image/Figure_8.11_B18221.jpg" alt="Figure 8.11 – List of posts"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.11 – List of posts</p>
			<p>You can click on the <strong class="bold">Like</strong> icon and see what happens. Usually, the button color will change to blue, and the like count<a id="_idIndexMarker538"/> will increase. The behavior will be reversed if you click again on the <strong class="bold">Like</strong> icon. But the <strong class="source-inline">Post</strong> component has a <strong class="bold">More</strong> dropdown in the <span class="No-Break">top-right corner:</span></p>
			<div>
				<div id="_idContainer095" class="IMG---Figure">
					<img src="image/Figure_8.12_B18221.jpg" alt="Figure 8.12 – Adding the more dropdown"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.12 – Adding the more dropdown</p>
			<p><strong class="source-inline">react-bootstrap</strong> provides a <strong class="source-inline">Dropdown</strong> component we can use to achieve the same result. In the <strong class="source-inline">Post.jsx</strong> file, import the <strong class="source-inline">Dropdown</strong> component from <strong class="source-inline">react-bootstrap</strong>. As we will add the logic for post deletion, let’s also import the <span class="No-Break"><strong class="source-inline">Toaster</strong></span><span class="No-Break"> component:</span></p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/post/Post.jsx</p>
			<pre class="source-code">
import { Button, Modal, Form, Dropdown } from "react-bootstrap";
import Toaster from "../Toaster";
...</pre>
			<p>We then have to write the<a id="_idIndexMarker539"/> component we will pass to the <strong class="source-inline">Dropdown</strong> component as <span class="No-Break">the title:</span></p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/post/Post.jsx</p>
			<pre class="source-code">
…
const MoreToggleIcon = React.forwardRef(({ onClick }, ref) =&gt; (
 &lt;Link
   to="#"
   ref={ref}
   onClick={(e) =&gt; {
     e.preventDefault();
     onClick(e);
   }}
 &gt;
   &lt;MoreOutlined /&gt;
 &lt;/Link&gt;
));
function Post(props) {
...</pre>
			<p>We can now add the <strong class="source-inline">Dropdown</strong> component to the UI. We need to make it conditional so that only the author of the post can access these options. We will just retrieve the user from <strong class="source-inline">localStorage</strong> and<a id="_idIndexMarker540"/> compare <strong class="source-inline">user.id</strong> <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">author.id</strong></span><span class="No-Break">:</span></p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/post/Post.jsx</p>
			<pre class="source-code">
...
function Post(props) {
...
 const [showToast, setShowToast] = useState(false);
 const user = getUser();
...
 const handleDelete = () =&gt; {
   axiosService
     .delete(`/post/${post.id}/`)
     .then(() =&gt; {
       setShowToast(true);
       refresh();
     })
     .catch((err) =&gt; console.error(err));
 };
 return (
 ...</pre>
			<p>Let’s add the component UI and the <span class="No-Break"><strong class="source-inline">Toaster</strong></span><span class="No-Break"> component:</span></p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/post/Post.jsx</p>
			<pre class="source-code">
...
     &lt;Card className="rounded-3 my-4"&gt;
       &lt;Card.Body&gt;
         &lt;Card.Title className="d-flex flex-row
           justify-content-between"&gt;
           ...
           {user.name === post.author.name &amp;&amp; (
             &lt;div&gt;
               &lt;Dropdown&gt;
                 &lt;Dropdown.Toggle as={MoreToggleIcon}&gt;
                 &lt;/Dropdown.Toggle&gt;
                 &lt;Dropdown.Menu&gt;
                   &lt;Dropdown.Item&gt;Update&lt;/&gt;
                   &lt;Dropdown.Item
                     onClick={handleDelete}
                     className="text-danger"
                   &gt;
                     Delete
                   &lt;/Dropdown.Item&gt;
                 &lt;/Dropdown.Menu&gt;
               &lt;/Dropdown&gt;
             &lt;/div&gt;
           )}
         &lt;/Card.Title&gt;
         ...
     &lt;/Card&gt;
     &lt;Toaster
       title="Post!"
       message="Post deleted"
       type="danger"
       showToast={showToast}
       onClose={() =&gt; setShowToast(false)}
     /&gt;
   &lt;/&gt;
 );
}
export default Post;</pre>
			<p>The <strong class="source-inline">Dropdown</strong> component is<a id="_idIndexMarker541"/> also added to the toaster. Each time a post is deleted, a red toaster will pop up at the top center of <span class="No-Break">the page:</span></p>
			<div>
				<div id="_idContainer096" class="IMG---Figure">
					<img src="image/Figure_8.13_B18221.jpg" alt="Figure 8.13 – Deleting a post"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.13 – Deleting a post</p>
			<p>The user can now delete their own post and the functionality is accessible directly from the <strong class="source-inline">Post</strong> component. We have explored how to use the <strong class="source-inline">UseContex</strong> Hook again and also how to create a dropdown <span class="No-Break">using </span><span class="No-Break"><strong class="source-inline">react-bootstrap</strong></span><span class="No-Break">.</span></p>
			<p>The <strong class="bold">CRUD</strong> operations on the post feature are nearly done and only the update feature remains. It’s easy, and you will implement it as a small exercise, but I’ll add the necessary code and instructions <span class="No-Break">to</span><span class="No-Break"><a id="_idIndexMarker542"/></span><span class="No-Break"> follow.</span></p>
			<h1 id="_idParaDest-172"><a id="_idTextAnchor178"/>Updating a post</h1>
			<p>As mentioned earlier, the implementation of this<a id="_idIndexMarker543"/> feature is a simple exercise. Here’s the flow the user will typically follow when modifying <span class="No-Break">a post:</span></p>
			<ol>
				<li value="1">Click on the <strong class="bold">More</strong> <span class="No-Break">dropdown menu.</span></li>
				<li>Select the <span class="No-Break"><strong class="bold">Modify</strong></span><span class="No-Break"> option.</span></li>
				<li>A modal is shown with the body of the post, and the user can <span class="No-Break">modify it.</span></li>
				<li>Once it’s done, the user saves, and the modal <span class="No-Break">is closed.</span></li>
				<li>A toast will pop up with the content <strong class="bold">Post </strong><span class="No-Break"><strong class="bold">updated </strong></span><span class="No-Break"><strong class="bold">🚀</strong></span><span class="No-Break">.</span></li>
			</ol>
			<p>The feature is similar to <strong class="source-inline">CreatePost.jsx</strong>; the difference is that the <strong class="source-inline">UpdatePost</strong> component will receive a <strong class="source-inline">post</strong> object as props. Here’s the skeleton of <span class="No-Break">the code:</span></p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/post/UpdatePost.jsx</p>
			<pre class="source-code">
import React, { useState } from "react";
import { Button, Modal, Form, Dropdown } from "react-bootstrap";
import axiosService from "../../helpers/axios";
import Toaster from "../Toaster";
function UpdatePost(props) {
 const { post, refresh } = props;
 const [show, setShow] = useState(false);
 const handleClose = () =&gt; setShow(false);
 const handleShow = () =&gt; setShow(true);
 // Add form handling logic here
 return (
   &lt;&gt;
     &lt;Dropdown.Item onClick={handleShow}&gt;Modify
     &lt;/Dropdown.Item&gt;
     &lt;Modal show={show} onHide={handleClose}&gt;
     {/*Add UI code here*/}
     &lt;/Modal&gt;
   &lt;/&gt;
 );
}
export default UpdatePost;</pre>
			<p>The component is <a id="_idIndexMarker544"/>called in the <strong class="source-inline">Post.jsx</strong> file and used <span class="No-Break">like this:</span></p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/post/Post.jsx</p>
			<pre class="source-code">
...
import UpdatePost from "./UpdatePost";
...
           &lt;/div&gt;
           {user.name === post.author.name &amp;&amp; (
             &lt;div&gt;
               &lt;Dropdown&gt;
                 &lt;Dropdown.Toggle as={MoreToggleIcon}&gt;
                 &lt;/Dropdown.Toggle&gt;
                 &lt;Dropdown.Menu&gt;
                   &lt;UpdatePost post={post}
                     refresh={refresh} /&gt;
                   &lt;Dropdown.Item
                     onClick={handleDelete}
                     className="text-danger"
                   &gt;
                     Delete
                   &lt;/Dropdown.Item&gt;
                 &lt;/Dropdown.Menu&gt;
               &lt;/Dropdown&gt;
             &lt;/div&gt;
           )}
...</pre>
			<p>Good luck with the exercise. You can find the solution <span class="No-Break">at </span><a href="https://github.com/PacktPublishing/Full-stack-Django-and-React/blob/main/social-media-react/src/components/posts/UpdatePost.jsx"><span class="No-Break">https://github.com/PacktPublishing/Full-stack-Django-and-React/blob/main/social-media-react/src/components/posts/UpdatePost.jsx</span></a><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-173"><a id="_idTextAnchor179"/>Minor refactoring</h1>
			<p>Firstly, there is no refresh made when a new post is created. As we did for the <strong class="source-inline">UpdatePost.jsx</strong> component, we can also pass some props to the <span class="No-Break"><strong class="source-inline">CreatePost</strong></span><span class="No-Break"> component:</span></p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/pages/Home.jsx</p>
			<pre class="source-code">
...
           &lt;Col sm={10} className="flex-grow-1"&gt;
             &lt;CreatePost refresh={posts.mutate} /&gt;
           &lt;/Col&gt;
...</pre>
			<p>And, we can call the <strong class="source-inline">refresh</strong> method when a post is successfully created:. </p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/posts/CreatePost.jsx</p>
			<pre class="source-code">
function CreatePost(props) {
  const { refresh } = props;
  ...
    axiosService
      .post("/post/", data)
      .then(() =&gt; {
     ...
        setForm({});
        setShowToast(true);
        refresh();
      })
...</pre>
			<p>Now, every time a user adds a post, he will see the newly created post on the Home page without the need of reloading <span class="No-Break">the page.</span></p>
			<p>Secondly, the <strong class="source-inline">Toaster</strong> component is created <a id="_idIndexMarker545"/>but we need to think about how to call the component in the project. Let’s not forget that this component is created to return feedback to the user about a successful or failed request, thus the component should be reusable in the whole project, which is what we've actually <span class="No-Break">done, right?</span></p>
			<p>Well, no, and this is not desirable as it will violate the <strong class="bold">DRY</strong> rule. The logic to call the component is repeated across all pages that call this component. How can we resolve this? What if we can have the <strong class="source-inline">Toaster</strong> component higher in the component hierarchy and then be able to call or show the toaster from any <span class="No-Break">child component?</span></p>
			<div>
				<div id="_idContainer097" class="IMG---Figure">
					<img src="image/Figure_8.14_B18221.jpg" alt="Figure 8.14 – Parent and child components"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.14 – Parent and child components</p>
			<p>In the preceding figure, we will be<a id="_idIndexMarker546"/> able to trigger the display of a toaster in the project directly in a parent component from a child component (<strong class="source-inline">CreatePost</strong>). React provides an interesting way to manage state across parents and child components and this is called context. <strong class="bold">React Context</strong> allows <a id="_idIndexMarker547"/>you to share state or modify state across parent and child components more easily. In the <strong class="source-inline">Layout.jsx</strong> file, create a new context using the <span class="No-Break"><strong class="source-inline">createContext</strong></span><span class="No-Break"> method:</span></p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/Layout.jsx</p>
			<pre class="source-code">
import React, { createContext, useMemo, useState } from "react";
export const Context = createContext("unknown");
function Layout(props) {</pre>
			<p>Then in the <strong class="source-inline">Layout</strong> component scope, let’s define the state containing the data that the toaster will use to display information. We<a id="_idIndexMarker548"/> will also wrap the component JSX content inside the <strong class="source-inline">Context</strong> component and add a method to modify the state from any child components of the <span class="No-Break"><strong class="source-inline">Layout</strong></span><span class="No-Break"> component:</span></p>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">src/components/Layout.jsx</p>
			<pre class="source-code">
function Layout(props) {
  ...
  const [toaster, setToaster] = useState({
   title: "",
   show: false,
   message: "",
   type: "",
 });
 const value = useMemo(() =&gt; ({ toaster, setToaster }),
                                [toaster]);
 ...
 return (
   &lt;Context.Provider value={value}&gt;
     &lt;div&gt;
       &lt;NavigationBar /&gt;
       {hasNavigationBack &amp;&amp; (
         &lt;ArrowLeftOutlined
           style={{
             color: "#0D6EFD",
             fontSize: "24px",
             marginLeft: "5%",
             marginTop: "1%",
           }}
           onClick={() =&gt; navigate(-1)}
         /&gt;
       )}
       &lt;div className="container my-2"&gt;
         {props.children}&lt;/div&gt;
     &lt;/div&gt;
     &lt;Toaster
       title={toaster.title}
       message={toaster.message}
       type={toaster.type}
       showToast={toaster.show}
       onClose={() =&gt; setToaster({ ...toaster, show: false
         })}
     /&gt;
   &lt;/Context.Provider&gt;
 );
}
export default Layout;</pre>
			<p>In the preceding code, we have introduced a new function Hook called <strong class="source-inline">useMemo</strong>, which helps to memorize the<a id="_idIndexMarker549"/> context value (caching the value of the context) and avoid the creation of new objects every time there is a re-rendering of the <span class="No-Break"><strong class="source-inline">Layout</strong></span><span class="No-Break"> component.</span></p>
			<p>We will then be able to access the <strong class="source-inline">toaster</strong> state and call the <strong class="source-inline">setToaster</strong> function from any <span class="No-Break">child component:</span></p>
			<pre class="source-code">
 const { toaster, setToaster } = useContext(Context);</pre>
			<h1 id="_idParaDest-174"><a id="_idTextAnchor180"/>Summary</h1>
			<p>In this chapter, we’ve gone deeper into React programming by creating the components needed for the CRUD operations used in the post feature. We have covered concepts such as props passing, parent-children component creation, UI component customization, and modal creation. That led to the partial completion of the home page of the <strong class="source-inline">Postagram</strong> project. We also learned more about the <strong class="source-inline">useState</strong> and <strong class="source-inline">useContext</strong> Hooks and how they affect state in React. We have also learned how to create a <strong class="source-inline">Dropdown</strong> component, how to create a custom toaster, and the importance of layout in a <span class="No-Break">React project.</span></p>
			<p>In the next chapter, we’ll focus on the CRUD operations of the comment feature. This will lead us to add a <strong class="bold">Profile</strong> page and a <strong class="bold">Post</strong> page to display comments. We’ll also make simple and quick assessments to add Like features to the <span class="No-Break">comments too.</span></p>
			<h1 id="_idParaDest-175"><a id="_idTextAnchor181"/>Questions</h1>
			<ol>
				<li value="1">What is <span class="No-Break">a modal?</span></li>
				<li>What is <span class="No-Break">a prop?</span></li>
				<li>What is a children element <span class="No-Break">in React?</span></li>
				<li>What is <span class="No-Break">a wireframe?</span></li>
				<li>What is the map method used <span class="No-Break">in JSX?</span></li>
				<li>What is the usage of the <strong class="source-inline">mutate</strong> method on <span class="No-Break">SWR objects?</span></li>
			</ol>
		</div>
		<div>
			<div id="_idContainer099">
			</div>
		</div>
	</body></html>