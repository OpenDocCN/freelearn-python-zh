<html><head></head><body>
<div><h1 class="chapter-number" id="_idParaDest-311"><a id="_idTextAnchor318"/>13</h1>
<h1 id="_idParaDest-312"><a id="_idTextAnchor319"/>Dynamic Data Viewing with SciView and Jupyter</h1>
<p>In this chapter, we will continue our scientific voyage through the exploration of two vital features of PyCharm: <strong class="bold">SciView</strong> and integration with <strong class="bold">Jupyter notebooks</strong>. Both features give us integrated and usable interfaces, allowing us to view and work with data and variables in our science projects.</p>
<p>We’ll begin by discussing the SciView panel, which was introduced tacitly in the last chapter. Here, we’ll be going into more depth and realism by working with NumPy arrays and pandas DataFrames.</p>
<p>After that, we’ll evolve our workflow even further to include coverage of working with interactive Python computing tools such as Jupyter notebooks within the context of our scientific projects in PyCharm.</p>
<p>By the end of this chapter, you should have gained understanding in the following areas:</p>
<ul>
<li>Viewing and interacting with data in the SciView panel in PyCharm</li>
<li>The integration of <strong class="bold">Interactive Python</strong> (<strong class="bold">IPython</strong>) within PyCharm</li>
<li>Using Jupyter notebook support for interactive programming within a PyCharm scientific project</li>
</ul>
<p>By the time you’re flipping the page to the next chapter, you’ll be armed with the knowledge needed to wield the two most important weapons in the war to tame your data.</p>
<h1 id="_idParaDest-313"><a id="_idTextAnchor320"/>Technical requirements</h1>
<p>Since we’ve switched to the topic of data science, I’ve switched my preferred Python distribution to Anaconda, which is a Python distribution tailored to data science workloads. You can find it, along with installation instructions for your operating system, at <a href="https://anaconda.com">https://anaconda.com</a>.</p>
<p>Likewise, instead of the usual <code>pip</code>, I’ll be leveraging <code>conda</code>, which is Anaconda’s package manager. It is installed alongside Anaconda.</p>
<p>You’ll need an installed and working copy of PyCharm. Installation was covered in <a href="B19644_02.xhtml#_idTextAnchor028"><em class="italic">Chapter 2</em></a>, <em class="italic">Installation and Configuration</em>, in case you are jumping into the middle of the book.</p>
<p>You’ll also need this book’s sample source code from GitHub. We covered cloning the code in <a href="B19644_02.xhtml#_idTextAnchor028"><em class="italic">Chapter 2</em></a>, <em class="italic">Installation and Configuration</em>. You’ll find this chapter’s code at <a href="https://github.com/PacktPublishing/Hands-On-Application-Development-with-PyCharm---Second-Edition/tree/main/chapter-13">https://github.com/PacktPublishing/Hands-On-Application-Development-with-PyCharm---Second-Edition/tree/main/chapter-13</a>.</p>
<h1 id="_idParaDest-314"><a id="_idTextAnchor321"/>Data viewing made easy with PyCharm’s SciView panel</h1>
<p>We took a 10,000-foot <a id="_idIndexMarker1059"/>view of the SciView panel<a id="_idIndexMarker1060"/> in <a href="B19644_12.xhtml#_idTextAnchor298"><em class="italic">Chapter 12</em></a>, so we know what’s coming. We know SciView is a panel that allows us to visualize our data graphically, alongside a second panel that allows us easy and integrated access to documentation for the more complex data science libraries at play in a typical scientific project.</p>
<p>In order to see this magic in action, we’re going to revisit some code we wrote back in <a href="B19644_12.xhtml#_idTextAnchor298"><em class="italic">Chapter 12</em></a>, with a small enhancement. Rather than having you go back into the code for <a href="B19644_12.xhtml#_idTextAnchor298"><em class="italic">Chapter 12</em></a>, I’ve copied the project into the <a href="B19644_13.xhtml#_idTextAnchor318"><em class="italic">Chapter 13</em></a> folder in the repository so everything is together. You can find it in the <code>chapter-13/sci_view_panel</code> project within the <code>main.py</code> file. Don’t forget you’ll need to install the requirements within the <code>requirements.txt</code> file in a virtual environment in order to use the sample project. If you need a refresher on how to do this, refer back to <a href="B19644_03.xhtml#_idTextAnchor052"><em class="italic">Chapter 3</em></a>:</p>
<pre class="source-code">
import numpy as np
import matplotlib.pyplot as plt
N = 100
for _ in range(5):
  x = np.random.normal(0, 1, N)
  y = np.random.normal(2, 3, N)
  plt.hist(x, alpha=0.5, label='x')
  plt.hist(y, alpha=0.5, label='y')
  plt.legend(loc='upper right')
  plt.show()</pre> <p>You’ll recognize what this does from the last chapter. The code generates two sample sets of data and then plots the results as a histogram. The difference is that we’ve added <code>for _ in range(5)</code>. It’s the same code; we’re simply running it five times in succession, which<a id="_idIndexMarker1061"/> will generate five different<a id="_idIndexMarker1062"/> histograms.</p>
<h1 id="_idParaDest-315"><a id="_idTextAnchor322"/>Viewing and working with plots</h1>
<p>For this example, you should <a id="_idIndexMarker1063"/>take advantage of the ability to run your code in the <a id="_idIndexMarker1064"/>console. The setting for this is probably already ticked, but you can double-check in the default run configuration as shown in <em class="italic">Figure 13</em><em class="italic">.1</em>.</p>
<div><div><img alt="Figure 13.1: The pointed-to setting indicates this code will run in the console window, which is frequently used in scientific projects" src="img/B19644_13_001.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.1: The pointed-to setting indicates this code will run in the console window, which is frequently used in scientific projects</p>
<p>You saw this plot in the <a id="_idIndexMarker1065"/>graph <a id="_idIndexMarker1066"/>in the previous chapter, but take a look at the results for this run in <em class="italic">Figure 13</em><em class="italic">.2</em>.</p>
<div><div><img alt="Figure 13.2: The SciView window shows us the latest plot but also allows us to pick the plots from the other runs" src="img/B19644_13_002.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.2: The SciView window shows us the latest plot but also allows us to pick the plots from the other runs</p>
<p>You can already see<a id="_idIndexMarker1067"/> a <a id="_idIndexMarker1068"/>difference: there are five plots this time. Clicking each plot will change the histogram that changes in the viewer. This is an improvement over normal Python runs since the plot view would normally block execution while it displayed the histogram. You can normally only view one at a time, and the next is only generated when you hit the <em class="italic">Q</em> key to quit the current plot.</p>
<p>Instead of the default functionality, PyCharm grabbed all your plots to save you from having to individually export each image by hand. This is a huge time saver! You also have the option to zoom in and out using the toolbar at the top of the panel, remove the plot from view using the <strong class="bold">X</strong> button to the right of its icon, save the plot to an image file, or remove all the plots from view by right-clicking on the plot icon, as shown in <em class="italic">Figure 13</em><em class="italic">.3</em>.</p>
<div><div><img alt="Figure 13.3: PyCharm gives you many options for working with plots" src="img/B19644_13_003.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.3: PyCharm gives you many options for working with plots</p>
<p>In addition to the ability to<a id="_idIndexMarker1069"/> save<a id="_idIndexMarker1070"/> the graphs that interest you, your viewer has some viewing options, such as the ability to zoom in, which is indicated by the arrow in the preceding figure.</p>
<h2 id="_idParaDest-316"><a id="_idTextAnchor323"/>Heatmaps and correlational data</h2>
<p>PyCharm is <a id="_idIndexMarker1071"/>able to color <a id="_idIndexMarker1072"/>heatmap plots to help you easily<a id="_idIndexMarker1073"/> spot <a id="_idIndexMarker1074"/>correlations within a correlation matrix. To see this, let’s generate some data that will have some data points that are correlated and some that are not. You’ll find a file in the chapter source called <code>correlation_heatmap.py</code>. The substance of the code is this:</p>
<pre class="source-code">
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
#%% generate sample data
# x and z are randomly generated
# y is loosely two times of x
x = np.random.rand(50,)
y = x * 2 + np.random.normal(0, 0.3, 50)
z = np.random.rand(50,)
df = pd.DataFrame({
  'x': x,
  'y': y,
  'z': z
})
#%% compute the correlation matrix
corr_mat = df.corr()
#%% plot the heatmap
plt.matshow(corr_mat)
plt.show()</pre> <p>Notice that <a id="_idIndexMarker1075"/>the <a id="_idIndexMarker1076"/>code <a id="_idIndexMarker1077"/>contains cell separators <a id="_idIndexMarker1078"/>delineated by <code>#%%</code> characters. We covered the special meaning of these characters to PyCharm in <a href="B19644_12.xhtml#_idTextAnchor298"><em class="italic">Chapter 12</em></a>.</p>
<p>In this program, we are <a id="_idIndexMarker1079"/>creating a <code>x</code>, <code>y</code>, and <code>z</code>) that are randomly generated. We’re adjusting these random numbers between <code>x</code>, <code>y</code>, and <code>z</code> so that there will be some level of correlation between them. Then, we compute the correlation matrix of this dataset using the <code>corr()</code> method. Finally, we display this correlation matrix as a heatmap using the <code>matshow()</code> method from Matplotlib.</p>
<p>On the theoretical side, a correlation matrix tells us how much an attribute in each dataset is correlated to another. A higher value means a higher correlation between a pair of attributes. Generally, knowing which attributes are highly correlated to each other will offer valuable insights into the dataset of a data science project.</p>
<p>To demonstrate this point, we generate the <code>y</code> attribute to be roughly two times the size of the <code>x</code> attribute, creating a correlation between these two attributes. The <code>z</code> attribute, on the other hand, is generated randomly and independently from <code>x</code> and <code>y</code>, so there should not be a high correlation between <code>z</code> and either of the other attributes.</p>
<p>The project <a id="_idIndexMarker1080"/>should <a id="_idIndexMarker1081"/>have<a id="_idIndexMarker1082"/> a run configuration called <code>correlation</code>. The<a id="_idIndexMarker1083"/> settings for the run configuration are shown in <em class="italic">Figure 13</em><em class="italic">.4</em>.</p>
<div><div><img alt="Figure 13.4: This is the run configuration for the correlation_heatmap.py file" src="img/B19644_13_004.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.4: This is the run configuration for the correlation_heatmap.py file</p>
<p>Remember, it is important that we check the <strong class="bold">Run with Python Console</strong> checkbox. Go ahead and run the file and view the plot result. Mine is in <em class="italic">Figure 13</em><em class="italic">.5</em>. Since the data is random, yours may appear differently than mine.</p>
<div><div><img alt="Figure 13.5: Correlational heatmaps are rendered using colors to indicate the level of correlation within the correlational matrix" src="img/B19644_13_005.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.5: Correlational heatmaps are rendered using colors to indicate the level of correlation within the correlational matrix</p>
<p>Since this book is<a id="_idIndexMarker1084"/> printed in <a id="_idIndexMarker1085"/>black and white, I’ve tried to do you<a id="_idIndexMarker1086"/> a <a id="_idIndexMarker1087"/>solid here by adding letters to indicate the colors. This isn’t a feature of the graph. The cells labeled <strong class="bold">Y</strong> are yellow. <strong class="bold">G</strong> is for green and <strong class="bold">P</strong> is for purple. The first and second attributes are highly correlated, so the color in the corresponding cells in the correlation matrix (row 1 column 2 and row 2 column 1) is bright (yellow or green, each of similar brightness). The correlation between the third attribute with the other two is low, indicated by a dark purple color. Naturally, each attribute is perfectly correlated with itself, hence the bright yellow or green color in the diagonal cells.</p>
<p>The visual ramifications here are very helpful. When working with correlation matrices, we can instantly see the relationships between our variables.</p>
<p>The <strong class="bold">Plots</strong> tab in <a id="_idIndexMarker1088"/>SciView gives us a lot of great tools we can use to view and manage <a id="_idIndexMarker1089"/>plots in <a id="_idIndexMarker1090"/>our data science projects. Note, too, that <a id="_idIndexMarker1091"/>there are two tabs shown in <em class="italic">Figure 13</em><em class="italic">.2</em> (circled) at the top of the SciView panel. We’ll talk about the <strong class="bold">Data</strong> tab next.</p>
<h1 id="_idParaDest-317"><a id="_idTextAnchor324"/>Viewing and working with data</h1>
<p>When you click<a id="_idIndexMarker1092"/> on<a id="_idIndexMarker1093"/> the <strong class="bold">Data</strong> tab, you might be a little underwhelmed. As you can see in <em class="italic">Figure 13</em><em class="italic">.6</em>, the real action is further down in the debugger window.</p>
<div><div><img alt="Figure 13.6: Nothing shows up in the Data tab until you select one of the sample sets to view as an array" src="img/B19644_13_006.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.6: Nothing shows up in the Data tab until you select one of the sample sets to view as an array</p>
<p>Shift your attention to the <code>N</code>, this panel is sufficient. However, if you are using NumPy arrays, as we are, viewing the array in the context of a normal debugger window like this one is problematic.</p>
<p>If you click on the <strong class="bold">View as Array</strong> link, which can also be activated by right-clicking the variable, you can see a spreadsheet-like table in the <strong class="bold">Data</strong> panel. Check out <em class="italic">Figure 13</em><em class="italic">.7</em>.</p>
<div><div><img alt="Figure 13.7: Having selected the X variable in the lower panel, the Data tab now displays the elements of the NumPy array within X" src="img/B19644_13_007.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.7: Having selected the X variable in the lower panel, the Data tab now displays the elements of the NumPy array within X</p>
<p>As you can see, the <code>X</code>, and so I see <code>X</code> displayed as a long row of colored data. I can scroll to the right and inspect all 100 elements. Cells with high values are filled with <a id="_idIndexMarker1094"/>warmer <a id="_idIndexMarker1095"/>colors, while the ones with low values are filled with cooler colors. This provides you with contrast so you can visually detect differences between values without squinting at the decimal place.</p>
<p>The leftmost arrow in <em class="italic">Figure 13</em><em class="italic">.7</em> shows you that <code>X</code> in the textbox above relates to <code>X</code> in the window below. You can change the value in the textbox to <code>Y</code>, or any other valid variable name present in the lower console, and see the data represented more graphically above. The key here is the word <em class="italic">valid</em>. The <code>N</code> variable will display an error in the <strong class="bold">Data</strong> tab.</p>
<p>To the right of the textbox is the formatter. This allows you to specify how the numbers in the <strong class="bold">Data</strong> tab appear. The formatting string uses the same format as normal Python string formatting.</p>
<p>When you select multiple variables in the console view, each variable will be displayed in its own tab as shown in <em class="italic">Figure 13</em><em class="italic">.8</em>.</p>
<div><div><img alt="Figure 13.8: Picking multiple variables in the console will open a tab for each variable in the Data tab" src="img/B19644_13_008.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.8: Picking multiple variables in the console will open a tab for each variable in the Data tab</p>
<p>Just remember, this <a id="_idIndexMarker1096"/>only <a id="_idIndexMarker1097"/>works for NumPy arrays and pandas DataFrames. This data is a little boring since there’s just one row. Let’s try something a little spicier, so we can see more of the features in the <strong class="bold">Data</strong> tab.</p>
<p>In the chapter code, you’ll find a file called <code>meteor.py</code> that only has two lines in it:</p>
<pre class="source-code">
import pandas as pd
meteor_data = pd.read_csv("./data/Meteorite_Langings.csv")</pre> <p>This data comes from the <strong class="bold">National Aeronautical and Space Administration</strong> (<strong class="bold">NASA</strong>) in <a id="_idIndexMarker1098"/>the United States. You’ll find it, along with thousands of other freely available datasets, at <a href="https://data.gov">https://data.gov</a>, all courtesy of me personally, since I pay a lot in taxes. Sure, others helped, but at least once per year, it feels like it is all up to me.</p>
<p>The data file contains NASA’s data on meteorite landings. Specifics can be found at <a href="https://catalog.data.gov/dataset/meteorite-landings">https://catalog.data.gov/dataset/meteorite-landings</a>.</p>
<p>There should be a run configuration for <code>meteor_data.py</code> in the project from the repository, but just in case, my settings are in <em class="italic">Figure 13</em><em class="italic">.9</em>. If you need a refresher on run configurations, we covered this topic in <a href="B19644_03.xhtml#_idTextAnchor052"><em class="italic">Chapter 3</em></a>.</p>
<div><div><img alt="Figure 13.9: This is the run configuration settings dialog for the meteor.py file. Be sure that Run with Python Console is checked" src="img/B19644_13_009.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.9: This is the run configuration settings dialog for the meteor.py file. Be sure that Run with Python Console is checked</p>
<p>As before, the key here is<a id="_idIndexMarker1099"/> to<a id="_idIndexMarker1100"/> make sure the file runs in <strong class="bold">Python Console</strong> so you get the panel view needed for SciView. Go ahead and run the file. You can see the result of my run in <em class="italic">Figure 13</em><em class="italic">.10</em>.</p>
<div><div><img alt="Figure 13.10: My run of the meteor data has to be squished and stretched so you can see everything" src="img/B19644_13_010.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.10: My run of the meteor data has to be squished and stretched so you can see everything</p>
<p>I had to seriously drag panels around to get it all to fit in the screenshot. Note that, this time, the button <a id="_idIndexMarker1101"/>indicated <a id="_idIndexMarker1102"/>by the arrow says <strong class="bold">View as DataFrame</strong> since this time we used pandas instead of NumPy. I’ve clicked it and the <strong class="bold">Data</strong> tab has loaded the DataFrame for viewing.</p>
<h2 id="_idParaDest-318"><a id="_idTextAnchor325"/>Filtering in the Data tab</h2>
<p>The meteor dataset is a little more realistic. It contains a lot of values and it might make sense to filter on some of the fields. PyCharm gives you the ability to filter the data appearing in the data tab using either a wildcard or an expression.</p>
<h3>Filtering with a wildcard</h3>
<p>In <em class="italic">Figure 13</em><em class="italic">.11</em>, you <a id="_idIndexMarker1103"/>can see I am hovering over the <code>name</code> column <a id="_idIndexMarker1104"/>in the <strong class="bold">Data</strong> tab.</p>
<div><div><img alt="Figure 13.11: Hovering over a column reveals a filter icon, which resembles a funnel" src="img/B19644_13_011.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.11: Hovering over a column reveals a filter icon, which resembles a funnel</p>
<p>When I do this, a filter icon<a id="_idIndexMarker1105"/> appears. Click that icon to bring up your<a id="_idIndexMarker1106"/> filtering options as seen in <em class="italic">Figure 13</em><em class="italic">.12</em>.</p>
<div><div><img alt="Figure 13.12: You can filter by expression or by substring (wildcard)" src="img/B19644_13_012.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.12: You can filter by expression or by substring (wildcard)</p>
<p>Click on the <code>Bal</code>. You can see mine in <em class="italic">Figure 13</em><em class="italic">.13</em>.</p>
<div><div><img alt="Figure 13.13: We’re filtering the name column to show all names with the characters Bal somewhere in the name" src="img/B19644_13_013.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.13: We’re filtering the name column to show all names with the characters Bal somewhere in the name</p>
<p>Note that the<a id="_idIndexMarker1107"/> trashcan icon lets you remove the filter. While the <a id="_idIndexMarker1108"/>substring filter can be useful, the expression filter is far more powerful and precise.</p>
<h3>Filtering with expressions</h3>
<p>Using <a id="_idIndexMarker1109"/>expressions, you can be a little more selective. Meteors <a id="_idIndexMarker1110"/>are pretty cool, but nobody is impressed by a tiny pebble. For example, let’s filter meteors larger than 10kg in <em class="italic">Figure 13</em><em class="italic">.14</em>.</p>
<div><div><img alt="Figure 13.14: Filtering on the mass column where x (the value in the column) is greater than 10,000" src="img/B19644_13_014.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.14: Filtering on the mass column where x (the value in the column) is greater than 10,000</p>
<p>There are quite a <a id="_idIndexMarker1111"/>few! Now let’s filter to more recent strikes by filtering<a id="_idIndexMarker1112"/> to only those occurring from the year 2010 onward. Mine is in <em class="italic">Figure 13</em><em class="italic">.15</em>.</p>
<div><div><img alt="Figure 13.15: Limit data to just meteor strikes during and after 2010" src="img/B19644_13_015.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.15: Limit data to just meteor strikes during and after 2010</p>
<p>Thankfully, there are not as many, and the data ends with only one strike in 2013. As coincidence would have it, that’s the last year I paid my income taxes on time. I told you it was all me.</p>
<p class="callout-heading">Dear Internal Revenue Service</p>
<p class="callout">That last line is what we in the writing biz call “a joke.” I know this is a foreign concept to you all, but trust me, everybody else laughed.</p>
<p>I am so getting audited.</p>
<p>Anyway, another thing we can see through our filtering experiment is there is missing data in the <code>reclat</code>, <code>reclong</code>, and <code>GeoLocation</code> fields. These were no doubt recorded in Area 51 where geolocation data is illegal. Nevertheless, this can be a quick way to check<a id="_idIndexMarker1113"/> your data for anomalies as part of creating a<a id="_idIndexMarker1114"/> data pipeline, which we’ll be covering in the next chapter.</p>
<h3>Exporting to files or new tabs</h3>
<p>Take <a id="_idIndexMarker1115"/>a look at the top of the <strong class="bold">Data</strong> tab in <em class="italic">Figure 13</em><em class="italic">.16</em>.</p>
<div><div><img alt="Figure 13.16: You can export your data or pop it out into a new tab in the editor window" src="img/B19644_13_016.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.16: You can export your data or pop it out into a new tab in the editor window</p>
<p>The <code>.csv</code> or <code>.tsv</code> file. This is pretty straightforward, so I think you can live without a screenshot. You can also pop the contents of your data tab in SciView into the regular tab in your editor view. I’ve done this in <em class="italic">Figure 13</em><em class="italic">.17</em>.</p>
<div><div><img alt="Figure 13.17: I’ve popped the SciView Data tab contents into a tab in the main editor window" src="img/B19644_13_017.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.17: I’ve popped the SciView Data tab contents into a tab in the main editor window</p>
<p>All totaled, the <strong class="bold">Data</strong> tab in SciView contains a lot of useful features for performing explorations on your data, whether it be raw, as with the meteor data, or generated through calculation, as with our earlier random set. When you combine this graphical way to view input<a id="_idIndexMarker1116"/> and output data with PyCharm’s cell mode described in the last chapter, you start to see the power of the data science tools in PyCharm. They are just a few simple panels, but there is so much we can do with them!</p>
<h1 id="_idParaDest-319"><a id="_idTextAnchor326"/>Understanding IPython and magic commands</h1>
<p><strong class="bold">IPython</strong> is an enhanced<a id="_idIndexMarker1117"/> interactive <a id="_idIndexMarker1118"/>shell for the Python programming language. It provides a more feature-rich and user-friendly environment compared to the default Python interactive interpreter. IPython was developed to make interactive computing and data analysis tasks more convenient and efficient.</p>
<p>When working with IPython beyond the confines of PyCharm, you’ll find some features you won’t find in any standard console or REPL environment. The shell experienced is heavily enhanced to support features you’d expect within PyCharm, such as tab completion, syntax highlighting, and history navigation.</p>
<p>The tool allows for an array of rich display options. Imagine a command-line interface that includes the ability to work with images, videos, audio, and interactive widgets directly within the interactive environment. Obviously, you can execute Python code in the form of snippets, expressions, or entire scripts, and you do all of this in an interactive fashion.</p>
<p>IPython also makes it easier to work in a distributed compute environment. As you may know, threaded computing is effectively disabled in most mainline Python interpreters owing to<a id="_idIndexMarker1119"/> the <strong class="bold">Global Interpreter Lock </strong>(<strong class="bold">GIL</strong>). The GIL is a mechanism in the CPython interpreter, the most widely used implementation of Python. The GIL is a mutex (or a lock) that only allows one thread to execute in the interpreter at a time, even on multi-core systems. This means that in a multithreaded Python program, only one thread can execute Python bytecode at any given moment, regardless of how many CPU cores are available.</p>
<p>The GIL <a id="_idIndexMarker1120"/>was<a id="_idIndexMarker1121"/> introduced to simplify memory management and avoid potential conflicts that could arise from multiple threads accessing and modifying Python objects concurrently. While the GIL ensures that Python memory management remains simpler and safer, it also has implications for multithreaded programs insofar as Python programs tend to struggle to actually utilize all the compute resources available on a system that supports multiple threads.</p>
<p>While IPython doesn’t have any secret sauce that defeats the GIL limitation, it does provide a module called <code>ipython.parallel</code> that makes it easy to work with parallel compute resources. You can create clusters of IPython engines that can run code in parallel across multiple processes or even multiple machines.</p>
<p>IPython seems like something we should be very interested in, given that it is obviously a powerful tool <a id="_idIndexMarker1122"/>that <a id="_idIndexMarker1123"/>more fully enables a mode of enriched stepwise data interaction that is the modus operandi of modern data science workflows. The standing question then is, how can we leverage IPython within PyCharm?</p>
<h2 id="_idParaDest-320"><a id="_idTextAnchor327"/>Installing and setting up IPython</h2>
<p>Installing IPython is <a id="_idIndexMarker1124"/>done <a id="_idIndexMarker1125"/>like any other Python library. You can use <code>pip install ipython</code> from PyCharm’s terminal, or you can use the package management screen we’ve been working with since <a href="B19644_03.xhtml#_idTextAnchor052"><em class="italic">Chapter 3</em></a>. <em class="italic">Figure 13</em><em class="italic">.18</em> shows me about to install using the <strong class="bold">Python Packages</strong> panel in PyCharm.</p>
<div><div><img alt="Figure 13.18: I’ve searched for ipython in the Python Packages pane and I’m about to install it to my project using conda" src="img/B19644_13_018.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.18: I’ve searched for ipython in the Python Packages pane and I’m about to install it to my project using conda</p>
<p>If you plan to work with IPython often, you might consider installing this one globally so it is available to all your projects. You’d do this by simply installing IPython outside the confines of a virtual environment using <code>pip</code>, <code>conda</code>, or whichever tool you prefer for package management.</p>
<p>Once IPython is available, PyCharm will use it owing to the default settings in the IDE’s <strong class="bold">Build, Execution, Deployment</strong> settings, as shown in <em class="italic">Figure 13</em><em class="italic">.19</em>.</p>
<div><div><img alt="Figure 13.19: By default, PyCharm will use IPython for its console if it is available" src="img/B19644_13_019.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.19: By default, PyCharm will use IPython for its console if it is available</p>
<p>We covered<a id="_idIndexMarker1126"/> settings<a id="_idIndexMarker1127"/> in great detail in <a href="B19644_02.xhtml#_idTextAnchor028"><em class="italic">Chapter 2</em></a>, so if you’ve skipped to this chapter and you’re not sure how to get to the settings, go review the earlier chapter. Once IPython is available in your project, you need to close or cycle any consoles that might be open. So far, we’ve run three programs that we intentionally set to run in the console, so you won’t see any change to those since they were running before we installed IPython. <em class="italic">Figure 13</em><em class="italic">.20</em> shows you what an IPython prompt looks like.</p>
<div><div><img alt="Figure 13.20: The IPython prompt appears after I close or restart my existing console" src="img/B19644_13_020.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.20: The IPython prompt appears after I close or restart my existing console</p>
<p>In <em class="italic">Figure 13</em><em class="italic">.20</em>, I’ve drawn an arrow to remind you how to open the console, if it isn’t already open. If you don’t see that icon, try clicking the three-dot icon above the arrow. If you still can’t find it, review <a href="B19644_02.xhtml#_idTextAnchor028"><em class="italic">Chapter 2</em></a> where we talk about working with the console for the first time.</p>
<p>As I mentioned, if <a id="_idIndexMarker1128"/>you<a id="_idIndexMarker1129"/> already have consoles open, they need to be restarted. I’ve circled the button for this in <em class="italic">Figure 13</em><em class="italic">.20</em>. When the console is restarted, you should see a different prompt beginning with the word <code>In</code>, in contrast to the normal prompt, which displayed <code>&gt;&gt;&gt;</code> symbols. Following the word <code>In</code>, you’ll see some square brackets containing a number. In <em class="italic">Figure 13</em><em class="italic">.20</em>, it’s showing <code>2</code>. This number indicates the order of commands entered so far. If you look at the top of the new IPython console, you’ll see a few commands were entered automatically, which import the <code>sys</code> library, print out the Python version, and extend our path. That’s three commands, but remember we start at <code>0</code>. The next command you enter will be the fourth command and will be labeled as <code>3</code>.</p>
<p>If PyCharm were a video game, installing IPython would be like unlocking the super gun, sword, or magic power you can use to vanquish your unwitting and utterly unprepared foes. If this is your first time, you probably can’t wait to explode some data zombies, so let’s take a look at IPython’s magic commands. Hyperbole aside, <em class="italic">magic commands</em> are literally <a id="_idIndexMarker1130"/>what<a id="_idIndexMarker1131"/> they are called!</p>
<h2 id="_idParaDest-321"><a id="_idTextAnchor328"/>Introducing IPython magic commands</h2>
<p>In IPython, a <code>%</code> (for line magics) or <code>%%</code> (for cell magics) symbol and is used within an IPython session or Jupyter notebook cell. These magic commands provide shortcuts for performing various tasks, from running code with specific options to interacting with the environment or controlling IPython’s behavior. Magic commands are a convenient way to execute common operations without writing extensive code.</p>
<p>There are two types of magic commands:</p>
<ul>
<li><code>%</code> symbol<a id="_idIndexMarker1134"/> and are used on a single line. They typically take arguments and options to modify their behavior. For example, <code>%run script.py</code> can be used to run an external script within the IPython session.</li>
<li><code>%%</code> and are used at the beginning of a cell. They allow you to affect the entire cell’s content. For example, <code>%%time</code> can be used to measure the execution time of the entire cell’s code.</li>
</ul>
<p>Here are a few common examples of magic commands you’ll use daily:</p>
<ul>
<li><code>%run script.py</code>: Runs an external Python script in the IPython session.</li>
<li><code>%timeit</code>: Measures the execution time of a Python statement or expression.</li>
<li><code>%matplotlib inline</code>: Configures <code>matplotlib</code> to display plots directly in the notebook.</li>
<li><code>%%writefile filename.txt</code>: Writes the contents of a notebook cell to a file named <code>filename.txt</code>.</li>
<li><code>%load_ext extension_name</code>: Loads a specific IPython extension.</li>
<li><code>%%html</code>: Renders the content of a cell as HTML.</li>
<li><code>%reset</code>: Resets the namespace by removing all names defined by the user.</li>
<li><code>object_name?</code>: Don’t take me literally on this one. You don’t type <em class="italic">object_name?</em>. Instead, you type the name of an object you’ve instantiated. Maybe we should just do this in just a moment, so you understand.</li>
</ul>
<p>By now, you’re starting to smell what we’re cooking up here. We’ve seen cell mode in <a href="B19644_12.xhtml#_idTextAnchor298"><em class="italic">Chapter 12</em></a>, but now, with IPython, there is a lot more we can do with a cell using these magic commands. Like any good magic spell from the movies, there is just enough cryptic but short syntax to learn, which adds to the mystique and makes you feel just a little more elite than your non-magic-using colleagues.</p>
<p>Let’s try a few out, shall we?</p>
<p>In your IPython <a id="_idIndexMarker1136"/>console, type <code>a = 1</code>. Now, let’s try the <code>object_name?</code> magic. You don’t type <em class="italic">object_name?</em>; instead, you type <code>a?</code>. The name of the object is <code>a</code> and you follow it with a question mark as if you were Canadian or Australian. Whatever object name you use, assuming it is valid, you’ll get back information about that object. You can see my result in <em class="italic">Figure 13</em><em class="italic">.21</em>.</p>
<div><div><img alt="Figure 13.21: How’s it goin, a?" src="img/B19644_13_021.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.21: How’s it goin, a?</p>
<p>We’ve learned a lot about <code>a</code>, eh? Okay, eh, let’s try another one. Type <code>%precision 4</code>. The result should be <code>'%.4f'</code>. This tells us we’ve set our session to four decimals of precision. Let’s test that by typing in this code:</p>
<pre class="source-code">
import math
math.e</pre> <p>Lowercase <code>e</code> is a reference<a id="_idIndexMarker1137"/> to <code>e</code> to 10 places is 2.7182818285. We, though, are set for 4 decimal places of precision, so the result from IPython should show <code>2.7183</code>, as shown in <em class="italic">Figure 13</em><em class="italic">.22</em>.</p>
<div><div><img alt="Figure 13.22: Having set our precision to four decimal places, we can see the constant e is rendered properly" src="img/B19644_13_022.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.22: Having set our precision to four decimal places, we can see the constant e is rendered properly</p>
<p>Let’s try one <a id="_idIndexMarker1138"/>more. The <code>%%timeit</code> magic is very useful during the creation of algorithms. Algorithms are simply repeatable sets of instructions; however, in order to be useful, an algorithm needs to be efficient. Efficiency is judged by two vectors: time needed to complete and space required to work. For example, the <strong class="bold">National Health System</strong> (<strong class="bold">NHS</strong>) in <a id="_idIndexMarker1139"/>England has devised an algorithm that matches organ donors to recipients based on a number of complicated factors. It is meant to match an organ to a donor in a way that minimizes risks of tissue rejection, among other factors. As you can imagine, this is a complicated algorithm that has to operate against a dataset containing thousands of registered donors and thousands of registered recipients. When an organ becomes available, it has a limited shelf life. If the matching algorithm takes too long to generate a match, the organ becomes unviable for transplant, and the algorithm is effectively useless. We covered profiling in <a href="B19644_06.xhtml#_idTextAnchor145"><em class="italic">Chapter 6</em></a>, but this was really meant for software engineering workflows to help find bottlenecks in execution.</p>
<p>In data science, we’re operating outside the confines of a typical software project, so it makes sense to time individual steps to at least gain some insight into how a step of our calculations might scale. Even if our objective isn’t to create an algorithm, we still have to deal with practical limitations on time and compute space (such as memory and storage) in our regular exploratory work.</p>
<p>The <code>%%timeit</code> magic then becomes an integral part of our work. Now that I’ve spent all this time building up a huge example, let’s try it out with something laughably trivial in <em class="italic">Figure 13</em><em class="italic">.23</em>.</p>
<div><div><img alt="Figure 13.23: We’re trying out %﻿%timeit with a simple sort to find the operation completes in around 318 ns" src="img/B19644_13_023.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.23: We’re trying out %%timeit with a simple sort to find the operation completes in around 318 ns</p>
<p>This truly was <a id="_idIndexMarker1140"/>a trivial task. Start by typing <code>%%timeit</code> in the IPython console. When you press <em class="italic">Enter</em>, it takes you to the next line. In the second line, we’re creating a list with the numbers 0 through 9 in reverse order. On the last line, we’re sorting them back into their normal order. This is super boring! Hit <em class="italic">Enter</em> on the last blank line to run the code. Look at what <code>%%timeit</code> did! It could have just started a clock, run the script, then stopped the clock and reported the delta. Instead, <code>%%timeit</code> ran this code over and over to gain a sample size where it can compute a mean and standard deviation. This gives us better and more accurate insight into how long this code will take to run. Naturally, different computers will perform differently. For me, it ran in 318 nanoseconds plus or minus 3.44 nanoseconds.</p>
<p>Here, we have considered three of the most common magic commands in IPython. Of course, there are many other useful commands that you can take advantage of, which can be found in IPython’s official documentation: <a href="https://ipython.readthedocs.io/en/stable/index.html">https://ipython.readthedocs.io/en/stable/index.html</a>.</p>
<p>With that said, the main purpose of IPython is not simply the ability to utilize convenient APIs to facilitate specific tasks such as variable inspection, formatting, or profiling—IPython actually uses those functionalities to power its underlying interactive characteristics. In the context of data science projects, IPython, when used in PyCharm, offers a great way<a id="_idIndexMarker1141"/> for us to inspect and test small blocks of code before using them in a large program.</p>
<p>With that, let’s move on to the next section, where we will consider the other notable support PyCharm offers for scientific computing—Jupyter notebooks.</p>
<h1 id="_idParaDest-322"><a id="_idTextAnchor329"/>Leveraging Jupyter notebooks</h1>
<p><strong class="bold">Jupyter notebooks</strong> are <a id="_idIndexMarker1142"/>arguably the most-used tool in Python scientific computing and data science projects. In this section, we will briefly discuss the basics of Jupyter notebooks as well as the reasons why they are a great tool for data analysis purposes. Then, we will consider the way PyCharm supports the usage of these notebooks.</p>
<p>We will be working with the <code>jupyter_notebooks</code> project in the chapter source. Don’t forget you’ll need to install the requirements within the <code>requirements.txt</code> file in a virtual environment in order to use the sample project. If you need a refresher on how to do this, refer back to <a href="B19644_03.xhtml#_idTextAnchor052"><em class="italic">Chapter 3</em></a>.</p>
<p>Even though we will be writing code in Jupyter notebooks, it is beneficial to first consider a bare-bones program in a traditional Python script so that we can fully appreciate the advantages of using a notebook later on. Let’s look at the <code>main.py</code> file and see how we can work with it. We can see that this file contains the same program from the previous section, where we randomly generate a dataset of three attributes (<code>x</code>, <code>y</code>, and <code>z</code>) and consider their correlation matrix:</p>
<pre class="source-code">
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
# Generate sample data
x = np.random.rand(50,)
y = x * 2 + np.random.normal(0, 0.3, 50)
z = np.random.rand(50,)
df = pd.DataFrame({
'x': x,
'y': y,
'z': z
})
# Compute and show correlation matrix
corr_mat = df.corr()
plt.matshow(corr_mat)
plt.show()</pre> <p>This is roughly the same<a id="_idIndexMarker1143"/> code we used earlier in this chapter when we wanted to expose the heatmap features in PyCharm when reviewing a correlational matrix. Here, we have added the last two lines, which are different. Instead of a heatmap, this time we’re drawing a scatter plot. I explained earlier that we have intentionally and artificially introduced correlation into our otherwise randomly generated data. Examine where we set <code>y</code> and you’ll see we multiplied the matrix from <code>x</code> by 2, then added some small numbers from another random sample generation. This will make <code>y</code> appear to be roughly, but not exactly, correlated to <code>x</code> allowing us to see a plausible, though contrived, correlation matrix. This proves out when we run the file. My result is shown in <em class="italic">Figure 13</em><em class="italic">.24</em>. Don’t forget that our data is random, so yours will not precisely match mine.</p>
<div><div><img alt="Figure 13.24: This is the scatter plot produced by our code" src="img/B19644_13_024.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.24: This is the scatter plot produced by our code</p>
<p>Like I said, there’s<a id="_idIndexMarker1144"/> nothing new or amazing here besides the change from a heatmap to a scattelot. We ran this as a point of comparison for our discussion of Jupyter notebooks.</p>
<h1 id="_idParaDest-323"><a id="_idTextAnchor330"/>Understanding Jupyter basics</h1>
<p>Jupyter notebooks are<a id="_idIndexMarker1145"/> built on the idea of iterative development. In any development effort regardless of what you are creating, breaking a large project into smaller pieces always yields rewards. Nobody at the Ford Motor Company just builds a car. They build millions of pieces that are later assembled into a car. Each piece can be designed, produced, tested, and inspected as individual pieces.</p>
<p>Similarly, by separating a given program into individual sections that can be written and run independently from each other, programmers in general and data scientists specifically can work on the logic of their programs in an incremental way.</p>
<h1 id="_idParaDest-324"><a id="_idTextAnchor331"/>The idea of iterative development</h1>
<p>Most practitioners in <a id="_idIndexMarker1146"/>the world of software development are used to the ideals behind agile methodologies. There are dozens of agile frameworks designed to help you manage software, or really, any project with the aim of creating some useful product. One thing they consistently have in common is the idea of iterative development. The development effort is broken down into smaller, simpler tasks called an iteration. At the end of each iteration, we should have some usable product. This is important!</p>
<p>You might think about making a car, but think truly about the research and development that went into the first cars. Our main concern at that time was to produce a vehicle to take us from point A to some distant point B in a manner that was faster and more efficient than using a domesticated animal.</p>
<p>We already know about the wheel, so let’s entertain at a somewhat comical level the process your average software developer might use if they were going to create the world’s first automobile. Remember, each iteration must produce some usable means of traveling from place to place. Our development team might start with a skateboard. This is something simple we could make in a short iteration. The next iteration might produce a scooter, the next a bicycle, the next might be a powered tricycle, then eventually, a rudimentary car. See <em class="italic">Figure 13</em><em class="italic">.25</em>.</p>
<div><div><img alt="Figure 13.25: An iterative process realizes a goal one step at a time" src="img/B19644_13_025.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.25: An iterative process realizes a goal one step at a time</p>
<p>Each iteration produces a usable result, and we can point to this as continuous progress. At the end of each iteration, you should reflect upon the next because, with each iteration, your understanding of the final objective becomes clearer. You learn a lot from each iteration, and if you keep your iterations small, you have the flexibility to change direction when you discover you need to.</p>
<p>This happens all the <a id="_idIndexMarker1147"/>time in traditional software development and in data science work. You may set out with a particular research objective in mind, but ultimately, you have to go where the data leads you rather than succumbing to your own bias. Iterative processes make this possible.</p>
<p>We can apply this to the ideas behind Jupyter notebooks since these involve building up your work one cell, or iteration, at a time. During each iteration, you add or make the appropriate changes in the code cell that reads in the dataset and rerun the subsequent cells, as opposed to rerunning the code before it. As a tribute to its users, Jupyter notebooks<a id="_idIndexMarker1148"/> were<a id="_idIndexMarker1149"/> named after the three most common scientific<a id="_idIndexMarker1150"/> programming languages: <strong class="bold">Julia</strong>, <strong class="bold">Python</strong>, and <strong class="bold">R</strong>.</p>
<p>Another integral part of Jupyter notebooks is the support for the Markdown language. As we mentioned previously, at the beginning of the previous chapter, Markdown is a markup language that’s commonly used in <code>README.md</code> files in GitHub. Furthermore, because of its ability to work with LaTeX (which is typically used for writing mathematical <a id="_idIndexMarker1151"/>equations and scientific papers in general), Markdown is heavily favored by the data science community.</p>
<p>Next, let’s see how we can use a Jupyter notebook in a regular PyCharm project</p>
<h1 id="_idParaDest-325"><a id="_idTextAnchor332"/>Jupyter notebooks in PyCharm</h1>
<p>For this task, we <a id="_idIndexMarker1152"/>will be<a id="_idIndexMarker1153"/> translating the program we have in the <code>main.py</code> file into a Jupyter notebook so that we can see the interface that Jupyter offers compared to a traditional Python script. I’ll be leveraging my existing <code>jupyter_notebooks</code> project we started with. You can find it in the chapter’s sample code. If you don’t have that repository, we cover cloning it in <a href="B19644_02.xhtml#_idTextAnchor028"><em class="italic">Chapter 2</em></a>. If you’d like to start from scratch, you can simply create a new scientific project, which was covered in <a href="B19644_12.xhtml#_idTextAnchor298"><em class="italic">Chapter 12</em></a>.</p>
<h2 id="_idParaDest-326"><a id="_idTextAnchor333"/>Creating a notebook and adding our code</h2>
<p>To add a new<a id="_idIndexMarker1154"/> Jupyter notebook in a <a id="_idIndexMarker1155"/>PyCharm project, create it as though it were just a file. Click <strong class="bold">File </strong>| <strong class="bold">New</strong> | <strong class="bold">Jupyter Notebook</strong> as shown in <em class="italic">Figure 13</em><em class="italic">.26</em>.</p>
<div><div><img alt="Figure 13.26: Create a new Jupyter notebook using the File | New menu option" src="img/B19644_13_026.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.26: Create a new Jupyter notebook using the File | New menu option</p>
<p>You are<a id="_idIndexMarker1156"/> immediately <a id="_idIndexMarker1157"/>prompted to name your notebook. I called mine <code>basic.ipynb</code>. The file was created in the root folder of my project, but I went ahead and dragged it into the <code>notebooks</code> folder. You can see my starting point in <em class="italic">Figure 13</em><em class="italic">.27</em>.</p>
<div><div><img alt="Figure 13.27: My new notebook is ready!" src="img/B19644_13_027.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.27: My new notebook is ready!</p>
<p>Let’s begin by typing<a id="_idIndexMarker1158"/> some<a id="_idIndexMarker1159"/> documentation along with some known imports. At the prompt, type this code:</p>
<pre class="source-code">
### Importing libraries
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
#%%</pre> <p>When you type the last <code>#%%</code>, you’ll find PyCharm starts a new cell for you. In the second cell, let’s enter some of the code we had earlier in our illustrative Python script:</p>
<pre class="source-code">
x = np.random.rand(50,)
y = x * 2 + np.random.normal(0, 0.3, 50)
z = np.random.rand(50,)
df = pd.DataFrame({
  'x': x,
  'y': y,
  'z': z
})
#%%</pre> <p>I’ve explained this code earlier in this chapter, so I won’t do that again. As before, the last <code>#%%</code> will create a new cell. See <em class="italic">Figure 13</em><em class="italic">.28</em> to see what I have so far.</p>
<div><div><img alt="Figure 13.28: I now have two cells containing our code from our earlier program" src="img/B19644_13_028.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.28: I now have two cells containing our code from our earlier program</p>
<p>So far so good! I have <a id="_idIndexMarker1160"/>my <a id="_idIndexMarker1161"/>imports and a cell that generates my dataset for me just as I had in my Python script. I’ve been breaking my program up into small, iterative steps. First, my imports, then my dataset. Next, I can look at doing something with my data. We know from earlier discussions that this is going to be a correlative matrix. What if this is a university project, and our professor wants us to document the formulae we use? That’s probably a good idea even if you’re out of school. Let’s take a moment to look at a cool documentation feature we can use. We know we can have <a id="_idIndexMarker1162"/>code <a id="_idIndexMarker1163"/>cells. We can also have documentation cells that leverage not only Markdown but also LaTeX.</p>
<h2 id="_idParaDest-327"><a id="_idTextAnchor334"/>Documenting with Markdown and LaTeX</h2>
<p>Markdown <a id="_idIndexMarker1164"/>is something we’ve<a id="_idIndexMarker1165"/> already seen. It is a simple markup<a id="_idIndexMarker1166"/> language that lets you create HTML-like documents, but instead of a rich set of tags, you use symbols to mark your documentation. Markdown only covers basics, such as headings, lists, and simple images. We covered the use of PyCharm’s integrated Markdown plugin in <a href="B19644_12.xhtml#_idTextAnchor298"><em class="italic">Chapter 12</em></a>.</p>
<p>Working with Markdown in our notebooks allows us some simple formatting to enhance the look and readability of our notebooks.</p>
<p>LaTeX, which is pronounced “LAY-tech” or “LAH-tech," depending on where your math professor studied, is a typesetting convention used in the fields of science and mathematics. This kind of thing is needed in academic journals because you can’t very well type complicated formulas easily on a keyboard, and not many math professors can bust out Adobe Illustrator and do their own illustration work. Instead of a graphical tool, they instead invented a terse, hard-to-understand, and impossible-to-remember convention for marking up their formulas in their journal articles. Then they named it a common English word but insisted we all mispronounce it.</p>
<p>Let’s try it out!</p>
<p>First, I haven’t been totally up-front with you on how to create cells. Sure, you can just start typing stuff in, and using <code>#%%</code> to separate cells works just fine. You can also hover over the space between cells, or where the division would be if you’re at the top or bottom of the notebook. Check out <em class="italic">Figure 13</em><em class="italic">.29</em>.</p>
<div><div><img alt="Figure 13.29: You can hover in the space between cells to get a little GUI help with adding new cells" src="img/B19644_13_029.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.29: You can hover in the space between cells to get a little GUI help with adding new cells</p>
<p>When you click these<a id="_idIndexMarker1167"/> buttons <a id="_idIndexMarker1168"/>between cells, it triggers a process of cell<a id="_idIndexMarker1169"/> division called mitosis. Wait, no, that’s biology. It does split the cells by adding a new one between the two we have. I’m going to add a cell below my last one by hovering just below the last cell and clicking <strong class="bold">Add Markdown Cell</strong>. See <em class="italic">Figure 13</em><em class="italic">.30</em>.</p>
<div><div><img alt="Figure 13.30: Hover above the last empty cell and click Add Markdown Cell" src="img/B19644_13_030.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.30: Hover above the last empty cell and click Add Markdown Cell</p>
<p>This will create a light blue cell without the IPython prompt. Since it’s a Markdown cell, PyCharm isn’t expecting code, so there’s no need for the prompt. Now, within the cell, type this absolute nonsense:</p>
<pre class="source-code">
### Pearson's correlation
$r_{XY}
= \frac{\sum^n_{i=1}{(X_i - \bar{X})(Y_i - \bar{Y})}}
{\sqrt{\sum^n_{i=1}{(X_i - \bar{X})^2}}\sqrt{\sum^n_{i=1}{(Y_i - \bar{Y})^2}}}$</pre> <p>This is LaTeX markup syntax that will convey Pearson’s formula for correlation. Trust me, it will be quite<a id="_idIndexMarker1170"/> impressive<a id="_idIndexMarker1171"/> in<a id="_idIndexMarker1172"/> just a moment when we run our notebook. Let’s go ahead and add our two plots from earlier.</p>
<h2 id="_idParaDest-328"><a id="_idTextAnchor335"/>Adding our plots</h2>
<p>Add a new code cell <a id="_idIndexMarker1173"/>below the last one and add<a id="_idIndexMarker1174"/> this code for our heatmap:</p>
<pre class="source-code">
# Compute and show correlation matrix
corr_mat = df.corr()
plt.matshow(corr_mat)
plt.show()</pre> <p>Next, add another code cell for our scattelot:</p>
<pre class="source-code">
# Scatterplot
plt.scatter(df['x'], df(['y']))
plt.show()</pre> <p>Our implementation of our code as a Jupyter notebook is complete.</p>
<h2 id="_idParaDest-329"><a id="_idTextAnchor336"/>Executing the cells</h2>
<p>You can execute <a id="_idIndexMarker1175"/>the notebook by clicking the run button at the top of the notebook as shown in <em class="italic">Figure 13</em><em class="italic">.31</em>.</p>
<div><div><img alt="Figure 13.31: Run all the cells in the notebook using the double green arrow button" src="img/B19644_13_031.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.31: Run all the cells in the notebook using the double green arrow button</p>
<p>This triggers a <a id="_idIndexMarker1176"/>marvelous transformation in PyCharm. <em class="italic">Figure 13</em><em class="italic">.32</em> is a good starting place.</p>
<div><div><img alt="Figure 13.32: We’ve run the notebook, which causes a lot of changes in the PyCharm UI" src="img/B19644_13_032.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.32: We’ve run the notebook, which causes a lot of changes in the PyCharm UI</p>
<p>First, notice there is <a id="_idIndexMarker1177"/>a new tool on the left sidebar for Jupyter. We can see we’ve started a Jupyter server running on port <code>8888</code>. If you were using Jupyter independently of PyCharm, this would be the normal mode of operation. You’d have run the Jupyter server from the command line and navigated to the notebook in your browser. PyCharm is replacing that experience within the IDE, but we still need to run the server to get the results.</p>
<p>If you scroll up, you’ll see the LaTeX markup has been rendered in our Markdown cell shown in <em class="italic">Figure 13</em><em class="italic">.33</em>.</p>
<div><div><img alt="Figure 13.33: The nonsense now looks absolutely stunning!" src="img/B19644_13_033.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.33: The nonsense now looks absolutely stunning!</p>
<p>If you scroll down <a id="_idIndexMarker1178"/>to inspect the scatterplot, we see… Well phooey! There’s an error! See <em class="italic">Figure 13</em><em class="italic">.34</em>.</p>
<div><div><img alt="Figure 13:34: The error message shows us exactly what is wrong" src="img/B19644_13_034.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13:34: The error message shows us exactly what is wrong</p>
<p>I messed up. I put parentheses alongside the DataFrame object, <code>df</code>. I need to take those off so it looks like it’s a neighbor:</p>
<pre class="source-code">
# Scatterplot
plt.scatter(df['x'], <strong class="bold">df['y']</strong>)
plt.show()</pre> <p>Now, I could rerun the whole notebook, but I don’t need to. The problem was in the last cell, so I could just put my cursor in the last cell and click the single green run arrow. See <em class="italic">Figure 13</em><em class="italic">.35</em>.</p>
<div><div><img alt="Figure 13.35: Yes, that’s much better!" src="img/B19644_13_035.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.35: Yes, that’s much better!</p>
<p>Let’s finish up <a id="_idIndexMarker1179"/>our coverage of Jupyter with a few odds and ends.</p>
<h2 id="_idParaDest-330"><a id="_idTextAnchor337"/>Odds and ends</h2>
<p>At present, we’re<a id="_idIndexMarker1180"/> running a Jupyter server. We saw a moment ago this created a new tool icon on the left side menu. Let’s click that and see what’s up. See <em class="italic">Figure 13</em><em class="italic">.36</em>.</p>
<div><div><img alt="Figure 13.36: The Jupyter panel opens and we can see the output from the running server on the Server tab" src="img/B19644_13_036.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.36: The Jupyter panel opens and we can see the output from the running server on the Server tab</p>
<p>Scrolling to the top<a id="_idIndexMarker1181"/> of this window will reveal the local URL for the Jupyter server if you’d like to work with your notebook in the browser. But why would you do that when PyCharm is so much better?</p>
<p>Note the stop button that allows you to stop the running Jupyter server. Next to the <strong class="bold">Server</strong> tab is the <strong class="bold">Variables</strong> tab shown in <em class="italic">Figure 13</em><em class="italic">.37</em>.</p>
<div><div><img alt="Figure 13.37: The Variables tab in the Jupyter pane allows for deep inspection into variables within your notebook" src="img/B19644_13_037.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.37: The Variables tab in the Jupyter pane allows for deep inspection into variables within your notebook</p>
<p>In the <strong class="bold">Variables</strong> tab, you get the inspections that allow you to drill down into any variable within the notebook. Notice, too, that the <strong class="bold">View as Array</strong> and <strong class="bold">View as DataFrame</strong> options are there so you can also use the SciView panel to see and filter your array contents.</p>
<p>We didn’t really talk much about the toolbar at the top of the notebook tab, as shown in <em class="italic">Figure 13</em><em class="italic">.38</em>.</p>
<div><div><img alt="Figure 13.38: Controls for manipulating cells in your notebook" src="img/B19644_13_038.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.38: Controls for manipulating cells in your notebook</p>
<p>There is a set of tools for cutting, copying, and pasting your cells (<strong class="bold">1</strong>). The arrows at (<strong class="bold">2</strong>) allow you to reorder the cells in the notebook by shifting them up or down. There is a broad set of run and debug tools at (<strong class="bold">3</strong>) that you no doubt recognize as a common theme.</p>
<p>The broom icon will clear the output from a cell, which is handy if you’re working on salary projections based on the raise you’re about to ask for just as your boss walks up behind you. The trashcan deletes a cell entirely. There is also a dropdown here, marked <strong class="bold">Code</strong>, that allows you to change the type of cell, maybe from a code cell to a markup cell, or vice versa.</p>
<p>We have gone through the main features of PyCharm in the context of Jupyter notebooks. In general, one of the biggest drawbacks of using traditional Jupyter notebooks is the lack of code completion while writing code in individual code cells. Specifically, when we write code in Jupyter notebooks in our browser, the process is very similar to writing code in a simple text editor with limited support.</p>
<p>However, as we work with Jupyter notebooks directly inside the PyCharm editor, we will see that all the <a id="_idIndexMarker1182"/>code-writing support features that are available to regular Python scripts are also available here. In other words, when using PyCharm to write Jupyter notebooks, we get the best of both worlds—powerful, intelligent support from PyCharm and an iterative development style from Jupyter.</p>
<h1 id="_idParaDest-331"><a id="_idTextAnchor338"/>Summary</h1>
<p>A Python programmer typically works on a data science project in two ways—writing a traditional Python script or using a Jupyter notebook, both of which are heavily supported by PyCharm. Specifically, the SciView panel in PyCharm is a comprehensive and dynamic way to view, manage, and inspect data within a data science project. It offers a great way for us to display visualizations that have been produced by Python scripts as well as to inspect the values within pandas DataFrames and NumPy arrays.</p>
<p>On the other hand, Jupyter notebooks are a great tool for facilitating iterative development in Python, allowing users to make incremental steps toward analyzing and extracting insights from their datasets. Jupyter notebooks are also well supported by PyCharm, being able to be edited directly inside the PyCharm editor. This allows us to skip the middle step of using a web browser to run our Jupyter notebooks while being able to utilize the powerful code-writing support features that PyCharm provides.</p>
<p>By going in depth into what PyCharm helps with regarding the process of viewing and working with data, either via the SciView panel or with Jupyter notebooks, we have learned how to use PyCharm to facilitate various data science tasks in Python. With this, we have equipped ourselves with enough knowledge and tools to tackle real-life projects using PyCharm.</p>
<p>In the next chapter, we will combine all the knowledge we have learned so far regarding the topic of data science and scientific computing and walk through the process of building a data science pipeline in PyCharm.</p>
<p>Be sure to check out the companion website for the book at <a href="https://www.pycharm-book.com">https://www.pycharm-book.com</a>.</p>
<h1 id="_idParaDest-332"><a id="_idTextAnchor339"/>Questions</h1>
<ol>
<li>What two main features does the SciView panel contain?</li>
<li>What is the advantage of using the plot viewer in the SciView panel when multiple visualizations are generated by a Python program?</li>
<li>What kind of data structures does the data viewer in the SciView panel support?</li>
<li>What is the idea of iterative development and how do Jupyter notebooks support that?</li>
<li>What are Markdown and LaTeX? Why is it beneficial to have support for them in Jupyter notebooks?</li>
<li>How is a Jupyter code cell represented in the PyCharm editor?</li>
<li>What are the benefits of writing Jupyter notebooks in the PyCharm editor?</li>
</ol>
</div>
</body></html>