<html><head></head><body>
<div id="_idContainer437">
<h1 class="chapter-number" id="_idParaDest-311"><a id="_idTextAnchor318"/><span class="koboSpan" id="kobo.1.1">13</span></h1>
<h1 id="_idParaDest-312"><a id="_idTextAnchor319"/><span class="koboSpan" id="kobo.2.1">Dynamic Data Viewing with SciView and Jupyter</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In this chapter, we will continue our scientific voyage through the exploration of two vital features of PyCharm: </span><strong class="bold"><span class="koboSpan" id="kobo.4.1">SciView</span></strong><span class="koboSpan" id="kobo.5.1"> and integration with </span><strong class="bold"><span class="koboSpan" id="kobo.6.1">Jupyter notebooks</span></strong><span class="koboSpan" id="kobo.7.1">. </span><span class="koboSpan" id="kobo.7.2">Both features give us integrated and usable interfaces, allowing us to view and work with data and variables in our </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">science projects.</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">We’ll begin by discussing the SciView panel, which was introduced tacitly in the last chapter. </span><span class="koboSpan" id="kobo.9.2">Here, we’ll be going into more depth and realism by working with NumPy arrays and </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">pandas DataFrames.</span></span></p>
<p><span class="koboSpan" id="kobo.11.1">After that, we’ll evolve our workflow even further to include coverage of working with interactive Python computing tools such as Jupyter notebooks within the context of our scientific projects </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">in PyCharm.</span></span></p>
<p><span class="koboSpan" id="kobo.13.1">By the end of this chapter, you should have gained understanding in the </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">following areas:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.15.1">Viewing and interacting with data in the SciView panel </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">in PyCharm</span></span></li>
<li><span class="koboSpan" id="kobo.17.1">The integration of </span><strong class="bold"><span class="koboSpan" id="kobo.18.1">Interactive Python</span></strong><span class="koboSpan" id="kobo.19.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.20.1">IPython</span></strong><span class="koboSpan" id="kobo.21.1">) </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">within PyCharm</span></span></li>
<li><span class="koboSpan" id="kobo.23.1">Using Jupyter notebook support for interactive programming within a PyCharm </span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">scientific project</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.25.1">By the time you’re flipping the page to the next chapter, you’ll be armed with the knowledge needed to wield the two most important weapons in the war to tame </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">your data.</span></span></p>
<h1 id="_idParaDest-313"><a id="_idTextAnchor320"/><span class="koboSpan" id="kobo.27.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.28.1">Since we’ve switched to the topic of data science, I’ve switched my preferred Python distribution to Anaconda, which is a Python distribution tailored to data science workloads. </span><span class="koboSpan" id="kobo.28.2">You can find it, along with installation instructions for your operating system, </span><span class="No-Break"><span class="koboSpan" id="kobo.29.1">at </span></span><a href="https://anaconda.com"><span class="No-Break"><span class="koboSpan" id="kobo.30.1">https://anaconda.com</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.31.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.32.1">Likewise, instead of the usual </span><strong class="source-inline"><span class="koboSpan" id="kobo.33.1">pip</span></strong><span class="koboSpan" id="kobo.34.1">, I’ll be leveraging </span><strong class="source-inline"><span class="koboSpan" id="kobo.35.1">conda</span></strong><span class="koboSpan" id="kobo.36.1">, which is Anaconda’s package manager. </span><span class="koboSpan" id="kobo.36.2">It is installed </span><span class="No-Break"><span class="koboSpan" id="kobo.37.1">alongside Anaconda.</span></span></p>
<p><span class="koboSpan" id="kobo.38.1">You’ll need an installed and working copy of PyCharm. </span><span class="koboSpan" id="kobo.38.2">Installation was covered in </span><a href="B19644_02.xhtml#_idTextAnchor028"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.39.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.40.1">, </span><em class="italic"><span class="koboSpan" id="kobo.41.1">Installation and Configuration</span></em><span class="koboSpan" id="kobo.42.1">, in case you are jumping into the middle of </span><span class="No-Break"><span class="koboSpan" id="kobo.43.1">the book.</span></span></p>
<p><span class="koboSpan" id="kobo.44.1">You’ll also need this book’s sample source code from GitHub. </span><span class="koboSpan" id="kobo.44.2">We covered cloning the code in </span><a href="B19644_02.xhtml#_idTextAnchor028"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.45.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.46.1">, </span><em class="italic"><span class="koboSpan" id="kobo.47.1">Installation and Configuration</span></em><span class="koboSpan" id="kobo.48.1">. </span><span class="koboSpan" id="kobo.48.2">You’ll find this chapter’s code </span><span class="No-Break"><span class="koboSpan" id="kobo.49.1">at </span></span><a href="https://github.com/PacktPublishing/Hands-On-Application-Development-with-PyCharm---Second-Edition/tree/main/chapter-13"><span class="No-Break"><span class="koboSpan" id="kobo.50.1">https://github.com/PacktPublishing/Hands-On-Application-Development-with-PyCharm---Second-Edition/tree/main/chapter-13</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.51.1">.</span></span></p>
<h1 id="_idParaDest-314"><a id="_idTextAnchor321"/><span class="koboSpan" id="kobo.52.1">Data viewing made easy with PyCharm’s SciView panel</span></h1>
<p><span class="koboSpan" id="kobo.53.1">We took a 10,000-foot </span><a id="_idIndexMarker1059"/><span class="koboSpan" id="kobo.54.1">view of the SciView panel</span><a id="_idIndexMarker1060"/><span class="koboSpan" id="kobo.55.1"> in </span><a href="B19644_12.xhtml#_idTextAnchor298"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.56.1">Chapter 12</span></em></span></a><span class="koboSpan" id="kobo.57.1">, so we know what’s coming. </span><span class="koboSpan" id="kobo.57.2">We know SciView is a panel that allows us to visualize our data graphically, alongside a second panel that allows us easy and integrated access to documentation for the more complex data science libraries at play in a typical </span><span class="No-Break"><span class="koboSpan" id="kobo.58.1">scientific project.</span></span></p>
<p><span class="koboSpan" id="kobo.59.1">In order to see this magic in action, we’re going to revisit some code we wrote back in </span><a href="B19644_12.xhtml#_idTextAnchor298"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.60.1">Chapter 12</span></em></span></a><span class="koboSpan" id="kobo.61.1">, with a small enhancement. </span><span class="koboSpan" id="kobo.61.2">Rather than having you go back into the code for </span><a href="B19644_12.xhtml#_idTextAnchor298"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.62.1">Chapter 12</span></em></span></a><span class="koboSpan" id="kobo.63.1">, I’ve copied the project into the </span><a href="B19644_13.xhtml#_idTextAnchor318"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.64.1">Chapter 13</span></em></span></a><span class="koboSpan" id="kobo.65.1"> folder in the repository so everything is together. </span><span class="koboSpan" id="kobo.65.2">You can find it in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.66.1">chapter-13/sci_view_panel</span></strong><span class="koboSpan" id="kobo.67.1"> project within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.68.1">main.py</span></strong><span class="koboSpan" id="kobo.69.1"> file. </span><span class="koboSpan" id="kobo.69.2">Don’t forget you’ll need to install the requirements within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.70.1">requirements.txt</span></strong><span class="koboSpan" id="kobo.71.1"> file in a virtual environment in order to use the sample project. </span><span class="koboSpan" id="kobo.71.2">If you need a refresher on how to do this, refer back to </span><a href="B19644_03.xhtml#_idTextAnchor052"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.72.1">Chapter 3</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.73.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.74.1">
import numpy as np
import matplotlib.pyplot as plt
N = 100
for _ in range(5):
  x = np.random.normal(0, 1, N)
  y = np.random.normal(2, 3, N)
  plt.hist(x, alpha=0.5, label='x')
  plt.hist(y, alpha=0.5, label='y')
  plt.legend(loc='upper right')
  plt.show()</span></pre> <p><span class="koboSpan" id="kobo.75.1">You’ll recognize what this does from the last chapter. </span><span class="koboSpan" id="kobo.75.2">The code generates two sample sets of data and then plots the results as a histogram. </span><span class="koboSpan" id="kobo.75.3">The difference is that we’ve added </span><strong class="source-inline"><span class="koboSpan" id="kobo.76.1">for _ in range(5)</span></strong><span class="koboSpan" id="kobo.77.1">. </span><span class="koboSpan" id="kobo.77.2">It’s the same code; we’re simply running it five times in succession, which</span><a id="_idIndexMarker1061"/><span class="koboSpan" id="kobo.78.1"> will generate five </span><span class="No-Break"><span class="koboSpan" id="kobo.79.1">different</span></span><span class="No-Break"><a id="_idIndexMarker1062"/></span><span class="No-Break"><span class="koboSpan" id="kobo.80.1"> histograms.</span></span></p>
<h1 id="_idParaDest-315"><a id="_idTextAnchor322"/><span class="koboSpan" id="kobo.81.1">Viewing and working with plots</span></h1>
<p><span class="koboSpan" id="kobo.82.1">For this example, you should </span><a id="_idIndexMarker1063"/><span class="koboSpan" id="kobo.83.1">take advantage of the ability to run your code in the </span><a id="_idIndexMarker1064"/><span class="koboSpan" id="kobo.84.1">console. </span><span class="koboSpan" id="kobo.84.2">The setting for this is probably already ticked, but you can double-check in the default run configuration as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.85.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.86.1">.1</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.87.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer399">
<span class="koboSpan" id="kobo.88.1"><img alt="Figure 13.1: The pointed-to setting indicates this code will run in the console window, which is frequently used in scientific projects" src="image/B19644_13_001.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.89.1">Figure 13.1: The pointed-to setting indicates this code will run in the console window, which is frequently used in scientific projects</span></p>
<p><span class="koboSpan" id="kobo.90.1">You saw this plot in the </span><a id="_idIndexMarker1065"/><span class="koboSpan" id="kobo.91.1">graph </span><a id="_idIndexMarker1066"/><span class="koboSpan" id="kobo.92.1">in the previous chapter, but take a look at the results for this run in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.93.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.94.1">.2</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.95.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer400">
<span class="koboSpan" id="kobo.96.1"><img alt="Figure 13.2: The SciView window shows us the latest plot but also allows us to pick the plots from the other runs" src="image/B19644_13_002.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.97.1">Figure 13.2: The SciView window shows us the latest plot but also allows us to pick the plots from the other runs</span></p>
<p><span class="koboSpan" id="kobo.98.1">You can already see</span><a id="_idIndexMarker1067"/><span class="koboSpan" id="kobo.99.1"> a </span><a id="_idIndexMarker1068"/><span class="koboSpan" id="kobo.100.1">difference: there are five plots this time. </span><span class="koboSpan" id="kobo.100.2">Clicking each plot will change the histogram that changes in the viewer. </span><span class="koboSpan" id="kobo.100.3">This is an improvement over normal Python runs since the plot view would normally block execution while it displayed the histogram. </span><span class="koboSpan" id="kobo.100.4">You can normally only view one at a time, and the next is only generated when you hit the </span><em class="italic"><span class="koboSpan" id="kobo.101.1">Q</span></em><span class="koboSpan" id="kobo.102.1"> key to quit the </span><span class="No-Break"><span class="koboSpan" id="kobo.103.1">current plot.</span></span></p>
<p><span class="koboSpan" id="kobo.104.1">Instead of the default functionality, PyCharm grabbed all your plots to save you from having to individually export each image by hand. </span><span class="koboSpan" id="kobo.104.2">This is a huge time saver! </span><span class="koboSpan" id="kobo.104.3">You also have the option to zoom in and out using the toolbar at the top of the panel, remove the plot from view using the </span><strong class="bold"><span class="koboSpan" id="kobo.105.1">X</span></strong><span class="koboSpan" id="kobo.106.1"> button to the right of its icon, save the plot to an image file, or remove all the plots from view by right-clicking on the plot icon, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.107.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.108.1">.3</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.109.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer401">
<span class="koboSpan" id="kobo.110.1"><img alt="Figure 13.3: PyCharm gives you many options for working with plots" src="image/B19644_13_003.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.111.1">Figure 13.3: PyCharm gives you many options for working with plots</span></p>
<p><span class="koboSpan" id="kobo.112.1">In addition to the ability to</span><a id="_idIndexMarker1069"/><span class="koboSpan" id="kobo.113.1"> save</span><a id="_idIndexMarker1070"/><span class="koboSpan" id="kobo.114.1"> the graphs that interest you, your viewer has some viewing options, such as the ability to zoom in, which is indicated by the arrow in the </span><span class="No-Break"><span class="koboSpan" id="kobo.115.1">preceding figure.</span></span></p>
<h2 id="_idParaDest-316"><a id="_idTextAnchor323"/><span class="koboSpan" id="kobo.116.1">Heatmaps and correlational data</span></h2>
<p><span class="koboSpan" id="kobo.117.1">PyCharm is </span><a id="_idIndexMarker1071"/><span class="koboSpan" id="kobo.118.1">able to color </span><a id="_idIndexMarker1072"/><span class="koboSpan" id="kobo.119.1">heatmap plots to help you easily</span><a id="_idIndexMarker1073"/><span class="koboSpan" id="kobo.120.1"> spot </span><a id="_idIndexMarker1074"/><span class="koboSpan" id="kobo.121.1">correlations within a correlation matrix. </span><span class="koboSpan" id="kobo.121.2">To see this, let’s generate some data that will have some data points that are correlated and some that are not. </span><span class="koboSpan" id="kobo.121.3">You’ll find a file in the chapter source called </span><strong class="source-inline"><span class="koboSpan" id="kobo.122.1">correlation_heatmap.py</span></strong><span class="koboSpan" id="kobo.123.1">. </span><span class="koboSpan" id="kobo.123.2">The substance of the code </span><span class="No-Break"><span class="koboSpan" id="kobo.124.1">is this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.125.1">
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
#%% generate sample data
# x and z are randomly generated
# y is loosely two times of x
x = np.random.rand(50,)
y = x * 2 + np.random.normal(0, 0.3, 50)
z = np.random.rand(50,)
df = pd.DataFrame({
  'x': x,
  'y': y,
  'z': z
})
#%% compute the correlation matrix
corr_mat = df.corr()
#%% plot the heatmap
plt.matshow(corr_mat)
plt.show()</span></pre> <p><span class="koboSpan" id="kobo.126.1">Notice that </span><a id="_idIndexMarker1075"/><span class="koboSpan" id="kobo.127.1">the </span><a id="_idIndexMarker1076"/><span class="koboSpan" id="kobo.128.1">code </span><a id="_idIndexMarker1077"/><span class="koboSpan" id="kobo.129.1">contains cell separators </span><a id="_idIndexMarker1078"/><span class="koboSpan" id="kobo.130.1">delineated by </span><strong class="source-inline"><span class="koboSpan" id="kobo.131.1">#%%</span></strong><span class="koboSpan" id="kobo.132.1"> characters. </span><span class="koboSpan" id="kobo.132.2">We covered the special meaning of these characters to PyCharm in </span><a href="B19644_12.xhtml#_idTextAnchor298"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.133.1">Chapter 12</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.134.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.135.1">In this program, we are </span><a id="_idIndexMarker1079"/><span class="koboSpan" id="kobo.136.1">creating a </span><strong class="bold"><span class="koboSpan" id="kobo.137.1">pandas</span></strong> <strong class="bold"><span class="koboSpan" id="kobo.138.1">DataFrame</span></strong><span class="koboSpan" id="kobo.139.1"> with three different attributes (</span><strong class="source-inline"><span class="koboSpan" id="kobo.140.1">x</span></strong><span class="koboSpan" id="kobo.141.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.142.1">y</span></strong><span class="koboSpan" id="kobo.143.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.144.1">z</span></strong><span class="koboSpan" id="kobo.145.1">) that are randomly generated. </span><span class="koboSpan" id="kobo.145.2">We’re adjusting these random numbers between </span><strong class="source-inline"><span class="koboSpan" id="kobo.146.1">x</span></strong><span class="koboSpan" id="kobo.147.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.148.1">y</span></strong><span class="koboSpan" id="kobo.149.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.150.1">z</span></strong><span class="koboSpan" id="kobo.151.1"> so that there will be some level of correlation between them. </span><span class="koboSpan" id="kobo.151.2">Then, we compute the correlation matrix of this dataset using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.152.1">corr()</span></strong><span class="koboSpan" id="kobo.153.1"> method. </span><span class="koboSpan" id="kobo.153.2">Finally, we display this correlation matrix as a heatmap using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.154.1">matshow()</span></strong><span class="koboSpan" id="kobo.155.1"> method </span><span class="No-Break"><span class="koboSpan" id="kobo.156.1">from Matplotlib.</span></span></p>
<p><span class="koboSpan" id="kobo.157.1">On the theoretical side, a correlation matrix tells us how much an attribute in each dataset is correlated to another. </span><span class="koboSpan" id="kobo.157.2">A higher value means a higher correlation between a pair of attributes. </span><span class="koboSpan" id="kobo.157.3">Generally, knowing which attributes are highly correlated to each other will offer valuable insights into the dataset of a data </span><span class="No-Break"><span class="koboSpan" id="kobo.158.1">science project.</span></span></p>
<p><span class="koboSpan" id="kobo.159.1">To demonstrate this point, we generate the </span><strong class="source-inline"><span class="koboSpan" id="kobo.160.1">y</span></strong><span class="koboSpan" id="kobo.161.1"> attribute to be roughly two times the size of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.162.1">x</span></strong><span class="koboSpan" id="kobo.163.1"> attribute, creating a correlation between these two attributes. </span><span class="koboSpan" id="kobo.163.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.164.1">z</span></strong><span class="koboSpan" id="kobo.165.1"> attribute, on the other hand, is generated randomly and independently from </span><strong class="source-inline"><span class="koboSpan" id="kobo.166.1">x</span></strong><span class="koboSpan" id="kobo.167.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.168.1">y</span></strong><span class="koboSpan" id="kobo.169.1">, so there should not be a high correlation between </span><strong class="source-inline"><span class="koboSpan" id="kobo.170.1">z</span></strong><span class="koboSpan" id="kobo.171.1"> and either of the </span><span class="No-Break"><span class="koboSpan" id="kobo.172.1">other attributes.</span></span></p>
<p><span class="koboSpan" id="kobo.173.1">The project </span><a id="_idIndexMarker1080"/><span class="koboSpan" id="kobo.174.1">should </span><a id="_idIndexMarker1081"/><span class="koboSpan" id="kobo.175.1">have</span><a id="_idIndexMarker1082"/><span class="koboSpan" id="kobo.176.1"> a run configuration called </span><strong class="source-inline"><span class="koboSpan" id="kobo.177.1">correlation</span></strong><span class="koboSpan" id="kobo.178.1">. </span><span class="koboSpan" id="kobo.178.2">The</span><a id="_idIndexMarker1083"/><span class="koboSpan" id="kobo.179.1"> settings for the run configuration are shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.180.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.181.1">.4</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.182.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer402">
<span class="koboSpan" id="kobo.183.1"><img alt="Figure 13.4: This is the run configuration for the correlation_heatmap.py file" src="image/B19644_13_004.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.184.1">Figure 13.4: This is the run configuration for the correlation_heatmap.py file</span></p>
<p><span class="koboSpan" id="kobo.185.1">Remember, it is important that we check the </span><strong class="bold"><span class="koboSpan" id="kobo.186.1">Run with Python Console</span></strong><span class="koboSpan" id="kobo.187.1"> checkbox. </span><span class="koboSpan" id="kobo.187.2">Go ahead and run the file and view the plot result. </span><span class="koboSpan" id="kobo.187.3">Mine is in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.188.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.189.1">.5</span></em><span class="koboSpan" id="kobo.190.1">. </span><span class="koboSpan" id="kobo.190.2">Since the data is random, yours may appear differently </span><span class="No-Break"><span class="koboSpan" id="kobo.191.1">than mine.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer403">
<span class="koboSpan" id="kobo.192.1"><img alt="Figure 13.5: Correlational heatmaps are rendered using colors to indicate the level of correlation within the correlational matrix" src="image/B19644_13_005.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.193.1">Figure 13.5: Correlational heatmaps are rendered using colors to indicate the level of correlation within the correlational matrix</span></p>
<p><span class="koboSpan" id="kobo.194.1">Since this book is</span><a id="_idIndexMarker1084"/><span class="koboSpan" id="kobo.195.1"> printed in </span><a id="_idIndexMarker1085"/><span class="koboSpan" id="kobo.196.1">black and white, I’ve tried to do you</span><a id="_idIndexMarker1086"/><span class="koboSpan" id="kobo.197.1"> a </span><a id="_idIndexMarker1087"/><span class="koboSpan" id="kobo.198.1">solid here by adding letters to indicate the colors. </span><span class="koboSpan" id="kobo.198.2">This isn’t a feature of the graph. </span><span class="koboSpan" id="kobo.198.3">The cells labeled </span><strong class="bold"><span class="koboSpan" id="kobo.199.1">Y</span></strong><span class="koboSpan" id="kobo.200.1"> are yellow. </span><strong class="bold"><span class="koboSpan" id="kobo.201.1">G</span></strong><span class="koboSpan" id="kobo.202.1"> is for green and </span><strong class="bold"><span class="koboSpan" id="kobo.203.1">P</span></strong><span class="koboSpan" id="kobo.204.1"> is for purple. </span><span class="koboSpan" id="kobo.204.2">The first and second attributes are highly correlated, so the color in the corresponding cells in the correlation matrix (row 1 column 2 and row 2 column 1) is bright (yellow or green, each of similar brightness). </span><span class="koboSpan" id="kobo.204.3">The correlation between the third attribute with the other two is low, indicated by a dark purple color. </span><span class="koboSpan" id="kobo.204.4">Naturally, each attribute is perfectly correlated with itself, hence the bright yellow or green color in the </span><span class="No-Break"><span class="koboSpan" id="kobo.205.1">diagonal cells.</span></span></p>
<p><span class="koboSpan" id="kobo.206.1">The visual ramifications here are very helpful. </span><span class="koboSpan" id="kobo.206.2">When working with correlation matrices, we can instantly see the relationships between </span><span class="No-Break"><span class="koboSpan" id="kobo.207.1">our variables.</span></span></p>
<p><span class="koboSpan" id="kobo.208.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.209.1">Plots</span></strong><span class="koboSpan" id="kobo.210.1"> tab in </span><a id="_idIndexMarker1088"/><span class="koboSpan" id="kobo.211.1">SciView gives us a lot of great tools we can use to view and manage </span><a id="_idIndexMarker1089"/><span class="koboSpan" id="kobo.212.1">plots in </span><a id="_idIndexMarker1090"/><span class="koboSpan" id="kobo.213.1">our data science projects. </span><span class="koboSpan" id="kobo.213.2">Note, too, that </span><a id="_idIndexMarker1091"/><span class="koboSpan" id="kobo.214.1">there are two tabs shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.215.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.216.1">.2</span></em><span class="koboSpan" id="kobo.217.1"> (circled) at the top of the SciView panel. </span><span class="koboSpan" id="kobo.217.2">We’ll talk about the </span><strong class="bold"><span class="koboSpan" id="kobo.218.1">Data</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.219.1">tab next.</span></span></p>
<h1 id="_idParaDest-317"><a id="_idTextAnchor324"/><span class="koboSpan" id="kobo.220.1">Viewing and working with data</span></h1>
<p><span class="koboSpan" id="kobo.221.1">When you click</span><a id="_idIndexMarker1092"/><span class="koboSpan" id="kobo.222.1"> on</span><a id="_idIndexMarker1093"/><span class="koboSpan" id="kobo.223.1"> the </span><strong class="bold"><span class="koboSpan" id="kobo.224.1">Data</span></strong><span class="koboSpan" id="kobo.225.1"> tab, you might be a little underwhelmed. </span><span class="koboSpan" id="kobo.225.2">As you can see in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.226.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.227.1">.6</span></em><span class="koboSpan" id="kobo.228.1">, the real action is further down in the </span><span class="No-Break"><span class="koboSpan" id="kobo.229.1">debugger window.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer404">
<span class="koboSpan" id="kobo.230.1"><img alt="Figure 13.6: Nothing shows up in the Data tab until you select one of the sample sets to view as an array" src="image/B19644_13_006.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.231.1">Figure 13.6: Nothing shows up in the Data tab until you select one of the sample sets to view as an array</span></p>
<p><span class="koboSpan" id="kobo.232.1">Shift your attention to the </span><strong class="bold"><span class="koboSpan" id="kobo.233.1">Python Console</span></strong><span class="koboSpan" id="kobo.234.1"> panel, which appeared at the bottom of the project window when we ran our program in the console. </span><span class="koboSpan" id="kobo.234.2">On the right-hand side of the panel, indicated by the arrow, we can see a section that lists all the variables in our program and their respective values. </span><span class="koboSpan" id="kobo.234.3">For single variables such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.235.1">N</span></strong><span class="koboSpan" id="kobo.236.1">, this panel is sufficient. </span><span class="koboSpan" id="kobo.236.2">However, if you are using NumPy arrays, as we are, viewing the array in the context of a normal debugger window like this one </span><span class="No-Break"><span class="koboSpan" id="kobo.237.1">is problematic.</span></span></p>
<p><span class="koboSpan" id="kobo.238.1">If you click on the </span><strong class="bold"><span class="koboSpan" id="kobo.239.1">View as Array</span></strong><span class="koboSpan" id="kobo.240.1"> link, which can also be activated by right-clicking the variable, you can see a spreadsheet-like table in the </span><strong class="bold"><span class="koboSpan" id="kobo.241.1">Data</span></strong><span class="koboSpan" id="kobo.242.1"> panel. </span><span class="koboSpan" id="kobo.242.2">Check out </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.243.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.244.1">.7</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.245.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer405">
<span class="koboSpan" id="kobo.246.1"><img alt="Figure 13.7: Having selected the X variable in the lower panel, the Data tab now displays the elements of the NumPy array within X" src="image/B19644_13_007.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.247.1">Figure 13.7: Having selected the X variable in the lower panel, the Data tab now displays the elements of the NumPy array within X</span></p>
<p><span class="koboSpan" id="kobo.248.1">As you can see, the </span><strong class="bold"><span class="koboSpan" id="kobo.249.1">Data</span></strong><span class="koboSpan" id="kobo.250.1"> panel fills with details on what you’ve selected in the lower console. </span><span class="koboSpan" id="kobo.250.2">I clicked on </span><strong class="bold"><span class="koboSpan" id="kobo.251.1">View as Array</span></strong><span class="koboSpan" id="kobo.252.1"> for </span><strong class="source-inline"><span class="koboSpan" id="kobo.253.1">X</span></strong><span class="koboSpan" id="kobo.254.1">, and so I see </span><strong class="source-inline"><span class="koboSpan" id="kobo.255.1">X</span></strong><span class="koboSpan" id="kobo.256.1"> displayed as a long row of colored data. </span><span class="koboSpan" id="kobo.256.2">I can scroll to the right and inspect all 100 elements. </span><span class="koboSpan" id="kobo.256.3">Cells with high values are filled with </span><a id="_idIndexMarker1094"/><span class="koboSpan" id="kobo.257.1">warmer </span><a id="_idIndexMarker1095"/><span class="koboSpan" id="kobo.258.1">colors, while the ones with low values are filled with cooler colors. </span><span class="koboSpan" id="kobo.258.2">This provides you with contrast so you can visually detect differences between values without squinting at the </span><span class="No-Break"><span class="koboSpan" id="kobo.259.1">decimal place.</span></span></p>
<p><span class="koboSpan" id="kobo.260.1">The leftmost arrow in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.261.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.262.1">.7</span></em><span class="koboSpan" id="kobo.263.1"> shows you that </span><strong class="source-inline"><span class="koboSpan" id="kobo.264.1">X</span></strong><span class="koboSpan" id="kobo.265.1"> in the textbox above relates to </span><strong class="source-inline"><span class="koboSpan" id="kobo.266.1">X</span></strong><span class="koboSpan" id="kobo.267.1"> in the window below. </span><span class="koboSpan" id="kobo.267.2">You can change the value in the textbox to </span><strong class="source-inline"><span class="koboSpan" id="kobo.268.1">Y</span></strong><span class="koboSpan" id="kobo.269.1">, or any other valid variable name present in the lower console, and see the data represented more graphically above. </span><span class="koboSpan" id="kobo.269.2">The key here is the word </span><em class="italic"><span class="koboSpan" id="kobo.270.1">valid</span></em><span class="koboSpan" id="kobo.271.1">. </span><span class="koboSpan" id="kobo.271.2">The </span><strong class="bold"><span class="koboSpan" id="kobo.272.1">Data</span></strong><span class="koboSpan" id="kobo.273.1"> tab only shows NumPy arrays and pandas DataFrames. </span><span class="koboSpan" id="kobo.273.2">Clicking on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.274.1">N</span></strong><span class="koboSpan" id="kobo.275.1"> variable will display an error in the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.276.1">Data</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.277.1"> tab.</span></span></p>
<p><span class="koboSpan" id="kobo.278.1">To the right of the textbox is the formatter. </span><span class="koboSpan" id="kobo.278.2">This allows you to specify how the numbers in the </span><strong class="bold"><span class="koboSpan" id="kobo.279.1">Data</span></strong><span class="koboSpan" id="kobo.280.1"> tab appear. </span><span class="koboSpan" id="kobo.280.2">The formatting string uses the same format as normal Python </span><span class="No-Break"><span class="koboSpan" id="kobo.281.1">string formatting.</span></span></p>
<p><span class="koboSpan" id="kobo.282.1">When you select multiple variables in the console view, each variable will be displayed in its own tab as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.283.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.284.1">.8</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.285.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer406">
<span class="koboSpan" id="kobo.286.1"><img alt="Figure 13.8: Picking multiple variables in the console will open a tab for each variable in the Data tab" src="image/B19644_13_008.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.287.1">Figure 13.8: Picking multiple variables in the console will open a tab for each variable in the Data tab</span></p>
<p><span class="koboSpan" id="kobo.288.1">Just remember, this </span><a id="_idIndexMarker1096"/><span class="koboSpan" id="kobo.289.1">only </span><a id="_idIndexMarker1097"/><span class="koboSpan" id="kobo.290.1">works for NumPy arrays and pandas DataFrames. </span><span class="koboSpan" id="kobo.290.2">This data is a little boring since there’s just one row. </span><span class="koboSpan" id="kobo.290.3">Let’s try something a little spicier, so we can see more of the features in the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.291.1">Data</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.292.1"> tab.</span></span></p>
<p><span class="koboSpan" id="kobo.293.1">In the chapter code, you’ll find a file called </span><strong class="source-inline"><span class="koboSpan" id="kobo.294.1">meteor.py</span></strong><span class="koboSpan" id="kobo.295.1"> that only has two lines </span><span class="No-Break"><span class="koboSpan" id="kobo.296.1">in it:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.297.1">
import pandas as pd
meteor_data = pd.read_csv("./data/Meteorite_Langings.csv")</span></pre> <p><span class="koboSpan" id="kobo.298.1">This data comes from the </span><strong class="bold"><span class="koboSpan" id="kobo.299.1">National Aeronautical and Space Administration</span></strong><span class="koboSpan" id="kobo.300.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.301.1">NASA</span></strong><span class="koboSpan" id="kobo.302.1">) in </span><a id="_idIndexMarker1098"/><span class="koboSpan" id="kobo.303.1">the United States. </span><span class="koboSpan" id="kobo.303.2">You’ll find it, along with thousands of other freely available datasets, at </span><a href="https://data.gov"><span class="koboSpan" id="kobo.304.1">https://data.gov</span></a><span class="koboSpan" id="kobo.305.1">, all courtesy of me personally, since I pay a lot in taxes. </span><span class="koboSpan" id="kobo.305.2">Sure, others helped, but at least once per year, it feels like it is all up </span><span class="No-Break"><span class="koboSpan" id="kobo.306.1">to me.</span></span></p>
<p><span class="koboSpan" id="kobo.307.1">The data file contains NASA’s data on meteorite landings. </span><span class="koboSpan" id="kobo.307.2">Specifics can be found </span><span class="No-Break"><span class="koboSpan" id="kobo.308.1">at </span></span><a href="https://catalog.data.gov/dataset/meteorite-landings"><span class="No-Break"><span class="koboSpan" id="kobo.309.1">https://catalog.data.gov/dataset/meteorite-landings</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.310.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.311.1">There should be a run configuration for </span><strong class="source-inline"><span class="koboSpan" id="kobo.312.1">meteor_data.py</span></strong><span class="koboSpan" id="kobo.313.1"> in the project from the repository, but just in case, my settings are in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.314.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.315.1">.9</span></em><span class="koboSpan" id="kobo.316.1">. </span><span class="koboSpan" id="kobo.316.2">If you need a refresher on run configurations, we covered this topic in </span><a href="B19644_03.xhtml#_idTextAnchor052"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.317.1">Chapter 3</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.318.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer407">
<span class="koboSpan" id="kobo.319.1"><img alt="Figure 13.9: This is the run configuration settings dialog for the meteor.py file. Be sure that Run with Python Console is checked" src="image/B19644_13_009.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.320.1">Figure 13.9: This is the run configuration settings dialog for the meteor.py file. </span><span class="koboSpan" id="kobo.320.2">Be sure that Run with Python Console is checked</span></p>
<p><span class="koboSpan" id="kobo.321.1">As before, the key here is</span><a id="_idIndexMarker1099"/><span class="koboSpan" id="kobo.322.1"> to</span><a id="_idIndexMarker1100"/><span class="koboSpan" id="kobo.323.1"> make sure the file runs in </span><strong class="bold"><span class="koboSpan" id="kobo.324.1">Python Console</span></strong><span class="koboSpan" id="kobo.325.1"> so you get the panel view needed for SciView. </span><span class="koboSpan" id="kobo.325.2">Go ahead and run the file. </span><span class="koboSpan" id="kobo.325.3">You can see the result of my run in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.326.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.327.1">.10</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.328.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer408">
<span class="koboSpan" id="kobo.329.1"><img alt="Figure 13.10: My run of the meteor data has to be squished and stretched so you can see everything" src="image/B19644_13_010.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.330.1">Figure 13.10: My run of the meteor data has to be squished and stretched so you can see everything</span></p>
<p><span class="koboSpan" id="kobo.331.1">I had to seriously drag panels around to get it all to fit in the screenshot. </span><span class="koboSpan" id="kobo.331.2">Note that, this time, the button </span><a id="_idIndexMarker1101"/><span class="koboSpan" id="kobo.332.1">indicated </span><a id="_idIndexMarker1102"/><span class="koboSpan" id="kobo.333.1">by the arrow says </span><strong class="bold"><span class="koboSpan" id="kobo.334.1">View as DataFrame</span></strong><span class="koboSpan" id="kobo.335.1"> since this time we used pandas instead of NumPy. </span><span class="koboSpan" id="kobo.335.2">I’ve clicked it and the </span><strong class="bold"><span class="koboSpan" id="kobo.336.1">Data</span></strong><span class="koboSpan" id="kobo.337.1"> tab has loaded the DataFrame </span><span class="No-Break"><span class="koboSpan" id="kobo.338.1">for viewing.</span></span></p>
<h2 id="_idParaDest-318"><a id="_idTextAnchor325"/><span class="koboSpan" id="kobo.339.1">Filtering in the Data tab</span></h2>
<p><span class="koboSpan" id="kobo.340.1">The meteor dataset is a little more realistic. </span><span class="koboSpan" id="kobo.340.2">It contains a lot of values and it might make sense to filter on some of the fields. </span><span class="koboSpan" id="kobo.340.3">PyCharm gives you the ability to filter the data appearing in the data tab using either a wildcard or </span><span class="No-Break"><span class="koboSpan" id="kobo.341.1">an expression.</span></span></p>
<h3><span class="koboSpan" id="kobo.342.1">Filtering with a wildcard</span></h3>
<p><span class="koboSpan" id="kobo.343.1">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.344.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.345.1">.11</span></em><span class="koboSpan" id="kobo.346.1">, you </span><a id="_idIndexMarker1103"/><span class="koboSpan" id="kobo.347.1">can see I am hovering over the </span><strong class="source-inline"><span class="koboSpan" id="kobo.348.1">name</span></strong><span class="koboSpan" id="kobo.349.1"> column </span><a id="_idIndexMarker1104"/><span class="koboSpan" id="kobo.350.1">in the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.351.1">Data</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.352.1"> tab.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer409">
<span class="koboSpan" id="kobo.353.1"><img alt="Figure 13.11: Hovering over a column reveals a filter icon, which resembles a funnel" src="image/B19644_13_011.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.354.1">Figure 13.11: Hovering over a column reveals a filter icon, which resembles a funnel</span></p>
<p><span class="koboSpan" id="kobo.355.1">When I do this, a filter icon</span><a id="_idIndexMarker1105"/><span class="koboSpan" id="kobo.356.1"> appears. </span><span class="koboSpan" id="kobo.356.2">Click that icon to bring up your</span><a id="_idIndexMarker1106"/><span class="koboSpan" id="kobo.357.1"> filtering options as seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.358.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.359.1">.12</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.360.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer410">
<span class="koboSpan" id="kobo.361.1"><img alt="Figure 13.12: You can filter by expression or by substring (wildcard)" src="image/B19644_13_012.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.362.1">Figure 13.12: You can filter by expression or by substring (wildcard)</span></p>
<p><span class="koboSpan" id="kobo.363.1">Click on the </span><strong class="bold"><span class="koboSpan" id="kobo.364.1">Substring</span></strong><span class="koboSpan" id="kobo.365.1"> tab and let’s filter on </span><strong class="source-inline"><span class="koboSpan" id="kobo.366.1">Bal</span></strong><span class="koboSpan" id="kobo.367.1">. </span><span class="koboSpan" id="kobo.367.2">You can see mine in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.368.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.369.1">.13</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.370.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer411">
<span class="koboSpan" id="kobo.371.1"><img alt="Figure 13.13: We’re filtering the name column to show all names with the characters Bal somewhere in the name" src="image/B19644_13_013.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.372.1">Figure 13.13: We’re filtering the name column to show all names with the characters Bal somewhere in the name</span></p>
<p><span class="koboSpan" id="kobo.373.1">Note that the</span><a id="_idIndexMarker1107"/><span class="koboSpan" id="kobo.374.1"> trashcan icon lets you remove the filter. </span><span class="koboSpan" id="kobo.374.2">While the </span><a id="_idIndexMarker1108"/><span class="koboSpan" id="kobo.375.1">substring filter can be useful, the expression filter is far more powerful </span><span class="No-Break"><span class="koboSpan" id="kobo.376.1">and precise.</span></span></p>
<h3><span class="koboSpan" id="kobo.377.1">Filtering with expressions</span></h3>
<p><span class="koboSpan" id="kobo.378.1">Using </span><a id="_idIndexMarker1109"/><span class="koboSpan" id="kobo.379.1">expressions, you can be a little more selective. </span><span class="koboSpan" id="kobo.379.2">Meteors </span><a id="_idIndexMarker1110"/><span class="koboSpan" id="kobo.380.1">are pretty cool, but nobody is impressed by a tiny pebble. </span><span class="koboSpan" id="kobo.380.2">For example, let’s filter meteors larger than 10kg in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.381.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.382.1">.14</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.383.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer412">
<span class="koboSpan" id="kobo.384.1"><img alt="Figure 13.14: Filtering on the mass column where x (the value in the column) is greater than 10,000" src="image/B19644_13_014.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.385.1">Figure 13.14: Filtering on the mass column where x (the value in the column) is greater than 10,000</span></p>
<p><span class="koboSpan" id="kobo.386.1">There are quite a </span><a id="_idIndexMarker1111"/><span class="koboSpan" id="kobo.387.1">few! </span><span class="koboSpan" id="kobo.387.2">Now let’s filter to more recent strikes by filtering</span><a id="_idIndexMarker1112"/><span class="koboSpan" id="kobo.388.1"> to only those occurring from the year 2010 onward. </span><span class="koboSpan" id="kobo.388.2">Mine is in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.389.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.390.1">.15</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.391.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer413">
<span class="koboSpan" id="kobo.392.1"><img alt="Figure 13.15: Limit data to just meteor strikes during and after 2010" src="image/B19644_13_015.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.393.1">Figure 13.15: Limit data to just meteor strikes during and after 2010</span></p>
<p><span class="koboSpan" id="kobo.394.1">Thankfully, there are not as many, and the data ends with only one strike in 2013. </span><span class="koboSpan" id="kobo.394.2">As coincidence would have it, that’s the last year I paid my income taxes on time. </span><span class="koboSpan" id="kobo.394.3">I told you it was </span><span class="No-Break"><span class="koboSpan" id="kobo.395.1">all me.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.396.1">Dear Internal Revenue Service</span></p>
<p class="callout"><span class="koboSpan" id="kobo.397.1">That last line is what we in the writing biz call “a joke.” </span><span class="koboSpan" id="kobo.397.2">I know this is a foreign concept to you all, but trust me, everybody </span><span class="No-Break"><span class="koboSpan" id="kobo.398.1">else laughed.</span></span></p>
<p><span class="koboSpan" id="kobo.399.1">I am so </span><span class="No-Break"><span class="koboSpan" id="kobo.400.1">getting audited.</span></span></p>
<p><span class="koboSpan" id="kobo.401.1">Anyway, another thing we can see through our filtering experiment is there is missing data in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.402.1">reclat</span></strong><span class="koboSpan" id="kobo.403.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.404.1">reclong</span></strong><span class="koboSpan" id="kobo.405.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.406.1">GeoLocation</span></strong><span class="koboSpan" id="kobo.407.1"> fields. </span><span class="koboSpan" id="kobo.407.2">These were no doubt recorded in Area 51 where geolocation data is illegal. </span><span class="koboSpan" id="kobo.407.3">Nevertheless, this can be a quick way to check</span><a id="_idIndexMarker1113"/><span class="koboSpan" id="kobo.408.1"> your data for anomalies as part of creating a</span><a id="_idIndexMarker1114"/><span class="koboSpan" id="kobo.409.1"> data pipeline, which we’ll be covering in the </span><span class="No-Break"><span class="koboSpan" id="kobo.410.1">next chapter.</span></span></p>
<h3><span class="koboSpan" id="kobo.411.1">Exporting to files or new tabs</span></h3>
<p><span class="koboSpan" id="kobo.412.1">Take </span><a id="_idIndexMarker1115"/><span class="koboSpan" id="kobo.413.1">a look at the top of the </span><strong class="bold"><span class="koboSpan" id="kobo.414.1">Data</span></strong><span class="koboSpan" id="kobo.415.1"> tab in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.416.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.417.1">.16</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.418.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer414">
<span class="koboSpan" id="kobo.419.1"><img alt="Figure 13.16: You can export your data or pop it out into a new tab in the editor window" src="image/B19644_13_016.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.420.1">Figure 13.16: You can export your data or pop it out into a new tab in the editor window</span></p>
<p><span class="koboSpan" id="kobo.421.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.422.1">Data</span></strong><span class="koboSpan" id="kobo.423.1"> tab allows you to export your data to a </span><strong class="source-inline"><span class="koboSpan" id="kobo.424.1">.csv</span></strong><span class="koboSpan" id="kobo.425.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.426.1">.tsv</span></strong><span class="koboSpan" id="kobo.427.1"> file. </span><span class="koboSpan" id="kobo.427.2">This is pretty straightforward, so I think you can live without a screenshot. </span><span class="koboSpan" id="kobo.427.3">You can also pop the contents of your data tab in SciView into the regular tab in your editor view. </span><span class="koboSpan" id="kobo.427.4">I’ve done this in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.428.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.429.1">.17</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.430.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer415">
<span class="koboSpan" id="kobo.431.1"><img alt="Figure 13.17: I’ve popped the SciView Data tab contents into a tab in the main editor window" src="image/B19644_13_017.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.432.1">Figure 13.17: I’ve popped the SciView Data tab contents into a tab in the main editor window</span></p>
<p><span class="koboSpan" id="kobo.433.1">All totaled, the </span><strong class="bold"><span class="koboSpan" id="kobo.434.1">Data</span></strong><span class="koboSpan" id="kobo.435.1"> tab in SciView contains a lot of useful features for performing explorations on your data, whether it be raw, as with the meteor data, or generated through calculation, as with our earlier random set. </span><span class="koboSpan" id="kobo.435.2">When you combine this graphical way to view input</span><a id="_idIndexMarker1116"/><span class="koboSpan" id="kobo.436.1"> and output data with PyCharm’s cell mode described in the last chapter, you start to see the power of the data science tools in PyCharm. </span><span class="koboSpan" id="kobo.436.2">They are just a few simple panels, but there is so much we can do </span><span class="No-Break"><span class="koboSpan" id="kobo.437.1">with them!</span></span></p>
<h1 id="_idParaDest-319"><a id="_idTextAnchor326"/><span class="koboSpan" id="kobo.438.1">Understanding IPython and magic commands</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.439.1">IPython</span></strong><span class="koboSpan" id="kobo.440.1"> is an enhanced</span><a id="_idIndexMarker1117"/><span class="koboSpan" id="kobo.441.1"> interactive </span><a id="_idIndexMarker1118"/><span class="koboSpan" id="kobo.442.1">shell for the Python programming language. </span><span class="koboSpan" id="kobo.442.2">It provides a more feature-rich and user-friendly environment compared to the default Python interactive interpreter. </span><span class="koboSpan" id="kobo.442.3">IPython was developed to make interactive computing and data analysis tasks more convenient </span><span class="No-Break"><span class="koboSpan" id="kobo.443.1">and efficient.</span></span></p>
<p><span class="koboSpan" id="kobo.444.1">When working with IPython beyond the confines of PyCharm, you’ll find some features you won’t find in any standard console or REPL environment. </span><span class="koboSpan" id="kobo.444.2">The shell experienced is heavily enhanced to support features you’d expect within PyCharm, such as tab completion, syntax highlighting, and </span><span class="No-Break"><span class="koboSpan" id="kobo.445.1">history navigation.</span></span></p>
<p><span class="koboSpan" id="kobo.446.1">The tool allows for an array of rich display options. </span><span class="koboSpan" id="kobo.446.2">Imagine a command-line interface that includes the ability to work with images, videos, audio, and interactive widgets directly within the interactive environment. </span><span class="koboSpan" id="kobo.446.3">Obviously, you can execute Python code in the form of snippets, expressions, or entire scripts, and you do all of this in an </span><span class="No-Break"><span class="koboSpan" id="kobo.447.1">interactive fashion.</span></span></p>
<p><span class="koboSpan" id="kobo.448.1">IPython also makes it easier to work in a distributed compute environment. </span><span class="koboSpan" id="kobo.448.2">As you may know, threaded computing is effectively disabled in most mainline Python interpreters owing to</span><a id="_idIndexMarker1119"/><span class="koboSpan" id="kobo.449.1"> the </span><strong class="bold"><span class="koboSpan" id="kobo.450.1">Global Interpreter Lock </span></strong><span class="koboSpan" id="kobo.451.1">(</span><strong class="bold"><span class="koboSpan" id="kobo.452.1">GIL</span></strong><span class="koboSpan" id="kobo.453.1">). </span><span class="koboSpan" id="kobo.453.2">The GIL is a mechanism in the CPython interpreter, the most widely used implementation of Python. </span><span class="koboSpan" id="kobo.453.3">The GIL is a mutex (or a lock) that only allows one thread to execute in the interpreter at a time, even on multi-core systems. </span><span class="koboSpan" id="kobo.453.4">This means that in a multithreaded Python program, only one thread can execute Python bytecode at any given moment, regardless of how many CPU cores </span><span class="No-Break"><span class="koboSpan" id="kobo.454.1">are available.</span></span></p>
<p><span class="koboSpan" id="kobo.455.1">The GIL </span><a id="_idIndexMarker1120"/><span class="koboSpan" id="kobo.456.1">was</span><a id="_idIndexMarker1121"/><span class="koboSpan" id="kobo.457.1"> introduced to simplify memory management and avoid potential conflicts that could arise from multiple threads accessing and modifying Python objects concurrently. </span><span class="koboSpan" id="kobo.457.2">While the GIL ensures that Python memory management remains simpler and safer, it also has implications for multithreaded programs insofar as Python programs tend to struggle to actually utilize all the compute resources available on a system that supports </span><span class="No-Break"><span class="koboSpan" id="kobo.458.1">multiple threads.</span></span></p>
<p><span class="koboSpan" id="kobo.459.1">While IPython doesn’t have any secret sauce that defeats the GIL limitation, it does provide a module called </span><strong class="source-inline"><span class="koboSpan" id="kobo.460.1">ipython.parallel</span></strong><span class="koboSpan" id="kobo.461.1"> that makes it easy to work with parallel compute resources. </span><span class="koboSpan" id="kobo.461.2">You can create clusters of IPython engines that can run code in parallel across multiple processes or even </span><span class="No-Break"><span class="koboSpan" id="kobo.462.1">multiple machines.</span></span></p>
<p><span class="koboSpan" id="kobo.463.1">IPython seems like something we should be very interested in, given that it is obviously a powerful tool </span><a id="_idIndexMarker1122"/><span class="koboSpan" id="kobo.464.1">that </span><a id="_idIndexMarker1123"/><span class="koboSpan" id="kobo.465.1">more fully enables a mode of enriched stepwise data interaction that is the modus operandi of modern data science workflows. </span><span class="koboSpan" id="kobo.465.2">The standing question then is, how can we leverage IPython </span><span class="No-Break"><span class="koboSpan" id="kobo.466.1">within PyCharm?</span></span></p>
<h2 id="_idParaDest-320"><a id="_idTextAnchor327"/><span class="koboSpan" id="kobo.467.1">Installing and setting up IPython</span></h2>
<p><span class="koboSpan" id="kobo.468.1">Installing IPython is </span><a id="_idIndexMarker1124"/><span class="koboSpan" id="kobo.469.1">done </span><a id="_idIndexMarker1125"/><span class="koboSpan" id="kobo.470.1">like any other Python library. </span><span class="koboSpan" id="kobo.470.2">You can use </span><strong class="source-inline"><span class="koboSpan" id="kobo.471.1">pip install ipython</span></strong><span class="koboSpan" id="kobo.472.1"> from PyCharm’s terminal, or you can use the package management screen we’ve been working with since </span><a href="B19644_03.xhtml#_idTextAnchor052"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.473.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.474.1">. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.475.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.476.1">.18</span></em><span class="koboSpan" id="kobo.477.1"> shows me about to install using the </span><strong class="bold"><span class="koboSpan" id="kobo.478.1">Python Packages</span></strong><span class="koboSpan" id="kobo.479.1"> panel </span><span class="No-Break"><span class="koboSpan" id="kobo.480.1">in PyCharm.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer416">
<span class="koboSpan" id="kobo.481.1"><img alt="Figure 13.18: I’ve searched for ipython in the Python Packages pane and I’m about to install it to my project using conda" src="image/B19644_13_018.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.482.1">Figure 13.18: I’ve searched for ipython in the Python Packages pane and I’m about to install it to my project using conda</span></p>
<p><span class="koboSpan" id="kobo.483.1">If you plan to work with IPython often, you might consider installing this one globally so it is available to all your projects. </span><span class="koboSpan" id="kobo.483.2">You’d do this by simply installing IPython outside the confines of a virtual environment using </span><strong class="source-inline"><span class="koboSpan" id="kobo.484.1">pip</span></strong><span class="koboSpan" id="kobo.485.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.486.1">conda</span></strong><span class="koboSpan" id="kobo.487.1">, or whichever tool you prefer for </span><span class="No-Break"><span class="koboSpan" id="kobo.488.1">package management.</span></span></p>
<p><span class="koboSpan" id="kobo.489.1">Once IPython is available, PyCharm will use it owing to the default settings in the IDE’s </span><strong class="bold"><span class="koboSpan" id="kobo.490.1">Build, Execution, Deployment</span></strong><span class="koboSpan" id="kobo.491.1"> settings, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.492.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.493.1">.19</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.494.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer417">
<span class="koboSpan" id="kobo.495.1"><img alt="Figure 13.19: By default, PyCharm will use IPython for its console if it is available" src="image/B19644_13_019.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.496.1">Figure 13.19: By default, PyCharm will use IPython for its console if it is available</span></p>
<p><span class="koboSpan" id="kobo.497.1">We covered</span><a id="_idIndexMarker1126"/><span class="koboSpan" id="kobo.498.1"> settings</span><a id="_idIndexMarker1127"/><span class="koboSpan" id="kobo.499.1"> in great detail in </span><a href="B19644_02.xhtml#_idTextAnchor028"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.500.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.501.1">, so if you’ve skipped to this chapter and you’re not sure how to get to the settings, go review the earlier chapter. </span><span class="koboSpan" id="kobo.501.2">Once IPython is available in your project, you need to close or cycle any consoles that might be open. </span><span class="koboSpan" id="kobo.501.3">So far, we’ve run three programs that we intentionally set to run in the console, so you won’t see any change to those since they were running before we installed IPython. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.502.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.503.1">.20</span></em><span class="koboSpan" id="kobo.504.1"> shows you what an IPython prompt </span><span class="No-Break"><span class="koboSpan" id="kobo.505.1">looks like.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer418">
<span class="koboSpan" id="kobo.506.1"><img alt="Figure 13.20: The IPython prompt appears after I close or restart my existing console" src="image/B19644_13_020.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.507.1">Figure 13.20: The IPython prompt appears after I close or restart my existing console</span></p>
<p><span class="koboSpan" id="kobo.508.1">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.509.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.510.1">.20</span></em><span class="koboSpan" id="kobo.511.1">, I’ve drawn an arrow to remind you how to open the console, if it isn’t already open. </span><span class="koboSpan" id="kobo.511.2">If you don’t see that icon, try clicking the three-dot icon above the arrow. </span><span class="koboSpan" id="kobo.511.3">If you still can’t find it, review </span><a href="B19644_02.xhtml#_idTextAnchor028"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.512.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.513.1"> where we talk about working with the console for the </span><span class="No-Break"><span class="koboSpan" id="kobo.514.1">first time.</span></span></p>
<p><span class="koboSpan" id="kobo.515.1">As I mentioned, if </span><a id="_idIndexMarker1128"/><span class="koboSpan" id="kobo.516.1">you</span><a id="_idIndexMarker1129"/><span class="koboSpan" id="kobo.517.1"> already have consoles open, they need to be restarted. </span><span class="koboSpan" id="kobo.517.2">I’ve circled the button for this in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.518.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.519.1">.20</span></em><span class="koboSpan" id="kobo.520.1">. </span><span class="koboSpan" id="kobo.520.2">When the console is restarted, you should see a different prompt beginning with the word </span><strong class="source-inline"><span class="koboSpan" id="kobo.521.1">In</span></strong><span class="koboSpan" id="kobo.522.1">, in contrast to the normal prompt, which displayed </span><strong class="source-inline"><span class="koboSpan" id="kobo.523.1">&gt;&gt;&gt;</span></strong><span class="koboSpan" id="kobo.524.1"> symbols. </span><span class="koboSpan" id="kobo.524.2">Following the word </span><strong class="source-inline"><span class="koboSpan" id="kobo.525.1">In</span></strong><span class="koboSpan" id="kobo.526.1">, you’ll see some square brackets containing a number. </span><span class="koboSpan" id="kobo.526.2">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.527.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.528.1">.20</span></em><span class="koboSpan" id="kobo.529.1">, it’s showing </span><strong class="source-inline"><span class="koboSpan" id="kobo.530.1">2</span></strong><span class="koboSpan" id="kobo.531.1">. </span><span class="koboSpan" id="kobo.531.2">This number indicates the order of commands entered so far. </span><span class="koboSpan" id="kobo.531.3">If you look at the top of the new IPython console, you’ll see a few commands were entered automatically, which import the </span><strong class="source-inline"><span class="koboSpan" id="kobo.532.1">sys</span></strong><span class="koboSpan" id="kobo.533.1"> library, print out the Python version, and extend our path. </span><span class="koboSpan" id="kobo.533.2">That’s three commands, but remember we start at </span><strong class="source-inline"><span class="koboSpan" id="kobo.534.1">0</span></strong><span class="koboSpan" id="kobo.535.1">. </span><span class="koboSpan" id="kobo.535.2">The next command you enter will be the fourth command and will be labeled </span><span class="No-Break"><span class="koboSpan" id="kobo.536.1">as </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.537.1">3</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.538.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.539.1">If PyCharm were a video game, installing IPython would be like unlocking the super gun, sword, or magic power you can use to vanquish your unwitting and utterly unprepared foes. </span><span class="koboSpan" id="kobo.539.2">If this is your first time, you probably can’t wait to explode some data zombies, so let’s take a look at IPython’s magic commands. </span><span class="koboSpan" id="kobo.539.3">Hyperbole aside, </span><em class="italic"><span class="koboSpan" id="kobo.540.1">magic commands</span></em><span class="koboSpan" id="kobo.541.1"> are literally </span><a id="_idIndexMarker1130"/><span class="koboSpan" id="kobo.542.1">what</span><a id="_idIndexMarker1131"/><span class="koboSpan" id="kobo.543.1"> they </span><span class="No-Break"><span class="koboSpan" id="kobo.544.1">are called!</span></span></p>
<h2 id="_idParaDest-321"><a id="_idTextAnchor328"/><span class="koboSpan" id="kobo.545.1">Introducing IPython magic commands</span></h2>
<p><span class="koboSpan" id="kobo.546.1">In IPython, a </span><strong class="bold"><span class="koboSpan" id="kobo.547.1">magic command</span></strong><span class="koboSpan" id="kobo.548.1"> is a </span><a id="_idIndexMarker1132"/><span class="koboSpan" id="kobo.549.1">special command that starts with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.550.1">%</span></strong><span class="koboSpan" id="kobo.551.1"> (for line magics) or </span><strong class="source-inline"><span class="koboSpan" id="kobo.552.1">%%</span></strong><span class="koboSpan" id="kobo.553.1"> (for cell magics) symbol and is used within an IPython session or Jupyter notebook cell. </span><span class="koboSpan" id="kobo.553.2">These magic commands provide shortcuts for performing various tasks, from running code with specific options to interacting with the environment or controlling IPython’s behavior. </span><span class="koboSpan" id="kobo.553.3">Magic commands are a convenient way to execute common operations without writing </span><span class="No-Break"><span class="koboSpan" id="kobo.554.1">extensive code.</span></span></p>
<p><span class="koboSpan" id="kobo.555.1">There are two types of </span><span class="No-Break"><span class="koboSpan" id="kobo.556.1">magic commands:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.557.1">Line magics</span></strong><span class="koboSpan" id="kobo.558.1">: Line </span><a id="_idIndexMarker1133"/><span class="koboSpan" id="kobo.559.1">magics are prefixed with a single </span><strong class="source-inline"><span class="koboSpan" id="kobo.560.1">%</span></strong><span class="koboSpan" id="kobo.561.1"> symbol</span><a id="_idIndexMarker1134"/><span class="koboSpan" id="kobo.562.1"> and are used on a single line. </span><span class="koboSpan" id="kobo.562.2">They typically take arguments and options to modify their behavior. </span><span class="koboSpan" id="kobo.562.3">For example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.563.1">%run script.py</span></strong><span class="koboSpan" id="kobo.564.1"> can be used to run an external script within the </span><span class="No-Break"><span class="koboSpan" id="kobo.565.1">IPython session.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.566.1">Cell magics</span></strong><span class="koboSpan" id="kobo.567.1">: Cell </span><a id="_idIndexMarker1135"/><span class="koboSpan" id="kobo.568.1">magics are prefixed with </span><strong class="source-inline"><span class="koboSpan" id="kobo.569.1">%%</span></strong><span class="koboSpan" id="kobo.570.1"> and are used at the beginning of a cell. </span><span class="koboSpan" id="kobo.570.2">They allow you to affect the entire cell’s content. </span><span class="koboSpan" id="kobo.570.3">For example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.571.1">%%time</span></strong><span class="koboSpan" id="kobo.572.1"> can be used to measure the execution time of the entire </span><span class="No-Break"><span class="koboSpan" id="kobo.573.1">cell’s code.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.574.1">Here are a few common examples of magic commands you’ll </span><span class="No-Break"><span class="koboSpan" id="kobo.575.1">use daily:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.576.1">%run script.py</span></strong><span class="koboSpan" id="kobo.577.1">: Runs an external Python script in the </span><span class="No-Break"><span class="koboSpan" id="kobo.578.1">IPython session.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.579.1">%timeit</span></strong><span class="koboSpan" id="kobo.580.1">: Measures the execution time of a Python statement </span><span class="No-Break"><span class="koboSpan" id="kobo.581.1">or expression.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.582.1">%matplotlib inline</span></strong><span class="koboSpan" id="kobo.583.1">: Configures </span><strong class="source-inline"><span class="koboSpan" id="kobo.584.1">matplotlib</span></strong><span class="koboSpan" id="kobo.585.1"> to display plots directly in </span><span class="No-Break"><span class="koboSpan" id="kobo.586.1">the notebook.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.587.1">%%writefile filename.txt</span></strong><span class="koboSpan" id="kobo.588.1">: Writes the contents of a notebook cell to a file </span><span class="No-Break"><span class="koboSpan" id="kobo.589.1">named </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.590.1">filename.txt</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.591.1">.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.592.1">%load_ext extension_name</span></strong><span class="koboSpan" id="kobo.593.1">: Loads a specific </span><span class="No-Break"><span class="koboSpan" id="kobo.594.1">IPython extension.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.595.1">%%html</span></strong><span class="koboSpan" id="kobo.596.1">: Renders the content of a cell </span><span class="No-Break"><span class="koboSpan" id="kobo.597.1">as HTML.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.598.1">%reset</span></strong><span class="koboSpan" id="kobo.599.1">: Resets the namespace by removing all names defined by </span><span class="No-Break"><span class="koboSpan" id="kobo.600.1">the user.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.601.1">object_name?</span></strong><span class="koboSpan" id="kobo.602.1">: Don’t take me literally on this one. </span><span class="koboSpan" id="kobo.602.2">You don’t type </span><em class="italic"><span class="koboSpan" id="kobo.603.1">object_name?</span></em><span class="koboSpan" id="kobo.604.1">. </span><span class="koboSpan" id="kobo.604.2">Instead, you type the name of an object you’ve instantiated. </span><span class="koboSpan" id="kobo.604.3">Maybe we should just do this in just a moment, so </span><span class="No-Break"><span class="koboSpan" id="kobo.605.1">you understand.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.606.1">By now, you’re starting to smell what we’re cooking up here. </span><span class="koboSpan" id="kobo.606.2">We’ve seen cell mode in </span><a href="B19644_12.xhtml#_idTextAnchor298"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.607.1">Chapter 12</span></em></span></a><span class="koboSpan" id="kobo.608.1">, but now, with IPython, there is a lot more we can do with a cell using these magic commands. </span><span class="koboSpan" id="kobo.608.2">Like any good magic spell from the movies, there is just enough cryptic but short syntax to learn, which adds to the mystique and makes you feel just a little more elite than your </span><span class="No-Break"><span class="koboSpan" id="kobo.609.1">non-magic-using colleagues.</span></span></p>
<p><span class="koboSpan" id="kobo.610.1">Let’s try a few out, </span><span class="No-Break"><span class="koboSpan" id="kobo.611.1">shall we?</span></span></p>
<p><span class="koboSpan" id="kobo.612.1">In your IPython </span><a id="_idIndexMarker1136"/><span class="koboSpan" id="kobo.613.1">console, type </span><strong class="source-inline"><span class="koboSpan" id="kobo.614.1">a = 1</span></strong><span class="koboSpan" id="kobo.615.1">. </span><span class="koboSpan" id="kobo.615.2">Now, let’s try the </span><strong class="source-inline"><span class="koboSpan" id="kobo.616.1">object_name?</span></strong><span class="koboSpan" id="kobo.617.1"> magic. </span><span class="koboSpan" id="kobo.617.2">You don’t type </span><em class="italic"><span class="koboSpan" id="kobo.618.1">object_name?</span></em><span class="koboSpan" id="kobo.619.1">; instead, you type </span><strong class="source-inline"><span class="koboSpan" id="kobo.620.1">a?</span></strong><span class="koboSpan" id="kobo.621.1">. </span><span class="koboSpan" id="kobo.621.2">The name of the object is </span><strong class="source-inline"><span class="koboSpan" id="kobo.622.1">a</span></strong><span class="koboSpan" id="kobo.623.1"> and you follow it with a question mark as if you were Canadian or Australian. </span><span class="koboSpan" id="kobo.623.2">Whatever object name you use, assuming it is valid, you’ll get back information about that object. </span><span class="koboSpan" id="kobo.623.3">You can see my result in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.624.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.625.1">.21</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.626.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer419">
<span class="koboSpan" id="kobo.627.1"><img alt="Figure 13.21: How’s it goin, a?" src="image/B19644_13_021.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.628.1">Figure 13.21: How’s it goin, a?</span></p>
<p><span class="koboSpan" id="kobo.629.1">We’ve learned a lot about </span><strong class="source-inline"><span class="koboSpan" id="kobo.630.1">a</span></strong><span class="koboSpan" id="kobo.631.1">, eh? </span><span class="koboSpan" id="kobo.631.2">Okay, eh, let’s try another one. </span><span class="koboSpan" id="kobo.631.3">Type </span><strong class="source-inline"><span class="koboSpan" id="kobo.632.1">%precision 4</span></strong><span class="koboSpan" id="kobo.633.1">. </span><span class="koboSpan" id="kobo.633.2">The result should be </span><strong class="source-inline"><span class="koboSpan" id="kobo.634.1">'%.4f'</span></strong><span class="koboSpan" id="kobo.635.1">. </span><span class="koboSpan" id="kobo.635.2">This tells us we’ve set our session to four decimals of precision. </span><span class="koboSpan" id="kobo.635.3">Let’s test that by typing in </span><span class="No-Break"><span class="koboSpan" id="kobo.636.1">this code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.637.1">
import math
math.e</span></pre> <p><span class="koboSpan" id="kobo.638.1">Lowercase </span><strong class="source-inline"><span class="koboSpan" id="kobo.639.1">e</span></strong><span class="koboSpan" id="kobo.640.1"> is a reference</span><a id="_idIndexMarker1137"/><span class="koboSpan" id="kobo.641.1"> to </span><strong class="bold"><span class="koboSpan" id="kobo.642.1">Euler’s constant</span></strong><span class="koboSpan" id="kobo.643.1">, which is the base for the natural logarithm. </span><span class="koboSpan" id="kobo.643.2">It is similar to pi in that it is a repeating decimal with no terminus. </span><span class="koboSpan" id="kobo.643.3">The constant </span><strong class="source-inline"><span class="koboSpan" id="kobo.644.1">e</span></strong><span class="koboSpan" id="kobo.645.1"> to 10 places is 2.7182818285. </span><span class="koboSpan" id="kobo.645.2">We, though, are set for 4 decimal places of precision, so the result from IPython should show </span><strong class="source-inline"><span class="koboSpan" id="kobo.646.1">2.7183</span></strong><span class="koboSpan" id="kobo.647.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.648.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.649.1">.22</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.650.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer420">
<span class="koboSpan" id="kobo.651.1"><img alt="Figure 13.22: Having set our precision to four decimal places, we can see the constant e is rendered properly" src="image/B19644_13_022.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.652.1">Figure 13.22: Having set our precision to four decimal places, we can see the constant e is rendered properly</span></p>
<p><span class="koboSpan" id="kobo.653.1">Let’s try one </span><a id="_idIndexMarker1138"/><span class="koboSpan" id="kobo.654.1">more. </span><span class="koboSpan" id="kobo.654.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.655.1">%%timeit</span></strong><span class="koboSpan" id="kobo.656.1"> magic is very useful during the creation of algorithms. </span><span class="koboSpan" id="kobo.656.2">Algorithms are simply repeatable sets of instructions; however, in order to be useful, an algorithm needs to be efficient. </span><span class="koboSpan" id="kobo.656.3">Efficiency is judged by two vectors: time needed to complete and space required to work. </span><span class="koboSpan" id="kobo.656.4">For example, the </span><strong class="bold"><span class="koboSpan" id="kobo.657.1">National Health System</span></strong><span class="koboSpan" id="kobo.658.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.659.1">NHS</span></strong><span class="koboSpan" id="kobo.660.1">) in </span><a id="_idIndexMarker1139"/><span class="koboSpan" id="kobo.661.1">England has devised an algorithm that matches organ donors to recipients based on a number of complicated factors. </span><span class="koboSpan" id="kobo.661.2">It is meant to match an organ to a donor in a way that minimizes risks of tissue rejection, among other factors. </span><span class="koboSpan" id="kobo.661.3">As you can imagine, this is a complicated algorithm that has to operate against a dataset containing thousands of registered donors and thousands of registered recipients. </span><span class="koboSpan" id="kobo.661.4">When an organ becomes available, it has a limited shelf life. </span><span class="koboSpan" id="kobo.661.5">If the matching algorithm takes too long to generate a match, the organ becomes unviable for transplant, and the algorithm is effectively useless. </span><span class="koboSpan" id="kobo.661.6">We covered profiling in </span><a href="B19644_06.xhtml#_idTextAnchor145"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.662.1">Chapter 6</span></em></span></a><span class="koboSpan" id="kobo.663.1">, but this was really meant for software engineering workflows to help find bottlenecks </span><span class="No-Break"><span class="koboSpan" id="kobo.664.1">in execution.</span></span></p>
<p><span class="koboSpan" id="kobo.665.1">In data science, we’re operating outside the confines of a typical software project, so it makes sense to time individual steps to at least gain some insight into how a step of our calculations might scale. </span><span class="koboSpan" id="kobo.665.2">Even if our objective isn’t to create an algorithm, we still have to deal with practical limitations on time and compute space (such as memory and storage) in our regular </span><span class="No-Break"><span class="koboSpan" id="kobo.666.1">exploratory work.</span></span></p>
<p><span class="koboSpan" id="kobo.667.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.668.1">%%timeit</span></strong><span class="koboSpan" id="kobo.669.1"> magic then becomes an integral part of our work. </span><span class="koboSpan" id="kobo.669.2">Now that I’ve spent all this time building up a huge example, let’s try it out with something laughably trivial in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.670.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.671.1">.23</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.672.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer421">
<span class="koboSpan" id="kobo.673.1"><img alt="Figure 13.23: We’re trying out %﻿%timeit with a simple sort to find the operation completes in around 318 ns" src="image/B19644_13_023.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.674.1">Figure 13.23: We’re trying out %%timeit with a simple sort to find the operation completes in around 318 ns</span></p>
<p><span class="koboSpan" id="kobo.675.1">This truly was </span><a id="_idIndexMarker1140"/><span class="koboSpan" id="kobo.676.1">a trivial task. </span><span class="koboSpan" id="kobo.676.2">Start by typing </span><strong class="source-inline"><span class="koboSpan" id="kobo.677.1">%%timeit</span></strong><span class="koboSpan" id="kobo.678.1"> in the IPython console. </span><span class="koboSpan" id="kobo.678.2">When you press </span><em class="italic"><span class="koboSpan" id="kobo.679.1">Enter</span></em><span class="koboSpan" id="kobo.680.1">, it takes you to the next line. </span><span class="koboSpan" id="kobo.680.2">In the second line, we’re creating a list with the numbers 0 through 9 in reverse order. </span><span class="koboSpan" id="kobo.680.3">On the last line, we’re sorting them back into their normal order. </span><span class="koboSpan" id="kobo.680.4">This is super boring! </span><span class="koboSpan" id="kobo.680.5">Hit </span><em class="italic"><span class="koboSpan" id="kobo.681.1">Enter</span></em><span class="koboSpan" id="kobo.682.1"> on the last blank line to run the code. </span><span class="koboSpan" id="kobo.682.2">Look at what </span><strong class="source-inline"><span class="koboSpan" id="kobo.683.1">%%timeit</span></strong><span class="koboSpan" id="kobo.684.1"> did! </span><span class="koboSpan" id="kobo.684.2">It could have just started a clock, run the script, then stopped the clock and reported the delta. </span><span class="koboSpan" id="kobo.684.3">Instead, </span><strong class="source-inline"><span class="koboSpan" id="kobo.685.1">%%timeit</span></strong><span class="koboSpan" id="kobo.686.1"> ran this code over and over to gain a sample size where it can compute a mean and standard deviation. </span><span class="koboSpan" id="kobo.686.2">This gives us better and more accurate insight into how long this code will take to run. </span><span class="koboSpan" id="kobo.686.3">Naturally, different computers will perform differently. </span><span class="koboSpan" id="kobo.686.4">For me, it ran in 318 nanoseconds plus or minus </span><span class="No-Break"><span class="koboSpan" id="kobo.687.1">3.44 nanoseconds.</span></span></p>
<p><span class="koboSpan" id="kobo.688.1">Here, we have considered three of the most common magic commands in IPython. </span><span class="koboSpan" id="kobo.688.2">Of course, there are many other useful commands that you can take advantage of, which can be found in IPython’s official </span><span class="No-Break"><span class="koboSpan" id="kobo.689.1">documentation: </span></span><a href="https://ipython.readthedocs.io/en/stable/index.html"><span class="No-Break"><span class="koboSpan" id="kobo.690.1">https://ipython.readthedocs.io/en/stable/index.html</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.691.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.692.1">With that said, the main purpose of IPython is not simply the ability to utilize convenient APIs to facilitate specific tasks such as variable inspection, formatting, or profiling—IPython actually uses those functionalities to power its underlying interactive characteristics. </span><span class="koboSpan" id="kobo.692.2">In the context of data science projects, IPython, when used in PyCharm, offers a great way</span><a id="_idIndexMarker1141"/><span class="koboSpan" id="kobo.693.1"> for us to inspect and test small blocks of code before using them in a </span><span class="No-Break"><span class="koboSpan" id="kobo.694.1">large program.</span></span></p>
<p><span class="koboSpan" id="kobo.695.1">With that, let’s move on to the next section, where we will consider the other notable support PyCharm offers for scientific </span><span class="No-Break"><span class="koboSpan" id="kobo.696.1">computing—Jupyter notebooks.</span></span></p>
<h1 id="_idParaDest-322"><a id="_idTextAnchor329"/><span class="koboSpan" id="kobo.697.1">Leveraging Jupyter notebooks</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.698.1">Jupyter notebooks</span></strong><span class="koboSpan" id="kobo.699.1"> are </span><a id="_idIndexMarker1142"/><span class="koboSpan" id="kobo.700.1">arguably the most-used tool in Python scientific computing and data science projects. </span><span class="koboSpan" id="kobo.700.2">In this section, we will briefly discuss the basics of Jupyter notebooks as well as the reasons why they are a great tool for data analysis purposes. </span><span class="koboSpan" id="kobo.700.3">Then, we will consider the way PyCharm supports the usage of </span><span class="No-Break"><span class="koboSpan" id="kobo.701.1">these notebooks.</span></span></p>
<p><span class="koboSpan" id="kobo.702.1">We will be working with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.703.1">jupyter_notebooks</span></strong><span class="koboSpan" id="kobo.704.1"> project in the chapter source. </span><span class="koboSpan" id="kobo.704.2">Don’t forget you’ll need to install the requirements within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.705.1">requirements.txt</span></strong><span class="koboSpan" id="kobo.706.1"> file in a virtual environment in order to use the sample project. </span><span class="koboSpan" id="kobo.706.2">If you need a refresher on how to do this, refer back to </span><a href="B19644_03.xhtml#_idTextAnchor052"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.707.1">Chapter 3</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.708.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.709.1">Even though we will be writing code in Jupyter notebooks, it is beneficial to first consider a bare-bones program in a traditional Python script so that we can fully appreciate the advantages of using a notebook later on. </span><span class="koboSpan" id="kobo.709.2">Let’s look at the </span><strong class="source-inline"><span class="koboSpan" id="kobo.710.1">main.py</span></strong><span class="koboSpan" id="kobo.711.1"> file and see how we can work with it. </span><span class="koboSpan" id="kobo.711.2">We can see that this file contains the same program from the previous section, where we randomly generate a dataset of three attributes (</span><strong class="source-inline"><span class="koboSpan" id="kobo.712.1">x</span></strong><span class="koboSpan" id="kobo.713.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.714.1">y</span></strong><span class="koboSpan" id="kobo.715.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.716.1">z</span></strong><span class="koboSpan" id="kobo.717.1">) and consider their </span><span class="No-Break"><span class="koboSpan" id="kobo.718.1">correlation matrix:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.719.1">
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
# Generate sample data
x = np.random.rand(50,)
y = x * 2 + np.random.normal(0, 0.3, 50)
z = np.random.rand(50,)
df = pd.DataFrame({
'x': x,
'y': y,
'z': z
})
# Compute and show correlation matrix
corr_mat = df.corr()
plt.matshow(corr_mat)
plt.show()</span></pre> <p><span class="koboSpan" id="kobo.720.1">This is roughly the same</span><a id="_idIndexMarker1143"/><span class="koboSpan" id="kobo.721.1"> code we used earlier in this chapter when we wanted to expose the heatmap features in PyCharm when reviewing a correlational matrix. </span><span class="koboSpan" id="kobo.721.2">Here, we have added the last two lines, which are different. </span><span class="koboSpan" id="kobo.721.3">Instead of a heatmap, this time we’re drawing a scatter plot. </span><span class="koboSpan" id="kobo.721.4">I explained earlier that we have intentionally and artificially introduced correlation into our otherwise randomly generated data. </span><span class="koboSpan" id="kobo.721.5">Examine where we set </span><strong class="source-inline"><span class="koboSpan" id="kobo.722.1">y</span></strong><span class="koboSpan" id="kobo.723.1"> and you’ll see we multiplied the matrix from </span><strong class="source-inline"><span class="koboSpan" id="kobo.724.1">x</span></strong><span class="koboSpan" id="kobo.725.1"> by 2, then added some small numbers from another random sample generation. </span><span class="koboSpan" id="kobo.725.2">This will make </span><strong class="source-inline"><span class="koboSpan" id="kobo.726.1">y</span></strong><span class="koboSpan" id="kobo.727.1"> appear to be roughly, but not exactly, correlated to </span><strong class="source-inline"><span class="koboSpan" id="kobo.728.1">x</span></strong><span class="koboSpan" id="kobo.729.1"> allowing us to see a plausible, though contrived, correlation matrix. </span><span class="koboSpan" id="kobo.729.2">This proves out when we run the file. </span><span class="koboSpan" id="kobo.729.3">My result is shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.730.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.731.1">.24</span></em><span class="koboSpan" id="kobo.732.1">. </span><span class="koboSpan" id="kobo.732.2">Don’t forget that our data is random, so yours will not precisely </span><span class="No-Break"><span class="koboSpan" id="kobo.733.1">match mine.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer422">
<span class="koboSpan" id="kobo.734.1"><img alt="Figure 13.24: This is the scatter plot produced by our code" src="image/B19644_13_024.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.735.1">Figure 13.24: This is the scatter plot produced by our code</span></p>
<p><span class="koboSpan" id="kobo.736.1">Like I said, there’s</span><a id="_idIndexMarker1144"/><span class="koboSpan" id="kobo.737.1"> nothing new or amazing here besides the change from a heatmap to a scattelot. </span><span class="koboSpan" id="kobo.737.2">We ran this as a point of comparison for our discussion of </span><span class="No-Break"><span class="koboSpan" id="kobo.738.1">Jupyter notebooks.</span></span></p>
<h1 id="_idParaDest-323"><a id="_idTextAnchor330"/><span class="koboSpan" id="kobo.739.1">Understanding Jupyter basics</span></h1>
<p><span class="koboSpan" id="kobo.740.1">Jupyter notebooks are</span><a id="_idIndexMarker1145"/><span class="koboSpan" id="kobo.741.1"> built on the idea of iterative development. </span><span class="koboSpan" id="kobo.741.2">In any development effort regardless of what you are creating, breaking a large project into smaller pieces always yields rewards. </span><span class="koboSpan" id="kobo.741.3">Nobody at the Ford Motor Company just builds a car. </span><span class="koboSpan" id="kobo.741.4">They build millions of pieces that are later assembled into a car. </span><span class="koboSpan" id="kobo.741.5">Each piece can be designed, produced, tested, and inspected as </span><span class="No-Break"><span class="koboSpan" id="kobo.742.1">individual pieces.</span></span></p>
<p><span class="koboSpan" id="kobo.743.1">Similarly, by separating a given program into individual sections that can be written and run independently from each other, programmers in general and data scientists specifically can work on the logic of their programs in an </span><span class="No-Break"><span class="koboSpan" id="kobo.744.1">incremental way.</span></span></p>
<h1 id="_idParaDest-324"><a id="_idTextAnchor331"/><span class="koboSpan" id="kobo.745.1">The idea of iterative development</span></h1>
<p><span class="koboSpan" id="kobo.746.1">Most practitioners in </span><a id="_idIndexMarker1146"/><span class="koboSpan" id="kobo.747.1">the world of software development are used to the ideals behind agile methodologies. </span><span class="koboSpan" id="kobo.747.2">There are dozens of agile frameworks designed to help you manage software, or really, any project with the aim of creating some useful product. </span><span class="koboSpan" id="kobo.747.3">One thing they consistently have in common is the idea of iterative development. </span><span class="koboSpan" id="kobo.747.4">The development effort is broken down into smaller, simpler tasks called an iteration. </span><span class="koboSpan" id="kobo.747.5">At the end of each iteration, we should have some usable product. </span><span class="koboSpan" id="kobo.747.6">This </span><span class="No-Break"><span class="koboSpan" id="kobo.748.1">is important!</span></span></p>
<p><span class="koboSpan" id="kobo.749.1">You might think about making a car, but think truly about the research and development that went into the first cars. </span><span class="koboSpan" id="kobo.749.2">Our main concern at that time was to produce a vehicle to take us from point A to some distant point B in a manner that was faster and more efficient than using a </span><span class="No-Break"><span class="koboSpan" id="kobo.750.1">domesticated animal.</span></span></p>
<p><span class="koboSpan" id="kobo.751.1">We already know about the wheel, so let’s entertain at a somewhat comical level the process your average software developer might use if they were going to create the world’s first automobile. </span><span class="koboSpan" id="kobo.751.2">Remember, each iteration must produce some usable means of traveling from place to place. </span><span class="koboSpan" id="kobo.751.3">Our development team might start with a skateboard. </span><span class="koboSpan" id="kobo.751.4">This is something simple we could make in a short iteration. </span><span class="koboSpan" id="kobo.751.5">The next iteration might produce a scooter, the next a bicycle, the next might be a powered tricycle, then eventually, a rudimentary car. </span><span class="koboSpan" id="kobo.751.6">See </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.752.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.753.1">.25</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.754.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer423">
<span class="koboSpan" id="kobo.755.1"><img alt="Figure 13.25: An iterative process realizes a goal one step at a time" src="image/B19644_13_025.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.756.1">Figure 13.25: An iterative process realizes a goal one step at a time</span></p>
<p><span class="koboSpan" id="kobo.757.1">Each iteration produces a usable result, and we can point to this as continuous progress. </span><span class="koboSpan" id="kobo.757.2">At the end of each iteration, you should reflect upon the next because, with each iteration, your understanding of the final objective becomes clearer. </span><span class="koboSpan" id="kobo.757.3">You learn a lot from each iteration, and if you keep your iterations small, you have the flexibility to change direction when you discover you </span><span class="No-Break"><span class="koboSpan" id="kobo.758.1">need to.</span></span></p>
<p><span class="koboSpan" id="kobo.759.1">This happens all the </span><a id="_idIndexMarker1147"/><span class="koboSpan" id="kobo.760.1">time in traditional software development and in data science work. </span><span class="koboSpan" id="kobo.760.2">You may set out with a particular research objective in mind, but ultimately, you have to go where the data leads you rather than succumbing to your own bias. </span><span class="koboSpan" id="kobo.760.3">Iterative processes make </span><span class="No-Break"><span class="koboSpan" id="kobo.761.1">this possible.</span></span></p>
<p><span class="koboSpan" id="kobo.762.1">We can apply this to the ideas behind Jupyter notebooks since these involve building up your work one cell, or iteration, at a time. </span><span class="koboSpan" id="kobo.762.2">During each iteration, you add or make the appropriate changes in the code cell that reads in the dataset and rerun the subsequent cells, as opposed to rerunning the code before it. </span><span class="koboSpan" id="kobo.762.3">As a tribute to its users, Jupyter notebooks</span><a id="_idIndexMarker1148"/><span class="koboSpan" id="kobo.763.1"> were</span><a id="_idIndexMarker1149"/><span class="koboSpan" id="kobo.764.1"> named after the three most common scientific</span><a id="_idIndexMarker1150"/><span class="koboSpan" id="kobo.765.1"> programming languages: </span><strong class="bold"><span class="koboSpan" id="kobo.766.1">Julia</span></strong><span class="koboSpan" id="kobo.767.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.768.1">Python</span></strong><span class="koboSpan" id="kobo.769.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.770.1">and </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.771.1">R</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.772.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.773.1">Another integral part of Jupyter notebooks is the support for the Markdown language. </span><span class="koboSpan" id="kobo.773.2">As we mentioned previously, at the beginning of the previous chapter, Markdown is a markup language that’s commonly used in </span><strong class="source-inline"><span class="koboSpan" id="kobo.774.1">README.md</span></strong><span class="koboSpan" id="kobo.775.1"> files in GitHub. </span><span class="koboSpan" id="kobo.775.2">Furthermore, because of its ability to work with LaTeX (which is typically used for writing mathematical </span><a id="_idIndexMarker1151"/><span class="koboSpan" id="kobo.776.1">equations and scientific papers in general), Markdown is heavily favored by the data </span><span class="No-Break"><span class="koboSpan" id="kobo.777.1">science community.</span></span></p>
<p><span class="koboSpan" id="kobo.778.1">Next, let’s see how we can use a Jupyter notebook in a regular </span><span class="No-Break"><span class="koboSpan" id="kobo.779.1">PyCharm project</span></span></p>
<h1 id="_idParaDest-325"><a id="_idTextAnchor332"/><span class="koboSpan" id="kobo.780.1">Jupyter notebooks in PyCharm</span></h1>
<p><span class="koboSpan" id="kobo.781.1">For this task, we </span><a id="_idIndexMarker1152"/><span class="koboSpan" id="kobo.782.1">will be</span><a id="_idIndexMarker1153"/><span class="koboSpan" id="kobo.783.1"> translating the program we have in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.784.1">main.py</span></strong><span class="koboSpan" id="kobo.785.1"> file into a Jupyter notebook so that we can see the interface that Jupyter offers compared to a traditional Python script. </span><span class="koboSpan" id="kobo.785.2">I’ll be leveraging my existing </span><strong class="source-inline"><span class="koboSpan" id="kobo.786.1">jupyter_notebooks</span></strong><span class="koboSpan" id="kobo.787.1"> project we started with. </span><span class="koboSpan" id="kobo.787.2">You can find it in the chapter’s sample code. </span><span class="koboSpan" id="kobo.787.3">If you don’t have that repository, we cover cloning it in </span><a href="B19644_02.xhtml#_idTextAnchor028"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.788.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.789.1">. </span><span class="koboSpan" id="kobo.789.2">If you’d like to start from scratch, you can simply create a new scientific project, which was covered in </span><a href="B19644_12.xhtml#_idTextAnchor298"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.790.1">Chapter 12</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.791.1">.</span></span></p>
<h2 id="_idParaDest-326"><a id="_idTextAnchor333"/><span class="koboSpan" id="kobo.792.1">Creating a notebook and adding our code</span></h2>
<p><span class="koboSpan" id="kobo.793.1">To add a new</span><a id="_idIndexMarker1154"/><span class="koboSpan" id="kobo.794.1"> Jupyter notebook in a </span><a id="_idIndexMarker1155"/><span class="koboSpan" id="kobo.795.1">PyCharm project, create it as though it were just a file. </span><span class="koboSpan" id="kobo.795.2">Click </span><strong class="bold"><span class="koboSpan" id="kobo.796.1">File </span></strong><span class="koboSpan" id="kobo.797.1">| </span><strong class="bold"><span class="koboSpan" id="kobo.798.1">New</span></strong><span class="koboSpan" id="kobo.799.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.800.1">Jupyter Notebook</span></strong><span class="koboSpan" id="kobo.801.1"> as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.802.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.803.1">.26</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.804.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer424">
<span class="koboSpan" id="kobo.805.1"><img alt="Figure 13.26: Create a new Jupyter notebook using the File | New menu option" src="image/B19644_13_026.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.806.1">Figure 13.26: Create a new Jupyter notebook using the File | New menu option</span></p>
<p><span class="koboSpan" id="kobo.807.1">You are</span><a id="_idIndexMarker1156"/><span class="koboSpan" id="kobo.808.1"> immediately </span><a id="_idIndexMarker1157"/><span class="koboSpan" id="kobo.809.1">prompted to name your notebook. </span><span class="koboSpan" id="kobo.809.2">I called mine </span><strong class="source-inline"><span class="koboSpan" id="kobo.810.1">basic.ipynb</span></strong><span class="koboSpan" id="kobo.811.1">. </span><span class="koboSpan" id="kobo.811.2">The file was created in the root folder of my project, but I went ahead and dragged it into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.812.1">notebooks</span></strong><span class="koboSpan" id="kobo.813.1"> folder. </span><span class="koboSpan" id="kobo.813.2">You can see my starting point in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.814.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.815.1">.27</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.816.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer425">
<span class="koboSpan" id="kobo.817.1"><img alt="Figure 13.27: My new notebook is ready!" src="image/B19644_13_027.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.818.1">Figure 13.27: My new notebook is ready!</span></p>
<p><span class="koboSpan" id="kobo.819.1">Let’s begin by typing</span><a id="_idIndexMarker1158"/><span class="koboSpan" id="kobo.820.1"> some</span><a id="_idIndexMarker1159"/><span class="koboSpan" id="kobo.821.1"> documentation along with some known imports. </span><span class="koboSpan" id="kobo.821.2">At the prompt, type </span><span class="No-Break"><span class="koboSpan" id="kobo.822.1">this code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.823.1">
### Importing libraries
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
#%%</span></pre> <p><span class="koboSpan" id="kobo.824.1">When you type the last </span><strong class="source-inline"><span class="koboSpan" id="kobo.825.1">#%%</span></strong><span class="koboSpan" id="kobo.826.1">, you’ll find PyCharm starts a new cell for you. </span><span class="koboSpan" id="kobo.826.2">In the second cell, let’s enter some of the code we had earlier in our illustrative </span><span class="No-Break"><span class="koboSpan" id="kobo.827.1">Python script:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.828.1">
x = np.random.rand(50,)
y = x * 2 + np.random.normal(0, 0.3, 50)
z = np.random.rand(50,)
df = pd.DataFrame({
  'x': x,
  'y': y,
  'z': z
})
#%%</span></pre> <p><span class="koboSpan" id="kobo.829.1">I’ve explained this code earlier in this chapter, so I won’t do that again. </span><span class="koboSpan" id="kobo.829.2">As before, the last </span><strong class="source-inline"><span class="koboSpan" id="kobo.830.1">#%%</span></strong><span class="koboSpan" id="kobo.831.1"> will create a new cell. </span><span class="koboSpan" id="kobo.831.2">See </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.832.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.833.1">.28</span></em><span class="koboSpan" id="kobo.834.1"> to see what I have </span><span class="No-Break"><span class="koboSpan" id="kobo.835.1">so far.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer426">
<span class="koboSpan" id="kobo.836.1"><img alt="Figure 13.28: I now have two cells containing our code from our earlier program" src="image/B19644_13_028.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.837.1">Figure 13.28: I now have two cells containing our code from our earlier program</span></p>
<p><span class="koboSpan" id="kobo.838.1">So far so good! </span><span class="koboSpan" id="kobo.838.2">I have </span><a id="_idIndexMarker1160"/><span class="koboSpan" id="kobo.839.1">my </span><a id="_idIndexMarker1161"/><span class="koboSpan" id="kobo.840.1">imports and a cell that generates my dataset for me just as I had in my Python script. </span><span class="koboSpan" id="kobo.840.2">I’ve been breaking my program up into small, iterative steps. </span><span class="koboSpan" id="kobo.840.3">First, my imports, then my dataset. </span><span class="koboSpan" id="kobo.840.4">Next, I can look at doing something with my data. </span><span class="koboSpan" id="kobo.840.5">We know from earlier discussions that this is going to be a correlative matrix. </span><span class="koboSpan" id="kobo.840.6">What if this is a university project, and our professor wants us to document the formulae we use? </span><span class="koboSpan" id="kobo.840.7">That’s probably a good idea even if you’re out of school. </span><span class="koboSpan" id="kobo.840.8">Let’s take a moment to look at a cool documentation feature we can use. </span><span class="koboSpan" id="kobo.840.9">We know we can have </span><a id="_idIndexMarker1162"/><span class="koboSpan" id="kobo.841.1">code </span><a id="_idIndexMarker1163"/><span class="koboSpan" id="kobo.842.1">cells. </span><span class="koboSpan" id="kobo.842.2">We can also have documentation cells that leverage not only Markdown but </span><span class="No-Break"><span class="koboSpan" id="kobo.843.1">also LaTeX.</span></span></p>
<h2 id="_idParaDest-327"><a id="_idTextAnchor334"/><span class="koboSpan" id="kobo.844.1">Documenting with Markdown and LaTeX</span></h2>
<p><span class="koboSpan" id="kobo.845.1">Markdown </span><a id="_idIndexMarker1164"/><span class="koboSpan" id="kobo.846.1">is something we’ve</span><a id="_idIndexMarker1165"/><span class="koboSpan" id="kobo.847.1"> already seen. </span><span class="koboSpan" id="kobo.847.2">It is a simple markup</span><a id="_idIndexMarker1166"/><span class="koboSpan" id="kobo.848.1"> language that lets you create HTML-like documents, but instead of a rich set of tags, you use symbols to mark your documentation. </span><span class="koboSpan" id="kobo.848.2">Markdown only covers basics, such as headings, lists, and simple images. </span><span class="koboSpan" id="kobo.848.3">We covered the use of PyCharm’s integrated Markdown plugin in </span><a href="B19644_12.xhtml#_idTextAnchor298"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.849.1">Chapter 12</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.850.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.851.1">Working with Markdown in our notebooks allows us some simple formatting to enhance the look and readability of </span><span class="No-Break"><span class="koboSpan" id="kobo.852.1">our notebooks.</span></span></p>
<p><span class="koboSpan" id="kobo.853.1">LaTeX, which is pronounced “LAY-tech” or “LAH-tech," depending on where your math professor studied, is a typesetting convention used in the fields of science and mathematics. </span><span class="koboSpan" id="kobo.853.2">This kind of thing is needed in academic journals because you can’t very well type complicated formulas easily on a keyboard, and not many math professors can bust out Adobe Illustrator and do their own illustration work. </span><span class="koboSpan" id="kobo.853.3">Instead of a graphical tool, they instead invented a terse, hard-to-understand, and impossible-to-remember convention for marking up their formulas in their journal articles. </span><span class="koboSpan" id="kobo.853.4">Then they named it a common English word but insisted we all </span><span class="No-Break"><span class="koboSpan" id="kobo.854.1">mispronounce it.</span></span></p>
<p><span class="koboSpan" id="kobo.855.1">Let’s try </span><span class="No-Break"><span class="koboSpan" id="kobo.856.1">it out!</span></span></p>
<p><span class="koboSpan" id="kobo.857.1">First, I haven’t been totally up-front with you on how to create cells. </span><span class="koboSpan" id="kobo.857.2">Sure, you can just start typing stuff in, and using </span><strong class="source-inline"><span class="koboSpan" id="kobo.858.1">#%%</span></strong><span class="koboSpan" id="kobo.859.1"> to separate cells works just fine. </span><span class="koboSpan" id="kobo.859.2">You can also hover over the space between cells, or where the division would be if you’re at the top or bottom of the notebook. </span><span class="koboSpan" id="kobo.859.3">Check out </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.860.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.861.1">.29</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.862.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer427">
<span class="koboSpan" id="kobo.863.1"><img alt="Figure 13.29: You can hover in the space between cells to get a little GUI help with adding new cells" src="image/B19644_13_029.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.864.1">Figure 13.29: You can hover in the space between cells to get a little GUI help with adding new cells</span></p>
<p><span class="koboSpan" id="kobo.865.1">When you click these</span><a id="_idIndexMarker1167"/><span class="koboSpan" id="kobo.866.1"> buttons </span><a id="_idIndexMarker1168"/><span class="koboSpan" id="kobo.867.1">between cells, it triggers a process of cell</span><a id="_idIndexMarker1169"/><span class="koboSpan" id="kobo.868.1"> division called mitosis. </span><span class="koboSpan" id="kobo.868.2">Wait, no, that’s biology. </span><span class="koboSpan" id="kobo.868.3">It does split the cells by adding a new one between the two we have. </span><span class="koboSpan" id="kobo.868.4">I’m going to add a cell below my last one by hovering just below the last cell and clicking </span><strong class="bold"><span class="koboSpan" id="kobo.869.1">Add Markdown Cell</span></strong><span class="koboSpan" id="kobo.870.1">. </span><span class="koboSpan" id="kobo.870.2">See </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.871.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.872.1">.30</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.873.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer428">
<span class="koboSpan" id="kobo.874.1"><img alt="Figure 13.30: Hover above the last empty cell and click Add Markdown Cell" src="image/B19644_13_030.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.875.1">Figure 13.30: Hover above the last empty cell and click Add Markdown Cell</span></p>
<p><span class="koboSpan" id="kobo.876.1">This will create a light blue cell without the IPython prompt. </span><span class="koboSpan" id="kobo.876.2">Since it’s a Markdown cell, PyCharm isn’t expecting code, so there’s no need for the prompt. </span><span class="koboSpan" id="kobo.876.3">Now, within the cell, type this </span><span class="No-Break"><span class="koboSpan" id="kobo.877.1">absolute nonsense:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.878.1">
### Pearson's correlation
$r_{XY}
= \frac{\sum^n_{i=1}{(X_i - \bar{X})(Y_i - \bar{Y})}}
{\sqrt{\sum^n_{i=1}{(X_i - \bar{X})^2}}\sqrt{\sum^n_{i=1}{(Y_i - \bar{Y})^2}}}$</span></pre> <p><span class="koboSpan" id="kobo.879.1">This is LaTeX markup syntax that will convey Pearson’s formula for correlation. </span><span class="koboSpan" id="kobo.879.2">Trust me, it will be quite</span><a id="_idIndexMarker1170"/><span class="koboSpan" id="kobo.880.1"> impressive</span><a id="_idIndexMarker1171"/><span class="koboSpan" id="kobo.881.1"> in</span><a id="_idIndexMarker1172"/><span class="koboSpan" id="kobo.882.1"> just a moment when we run our notebook. </span><span class="koboSpan" id="kobo.882.2">Let’s go ahead and add our two plots </span><span class="No-Break"><span class="koboSpan" id="kobo.883.1">from earlier.</span></span></p>
<h2 id="_idParaDest-328"><a id="_idTextAnchor335"/><span class="koboSpan" id="kobo.884.1">Adding our plots</span></h2>
<p><span class="koboSpan" id="kobo.885.1">Add a new code cell </span><a id="_idIndexMarker1173"/><span class="koboSpan" id="kobo.886.1">below the last one and add</span><a id="_idIndexMarker1174"/><span class="koboSpan" id="kobo.887.1"> this code for </span><span class="No-Break"><span class="koboSpan" id="kobo.888.1">our heatmap:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.889.1">
# Compute and show correlation matrix
corr_mat = df.corr()
plt.matshow(corr_mat)
plt.show()</span></pre> <p><span class="koboSpan" id="kobo.890.1">Next, add another code cell for </span><span class="No-Break"><span class="koboSpan" id="kobo.891.1">our scattelot:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.892.1">
# Scatterplot
plt.scatter(df['x'], df(['y']))
plt.show()</span></pre> <p><span class="koboSpan" id="kobo.893.1">Our implementation of our code as a Jupyter notebook </span><span class="No-Break"><span class="koboSpan" id="kobo.894.1">is complete.</span></span></p>
<h2 id="_idParaDest-329"><a id="_idTextAnchor336"/><span class="koboSpan" id="kobo.895.1">Executing the cells</span></h2>
<p><span class="koboSpan" id="kobo.896.1">You can execute </span><a id="_idIndexMarker1175"/><span class="koboSpan" id="kobo.897.1">the notebook by clicking the run button at the top of the notebook as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.898.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.899.1">.31</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.900.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer429">
<span class="koboSpan" id="kobo.901.1"><img alt="Figure 13.31: Run all the cells in the notebook using the double green arrow button" src="image/B19644_13_031.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.902.1">Figure 13.31: Run all the cells in the notebook using the double green arrow button</span></p>
<p><span class="koboSpan" id="kobo.903.1">This triggers a </span><a id="_idIndexMarker1176"/><span class="koboSpan" id="kobo.904.1">marvelous transformation in PyCharm. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.905.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.906.1">.32</span></em><span class="koboSpan" id="kobo.907.1"> is a good </span><span class="No-Break"><span class="koboSpan" id="kobo.908.1">starting place.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer430">
<span class="koboSpan" id="kobo.909.1"><img alt="Figure 13.32: We’ve run the notebook, which causes a lot of changes in the PyCharm UI" src="image/B19644_13_032.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.910.1">Figure 13.32: We’ve run the notebook, which causes a lot of changes in the PyCharm UI</span></p>
<p><span class="koboSpan" id="kobo.911.1">First, notice there is </span><a id="_idIndexMarker1177"/><span class="koboSpan" id="kobo.912.1">a new tool on the left sidebar for Jupyter. </span><span class="koboSpan" id="kobo.912.2">We can see we’ve started a Jupyter server running on port </span><strong class="source-inline"><span class="koboSpan" id="kobo.913.1">8888</span></strong><span class="koboSpan" id="kobo.914.1">. </span><span class="koboSpan" id="kobo.914.2">If you were using Jupyter independently of PyCharm, this would be the normal mode of operation. </span><span class="koboSpan" id="kobo.914.3">You’d have run the Jupyter server from the command line and navigated to the notebook in your browser. </span><span class="koboSpan" id="kobo.914.4">PyCharm is replacing that experience within the IDE, but we still need to run the server to get </span><span class="No-Break"><span class="koboSpan" id="kobo.915.1">the results.</span></span></p>
<p><span class="koboSpan" id="kobo.916.1">If you scroll up, you’ll see the LaTeX markup has been rendered in our Markdown cell shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.917.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.918.1">.33</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.919.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer431">
<span class="koboSpan" id="kobo.920.1"><img alt="Figure 13.33: The nonsense now looks absolutely stunning!" src="image/B19644_13_033.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.921.1">Figure 13.33: The nonsense now looks absolutely stunning!</span></p>
<p><span class="koboSpan" id="kobo.922.1">If you scroll down </span><a id="_idIndexMarker1178"/><span class="koboSpan" id="kobo.923.1">to inspect the scatterplot, we see… Well phooey! </span><span class="koboSpan" id="kobo.923.2">There’s an error! </span><span class="koboSpan" id="kobo.923.3">See </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.924.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.925.1">.34</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.926.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer432">
<span class="koboSpan" id="kobo.927.1"><img alt="Figure 13:34: The error message shows us exactly what is wrong" src="image/B19644_13_034.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.928.1">Figure 13:34: The error message shows us exactly what is wrong</span></p>
<p><span class="koboSpan" id="kobo.929.1">I messed up. </span><span class="koboSpan" id="kobo.929.2">I put parentheses alongside the DataFrame object, </span><strong class="source-inline"><span class="koboSpan" id="kobo.930.1">df</span></strong><span class="koboSpan" id="kobo.931.1">. </span><span class="koboSpan" id="kobo.931.2">I need to take those off so it looks like it’s </span><span class="No-Break"><span class="koboSpan" id="kobo.932.1">a neighbor:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.933.1">
# Scatterplot
plt.scatter(df['x'], </span><strong class="bold"><span class="koboSpan" id="kobo.934.1">df['y']</span></strong><span class="koboSpan" id="kobo.935.1">)
plt.show()</span></pre> <p><span class="koboSpan" id="kobo.936.1">Now, I could rerun the whole notebook, but I don’t need to. </span><span class="koboSpan" id="kobo.936.2">The problem was in the last cell, so I could just put my cursor in the last cell and click the single green run arrow. </span><span class="koboSpan" id="kobo.936.3">See </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.937.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.938.1">.35</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.939.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer433">
<span class="koboSpan" id="kobo.940.1"><img alt="Figure 13.35: Yes, that’s much better!" src="image/B19644_13_035.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.941.1">Figure 13.35: Yes, that’s much better!</span></p>
<p><span class="koboSpan" id="kobo.942.1">Let’s finish up </span><a id="_idIndexMarker1179"/><span class="koboSpan" id="kobo.943.1">our coverage of Jupyter with a few odds </span><span class="No-Break"><span class="koboSpan" id="kobo.944.1">and ends.</span></span></p>
<h2 id="_idParaDest-330"><a id="_idTextAnchor337"/><span class="koboSpan" id="kobo.945.1">Odds and ends</span></h2>
<p><span class="koboSpan" id="kobo.946.1">At present, we’re</span><a id="_idIndexMarker1180"/><span class="koboSpan" id="kobo.947.1"> running a Jupyter server. </span><span class="koboSpan" id="kobo.947.2">We saw a moment ago this created a new tool icon on the left side menu. </span><span class="koboSpan" id="kobo.947.3">Let’s click that and see what’s up. </span><span class="koboSpan" id="kobo.947.4">See </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.948.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.949.1">.36</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.950.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer434">
<span class="koboSpan" id="kobo.951.1"><img alt="Figure 13.36: The Jupyter panel opens and we can see the output from the running server on the Server tab" src="image/B19644_13_036.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.952.1">Figure 13.36: The Jupyter panel opens and we can see the output from the running server on the Server tab</span></p>
<p><span class="koboSpan" id="kobo.953.1">Scrolling to the top</span><a id="_idIndexMarker1181"/><span class="koboSpan" id="kobo.954.1"> of this window will reveal the local URL for the Jupyter server if you’d like to work with your notebook in the browser. </span><span class="koboSpan" id="kobo.954.2">But why would you do that when PyCharm is so </span><span class="No-Break"><span class="koboSpan" id="kobo.955.1">much better?</span></span></p>
<p><span class="koboSpan" id="kobo.956.1">Note the stop button that allows you to stop the running Jupyter server. </span><span class="koboSpan" id="kobo.956.2">Next to the </span><strong class="bold"><span class="koboSpan" id="kobo.957.1">Server</span></strong><span class="koboSpan" id="kobo.958.1"> tab is the </span><strong class="bold"><span class="koboSpan" id="kobo.959.1">Variables</span></strong><span class="koboSpan" id="kobo.960.1"> tab shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.961.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.962.1">.37</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.963.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer435">
<span class="koboSpan" id="kobo.964.1"><img alt="Figure 13.37: The Variables tab in the Jupyter pane allows for deep inspection into variables within your notebook" src="image/B19644_13_037.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.965.1">Figure 13.37: The Variables tab in the Jupyter pane allows for deep inspection into variables within your notebook</span></p>
<p><span class="koboSpan" id="kobo.966.1">In the </span><strong class="bold"><span class="koboSpan" id="kobo.967.1">Variables</span></strong><span class="koboSpan" id="kobo.968.1"> tab, you get the inspections that allow you to drill down into any variable within the notebook. </span><span class="koboSpan" id="kobo.968.2">Notice, too, that the </span><strong class="bold"><span class="koboSpan" id="kobo.969.1">View as Array</span></strong><span class="koboSpan" id="kobo.970.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.971.1">View as DataFrame</span></strong><span class="koboSpan" id="kobo.972.1"> options are there so you can also use the SciView panel to see and filter your </span><span class="No-Break"><span class="koboSpan" id="kobo.973.1">array contents.</span></span></p>
<p><span class="koboSpan" id="kobo.974.1">We didn’t really talk much about the toolbar at the top of the notebook tab, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.975.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.976.1">.38</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.977.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer436">
<span class="koboSpan" id="kobo.978.1"><img alt="Figure 13.38: Controls for manipulating cells in your notebook" src="image/B19644_13_038.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.979.1">Figure 13.38: Controls for manipulating cells in your notebook</span></p>
<p><span class="koboSpan" id="kobo.980.1">There is a set of tools for cutting, copying, and pasting your cells (</span><strong class="bold"><span class="koboSpan" id="kobo.981.1">1</span></strong><span class="koboSpan" id="kobo.982.1">). </span><span class="koboSpan" id="kobo.982.2">The arrows at (</span><strong class="bold"><span class="koboSpan" id="kobo.983.1">2</span></strong><span class="koboSpan" id="kobo.984.1">) allow you to reorder the cells in the notebook by shifting them up or down. </span><span class="koboSpan" id="kobo.984.2">There is a broad set of run and debug tools at (</span><strong class="bold"><span class="koboSpan" id="kobo.985.1">3</span></strong><span class="koboSpan" id="kobo.986.1">) that you no doubt recognize as a </span><span class="No-Break"><span class="koboSpan" id="kobo.987.1">common theme.</span></span></p>
<p><span class="koboSpan" id="kobo.988.1">The broom icon will clear the output from a cell, which is handy if you’re working on salary projections based on the raise you’re about to ask for just as your boss walks up behind you. </span><span class="koboSpan" id="kobo.988.2">The trashcan deletes a cell entirely. </span><span class="koboSpan" id="kobo.988.3">There is also a dropdown here, marked </span><strong class="bold"><span class="koboSpan" id="kobo.989.1">Code</span></strong><span class="koboSpan" id="kobo.990.1">, that allows you to change the type of cell, maybe from a code cell to a markup cell, or </span><span class="No-Break"><span class="koboSpan" id="kobo.991.1">vice versa.</span></span></p>
<p><span class="koboSpan" id="kobo.992.1">We have gone through the main features of PyCharm in the context of Jupyter notebooks. </span><span class="koboSpan" id="kobo.992.2">In general, one of the biggest drawbacks of using traditional Jupyter notebooks is the lack of code completion while writing code in individual code cells. </span><span class="koboSpan" id="kobo.992.3">Specifically, when we write code in Jupyter notebooks in our browser, the process is very similar to writing code in a simple text editor with </span><span class="No-Break"><span class="koboSpan" id="kobo.993.1">limited support.</span></span></p>
<p><span class="koboSpan" id="kobo.994.1">However, as we work with Jupyter notebooks directly inside the PyCharm editor, we will see that all the </span><a id="_idIndexMarker1182"/><span class="koboSpan" id="kobo.995.1">code-writing support features that are available to regular Python scripts are also available here. </span><span class="koboSpan" id="kobo.995.2">In other words, when using PyCharm to write Jupyter notebooks, we get the best of both worlds—powerful, intelligent support from PyCharm and an iterative development style </span><span class="No-Break"><span class="koboSpan" id="kobo.996.1">from Jupyter.</span></span></p>
<h1 id="_idParaDest-331"><a id="_idTextAnchor338"/><span class="koboSpan" id="kobo.997.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.998.1">A Python programmer typically works on a data science project in two ways—writing a traditional Python script or using a Jupyter notebook, both of which are heavily supported by PyCharm. </span><span class="koboSpan" id="kobo.998.2">Specifically, the SciView panel in PyCharm is a comprehensive and dynamic way to view, manage, and inspect data within a data science project. </span><span class="koboSpan" id="kobo.998.3">It offers a great way for us to display visualizations that have been produced by Python scripts as well as to inspect the values within pandas DataFrames and </span><span class="No-Break"><span class="koboSpan" id="kobo.999.1">NumPy arrays.</span></span></p>
<p><span class="koboSpan" id="kobo.1000.1">On the other hand, Jupyter notebooks are a great tool for facilitating iterative development in Python, allowing users to make incremental steps toward analyzing and extracting insights from their datasets. </span><span class="koboSpan" id="kobo.1000.2">Jupyter notebooks are also well supported by PyCharm, being able to be edited directly inside the PyCharm editor. </span><span class="koboSpan" id="kobo.1000.3">This allows us to skip the middle step of using a web browser to run our Jupyter notebooks while being able to utilize the powerful code-writing support features that </span><span class="No-Break"><span class="koboSpan" id="kobo.1001.1">PyCharm provides.</span></span></p>
<p><span class="koboSpan" id="kobo.1002.1">By going in depth into what PyCharm helps with regarding the process of viewing and working with data, either via the SciView panel or with Jupyter notebooks, we have learned how to use PyCharm to facilitate various data science tasks in Python. </span><span class="koboSpan" id="kobo.1002.2">With this, we have equipped ourselves with enough knowledge and tools to tackle real-life projects </span><span class="No-Break"><span class="koboSpan" id="kobo.1003.1">using PyCharm.</span></span></p>
<p><span class="koboSpan" id="kobo.1004.1">In the next chapter, we will combine all the knowledge we have learned so far regarding the topic of data science and scientific computing and walk through the process of building a data science pipeline </span><span class="No-Break"><span class="koboSpan" id="kobo.1005.1">in PyCharm.</span></span></p>
<p><span class="koboSpan" id="kobo.1006.1">Be sure to check out the companion website for the book </span><span class="No-Break"><span class="koboSpan" id="kobo.1007.1">at </span></span><a href="https://www.pycharm-book.com"><span class="No-Break"><span class="koboSpan" id="kobo.1008.1">https://www.pycharm-book.com</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1009.1">.</span></span></p>
<h1 id="_idParaDest-332"><a id="_idTextAnchor339"/><span class="koboSpan" id="kobo.1010.1">Questions</span></h1>
<ol>
<li><span class="koboSpan" id="kobo.1011.1">What two main features does the SciView </span><span class="No-Break"><span class="koboSpan" id="kobo.1012.1">panel contain?</span></span></li>
<li><span class="koboSpan" id="kobo.1013.1">What is the advantage of using the plot viewer in the SciView panel when multiple visualizations are generated by a </span><span class="No-Break"><span class="koboSpan" id="kobo.1014.1">Python program?</span></span></li>
<li><span class="koboSpan" id="kobo.1015.1">What kind of data structures does the data viewer in the SciView </span><span class="No-Break"><span class="koboSpan" id="kobo.1016.1">panel support?</span></span></li>
<li><span class="koboSpan" id="kobo.1017.1">What is the idea of iterative development and how do Jupyter notebooks </span><span class="No-Break"><span class="koboSpan" id="kobo.1018.1">support that?</span></span></li>
<li><span class="koboSpan" id="kobo.1019.1">What are Markdown and LaTeX? </span><span class="koboSpan" id="kobo.1019.2">Why is it beneficial to have support for them in </span><span class="No-Break"><span class="koboSpan" id="kobo.1020.1">Jupyter notebooks?</span></span></li>
<li><span class="koboSpan" id="kobo.1021.1">How is a Jupyter code cell represented in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1022.1">PyCharm editor?</span></span></li>
<li><span class="koboSpan" id="kobo.1023.1">What are the benefits of writing Jupyter notebooks in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1024.1">PyCharm editor?</span></span></li>
</ol>
</div>
</body></html>