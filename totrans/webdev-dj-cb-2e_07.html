<html><head></head><body><div class="chapter" title="Chapter&#xA0;7.&#xA0;Django CMS"><div class="titlepage"><div><div><h1 class="title"><a id="ch07"/>Chapter 7. Django CMS</h1></div></div></div><p>In this chapter, we will cover the following recipes:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Creating templates for Django CMS</li><li class="listitem" style="list-style-type: disc">Structuring the page menu</li><li class="listitem" style="list-style-type: disc">Converting an app to a CMS app</li><li class="listitem" style="list-style-type: disc">Attaching your own navigation</li><li class="listitem" style="list-style-type: disc">Writing your own CMS plugin</li><li class="listitem" style="list-style-type: disc">Adding new fields to the CMS page</li></ul></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec70"/>Introduction</h1></div></div></div><p>Django CMS<a class="indexterm" id="id341"/> is an open source content management system that is based on Django and created by Divio AG, Switzerland. Django CMS takes care of a website's structure, provides navigation menus, makes it easy to edit page content in the frontend, and supports multiple languages in a website. You can also extend it according to your needs using the provided hooks. To create a website, you need to create a hierarchical structure of the pages, where each page has a template. Templates have placeholders that can be assigned different plugins with the content. Using special template tags, the menus can be generated out of the hierarchical page structure. The CMS takes care of URL mapping to specific pages.</p><p>In this chapter, we will look at Django CMS 3.1 from a developer's perspective. We will see what is necessary for the templates to function and take a look at the possible page structure for header and footer navigation. You will also learn how to attach the URL rules of an app to a CMS page tree node. Then, we will attach the custom navigation to the page menu and create our own CMS content plugins. Finally, you will learn how to add new fields to the CMS pages.</p><p>Although in this book, I won't guide you through all the bits and pieces of using Django CMS; by the end of this chapter, you will be aware of its purpose and use. The rest can be learned from the <a class="indexterm" id="id342"/>official documentation at <a class="ulink" href="http://docs.django-cms.org/en/develop/">http://docs.django-cms.org/en/develop/</a> and by trying out the frontend user interface of the CMS.</p></div></div>
<div class="section" title="Creating templates for Django CMS"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec71"/>Creating templates for Django CMS</h1></div></div></div><p>For every page in your page structure, you need to choose a template from the list of templates<a class="indexterm" id="id343"/> that are defined in the settings. In this recipe, we <a class="indexterm" id="id344"/>will look at the minimum requirements for these templates.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec236"/>Getting ready</h2></div></div></div><p>If you want to start a new Django CMS project, execute the following commands in a virtual environment and answer all the prompted questions:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>(myproject_env)$ pip install djangocms-installer</strong></span>
<span class="strong"><strong>(myproject_env)$ djangocms -p project/myproject myproject</strong></span>
</pre></div><p>Here, <code class="literal">project/myproject</code> is the path where the project will be created and <code class="literal">myproject</code> is the project name.</p><p>On the other hand, if you want to integrate Django CMS in an existing project, check the official <a class="indexterm" id="id345"/>documentation at <a class="ulink" href="http://docs.django-cms.org/en/latest/how_to/install.html">http://docs.django-cms.org/en/latest/how_to/install.html</a>.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec237"/>How to do it...</h2></div></div></div><p>We will update the Bootstrap-powered <code class="literal">base.html</code> template so that it contains everything that Django CMS needs. Then, we will create and register two templates, <code class="literal">default.html</code> and <code class="literal">start.html</code>, to choose from for CMS pages:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">First of all, we will update the base template that we created in the <span class="emphasis"><em>Arranging the base.html template</em></span> recipe in <a class="link" href="ch04.html" title="Chapter 4. Templates and JavaScript">Chapter 4</a>, <span class="emphasis"><em>Templates and JavaScript</em></span>, as follows:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>{# templates/base.html #}</strong></span>
&lt;!DOCTYPE html&gt;
{% load i18n <span class="strong"><strong>cms_tags sekizai_tags menu_tags</strong></span> %}
&lt;html lang="{{ LANGUAGE_CODE }}"&gt;
&lt;head&gt;
    &lt;meta charset="utf-8" /&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;
    &lt;title&gt;{% block title %}{% endblock %}{% trans "My Website" %}&lt;/title&gt;
    &lt;link rel="icon" href="{{ STATIC_URL }}site/img/favicon.ico" type="image/png" /&gt;
   
    {% block meta_tags %}{% endblock %}
   
<span class="strong"><strong>    {% render_block "css" %}</strong></span>
    {% block base_stylesheet %}
        &lt;link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" /&gt;
        &lt;link href="{{ STATIC_URL }}site/css/style.css" rel="stylesheet" media="screen" type="text/css" /&gt;
    {% endblock %}
    {% block stylesheet %}{% endblock %}
   
    {% block base_js %}
        &lt;script src="//code.jquery.com/jquery-1.11.3.min.js"&gt;&lt;/script&gt;
        &lt;script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"&gt;&lt;/script&gt;
        &lt;script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"&gt;&lt;/script&gt;
    {% endblock %}
    {% block js %}{% endblock %}
    {% block extrahead %}{% endblock %}
&lt;/head&gt;
&lt;body class="{% block bodyclass %}{% endblock %} {{ request.current_page.cssextension.body_css_class }}"&gt;
<span class="strong"><strong>    {% cms_toolbar %}</strong></span>
    {% block page %}
        &lt;div class="wrapper"&gt;
            &lt;div id="header" class="clearfix container"&gt;
                &lt;h1&gt;{% trans "My Website" %}&lt;/h1&gt;
                &lt;nav class="navbar navbar-default" role="navigation"&gt;
                    {% block header_navigation %}
<span class="strong"><strong>                        &lt;ul class="nav navbar-nav"&gt;</strong></span>
<span class="strong"><strong>                            {% show_menu_below_id "start_page" 0 1 1 1 %}</strong></span>
<span class="strong"><strong>                        &lt;/ul&gt;</strong></span>
                    {% endblock %}
                    {% block language_chooser %}
<span class="strong"><strong>                        &lt;ul class="nav navbar-nav pull-right"&gt;</strong></span>
<span class="strong"><strong>                            {% language_chooser %}</strong></span>
<span class="strong"><strong>                        &lt;/ul&gt;</strong></span>
                    {% endblock %}
                &lt;/nav&gt;
            &lt;/div&gt;
            &lt;div id="content" class="clearfix container"&gt;
                {% block content %}
                {% endblock %}
            &lt;/div&gt; 
            &lt;div id="footer" class="clearfix container"&gt;
                {% block footer_navigation %}
                    &lt;nav class="navbar navbar-default" role="navigation"&gt;
<span class="strong"><strong>                        &lt;ul class="nav navbar-nav"&gt;</strong></span>
<span class="strong"><strong>                            {% show_menu_below_id "footer_navigation" 0 1 1 1 %}</strong></span>
<span class="strong"><strong>                        &lt;/ul&gt;</strong></span>
                    &lt;/nav&gt;
                {% endblock %}
            &lt;/div&gt;
        &lt;/div&gt;
    {% endblock %}
    {% block extrabody %}{% endblock %}
<span class="strong"><strong>    {% render_block "js" %}</strong></span>
&lt;/body&gt;
&lt;/html&gt;</pre></div></li><li class="listitem">Then, we <a class="indexterm" id="id346"/>will create a <code class="literal">cms</code> directory <a class="indexterm" id="id347"/>under <code class="literal">templates</code> and add two templates for CMS pages: <code class="literal">default.html</code> for normal pages and <code class="literal">start.html</code> for the home page, as follows:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>{# templates/cms/default.html #}</strong></span>
{% extends "base.html" %}
{% load cms_tags %}

{% block title %}{% page_attribute "page_title" %} - {% endblock %}

{% block meta_tags %}
    &lt;meta name="description" content="{% page_attribute meta_description %}"/&gt;
{% endblock %}

{% block content %}
    &lt;h1&gt;{% page_attribute "page_title" %}&lt;/h1&gt;
    &lt;div class="row"&gt;
        &lt;div class="col-md-8"&gt;
            {% placeholder main_content %}
        &lt;/div&gt;
        &lt;div class="col-md-4"&gt;
            {% placeholder sidebar %}
        &lt;/div&gt;
    &lt;/div&gt;
{% endblock %}

<span class="strong"><strong>{# templates/cms/start.html #}</strong></span>
{% extends "base.html" %}
{% load cms_tags %}

{% block meta_tags %}
    &lt;meta name="description" content="{% page_attribute meta_description %}"/&gt;
{% endblock %}

{% block content %}
    &lt;!--
    Here goes very customized website-specific content like slideshows, latest tweets, latest news, latest profiles, etc.
    --&gt;
{% endblock %}</pre></div></li><li class="listitem">Lastly, we will set the paths of these two templates in the settings, as shown in the following:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong># conf/base.py or settings.py</strong></span>
CMS_TEMPLATES = (
    ("cms/default.html", gettext("Default")),
    ("cms/start.html", gettext("Homepage")),
)</pre></div></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec238"/>How it works...</h2></div></div></div><p>As usual, the <code class="literal">base.html</code> template is the main template that is extended by all the other templates. In<a class="indexterm" id="id348"/> this template, Django CMS uses the <code class="literal">{% render_block %}</code> template tag from the <code class="literal">django-sekizai</code> module to inject CSS and <a class="indexterm" id="id349"/>JavaScript in the templates that create a toolbar and other administration widgets in the frontend. We will insert the <code class="literal">{% cms_toolbar %}</code> template tag at the beginning of the <code class="literal">&lt;body&gt;</code> section—that's where the toolbar will be placed. We will use the <code class="literal">{% show_menu_below_id %}</code> template tag to render the header and footer menus from the specific page menu trees. Also, we will use the <code class="literal">{% language_chooser %}</code> template tag to render the language chooser that switches to the same page in different languages.</p><p>The <code class="literal">default.html</code> and <code class="literal">start.html</code> templates that are defined in the <code class="literal">CMS_TEMPLATES</code> setting will be available as a choice when creating a CMS page. In these templates, for each area<a class="indexterm" id="id350"/> that needs to have dynamically entered<a class="indexterm" id="id351"/> content, add a <code class="literal">{% placeholder %}</code> template tag when you need page-specific content or <code class="literal">{% static_placeholder %}</code> when you need the content that is shared among different pages. Logged-in administrators can add content plugins to the placeholders when they switch from the <span class="strong"><strong>Live</strong></span> mode to the <span class="strong"><strong>Draft</strong></span> mode in the CMS toolbar and switch to the <span class="strong"><strong>Structure</strong></span> section.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec239"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <span class="emphasis"><em>Arranging the base.html template</em></span> recipe in <a class="link" href="ch04.html" title="Chapter 4. Templates and JavaScript">Chapter 4</a>, <span class="emphasis"><em>Templates and JavaScript</em></span></li><li class="listitem" style="list-style-type: disc">The <span class="emphasis"><em>Structuring the page menu</em></span> recipe</li></ul></div></div></div>
<div class="section" title="Structuring the page menu"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec72"/>Structuring the page menu</h1></div></div></div><p>In this recipe, we will discuss some guidelines about defining the tree structures for the pages of your website.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec240"/>Getting ready</h2></div></div></div><p>It is good practice to <a class="indexterm" id="id352"/>set the available languages for your website before creating the structure of your pages (although the Django CMS database structure also allows you to add new languages later). Besides <code class="literal">LANGUAGES</code>, make sure that you have <code class="literal">CMS_LANGUAGES</code> set in your settings. The <code class="literal">CMS_LANGUAGES</code> setting defines which languages should be active for each Django site, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong># conf/base.py or settings.py</strong></span>
# ...
from __future__ import unicode_literals
gettext = lambda s: s

LANGUAGES = (
    ("en", "English"),
    ("de", "Deutsch"),
    ("fr", "Français"),
    ("lt", "Lietuvių kalba"),
)

CMS_LANGUAGES = {
    "default": {
        "public": True,
        "hide_untranslated": False,
        "redirect_on_fallback": True,
    },
    1: [
        {
            "public": True,
            "code": "en",
            "hide_untranslated": False,
            "name": gettext("en"),
            "redirect_on_fallback": True,
        },
        {
            "public": True,
            "code": "de",
            "hide_untranslated": False,
            "name": gettext("de"),
            "redirect_on_fallback": True,
        },
        {
            "public": True,
            "code": "fr",
            "hide_untranslated": False,
            "name": gettext("fr"),
            "redirect_on_fallback": True,
        },
        {
            "public": True,
            "code": "lt",
            "hide_untranslated": False,
            "name": gettext("lt"),
            "redirect_on_fallback": True,
        },
    ],
}</pre></div></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec241"/>How to do it...</h2></div></div></div><p>The page navigation<a class="indexterm" id="id353"/> is set in tree structures. The first tree is the main tree and, contrary to the other trees, the root node of the main tree is not reflected in the URL structure. The root node of this tree is the home page of the website. Usually, this page has a specific template, where you add the content aggregated from different apps; for example, a slideshow, actual news, newly registered users, latest tweets, or other latest or featured objects. For a convenient way to render items from different apps, check the <span class="emphasis"><em>Creating a template tag to a QuerySet in a template</em></span> recipe in <a class="link" href="ch05.html" title="Chapter 5. Custom Template Filters and Tags">Chapter 5</a>, <span class="emphasis"><em>Custom Template Filters and Tags</em></span>.</p><p>If your website<a class="indexterm" id="id354"/> has multiple navigations such as a top, meta, and footer navigation, give an ID to the root node of each tree in the <span class="strong"><strong>Advanced</strong></span> settings of the page. This ID will be used in the base template by the <code class="literal">{% show_menu_below_id %}</code> template tag. You can read more about this and other menu-related<a class="indexterm" id="id355"/> template tags in the official documentation at <a class="ulink" href="http://docs.django-cms.org/en/latest/reference/navigation.html">http://docs.django-cms.org/en/latest/reference/navigation.html</a>.</p><p>The first tree defines the main structure of the website. If you want a page under the root-level URL, for example, <code class="literal">/en/search/</code> but not <code class="literal">/en/meta/search/</code>, put this page under the home page. If you don't want a page to be shown in the menu as it will be linked from an icon or widget, just hide it from the menu.</p><p>The footer navigation usually shows different items than the top navigation with some of the items being repeated, for example, the page for developers will be shown only in the footer; whereas, the page for news will be shown in both header and footer. For all the repeated items, just create a page with the <span class="strong"><strong>Redirect</strong></span> setting in the advanced settings of the page and set it to the original page in the main tree. By default, when you create a secondary tree structure, all pages under the root of that tree will include the slug of the root page in their URL paths. If you want to skip the slug of the root in the URL path, you will need to set the <span class="strong"><strong>Overwrite URL</strong></span> setting in the advanced settings of the page. For example, the developers page should be under <code class="literal">/en/developers/</code> and not <code class="literal">/en/secondary/developers/</code>.</p></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec242"/>How it works...</h2></div></div></div><p>Finally, your page structure will look similar to the following image (of course, the page structure can be much more complex too):</p><div class="mediaobject"><img alt="How it works..." src="graphics/B04912_07_01.jpg"/></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec243"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The<a class="indexterm" id="id356"/> <span class="emphasis"><em>Creating a template tag to load a QuerySet in a template</em></span> recipe in <a class="link" href="ch05.html" title="Chapter 5. Custom Template Filters and Tags">Chapter 5</a>, <span class="emphasis"><em>Custom Template Filters and Tags</em></span></li><li class="listitem" style="list-style-type: disc">The <span class="emphasis"><em>Creating templates for Django CMS</em></span> recipe</li><li class="listitem" style="list-style-type: disc">The <span class="emphasis"><em>Attaching your own navigation</em></span> recipe</li></ul></div></div></div>
<div class="section" title="Converting an app to a CMS app"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec73"/>Converting an app to a CMS app</h1></div></div></div><p>The<a class="indexterm" id="id357"/> simplest Django CMS website will have the whole page tree<a class="indexterm" id="id358"/> created using administration interface. However, for real-world cases, you will probably need to show forms or lists of objects under some page nodes. If you have created an app that is responsible for some type of objects in your website, such as <code class="literal">movies</code>, you can easily convert it to a Django CMS app and attach it to one of the pages. This will ensure that the root URL of the app is translatable and the menu item is highlighted when selected. In this recipe, we will convert the <code class="literal">movies</code> app to a CMS app.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec244"/>Getting ready</h2></div></div></div><p>Let's start with the <code class="literal">movies</code> app that we created in the <span class="emphasis"><em>Filtering object lists</em></span> recipe in <a class="link" href="ch03.html" title="Chapter 3. Forms and Views">Chapter 3</a>, <span class="emphasis"><em>Forms and Views</em></span>.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec245"/>How to do it...</h2></div></div></div><p>Follow<a class="indexterm" id="id359"/> these steps to convert a usual <code class="literal">movies</code> Django app<a class="indexterm" id="id360"/> to a Django CMS app:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">First of all, remove or comment out the inclusion of the URL configuration of the app as it will be included by an apphook in Django CMS, as follows:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong># myproject/urls.py</strong></span>
# -*- coding: UTF-8 -*-
from __future__ import unicode_literals
from django.conf.urls import patterns, include, url
from django.conf import settings
from django.conf.urls.static import static
from django.contrib.staticfiles.urls import \
    staticfiles_urlpatterns
from django.conf.urls.i18n import i18n_patterns
from django.contrib import admin
admin.autodiscover()

urlpatterns = i18n_patterns("",
    # remove or comment out the inclusion of app's urls
<span class="strong"><strong>    # url(r"^movies/", include("movies.urls")),</strong></span>

    url(r"^admin/", include(admin.site.urls)),
    url(r"^", include("cms.urls")),
)
urlpatterns += staticfiles_urlpatterns()
urlpatterns += static(settings.MEDIA_URL,
    document_root=settings.MEDIA_ROOT)</pre></div></li><li class="listitem">Create a <code class="literal">cms_app.py</code> file in the <code class="literal">movies</code> directory and create <code class="literal">MoviesApphook</code> there, as follows:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong># movies/cms_app.py</strong></span>
# -*- coding: UTF-8 -*-
from __future__ import unicode_literals
from django.utils.translation import ugettext_lazy as _
from cms.app_base import CMSApp
from cms.apphook_pool import apphook_pool

class MoviesApphook(CMSApp):
    name = _("Movies")
    urls = ["movies.urls"]

apphook_pool.register(MoviesApphook)</pre></div></li><li class="listitem">Set the <a class="indexterm" id="id361"/>newly created apphook in the settings, as <a class="indexterm" id="id362"/>shown in the following:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong># settings.py</strong></span>
CMS_APPHOOKS = (
    # ...
    "movies.cms_app.MoviesApphook",
)</pre></div></li><li class="listitem">Finally, in all the movie templates, change the first line to extend from the template of the current CMS page instead of <code class="literal">base.html</code>, as follows:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>{# templates/movies/movies_list.html #}</strong></span>

Change
{% extends "base.html" %}

to
{% extends CMS_TEMPLATE %}</pre></div></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec246"/>How it works...</h2></div></div></div><p>Apphooks are the interfaces that join the URL configuration of apps to the CMS pages. Apphooks need to extend from <code class="literal">CMSApp</code>. To define the name, which will be shown in the <span class="strong"><strong>Application</strong></span> selection list under the <span class="strong"><strong>Advanced</strong></span> settings of a page, put the path of the apphook in the <code class="literal">CMS_APPHOOKS</code> project setting and restart the web server; the apphook will appear as one of the applications in the advanced page settings. After selecting an application for a page, you need to restart the server for the URLs to take effect.</p><p>The templates of the app should extend the page template if you want them to contain the placeholders or attributes of the page, for example, the <code class="literal">title</code> or the <code class="literal">description</code> meta tag.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec247"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <span class="emphasis"><em>Filtering object lists</em></span> recipe in <a class="link" href="ch03.html" title="Chapter 3. Forms and Views">Chapter 3</a>, <span class="emphasis"><em>Forms and Views</em></span></li><li class="listitem" style="list-style-type: disc">The <span class="emphasis"><em>Attaching your own navigation</em></span> recipe</li></ul></div></div></div>
<div class="section" title="Attaching your own navigation"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec74"/>Attaching your own navigation</h1></div></div></div><p>Once you have <a class="indexterm" id="id363"/>an app hooked in the CMS pages, all the URL paths under the page node will be controlled by the <code class="literal">urls.py</code> file of the app. To add some menu items under this page, you need to add a dynamical branch of navigation to the page tree. In this recipe, we will improve the <code class="literal">movies</code> app and add new navigation items under the <span class="strong"><strong>Movies</strong></span> page.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec248"/>Getting ready</h2></div></div></div><p>Let's say that we have a URL configuration for different lists of movies: editor's picks, commercial movies, and independent movies, as shown in the following code:</p><div class="informalexample"><pre class="programlisting"># movies/urls.py
# -*- coding: UTF-8 -*-
from __future__ import unicode_literals
from django.conf.urls import url, patterns
from django.shortcuts import redirect

urlpatterns = patterns("movies.views",
    url(r"^$", lambda request: redirect("featured_movie_list")),
    url(r"^editors-picks/$", "movie_list", {"featured": True},
        name='featured_movie_list'),
    url(r"^commercial/$", "movie_list", {"commercial": True},
        name="commercial_movie_list"),
    url(r"^independent/$", "movie_list", {"independent": True},
        name="independent_movie_list"),
    url(r"^(?P&lt;slug&gt;[^/]+)/$", "movie_detail",
        name="movie_detail"),
)</pre></div></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec249"/>How to do it...</h2></div></div></div><p>Follow these two steps to attach the <span class="strong"><strong>Editor's Picks</strong></span>, <span class="strong"><strong>Commercial Movies</strong></span>, and <span class="strong"><strong>Independent Movies</strong></span> menu choices to the navigational menu under the <span class="strong"><strong>Movies</strong></span> page:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create the <code class="literal">menu.py</code> file in the <code class="literal">movies</code> app and add the following <code class="literal">MoviesMenu</code> class, as follows:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong># movies/menu.py</strong></span>
# -*- coding: UTF-8 -*-
from __future__ import unicode_literals
from django.utils.translation import ugettext_lazy as _
from django.core.urlresolvers import reverse
from menus.base import NavigationNode
from menus.menu_pool import menu_pool
from cms.menu_bases import CMSAttachMenu

class MoviesMenu(CMSAttachMenu):
    name = _("Movies Menu")

    def get_nodes(self, request):
        nodes = [
            NavigationNode(
                _("Editor's Picks"),
                reverse("featured_movie_list"),
                1,
            ),
            NavigationNode(
                _("Commercial Movies"),
                reverse("commercial_movie_list"),
                2,
            ),
            NavigationNode(
                _("Independent Movies"),
                reverse("independent_movie_list"),
                3,
            ),
        ]
        return nodes

menu_pool.register_menu(MoviesMenu)</pre></div></li><li class="listitem">Restart the web server and then edit the <span class="strong"><strong>Advanced</strong></span> settings of the <span class="strong"><strong>Movies</strong></span> page and select <span class="strong"><strong>Movies Menu</strong></span> for the <span class="strong"><strong>Attached</strong></span> menu setting.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec250"/>How it works...</h2></div></div></div><p>In the<a class="indexterm" id="id364"/> frontend, you will see the new menu items attached to the <span class="strong"><strong>Movies</strong></span> page, as shown in the following image:</p><div class="mediaobject"><img alt="How it works..." src="graphics/B04912_07_02.jpg"/></div><p>Dynamic menus that are attachable to pages need to extend <code class="literal">CMSAttachMenu</code>, define the name by which they will be selected, and define the <code class="literal">get_nodes()</code> method that returns a list of <code class="literal">NavigationNode</code> objects. The <code class="literal">NavigationNode</code> class takes at least three parameters: the title of the menu item, the URL path of the menu item, and the ID of the node. The IDs can be chosen freely with the only requirement being that they have to be unique among<a class="indexterm" id="id365"/> this attached menu. The other optional parameters are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">parent_id</code>: This is<a class="indexterm" id="id366"/> the ID of the parent node if you want to create a hierarchical dynamical menu</li><li class="listitem" style="list-style-type: disc"><code class="literal">parent_namespace</code>: This is the name of another menu if this node is to be <a class="indexterm" id="id367"/>attached to a different menu tree, for example, the name of this menu is "<code class="literal">MoviesMenu</code>"</li><li class="listitem" style="list-style-type: disc"><code class="literal">attr</code>: This<a class="indexterm" id="id368"/> is a dictionary of the additional attributes that can be used in a template or menu modifier</li><li class="listitem" style="list-style-type: disc"><code class="literal">visible</code>: This<a class="indexterm" id="id369"/> sets whether or not the menu item should be visible</li></ul></div><p>For other examples<a class="indexterm" id="id370"/> of attachable menus, refer to the official documentation at <a class="ulink" href="https://django-cms.readthedocs.org/en/latest/how_to/menus.html">https://django-cms.readthedocs.org/en/latest/how_to/menus.html</a>.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec251"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <span class="emphasis"><em>Structuring the page menu</em></span> recipe</li><li class="listitem" style="list-style-type: disc">The <span class="emphasis"><em>Converting an app to a CMS app</em></span> recipe</li></ul></div></div></div>
<div class="section" title="Writing your own CMS plugin"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec75"/>Writing your own CMS plugin</h1></div></div></div><p>Django CMS comes with a lot of content plugins that can be used in template placeholders, such as the text, flash, picture, and Google map plugins. However, for more structured and better styled content, you will need your own custom plugins, which are not too difficult to implement. In this recipe, we will see how to create a new plugin and have a custom<a class="indexterm" id="id371"/> layout for its data, depending on the chosen template of the page.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec252"/>Getting ready</h2></div></div></div><p>Let's create an <code class="literal">editorial</code> app and mention it in the <code class="literal">INSTALLED_APPS</code> setting. Also, we will need the <code class="literal">cms/magazine.html</code> template that was created and mentioned in the <code class="literal">CMS_TEMPLATES</code> setting; you can simply duplicate the <code class="literal">cms/default.html</code> template for this.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec253"/>How to do it...</h2></div></div></div><p>To create<a class="indexterm" id="id372"/> the <code class="literal">EditorialContent</code> plugin, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In the <code class="literal">models.py</code> file of the newly created app, add the <code class="literal">EditorialContent</code> model extending from <code class="literal">CMSPlugin</code>. The <code class="literal">EditorialContent</code> model will have the following fields: title, subtitle, description, website, image, image caption, and a CSS class:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong># editorial/models.py</strong></span>
# -*- coding: UTF-8 -*-
from __future__ import unicode_literals
import os
from django.db import models
from django.utils.translation import ugettext_lazy as _
from django.utils.timezone import now as tz_now
from cms.models import CMSPlugin
from cms.utils.compat.dj import python_2_unicode_compatible

def upload_to(instance, filename):
    now = tz_now()
    filename_base, filename_ext = \
        os.path.splitext(filename)
    return "editorial/%s%s" % (
        now.strftime("%Y/%m/%Y%m%d%H%M%S"),
        filename_ext.lower(),
    )

@python_2_unicode_compatible
class EditorialContent(CMSPlugin):
    title = models.CharField(_("Title"), max_length=255)
    subtitle = models.CharField(_("Subtitle"),
        max_length=255, blank=True)
    description = models.TextField(_("Description"),
        blank=True)
    website = models.CharField(_("Website"),
        max_length=255, blank=True)

    image = models.ImageField(_("Image"), max_length=255,
        upload_to=upload_to, blank=True)
    image_caption = models.TextField(_("Image Caption"),
        blank=True)

    css_class = models.CharField(_("CSS Class"),
        max_length=255, blank=True)

    def __str__(self):
        return self.title

    class Meta:
        ordering = ["title"]
        verbose_name = _("Editorial content")
        verbose_name_plural = _("Editorial contents")</pre></div></li><li class="listitem">In the<a class="indexterm" id="id373"/> same app, create a <code class="literal">cms_plugins.py</code> file and add a <code class="literal">EditorialContentPlugin</code> class extending <code class="literal">CMSPluginBase</code>. This class is a little bit like <code class="literal">ModelAdmin</code>—it defines the appearance of administration settings for the plugin:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong># editorial/cms_plugins.py</strong></span>
# -*- coding: utf-8 -*-
from __future__ import unicode_literals
from django.utils.translation import ugettext as _
from cms.plugin_base import CMSPluginBase
from cms.plugin_pool import plugin_pool
from .models import EditorialContent

class EditorialContentPlugin(CMSPluginBase):
    model = EditorialContent
    name = _("Editorial Content")
    render_template = "cms/plugins/editorial_content.html"

    fieldsets = (
        (_("Main Content"), {
            "fields": (
                "title", "subtitle", "description",
                "website"),
            "classes": ["collapse open"]
        }),
        (_("Image"), {
            "fields": ("image", "image_caption"),
            "classes": ["collapse open"]
        }),
        (_("Presentation"), {
            "fields": ("css_class",),
            "classes": ["collapse closed"]
        }),
    )

    def render(self, context, instance, placeholder):
        context.update({
            "object": instance,
            "placeholder": placeholder,
        })
        return context

plugin_pool.register_plugin(EditorialContentPlugin)</pre></div></li><li class="listitem">To specify <a class="indexterm" id="id374"/>which plugins go to which placeholders, you have to define the <code class="literal">CMS_PLACEHOLDER_CONF</code> setting. You can also define the extra context for the templates of the plugins that are rendered in a specific placeholder. Let's allow <code class="literal">EditorialContentPlugin</code> for the <code class="literal">main_content</code> placeholder and set the <code class="literal">editorial_content_template</code> context variable for the <code class="literal">main_content</code> placeholder in the <code class="literal">cms/magazine.html</code> template, as follows:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong># settings.py</strong></span>
CMS_PLACEHOLDER_CONF = {
    "main_content": {
        "name": gettext("Main Content"),
        "plugins": (
            "EditorialContentPlugin",
            "TextPlugin",
        ),
    },
    "cms/magazine.html main_content": {
        "name": gettext("Magazine Main Content"),
        "plugins": (
            "EditorialContentPlugin",
            "TextPlugin"
        ),
        "extra_context": {
            "editorial_content_template": \
            "cms/plugins/editorial_content/magazine.html",
        }
    },
}</pre></div></li><li class="listitem">Then, we will create two templates. One of them will be the <code class="literal">editorial_content.html</code> template. It checks whether the <code class="literal">editorial_content_template</code> context variable exists. If the variable exists, it is<a class="indexterm" id="id375"/> included. Otherwise, it shows the default layout for editorial content:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>{# templates/cms/plugins/editorial_content.html #}</strong></span>
{% load i18n %}

{% if editorial_content_template %}
    {% include editorial_content_template %}
{% else %}
    &lt;div class="item{% if object.css_class %} {{ object.css_class }}{% endif %}"&gt;
        &lt;!-- editorial content for non-specific placeholders --&gt;
        &lt;div class="img"&gt;
            {% if object.image %}
                &lt;img class="img-responsive" alt="{{ object.image_caption|striptags }}" src="{{ object.image.url }}" /&gt;
            {% endif %}
            {% if object.image_caption %}&lt;p class="caption"&gt;{{ object.image_caption|removetags:"p" }}&lt;/p&gt;
            {% endif %}
        &lt;/div&gt;
        &lt;h3&gt;&lt;a href="{{ object.website }}"&gt;{{ object.title }}&lt;/a&gt;&lt;/h3&gt;
        &lt;h4&gt;{{ object.subtitle }}&lt;/h4&gt;
        &lt;div class="description"&gt;{{ object.description|safe }}&lt;/div&gt;
    &lt;/div&gt;
{% endif %}</pre></div></li><li class="listitem">The second template is a specific template for the <code class="literal">EditorialContent</code> plugin in the <code class="literal">cms/magazine.html</code> template. There's nothing too fancy here, just an additional Bootstrap-specific <code class="literal">well</code> CSS class for the container to make the plugin stand out:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>{# templates/cms/plugins/editorial_content/magazine.html #}</strong></span>
{% load i18n %}
&lt;div class="<span class="strong"><strong>well</strong></span> item{% if object.css_class %} {{ object.css_class }}{% endif %}"&gt;
    &lt;!-- editorial content for non-specific placeholders --&gt;
    &lt;div class="img"&gt;
        {% if object.image %}
            &lt;img class="img-responsive" alt="{{ object.image_caption|striptags }}" src="{{ object.image.url }}" /&gt;
        {% endif %}
        {% if object.image_caption %}&lt;p class="caption"&gt;{{ object.image_caption|removetags:"p" }}&lt;/p&gt;
        {% endif %}
    &lt;/div&gt;
    &lt;h3&gt;&lt;a href="{{ object.website }}"&gt;{{ object.title }}&lt;/a&gt;&lt;/h3&gt;
    &lt;h4&gt;{{ object.subtitle }}&lt;/h4&gt;
    &lt;div class="description"&gt;{{ object.description|safe }}&lt;/div&gt;
&lt;/div&gt;</pre></div></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec254"/>How it works...</h2></div></div></div><p>If you<a class="indexterm" id="id376"/> go to the <span class="strong"><strong>Draft</strong></span> mode of any CMS page and switch to the <span class="strong"><strong>Structure</strong></span> section, you can add the <span class="strong"><strong>Editorial Content</strong></span> plugin to a placeholder. The content of this plugin will be rendered with a specified template and it can also be customized, depending on the template of the page where the plugin is chosen. For example, choose the <code class="literal">cms/magazine.html</code> template for the <span class="strong"><strong>News</strong></span> page and then add the <span class="strong"><strong>Editorial Content</strong></span> plugin. The <span class="strong"><strong>News</strong></span> page will look similar to the following screenshot:</p><div class="mediaobject"><img alt="How it works..." src="graphics/B04912_07_03.jpg"/></div><p>Here, the <span class="strong"><strong>Test Title</strong></span> with an image and description is the custom plugin inserted in the <code class="literal">main_content</code> placeholder in the <code class="literal">magazine.html</code> page template. If the page template was <a class="indexterm" id="id377"/>different, the plugin would be rendered without the Bootstrap-specific <code class="literal">well</code> CSS class; therefore, it would not have a gray background.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec255"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <span class="emphasis"><em>Creating templates for Django CMS</em></span> recipe</li><li class="listitem" style="list-style-type: disc">The <span class="emphasis"><em>Structuring the page menu</em></span> recipe</li></ul></div></div></div>
<div class="section" title="Adding new fields to the CMS page"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec76"/>Adding new fields to the CMS page</h1></div></div></div><p>CMS pages<a class="indexterm" id="id378"/> have several multilingual fields such as title, slug, menu title, page title, description meta tag, and overwrite URL. They also have several common nonlanguage-specific fields such as template, ID used in template tags, attached application, and attached menu. However, that might not be enough for more complex websites. Thankfully, Django CMS features a manageable mechanism to add new database fields for CMS pages. In this recipe, you will see how to add fields for the CSS classes for the <a class="indexterm" id="id379"/>navigational menu items and page body.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec256"/>Getting ready</h2></div></div></div><p>Let's create the <code class="literal">cms_extensions</code> app and put it under <code class="literal">INSTALLED_APPS</code> in the settings.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec257"/>How to do it...</h2></div></div></div><p>To create a CMS page extension with the CSS class fields for the navigational menu items and page body, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In the <code class="literal">models.py</code> file, create a <code class="literal">CSSExtension</code> class extending <code class="literal">PageExtension</code> and put fields for the menu item's CSS class and <code class="literal">&lt;body&gt;</code> CSS class, as follows:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong># cms_extensions/models.py</strong></span>
# -*- coding: UTF-8 -*-
from __future__ import unicode_literals
from django.db import models
from django.utils.translation import ugettext_lazy as _
from cms.extensions import PageExtension
from cms.extensions.extension_pool import extension_pool

MENU_ITEM_CSS_CLASS_CHOICES = (
    ("featured", ".featured"),
)

BODY_CSS_CLASS_CHOICES = (
    ("serious", ".serious"),
    ("playful", ".playful"),
)

class CSSExtension(PageExtension):
    menu_item_css_class = models.CharField(
        _("Menu Item CSS Class"),
        max_length=200,
        blank=True,
        choices=MENU_ITEM_CSS_CLASS_CHOICES,
    )
    body_css_class = models.CharField(
        _("Body CSS Class"),
        max_length=200,
        blank=True,
        choices=BODY_CSS_CLASS_CHOICES,
    )

extension_pool.register(CSSExtension)</pre></div></li><li class="listitem">In the <code class="literal">admin.py</code> file, let's add administration options for the <code class="literal">CSSExtension</code> model that<a class="indexterm" id="id380"/> we just created:<div class="informalexample"><pre class="programlisting"># cms_extensions/admin.py
# -*- coding: UTF-8 -*-
from __future__ import unicode_literals
from django.contrib import admin
from cms.extensions import PageExtensionAdmin
from .models import CSSExtension

class CSSExtensionAdmin(PageExtensionAdmin):
    pass

admin.site.register(CSSExtension, CSSExtensionAdmin)</pre></div></li><li class="listitem">Then, we need to show the CSS extension in the toolbar for each page. This can be done by putting the following code in the <code class="literal">cms_toolbar.py</code> file of the app:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong># cms_extensions/cms_toolbar.py</strong></span>
# -*- coding: UTF-8 -*-
from __future__ import unicode_literals
from cms.api import get_page_draft
from cms.toolbar_pool import toolbar_pool
from cms.toolbar_base import CMSToolbar
from cms.utils import get_cms_setting
from cms.utils.permissions import has_page_change_permission
from django.core.urlresolvers import reverse, NoReverseMatch
from django.utils.translation import ugettext_lazy as _
from .models import CSSExtension

@toolbar_pool.register
class CSSExtensionToolbar(CMSToolbar):
    def populate(self):
        # always use draft if we have a page
        self.page = get_page_draft(
            self.request.current_page)

        if not self.page:
            # Nothing to do
            return

        # check global permissions
        # if CMS_PERMISSIONS is active
        if get_cms_setting("PERMISSION"):
            has_global_current_page_change_permission = \
                has_page_change_permission(self.request)
        else:
            has_global_current_page_change_permission = \
                False
            # check if user has page edit permission
        can_change = self.request.current_page and \
                     self.request.current_page.\
                         has_change_permission(self.request)
        if has_global_current_page_change_permission or \
            can_change:
            try:
                extension = CSSExtension.objects.get(
                    extended_object_id=self.page.id)
            except CSSExtension.DoesNotExist:
                extension = None
            try:
                if extension:
                    url = reverse(
               "admin:cms_extensions_cssextension_change",
                        args=(extension.pk,)
                    )
                else:
                    url = reverse(
               "admin:cms_extensions_cssextension_add") + \
                    "?extended_object=%s" % self.page.pk
            except NoReverseMatch:
                # not in urls
                pass
            else:
                not_edit_mode = not self.toolbar.edit_mode
                current_page_menu = self.toolbar.\
                    get_or_create_menu("page")
                current_page_menu.add_modal_item(
                    _("CSS"),
                    url=url,
                    disabled=not_edit_mode
                )</pre></div><p>This code checks whether the user has the permission to change the current page, and if so, it loads the page menu from the current toolbar and adds a new menu item, CSS, with the link to create or edit <code class="literal">CSSExtension</code>.</p></li><li class="listitem">As we <a class="indexterm" id="id381"/>want to access the CSS extension in the navigation menu in order to attach a CSS class, we need to create a menu modifier in the <code class="literal">menu.py</code> file of the same app:<div class="informalexample"><pre class="programlisting"># cms_extensions/menu.py
# -*- coding: UTF-8 -*-
from __future__ import unicode_literals
from cms.models import Page
from menus.base import Modifier
from menus.menu_pool import menu_pool

class CSSModifier(Modifier):
    def modify(self, request, nodes, namespace, root_id,
        post_cut, breadcrumb):
        if post_cut:
            return nodes
        for node in nodes:
            try:
                page = Page.objects.get(pk=node.id)
            except:
                continue
            try:
                page.cssextension
            except:
                pass
            else:
                node.cssextension = page.cssextension
        return nodes

menu_pool.register_modifier(CSSModifier)</pre></div></li><li class="listitem">Then, we will add the body CSS class to the <code class="literal">&lt;body&gt;</code> element in the <code class="literal">base.html</code> template, as follows:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>{# templates/base.html #}</strong></span>
&lt;body class="{% block bodyclass %}{% endblock %}{% if request.current_page.cssextension %}{{ request.current_page.cssextension.body_css_class }}{% endif %}"&gt;</pre></div></li><li class="listitem">Lastly, we will modify the <code class="literal">menu.html</code> file, which is the default template for the navigation menu, and add the menu item's CSS class as follows:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>{# templates/menu/menu.html #}</strong></span>
{% load i18n menu_tags cache %}

{% for child in children %}
    &lt;li class="{% if child.ancestor %}ancestor{% endif %}{% if child.selected %} active{% endif %}{% if child.children %} dropdown{% endif %}{% if child.cssextension %} {{ child.cssextension.menu_item_css_class }}{% endif %}"&gt;
        {% if child.children %}&lt;a class="dropdown-toggle" data-toggle="dropdown" href="#"&gt;{{ child.get_menu_title }} &lt;span class="caret"&gt;&lt;/span&gt;&lt;/a&gt;
            &lt;ul class="dropdown-menu"&gt;
                {% show_menu from_level to_level extra_inactive extra_active template "" "" child %}
            &lt;/ul&gt;
        {% else %}
            &lt;a href="{{ child.get_absolute_url }}"&gt;&lt;span&gt;{{ child.get_menu_title }}&lt;/span&gt;&lt;/a&gt;
        {% endif %}
    &lt;/li&gt;
{% endfor %}</pre></div></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec258"/>How it works...</h2></div></div></div><p>The <code class="literal">PageExtension</code> class is a model mixin with a one-to-one relationship with the <code class="literal">Page</code> model. To be <a class="indexterm" id="id382"/>able to administrate the custom extension model in Django CMS, there is a specific <code class="literal">PageExtensionAdmin</code> class to extend. Then, in the <code class="literal">cms_toolbar.py</code> file, we will create the <code class="literal">CSSExtensionToolbar</code> class, inheriting from the <code class="literal">CMSToolbar</code> class, to create an item in the Django CMS toolbar. In the <code class="literal">populate()</code> method, we will perform the general routine to check the page permissions and then we will add a CSS menu item to the toolbar.</p><p>If the administrator has the permission to edit the page, then they will see a <span class="strong"><strong>CSS</strong></span> option in the toolbar under the <span class="strong"><strong>Page</strong></span> menu item, as shown in the following screenshot:</p><div class="mediaobject"><img alt="How it works..." src="graphics/B04912_07_04.jpg"/></div><p>When the<a class="indexterm" id="id383"/> administrator clicks on the new <span class="strong"><strong>CSS</strong></span> menu item, a pop-up window opens and they can select the <span class="strong"><strong>CSS</strong></span> classes for the navigation menu item and body, as shown in the following screenshot:</p><div class="mediaobject"><img alt="How it works..." src="graphics/B04912_07_05.jpg"/></div><p>To show<a class="indexterm" id="id384"/> a specific CSS class from the <code class="literal">Page</code> extension in the navigation menu, we need to attach the <code class="literal">CSSExtension</code> object to the navigation items accordingly. Then, these objects can be accessed in the <code class="literal">menu.html</code> template as <code class="literal">{{ child.cssextension }}</code>. In the end, you will have some navigation menu items highlighted, such as the <span class="strong"><strong>Music</strong></span> item shown here (depending on your CSS):</p><div class="mediaobject"><img alt="How it works..." src="graphics/B04912_07_06.jpg"/></div><p>To show a specific CSS class for <code class="literal">&lt;body&gt;</code> of the current page is much simpler. We can use <code class="literal">{{ request.current_page.cssextension.body_css_class }}</code> right away.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec259"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <span class="emphasis"><em>Creating templates for Django CMS</em></span> recipe</li></ul></div></div></div></body></html>