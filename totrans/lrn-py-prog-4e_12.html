<html><head></head><body>
  <div class="Basic-Text-Frame" id="_idContainer189">
   <h1 class="chapterNumber">
    <span class="koboSpan" id="kobo.1.1">
     12
    </span>
   </h1>
   <h1 class="chapterTitle" id="_idParaDest-302">
    <span class="koboSpan" id="kobo.2.1">
     Introduction to Type Hinting
    </span>
   </h1>
   <blockquote class="packt_quote">
    <p class="quote">
     <span class="koboSpan" id="kobo.3.1">
      ”Knowing yourself is the beginning of all wisdom.”
     </span>
    </p>
    <p class="cite">
     <span class="koboSpan" id="kobo.4.1">
      – Aristotle
     </span>
    </p>
   </blockquote>
   <p class="normal">
    <span class="koboSpan" id="kobo.5.1">
     In this chapter, we are going to explore the topic
    </span>
    <a id="_idIndexMarker1033">
    </a>
    <span class="koboSpan" id="kobo.6.1">
     of
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.7.1">
      type hinting
     </span>
    </strong>
    <span class="koboSpan" id="kobo.8.1">
     .
    </span>
    <span class="koboSpan" id="kobo.8.2">
     Type hinting is perhaps the biggest change introduced in Python since Python 2.2, which saw the unification of types and classes.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.9.1">
     Specifically, we will study the following topics:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.10.1">
      Python approach to types.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.11.1">
      Types available for annotations.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.12.1">
      Protocols (in brief).
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.13.1">
      Mypy, a static type checker for Python.
     </span>
    </li>
   </ul>
   <h1 class="heading-1" id="_idParaDest-303">
    <span class="koboSpan" id="kobo.14.1">
     Python approach to types
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.15.1">
     Python
    </span>
    <a id="_idIndexMarker1034">
    </a>
    <span class="koboSpan" id="kobo.16.1">
     is both a
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.17.1">
      strongly typed
     </span>
    </strong>
    <span class="koboSpan" id="kobo.18.1">
     and a
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.19.1">
      dynamically typed
     </span>
    </strong>
    <span class="koboSpan" id="kobo.20.1">
     language.
    </span>
   </p>
   <p class="normal">
    <em class="italic">
     <span class="koboSpan" id="kobo.21.1">
      Strongly typed
     </span>
    </em>
    <span class="koboSpan" id="kobo.22.1">
     means
    </span>
    <a id="_idIndexMarker1035">
    </a>
    <span class="koboSpan" id="kobo.23.1">
     that Python does not allow implicit type conversions that could lead to unexpected behaviors.
    </span>
    <span class="koboSpan" id="kobo.23.2">
     Consider the following
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.24.1">
      php
     </span>
    </strong>
    <span class="koboSpan" id="kobo.25.1">
     code:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta"><span class="koboSpan" id="kobo.26.1">&lt;?php</span></span>
<span class="hljs-variable"><span class="koboSpan" id="kobo.27.1">$a</span></span><span class="koboSpan" id="kobo.28.1"> = </span><span class="hljs-number"><span class="koboSpan" id="kobo.29.1">2</span></span><span class="koboSpan" id="kobo.30.1">;
</span><span class="hljs-variable"><span class="koboSpan" id="kobo.31.1">$b</span></span><span class="koboSpan" id="kobo.32.1"> = </span><span class="hljs-string"><span class="koboSpan" id="kobo.33.1">"2"</span></span><span class="koboSpan" id="kobo.34.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.35.1">echo</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.36.1">$a</span></span><span class="koboSpan" id="kobo.37.1"> + </span><span class="hljs-variable"><span class="koboSpan" id="kobo.38.1">$b</span></span><span class="koboSpan" id="kobo.39.1">; </span><span class="hljs-comment"><span class="koboSpan" id="kobo.40.1">// prints: 4</span></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.41.1">?&gt;</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.42.1">
     In php, variables are prepended with a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.43.1">
      $
     </span>
    </code>
    <span class="koboSpan" id="kobo.44.1">
     sign.
    </span>
    <span class="koboSpan" id="kobo.44.2">
     In the above code, we set
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.45.1">
      $a
     </span>
    </code>
    <span class="koboSpan" id="kobo.46.1">
     to the integer number
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.47.1">
      2
     </span>
    </code>
    <span class="koboSpan" id="kobo.48.1">
     , and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.49.1">
      $b
     </span>
    </code>
    <span class="koboSpan" id="kobo.50.1">
     to the string
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.51.1">
      "2"
     </span>
    </code>
    <span class="koboSpan" id="kobo.52.1">
     .
    </span>
    <span class="koboSpan" id="kobo.52.2">
     To add them together, php performs an implicit conversion of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.53.1">
      $b
     </span>
    </code>
    <span class="koboSpan" id="kobo.54.1">
     , from string to integer.
    </span>
    <span class="koboSpan" id="kobo.54.2">
     This is referred to
    </span>
    <a id="_idIndexMarker1036">
    </a>
    <span class="koboSpan" id="kobo.55.1">
     as
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.56.1">
      type juggling
     </span>
    </strong>
    <span class="koboSpan" id="kobo.57.1">
     .
    </span>
    <span class="koboSpan" id="kobo.57.2">
     This might seem a convenient feature, but the fact that php is weakly typed has the potential to lead to bugs in the code.
    </span>
    <span class="koboSpan" id="kobo.57.3">
     If we tried to do the same in Python, the result would be
    </span>
    <a id="_idIndexMarker1037">
    </a>
    <span class="koboSpan" id="kobo.58.1">
     much different:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.59.1"># example.strongly.typed.py</span></span><span class="koboSpan" id="kobo.60.1">
a = </span><span class="hljs-number"><span class="koboSpan" id="kobo.61.1">2</span></span><span class="koboSpan" id="kobo.62.1">
b = </span><span class="hljs-string"><span class="koboSpan" id="kobo.63.1">"2"</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.64.1">print</span></span><span class="koboSpan" id="kobo.65.1">(a + b)
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.66.1">
     Running the above produces:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.67.1">$ python ch12/example.strongly.typed.py
Traceback (most recent call last):
  File "ch12/example.strongly.typed.py", line 3, in &lt;module&gt;
    print(a + b)
          ~~^~~
TypeError: unsupported operand type(s) for +: 'int' and 'str'
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.68.1">
     Python is
    </span>
    <a id="_idIndexMarker1038">
    </a>
    <span class="koboSpan" id="kobo.69.1">
     strongly typed, so when we try to add an integer to a string – or any pair of incompatible types – we get
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.70.1">
      TypeError
     </span>
    </code>
    <span class="koboSpan" id="kobo.71.1">
     .
    </span>
   </p>
   <p class="normal">
    <em class="italic">
     <span class="koboSpan" id="kobo.72.1">
      Dynamically typed
     </span>
    </em>
    <span class="koboSpan" id="kobo.73.1">
     means that Python determines the type of a variable at runtime, which means that we do not specify types explicitly in the code.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.74.1">
     In contrast, languages like C++, Java, C#, and Swift are
    </span>
    <a id="_idIndexMarker1039">
    </a>
    <span class="koboSpan" id="kobo.75.1">
     all
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.76.1">
      statically typed
     </span>
    </strong>
    <span class="koboSpan" id="kobo.77.1">
     .
    </span>
    <span class="koboSpan" id="kobo.77.2">
     When we declare variables in these languages, we must specify their type.
    </span>
    <span class="koboSpan" id="kobo.77.3">
     For example, in Java, it is common to see variables declared like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.78.1">String name = </span><span class="hljs-string"><span class="koboSpan" id="kobo.79.1">"John Doe"</span></span><span class="koboSpan" id="kobo.80.1">;
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.81.1">int</span></span><span class="koboSpan" id="kobo.82.1"> age = </span><span class="hljs-number"><span class="koboSpan" id="kobo.83.1">60</span></span><span class="koboSpan" id="kobo.84.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.85.1">
     There are pros and cons to both approaches, so it’s hardly a matter of which is best.
    </span>
    <span class="koboSpan" id="kobo.85.2">
     Python was designed to be concise, lean, and elegant.
    </span>
    <span class="koboSpan" id="kobo.85.3">
     One of the advantages of its design is known
    </span>
    <a id="_idIndexMarker1040">
    </a>
    <span class="koboSpan" id="kobo.86.1">
     as
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.87.1">
      duck typing
     </span>
    </strong>
    <span class="koboSpan" id="kobo.88.1">
     .
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-304">
    <span class="koboSpan" id="kobo.89.1">
     Duck typing
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.90.1">
     Another
    </span>
    <a id="_idIndexMarker1041">
    </a>
    <span class="koboSpan" id="kobo.91.1">
     concept that Python helped popularize is
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.92.1">
      duck typing
     </span>
    </strong>
    <span class="koboSpan" id="kobo.93.1">
     .
    </span>
    <span class="koboSpan" id="kobo.93.2">
     In essence, this means that the type or class of an object is less important than the methods it defines or the operations it supports.
    </span>
    <span class="koboSpan" id="kobo.93.3">
     As the saying goes:
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.94.1">
      “If it looks like a duck, swims like a duck, and quacks like a duck, then it probably is a duck.”
     </span>
    </em>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.95.1">
     Duck typing is
    </span>
    <a id="_idIndexMarker1042">
    </a>
    <span class="koboSpan" id="kobo.96.1">
     used extensively in Python because the language is dynamically typed.
    </span>
    <span class="koboSpan" id="kobo.96.2">
     It allows for greater flexibility and code reuse.
    </span>
    <span class="koboSpan" id="kobo.96.3">
     Consider the following example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.97.1"># duck.typing.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.98.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.99.1">Circle</span></span><span class="koboSpan" id="kobo.100.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.101.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.102.1">__init__</span></span><span class="koboSpan" id="kobo.103.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.104.1">self, radius</span></span><span class="koboSpan" id="kobo.105.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.106.1">self</span></span><span class="koboSpan" id="kobo.107.1">.radius = radius
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.108.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.109.1">area</span></span><span class="koboSpan" id="kobo.110.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.111.1">self</span></span><span class="koboSpan" id="kobo.112.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.113.1">return</span></span> <span class="hljs-number"><span class="koboSpan" id="kobo.114.1">3.14159</span></span><span class="koboSpan" id="kobo.115.1"> * (</span><span class="hljs-variable"><span class="koboSpan" id="kobo.116.1">self</span></span><span class="koboSpan" id="kobo.117.1">.radius**</span><span class="hljs-number"><span class="koboSpan" id="kobo.118.1">2</span></span><span class="koboSpan" id="kobo.119.1">)
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.120.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.121.1">Rectangle</span></span><span class="koboSpan" id="kobo.122.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.123.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.124.1">__init__</span></span><span class="koboSpan" id="kobo.125.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.126.1">self, width, height</span></span><span class="koboSpan" id="kobo.127.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.128.1">self</span></span><span class="koboSpan" id="kobo.129.1">.width = width
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.130.1">self</span></span><span class="koboSpan" id="kobo.131.1">.height = height
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.132.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.133.1">area</span></span><span class="koboSpan" id="kobo.134.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.135.1">self</span></span><span class="koboSpan" id="kobo.136.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.137.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.138.1">self</span></span><span class="koboSpan" id="kobo.139.1">.width * </span><span class="hljs-variable"><span class="koboSpan" id="kobo.140.1">self</span></span><span class="koboSpan" id="kobo.141.1">.height
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.142.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.143.1">print_shape_info</span></span><span class="koboSpan" id="kobo.144.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.145.1">shape</span></span><span class="koboSpan" id="kobo.146.1">):
    </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.147.1">print</span></span><span class="koboSpan" id="kobo.148.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.149.1">f"</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.150.1">{shape.__class__.__name__}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.151.1"> area: </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.152.1">{shape.area()}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.153.1">"</span></span><span class="koboSpan" id="kobo.154.1">)
circle = Circle(</span><span class="hljs-number"><span class="koboSpan" id="kobo.155.1">5</span></span><span class="koboSpan" id="kobo.156.1">)
rectangle = Rectangle(</span><span class="hljs-number"><span class="koboSpan" id="kobo.157.1">4</span></span><span class="koboSpan" id="kobo.158.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.159.1">6</span></span><span class="koboSpan" id="kobo.160.1">)
print_shape_info(circle)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.161.1"># Circle area: 78.53975</span></span><span class="koboSpan" id="kobo.162.1">
print_shape_info(rectangle)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.163.1"># Rectangle area: 24</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.164.1">
     In the above code, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.165.1">
      print_shape_info()
     </span>
    </code>
    <span class="koboSpan" id="kobo.166.1">
     function does not care about the specific type of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.167.1">
      shape
     </span>
    </code>
    <span class="koboSpan" id="kobo.168.1">
     .
    </span>
    <span class="koboSpan" id="kobo.168.2">
     It only cares that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.169.1">
      shape
     </span>
    </code>
    <span class="koboSpan" id="kobo.170.1">
     has a method called
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.171.1">
      area()
     </span>
    </code>
    <span class="koboSpan" id="kobo.172.1">
     .
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-305">
    <span class="koboSpan" id="kobo.173.1">
     History of type hinting
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.174.1">
     Although Python’s approach to
    </span>
    <a id="_idIndexMarker1043">
    </a>
    <span class="koboSpan" id="kobo.175.1">
     types is one of the features that contributed to the success of its wide adoption, in Python 3, we saw the beginning of a gradual and carefully designed evolution toward the integration of type safety features that still maintained Python’s dynamic nature.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.176.1">
     This began in Python 3.0, with
    </span>
    <a id="_idIndexMarker1044">
    </a>
    <span class="koboSpan" id="kobo.177.1">
     the introduction of function annotations, through
    </span>
    <a id="_idIndexMarker1045">
    </a>
    <span class="koboSpan" id="kobo.178.1">
     PEP 3107 (
    </span>
    <a href="https://peps.python.org/pep-3107/">
     <span class="url">
      <span class="koboSpan" id="kobo.179.1">
       https://peps.python.org/pep-3107/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.180.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.180.2">
     This addition allowed developers to add arbitrary metadata to function parameters and return values.
    </span>
    <span class="koboSpan" id="kobo.180.3">
     These annotations were initially intended as a tool for documentation and had no semantic meaning.
    </span>
    <span class="koboSpan" id="kobo.180.4">
     This step was the foundation layer that allowed the introduction of the explicit support of type hinting.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.181.1">
     In Python 3.5, with the landing of
    </span>
    <a id="_idIndexMarker1046">
    </a>
    <span class="koboSpan" id="kobo.182.1">
     PEP 484 (
    </span>
    <a href="https://peps.python.org/pep-0484/">
     <span class="url">
      <span class="koboSpan" id="kobo.183.1">
       https://peps.python.org/pep-0484/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.184.1">
     ), the real inception of type hinting came about.
    </span>
    <span class="koboSpan" id="kobo.184.2">
     PEP 484 formalized the addition of type hints, building on the syntax laid out by PEP 3107.
    </span>
    <span class="koboSpan" id="kobo.184.3">
     It defined a standard way to declare types for function parameters, return values, and variables.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.185.1">
     This enabled optional static type checking, and developers could now use tools like
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.186.1">
      Mypy
     </span>
    </strong>
    <span class="koboSpan" id="kobo.187.1">
     to detect
    </span>
    <a id="_idIndexMarker1047">
    </a>
    <span class="koboSpan" id="kobo.188.1">
     type-related errors before runtime.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.189.1">
     In Python 3.6, we saw the
    </span>
    <a id="_idIndexMarker1048">
    </a>
    <span class="koboSpan" id="kobo.190.1">
     introduction of annotations for variable declarations.
    </span>
    <span class="koboSpan" id="kobo.190.2">
     This was brought by PEP 526 (
    </span>
    <a href="https://peps.python.org/pep-0526/">
     <span class="url">
      <span class="koboSpan" id="kobo.191.1">
       https://peps.python.org/pep-0526/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.192.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.192.2">
     This new addition meant that types could be explicitly declared throughout the code, and not just in functions.
    </span>
    <span class="koboSpan" id="kobo.192.3">
     It included class attributes and module-level variables as well.
    </span>
    <span class="koboSpan" id="kobo.192.4">
     This further improved Python’s type hinting capabilities and made it easier to statically analyze code.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.193.1">
     Subsequent enhancements and PEPs refined and expanded Python’s type system even further.
    </span>
    <span class="koboSpan" id="kobo.193.2">
     The main ones were the following:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.194.1">
      PEP 544 (
     </span>
     <a href="https://peps.python.org/pep-0544/">
      <span class="url">
       <span class="koboSpan" id="kobo.195.1">
        https://peps.python.org/pep-0544/
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.196.1">
      ) landed in Python 3.8 and introduced the concept of protocols, which
     </span>
     <a id="_idIndexMarker1049">
     </a>
     <span class="koboSpan" id="kobo.197.1">
      enabled duck typing and further static type checking.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.198.1">
      PEP 585 (
     </span>
     <a href="https://peps.python.org/pep-0585/">
      <span class="url">
       <span class="koboSpan" id="kobo.199.1">
        https://peps.python.org/pep-0585/
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.200.1">
      ) landed in Python 3.9 and set another milestone.
     </span>
     <span class="koboSpan" id="kobo.200.2">
      It revolutionized type hinting by integrating it directly with Python
     </span>
     <a id="_idIndexMarker1050">
     </a>
     <span class="koboSpan" id="kobo.201.1">
      core collections.
     </span>
     <span class="koboSpan" id="kobo.201.2">
      This removed the need to import types from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.202.1">
       typing
      </span>
     </code>
     <span class="koboSpan" id="kobo.203.1">
      module for common data structures, such as dictionaries and lists.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.204.1">
      PEP 586 (
     </span>
     <a href="https://peps.python.org/pep-0586/">
      <span class="url">
       <span class="koboSpan" id="kobo.205.1">
        https://peps.python.org/pep-0586/
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.206.1">
      ) landed in Python 3.8 and added literal types, allowing
     </span>
     <a id="_idIndexMarker1051">
     </a>
     <span class="koboSpan" id="kobo.207.1">
      functions to specify literal values as parameters.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.208.1">
      PEP 589 (
     </span>
     <a href="https://peps.python.org/pep-0589/">
      <span class="url">
       <span class="koboSpan" id="kobo.209.1">
        https://peps.python.org/pep-0589/
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.210.1">
      ) landed in Python 3.8 and introduced
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.211.1">
       TypedDict
      </span>
     </code>
     <span class="koboSpan" id="kobo.212.1">
      , which
     </span>
     <a id="_idIndexMarker1052">
     </a>
     <span class="koboSpan" id="kobo.213.1">
      enabled precise type hints for dictionaries with a fixed set of keys.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.214.1">
      PEP 604 (
     </span>
     <a href="https://peps.python.org/pep-0604/">
      <span class="url">
       <span class="koboSpan" id="kobo.215.1">
        https://peps.python.org/pep-0604/
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.216.1">
      ) landed in Python 3.10 and introduced a
     </span>
     <a id="_idIndexMarker1053">
     </a>
     <span class="koboSpan" id="kobo.217.1">
      simplification of the syntax for union types, which streamlined annotations and improved the readability of the code.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.218.1">
     Other notable PEPs are:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.219.1">
      PEP 561 (
     </span>
     <a href="https://peps.python.org/pep-0561/">
      <span class="url">
       <span class="koboSpan" id="kobo.220.1">
        https://peps.python.org/pep-0561/
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.221.1">
      ), which specifies how to distribute
     </span>
     <a id="_idIndexMarker1054">
     </a>
     <span class="koboSpan" id="kobo.222.1">
      packages that support type checking.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.223.1">
      PEP 563 (
     </span>
     <a href="https://peps.python.org/pep-0563/">
      <span class="url">
       <span class="koboSpan" id="kobo.224.1">
        https://peps.python.org/pep-0563/
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.225.1">
      ), which changed the evaluation of annotations
     </span>
     <a id="_idIndexMarker1055">
     </a>
     <span class="koboSpan" id="kobo.226.1">
      such that they are not evaluated at function definition time.
     </span>
     <span class="koboSpan" id="kobo.226.2">
      This postponement was made the default behavior in Python 3.10.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.227.1">
      PEP 593 (
     </span>
     <a href="https://peps.python.org/pep-0593/">
      <span class="url">
       <span class="koboSpan" id="kobo.228.1">
        https://peps.python.org/pep-0593/
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.229.1">
      ), which introduced a way to augment existing type
     </span>
     <a id="_idIndexMarker1056">
     </a>
     <span class="koboSpan" id="kobo.230.1">
      hints with arbitrary metadata, potentially for use by third-party tools.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.231.1">
      PEP 612 (
     </span>
     <a href="https://peps.python.org/pep-0612/">
      <span class="url">
       <span class="koboSpan" id="kobo.232.1">
        https://peps.python.org/pep-0612/
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.233.1">
      ), which introduced parameter specifications, which
     </span>
     <a id="_idIndexMarker1057">
     </a>
     <span class="koboSpan" id="kobo.234.1">
      allow more complex types of variable annotations, particularly useful for decorators that modify function signatures.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.235.1">
      PEP 647 (
     </span>
     <a href="https://peps.python.org/pep-0647/">
      <span class="url">
       <span class="koboSpan" id="kobo.236.1">
        https://peps.python.org/pep-0647/
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.237.1">
      ), which introduced type guards, functions
     </span>
     <a id="_idIndexMarker1058">
     </a>
     <span class="koboSpan" id="kobo.238.1">
      that enable more precise type inference in conditional blocks.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.239.1">
      PEP 673 (
     </span>
     <a href="https://peps.python.org/pep-0673/">
      <span class="url">
       <span class="koboSpan" id="kobo.240.1">
        https://peps.python.org/pep-0673/
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.241.1">
      ), which introduced the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.242.1">
       Self
      </span>
     </code>
     <span class="koboSpan" id="kobo.243.1">
      type to represent the
     </span>
     <a id="_idIndexMarker1059">
     </a>
     <span class="koboSpan" id="kobo.244.1">
      instance type within class bodies and method returns, making type hints involving classes more expressive and accurate.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.245.1">
     The evolution of type hinting in Python has been driven by the desire for greater robustness and scalability of code, leveraging the power of Python’s dynamic nature.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.246.1">
     Although Python’s type hinting popularity seems to continuously increase, it is important to note that, according to the authors of PEP 484 (Guido van Rossum, Jukka Lehtosalo, and Łukasz Langa):
    </span>
   </p>
   <blockquote class="packt_quote">
    <p class="quote">
     <span class="koboSpan" id="kobo.247.1">
      ”Python will remain a dynamically typed language, and the authors have no desire to ever make type hints mandatory, even by convention.”
     </span>
    </p>
   </blockquote>
   <p class="normal">
    <span class="koboSpan" id="kobo.248.1">
     The way in which Python’s type hinting has been introduced, and the philosophical approach of this PEP’s authors and Python’s lead developers, suggest that the choice of using type hinting is, and always will be, up to the developer.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.249.1">
     Let us now see some of the main benefits of type hinting.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-306">
    <span class="koboSpan" id="kobo.250.1">
     Benefits of type hinting
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.251.1">
     Adopting type hinting
    </span>
    <a id="_idIndexMarker1060">
    </a>
    <span class="koboSpan" id="kobo.252.1">
     brings several key benefits, such as enhanced code quality, maintainability, and improved developer efficiency.
    </span>
    <span class="koboSpan" id="kobo.252.2">
     We can summarize them in a list:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.253.1">
       Improved code readability and documentation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.254.1">
      : Type hints are a form of documentation.
     </span>
     <span class="koboSpan" id="kobo.254.2">
      They clarify the type of arguments a function expects, and what type it returns.
     </span>
     <span class="koboSpan" id="kobo.254.3">
      This helps developers understand the code immediately, with no need to read long comments or much code.
     </span>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.255.1">
       Enhanced error detection
      </span>
     </strong>
     <span class="koboSpan" id="kobo.256.1">
      : Static type checkers, such as Mypy, can scan the codebase and flag errors before runtime.
     </span>
     <span class="koboSpan" id="kobo.256.2">
      This means that some bugs can be eliminated before they become a problem.
     </span>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.257.1">
       Better IDE experience and autocompletion
      </span>
     </strong>
     <span class="koboSpan" id="kobo.258.1">
      : Modern IDEs leverage type hints to provide better autocompletion and enhanced refactoring capabilities.
     </span>
     <span class="koboSpan" id="kobo.258.2">
      Moreover, with type hints, the IDE can suggest appropriate methods and attributes for an object.
     </span>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.259.1">
       Improved collaboration and code reviews
      </span>
     </strong>
     <span class="koboSpan" id="kobo.260.1">
      : The documenting quality of type hints makes it easier to understand the code at a glance, which, for example, can be useful when reading changes in a pull request.
     </span>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.261.1">
       Code flexibility and reusability
      </span>
     </strong>
     <span class="koboSpan" id="kobo.262.1">
      : Python’s type hinting includes features such as generics, custom types, and protocols, which help developers write better-structured, more flexible code.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.263.1">
     Another important aspect of Python’s type hinting system is that it can be introduced gradually.
    </span>
    <span class="koboSpan" id="kobo.263.2">
     It is, in fact, quite common to introduce type hints progressively in a codebase, initially limiting efforts to where it matters most.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-307">
    <span class="koboSpan" id="kobo.264.1">
     Type annotations
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.265.1">
     Now that we have a foundational
    </span>
    <a id="_idIndexMarker1061">
    </a>
    <span class="koboSpan" id="kobo.266.1">
     understanding of Python’s dynamic nature and its approach to type hinting, let us start exploring some examples and concepts to see how it is applied in practice.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.267.1">
      While we expose the main types we can use to annotate our code, you might find slight differences with what you are used to, if you have previously used type annotations in your code.
     </span>
     <span class="koboSpan" id="kobo.267.2">
      This is likely because type hinting in Python is currently still evolving, so it is different according to which Python version you are using.
     </span>
     <span class="koboSpan" id="kobo.267.3">
      In this chapter, we will stick to the rules for Python 3.12.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.268.1">
     Let us start with a basic example.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-308">
    <span class="koboSpan" id="kobo.269.1">
     Annotating functions
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.270.1">
     In Python, we
    </span>
    <a id="_idIndexMarker1062">
    </a>
    <span class="koboSpan" id="kobo.271.1">
     can annotate both function parameters and their return values.
    </span>
    <span class="koboSpan" id="kobo.271.2">
     Let us start with a basic
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.272.1">
      greeter
     </span>
    </code>
    <span class="koboSpan" id="kobo.273.1">
     function:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.274.1"># annotations/basic.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.275.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.276.1">greeter</span></span><span class="koboSpan" id="kobo.277.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.278.1">name</span></span><span class="koboSpan" id="kobo.279.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.280.1">return</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.281.1">f"Hello, </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.282.1">{name}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.283.1">!"</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.284.1">
     This is a simple Python function that takes a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.285.1">
      name
     </span>
    </code>
    <span class="koboSpan" id="kobo.286.1">
     and returns a greeting.
    </span>
    <span class="koboSpan" id="kobo.286.2">
     We can now annotate the function to specify that we expect
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.287.1">
      name
     </span>
    </code>
    <span class="koboSpan" id="kobo.288.1">
     to be a string and that the greeting returned will also be a string.
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.289.1"># annotations/basic.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.290.1">def</span></span> <span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.291.1">greeter_annotated</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.292.1">(name: </span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.293.1">str</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.294.1">) -&gt; </span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.295.1">str</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.296.1">:</span></strong></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.297.1">return</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.298.1">f"Hello, </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.299.1">{name}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.300.1">!"</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.301.1">
     As you can see from the highlighted section in this code, the syntax to annotate a function is simple.
    </span>
    <span class="koboSpan" id="kobo.301.2">
     We specify the type using a colon after the parameter name.
    </span>
    <span class="koboSpan" id="kobo.301.3">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.302.1">
      return
     </span>
    </code>
    <span class="koboSpan" id="kobo.303.1">
     value is annotated with an arrow (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.304.1">
      -&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.305.1">
     ) followed by the type of the object returned.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.306.1">
     Let us now add another parameter,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.307.1">
      age
     </span>
    </code>
    <span class="koboSpan" id="kobo.308.1">
     , which we expect to be an integer.
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.309.1"># annotations/basic.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.310.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.311.1">greeter_annotated_age</span></span><span class="koboSpan" id="kobo.312.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.313.1">name: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.314.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.315.1">, age: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.316.1">int</span></span><span class="koboSpan" id="kobo.317.1">) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.318.1">str</span></span><span class="koboSpan" id="kobo.319.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.320.1">return</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.321.1">f"Hello, </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.322.1">{name}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.323.1">! </span><span class="koboSpan" id="kobo.323.2">You are </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.324.1">{age}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.325.1"> years old."</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.326.1">
     As you probably expected, we simply did the same for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.327.1">
      age
     </span>
    </code>
    <span class="koboSpan" id="kobo.328.1">
     parameter, only, this time, we specified
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.329.1">
      int
     </span>
    </code>
    <span class="koboSpan" id="kobo.330.1">
     , instead of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.331.1">
      str
     </span>
    </code>
    <span class="koboSpan" id="kobo.332.1">
     .
    </span>
   </p>
   <div class="packt_tip">
    <p class="normal">
     <span class="koboSpan" id="kobo.333.1">
      If you use a relatively modern IDE, try out this code.
     </span>
     <span class="koboSpan" id="kobo.333.2">
      If you type either
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.334.1">
       name
      </span>
     </code>
     <span class="koboSpan" id="kobo.335.1">
      or
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.336.1">
       age
      </span>
     </code>
     <span class="koboSpan" id="kobo.337.1">
      and then a dot (
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.338.1">
       .
      </span>
     </code>
     <span class="koboSpan" id="kobo.339.1">
      ), the editor should suggest only the methods and attributes that are pertinent to the type of object you are using.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.340.1">
     This was a basic example designed to show you the syntax of type annotations.
    </span>
    <span class="koboSpan" id="kobo.340.2">
     Please disregard the artificial names, such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.341.1">
      greeter_annotated()
     </span>
    </code>
    <span class="koboSpan" id="kobo.342.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.343.1">
      greeter_annotated_age()
     </span>
    </code>
    <span class="koboSpan" id="kobo.344.1">
     ; they are not good names, but they should help you spot the differences more
    </span>
    <a id="_idIndexMarker1063">
    </a>
    <span class="koboSpan" id="kobo.345.1">
     quickly.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.346.1">
     We are now going to expand on this, to show you the real capabilities of Python type hinting.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-309">
    <span class="koboSpan" id="kobo.347.1">
     The Any type
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.348.1">
     This is a special kind of
    </span>
    <a id="_idIndexMarker1064">
    </a>
    <span class="koboSpan" id="kobo.349.1">
     type.
    </span>
    <span class="koboSpan" id="kobo.349.2">
     Any function without a return type, or parameter type, will implicitly default to using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.350.1">
      Any
     </span>
    </code>
    <span class="koboSpan" id="kobo.351.1">
     .
    </span>
    <span class="koboSpan" id="kobo.351.2">
     Therefore, the following function declarations are equivalent.
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.352.1"># annotations/any.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.353.1">from</span></span><span class="koboSpan" id="kobo.354.1"> typing </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.355.1">import</span></span> <span class="hljs-type"><span class="koboSpan" id="kobo.356.1">Any</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.357.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.358.1">square</span></span><span class="koboSpan" id="kobo.359.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.360.1">n</span></span><span class="koboSpan" id="kobo.361.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.362.1">return</span></span><span class="koboSpan" id="kobo.363.1"> n**</span><span class="hljs-number"><span class="koboSpan" id="kobo.364.1">2</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.365.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.366.1">square_annotated</span></span><span class="koboSpan" id="kobo.367.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.368.1">n: </span></span><span class="hljs-type"><span class="koboSpan" id="kobo.369.1">Any</span></span><span class="koboSpan" id="kobo.370.1">) -&gt; </span><span class="hljs-type"><span class="koboSpan" id="kobo.371.1">Any</span></span><span class="koboSpan" id="kobo.372.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.373.1">return</span></span><span class="koboSpan" id="kobo.374.1"> n**</span><span class="hljs-number"><span class="koboSpan" id="kobo.375.1">2</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.376.1">
     The above declarations are completely equivalent.
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.377.1">
      Any
     </span>
    </code>
    <span class="koboSpan" id="kobo.378.1">
     can be useful in certain circumstances, such as when annotating data containers, function decorators, or when a function is designed to handle inputs of multiple types.
    </span>
    <span class="koboSpan" id="kobo.378.2">
     A simple example could be:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.379.1"># annotations/any.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.380.1">from</span></span><span class="koboSpan" id="kobo.381.1"> typing </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.382.1">import</span></span> <span class="hljs-type"><span class="koboSpan" id="kobo.383.1">Any</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.384.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.385.1">reverse</span></span><span class="koboSpan" id="kobo.386.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.387.1">items: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.388.1">list</span></span><span class="koboSpan" id="kobo.389.1">) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.390.1">list</span></span><span class="koboSpan" id="kobo.391.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.392.1">return</span></span> <span class="hljs-built_in"><span class="koboSpan" id="kobo.393.1">list</span></span><span class="koboSpan" id="kobo.394.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.395.1">reversed</span></span><span class="koboSpan" id="kobo.396.1">(items))
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.397.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.398.1">reverse_any</span></span><span class="koboSpan" id="kobo.399.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.400.1">items: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.401.1">list</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.402.1">[</span></span><span class="hljs-type"><span class="koboSpan" id="kobo.403.1">Any</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.404.1">]</span></span><span class="koboSpan" id="kobo.405.1">) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.406.1">list</span></span><span class="koboSpan" id="kobo.407.1">[</span><span class="hljs-type"><span class="koboSpan" id="kobo.408.1">Any</span></span><span class="koboSpan" id="kobo.409.1">]:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.410.1">return</span></span> <span class="hljs-built_in"><span class="koboSpan" id="kobo.411.1">list</span></span><span class="koboSpan" id="kobo.412.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.413.1">reversed</span></span><span class="koboSpan" id="kobo.414.1">(items))
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.415.1">
     In this case, the two
    </span>
    <a id="_idIndexMarker1065">
    </a>
    <span class="koboSpan" id="kobo.416.1">
     definitions are again completely equivalent.
    </span>
    <span class="koboSpan" id="kobo.416.2">
     The only difference is that in the second one, by using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.417.1">
      Any
     </span>
    </code>
    <span class="koboSpan" id="kobo.418.1">
     , we explicitly state the list
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.419.1">
      items
     </span>
    </code>
    <span class="koboSpan" id="kobo.420.1">
     is expected to contain
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.421.1">
      any
     </span>
    </em>
    <span class="koboSpan" id="kobo.422.1">
     kind of object.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-310">
    <span class="koboSpan" id="kobo.423.1">
     Type aliases
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.424.1">
     We can use almost any Python type in type hints.
    </span>
    <span class="koboSpan" id="kobo.424.2">
     Moreover, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.425.1">
      typing
     </span>
    </code>
    <span class="koboSpan" id="kobo.426.1">
     module introduced several constructs that we can leverage to expand on them.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.427.1">
     One such construct is
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.428.1">
      type aliases
     </span>
    </strong>
    <span class="koboSpan" id="kobo.429.1">
     , which are
    </span>
    <a id="_idIndexMarker1066">
    </a>
    <span class="koboSpan" id="kobo.430.1">
     defined using a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.431.1">
      type
     </span>
    </code>
    <span class="koboSpan" id="kobo.432.1">
     statement.
    </span>
    <span class="koboSpan" id="kobo.432.2">
     The result is an instance of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.433.1">
      TypeAliasType
     </span>
    </code>
    <span class="koboSpan" id="kobo.434.1">
     .
    </span>
    <span class="koboSpan" id="kobo.434.2">
     They are a convenient way to simplify how the code reads.
    </span>
    <span class="koboSpan" id="kobo.434.3">
     Let us see an example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.435.1"># annotations/type.aliases.py</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.436.1">type</span></span><span class="koboSpan" id="kobo.437.1"> DatabasePort = </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.438.1">int</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.439.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.440.1">connect_to_database</span></span><span class="koboSpan" id="kobo.441.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.442.1">host: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.443.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.444.1">, port: DatabasePort</span></span><span class="koboSpan" id="kobo.445.1">):
    </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.446.1">print</span></span><span class="koboSpan" id="kobo.447.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.448.1">f"Connecting to </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.449.1">{host}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.450.1"> on port </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.451.1">{port}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.452.1">..."</span></span><span class="koboSpan" id="kobo.453.1">)
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.454.1">
     As we can see in the above example, we can define our own type aliases.
    </span>
    <span class="koboSpan" id="kobo.454.2">
     From the perspective of a static type checker,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.455.1">
      DatabasePort
     </span>
    </code>
    <span class="koboSpan" id="kobo.456.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.457.1">
      int
     </span>
    </code>
    <span class="koboSpan" id="kobo.458.1">
     will be treated equivalently.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.459.1">
     Although it might not be evident from such a dummy example, using a type alias enhances readability and simplifies refactoring.
    </span>
    <span class="koboSpan" id="kobo.459.2">
     Imagine several functions expecting
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.460.1">
      DatabasePort
     </span>
    </code>
    <span class="koboSpan" id="kobo.461.1">
     : if we wanted to refactor the codebase to represent a port using a string, we would just need to change the line in which we define
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.462.1">
      DatabasePort
     </span>
    </code>
    <span class="koboSpan" id="kobo.463.1">
     .
    </span>
    <span class="koboSpan" id="kobo.463.2">
     Had we simply used
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.464.1">
      int
     </span>
    </code>
    <span class="koboSpan" id="kobo.465.1">
     instead, we would need to refactor all function definitions.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-311">
    <span class="koboSpan" id="kobo.466.1">
     Special forms
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.467.1">
     Special forms
    </span>
    <a id="_idIndexMarker1067">
    </a>
    <span class="koboSpan" id="kobo.468.1">
     can be used as types in annotations.
    </span>
    <span class="koboSpan" id="kobo.468.2">
     They all support subscription using [], but each has a unique syntax.
    </span>
    <span class="koboSpan" id="kobo.468.3">
     Here, we are going to see
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.469.1">
      Optional
     </span>
    </code>
    <span class="koboSpan" id="kobo.470.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.471.1">
      Union
     </span>
    </code>
    <span class="koboSpan" id="kobo.472.1">
     ; for the complete list of all
    </span>
    <a id="_idIndexMarker1068">
    </a>
    <span class="koboSpan" id="kobo.473.1">
     special forms, please refer to the official documentation at
    </span>
    <a href="https://docs.python.org/3/library/typing.html#special-forms">
     <span class="url">
      <span class="koboSpan" id="kobo.474.1">
       https://docs.python.org/3/library/typing.html#special-forms
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.475.1">
     .
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-312">
    <span class="koboSpan" id="kobo.476.1">
     Optional
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.477.1">
     Python allows optional
    </span>
    <a id="_idIndexMarker1069">
    </a>
    <span class="koboSpan" id="kobo.478.1">
     arguments when a function parameter has a default.
    </span>
    <span class="koboSpan" id="kobo.478.2">
     Here, we have a distinction to make.
    </span>
    <span class="koboSpan" id="kobo.478.3">
     Let us bring back the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.479.1">
      greeter
     </span>
    </code>
    <span class="koboSpan" id="kobo.480.1">
     function, and add a default value to it:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.481.1"># annotations/optional.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.482.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.483.1">greeter</span></span><span class="koboSpan" id="kobo.484.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.485.1">name: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.486.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.487.1"> = </span></span><span class="hljs-string"><span class="koboSpan" id="kobo.488.1">"stranger"</span></span><span class="koboSpan" id="kobo.489.1">) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.490.1">str</span></span><span class="koboSpan" id="kobo.491.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.492.1">return</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.493.1">f"Hello, </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.494.1">{name}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.495.1">!"</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.496.1">
     This time, we have added a default value to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.497.1">
      greeter()
     </span>
    </code>
    <span class="koboSpan" id="kobo.498.1">
     function.
    </span>
    <span class="koboSpan" id="kobo.498.2">
     That means that if we were to call it with no arguments, it would return the string
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.499.1">
      "Hello, stranger!"
     </span>
    </code>
    <span class="koboSpan" id="kobo.500.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.501.1">
     This definition assumes
    </span>
    <a id="_idIndexMarker1070">
    </a>
    <span class="koboSpan" id="kobo.502.1">
     that when we call
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.503.1">
      greeter()
     </span>
    </code>
    <span class="koboSpan" id="kobo.504.1">
     , if we pass
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.505.1">
      name
     </span>
    </code>
    <span class="koboSpan" id="kobo.506.1">
     , it will be a string.
    </span>
    <span class="koboSpan" id="kobo.506.2">
     Sometimes, though, this is not what we want, and we require an argument to be
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.507.1">
      None
     </span>
    </code>
    <span class="koboSpan" id="kobo.508.1">
     , if not provided when the function is called.
    </span>
    <span class="koboSpan" id="kobo.508.2">
     For situations like this, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.509.1">
      typing
     </span>
    </code>
    <span class="koboSpan" id="kobo.510.1">
     module provides us with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.511.1">
      Optional
     </span>
    </code>
    <span class="koboSpan" id="kobo.512.1">
     special form:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.513.1"># annotations/optional.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.514.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.515.1">greeter_optional</span></span><span class="koboSpan" id="kobo.516.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.517.1">name: </span></span><span class="hljs-type"><span class="koboSpan" id="kobo.518.1">Optional</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.519.1">[</span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.520.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.521.1">] = </span></span><span class="hljs-literal"><span class="koboSpan" id="kobo.522.1">None</span></span><span class="koboSpan" id="kobo.523.1">) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.524.1">str</span></span><span class="koboSpan" id="kobo.525.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.526.1">if</span></span><span class="koboSpan" id="kobo.527.1"> name </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.528.1">is</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.529.1">not</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.530.1">None</span></span><span class="koboSpan" id="kobo.531.1">:
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.532.1">return</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.533.1">f"Hello, </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.534.1">{name}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.535.1">!"</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.536.1">return</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.537.1">"No-one to greet!"</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.538.1">
     In the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.539.1">
      greeter_optional()
     </span>
    </code>
    <span class="koboSpan" id="kobo.540.1">
     function, we don’t want to return a greeting when we don’t pass a name.
    </span>
    <span class="koboSpan" id="kobo.540.2">
     Because
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.541.1">
      None
     </span>
    </code>
    <span class="koboSpan" id="kobo.542.1">
     is not a string, we mark
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.543.1">
      name
     </span>
    </code>
    <span class="koboSpan" id="kobo.544.1">
     as optional and set its default value to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.545.1">
      None
     </span>
    </code>
    <span class="koboSpan" id="kobo.546.1">
     .
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-313">
    <span class="koboSpan" id="kobo.547.1">
     Union
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.548.1">
     Sometimes, an
    </span>
    <a id="_idIndexMarker1071">
    </a>
    <span class="koboSpan" id="kobo.549.1">
     argument can be of different types.
    </span>
    <span class="koboSpan" id="kobo.549.2">
     For example, when connecting to a database, the port can be specified as either an integer or a string.
    </span>
    <span class="koboSpan" id="kobo.549.3">
     In these cases, it is useful to have the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.550.1">
      Union
     </span>
    </code>
    <span class="koboSpan" id="kobo.551.1">
     special form:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.552.1"># annotations/union.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.553.1">from</span></span><span class="koboSpan" id="kobo.554.1"> typing </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.555.1">import</span></span> <span class="hljs-type"><span class="koboSpan" id="kobo.556.1">Union</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.557.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.558.1">connect_to_database</span></span><span class="koboSpan" id="kobo.559.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.560.1">host: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.561.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.562.1">, port: </span></span><span class="hljs-type"><span class="koboSpan" id="kobo.563.1">Union</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.564.1">[</span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.565.1">int</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.566.1">, </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.567.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.568.1">]</span></span><span class="koboSpan" id="kobo.569.1">):
    </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.570.1">print</span></span><span class="koboSpan" id="kobo.571.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.572.1">f"Connecting to </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.573.1">{host}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.574.1"> on port </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.575.1">{port}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.576.1">..."</span></span><span class="koboSpan" id="kobo.577.1">)
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.578.1">
     In the above example, for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.579.1">
      port
     </span>
    </code>
    <span class="koboSpan" id="kobo.580.1">
     parameter, we want to accept both
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.581.1">
      int
     </span>
    </code>
    <span class="koboSpan" id="kobo.582.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.583.1">
      str
     </span>
    </code>
    <span class="koboSpan" id="kobo.584.1">
     , and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.585.1">
      Union
     </span>
    </code>
    <span class="koboSpan" id="kobo.586.1">
     special form allows us to do just that.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.587.1">
     Since Python 3.10, we don’t need to import
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.588.1">
      Union
     </span>
    </code>
    <span class="koboSpan" id="kobo.589.1">
     , and instead can use a pipe (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.590.1">
      |
     </span>
    </code>
    <span class="koboSpan" id="kobo.591.1">
     ) to specify a union type.
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.592.1"># annotations/union.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.593.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.594.1">connect_to_db</span></span><span class="koboSpan" id="kobo.595.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.596.1">host: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.597.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.598.1">, port: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.599.1">int</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.600.1"> | </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.601.1">str</span></span><span class="koboSpan" id="kobo.602.1">):
    </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.603.1">print</span></span><span class="koboSpan" id="kobo.604.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.605.1">f"Connecting to </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.606.1">{host}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.607.1"> on port </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.608.1">{port}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.609.1">..."</span></span><span class="koboSpan" id="kobo.610.1">)
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.611.1">
     This looks leaner.
    </span>
   </p>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.612.1">
      Union
     </span>
    </code>
    <span class="koboSpan" id="kobo.613.1">
     , or its pipe
    </span>
    <a id="_idIndexMarker1072">
    </a>
    <span class="koboSpan" id="kobo.614.1">
     equivalent, incidentally, enables us to avoid having to import
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.615.1">
      Optional
     </span>
    </code>
    <span class="koboSpan" id="kobo.616.1">
     , since
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.617.1">
      Optional[str]
     </span>
    </code>
    <span class="koboSpan" id="kobo.618.1">
     , for example, can be written as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.619.1">
      Union[str, None]
     </span>
    </code>
    <span class="koboSpan" id="kobo.620.1">
     , or simply
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.621.1">
      str | None
     </span>
    </code>
    <span class="koboSpan" id="kobo.622.1">
     .
    </span>
    <span class="koboSpan" id="kobo.622.2">
     Let us see the latter form in an example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.623.1"># annotations/optional.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.624.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.625.1">another_greeter</span></span><span class="koboSpan" id="kobo.626.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.627.1">name: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.628.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.629.1"> | </span></span><span class="hljs-literal"><span class="koboSpan" id="kobo.630.1">None</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.631.1"> = </span></span><span class="hljs-literal"><span class="koboSpan" id="kobo.632.1">None</span></span><span class="koboSpan" id="kobo.633.1">) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.634.1">str</span></span><span class="koboSpan" id="kobo.635.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.636.1">if</span></span><span class="koboSpan" id="kobo.637.1"> name </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.638.1">is</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.639.1">not</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.640.1">None</span></span><span class="koboSpan" id="kobo.641.1">:
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.642.1">return</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.643.1">f"Hello, </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.644.1">{name}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.645.1">!"</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.646.1">return</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.647.1">"No-one to greet!"</span></span>
</code></pre>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.648.1">
      Have you noticed that some of the functions defined above have type annotations on their parameters, but nothing for the return value?
     </span>
     <span class="koboSpan" id="kobo.648.2">
      This is to show you that annotations are completely optional.
     </span>
     <span class="koboSpan" id="kobo.648.3">
      We could even annotate only some of the parameters a function takes if we wanted to.
     </span>
    </p>
   </div>
   <h2 class="heading-2" id="_idParaDest-314">
    <span class="koboSpan" id="kobo.649.1">
     Generics
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.650.1">
     Let us continue our
    </span>
    <a id="_idIndexMarker1073">
    </a>
    <span class="koboSpan" id="kobo.651.1">
     exploration of what is possible to achieve using type hints, by exploring the concept of
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.652.1">
      generics
     </span>
    </strong>
    <span class="koboSpan" id="kobo.653.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.654.1">
     Say that we wanted to write a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.655.1">
      last()
     </span>
    </code>
    <span class="koboSpan" id="kobo.656.1">
     function that takes a list of items, of any kind, and returns the last one, if any, or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.657.1">
      None
     </span>
    </code>
    <span class="koboSpan" id="kobo.658.1">
     .
    </span>
    <span class="koboSpan" id="kobo.658.2">
     We know that all the items in the list are of the same type, but we don’t know what type it is.
    </span>
    <span class="koboSpan" id="kobo.658.3">
     How can we annotate the function properly?
    </span>
    <span class="koboSpan" id="kobo.658.4">
     The concept of generics helps us do that.
    </span>
    <span class="koboSpan" id="kobo.658.5">
     The syntax is only a tad more extravagant than what we have seen till now, but it is not that complicated.
    </span>
    <span class="koboSpan" id="kobo.658.6">
     Let us write that function:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.659.1"># annotations/generics.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.660.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.661.1">last</span></span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.662.1">[T]</span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.663.1">list</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.664.1">[T]</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.665.1">T</span></strong></span><span class="koboSpan" id="kobo.666.1">(items: ) -&gt;  | </span><span class="hljs-literal"><span class="koboSpan" id="kobo.667.1">None</span></span><span class="koboSpan" id="kobo.668.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.669.1">return</span></span><span class="koboSpan" id="kobo.670.1"> items[-</span><span class="hljs-number"><span class="koboSpan" id="kobo.671.1">1</span></span><span class="koboSpan" id="kobo.672.1">] </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.673.1">if</span></span><span class="koboSpan" id="kobo.674.1"> items </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.675.1">else</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.676.1">None</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.677.1">
     Pay particular attention to the highlighted sections in the code above.
    </span>
    <span class="koboSpan" id="kobo.677.2">
     First, we need to add a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.678.1">
      [T]
     </span>
    </code>
    <span class="koboSpan" id="kobo.679.1">
     as a suffix to the function’s name.
    </span>
    <span class="koboSpan" id="kobo.679.2">
     Then, we can specify that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.680.1">
      items
     </span>
    </code>
    <span class="koboSpan" id="kobo.681.1">
     is a list of objects whose type is
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.682.1">
      T
     </span>
    </code>
    <span class="koboSpan" id="kobo.683.1">
     , whatever that might be.
    </span>
    <span class="koboSpan" id="kobo.683.2">
     Finally, we can also use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.684.1">
      T
     </span>
    </code>
    <span class="koboSpan" id="kobo.685.1">
     for the return value, although, in this case, we have specified the return type to be the union of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.686.1">
      T
     </span>
    </code>
    <span class="koboSpan" id="kobo.687.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.688.1">
      None
     </span>
    </code>
    <span class="koboSpan" id="kobo.689.1">
     , to cater for the edge case in which
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.690.1">
      items
     </span>
    </code>
    <span class="koboSpan" id="kobo.691.1">
     would be empty.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.692.1">
     Even though the function signature is using the generic syntax, you would call it like this:
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.693.1">
      last([1, 2, 3])
     </span>
    </code>
    <span class="koboSpan" id="kobo.694.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.695.1">
     Syntactic support for generics is new to Python 3.12.
    </span>
    <span class="koboSpan" id="kobo.695.2">
     Before that, to achieve the same result, one would have resorted to using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.696.1">
      TypeVar
     </span>
    </code>
    <span class="koboSpan" id="kobo.697.1">
     factory, like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.698.1"># annotations/generics.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.699.1">from</span></span><span class="koboSpan" id="kobo.700.1"> typing </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.701.1">import</span></span><span class="koboSpan" id="kobo.702.1"> TypeVar
U = TypeVar(</span><span class="hljs-string"><span class="koboSpan" id="kobo.703.1">"U"</span></span><span class="koboSpan" id="kobo.704.1">)
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.705.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.706.1">first</span></span><span class="koboSpan" id="kobo.707.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.708.1">items: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.709.1">list</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.710.1">[U]</span></span><span class="koboSpan" id="kobo.711.1">) -&gt; U | </span><span class="hljs-literal"><span class="koboSpan" id="kobo.712.1">None</span></span><span class="koboSpan" id="kobo.713.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.714.1">return</span></span><span class="koboSpan" id="kobo.715.1"> items[</span><span class="hljs-number"><span class="koboSpan" id="kobo.716.1">0</span></span><span class="koboSpan" id="kobo.717.1">] </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.718.1">if</span></span><span class="koboSpan" id="kobo.719.1"> items </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.720.1">else</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.721.1">None</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.722.1">
     Notice that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.723.1">
      first()
     </span>
    </code>
    <span class="koboSpan" id="kobo.724.1">
     is not
    </span>
    <a id="_idIndexMarker1074">
    </a>
    <span class="koboSpan" id="kobo.725.1">
     defined as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.726.1">
      first[U](…)
     </span>
    </code>
    <span class="koboSpan" id="kobo.727.1">
     in this case.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.728.1">
     Thanks to the enhancements in the syntax of Python 3.12, the use of generics is now simpler.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-315">
    <span class="koboSpan" id="kobo.729.1">
     Annotating variables
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.730.1">
     Let us now take a little detour from
    </span>
    <a id="_idIndexMarker1075">
    </a>
    <span class="koboSpan" id="kobo.731.1">
     functions and discuss variable annotations.
    </span>
    <span class="koboSpan" id="kobo.731.2">
     We can quickly show you an example that will not require much of an explanation:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.732.1"># annotations/variables.py</span></span><span class="koboSpan" id="kobo.733.1">
x: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.734.1">int</span></span><span class="koboSpan" id="kobo.735.1"> = </span><span class="hljs-number"><span class="koboSpan" id="kobo.736.1">10</span></span><span class="koboSpan" id="kobo.737.1">
x: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.738.1">float</span></span><span class="koboSpan" id="kobo.739.1"> = </span><span class="hljs-number"><span class="koboSpan" id="kobo.740.1">3.14</span></span><span class="koboSpan" id="kobo.741.1">
x: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.742.1">bool</span></span><span class="koboSpan" id="kobo.743.1"> = </span><span class="hljs-literal"><span class="koboSpan" id="kobo.744.1">True</span></span><span class="koboSpan" id="kobo.745.1">
x: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.746.1">str</span></span><span class="koboSpan" id="kobo.747.1"> = </span><span class="hljs-string"><span class="koboSpan" id="kobo.748.1">"Hello!"</span></span><span class="koboSpan" id="kobo.749.1">
x: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.750.1">bytes</span></span><span class="koboSpan" id="kobo.751.1"> = </span><span class="hljs-string"><span class="koboSpan" id="kobo.752.1">b"Hello!"</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.753.1"># Python 3.9+</span></span><span class="koboSpan" id="kobo.754.1">
x: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.755.1">list</span></span><span class="koboSpan" id="kobo.756.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.757.1">int</span></span><span class="koboSpan" id="kobo.758.1">] = [</span><span class="hljs-number"><span class="koboSpan" id="kobo.759.1">7</span></span><span class="koboSpan" id="kobo.760.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.761.1">14</span></span><span class="koboSpan" id="kobo.762.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.763.1">21</span></span><span class="koboSpan" id="kobo.764.1">]
x: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.765.1">set</span></span><span class="koboSpan" id="kobo.766.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.767.1">int</span></span><span class="koboSpan" id="kobo.768.1">] = {</span><span class="hljs-number"><span class="koboSpan" id="kobo.769.1">1</span></span><span class="koboSpan" id="kobo.770.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.771.1">2</span></span><span class="koboSpan" id="kobo.772.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.773.1">3</span></span><span class="koboSpan" id="kobo.774.1">}
x: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.775.1">dict</span></span><span class="koboSpan" id="kobo.776.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.777.1">str</span></span><span class="koboSpan" id="kobo.778.1">, </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.779.1">float</span></span><span class="koboSpan" id="kobo.780.1">] = {</span><span class="hljs-string"><span class="koboSpan" id="kobo.781.1">"planck"</span></span><span class="koboSpan" id="kobo.782.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.783.1">6.62607015e-34</span></span><span class="koboSpan" id="kobo.784.1">}
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.785.1"># Python 3.8 and earlier</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.786.1">from</span></span><span class="koboSpan" id="kobo.787.1"> typing </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.788.1">import</span></span> <span class="hljs-type"><span class="koboSpan" id="kobo.789.1">List</span></span><span class="koboSpan" id="kobo.790.1">, </span><span class="hljs-type"><span class="koboSpan" id="kobo.791.1">Set</span></span><span class="koboSpan" id="kobo.792.1">, </span><span class="hljs-type"><span class="koboSpan" id="kobo.793.1">Dict</span></span><span class="koboSpan" id="kobo.794.1">
x: </span><span class="hljs-type"><span class="koboSpan" id="kobo.795.1">List</span></span><span class="koboSpan" id="kobo.796.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.797.1">int</span></span><span class="koboSpan" id="kobo.798.1">] = [</span><span class="hljs-number"><span class="koboSpan" id="kobo.799.1">7</span></span><span class="koboSpan" id="kobo.800.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.801.1">14</span></span><span class="koboSpan" id="kobo.802.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.803.1">21</span></span><span class="koboSpan" id="kobo.804.1">]
x: </span><span class="hljs-type"><span class="koboSpan" id="kobo.805.1">Set</span></span><span class="koboSpan" id="kobo.806.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.807.1">int</span></span><span class="koboSpan" id="kobo.808.1">] = {</span><span class="hljs-number"><span class="koboSpan" id="kobo.809.1">1</span></span><span class="koboSpan" id="kobo.810.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.811.1">2</span></span><span class="koboSpan" id="kobo.812.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.813.1">3</span></span><span class="koboSpan" id="kobo.814.1">}
x: </span><span class="hljs-type"><span class="koboSpan" id="kobo.815.1">Dict</span></span><span class="koboSpan" id="kobo.816.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.817.1">str</span></span><span class="koboSpan" id="kobo.818.1">, </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.819.1">float</span></span><span class="koboSpan" id="kobo.820.1">] = {</span><span class="hljs-string"><span class="koboSpan" id="kobo.821.1">"planck"</span></span><span class="koboSpan" id="kobo.822.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.823.1">6.62607015e-34</span></span><span class="koboSpan" id="kobo.824.1">}
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.825.1"># Python 3.10+</span></span><span class="koboSpan" id="kobo.826.1">
x: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.827.1">list</span></span><span class="koboSpan" id="kobo.828.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.829.1">int</span></span><span class="koboSpan" id="kobo.830.1"> | </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.831.1">str</span></span><span class="koboSpan" id="kobo.832.1">] = [</span><span class="hljs-number"><span class="koboSpan" id="kobo.833.1">0</span></span><span class="koboSpan" id="kobo.834.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.835.1">1</span></span><span class="koboSpan" id="kobo.836.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.837.1">1</span></span><span class="koboSpan" id="kobo.838.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.839.1">2</span></span><span class="koboSpan" id="kobo.840.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.841.1">"fibonacci"</span></span><span class="koboSpan" id="kobo.842.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.843.1">"rules"</span></span><span class="koboSpan" id="kobo.844.1">]
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.845.1"># Python 3.9 and earlier</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.846.1">from</span></span><span class="koboSpan" id="kobo.847.1"> typing </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.848.1">import</span></span> <span class="hljs-type"><span class="koboSpan" id="kobo.849.1">Union</span></span><span class="koboSpan" id="kobo.850.1">
x: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.851.1">list</span></span><span class="koboSpan" id="kobo.852.1">[</span><span class="hljs-type"><span class="koboSpan" id="kobo.853.1">Union</span></span><span class="koboSpan" id="kobo.854.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.855.1">int</span></span><span class="koboSpan" id="kobo.856.1">, </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.857.1">str</span></span><span class="koboSpan" id="kobo.858.1">]] = [</span><span class="hljs-number"><span class="koboSpan" id="kobo.859.1">0</span></span><span class="koboSpan" id="kobo.860.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.861.1">1</span></span><span class="koboSpan" id="kobo.862.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.863.1">1</span></span><span class="koboSpan" id="kobo.864.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.865.1">2</span></span><span class="koboSpan" id="kobo.866.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.867.1">"fibonacci"</span></span><span class="koboSpan" id="kobo.868.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.869.1">"rules"</span></span><span class="koboSpan" id="kobo.870.1">]
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.871.1">
     In the code above, we have
    </span>
    <a id="_idIndexMarker1076">
    </a>
    <span class="koboSpan" id="kobo.872.1">
     declared
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.873.1">
      x
     </span>
    </code>
    <span class="koboSpan" id="kobo.874.1">
     to be many things, as an example.
    </span>
    <span class="koboSpan" id="kobo.874.2">
     As you can see, the syntax is simple: we declare the name of the variable, its type (after the colon), and its value (after the equal sign).
    </span>
    <span class="koboSpan" id="kobo.874.3">
     We also have provided you with a few examples of how one had to annotate variables in earlier versions of Python.
    </span>
    <span class="koboSpan" id="kobo.874.4">
     Quite conveniently, in Python 3.12, we can use built-in types directly without having to import much from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.875.1">
      typing
     </span>
    </code>
    <span class="koboSpan" id="kobo.876.1">
     module.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-316">
    <span class="koboSpan" id="kobo.877.1">
     Annotating containers
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.878.1">
     The typing system assumes that all
    </span>
    <a id="_idIndexMarker1077">
    </a>
    <span class="koboSpan" id="kobo.879.1">
     elements in Python containers will be of the same type.
    </span>
    <span class="koboSpan" id="kobo.879.2">
     This is true for most containers.
    </span>
    <span class="koboSpan" id="kobo.879.3">
     For example, consider the following code:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.880.1"># annotations/containers.py</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.881.1"># The type checker assumes all elements of the list are integers</span></span><span class="koboSpan" id="kobo.882.1">
a: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.883.1">list</span></span><span class="koboSpan" id="kobo.884.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.885.1">int</span></span><span class="koboSpan" id="kobo.886.1">] = [</span><span class="hljs-number"><span class="koboSpan" id="kobo.887.1">1</span></span><span class="koboSpan" id="kobo.888.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.889.1">2</span></span><span class="koboSpan" id="kobo.890.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.891.1">3</span></span><span class="koboSpan" id="kobo.892.1">]
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.893.1"># We cannot specify two types for the elements of the list</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.894.1"># it only accepts a single type argument</span></span><span class="koboSpan" id="kobo.895.1">
b: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.896.1">list</span></span><span class="koboSpan" id="kobo.897.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.898.1">int</span></span><span class="koboSpan" id="kobo.899.1">, </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.900.1">str</span></span><span class="koboSpan" id="kobo.901.1">] = [</span><span class="hljs-number"><span class="koboSpan" id="kobo.902.1">1</span></span><span class="koboSpan" id="kobo.903.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.904.1">2</span></span><span class="koboSpan" id="kobo.905.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.906.1">3</span></span><span class="koboSpan" id="kobo.907.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.908.1">"four"</span></span><span class="koboSpan" id="kobo.909.1">]  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.910.1"># Wrong!</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.911.1"># The type checker will infer that all keys in `c` are strings</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.912.1"># and all values are integers or strings</span></span><span class="koboSpan" id="kobo.913.1">
c: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.914.1">dict</span></span><span class="koboSpan" id="kobo.915.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.916.1">str</span></span><span class="koboSpan" id="kobo.917.1">, </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.918.1">int</span></span><span class="koboSpan" id="kobo.919.1"> | </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.920.1">str</span></span><span class="koboSpan" id="kobo.921.1">] = {</span><span class="hljs-string"><span class="koboSpan" id="kobo.922.1">"one"</span></span><span class="koboSpan" id="kobo.923.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.924.1">1</span></span><span class="koboSpan" id="kobo.925.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.926.1">"two"</span></span><span class="koboSpan" id="kobo.927.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.928.1">"2"</span></span><span class="koboSpan" id="kobo.929.1">}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.930.1">
     As you can see in the code above,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.931.1">
      list
     </span>
    </code>
    <span class="koboSpan" id="kobo.932.1">
     expects one type argument.
    </span>
    <span class="koboSpan" id="kobo.932.2">
     In this context, a union, like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.933.1">
      int | str
     </span>
    </code>
    <span class="koboSpan" id="kobo.934.1">
     in the annotation of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.935.1">
      c
     </span>
    </code>
    <span class="koboSpan" id="kobo.936.1">
     , still counts as one type.
    </span>
    <span class="koboSpan" id="kobo.936.2">
     However, the type checker will complain about
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.937.1">
      b
     </span>
    </code>
    <span class="koboSpan" id="kobo.938.1">
     .
    </span>
    <span class="koboSpan" id="kobo.938.2">
     This reflects the fact that lists in Python are typically used to store an arbitrary number of items of the same type.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.939.1">
      Containers that have elements of the same type are called
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.940.1">
       homogeneous
      </span>
     </em>
     <span class="koboSpan" id="kobo.941.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.942.1">
     Notice that, even though the syntax is similar,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.943.1">
      dict
     </span>
    </code>
    <span class="koboSpan" id="kobo.944.1">
     expects a type for its keys and one for its values.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-317">
    <span class="koboSpan" id="kobo.945.1">
     Annotating tuples
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.946.1">
     Unlike most other container
    </span>
    <a id="_idIndexMarker1078">
    </a>
    <span class="koboSpan" id="kobo.947.1">
     types, it is common for tuples to contain a fixed number of items with specific types expected in each position.
    </span>
    <span class="koboSpan" id="kobo.947.2">
     Tuples containing different types are called
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.948.1">
      heterogeneous
     </span>
    </em>
    <span class="koboSpan" id="kobo.949.1">
     .
    </span>
    <span class="koboSpan" id="kobo.949.2">
     Because of this, tuples are treated in a special way by the typing system.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.950.1">
     There are three ways to annotate tuple types:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.951.1">
      Tuples of fixed length, which can be further categorized into:
     </span>
     <ul>
      <li class="bulletList level-2">
       <span class="koboSpan" id="kobo.952.1">
        Tuples without named fields
       </span>
      </li>
      <li class="bulletList level-2">
       <span class="koboSpan" id="kobo.953.1">
        Tuples with named fields
       </span>
      </li>
     </ul>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.954.1">
      Tuples of
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.955.1">
       arbitrary
      </span>
     </em>
     <span class="koboSpan" id="kobo.956.1">
      length
     </span>
    </li>
   </ul>
   <h3 class="heading-3" id="_idParaDest-318">
    <span class="koboSpan" id="kobo.957.1">
     Fixed-length tuples
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.958.1">
     Let us see an example of
    </span>
    <a id="_idIndexMarker1079">
    </a>
    <span class="koboSpan" id="kobo.959.1">
     fixed-length tuples, without named
    </span>
    <a id="_idIndexMarker1080">
    </a>
    <span class="koboSpan" id="kobo.960.1">
     fields.
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.961.1"># annotations/tuples.fixed.py</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.962.1"># Tuple `a` is assigned to a tuple of length 1,</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.963.1"># with a single string element.</span></span><span class="koboSpan" id="kobo.964.1">
a: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.965.1">tuple</span></span><span class="koboSpan" id="kobo.966.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.967.1">str</span></span><span class="koboSpan" id="kobo.968.1">] = (</span><span class="hljs-string"><span class="koboSpan" id="kobo.969.1">"hello"</span></span><span class="koboSpan" id="kobo.970.1">,)
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.971.1"># Tuple `b` is assigned to a tuple of length 2,</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.972.1"># with an integer and a string element.</span></span><span class="koboSpan" id="kobo.973.1">
b: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.974.1">tuple</span></span><span class="koboSpan" id="kobo.975.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.976.1">int</span></span><span class="koboSpan" id="kobo.977.1">, </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.978.1">str</span></span><span class="koboSpan" id="kobo.979.1">] = (</span><span class="hljs-number"><span class="koboSpan" id="kobo.980.1">1</span></span><span class="koboSpan" id="kobo.981.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.982.1">"one"</span></span><span class="koboSpan" id="kobo.983.1">)
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.984.1"># Type checker error: the annotation indicates a tuple of</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.985.1"># length 1, but the tuple has 3 elements.</span></span><span class="koboSpan" id="kobo.986.1">
c: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.987.1">tuple</span></span><span class="koboSpan" id="kobo.988.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.989.1">float</span></span><span class="koboSpan" id="kobo.990.1">] = (</span><span class="hljs-number"><span class="koboSpan" id="kobo.991.1">3.14</span></span><span class="koboSpan" id="kobo.992.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.993.1">1.0</span></span><span class="koboSpan" id="kobo.994.1">, -</span><span class="hljs-number"><span class="koboSpan" id="kobo.995.1">1.0</span></span><span class="koboSpan" id="kobo.996.1">)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.997.1"># Wrong!</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.998.1">
     In the code above, both
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.999.1">
      a
     </span>
    </code>
    <span class="koboSpan" id="kobo.1000.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1001.1">
      b
     </span>
    </code>
    <span class="koboSpan" id="kobo.1002.1">
     are annotated correctly.
    </span>
    <span class="koboSpan" id="kobo.1002.2">
     However,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1003.1">
      c
     </span>
    </code>
    <span class="koboSpan" id="kobo.1004.1">
     is incorrect, because the annotation indicates a tuple of length
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1005.1">
      1
     </span>
    </code>
    <span class="koboSpan" id="kobo.1006.1">
     , but
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1007.1">
      c
     </span>
    </code>
    <span class="koboSpan" id="kobo.1008.1">
     is of length
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1009.1">
      3
     </span>
    </code>
    <span class="koboSpan" id="kobo.1010.1">
     .
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-319">
    <span class="koboSpan" id="kobo.1011.1">
     Tuples with named fields
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.1012.1">
     When tuples have
    </span>
    <a id="_idIndexMarker1081">
    </a>
    <span class="koboSpan" id="kobo.1013.1">
     more than one or two fields, or when they are used in several places in the codebase, it can be useful to annotate them using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1014.1">
      typing.NamedTuple
     </span>
    </code>
    <span class="koboSpan" id="kobo.1015.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1015.2">
     Here is a simple example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1016.1"># annotations/tuples.named.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1017.1">from</span></span><span class="koboSpan" id="kobo.1018.1"> typing </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1019.1">import</span></span><span class="koboSpan" id="kobo.1020.1"> NamedTuple
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1021.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1022.1">Person</span></span><span class="koboSpan" id="kobo.1023.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1024.1">NamedTuple</span></span><span class="koboSpan" id="kobo.1025.1">):
    name: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1026.1">str</span></span><span class="koboSpan" id="kobo.1027.1">
    age: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1028.1">int</span></span><span class="koboSpan" id="kobo.1029.1">
fab = Person(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1030.1">"Fab"</span></span><span class="koboSpan" id="kobo.1031.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1032.1">48</span></span><span class="koboSpan" id="kobo.1033.1">)
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1034.1">print</span></span><span class="koboSpan" id="kobo.1035.1">(fab)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1036.1"># Person(name='Fab', age=48)</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.1037.1">print</span></span><span class="koboSpan" id="kobo.1038.1">(fab.name)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1039.1"># Fab</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.1040.1">print</span></span><span class="koboSpan" id="kobo.1041.1">(fab.age)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1042.1"># 48</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.1043.1">print</span></span><span class="koboSpan" id="kobo.1044.1">(fab[</span><span class="hljs-number"><span class="koboSpan" id="kobo.1045.1">0</span></span><span class="koboSpan" id="kobo.1046.1">])  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1047.1"># Fab</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.1048.1">print</span></span><span class="koboSpan" id="kobo.1049.1">(fab[</span><span class="hljs-number"><span class="koboSpan" id="kobo.1050.1">1</span></span><span class="koboSpan" id="kobo.1051.1">])  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1052.1"># 48</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1053.1">
     As you can see by the results of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1054.1">
      print()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1055.1">
     calls, this is equivalent to declaring a tuple, as we learned in
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.1056.1">
      Chapter 2
     </span>
    </em>
    <span class="koboSpan" id="kobo.1057.1">
     ,
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.1058.1">
      Built-In Data Types
     </span>
    </em>
    <span class="koboSpan" id="kobo.1059.1">
     :
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1060.1"># annotations/tuples.named.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1061.1">import</span></span><span class="koboSpan" id="kobo.1062.1"> collections
Person = collections.namedtuple(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1063.1">"Person"</span></span><span class="koboSpan" id="kobo.1064.1">, [</span><span class="hljs-string"><span class="koboSpan" id="kobo.1065.1">"name"</span></span><span class="koboSpan" id="kobo.1066.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.1067.1">"age"</span></span><span class="koboSpan" id="kobo.1068.1">])
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1069.1">
     Using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1070.1">
      typing.NamedTuple
     </span>
    </code>
    <span class="koboSpan" id="kobo.1071.1">
     not only allows us to correctly annotate the tuple but we can even specify
    </span>
    <a id="_idIndexMarker1082">
    </a>
    <span class="koboSpan" id="kobo.1072.1">
     default values if we wish:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1073.1"># annotations/tuples.named.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1074.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1075.1">Point</span></span><span class="koboSpan" id="kobo.1076.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1077.1">NamedTuple</span></span><span class="koboSpan" id="kobo.1078.1">):
    x: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1079.1">int</span></span><span class="koboSpan" id="kobo.1080.1">
    y: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1081.1">int</span></span><span class="koboSpan" id="kobo.1082.1">
    z: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1083.1">int</span></span><span class="koboSpan" id="kobo.1084.1"> = </span><span class="hljs-number"><span class="koboSpan" id="kobo.1085.1">0</span></span><span class="koboSpan" id="kobo.1086.1">
p = Point(</span><span class="hljs-number"><span class="koboSpan" id="kobo.1087.1">1</span></span><span class="koboSpan" id="kobo.1088.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1089.1">2</span></span><span class="koboSpan" id="kobo.1090.1">)
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1091.1">print</span></span><span class="koboSpan" id="kobo.1092.1">(p)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1093.1"># Point(x=1, y=2, z=0)</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1094.1">
     Notice how, in the above code, we didn’t specify the third argument when we created
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1095.1">
      p
     </span>
    </code>
    <span class="koboSpan" id="kobo.1096.1">
     , but
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1097.1">
      z
     </span>
    </code>
    <span class="koboSpan" id="kobo.1098.1">
     still got assigned to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1099.1">
      0
     </span>
    </code>
    <span class="koboSpan" id="kobo.1100.1">
     correctly.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-320">
    <span class="koboSpan" id="kobo.1101.1">
     Tuples of arbitrary length
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.1102.1">
     If we want to specify a tuple
    </span>
    <a id="_idIndexMarker1083">
    </a>
    <span class="koboSpan" id="kobo.1103.1">
     of arbitrary length in which all elements are of the same type, we can use a specific syntax.
    </span>
    <span class="koboSpan" id="kobo.1103.2">
     This can be useful, for example, when we use tuples as immutable sequences.
    </span>
    <span class="koboSpan" id="kobo.1103.3">
     Let us see a few examples:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1104.1"># annotations/tuples.any.length.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1105.1">from</span></span><span class="koboSpan" id="kobo.1106.1"> typing </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1107.1">import</span></span> <span class="hljs-type"><span class="koboSpan" id="kobo.1108.1">Any</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.1109.1"># We use the ellipsis to indicate that the tuple can have any</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.1110.1"># number of elements.</span></span><span class="koboSpan" id="kobo.1111.1">
a: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1112.1">tuple</span></span><span class="koboSpan" id="kobo.1113.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1114.1">int</span></span><span class="koboSpan" id="kobo.1115.1">, ...] = (</span><span class="hljs-number"><span class="koboSpan" id="kobo.1116.1">1</span></span><span class="koboSpan" id="kobo.1117.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1118.1">2</span></span><span class="koboSpan" id="kobo.1119.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1120.1">3</span></span><span class="koboSpan" id="kobo.1121.1">)
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.1122.1"># All the following are valid, because the tuple can have any</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.1123.1"># number of elements.</span></span><span class="koboSpan" id="kobo.1124.1">
a = ()
a = (</span><span class="hljs-number"><span class="koboSpan" id="kobo.1125.1">7</span></span><span class="koboSpan" id="kobo.1126.1">,)
a = (</span><span class="hljs-number"><span class="koboSpan" id="kobo.1127.1">7</span></span><span class="koboSpan" id="kobo.1128.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1129.1">8</span></span><span class="koboSpan" id="kobo.1130.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1131.1">9</span></span><span class="koboSpan" id="kobo.1132.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1133.1">10</span></span><span class="koboSpan" id="kobo.1134.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1135.1">11</span></span><span class="koboSpan" id="kobo.1136.1">)
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.1137.1"># But this is an error, because the tuple can only have integers</span></span><span class="koboSpan" id="kobo.1138.1">
a = (</span><span class="hljs-string"><span class="koboSpan" id="kobo.1139.1">"hello"</span></span><span class="koboSpan" id="kobo.1140.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.1141.1">"world"</span></span><span class="koboSpan" id="kobo.1142.1">)
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.1143.1"># We can specify a tuple that must be empty</span></span><span class="koboSpan" id="kobo.1144.1">
b: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1145.1">tuple</span></span><span class="koboSpan" id="kobo.1146.1">[()] = ()
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.1147.1"># Finally, if we annotate a tuple like this:</span></span><span class="koboSpan" id="kobo.1148.1">
c: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1149.1">tuple</span></span><span class="koboSpan" id="kobo.1150.1"> = (</span><span class="hljs-number"><span class="koboSpan" id="kobo.1151.1">1</span></span><span class="koboSpan" id="kobo.1152.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1153.1">2</span></span><span class="koboSpan" id="kobo.1154.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1155.1">3</span></span><span class="koboSpan" id="kobo.1156.1">)
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.1157.1"># The type checker will treat it as if we had written:</span></span><span class="koboSpan" id="kobo.1158.1">
c: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1159.1">tuple</span></span><span class="koboSpan" id="kobo.1160.1">[</span><span class="hljs-type"><span class="koboSpan" id="kobo.1161.1">Any</span></span><span class="koboSpan" id="kobo.1162.1">, ...] = (</span><span class="hljs-number"><span class="koboSpan" id="kobo.1163.1">1</span></span><span class="koboSpan" id="kobo.1164.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1165.1">2</span></span><span class="koboSpan" id="kobo.1166.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1167.1">3</span></span><span class="koboSpan" id="kobo.1168.1">)
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.1169.1"># And because of that, all the below are valid:</span></span><span class="koboSpan" id="kobo.1170.1">
c = ()
c = (</span><span class="hljs-string"><span class="koboSpan" id="kobo.1171.1">"hello"</span></span><span class="koboSpan" id="kobo.1172.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.1173.1">"my"</span></span><span class="koboSpan" id="kobo.1174.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.1175.1">"friend"</span></span><span class="koboSpan" id="kobo.1176.1">)
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1177.1">
     As you can see, there are plenty
    </span>
    <a id="_idIndexMarker1084">
    </a>
    <span class="koboSpan" id="kobo.1178.1">
     of ways to annotate a tuple.
    </span>
    <span class="koboSpan" id="kobo.1178.2">
     The choice of how strict you want to be is up to you.
    </span>
    <span class="koboSpan" id="kobo.1178.3">
     Remember to be consistent with the rest of the codebase.
    </span>
    <span class="koboSpan" id="kobo.1178.4">
     Also, be mindful of the value that annotations add to your code.
    </span>
    <span class="koboSpan" id="kobo.1178.5">
     If you are writing a library that is supposed to be published and used by other developers, it might make sense to be quite precise in the annotations.
    </span>
    <span class="koboSpan" id="kobo.1178.6">
     On the other hand, being too strict or restrictive for no good reason can hurt your productivity, especially in situations where such precision is not needed.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-321">
    <span class="koboSpan" id="kobo.1179.1">
     Abstract base classes (ABCs)
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1180.1">
     In older versions of
    </span>
    <a id="_idIndexMarker1085">
    </a>
    <span class="koboSpan" id="kobo.1181.1">
     Python, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1182.1">
      typing
     </span>
    </code>
    <span class="koboSpan" id="kobo.1183.1">
     module would provide several generic versions of types.
    </span>
    <span class="koboSpan" id="kobo.1183.2">
     For example, lists, tuples, sets, and dictionaries, could be annotated using the generic concrete collections
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1184.1">
      List
     </span>
    </code>
    <span class="koboSpan" id="kobo.1185.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1186.1">
      Tuple
     </span>
    </code>
    <span class="koboSpan" id="kobo.1187.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1188.1">
      Set
     </span>
    </code>
    <span class="koboSpan" id="kobo.1189.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1190.1">
      Dict
     </span>
    </code>
    <span class="koboSpan" id="kobo.1191.1">
     , and so on.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1192.1">
     Starting from Python 3.9, these generic collections have been deprecated in favor of their corresponding built-in, which means that, for example, it is possible to annotate a list using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1193.1">
      list
     </span>
    </code>
    <span class="koboSpan" id="kobo.1194.1">
     itself, without needing
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1195.1">
      typing.List
     </span>
    </code>
    <span class="koboSpan" id="kobo.1196.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1197.1">
     The documentation also points out that these generic collections should be used to annotate return values, whereas parameters should be annotated using abstract collections.
    </span>
    <span class="koboSpan" id="kobo.1197.2">
     For example, we should use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1198.1">
      collections.abc.Sequence
     </span>
    </code>
    <span class="koboSpan" id="kobo.1199.1">
     to annotate read-only and mutable
    </span>
    <a id="_idIndexMarker1086">
    </a>
    <span class="koboSpan" id="kobo.1200.1">
     sequences, like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1201.1">
      list
     </span>
    </code>
    <span class="koboSpan" id="kobo.1202.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1203.1">
      tuple
     </span>
    </code>
    <span class="koboSpan" id="kobo.1204.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1205.1">
      str
     </span>
    </code>
    <span class="koboSpan" id="kobo.1206.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1207.1">
      bytes
     </span>
    </code>
    <span class="koboSpan" id="kobo.1208.1">
     , and so on.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1209.1">
     This is in line
    </span>
    <a id="_idIndexMarker1087">
    </a>
    <span class="koboSpan" id="kobo.1210.1">
     with
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1211.1">
      Postel’s law
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1212.1">
     , also known as
    </span>
    <a id="_idIndexMarker1088">
    </a>
    <span class="koboSpan" id="kobo.1213.1">
     the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1214.1">
      robustness principle
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1215.1">
     , which postulates:
    </span>
   </p>
   <blockquote class="packt_quote">
    <p class="quote">
     <span class="koboSpan" id="kobo.1216.1">
      ”Be conservative in what you send, be liberal in what you accept.”
     </span>
    </p>
   </blockquote>
   <p class="normal">
    <em class="italic">
     <span class="koboSpan" id="kobo.1217.1">
      Be liberal in what you accept
     </span>
    </em>
    <span class="koboSpan" id="kobo.1218.1">
     means that we should not be too restrictive in the way we annotate parameters.
    </span>
    <span class="koboSpan" id="kobo.1218.2">
     If a function takes a parameter called
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1219.1">
      items
     </span>
    </code>
    <span class="koboSpan" id="kobo.1220.1">
     , and all it does to it is iterate, or access an item based on its position, it makes no difference if
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1221.1">
      items
     </span>
    </code>
    <span class="koboSpan" id="kobo.1222.1">
     is a list or a tuple.
    </span>
    <span class="koboSpan" id="kobo.1222.2">
     Therefore, we should not annotate with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1223.1">
      tuple
     </span>
    </code>
    <span class="koboSpan" id="kobo.1224.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1225.1">
      list
     </span>
    </code>
    <span class="koboSpan" id="kobo.1226.1">
     but use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1227.1">
      collections.abc.Sequence
     </span>
    </code>
    <span class="koboSpan" id="kobo.1228.1">
     to allow
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1229.1">
      items
     </span>
    </code>
    <span class="koboSpan" id="kobo.1230.1">
     to be passed either as a tuple or a list.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1231.1">
     Imagine a situation where you annotate
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1232.1">
      items
     </span>
    </code>
    <span class="koboSpan" id="kobo.1233.1">
     using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1234.1">
      tuple
     </span>
    </code>
    <span class="koboSpan" id="kobo.1235.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1235.2">
     After a while, you refactor the code and now
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1236.1">
      items
     </span>
    </code>
    <span class="koboSpan" id="kobo.1237.1">
     is passed as a list.
    </span>
    <span class="koboSpan" id="kobo.1237.2">
     The function now has the wrong annotation, as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1238.1">
      items
     </span>
    </code>
    <span class="koboSpan" id="kobo.1239.1">
     is no longer a tuple.
    </span>
    <span class="koboSpan" id="kobo.1239.2">
     Had we used
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1240.1">
      collections.abc.Sequence
     </span>
    </code>
    <span class="koboSpan" id="kobo.1241.1">
     instead, the function would not require any fixing, since both
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1242.1">
      tuple
     </span>
    </code>
    <span class="koboSpan" id="kobo.1243.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1244.1">
      list
     </span>
    </code>
    <span class="koboSpan" id="kobo.1245.1">
     would be okay.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1246.1">
     Let us see an example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1247.1"># annotations/collections.abcs.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1248.1">from</span></span><span class="koboSpan" id="kobo.1249.1"> collections.abc </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1250.1">import</span></span><span class="koboSpan" id="kobo.1251.1"> Mapping, </span><span class="hljs-type"><span class="koboSpan" id="kobo.1252.1">Sequence</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1253.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1254.1">average_bad</span></span><span class="koboSpan" id="kobo.1255.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1256.1">v: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1257.1">list</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1258.1">[</span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1259.1">float</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1260.1">]</span></span><span class="koboSpan" id="kobo.1261.1">) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1262.1">float</span></span><span class="koboSpan" id="kobo.1263.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1264.1">return</span></span> <span class="hljs-built_in"><span class="koboSpan" id="kobo.1265.1">sum</span></span><span class="koboSpan" id="kobo.1266.1">(v) / </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1267.1">len</span></span><span class="koboSpan" id="kobo.1268.1">(v)
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1269.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1270.1">average</span></span><span class="koboSpan" id="kobo.1271.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1272.1">v: </span></span><span class="hljs-type"><span class="koboSpan" id="kobo.1273.1">Sequence</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1274.1">[</span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1275.1">float</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1276.1">]</span></span><span class="koboSpan" id="kobo.1277.1">) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1278.1">float</span></span><span class="koboSpan" id="kobo.1279.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1280.1">return</span></span> <span class="hljs-built_in"><span class="koboSpan" id="kobo.1281.1">sum</span></span><span class="koboSpan" id="kobo.1282.1">(v) / </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1283.1">len</span></span><span class="koboSpan" id="kobo.1284.1">(v)
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1285.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1286.1">greet_user_bad</span></span><span class="koboSpan" id="kobo.1287.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1288.1">user: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1289.1">dict</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1290.1">[</span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1291.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1292.1">, </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1293.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1294.1">]</span></span><span class="koboSpan" id="kobo.1295.1">) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1296.1">str</span></span><span class="koboSpan" id="kobo.1297.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1298.1">return</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1299.1">f"Hello, </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1300.1">{user[</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1301.1">'name'</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1302.1">]}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1303.1">!"</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1304.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1305.1">greet_user</span></span><span class="koboSpan" id="kobo.1306.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1307.1">user: Mapping[</span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1308.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1309.1">, </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1310.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1311.1">]</span></span><span class="koboSpan" id="kobo.1312.1">) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1313.1">str</span></span><span class="koboSpan" id="kobo.1314.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1315.1">return</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1316.1">f"Hello, </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1317.1">{user[</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1318.1">'name'</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1319.1">]}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1320.1">!"</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1321.1">
     The above functions should help clarify things.
    </span>
    <span class="koboSpan" id="kobo.1321.2">
     Take
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1322.1">
      average_bad()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1323.1">
     , for example.
    </span>
    <span class="koboSpan" id="kobo.1323.2">
     If we passed
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1324.1">
      v
     </span>
    </code>
    <span class="koboSpan" id="kobo.1325.1">
     as a tuple, it would disagree with the function annotation we used, which is
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1326.1">
      list
     </span>
    </code>
    <span class="koboSpan" id="kobo.1327.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1327.2">
     On the other hand,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1328.1">
      average()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1329.1">
     does not suffer from the same issue.
    </span>
    <span class="koboSpan" id="kobo.1329.2">
     And of course, we can follow the same reasoning for
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1330.1">
      greet_user_bad()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1331.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1332.1">
      greet_user()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1333.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1334.1">
     Going back to
    </span>
    <a id="_idIndexMarker1089">
    </a>
    <span class="koboSpan" id="kobo.1335.1">
     Postel’s Law, when it comes to return values, it is better to be conservative, which means to be specific.
    </span>
    <span class="koboSpan" id="kobo.1335.2">
     Return values should be precise in indicating what the function returns.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1336.1">
     This is quite important, especially for the caller, who needs to know the type of object they will receive when calling the function.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1337.1">
     Here is another simple example, from the same file, that should help:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1338.1"># annotations/collections.abcs.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1339.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1340.1">add_defaults_bad</span></span><span class="koboSpan" id="kobo.1341.1">(
</span><span class="hljs-params"><span class="koboSpan" id="kobo.1342.1">    data: Mapping[</span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1343.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1344.1">, </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1345.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1346.1">]</span></span><span class="koboSpan" id="kobo.1347.1">
) -&gt; </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1348.1">Mapping</span></strong></span><span class="koboSpan" id="kobo.1349.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1350.1">str</span></span><span class="koboSpan" id="kobo.1351.1">, </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1352.1">str</span></span><span class="koboSpan" id="kobo.1353.1">]:
    defaults = {</span><span class="hljs-string"><span class="koboSpan" id="kobo.1354.1">"host"</span></span><span class="koboSpan" id="kobo.1355.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1356.1">"localhost"</span></span><span class="koboSpan" id="kobo.1357.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.1358.1">"port"</span></span><span class="koboSpan" id="kobo.1359.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1360.1">"5432"</span></span><span class="koboSpan" id="kobo.1361.1">}
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1362.1">return</span></span><span class="koboSpan" id="kobo.1363.1"> {**defaults, **data}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1364.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1365.1">add_defaults</span></span><span class="koboSpan" id="kobo.1366.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1367.1">data: Mapping[</span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1368.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1369.1">, </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1370.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1371.1">]</span></span><span class="koboSpan" id="kobo.1372.1">) -&gt; </span><span class="code-highlight"><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.1373.1">dict</span></strong></span><span class="koboSpan" id="kobo.1374.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1375.1">str</span></span><span class="koboSpan" id="kobo.1376.1">, </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1377.1">str</span></span><span class="koboSpan" id="kobo.1378.1">]:
    defaults = {</span><span class="hljs-string"><span class="koboSpan" id="kobo.1379.1">"host"</span></span><span class="koboSpan" id="kobo.1380.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1381.1">"localhost"</span></span><span class="koboSpan" id="kobo.1382.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.1383.1">"port"</span></span><span class="koboSpan" id="kobo.1384.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1385.1">"5432"</span></span><span class="koboSpan" id="kobo.1386.1">}
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1387.1">return</span></span><span class="koboSpan" id="kobo.1388.1"> {**defaults, **data}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1389.1">
     In the two functions above, we simply add some pretend connection defaults to whatever is passed in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1390.1">
      data
     </span>
    </code>
    <span class="koboSpan" id="kobo.1391.1">
     argument (provided
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1392.1">
      "host"
     </span>
    </code>
    <span class="koboSpan" id="kobo.1393.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1394.1">
      "port"
     </span>
    </code>
    <span class="koboSpan" id="kobo.1395.1">
     keys are missing in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1396.1">
      data
     </span>
    </code>
    <span class="koboSpan" id="kobo.1397.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.1397.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1398.1">
      add_defaults_bad()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1399.1">
     function specifies
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1400.1">
      Mapping
     </span>
    </code>
    <span class="koboSpan" id="kobo.1401.1">
     as the return type.
    </span>
    <span class="koboSpan" id="kobo.1401.2">
     The problem with this is that it is too generic.
    </span>
    <span class="koboSpan" id="kobo.1401.3">
     Objects such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1402.1">
      dict
     </span>
    </code>
    <span class="koboSpan" id="kobo.1403.1">
     and its siblings from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1404.1">
      collections
     </span>
    </code>
    <span class="koboSpan" id="kobo.1405.1">
     module,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1406.1">
      defaultdict
     </span>
    </code>
    <span class="koboSpan" id="kobo.1407.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1408.1">
      Counter
     </span>
    </code>
    <span class="koboSpan" id="kobo.1409.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1410.1">
      OrderedDict
     </span>
    </code>
    <span class="koboSpan" id="kobo.1411.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1412.1">
      ChainMap
     </span>
    </code>
    <span class="koboSpan" id="kobo.1413.1">
     , and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1414.1">
      UserDict
     </span>
    </code>
    <span class="koboSpan" id="kobo.1415.1">
     , for example, all implement the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1416.1">
      Mapping
     </span>
    </code>
    <span class="koboSpan" id="kobo.1417.1">
     interface.
    </span>
    <span class="koboSpan" id="kobo.1417.2">
     This makes things quite confusing for the caller.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1418.1">
     On the other hand,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1419.1">
      add_defaults()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1420.1">
     is a better function, in that it specifies precisely the return type:
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1421.1">
      dict
     </span>
    </code>
    <span class="koboSpan" id="kobo.1422.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1423.1">
     Commonly used ABCs include
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1424.1">
      Iterable
     </span>
    </code>
    <span class="koboSpan" id="kobo.1425.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1426.1">
      Iterator
     </span>
    </code>
    <span class="koboSpan" id="kobo.1427.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1428.1">
      Collection
     </span>
    </code>
    <span class="koboSpan" id="kobo.1429.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1430.1">
      Sequence
     </span>
    </code>
    <span class="koboSpan" id="kobo.1431.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1432.1">
      Mapping
     </span>
    </code>
    <span class="koboSpan" id="kobo.1433.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1434.1">
      Set
     </span>
    </code>
    <span class="koboSpan" id="kobo.1435.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1436.1">
      MutableSequence
     </span>
    </code>
    <span class="koboSpan" id="kobo.1437.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1438.1">
      MutableMapping
     </span>
    </code>
    <span class="koboSpan" id="kobo.1439.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1440.1">
      MutableSet
     </span>
    </code>
    <span class="koboSpan" id="kobo.1441.1">
     , and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1442.1">
      Callable
     </span>
    </code>
    <span class="koboSpan" id="kobo.1443.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1444.1">
     Let us see a dummy example with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1445.1">
      Iterable
     </span>
    </code>
    <span class="koboSpan" id="kobo.1446.1">
     :
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1447.1"># annotations/collections.abc.iterable.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1448.1">from</span></span><span class="koboSpan" id="kobo.1449.1"> collections.abc </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1450.1">import</span></span><span class="koboSpan" id="kobo.1451.1"> Iterable
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1452.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1453.1">process_items</span></span><span class="koboSpan" id="kobo.1454.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1455.1">items: Iterable</span></span><span class="koboSpan" id="kobo.1456.1">) -&gt; </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1457.1">None</span></span><span class="koboSpan" id="kobo.1458.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1459.1">for</span></span><span class="koboSpan" id="kobo.1460.1"> item </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1461.1">in</span></span><span class="koboSpan" id="kobo.1462.1"> items:
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1463.1">print</span></span><span class="koboSpan" id="kobo.1464.1">(item)
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1465.1">
     All the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1466.1">
      process_items()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1467.1">
     function needs to do is iterate over
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1468.1">
      items
     </span>
    </code>
    <span class="koboSpan" id="kobo.1469.1">
     ; therefore, we use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1470.1">
      Iterable
     </span>
    </code>
    <span class="koboSpan" id="kobo.1471.1">
     to annotate it.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1472.1">
     A more interesting example can be offered for
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1473.1">
      Callable
     </span>
    </code>
    <span class="koboSpan" id="kobo.1474.1">
     :
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1475.1"># annotations/collections.abc.iterable.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1476.1">from</span></span><span class="koboSpan" id="kobo.1477.1"> collections.abc </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1478.1">import</span></span> <span class="hljs-type"><span class="koboSpan" id="kobo.1479.1">Callable</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1480.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1481.1">process_callback</span></span><span class="koboSpan" id="kobo.1482.1">(
</span><span class="hljs-params"><span class="koboSpan" id="kobo.1483.1">    arg: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1484.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1485.1">, callback: </span></span><span class="hljs-type"><span class="koboSpan" id="kobo.1486.1">Callable</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1487.1">[[</span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1488.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1489.1">], </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1490.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1491.1">]</span></span><span class="koboSpan" id="kobo.1492.1">
) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1493.1">str</span></span><span class="koboSpan" id="kobo.1494.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1495.1">return</span></span><span class="koboSpan" id="kobo.1496.1"> callback(arg)
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1497.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1498.1">greeter</span></span><span class="koboSpan" id="kobo.1499.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1500.1">name: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1501.1">str</span></span><span class="koboSpan" id="kobo.1502.1">) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1503.1">str</span></span><span class="koboSpan" id="kobo.1504.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1505.1">return</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1506.1">f"Hello, </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1507.1">{name}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1508.1">!"</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1509.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1510.1">reverse</span></span><span class="koboSpan" id="kobo.1511.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1512.1">name: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1513.1">str</span></span><span class="koboSpan" id="kobo.1514.1">) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1515.1">str</span></span><span class="koboSpan" id="kobo.1516.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1517.1">return</span></span><span class="koboSpan" id="kobo.1518.1"> name[::-</span><span class="hljs-number"><span class="koboSpan" id="kobo.1519.1">1</span></span><span class="koboSpan" id="kobo.1520.1">]
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1521.1">
     Here, we have the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1522.1">
      process_callback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1523.1">
     function, which defines a string parameter,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1524.1">
      arg
     </span>
    </code>
    <span class="koboSpan" id="kobo.1525.1">
     , and a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1526.1">
      callback
     </span>
    </code>
    <span class="koboSpan" id="kobo.1527.1">
     callable object.
    </span>
    <span class="koboSpan" id="kobo.1527.2">
     We have two functions that follow, whose signature specifies a string parameter in input, and a string object as the return value.
    </span>
    <span class="koboSpan" id="kobo.1527.3">
     Notice how the type annotation
    </span>
    <a id="_idIndexMarker1090">
    </a>
    <span class="koboSpan" id="kobo.1528.1">
     for
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1529.1">
      callback
     </span>
    </code>
    <span class="koboSpan" id="kobo.1530.1">
     , which is
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1531.1">
      Callable[[str], str]
     </span>
    </code>
    <span class="koboSpan" id="kobo.1532.1">
     , indicates that the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1533.1">
      callback
     </span>
    </code>
    <span class="koboSpan" id="kobo.1534.1">
     argument should take one string argument in input and return a string in output.
    </span>
    <span class="koboSpan" id="kobo.1534.2">
     When we call these functions with the following code, we get the output that is indicated in the inline comments.
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1535.1"># annotations/collections.abc.iterable.py</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.1536.1">print</span></span><span class="koboSpan" id="kobo.1537.1">(process_callback(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1538.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1539.1">Alice"</span></span><span class="koboSpan" id="kobo.1540.1">, greeter))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1541.1"># Hello, Alice!</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.1542.1">print</span></span><span class="koboSpan" id="kobo.1543.1">(process_callback(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1544.1">"Alice"</span></span><span class="koboSpan" id="kobo.1545.1">, reverse))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1546.1"># ecilA</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1547.1">
     This concludes our tour of abstract base classes.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-322">
    <span class="koboSpan" id="kobo.1548.1">
     Special typing primitives
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1549.1">
     In the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1550.1">
      typing
     </span>
    </code>
    <span class="koboSpan" id="kobo.1551.1">
     module, there is also a category of objects called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1552.1">
      Special Typing Primitives
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1553.1">
     , which are quite
    </span>
    <a id="_idIndexMarker1091">
    </a>
    <span class="koboSpan" id="kobo.1554.1">
     interesting, and it is useful to know at least the most common of them.
    </span>
    <span class="koboSpan" id="kobo.1554.2">
     We have already seen one example:
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1555.1">
      Any
     </span>
    </code>
    <span class="koboSpan" id="kobo.1556.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1557.1">
     Other notable examples are:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1558.1">
       AnyStr
      </span>
     </code>
     <span class="koboSpan" id="kobo.1559.1">
      : Used to annotate functions that can accept
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1560.1">
       str
      </span>
     </code>
     <span class="koboSpan" id="kobo.1561.1">
      or
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1562.1">
       bytes
      </span>
     </code>
     <span class="koboSpan" id="kobo.1563.1">
      arguments but cannot allow the two to mix.
     </span>
     <span class="koboSpan" id="kobo.1563.2">
      This is known as a
     </span>
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1564.1">
       constrained type variable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1565.1">
      , which
     </span>
     <a id="_idIndexMarker1092">
     </a>
     <span class="koboSpan" id="kobo.1566.1">
      means that the type can only ever be exactly one of the constraints given.
     </span>
     <span class="koboSpan" id="kobo.1566.2">
      In the case of
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1567.1">
       AnyStr
      </span>
     </code>
     <span class="koboSpan" id="kobo.1568.1">
      , it is either
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1569.1">
       str
      </span>
     </code>
     <span class="koboSpan" id="kobo.1570.1">
      or
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1571.1">
       bytes
      </span>
     </code>
     <span class="koboSpan" id="kobo.1572.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1573.1">
       LiteralString
      </span>
     </code>
     <span class="koboSpan" id="kobo.1574.1">
      : A special type that includes only literal strings.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1575.1">
       Never
      </span>
     </code>
     <span class="koboSpan" id="kobo.1576.1">
      /
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1577.1">
       NoReturn
      </span>
     </code>
     <span class="koboSpan" id="kobo.1578.1">
      : Can be used to indicate that a function never returns – for example, it might raise an exception.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1579.1">
       TypeAlias
      </span>
     </code>
     <span class="koboSpan" id="kobo.1580.1">
      : Deprecated in
     </span>
     <a id="_idIndexMarker1093">
     </a>
     <span class="koboSpan" id="kobo.1581.1">
      favor of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1582.1">
       type
      </span>
     </code>
     <span class="koboSpan" id="kobo.1583.1">
      statement.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1584.1">
     Finally, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1585.1">
      Self
     </span>
    </code>
    <span class="koboSpan" id="kobo.1586.1">
     type deserves a little more consideration.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-323">
    <span class="koboSpan" id="kobo.1587.1">
     The Self type
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.1588.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1589.1">
      Self
     </span>
    </code>
    <span class="koboSpan" id="kobo.1590.1">
     type
    </span>
    <a id="_idIndexMarker1094">
    </a>
    <span class="koboSpan" id="kobo.1591.1">
     was added in Python 3.11, and it is a special type used to represent the current enclosed class.
    </span>
    <span class="koboSpan" id="kobo.1591.2">
     Let us see an example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1592.1"># annotations/self.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1593.1">from</span></span><span class="koboSpan" id="kobo.1594.1"> typing </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1595.1">import</span></span><span class="koboSpan" id="kobo.1596.1"> Self
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1597.1">from</span></span><span class="koboSpan" id="kobo.1598.1"> collections.abc </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1599.1">import</span></span><span class="koboSpan" id="kobo.1600.1"> Iterable
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1601.1">from</span></span><span class="koboSpan" id="kobo.1602.1"> dataclasses </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1603.1">import</span></span><span class="koboSpan" id="kobo.1604.1"> dataclass
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.1605.1">@dataclass</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1606.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1607.1">Point</span></span><span class="koboSpan" id="kobo.1608.1">:
    x: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1609.1">float</span></span><span class="koboSpan" id="kobo.1610.1"> = </span><span class="hljs-number"><span class="koboSpan" id="kobo.1611.1">0.0</span></span><span class="koboSpan" id="kobo.1612.1">
    y: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1613.1">float</span></span><span class="koboSpan" id="kobo.1614.1"> = </span><span class="hljs-number"><span class="koboSpan" id="kobo.1615.1">0.0</span></span><span class="koboSpan" id="kobo.1616.1">
    z: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1617.1">float</span></span><span class="koboSpan" id="kobo.1618.1"> = </span><span class="hljs-number"><span class="koboSpan" id="kobo.1619.1">0.0</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.1620.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1621.1">magnitude</span></span><span class="koboSpan" id="kobo.1622.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1623.1">self</span></span><span class="koboSpan" id="kobo.1624.1">) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1625.1">float</span></span><span class="koboSpan" id="kobo.1626.1">:
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1627.1">return</span></span><span class="koboSpan" id="kobo.1628.1"> (</span><span class="hljs-variable"><span class="koboSpan" id="kobo.1629.1">self</span></span><span class="koboSpan" id="kobo.1630.1">.x**</span><span class="hljs-number"><span class="koboSpan" id="kobo.1631.1">2</span></span><span class="koboSpan" id="kobo.1632.1"> + </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1633.1">self</span></span><span class="koboSpan" id="kobo.1634.1">.y**</span><span class="hljs-number"><span class="koboSpan" id="kobo.1635.1">2</span></span><span class="koboSpan" id="kobo.1636.1"> + </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1637.1">self</span></span><span class="koboSpan" id="kobo.1638.1">.z**</span><span class="hljs-number"><span class="koboSpan" id="kobo.1639.1">2</span></span><span class="koboSpan" id="kobo.1640.1">) ** </span><span class="hljs-number"><span class="koboSpan" id="kobo.1641.1">0.5</span></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.1642.1">    @classmethod</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.1643.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1644.1">sum_points</span></span><span class="koboSpan" id="kobo.1645.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1646.1">cls, points: Iterable[</span></span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1647.1">Self</span></strong></span><span class="hljs-params"><span class="koboSpan" id="kobo.1648.1">]</span></span><span class="koboSpan" id="kobo.1649.1">) -&gt; </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1650.1">Self</span></strong></span><span class="koboSpan" id="kobo.1651.1">:
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1652.1">return</span></span><span class="koboSpan" id="kobo.1653.1"> cls(
            </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1654.1">sum</span></span><span class="koboSpan" id="kobo.1655.1">(p.x </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1656.1">for</span></span><span class="koboSpan" id="kobo.1657.1"> p </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1658.1">in</span></span><span class="koboSpan" id="kobo.1659.1"> points),
            </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1660.1">sum</span></span><span class="koboSpan" id="kobo.1661.1">(p.y </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1662.1">for</span></span><span class="koboSpan" id="kobo.1663.1"> p </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1664.1">in</span></span><span class="koboSpan" id="kobo.1665.1"> points),
            </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1666.1">sum</span></span><span class="koboSpan" id="kobo.1667.1">(p.z </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1668.1">for</span></span><span class="koboSpan" id="kobo.1669.1"> p </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1670.1">in</span></span><span class="koboSpan" id="kobo.1671.1"> points),
        )
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1672.1">
     In the above code, we have created a simple class,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1673.1">
      Point
     </span>
    </code>
    <span class="koboSpan" id="kobo.1674.1">
     , which represents a three-dimensional point in space.
    </span>
    <span class="koboSpan" id="kobo.1674.2">
     To show you how to use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1675.1">
      Self
     </span>
    </code>
    <span class="koboSpan" id="kobo.1676.1">
     type, we have created a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1677.1">
      sum_points()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1678.1">
     class method, which takes an iterable,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1679.1">
      points
     </span>
    </code>
    <span class="koboSpan" id="kobo.1680.1">
     , and produces a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1681.1">
      Point
     </span>
    </code>
    <span class="koboSpan" id="kobo.1682.1">
     object in return, whose coordinates are the sums of the corresponding coordinates in all the items in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1683.1">
      points
     </span>
    </code>
    <span class="koboSpan" id="kobo.1684.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1685.1">
     To annotate the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1686.1">
      points
     </span>
    </code>
    <span class="koboSpan" id="kobo.1687.1">
     parameter, we pass
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1688.1">
      Self
     </span>
    </code>
    <span class="koboSpan" id="kobo.1689.1">
     to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1690.1">
      Iterable
     </span>
    </code>
    <span class="koboSpan" id="kobo.1691.1">
     , and we do the same for the return value of the
    </span>
    <a id="_idIndexMarker1095">
    </a>
    <span class="koboSpan" id="kobo.1692.1">
     method.
    </span>
    <span class="koboSpan" id="kobo.1692.2">
     Before the introduction of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1693.1">
      Self
     </span>
    </code>
    <span class="koboSpan" id="kobo.1694.1">
     type, we would have had to create a unique “self” type variable for every class that needed it.
    </span>
    <span class="koboSpan" id="kobo.1694.2">
     You can find an
    </span>
    <a id="_idIndexMarker1096">
    </a>
    <span class="koboSpan" id="kobo.1695.1">
     example of this in the official documentation at
    </span>
    <a href="https://docs.python.org/3/library/typing.html#typing.Self">
     <span class="url">
      <span class="koboSpan" id="kobo.1696.1">
       https://docs.python.org/3/library/typing.html#typing.Self
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.1697.1">
     .
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.1698.1">
      Notice that both the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1699.1">
       self
      </span>
     </code>
     <span class="koboSpan" id="kobo.1700.1">
      and the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1701.1">
       cls
      </span>
     </code>
     <span class="koboSpan" id="kobo.1702.1">
      parameters have no type annotation by convention.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1703.1">
     Let us now move on to see how to annotate variable parameters.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-324">
    <span class="koboSpan" id="kobo.1704.1">
     Annotating variable parameters
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1705.1">
     To annotate variable positional
    </span>
    <a id="_idIndexMarker1097">
    </a>
    <span class="koboSpan" id="kobo.1706.1">
     and keyword parameters, we use the same syntax we have seen until now.
    </span>
    <span class="koboSpan" id="kobo.1706.2">
     A quick example is better than any explanation:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1707.1"># annotations/variable.parameters.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1708.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1709.1">add_query_params</span></span><span class="koboSpan" id="kobo.1710.1">(
</span><span class="hljs-params">    </span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1711.1">*urls: </span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.1712.1">str</span></strong></span><span class="hljs-params"><span class="koboSpan" id="kobo.1713.1">, </span></span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1714.1">**query_params: </span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.1715.1">str</span></strong></span><span class="koboSpan" id="kobo.1716.1">
) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1717.1">list</span></span><span class="koboSpan" id="kobo.1718.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1719.1">str</span></span><span class="koboSpan" id="kobo.1720.1">]:
    params = </span><span class="hljs-string"><span class="koboSpan" id="kobo.1721.1">"&amp;"</span></span><span class="koboSpan" id="kobo.1722.1">.join(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1723.1">f"</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1724.1">{k}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1725.1">=</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1726.1">{v}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1727.1">"</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1728.1">for</span></span><span class="koboSpan" id="kobo.1729.1"> k, v </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1730.1">in</span></span><span class="koboSpan" id="kobo.1731.1"> query_params.items())
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1732.1">return</span></span><span class="koboSpan" id="kobo.1733.1"> [</span><span class="hljs-string"><span class="koboSpan" id="kobo.1734.1">f"</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1735.1">{url}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1736.1">?</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1737.1">{params}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1738.1">"</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1739.1">for</span></span><span class="koboSpan" id="kobo.1740.1"> url </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1741.1">in</span></span><span class="koboSpan" id="kobo.1742.1"> urls]
urls = add_query_params(
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.1743.1">"https://example1.com"</span></span><span class="koboSpan" id="kobo.1744.1">,
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.1745.1">"https://example2.com"</span></span><span class="koboSpan" id="kobo.1746.1">,
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.1747.1">"https://example3.com"</span></span><span class="koboSpan" id="kobo.1748.1">,
    limit=</span><span class="hljs-string"><span class="koboSpan" id="kobo.1749.1">"10"</span></span><span class="koboSpan" id="kobo.1750.1">,
    offset=</span><span class="hljs-string"><span class="koboSpan" id="kobo.1751.1">"20"</span></span><span class="koboSpan" id="kobo.1752.1">,
    sort=</span><span class="hljs-string"><span class="koboSpan" id="kobo.1753.1">"desc"</span></span><span class="koboSpan" id="kobo.1754.1">,
)
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1755.1">print</span></span><span class="koboSpan" id="kobo.1756.1">(urls)
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.1757.1"># ['https://example1.com?limit=10&amp;offset=20&amp;sort=desc',</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.1758.1">#  'https://example2.com?limit=10&amp;offset=20&amp;sort=desc',</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.1759.1">#  'https://example3.com?limit=10&amp;offset=20&amp;sort=desc']</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1760.1">
     In the above example, we have written a dummy function,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1761.1">
      add_query_params()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1762.1">
     , that adds some query parameters to a collection of URLs.
    </span>
    <span class="koboSpan" id="kobo.1762.2">
     Notice how, in the function definition, we only needed to specify the type of the object contained in the tuple
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1763.1">
      urls
     </span>
    </code>
    <span class="koboSpan" id="kobo.1764.1">
     , and the type for the
    </span>
    <a id="_idIndexMarker1098">
    </a>
    <span class="koboSpan" id="kobo.1765.1">
     values of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1766.1">
      query_params
     </span>
    </code>
    <span class="koboSpan" id="kobo.1767.1">
     dictionary.
    </span>
    <span class="koboSpan" id="kobo.1767.2">
     Declaring
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1768.1">
      *urls: str
     </span>
    </code>
    <span class="koboSpan" id="kobo.1769.1">
     is equivalent to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1770.1">
      tuple[str, …]
     </span>
    </code>
    <span class="koboSpan" id="kobo.1771.1">
     , while
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1772.1">
      **query_params: str
     </span>
    </code>
    <span class="koboSpan" id="kobo.1773.1">
     is equivalent to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1774.1">
      dict[str, str]
     </span>
    </code>
    <span class="koboSpan" id="kobo.1775.1">
     .
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-325">
    <span class="koboSpan" id="kobo.1776.1">
     Protocols
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1777.1">
     Let us conclude our journey through type annotations by
    </span>
    <a id="_idIndexMarker1099">
    </a>
    <span class="koboSpan" id="kobo.1778.1">
     discussing
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1779.1">
      protocols
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1780.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1780.2">
     In object-oriented programming, protocols define a set of methods that a class must implement without enforcing inheritance from any specific class.
    </span>
    <span class="koboSpan" id="kobo.1780.3">
     They are akin to the concept of interfaces in other languages, but they are more flexible and informal.
    </span>
    <span class="koboSpan" id="kobo.1780.4">
     They promote the use of polymorphism by allowing different classes to be used interchangeably if they follow the same protocol, even if they don’t share a common base class.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1781.1">
     This concept has been part of Python since the beginning.
    </span>
    <span class="koboSpan" id="kobo.1781.2">
     This type of protocol is normally referred to
    </span>
    <a id="_idIndexMarker1100">
    </a>
    <span class="koboSpan" id="kobo.1782.1">
     as a
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1783.1">
      dynamic protocol
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1784.1">
     , and it is described in the Data Model chapter (
    </span>
    <a href="https://docs.python.org/3/reference/datamodel.html">
     <span class="url">
      <span class="koboSpan" id="kobo.1785.1">
       https://docs.python.org/3/reference/datamodel.html
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.1786.1">
     ) of the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1787.1">
      Python Language Reference
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1788.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1789.1">
     In the context of type hints, however, a protocol is a subclass of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1790.1">
      typing.Protocol
     </span>
    </code>
    <span class="koboSpan" id="kobo.1791.1">
     , which defines an interface that a type checker can verify.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1792.1">
     Introduced by
    </span>
    <a id="_idIndexMarker1101">
    </a>
    <span class="koboSpan" id="kobo.1793.1">
     PEP 544 (
    </span>
    <a href="https://peps.python.org/pep-0544/">
     <span class="url">
      <span class="koboSpan" id="kobo.1794.1">
       https://peps.python.org/pep-0544/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.1795.1">
     ), they enable structural subtyping (informally known as
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1796.1">
      static duck typing
     </span>
    </em>
    <span class="koboSpan" id="kobo.1797.1">
     ), which we explored briefly at the beginning of this chapter.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1798.1">
     The compatibility of an object with a protocol is determined by the presence of certain methods or attributes, rather than inheritance from a specific class.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1799.1">
     Protocols are therefore quite helpful in those cases where we cannot easily define a type, and instead, it is more convenient to express the annotation in the form of
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1800.1">
      “it should support certain methods or have certain attributes.”
     </span>
    </em>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1801.1">
     Protocols defined by PEP 544 are commonly
    </span>
    <a id="_idIndexMarker1102">
    </a>
    <span class="koboSpan" id="kobo.1802.1">
     referred to as
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1803.1">
      static protocols
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1804.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1805.1">
     Dynamic and static protocols present two key differences:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1806.1">
      Dynamic protocols allow
     </span>
     <a id="_idIndexMarker1103">
     </a>
     <span class="koboSpan" id="kobo.1807.1">
      for partial implementation.
     </span>
     <span class="koboSpan" id="kobo.1807.2">
      This means an object can provide an implementation for only a subset of the methods of the protocol and still be useful.
     </span>
     <span class="koboSpan" id="kobo.1807.3">
      However, static protocols require an object to provide
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1808.1">
       every
      </span>
     </em>
     <span class="koboSpan" id="kobo.1809.1">
      method declared in the protocol, even if the software doesn’t need them all.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1810.1">
      Static protocols
     </span>
     <a id="_idIndexMarker1104">
     </a>
     <span class="koboSpan" id="kobo.1811.1">
      can be verified by static type checkers, while dynamic ones cannot.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1812.1">
     You can find a list of the protocols
    </span>
    <a id="_idIndexMarker1105">
    </a>
    <span class="koboSpan" id="kobo.1813.1">
     provided by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1814.1">
      typing
     </span>
    </code>
    <span class="koboSpan" id="kobo.1815.1">
     module here:
    </span>
    <a href="https://docs.python.org/3/library/typing.html#protocols">
     <span class="url">
      <span class="koboSpan" id="kobo.1816.1">
       https://docs.python.org/3/library/typing.html#protocols
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.1817.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1817.2">
     Their names are prefixed with the word
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1818.1">
      Supports
     </span>
    </code>
    <span class="koboSpan" id="kobo.1819.1">
     , followed by a title-cased version of the dunder method they declare to support.
    </span>
    <span class="koboSpan" id="kobo.1819.2">
     Some examples are:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1820.1">
       SupportsAbs
      </span>
     </code>
     <span class="koboSpan" id="kobo.1821.1">
      : An ABC with one abstract method,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1822.1">
       __abs__
      </span>
     </code>
     <span class="koboSpan" id="kobo.1823.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1824.1">
       SupportsBytes
      </span>
     </code>
     <span class="koboSpan" id="kobo.1825.1">
      : An ABC with one abstract method,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1826.1">
       __bytes__
      </span>
     </code>
     <span class="koboSpan" id="kobo.1827.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1828.1">
       SupportsComplex
      </span>
     </code>
     <span class="koboSpan" id="kobo.1829.1">
      : An ABC with one abstract method,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1830.1">
       __complex__
      </span>
     </code>
     <span class="koboSpan" id="kobo.1831.1">
      .
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1832.1">
     Other protocols that used to live in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1833.1">
      typing
     </span>
    </code>
    <span class="koboSpan" id="kobo.1834.1">
     module but have been migrated to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1835.1">
      collections.abc
     </span>
    </code>
    <span class="koboSpan" id="kobo.1836.1">
     are
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1837.1">
      Iterable
     </span>
    </code>
    <span class="koboSpan" id="kobo.1838.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1839.1">
      Iterator
     </span>
    </code>
    <span class="koboSpan" id="kobo.1840.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1841.1">
      Sized
     </span>
    </code>
    <span class="koboSpan" id="kobo.1842.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1843.1">
      Container
     </span>
    </code>
    <span class="koboSpan" id="kobo.1844.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1845.1">
      Collection
     </span>
    </code>
    <span class="koboSpan" id="kobo.1846.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1847.1">
      Reversible
     </span>
    </code>
    <span class="koboSpan" id="kobo.1848.1">
     , and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1849.1">
      ContextManager
     </span>
    </code>
    <span class="koboSpan" id="kobo.1850.1">
     , to name just a few.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1851.1">
     You can find the complete list in the Mypy
    </span>
    <a id="_idIndexMarker1106">
    </a>
    <span class="koboSpan" id="kobo.1852.1">
     documentation:
    </span>
    <a href="https://mypy.readthedocs.io/en/stable/protocols.html#predefined-protocols-reference">
     <span class="url">
      <span class="koboSpan" id="kobo.1853.1">
       https://mypy.readthedocs.io/en/stable/protocols.html#predefined-protocols-reference
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.1854.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1855.1">
     Now that we have an idea about what a protocol is, in the context of type hints, let us see an example that shows how to create a simple custom protocol:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1856.1"># annotations/protocols.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1857.1">from</span></span><span class="koboSpan" id="kobo.1858.1"> typing </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1859.1">import</span></span><span class="koboSpan" id="kobo.1860.1"> Iterable, Protocol
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1861.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1862.1">SupportsStart</span></span><span class="koboSpan" id="kobo.1863.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1864.1">Protocol</span></span><span class="koboSpan" id="kobo.1865.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1866.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1867.1">start</span></span><span class="koboSpan" id="kobo.1868.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1869.1">self</span></span><span class="koboSpan" id="kobo.1870.1">) -&gt; </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1871.1">None</span></span><span class="koboSpan" id="kobo.1872.1">: ...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1873.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1874.1">Worker</span></span><span class="koboSpan" id="kobo.1875.1">:  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1876.1"># No SupportsStart base class.</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.1877.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1878.1">__init__</span></span><span class="koboSpan" id="kobo.1879.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1880.1">self, name: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1881.1">str</span></span><span class="koboSpan" id="kobo.1882.1">) -&gt; </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1883.1">None</span></span><span class="koboSpan" id="kobo.1884.1">:
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1885.1">self</span></span><span class="koboSpan" id="kobo.1886.1">.name = name
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1887.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1888.1">start</span></span><span class="koboSpan" id="kobo.1889.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1890.1">self</span></span><span class="koboSpan" id="kobo.1891.1">) -&gt; </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1892.1">None</span></span><span class="koboSpan" id="kobo.1893.1">:
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1894.1">print</span></span><span class="koboSpan" id="kobo.1895.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1896.1">f"Starting worker </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1897.1">{self.name}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1898.1">"</span></span><span class="koboSpan" id="kobo.1899.1">)
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1900.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1901.1">start_workers</span></span><span class="koboSpan" id="kobo.1902.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1903.1">workers: Iterable[SupportsStart]</span></span><span class="koboSpan" id="kobo.1904.1">) -&gt; </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1905.1">None</span></span><span class="koboSpan" id="kobo.1906.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1907.1">for</span></span><span class="koboSpan" id="kobo.1908.1"> worker </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1909.1">in</span></span><span class="koboSpan" id="kobo.1910.1"> workers:
        worker.start()
workers = [Worker(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1911.1">"Alice"</span></span><span class="koboSpan" id="kobo.1912.1">), Worker(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1913.1">"Bob"</span></span><span class="koboSpan" id="kobo.1914.1">)]
start_workers(workers)
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1915.1">
     In the code above, we
    </span>
    <a id="_idIndexMarker1107">
    </a>
    <span class="koboSpan" id="kobo.1916.1">
     define a protocol class,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1917.1">
      SupportsStart
     </span>
    </code>
    <span class="koboSpan" id="kobo.1918.1">
     , which has one method:
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1919.1">
      start()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1920.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1920.2">
     To make it a static protocol,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1921.1">
      SupportsStart
     </span>
    </code>
    <span class="koboSpan" id="kobo.1922.1">
     inherits from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1923.1">
      Protocol
     </span>
    </code>
    <span class="koboSpan" id="kobo.1924.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1924.2">
     The interesting part comes right after it, when we create the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1925.1">
      Worker
     </span>
    </code>
    <span class="koboSpan" id="kobo.1926.1">
     class.
    </span>
    <span class="koboSpan" id="kobo.1926.2">
     Note that there is no need for it to inherit from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1927.1">
      SupportsStart
     </span>
    </code>
    <span class="koboSpan" id="kobo.1928.1">
     class.
    </span>
    <span class="koboSpan" id="kobo.1928.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1929.1">
      Worker
     </span>
    </code>
    <span class="koboSpan" id="kobo.1930.1">
     class only needs to fulfill the protocol, which means it needs to have a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1931.1">
      start()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1932.1">
     method.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1933.1">
     We also wrote a function,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1934.1">
      start_workers()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1935.1">
     , which takes a parameter,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1936.1">
      workers
     </span>
    </code>
    <span class="koboSpan" id="kobo.1937.1">
     , annotated as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1938.1">
      Iterable[SupportsStart]
     </span>
    </code>
    <span class="koboSpan" id="kobo.1939.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1939.2">
     That is all that is required to use a protocol.
    </span>
    <span class="koboSpan" id="kobo.1939.3">
     We define a couple of workers,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1940.1">
      Alice
     </span>
    </code>
    <span class="koboSpan" id="kobo.1941.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1942.1">
      Bob
     </span>
    </code>
    <span class="koboSpan" id="kobo.1943.1">
     , and we pass them to the function call.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1944.1">
     Running the above example will produce the following output:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1945.1">Starting worker Alice
Starting worker Bob
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1946.1">
     Now imagine we also wanted to stop a worker.
    </span>
    <span class="koboSpan" id="kobo.1946.2">
     This is a more interesting case because it allows us to discuss how to subclass protocols.
    </span>
    <span class="koboSpan" id="kobo.1946.3">
     Let us see an example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1947.1"># annotations/protocols.subclassing.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1948.1">from</span></span><span class="koboSpan" id="kobo.1949.1"> typing </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1950.1">import</span></span><span class="koboSpan" id="kobo.1951.1"> Iterable, Protocol
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1952.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1953.1">SupportsStart</span></span><span class="koboSpan" id="kobo.1954.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1955.1">Protocol</span></span><span class="koboSpan" id="kobo.1956.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1957.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1958.1">start</span></span><span class="koboSpan" id="kobo.1959.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1960.1">self</span></span><span class="koboSpan" id="kobo.1961.1">) -&gt; </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1962.1">None</span></span><span class="koboSpan" id="kobo.1963.1">: ...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1964.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1965.1">SupportsStop</span></span><span class="koboSpan" id="kobo.1966.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1967.1">Protocol</span></span><span class="koboSpan" id="kobo.1968.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1969.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1970.1">stop</span></span><span class="koboSpan" id="kobo.1971.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1972.1">self</span></span><span class="koboSpan" id="kobo.1973.1">) -&gt; </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1974.1">None</span></span><span class="koboSpan" id="kobo.1975.1">: ...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1976.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1977.1">SupportsWorkCycle</span></span><span class="koboSpan" id="kobo.1978.1">(</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1979.1">SupportsStart, SupportsStop, Protocol</span></strong></span><span class="koboSpan" id="kobo.1980.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1981.1">pass</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1982.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1983.1">Worker</span></span><span class="koboSpan" id="kobo.1984.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1985.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1986.1">__init__</span></span><span class="koboSpan" id="kobo.1987.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1988.1">self, name: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1989.1">str</span></span><span class="koboSpan" id="kobo.1990.1">) -&gt; </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1991.1">None</span></span><span class="koboSpan" id="kobo.1992.1">:
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1993.1">self</span></span><span class="koboSpan" id="kobo.1994.1">.name = name
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1995.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1996.1">start</span></span><span class="koboSpan" id="kobo.1997.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1998.1">self</span></span><span class="koboSpan" id="kobo.1999.1">) -&gt; </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2000.1">None</span></span><span class="koboSpan" id="kobo.2001.1">:
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2002.1">print</span></span><span class="koboSpan" id="kobo.2003.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2004.1">f"Starting worker </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.2005.1">{self.name}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2006.1">"</span></span><span class="koboSpan" id="kobo.2007.1">)
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2008.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2009.1">stop</span></span><span class="koboSpan" id="kobo.2010.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2011.1">self</span></span><span class="koboSpan" id="kobo.2012.1">) -&gt; </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2013.1">None</span></span><span class="koboSpan" id="kobo.2014.1">:
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2015.1">print</span></span><span class="koboSpan" id="kobo.2016.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2017.1">f"Stopping worker </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.2018.1">{self.name}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2019.1">"</span></span><span class="koboSpan" id="kobo.2020.1">)
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2021.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2022.1">start_workers</span></span><span class="koboSpan" id="kobo.2023.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2024.1">workers: Iterable[SupportsWorkCycle]</span></span><span class="koboSpan" id="kobo.2025.1">) -&gt; </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2026.1">None</span></span><span class="koboSpan" id="kobo.2027.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2028.1">for</span></span><span class="koboSpan" id="kobo.2029.1"> worker </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2030.1">in</span></span><span class="koboSpan" id="kobo.2031.1"> workers:
        worker.start()
        worker.stop()
workers = [Worker(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2032.1">"Alice"</span></span><span class="koboSpan" id="kobo.2033.1">), Worker(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2034.1">"Bob"</span></span><span class="koboSpan" id="kobo.2035.1">)]
start_workers(workers)
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2036.1">
     In the above example, we learned that we can
    </span>
    <a id="_idIndexMarker1108">
    </a>
    <span class="koboSpan" id="kobo.2037.1">
     compose protocols as we would do mixins.
    </span>
    <span class="koboSpan" id="kobo.2037.2">
     The one key difference is that when we subclass a protocol class, as in the case of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2038.1">
      SupportsWorkCycle
     </span>
    </code>
    <span class="koboSpan" id="kobo.2039.1">
     , we still need to explicitly add
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2040.1">
      Protocol
     </span>
    </code>
    <span class="koboSpan" id="kobo.2041.1">
     to the list of base classes.
    </span>
    <span class="koboSpan" id="kobo.2041.2">
     If we do not do this, the static type checker will complain.
    </span>
    <span class="koboSpan" id="kobo.2041.3">
     This is because inheriting from an existing protocol does not automatically turn the subclass into a protocol.
    </span>
    <span class="koboSpan" id="kobo.2041.4">
     It only creates a regular class or ABC that implements the given protocol(s).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2042.1">
     You can find more information about
    </span>
    <a id="_idIndexMarker1109">
    </a>
    <span class="koboSpan" id="kobo.2043.1">
     protocols in the Mypy documentation:
    </span>
    <a href="https://mypy.readthedocs.io/en/stable/protocols.html">
     <span class="url">
      <span class="koboSpan" id="kobo.2044.1">
       https://mypy.readthedocs.io/en/stable/protocols.html
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.2045.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2046.1">
     Let us now discuss Mypy, the static type checker most widely adopted by the Python community.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-326">
    <span class="koboSpan" id="kobo.2047.1">
     The Mypy static type checker
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.2048.1">
     There are several static type checkers
    </span>
    <a id="_idIndexMarker1110">
    </a>
    <span class="koboSpan" id="kobo.2049.1">
     for Python.
    </span>
    <span class="koboSpan" id="kobo.2049.2">
     Currently, the most widely adopted are:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.2050.1">
       Mypy
      </span>
     </strong>
     <span class="koboSpan" id="kobo.2051.1">
      : Designed to
     </span>
     <a id="_idIndexMarker1111">
     </a>
     <span class="koboSpan" id="kobo.2052.1">
      work seamlessly with Python’s type annotations
     </span>
     <a id="_idIndexMarker1112">
     </a>
     <span class="koboSpan" id="kobo.2053.1">
      defined by PEP 484, it supports gradual typing, integrates well with existing codebases, and has extensive documentation.
     </span>
     <span class="koboSpan" id="kobo.2053.2">
      You can find it at
     </span>
     <a href="https://mypy.readthedocs.io/">
      <span class="url">
       <span class="koboSpan" id="kobo.2054.1">
        https://mypy.readthedocs.io/
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.2055.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.2056.1">
       Pyright
      </span>
     </strong>
     <span class="koboSpan" id="kobo.2057.1">
      : Developed by
     </span>
     <a id="_idIndexMarker1113">
     </a>
     <span class="koboSpan" id="kobo.2058.1">
      Microsoft, this fast type checker is optimized for use with Visual Studio Code.
     </span>
     <span class="koboSpan" id="kobo.2058.2">
      It does incremental analysis for fast type
     </span>
     <a id="_idIndexMarker1114">
     </a>
     <span class="koboSpan" id="kobo.2059.1">
      checking and supports both TypeScript and Python.
     </span>
     <span class="koboSpan" id="kobo.2059.2">
      You can find it at
     </span>
     <a href="https://github.com/microsoft/pyright">
      <span class="url">
       <span class="koboSpan" id="kobo.2060.1">
        https://github.com/microsoft/pyright
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.2061.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.2062.1">
       Pylint
      </span>
     </strong>
     <span class="koboSpan" id="kobo.2063.1">
      : A comprehensive
     </span>
     <a id="_idIndexMarker1115">
     </a>
     <span class="koboSpan" id="kobo.2064.1">
      static analysis tool that includes
     </span>
     <a id="_idIndexMarker1116">
     </a>
     <span class="koboSpan" id="kobo.2065.1">
      type checking along with linting and code quality checks.
     </span>
     <span class="koboSpan" id="kobo.2065.2">
      It’s highly configurable, supports custom plugins, and generates detailed code quality reports.
     </span>
     <span class="koboSpan" id="kobo.2065.3">
      You can find it at
     </span>
     <a href="https://pylint.org/">
      <span class="url">
       <span class="koboSpan" id="kobo.2066.1">
        https://pylint.org/
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.2067.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.2068.1">
       Pyre
      </span>
     </strong>
     <span class="koboSpan" id="kobo.2069.1">
      : Developed by
     </span>
     <a id="_idIndexMarker1117">
     </a>
     <span class="koboSpan" id="kobo.2070.1">
      Facebook, it’s fast and scalable, and works well with
     </span>
     <a id="_idIndexMarker1118">
     </a>
     <span class="koboSpan" id="kobo.2071.1">
      large codebases.
     </span>
     <span class="koboSpan" id="kobo.2071.2">
      It supports gradual typing, and has a powerful type inference engine.
     </span>
     <span class="koboSpan" id="kobo.2071.3">
      It also integrates well with continuous integration systems.
     </span>
     <span class="koboSpan" id="kobo.2071.4">
      You can find it at
     </span>
     <a href="https://pyre-check.org/">
      <span class="url">
       <span class="koboSpan" id="kobo.2072.1">
        https://pyre-check.org/
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.2073.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.2074.1">
       Pytype
      </span>
     </strong>
     <span class="koboSpan" id="kobo.2075.1">
      : Developed by
     </span>
     <a id="_idIndexMarker1119">
     </a>
     <span class="koboSpan" id="kobo.2076.1">
      Google, it infers types automatically and
     </span>
     <a id="_idIndexMarker1120">
     </a>
     <span class="koboSpan" id="kobo.2077.1">
      reduces the need for explicit annotations, which it can generate.
     </span>
     <span class="koboSpan" id="kobo.2077.2">
      It integrates well with Google open-source tools.
     </span>
     <span class="koboSpan" id="kobo.2077.3">
      You can find it at
     </span>
     <a href="https://github.com/google/pytype">
      <span class="url">
       <span class="koboSpan" id="kobo.2078.1">
        https://github.com/google/pytype
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.2079.1">
      .
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.2080.1">
     For this section of the chapter, we have decided to go with Mypy, since it currently seems to be the most popular.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2081.1">
     To install it in your virtual environment, you can run the following command:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.2082.1">$ pip install mypy
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2083.1">
     Mypy
    </span>
    <a id="_idIndexMarker1121">
    </a>
    <span class="koboSpan" id="kobo.2084.1">
     is also included in the requirements file for this chapter.
    </span>
    <span class="koboSpan" id="kobo.2084.2">
     When Mypy is installed, you can run it against any files or folders you want.
    </span>
    <span class="koboSpan" id="kobo.2084.3">
     Mypy will recursively traverse any folder to find Python modules (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2085.1">
      *.py
     </span>
    </code>
    <span class="koboSpan" id="kobo.2086.1">
     files).
    </span>
    <span class="koboSpan" id="kobo.2086.2">
     Here is an example:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.2087.1">$ mypy program.py some_folder another_folder
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2088.1">
     The command sports a massive set of options, which we encourage you to explore by running:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.2089.1">$ mypy --help
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2090.1">
     Let us start with a very simple example of a function that has no annotations and see the outcome of running
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2091.1">
      mypy
     </span>
    </code>
    <span class="koboSpan" id="kobo.2092.1">
     against it.
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2093.1"># mypy_src/simple_function.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2094.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2095.1">hypothenuse</span></span><span class="koboSpan" id="kobo.2096.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2097.1">a, b</span></span><span class="koboSpan" id="kobo.2098.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2099.1">return</span></span><span class="koboSpan" id="kobo.2100.1"> (a**</span><span class="hljs-number"><span class="koboSpan" id="kobo.2101.1">2</span></span><span class="koboSpan" id="kobo.2102.1"> + b**</span><span class="hljs-number"><span class="koboSpan" id="kobo.2103.1">2</span></span><span class="koboSpan" id="kobo.2104.1">) ** </span><span class="hljs-number"><span class="koboSpan" id="kobo.2105.1">0.5</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2106.1">
     Running
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2107.1">
      mypy
     </span>
    </code>
    <span class="koboSpan" id="kobo.2108.1">
     on this module gives this result:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.2109.1">$ mypy simple_function.py
Success: no issues found in 1 source file
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2110.1">
     This is probably not what you expected, but
    </span>
    <a id="_idIndexMarker1122">
    </a>
    <span class="koboSpan" id="kobo.2111.1">
     Mypy is designed to support gradually adding type annotations to existing codebases.
    </span>
    <span class="koboSpan" id="kobo.2111.2">
     Outputting error messages for unannotated code would discourage developers from using it in this way.
    </span>
    <span class="koboSpan" id="kobo.2111.3">
     Therefore, the default behavior is to ignore functions that have no annotations.
    </span>
    <span class="koboSpan" id="kobo.2111.4">
     If we wanted Mypy to check the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2112.1">
      hypothenuse()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2113.1">
     function anyway, we could run it like this (notice we have re-formatted the output to fit the book’s width):
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.2114.1">$ mypy --strict mypy_src/simple_function.py
mypy_src/simple_function.py:4:
    error: Function is missing a type annotation  [no-untyped-def]
Found 1 error in 1 file (checked 1 source file)
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2115.1">
     Now Mypy is telling us that the function is missing a type annotation, so let us fix that.
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2116.1"># mypy_src/simple_function_annotated.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2117.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2118.1">hypothenuse</span></span><span class="koboSpan" id="kobo.2119.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2120.1">a: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2121.1">float</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2122.1">, b: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2123.1">float</span></span><span class="koboSpan" id="kobo.2124.1">) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2125.1">float</span></span><span class="koboSpan" id="kobo.2126.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2127.1">return</span></span><span class="koboSpan" id="kobo.2128.1"> (a**</span><span class="hljs-number"><span class="koboSpan" id="kobo.2129.1">2</span></span><span class="koboSpan" id="kobo.2130.1"> + b**</span><span class="hljs-number"><span class="koboSpan" id="kobo.2131.1">2</span></span><span class="koboSpan" id="kobo.2132.1">) ** </span><span class="hljs-number"><span class="koboSpan" id="kobo.2133.1">0.5</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2134.1">
     We can run
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2135.1">
      mypy
     </span>
    </code>
    <span class="koboSpan" id="kobo.2136.1">
     again:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.2137.1">$ mypy simple_function_annotated.py 
Success: no issues found in 1 source file
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2138.1">
     Excellent – now the function is annotated, and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2139.1">
      mypy
     </span>
    </code>
    <span class="koboSpan" id="kobo.2140.1">
     runs successfully.
    </span>
    <span class="koboSpan" id="kobo.2140.2">
     Let us try out some function calls:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-built_in"><span class="koboSpan" id="kobo.2141.1">print</span></span><span class="koboSpan" id="kobo.2142.1">(hypothenuse(</span><span class="hljs-number"><span class="koboSpan" id="kobo.2143.1">3</span></span><span class="koboSpan" id="kobo.2144.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.2145.1">4</span></span><span class="koboSpan" id="kobo.2146.1">))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2147.1"># This is fine</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.2148.1">print</span></span><span class="koboSpan" id="kobo.2149.1">(hypothenuse(</span><span class="hljs-number"><span class="koboSpan" id="kobo.2150.1">3.5</span></span><span class="koboSpan" id="kobo.2151.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.2152.1">4.9</span></span><span class="koboSpan" id="kobo.2153.1">))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2154.1"># This is also fine</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.2155.1">print</span></span><span class="koboSpan" id="kobo.2156.1">(hypothenuse(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2157.1">complex</span></span><span class="koboSpan" id="kobo.2158.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.2159.1">1</span></span><span class="koboSpan" id="kobo.2160.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.2161.1">2</span></span><span class="koboSpan" id="kobo.2162.1">), </span><span class="hljs-number"><span class="koboSpan" id="kobo.2163.1">10</span></span><span class="koboSpan" id="kobo.2164.1">))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2165.1"># Type checker error</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2166.1">
     The first two calls are fine, but the last one generates an error:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.2167.1">$ mypy mypy_src/simple_function_annotated.py
mypy_src/simple_function_annotated.py:10:
    error: Argument 1 to "hypothenuse" has incompatible
    type "complex"; expected "float"  [arg-type]
Found 1 error in 1 file (checked 1 source file)
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2168.1">
     Mypy is informing us that passing a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2169.1">
      complex
     </span>
    </code>
    <span class="koboSpan" id="kobo.2170.1">
     where a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2171.1">
      float
     </span>
    </code>
    <span class="koboSpan" id="kobo.2172.1">
     is required is not okay.
    </span>
    <span class="koboSpan" id="kobo.2172.2">
     The two types are not compatible.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2173.1">
     Let us try a slightly more complex example (no pun intended):
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2174.1"># mypy_src/case.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2175.1">from</span></span><span class="koboSpan" id="kobo.2176.1"> collections.abc </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2177.1">import</span></span><span class="koboSpan" id="kobo.2178.1"> Iterable
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2179.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2180.1">title</span></span><span class="koboSpan" id="kobo.2181.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2182.1">names: Iterable[</span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2183.1">str</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2184.1">]</span></span><span class="koboSpan" id="kobo.2185.1">) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2186.1">list</span></span><span class="koboSpan" id="kobo.2187.1">[</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2188.1">str</span></span><span class="koboSpan" id="kobo.2189.1">]:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2190.1">return</span></span><span class="koboSpan" id="kobo.2191.1"> [name.title() </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2192.1">for</span></span><span class="koboSpan" id="kobo.2193.1"> name </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2194.1">in</span></span><span class="koboSpan" id="kobo.2195.1"> names]
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2196.1">print</span></span><span class="koboSpan" id="kobo.2197.1">(title([</span><span class="hljs-string"><span class="koboSpan" id="kobo.2198.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2199.1">ALICE"</span></span><span class="koboSpan" id="kobo.2200.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.2201.1">"bob"</span></span><span class="koboSpan" id="kobo.2202.1">]))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2203.1"># ['Alice', 'Bob'] - mypy OK</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.2204.1">print</span></span><span class="koboSpan" id="kobo.2205.1">(title([</span><span class="hljs-string"><span class="koboSpan" id="kobo.2206.1">b"ALICE"</span></span><span class="koboSpan" id="kobo.2207.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.2208.1">b"bob"</span></span><span class="koboSpan" id="kobo.2209.1">]))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2210.1"># [b'Alice', b'Bob'] - mypy ERR</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2211.1">
     The above function applies title-casing to each string in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2212.1">
      names
     </span>
    </code>
    <span class="koboSpan" id="kobo.2213.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2213.2">
     First, we call it once, with the strings
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2214.1">
      "ALICE"
     </span>
    </code>
    <span class="koboSpan" id="kobo.2215.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2216.1">
      "bob"
     </span>
    </code>
    <span class="koboSpan" id="kobo.2217.1">
     , and then we call it with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2218.1">
      bytes
     </span>
    </code>
    <span class="koboSpan" id="kobo.2219.1">
     objects
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2220.1">
      b"ALICE"
     </span>
    </code>
    <span class="koboSpan" id="kobo.2221.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2222.1">
      b"bob"
     </span>
    </code>
    <span class="koboSpan" id="kobo.2223.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2223.2">
     Both calls succeed because both the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2224.1">
      str
     </span>
    </code>
    <span class="koboSpan" id="kobo.2225.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2226.1">
      bytes
     </span>
    </code>
    <span class="koboSpan" id="kobo.2227.1">
     objects have
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2228.1">
      title()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2229.1">
     methods.
    </span>
    <span class="koboSpan" id="kobo.2229.2">
     However, running
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2230.1">
      mypy
     </span>
    </code>
    <span class="koboSpan" id="kobo.2231.1">
     yields the following result:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.2232.1">$ mypy mypy_src/case.py
mypy_src/case.py:10:
    error: List item 0 has incompatible type "bytes";
    expected "str"  [list-item]
mypy_src/case.py:10:
    error: List item 1 has incompatible type "bytes";
    expected "str"  [list-item]
Found 2 errors in 1 file (checked 1 source file)
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2233.1">
     Once again, Mypy is
    </span>
    <a id="_idIndexMarker1123">
    </a>
    <span class="koboSpan" id="kobo.2234.1">
     pointing out the incompatibility of two types – this time,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2235.1">
      str
     </span>
    </code>
    <span class="koboSpan" id="kobo.2236.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2237.1">
      bytes
     </span>
    </code>
    <span class="koboSpan" id="kobo.2238.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2238.2">
     We can easily fix this, by either amending the second call or changing the type annotation on the function.
    </span>
    <span class="koboSpan" id="kobo.2238.3">
     Let us do the latter:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2239.1"># mypy_src/case.fixed.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2240.1">from</span></span><span class="koboSpan" id="kobo.2241.1"> collections.abc </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2242.1">import</span></span><span class="koboSpan" id="kobo.2243.1"> Iterable
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2244.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2245.1">title</span></span><span class="koboSpan" id="kobo.2246.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2247.1">names: Iterable[</span></span><span class="code-highlight"><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.2248.1">str</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.2249.1"> | </span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.2250.1">bytes</span></strong></span><span class="hljs-params"><span class="koboSpan" id="kobo.2251.1">]</span></span><span class="koboSpan" id="kobo.2252.1">) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2253.1">list</span></span><span class="koboSpan" id="kobo.2254.1">[</span><span class="code-highlight"><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.2255.1">str</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2256.1"> | </span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.2257.1">bytes</span></strong></span><span class="koboSpan" id="kobo.2258.1">]:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2259.1">return</span></span><span class="koboSpan" id="kobo.2260.1"> [name.title() </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2261.1">for</span></span><span class="koboSpan" id="kobo.2262.1"> name </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2263.1">in</span></span><span class="koboSpan" id="kobo.2264.1"> names]
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2265.1">print</span></span><span class="koboSpan" id="kobo.2266.1">(title([</span><span class="hljs-string"><span class="koboSpan" id="kobo.2267.1">"ALICE"</span></span><span class="koboSpan" id="kobo.2268.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.2269.1">"bob"</span></span><span class="koboSpan" id="kobo.2270.1">]))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2271.1"># ['Alice', 'Bob'] - mypy OK</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.2272.1">print</span></span><span class="koboSpan" id="kobo.2273.1">(title([</span><span class="hljs-string"><span class="koboSpan" id="kobo.2274.1">b"ALICE"</span></span><span class="koboSpan" id="kobo.2275.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.2276.1">b"bob"</span></span><span class="koboSpan" id="kobo.2277.1">]))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2278.1"># [b'Alice', b'Bob'] - mypy OK</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2279.1">
     Now, we use the union of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2280.1">
      str
     </span>
    </code>
    <span class="koboSpan" id="kobo.2281.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2282.1">
      bytes
     </span>
    </code>
    <span class="koboSpan" id="kobo.2283.1">
     types in the annotation, and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2284.1">
      mypy
     </span>
    </code>
    <span class="koboSpan" id="kobo.2285.1">
     runs successfully.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2286.1">
     Our advice is to install Mypy and run it against any existing codebase you might have.
    </span>
    <span class="koboSpan" id="kobo.2286.2">
     Try to introduce type annotations gradually and use Mypy to check the correctness of your code.
    </span>
    <span class="koboSpan" id="kobo.2286.3">
     This exercise will help you to acquire familiarity with type hints, and it will also benefit your code.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-327">
    <span class="koboSpan" id="kobo.2287.1">
     Some useful resources
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.2288.1">
     We would recommend reading through (or at least skimming) all the PEPs we listed at the beginning of the chapter.
    </span>
    <span class="koboSpan" id="kobo.2288.2">
     We also recommend studying the various resources we pointed out along the way, some of which are listed below for your convenience:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2289.1">
      Python Typing Documentation:
     </span>
    </li>
   </ul>
   <p class="normal-one">
    <a href="https://typing.readthedocs.io/en/latest/">
     <span class="url">
      <span class="koboSpan" id="kobo.2290.1">
       https://typing.readthedocs.io/en/latest/
      </span>
     </span>
    </a>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2291.1">
      Static Typing with Python:
     </span>
    </li>
   </ul>
   <p class="normal-one">
    <a href="https://docs.python.org/3/library/typing.html">
     <span class="url">
      <span class="koboSpan" id="kobo.2292.1">
       https://docs.python.org/3/library/typing.html
      </span>
     </span>
    </a>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2293.1">
      Abstract Base Classes:
     </span>
    </li>
   </ul>
   <p class="normal-one">
    <a href="https://docs.python.org/3/library/abc.html">
     <span class="url">
      <span class="koboSpan" id="kobo.2294.1">
       https://docs.python.org/3/library/abc.html
      </span>
     </span>
    </a>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2295.1">
      Abstract Base Classes for Containers:
     </span>
    </li>
   </ul>
   <p class="normal-one">
    <a href="https://docs.python.org/3/library/collections.abc.html">
     <span class="url">
      <span class="koboSpan" id="kobo.2296.1">
       https://docs.python.org/3/library/collections.abc.html
      </span>
     </span>
    </a>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2297.1">
      The Mypy Documentation:
     </span>
    </li>
   </ul>
   <p class="normal-one">
    <a href="https://mypy.readthedocs.io/en/stable/">
     <span class="url">
      <span class="koboSpan" id="kobo.2298.1">
       https://mypy.readthedocs.io/en/stable/
      </span>
     </span>
    </a>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2299.1">
     There is also a quick
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.2300.1">
      Python Types Intro
     </span>
    </em>
    <span class="koboSpan" id="kobo.2301.1">
     section in the FastAPI framework documentation, which we would recommend reading:
    </span>
    <a href="https://fastapi.tiangolo.com/python-types/">
     <span class="url">
      <span class="koboSpan" id="kobo.2302.1">
       https://fastapi.tiangolo.com/python-types/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.2303.1">
     .
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.2304.1">
       FastAPI
      </span>
     </strong>
     <span class="koboSpan" id="kobo.2305.1">
      is a modern
     </span>
     <a id="_idIndexMarker1124">
     </a>
     <span class="koboSpan" id="kobo.2306.1">
      Python framework for building APIs.
     </span>
     <em class="chapterRef">
      <span class="koboSpan" id="kobo.2307.1">
       Chapter 14
      </span>
     </em>
     <span class="koboSpan" id="kobo.2308.1">
      ,
     </span>
     <em class="chapterRef">
      <span class="koboSpan" id="kobo.2309.1">
       Introduction to API Development
      </span>
     </em>
     <span class="koboSpan" id="kobo.2310.1">
      , is dedicated to it, so we recommend at least reading the introduction on types prior to reading that chapter.
     </span>
    </p>
   </div>
   <h1 class="heading-1" id="_idParaDest-328">
    <span class="koboSpan" id="kobo.2311.1">
     Summary
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.2312.1">
     In this chapter, we have explored the topic of type hints in Python.
    </span>
    <span class="koboSpan" id="kobo.2312.2">
     We started by understanding Python’s native approach to types and walked through the history of type hints, which were introduced gradually from Python 3 and are still evolving.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2313.1">
     We investigated the benefits of type hints and then learned how to annotate functions, classes, and variables.
    </span>
    <span class="koboSpan" id="kobo.2313.2">
     We explored the basics and discussed the main built-in types, but also ventured through more advanced topics, such as generics, abstract base classes, and protocols.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2314.1">
     Finally, we offered a few examples of how to use the most popular static type checker, Mypy, to gradually introduce typing in a codebase and finished the chapter with a short recap of the most useful resources for you to further investigate this subject.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2315.1">
     This brings us to the end of the theory part of the book.
    </span>
    <span class="koboSpan" id="kobo.2315.2">
     The remaining chapters are project-oriented and take a more practical approach, starting with an introduction to data science.
    </span>
    <span class="koboSpan" id="kobo.2315.3">
     The knowledge acquired by studying the chapters in the first part should be sufficient to support you while you make your way through the next chapters.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-329">
    <span class="koboSpan" id="kobo.2316.1">
     Join our community on Discord
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.2317.1">
     Join our community’s Discord space for discussions with the authors and other readers:
    </span>
   </p>
   <p class="normal">
    <a href="Chapter_12.xhtml">
     <span class="url">
      <span class="koboSpan" id="kobo.2318.1">
       https://discord.com/invite/uaKmaz7FEC
      </span>
     </span>
    </a>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2319.1">
     <img alt="img" src="../Images/QR_Code119001106417026468.png"/>
    </span>
   </p>
  </div>
 </body></html>