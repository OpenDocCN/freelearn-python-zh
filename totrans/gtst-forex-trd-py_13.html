<html><head></head><body>
<div id="_idContainer159">
<h1 class="chapter-number" id="_idParaDest-214"><a id="_idTextAnchor215"/><span class="koboSpan" id="kobo.1.1">13</span></h1>
<h1 id="_idParaDest-215"><a id="_idTextAnchor216"/><span class="koboSpan" id="kobo.2.1">To Trade or Not to Trade – Performance Analysis</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In the previous chapter, we developed a simple trend-following strategy, ran a backtest, and generated our first equity curve (a visual representation of the strategy’s profits and losses over time). </span><span class="koboSpan" id="kobo.3.2">Intuitively, we already know that equity curves of profitable strategies should grow over time, and the steeper the growth, the better. </span><span class="koboSpan" id="kobo.3.3">At first glance, our strategy looks fit to this requirement, but of course, it would be better to be able to base our opinions on facts and not just emotions. </span><span class="koboSpan" id="kobo.3.4">So, we would like to have a quantitative metric that could be used as an indicator: if its value is greater than something, then the strategy is good. </span><span class="koboSpan" id="kobo.3.5">If it’s less, then the strategy is </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">not good.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">As you might have already guessed, such a single, universal metric does not exist. </span><span class="koboSpan" id="kobo.5.2">A trading strategy is quite a complex structure, even if its logic seems simplistic, and its performance should be analyzed from different standpoints. </span><span class="koboSpan" id="kobo.5.3">We are interested in knowing not only how much money a particular strategy could make but also how much we should put at stake as risk capital in order to achieve such a gain. </span><span class="koboSpan" id="kobo.5.4">Similarly, not only the overall net profit but also how profits (and losses!) are distributed over time matters. </span><span class="koboSpan" id="kobo.5.5">Ultimately, we want to be sure that the strategy is indeed tradable: that trades placed in the real market will be more or less similar to those emulated during </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">the backtest.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">This chapter is very far from an ultimate guide on trading strategy performance analysis: this subject is so vast that it would require a separate book, if not multiple books. </span><span class="koboSpan" id="kobo.7.2">Here, we are going to consider the most essential metrics and see how they help assess a strategy’s performance and make our main decision – whether to give this strategy a try or set </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">it aside.</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">In this chapter, you will learn about the </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">following topics:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.11.1">Trade analysis</span></span></li>
<li><span class="koboSpan" id="kobo.12.1">Average trade and </span><span class="No-Break"><span class="koboSpan" id="kobo.13.1">trading costs</span></span></li>
<li><span class="koboSpan" id="kobo.14.1">Measuring performance – alpha and </span><span class="No-Break"><span class="koboSpan" id="kobo.15.1">beta revisited</span></span></li>
<li><span class="koboSpan" id="kobo.16.1">Net profit versus buy </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">and hold</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.18.1">Drawdown</span></span></li>
<li><span class="koboSpan" id="kobo.19.1">The power of leverage – or how much do I need to </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">trade it?</span></span></li>
</ul>
<h1 id="_idParaDest-216"><a id="_idTextAnchor217"/><span class="koboSpan" id="kobo.21.1">Trade analysis</span></h1>
<p><span class="koboSpan" id="kobo.22.1">As you </span><a id="_idIndexMarker865"/><span class="koboSpan" id="kobo.23.1">remember, the difference between trading and investing is, broadly speaking, the number of trades. </span><span class="koboSpan" id="kobo.23.2">If you buy and hold a position in an asset for 1 year or more, then it’s an investment. </span><span class="koboSpan" id="kobo.23.3">If you buy, sell, and buy the same asset or different assets again multiple times during the same year, </span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">it’s trading.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.25.1">Why a year?</span></p>
<p class="callout"><span class="koboSpan" id="kobo.26.1">According to most tax laws, holding a position for 1 year and 1 day qualifies it as an investment, and any profit resulting from this activity is taxed at a discounted rate. </span><span class="koboSpan" id="kobo.26.2">If you held the position even for 1 day less than 1 year, it will be considered trading and the resulting profit will be taxed at a full income tax rate. </span><span class="koboSpan" id="kobo.26.3">This rule is applicable mostly to equities trading, but at least it makes sense to use 1 year as a </span><span class="No-Break"><span class="koboSpan" id="kobo.27.1">reference term.</span></span></p>
<p><span class="koboSpan" id="kobo.28.1">So, the strategy is actively opening and closing positions during a given period. </span><span class="koboSpan" id="kobo.28.2">Regardless of the total net profit (or loss) for the entire period, first, and above all, we are interested in how much each trade contributes to the overall result – at least </span><span class="No-Break"><span class="koboSpan" id="kobo.29.1">on average.</span></span></p>
<h1 id="_idParaDest-217"><a id="_idTextAnchor218"/><span class="koboSpan" id="kobo.30.1">Average trade and trading costs</span></h1>
<p><span class="koboSpan" id="kobo.31.1">Average</span><a id="_idIndexMarker866"/><span class="koboSpan" id="kobo.32.1"> trade is one </span><a id="_idIndexMarker867"/><span class="koboSpan" id="kobo.33.1">of the most essential yet simplistic metrics: it’s just the ratio of the total net profit achieved by a strategy to the total number </span><span class="No-Break"><span class="koboSpan" id="kobo.34.1">of trades:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer126">
<span class="koboSpan" id="kobo.35.1"><img alt="" src="image/Formula_B19145_13_001.jpg"/></span>
</div>
</div>
<p><span class="koboSpan" id="kobo.36.1">Why do we need </span><span class="No-Break"><span class="koboSpan" id="kobo.37.1">this value?</span></span></p>
<p><span class="koboSpan" id="kobo.38.1">To answer this question, we should recall a few things from </span><span class="No-Break"><span class="koboSpan" id="kobo.39.1">theory again.</span></span></p>
<p><span class="koboSpan" id="kobo.40.1">In </span><a href="B19145_03.xhtml#_idTextAnchor044"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.41.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.42.1">, </span><em class="italic"><span class="koboSpan" id="kobo.43.1">FX Market Overview from a Developer’s Standpoint</span></em><span class="koboSpan" id="kobo.44.1">, we considered how markets are organized and learned that there is always a difference between the price at which we can buy and at which we can sell – the spread. </span><span class="koboSpan" id="kobo.44.2">Regardless of the type of orders used in the strategy, the market price must move for the distance of the spread </span><em class="italic"><span class="koboSpan" id="kobo.45.1">at the very least</span></em><span class="koboSpan" id="kobo.46.1">, only to move the newly opened position from a negative zone to </span><span class="No-Break"><span class="koboSpan" id="kobo.47.1">break even.</span></span></p>
<p><span class="koboSpan" id="kobo.48.1">Besides that, don’t forget the various issues with liquidity and order execution that were considered in </span><a href="B19145_10.xhtml#_idTextAnchor171"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.49.1">Chapter 10</span></em></span></a><span class="koboSpan" id="kobo.50.1">, </span><em class="italic"><span class="koboSpan" id="kobo.51.1">Types of Orders and Their Simulation in Python</span></em><span class="koboSpan" id="kobo.52.1">. </span><span class="koboSpan" id="kobo.52.2">If the strategy uses market orders, it may encounter slippage, partial fills, or rejects (depending on the TIF specification, see the </span><em class="italic"><span class="koboSpan" id="kobo.53.1">Time in force: better control over execution</span></em><span class="koboSpan" id="kobo.54.1"> section in the same chapter). </span><span class="koboSpan" id="kobo.54.2">In any case, it’s just another cost of trading that should be covered by </span><span class="No-Break"><span class="koboSpan" id="kobo.55.1">the strategy.</span></span></p>
<p><span class="koboSpan" id="kobo.56.1">Finally, don’t forget that the broker and the trading venue will charge commissions, and this cost should also be absorbed by the </span><span class="No-Break"><span class="koboSpan" id="kobo.57.1">trading strategy.</span></span></p>
<p><span class="koboSpan" id="kobo.58.1">So, the average trade value should be greater than the sum of the spread, typical slippage, and broker and/or trading venue commissions. </span><span class="koboSpan" id="kobo.58.2">Only in this case can the strategy make money in the </span><span class="No-Break"><span class="koboSpan" id="kobo.59.1">real market.</span></span></p>
<p><span class="koboSpan" id="kobo.60.1">Let’s now look at real figures, based on the performance of the strategy that we developed in the previous chapter. </span><span class="koboSpan" id="kobo.60.2">In order to obtain the necessary values, let’s add a few lines to the strategy code. </span><span class="koboSpan" id="kobo.60.3">First, we will add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.61.1">list_of_orders</span></strong><span class="koboSpan" id="kobo.62.1"> property to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.63.1">tradingSystemMetadata</span></strong><span class="koboSpan" id="kobo.64.1"> class – here, we will save all executed orders. </span><span class="koboSpan" id="kobo.64.2">Next, in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.65.1">processOrders()</span></strong><span class="koboSpan" id="kobo.66.1"> function, we will add the following statement right after the </span><strong class="source-inline"><span class="koboSpan" id="kobo.67.1">if order['Status'] == '</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.68.1">Executed':</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.69.1"> line:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.70.1">
System.list_of_orders.append(order)</span></pre>
<p><span class="koboSpan" id="kobo.71.1">And finally, at the very end of the backtester’s code, right after </span><strong class="source-inline"><span class="koboSpan" id="kobo.72.1">plt.plot(System.equity_timeseries)</span></strong><span class="koboSpan" id="kobo.73.1"> (see the </span><em class="italic"><span class="koboSpan" id="kobo.74.1">Backtesting platform with historical data feed</span></em><span class="koboSpan" id="kobo.75.1"> section of </span><a href="B19145_11.xhtml#_idTextAnchor186"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.76.1">Chapter 11</span></em></span></a><span class="koboSpan" id="kobo.77.1">, </span><em class="italic"><span class="koboSpan" id="kobo.78.1">Backtesting and </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.79.1">Theoretical Performance</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">):</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.81.1">
total_trades = len(System.list_of_orders)
print("Total trades:", total_trades)
print("Average trade:", System.equity / total_trades)</span></pre>
<p><span class="koboSpan" id="kobo.82.1">If you run the backtesting now again with the same data (AUD/USD daily), you should get 37 total trades and an average trade value of </span><span class="No-Break"><span class="koboSpan" id="kobo.83.1">about 79.41.</span></span></p>
<p><span class="koboSpan" id="kobo.84.1">Is that good </span><span class="No-Break"><span class="koboSpan" id="kobo.85.1">or bad?</span></span></p>
<p><span class="koboSpan" id="kobo.86.1">Regarding the number of trades, generally speaking, the greater the number, the better. </span><span class="koboSpan" id="kobo.86.2">Why? </span><span class="koboSpan" id="kobo.86.3">Because all metrics used to assess the strategy performance are based on statistics, and statistics work best if the size of the dataset is significant. </span><span class="koboSpan" id="kobo.86.4">I am not going to go into</span><a id="_idIndexMarker868"/><span class="koboSpan" id="kobo.87.1"> details </span><a id="_idIndexMarker869"/><span class="koboSpan" id="kobo.88.1">about the exact meaning of </span><em class="italic"><span class="koboSpan" id="kobo.89.1">significant</span></em><span class="koboSpan" id="kobo.90.1"> in this sense, as it’s too complex a subject, but for simplicity’s sake, let’s take it for granted that we need at least 20-30 data points so that statistical metrics start making sense. </span><span class="koboSpan" id="kobo.90.2">From this standpoint, 37 trades </span><span class="No-Break"><span class="koboSpan" id="kobo.91.1">look satisfactory.</span></span></p>
<p><span class="koboSpan" id="kobo.92.1">Now the average trade itself. </span><span class="koboSpan" id="kobo.92.2">Its value is 79.41, but in which units? </span><span class="koboSpan" id="kobo.92.3">Dollars? </span><span class="koboSpan" id="kobo.92.4">Australian dollars? </span><span class="koboSpan" id="kobo.92.5">Maybe </span><span class="No-Break"><span class="koboSpan" id="kobo.93.1">something else?</span></span></p>
<p><span class="koboSpan" id="kobo.94.1">Here, we should recall that spot FX is always traded on margin (see the </span><em class="italic"><span class="koboSpan" id="kobo.95.1">Trade mechanics: again some terminology</span></em><span class="koboSpan" id="kobo.96.1"> section of </span><a href="B19145_03.xhtml#_idTextAnchor044"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.97.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.98.1">, </span><em class="italic"><span class="koboSpan" id="kobo.99.1">FX Market Overview from a Developer’s Standpoint</span></em><span class="koboSpan" id="kobo.100.1">) and that the value of 1 pip in money depends on the trading size. </span><span class="koboSpan" id="kobo.100.2">In the </span><em class="italic"><span class="koboSpan" id="kobo.101.1">Trading application with live data feed</span></em><span class="koboSpan" id="kobo.102.1"> section of </span><a href="B19145_11.xhtml#_idTextAnchor186"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.103.1">Chapter 11</span></em></span></a><span class="koboSpan" id="kobo.104.1">, </span><em class="italic"><span class="koboSpan" id="kobo.105.1">Backtesting and Theoretical Performance</span></em><span class="koboSpan" id="kobo.106.1">, we already pointed out that for backtesting, we may want to use a trading size that will make 1 pip equal to $1. </span><span class="koboSpan" id="kobo.106.2">This is why we chose a trading size of 10,000 for the backtest and now we can interpret the average trade as </span><em class="italic"><span class="koboSpan" id="kobo.107.1">79.41 pips</span></em><span class="koboSpan" id="kobo.108.1">. </span><span class="koboSpan" id="kobo.108.2">Then, we can finally decide whether it’s sufficient </span><span class="No-Break"><span class="koboSpan" id="kobo.109.1">or not.</span></span></p>
<p><span class="koboSpan" id="kobo.110.1">Let’s sum up all trading costs that we mentioned here: spread, slippage, </span><span class="No-Break"><span class="koboSpan" id="kobo.111.1">and commission.</span></span></p>
<h2 id="_idParaDest-218"><a id="_idTextAnchor219"/><span class="koboSpan" id="kobo.112.1">Spread</span></h2>
<p><span class="koboSpan" id="kobo.113.1">Spreads depend </span><a id="_idIndexMarker870"/><span class="koboSpan" id="kobo.114.1">on the liquidity provider or the broker (the latter often add their own fees into the spread, such a </span><a id="_idIndexMarker871"/><span class="koboSpan" id="kobo.115.1">practice is called </span><strong class="bold"><span class="koboSpan" id="kobo.116.1">markup</span></strong><span class="koboSpan" id="kobo.117.1">), and also on the time of day. </span><span class="koboSpan" id="kobo.117.2">An industry average spread for AUD/USD today is between 0.5 and 2 pips with rare increases to 5 and more, typically before economic news. </span><span class="koboSpan" id="kobo.117.3">So, it would be safe to suppose that we should subtract 1 pip from the average trade value to account for the market spread during a somewhat less liquid time (remember that our strategy places orders at midnight, when liquidity is thinner than during regular </span><span class="No-Break"><span class="koboSpan" id="kobo.118.1">work hours).</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.119.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.120.1">If you use the unmodified </span><strong class="source-inline"><span class="koboSpan" id="kobo.121.1">emulateBrokerExecution</span></strong><span class="koboSpan" id="kobo.122.1"> function in the backtester code, then a spread of 0.5 pips is already included there. </span><span class="koboSpan" id="kobo.122.2">You can modify it every time you run a new strategy with a new currency pair, or remove it completely and subtract the spread from the resulting </span><span class="No-Break"><span class="koboSpan" id="kobo.123.1">average trade.</span></span></p>
<h2 id="_idParaDest-219"><a id="_idTextAnchor220"/><span class="koboSpan" id="kobo.124.1">Slippage</span></h2>
<p><span class="koboSpan" id="kobo.125.1">Slippage mostly</span><a id="_idIndexMarker872"/><span class="koboSpan" id="kobo.126.1"> depends on the trading size and liquidity in the order book. </span><span class="koboSpan" id="kobo.126.2">If the sizes of your orders never exceed top-of-book liquidity, then in the absolute majority of cases, the slippage would be zero. </span><span class="koboSpan" id="kobo.126.3">To get a more precise estimate, we need to analyze the top-of-book data at the time of the trade. </span><span class="koboSpan" id="kobo.126.4">If you trade with a retail broker, then you may have a hard time getting order book data – normally, brokers do not publish it. </span><span class="koboSpan" id="kobo.126.5">If you use a broker as an STP to get access directly to a trading venue, then you will get at least top-of-book data with volumes. </span><span class="koboSpan" id="kobo.126.6">Let’s do an estimate using </span><span class="No-Break"><span class="koboSpan" id="kobo.127.1">LMAX data.</span></span></p>
<p><span class="koboSpan" id="kobo.128.1">Our strategy places trades only at end of the day, which is midnight (New York time, EST/EDT). </span><span class="koboSpan" id="kobo.128.2">This is not the most liquid time, but on average, we can see 50,000 to 200,000 AUD at the top of the book at that time. </span><span class="koboSpan" id="kobo.128.3">So, if your order size doesn’t exceed 50,000 AUD, then you can safely assume that slippage will be negligible. </span><span class="koboSpan" id="kobo.128.4">However, if your order size exceeds 50,000 AUD, then most likely you will experience slippage of up to 1 pip – depending on the actual trading volume. </span><span class="koboSpan" id="kobo.128.5">If the trading size exceeds 500,000 AUD, then the slippage may increase to 2 pips and </span><span class="No-Break"><span class="koboSpan" id="kobo.129.1">even more.</span></span></p>
<p><span class="koboSpan" id="kobo.130.1">Which estimate should we use? </span><span class="koboSpan" id="kobo.130.2">How can you know which trading size you’re going </span><span class="No-Break"><span class="koboSpan" id="kobo.131.1">to use?</span></span></p>
<p><span class="koboSpan" id="kobo.132.1">Let’s again recall that the FX markets are traded on margin. </span><span class="koboSpan" id="kobo.132.2">This means that you don’t need to have the entire amount of money in the broker account to open a position: the broker will provide you with a credit line according to the leverage available according to your status: retail or professional. </span><span class="koboSpan" id="kobo.132.3">If you’re a retail trader, then most likely you will get a 30:1 leverage. </span><span class="koboSpan" id="kobo.132.4">If you’re a professional trader, then higher leverage such as 100:1 is available. </span><span class="koboSpan" id="kobo.132.5">However, as you will see later in this chapter (see the </span><em class="italic"><span class="koboSpan" id="kobo.133.1">The power of leverage – how much do I need to trade it?</span></em><span class="koboSpan" id="kobo.134.1"> section), it is highly unlikely that you’re going to use a leverage greater than 10:1. </span><span class="koboSpan" id="kobo.134.2">Most likely, it is going to be somewhere in the vicinity of 2:1-5:1. </span><span class="koboSpan" id="kobo.134.3">In our example, in order to open a position of 200,000 AUD/USD with a leverage of 10:1, you will need approximately </span><span class="No-Break"><span class="koboSpan" id="kobo.135.1">the following:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer127">
<span class="koboSpan" id="kobo.136.1"><img alt="" src="image/Formula_B19145_13_002.jpg"/></span>
</div>
</div>
<p><span class="koboSpan" id="kobo.137.1">0.6918 is the average rate of AUD/USD for the last 52 weeks (a work year). </span><span class="koboSpan" id="kobo.137.2">In reality, you will need a bit more because the open position should be able to withstand a drawdown (see below in this chapter), but in essence, an estimate of about $15,000 seems adequate. </span><span class="koboSpan" id="kobo.137.3">Without </span><a id="_idIndexMarker873"/><span class="koboSpan" id="kobo.138.1">any intention to count money in your pocket, let me suppose that if you’re a retail trader, then you will hardly open positions with a size greater than 200,000 AUD, so it is safe to suppose that a slippage of 1 pip would provide a sufficient overhead for </span><span class="No-Break"><span class="koboSpan" id="kobo.139.1">our estimate.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.140.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.141.1">The main idea behind all our estimates is to suppose a theoretical worst scenario, something that probably won’t be realized in real trading. </span><span class="koboSpan" id="kobo.141.2">If the strategy is still able to make money on paper after we have accounted for all possible negative impacts, then it is probable that it’s going to make money in </span><span class="No-Break"><span class="koboSpan" id="kobo.142.1">real life.</span></span></p>
<p><span class="koboSpan" id="kobo.143.1">However, if you work with a financial institution, then most likely the average order size can be multiplied at least 10 times, so slippage starts to play quite an important role. </span><span class="koboSpan" id="kobo.143.2">I’d suggest subtracting at least 1 pip per 100,000 in the order size to account for slippage in case trades are placed during an illiquid time such as </span><span class="No-Break"><span class="koboSpan" id="kobo.144.1">at night.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.145.1">Trading size, slippage, and execution</span></p>
<p class="callout"><span class="koboSpan" id="kobo.146.1">In real life, orders whose size exceeds the top of the book are seldom sent directly to the market as market orders to avoid execution at unwanted prices. </span><span class="koboSpan" id="kobo.146.2">If you really need to fill a large order, consider rewriting the </span><strong class="source-inline"><span class="koboSpan" id="kobo.147.1">processOrders()</span></strong><span class="koboSpan" id="kobo.148.1"> function, splitting a large order into parts, and</span><a id="_idIndexMarker874"/><span class="koboSpan" id="kobo.149.1"> executing them one </span><span class="No-Break"><span class="koboSpan" id="kobo.150.1">by one.</span></span></p>
<h2 id="_idParaDest-220"><a id="_idTextAnchor221"/><span class="koboSpan" id="kobo.151.1">Commission</span></h2>
<p><span class="koboSpan" id="kobo.152.1">The last part of </span><a id="_idIndexMarker875"/><span class="koboSpan" id="kobo.153.1">trading costs seems to be the commission. </span><span class="koboSpan" id="kobo.153.2">Typically, a trading venue charges about 25-40 </span><strong class="bold"><span class="koboSpan" id="kobo.154.1">dollars per million</span></strong><span class="koboSpan" id="kobo.155.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.156.1">DPM</span></strong><span class="koboSpan" id="kobo.157.1">). </span><span class="koboSpan" id="kobo.157.2">How</span><a id="_idIndexMarker876"/><span class="koboSpan" id="kobo.158.1"> do we recalculate it into dollar value for </span><span class="No-Break"><span class="koboSpan" id="kobo.159.1">our trades?</span></span></p>
<p><span class="koboSpan" id="kobo.160.1">The trading size used in the backtest is 10,000 AUD/USD. </span><span class="koboSpan" id="kobo.160.2">This means we buy or sell 10,000 Australian dollars or (using an average rate of AUD/USD of about 0.6920) approximately 7000 US dollars. </span><span class="koboSpan" id="kobo.160.3">With a rate of 30 DPM, the broker commission would be around $0.21. </span><span class="koboSpan" id="kobo.160.4">Now, if we recall that in our backtest $1 equals 1 pip, we can say that the commission makes about </span><span class="No-Break"><span class="koboSpan" id="kobo.161.1">0.21 pips.</span></span></p>
<p><span class="koboSpan" id="kobo.162.1">So far, we calculated a realistic estimate for the spread, slippage, and broker commission. </span><span class="koboSpan" id="kobo.162.2">Is this all we should </span><span class="No-Break"><span class="koboSpan" id="kobo.163.1">account for?</span></span></p>
<p><span class="koboSpan" id="kobo.164.1">No, there is another cost that is very frequently forgotten by many traders: </span><span class="No-Break"><span class="koboSpan" id="kobo.165.1">overnight swaps.</span></span></p>
<h2 id="_idParaDest-221"><a id="_idTextAnchor222"/><span class="koboSpan" id="kobo.166.1">Overnight swaps</span></h2>
<p><span class="koboSpan" id="kobo.167.1">In the </span><em class="italic"><span class="koboSpan" id="kobo.168.1">Economic news</span></em><span class="koboSpan" id="kobo.169.1"> section </span><a id="_idIndexMarker877"/><span class="koboSpan" id="kobo.170.1">of </span><a href="B19145_06.xhtml#_idTextAnchor101"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.171.1">Chapter 6</span></em></span></a><span class="koboSpan" id="kobo.172.1">, </span><em class="italic"><span class="koboSpan" id="kobo.173.1">Basics of Fundamental Analysis and Its Possible Use in FX Trading</span></em><span class="koboSpan" id="kobo.174.1">, we already mentioned one of the most peculiar features of the FX market: the difference in interest rates between the two currencies in a pair. </span><span class="koboSpan" id="kobo.174.2">This difference may be positive and may be negative: for example, if the interest rate of the British pound is 5% per annum and the interest rate of the Japanese yen is 0% per annum, then the difference for GBP/JPY is positive (5%) and the difference for JPY/GBP is </span><span class="No-Break"><span class="koboSpan" id="kobo.175.1">negative (-5%).</span></span></p>
<p><span class="koboSpan" id="kobo.176.1">Once you hold an open position overnight (past the NY bank settlement time), you either receive interest (if the difference is positive) or pay the interest (if the difference is negative). </span><span class="koboSpan" id="kobo.176.2">In our example, if you buy GBP/JPY (or sell JPY/GBP, which is the same), then you receive interest, and if you sell GBP/JPY or buy JPY/GBP, then you </span><span class="No-Break"><span class="koboSpan" id="kobo.177.1">pay interest.</span></span></p>
<p><span class="koboSpan" id="kobo.178.1">With our present strategy, we hold AUD/USD for multiple days, sometimes long, sometimes short, so we may receive or pay the interest depending on the side of the position and the current difference in </span><span class="No-Break"><span class="koboSpan" id="kobo.179.1">interest rates.</span></span></p>
<p><span class="koboSpan" id="kobo.180.1">We have to account for these overnight fees, frequently</span><a id="_idIndexMarker878"/><span class="koboSpan" id="kobo.181.1"> referred to </span><span class="No-Break"><span class="koboSpan" id="kobo.182.1">as </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.183.1">swaps</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.184.1">.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.185.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.186.1">Do not confuse swaps with financial instruments, which we discussed in the </span><em class="italic"><span class="koboSpan" id="kobo.187.1">FX instruments</span></em><span class="koboSpan" id="kobo.188.1"> section in </span><a href="B19145_03.xhtml#_idTextAnchor044"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.189.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.190.1">, </span><em class="italic"><span class="koboSpan" id="kobo.191.1">FX Market Overview from a </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.192.1">Developer’s Standpoint</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.193.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.194.1">However, it is surprisingly quite a non-trivial task. </span><span class="koboSpan" id="kobo.194.2">There are two </span><span class="No-Break"><span class="koboSpan" id="kobo.195.1">problems here:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.196.1">First, these swap rates change over time because they are based on the interest rates set by central banks (usually referred to as the base rate) and these rates also change. </span><span class="koboSpan" id="kobo.196.2">So, we need historical data for base rates at the </span><span class="No-Break"><span class="koboSpan" id="kobo.197.1">very least.</span></span></li>
<li><span class="koboSpan" id="kobo.198.1">Second, each broker adds their own premium, or markup, to the base rate, and, in most cases, this premium is publicly unknown. </span><span class="koboSpan" id="kobo.198.2">Given that brokers do not store historical data for their overnight swap rates, it becomes problematic to reliably restore the history of interest rates differential in a </span><span class="No-Break"><span class="koboSpan" id="kobo.199.1">currency pair.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.200.1">Nevertheless, we</span><a id="_idIndexMarker879"/><span class="koboSpan" id="kobo.201.1"> can make an attempt. </span><span class="koboSpan" id="kobo.201.2">First, we need historical interest rate data. </span><span class="koboSpan" id="kobo.201.3">It’s a bit less widespread than historical market data, but there are a few resources that provide it free of charge – for example, </span><a href="https://Global-rates.com"><span class="koboSpan" id="kobo.202.1">Global-rates.com</span></a><span class="koboSpan" id="kobo.203.1">. </span><span class="koboSpan" id="kobo.203.2">Go to </span><a href="https://www.global-rates.com/en/interest-rates/central-banks/central-banks.aspx"><span class="koboSpan" id="kobo.204.1">https://www.global-rates.com/en/interest-rates/central-banks/central-banks.aspx</span></a><span class="koboSpan" id="kobo.205.1"> and there you will find links to the Federal Reserve and the Reserve Bank of Australia interest </span><span class="No-Break"><span class="koboSpan" id="kobo.206.1">rate data.</span></span></p>
<p><span class="koboSpan" id="kobo.207.1">As you can see, the data changes quite infrequently, no more than once a month – because decisions on interest rates are made by a special central bank committee and normally they have monthly meetings. </span><span class="koboSpan" id="kobo.207.2">We don’t need to be absolutely precise in our calculations: in the long run, the overnight swap is going to be just a fraction of a pip, so it’s sufficient to sync data for up to a month. </span><span class="koboSpan" id="kobo.207.3">I copied the data into an Excel sheet and here’s what </span><span class="No-Break"><span class="koboSpan" id="kobo.208.1">I got:</span></span></p>
<table class="T---Table" id="table001-3">
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.209.1">RBA</span></strong></span></p>
</td>
<td class="T---Table T---Body T---Body"/>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.210.1">FED</span></strong></span></p>
</td>
<td class="T---Table T---Body T---Body"/>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.211.1">Rates difference</span></strong></span></p>
</td>
</tr>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.212.1">12/06/22</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.213.1">3.10%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.214.1">12/14/22</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.215.1">4.50%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="koboSpan" id="kobo.216.1">-</span><span class="No-Break"><span class="koboSpan" id="kobo.217.1">1.40%</span></span></p>
</td>
</tr>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.218.1">11/01/22</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.219.1">2.85%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.220.1">11/02/22</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.221.1">4.00%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="koboSpan" id="kobo.222.1">-</span><span class="No-Break"><span class="koboSpan" id="kobo.223.1">1.15%</span></span></p>
</td>
</tr>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.224.1">10/04/22</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.225.1">2.60%</span></span></p>
</td>
<td class="T---Table T---Body T---Body"/>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.226.1">3.25%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="koboSpan" id="kobo.227.1">-</span><span class="No-Break"><span class="koboSpan" id="kobo.228.1">0.65%</span></span></p>
</td>
</tr>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.229.1">09/06/22</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.230.1">2.35%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.231.1">09/21/22</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.232.1">3.25%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="koboSpan" id="kobo.233.1">-</span><span class="No-Break"><span class="koboSpan" id="kobo.234.1">0.90%</span></span></p>
</td>
</tr>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.235.1">08/02/22</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.236.1">1.85%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.237.1">07/28/22</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.238.1">2.50%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="koboSpan" id="kobo.239.1">-</span><span class="No-Break"><span class="koboSpan" id="kobo.240.1">0.65%</span></span></p>
</td>
</tr>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.241.1">07/06/22</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.242.1">1.35%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.243.1">06/15/22</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.244.1">1.75%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="koboSpan" id="kobo.245.1">-</span><span class="No-Break"><span class="koboSpan" id="kobo.246.1">0.40%</span></span></p>
</td>
</tr>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.247.1">06/07/22</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.248.1">0.85%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.249.1">05/04/22</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.250.1">1.00%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="koboSpan" id="kobo.251.1">-</span><span class="No-Break"><span class="koboSpan" id="kobo.252.1">0.15%</span></span></p>
</td>
</tr>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.253.1">05/03/22</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.254.1">0.35%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.255.1">03/16/22</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.256.1">0.50%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="koboSpan" id="kobo.257.1">-</span><span class="No-Break"><span class="koboSpan" id="kobo.258.1">0.15%</span></span></p>
</td>
</tr>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.259.1">11/03/20</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.260.1">0.10%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.261.1">03/15/20</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.262.1">0.25%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="koboSpan" id="kobo.263.1">-</span><span class="No-Break"><span class="koboSpan" id="kobo.264.1">0.15%</span></span></p>
</td>
</tr>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.265.1">03/19/20</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.266.1">0.25%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.267.1">03/03/20</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.268.1">1.25%</span></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="koboSpan" id="kobo.269.1">-</span><span class="No-Break"><span class="koboSpan" id="kobo.270.1">1.00%</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.271.1">Table 13.1 – Historical central banks’ interest rates for RBA and the Fed</span></p>
<p><span class="koboSpan" id="kobo.272.1">If we subtract the </span><a id="_idIndexMarker880"/><span class="koboSpan" id="kobo.273.1">former from the latter, we will get the difference in interest rates for the AUD/USD currency pair. </span><span class="koboSpan" id="kobo.273.2">We can see that it changes from as low as 0.15% to 1.4%. </span><span class="koboSpan" id="kobo.273.3">Now, the question is how much it means </span><span class="No-Break"><span class="koboSpan" id="kobo.274.1">in money.</span></span></p>
<p><span class="koboSpan" id="kobo.275.1">To calculate that, we should first recall that a year has 365 days and then we should divide the value in the last column of the table by 365. </span><span class="koboSpan" id="kobo.275.2">Let’s do it with the </span><span class="No-Break"><span class="koboSpan" id="kobo.276.1">latest value:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer128">
<span class="koboSpan" id="kobo.277.1"><img alt="" src="image/Formula_B19145_13_003.jpg"/></span>
</div>
</div>
<p><span class="koboSpan" id="kobo.278.1">Next, we should multiply the daily interest by the trading size. </span><span class="koboSpan" id="kobo.278.2">In our example, we trade 10,000 AUD, so we multiply the daily interest by 10,000. </span><span class="koboSpan" id="kobo.278.3">Finally, if we want to know the swap value in USD, not AUD, we should multiply the result by the actual exchange rate, that is, the market price </span><span class="No-Break"><span class="koboSpan" id="kobo.279.1">of AUD/USD.</span></span></p>
<p><span class="koboSpan" id="kobo.280.1">I think here it’s become obvious that swap rates change not only because central banks change their interest rates but also because the market price of the currency pair changes. </span><span class="koboSpan" id="kobo.280.2">For our rough estimate, we may use the 52-week average of the spot price, and thus multiply the final result by 0.68. </span><span class="koboSpan" id="kobo.280.3">Thus, in our example, </span><span class="No-Break"><span class="koboSpan" id="kobo.281.1">we get:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer129">
<span class="koboSpan" id="kobo.282.1"><img alt="" src="image/Formula_B19145_13_004.jpg"/></span>
</div>
</div>
<p><span class="koboSpan" id="kobo.283.1">How do we interpret </span><span class="No-Break"><span class="koboSpan" id="kobo.284.1">this result?</span></span></p>
<p><span class="koboSpan" id="kobo.285.1">This result means that if we buy 10,000 AUD/USD and hold this position overnight, then we pay 26 cents. </span><span class="koboSpan" id="kobo.285.2">Looks negligible, but only because a trading size of 10,000 is quite small: don’t forget </span><a id="_idIndexMarker881"/><span class="koboSpan" id="kobo.286.1">that the FX market is traded on margin, and even with a retail leverage of 30:1, you need only $300 in the account to be able to open a position of $10,000. </span><span class="koboSpan" id="kobo.286.2">Quite often, retail trades are placed with 100,000 of base currency and institutional trades normally </span><em class="italic"><span class="koboSpan" id="kobo.287.1">start</span></em><span class="koboSpan" id="kobo.288.1"> with 1,000,000. </span><span class="koboSpan" id="kobo.288.2">If you hold a position of 100,000 overnight, you pay $2.6 – not much, but if you do it every night, then it gradually grows into a considerable amount. </span><span class="koboSpan" id="kobo.288.3">And if you trade as an institutional trader, then you start paying $26 every night, averaging $130 a week, and </span><span class="No-Break"><span class="koboSpan" id="kobo.289.1">so on.</span></span></p>
<p><span class="koboSpan" id="kobo.290.1">Alright, I hear you saying, </span><em class="italic"><span class="koboSpan" id="kobo.291.1">“it’s clear that we pay when we are long AUD/USD, but if we’re short, we should receive an equivalent amount every night, </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.292.1">shouldn’t we?”</span></em></span></p>
<p><span class="koboSpan" id="kobo.293.1">Unfortunately, real life is (as always) more complicated than any theory. </span><span class="koboSpan" id="kobo.293.2">The issue is that every broker adds their own markup to the overnight rate. </span><span class="koboSpan" id="kobo.293.3">There’s no surprise in it: brokers also have to borrow to provide you with a credit line, and they can’t borrow directly from a central bank, so for them, the interest rate will already be higher. </span><span class="koboSpan" id="kobo.293.4">This means that the negative values become even more negative, and positive values become... </span><span class="koboSpan" id="kobo.293.5">well, in most cases also negative! </span><span class="koboSpan" id="kobo.293.6">I encourage you to check the overnight swap rates with any broker, compare them with our calculated </span><em class="italic"><span class="koboSpan" id="kobo.294.1">fair values</span></em><span class="koboSpan" id="kobo.295.1">, and see the difference. </span><span class="koboSpan" id="kobo.295.2">In reality, as of today (at the beginning of January 2023), the best overnight swap rate I could find was -$5.30 for a long position and -$0.30 for a short one for a trading size of </span><span class="No-Break"><span class="koboSpan" id="kobo.296.1">100,000 AUD/USD.</span></span></p>
<p><span class="koboSpan" id="kobo.297.1">Also, keep in mind that on Wednesday, you will be charged extra because we trade spot, and the spot is delivered on a T+2 basis (again, see the </span><em class="italic"><span class="koboSpan" id="kobo.298.1">FX instruments</span></em><span class="koboSpan" id="kobo.299.1"> section of </span><a href="B19145_03.xhtml#_idTextAnchor044"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.300.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.301.1">, </span><em class="italic"><span class="koboSpan" id="kobo.302.1">FX Market Overview From a </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.303.1">Developer’s Standpoint</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.304.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.305.1">We can use an estimate that in the absolutely worst case, we pay about 0.5 pips for the luxury of holding the position overnight. </span><span class="koboSpan" id="kobo.305.2">Pips – because, I hope, you remember that using a trading size of 10,000 AUD/USD allows us to interpret the result both in dollars and pips, which is very convenient for </span><span class="No-Break"><span class="koboSpan" id="kobo.306.1">further calculations.</span></span></p>
<p><span class="koboSpan" id="kobo.307.1">And now! </span><span class="koboSpan" id="kobo.307.2">Finally! </span><span class="koboSpan" id="kobo.307.3">Let’s sum up all costs we’ve discussed </span><span class="No-Break"><span class="koboSpan" id="kobo.308.1">so far.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.309.1">Trading Costs Calculation</span></p>
<p class="callout"><span class="koboSpan" id="kobo.310.1">Total trading costs per trade = 1 pip spread + 1 pip slippage + 0.21 pips commission + 0.5 pips overnight swap * 20 days in position on average = </span><span class="No-Break"><span class="koboSpan" id="kobo.311.1">2.71 pips.</span></span></p>
<p><span class="koboSpan" id="kobo.312.1">This is what we must subtract from the average trade, and if the remainder is still positive, then our strategy can make money, at least </span><span class="No-Break"><span class="koboSpan" id="kobo.313.1">on paper.</span></span></p>
<p><span class="koboSpan" id="kobo.314.1">Obviously, now</span><a id="_idIndexMarker882"/><span class="koboSpan" id="kobo.315.1"> we can see that an average trade of 79 pips is huge because all the costs, even taken with excess, hardly make 15% of the expected return. </span><span class="koboSpan" id="kobo.315.2">This is a truly great result, and it’s achievable only for long-term </span><span class="No-Break"><span class="koboSpan" id="kobo.316.1">trading strategies.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.317.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.318.1">There is a strong relationship between the strategy’s position in the market, the average trade value for such a strategy, and the volatility of its returns: the longer we stay in a position, the greater the average trade we can expect and, unfortunately, the volatility of returns for such a strategy will also be greater. </span><span class="koboSpan" id="kobo.318.2">This fact can even be proven mathematically as a theorem, but it lies way beyond the scope of this book, so I suggest taking it for granted – </span><span class="No-Break"><span class="koboSpan" id="kobo.319.1">for now.</span></span></p>
<p><span class="koboSpan" id="kobo.320.1">All in all, the trading costs analysis shows that our strategy is very robust in this regard (and believe me, most strategies you will develop yourself in the future won’t pass even this first test – but it’s normal for research and development). </span><span class="No-Break"><span class="koboSpan" id="kobo.321.1">What’s next?</span></span></p>
<p><span class="koboSpan" id="kobo.322.1">Next, we have to revisit a couple of concepts that we already mentioned earlier in </span><span class="No-Break"><span class="koboSpan" id="kobo.323.1">the book.</span></span></p>
<h1 id="_idParaDest-222"><a id="_idTextAnchor223"/><span class="koboSpan" id="kobo.324.1">Measuring performance – alpha and beta revisited</span></h1>
<p><span class="koboSpan" id="kobo.325.1">In </span><a href="B19145_09.xhtml#_idTextAnchor152"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.326.1">Chapter 9</span></em></span></a><span class="koboSpan" id="kobo.327.1">, </span><em class="italic"><span class="koboSpan" id="kobo.328.1">Trading Strategies and Their Core Elements</span></em><span class="koboSpan" id="kobo.329.1">, we touched on two important concepts </span><a id="_idIndexMarker883"/><span class="koboSpan" id="kobo.330.1">that are mainly used to analyze performance: alpha and beta. </span><span class="koboSpan" id="kobo.330.2">Back then, we looked at them from a slightly different angle: we were in search of opportunities to systematically make profits in the market and considered all these metrics only from that standpoint. </span><span class="koboSpan" id="kobo.330.3">However, don’t forget that they were originally suggested for evaluating the performance of an investment – if put in simple words, to judge whether the investment outperforms or </span><em class="italic"><span class="koboSpan" id="kobo.331.1">beats</span></em><span class="koboSpan" id="kobo.332.1"> the market </span><span class="No-Break"><span class="koboSpan" id="kobo.333.1">or not.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.334.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.335.1">I will intentionally simplify the concepts of both alpha and beta and avoid exact mathematical formulae for their calculation. </span><span class="koboSpan" id="kobo.335.2">Using them requires good command of the theory of probabilities, and I know from my past experience that it’s the very domain of mathematics that causes a lot of confusion to many readers. </span><span class="koboSpan" id="kobo.335.3">So forgive me, math purists, but I just want these relatively complex subjects to be understood </span><span class="No-Break"><span class="koboSpan" id="kobo.336.1">by everyone.</span></span></p>
<p><span class="koboSpan" id="kobo.337.1">Let’s start with alpha as the more common and </span><span class="No-Break"><span class="koboSpan" id="kobo.338.1">simplistic metric.</span></span></p>
<h2 id="_idParaDest-223"><a id="_idTextAnchor224"/><span class="koboSpan" id="kobo.339.1">Alpha in investment and trading</span></h2>
<p><span class="koboSpan" id="kobo.340.1">Alpha stands for</span><a id="_idIndexMarker884"/><span class="koboSpan" id="kobo.341.1"> excess</span><a id="_idIndexMarker885"/><span class="koboSpan" id="kobo.342.1"> returns; this is the very metric that ultimately says whether you beat the market within the given </span><span class="No-Break"><span class="koboSpan" id="kobo.343.1">time span.</span></span></p>
<p><span class="koboSpan" id="kobo.344.1">Normally, in capital management, alpha is calculated according to the </span><span class="No-Break"><span class="koboSpan" id="kobo.345.1">following formula:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer130">
<span class="koboSpan" id="kobo.346.1"><img alt="" src="image/Formula_B19145_13_005.jpg"/></span>
</div>
</div>
<p><span class="koboSpan" id="kobo.347.1">Here, R means the return of a portfolio, </span><span class="koboSpan" id="kobo.348.1"><img alt="" src="image/Formula_B19145_13_006.png"/></span><span class="koboSpan" id="kobo.349.1"> denotes the</span><a id="_idIndexMarker886"/><span class="koboSpan" id="kobo.350.1"> so-called </span><em class="italic"><span class="koboSpan" id="kobo.351.1">risk-free</span></em><span class="koboSpan" id="kobo.352.1"> rate of return, </span><span class="koboSpan" id="kobo.353.1"><img alt="" src="image/Formula_B19145_13_007.png"/></span><span class="koboSpan" id="kobo.354.1"> represents the return of the benchmark, and </span><span class="koboSpan" id="kobo.355.1"><img alt="" src="image/Formula_B19145_13_008.png"/></span><span class="koboSpan" id="kobo.356.1"> represents the volatility of returns (see </span><span class="No-Break"><span class="koboSpan" id="kobo.357.1">the following).</span></span></p>
<p><span class="No-Break"><span class="koboSpan" id="kobo.358.1">Sounds complex?</span></span></p>
<p><span class="koboSpan" id="kobo.359.1">Well, it’s not as complex as it seems at first glance. </span><span class="koboSpan" id="kobo.359.2">We only need to understand the meaning of each element of this </span><span class="No-Break"><span class="koboSpan" id="kobo.360.1">equation better.</span></span></p>
<p><span class="koboSpan" id="kobo.361.1">Return, in general, refers to how much money was gained (or lost) per given period of time. </span><span class="koboSpan" id="kobo.361.2">Normally, in portfolio investment, returns are estimated by month and by year, in active trading, we also consider daily returns – in some cases, even more granular </span><span class="No-Break"><span class="koboSpan" id="kobo.362.1">time frames.</span></span></p>
<p><span class="koboSpan" id="kobo.363.1">It should be intuitively clear with the return of an investment or a trading strategy, but what is a </span><em class="italic"><span class="koboSpan" id="kobo.364.1">risk-free</span></em><span class="koboSpan" id="kobo.365.1"> rate of return? </span><span class="koboSpan" id="kobo.365.2">How anything in trading or investing can </span><span class="No-Break"><span class="koboSpan" id="kobo.366.1">be risk-free?</span></span></p>
<p><span class="koboSpan" id="kobo.367.1">Usually, a risk-free</span><a id="_idIndexMarker887"/><span class="koboSpan" id="kobo.368.1"> return is</span><a id="_idIndexMarker888"/><span class="koboSpan" id="kobo.369.1"> understood as the difference between the current respective bond yield and the inflation rate. </span><span class="koboSpan" id="kobo.369.2">For investments in the United States and denominated in US dollars, we can use Treasury bonds. </span><span class="koboSpan" id="kobo.369.3">For investments in the Eurozone and denominated in the euro, usually, German bonds are considered a </span><em class="italic"><span class="koboSpan" id="kobo.370.1">risk-free</span></em><span class="koboSpan" id="kobo.371.1"> investment, and </span><span class="No-Break"><span class="koboSpan" id="kobo.372.1">so on.</span></span></p>
<p><span class="koboSpan" id="kobo.373.1">And now we again see a </span><em class="italic"><span class="koboSpan" id="kobo.374.1">benchmark</span></em><span class="koboSpan" id="kobo.375.1">. </span><span class="koboSpan" id="kobo.375.2">As we discussed in the </span><em class="italic"><span class="koboSpan" id="kobo.376.1">Using currency rates as benchmark</span></em><span class="koboSpan" id="kobo.377.1"> section of </span><a href="B19145_09.xhtml#_idTextAnchor152"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.378.1">Chapter 9</span></em></span></a><span class="koboSpan" id="kobo.379.1">, </span><em class="italic"><span class="koboSpan" id="kobo.380.1">Trading Strategies and Their Core Elements</span></em><span class="koboSpan" id="kobo.381.1">, finding a proper benchmark for FX trading can be quite problematic. </span><span class="koboSpan" id="kobo.381.2">Therefore, we normally use the change in the price of the currency pair itself to see whether our strategy could do it any better than </span><span class="No-Break"><span class="koboSpan" id="kobo.382.1">the market.</span></span></p>
<p><span class="koboSpan" id="kobo.383.1">If we want to illustrate all of this as simplistically as possible, we could use a linear model of both the market growth and returns with an assumption that </span><span class="koboSpan" id="kobo.384.1"><img alt="" src="image/Formula_B19145_13_009.png"/></span><span class="koboSpan" id="kobo.385.1"> = 0 (no free lunch ever, right?) and </span><span class="koboSpan" id="kobo.386.1"><img alt="" src="image/Formula_B19145_13_010.png"/></span><span class="koboSpan" id="kobo.387.1"> = 1 (the volatility of returns is exactly the same as the volatility of the market itself). </span><span class="koboSpan" id="kobo.387.2">If the </span><em class="italic"><span class="koboSpan" id="kobo.388.1">x</span></em><span class="koboSpan" id="kobo.389.1">-axis represents time, for example, days, and the </span><em class="italic"><span class="koboSpan" id="kobo.390.1">y</span></em><span class="koboSpan" id="kobo.391.1">-axis represents the return, then alpha happens to be the difference between the values of the </span><span class="No-Break"><span class="koboSpan" id="kobo.392.1">two functions:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer136">
<span class="koboSpan" id="kobo.393.1"><img alt="Figure 13.1 – Simplified model of returns and alpha" src="image/B19145_13_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.394.1">Figure 13.1 – Simplified model of returns and alpha</span></p>
<p><span class="koboSpan" id="kobo.395.1">To make the story</span><a id="_idIndexMarker889"/><span class="koboSpan" id="kobo.396.1"> about </span><a id="_idIndexMarker890"/><span class="koboSpan" id="kobo.397.1">alpha complete, I should note that sometimes, especially analyzing the performance of active trading strategies rather than investment, alpha is supposed to be derived from the classical form of a </span><span class="No-Break"><span class="koboSpan" id="kobo.398.1">linear equation:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer137">
<span class="koboSpan" id="kobo.399.1"><img alt="" src="image/Formula_B19145_13_011.jpg"/></span>
</div>
</div>
<p><span class="koboSpan" id="kobo.400.1">As in our previous example, this is a very, very simplified model that shows how returns grow over time. </span><span class="koboSpan" id="kobo.400.2">If we assume that the market itself grows linearly and its growth rate is equal to 1 (y = x), then any </span><span class="koboSpan" id="kobo.401.1"><img alt="" src="image/Formula_B19145_13_012.png"/></span><span class="koboSpan" id="kobo.402.1"> &gt; 1 would mean that the investment’s returns grow faster than the market and that the investment actually beats the market. </span><span class="koboSpan" id="kobo.402.2">Similarly, any </span><span class="koboSpan" id="kobo.403.1"><img alt="" src="image/Formula_B19145_13_013.png"/></span><span class="koboSpan" id="kobo.404.1">&lt; 1 would mean that the investment’s returns grow slower than the market itself. </span><span class="koboSpan" id="kobo.404.2">In this case, even if this investment brings some money to an account, it does not beat the market: you can potentially make more by simply buying the market itself (stocks, commodities, and even currencies can constitute the respective market benchmark). </span><span class="koboSpan" id="kobo.404.3">This simple </span><a id="_idIndexMarker891"/><span class="koboSpan" id="kobo.405.1">assumption</span><a id="_idIndexMarker892"/><span class="koboSpan" id="kobo.406.1"> is shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.407.1">following figure:</span></span></p>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.408.1"><img alt="" src="image/B19145_13_02.png"/></span><span class="koboSpan" id="kobo.409.1">Figure 13.2 – Linear functions with </span><span class="koboSpan" id="kobo.410.1"><img alt="" src="image/Formula_B19145_13_014.png"/></span><span class="koboSpan" id="kobo.411.1"> = 1, </span><span class="koboSpan" id="kobo.412.1"><img alt="" src="image/Formula_B19145_13_015.png"/></span><span class="koboSpan" id="kobo.413.1"> &gt; 1, and </span><span class="koboSpan" id="kobo.414.1"><img alt="" src="image/Formula_B19145_13_016.png"/></span><span class="koboSpan" id="kobo.415.1"> &lt; 1</span></p>
<p><span class="koboSpan" id="kobo.416.1">The benchmark (the market) is assumed to grow at a rate of </span><span class="koboSpan" id="kobo.417.1"><img alt="" src="image/Formula_B19145_13_017.png"/></span><span class="koboSpan" id="kobo.418.1"> = 1 (black line). </span><span class="koboSpan" id="kobo.418.2">Any function with </span><span class="koboSpan" id="kobo.419.1"><img alt="" src="image/Formula_B19145_13_017.png"/></span><span class="koboSpan" id="kobo.420.1"> &gt; 1 (in our example </span><span class="koboSpan" id="kobo.421.1"><img alt="" src="image/Formula_B19145_13_019.png"/></span><span class="koboSpan" id="kobo.422.1"> = 2) will grow faster, and any function with </span><span class="koboSpan" id="kobo.423.1"><img alt="" src="image/Formula_B19145_13_020.png"/></span><span class="koboSpan" id="kobo.424.1"> &lt; 1 (</span><span class="koboSpan" id="kobo.425.1"><img alt="" src="image/Formula_B19145_13_021.png"/></span><span class="koboSpan" id="kobo.426.1"> = 0.5 in our example) will grow slower than </span><span class="No-Break"><span class="koboSpan" id="kobo.427.1">the benchmark.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.428.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.429.1">Such an interpretation of alpha is not common and cannot be used in classical capital management</span><a id="_idIndexMarker893"/><span class="koboSpan" id="kobo.430.1"> theory. </span><span class="koboSpan" id="kobo.430.2">I provided</span><a id="_idIndexMarker894"/><span class="koboSpan" id="kobo.431.1"> this unusual point of view only for </span><span class="No-Break"><span class="koboSpan" id="kobo.432.1">your reference.</span></span></p>
<p><span class="koboSpan" id="kobo.433.1">Now, I hope it’s more or less clear with alpha in all its aspects, but what </span><span class="No-Break"><span class="koboSpan" id="kobo.434.1">about beta?</span></span></p>
<h2 id="_idParaDest-224"><a id="_idTextAnchor225"/><span class="koboSpan" id="kobo.435.1">Beta</span></h2>
<p><span class="koboSpan" id="kobo.436.1">Beta is a</span><a id="_idIndexMarker895"/><span class="koboSpan" id="kobo.437.1"> measure of the volatility of returns. </span><span class="koboSpan" id="kobo.437.2">Remember </span><a id="_idIndexMarker896"/><span class="koboSpan" id="kobo.438.1">the analogy of a road trip that we discussed in the </span><em class="italic"><span class="koboSpan" id="kobo.439.1">Beta – earn on volatility</span></em><span class="koboSpan" id="kobo.440.1"> section of </span><a href="B19145_09.xhtml#_idTextAnchor152"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.441.1">Chapter 9</span></em></span></a><span class="koboSpan" id="kobo.442.1">, </span><em class="italic"><span class="koboSpan" id="kobo.443.1">Trading Strategies and Their Core Elements</span></em><span class="koboSpan" id="kobo.444.1">? </span><span class="koboSpan" id="kobo.444.2">Not only the fact that we were able to get from point A to point B matters but also how we got there, so how straight or winding the path was. </span><span class="koboSpan" id="kobo.444.3">If we want to illustrate this comparison, we can again use a linear function as the example of a straight path and the same linear function with a periodical component added to it as the example of a path with </span><span class="No-Break"><span class="koboSpan" id="kobo.445.1">extra volatility:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer149">
<span class="koboSpan" id="kobo.446.1"><img alt="Figure 13.3 – Linear function with and without added volatility" src="image/B19145_13_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.447.1">Figure 13.3 – Linear function with and without added volatility</span></p>
<p><span class="koboSpan" id="kobo.448.1">We can see that both functions </span><em class="italic"><span class="koboSpan" id="kobo.449.1">get</span></em><span class="koboSpan" id="kobo.450.1"> from point </span><strong class="bold"><span class="koboSpan" id="kobo.451.1">(0,0)</span></strong><span class="koboSpan" id="kobo.452.1"> to </span><strong class="bold"><span class="koboSpan" id="kobo.453.1">(2,2)</span></strong><span class="koboSpan" id="kobo.454.1">, but the linear one does it </span><em class="italic"><span class="koboSpan" id="kobo.455.1">faster</span></em><span class="koboSpan" id="kobo.456.1">. </span><span class="koboSpan" id="kobo.456.2">Now, let’s imagine that both graphs illustrate the return on a certain investment. </span><span class="koboSpan" id="kobo.456.3">Then, the </span><em class="italic"><span class="koboSpan" id="kobo.457.1">x</span></em><span class="koboSpan" id="kobo.458.1">-axis </span><a id="_idIndexMarker897"/><span class="koboSpan" id="kobo.459.1">means time and the </span><em class="italic"><span class="koboSpan" id="kobo.460.1">y</span></em><span class="koboSpan" id="kobo.461.1">-axis means the</span><a id="_idIndexMarker898"/><span class="koboSpan" id="kobo.462.1"> amount of money earned or lost during a certain period. </span><span class="koboSpan" id="kobo.462.2">Therefore, when we see that the curve is growing, this means that money is accumulating in the account, and when we see it going down, this means that the account is </span><span class="No-Break"><span class="koboSpan" id="kobo.463.1">losing money.</span></span></p>
<p><span class="koboSpan" id="kobo.464.1">Now, let’s take periodical snapshots of the activity in our sample investments and measure </span><span class="No-Break"><span class="koboSpan" id="kobo.465.1">two metrics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.466.1">How much the value changed from the time of the previous snapshot until the time of the </span><span class="No-Break"><span class="koboSpan" id="kobo.467.1">current snapshot</span></span></li>
<li><span class="koboSpan" id="kobo.468.1">How much the value changed during the snapshot inside a given period </span><span class="No-Break"><span class="koboSpan" id="kobo.469.1">of time</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.470.1">In the following figure, I zoomed in and marked the corresponding values on </span><span class="No-Break"><span class="koboSpan" id="kobo.471.1">the graph:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer150">
<span class="koboSpan" id="kobo.472.1"><img alt="Figure 13.4 – Returns and their volatility in a simplified model" src="image/B19145_13_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.473.1">Figure 13.4 – Returns and their volatility in a simplified model</span></p>
<p><span class="koboSpan" id="kobo.474.1">In this example, we </span><a id="_idIndexMarker899"/><span class="koboSpan" id="kobo.475.1">check the return (</span><strong class="bold"><span class="koboSpan" id="kobo.476.1">R</span></strong><span class="koboSpan" id="kobo.477.1">) and volatility (</span><strong class="bold"><span class="koboSpan" id="kobo.478.1">V</span></strong><span class="koboSpan" id="kobo.479.1">) at </span><a id="_idIndexMarker900"/><span class="koboSpan" id="kobo.480.1">every integer value (1, 2, 3, and </span><span class="No-Break"><span class="koboSpan" id="kobo.481.1">so on).</span></span></p>
<p><span class="koboSpan" id="kobo.482.1">Let the difference between the previous value of the return (measured at 0) and the current value (1) be </span><strong class="bold"><span class="koboSpan" id="kobo.483.1">ΔR</span></strong><span class="koboSpan" id="kobo.484.1">. </span><span class="koboSpan" id="kobo.484.2">In our </span><span class="No-Break"><span class="koboSpan" id="kobo.485.1">example, </span><span class="koboSpan" id="kobo.486.1"><img alt="" src="image/Formula_B19145_13_022.png"/></span><span class="koboSpan" id="kobo.487.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.488.1">Then we notice that the return first grows (from 0 to approximately 1.3) then falls down to about -0.65, then grows again to 1.6, then falls down to -0.15, and, finally, grows back to about 1.4. </span><span class="koboSpan" id="kobo.488.2">So, during the snapshot period from 0 to 1, the function already made several extremes, both maximums and minimums. </span><span class="koboSpan" id="kobo.488.3">Let </span><strong class="bold"><span class="koboSpan" id="kobo.489.1">ΔV</span></strong><span class="koboSpan" id="kobo.490.1"> be the difference between a local maximum and the next local minimum, which immediately follows this maximum (not vice versa!) In our </span><span class="No-Break"><span class="koboSpan" id="kobo.491.1">example, </span><span class="koboSpan" id="kobo.492.1"><img alt="" src="image/Formula_B19145_13_023.png"/></span><span class="koboSpan" id="kobo.493.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.494.1">The value of </span><strong class="bold"><span class="koboSpan" id="kobo.495.1">ΔV</span></strong><span class="koboSpan" id="kobo.496.1"> is called </span><strong class="bold"><span class="koboSpan" id="kobo.497.1">drawdown</span></strong><span class="koboSpan" id="kobo.498.1"> and is one of the key performance metrics of any investment or </span><span class="No-Break"><span class="koboSpan" id="kobo.499.1">trading</span></span><span class="No-Break"><a id="_idIndexMarker901"/></span><span class="No-Break"><span class="koboSpan" id="kobo.500.1"> strategy.</span></span></p>
<p><span class="koboSpan" id="kobo.501.1">So, how can we now estimate (very roughly, but anyway) the beta of </span><span class="No-Break"><span class="koboSpan" id="kobo.502.1">the returns?</span></span></p>
<p><span class="koboSpan" id="kobo.503.1">We are interested in the ratio of the return </span><span class="No-Break"><span class="koboSpan" id="kobo.504.1">to drawdown:</span></span></p>
<p><span class="koboSpan" id="kobo.505.1"><img alt="" src="image/Formula_B19145_13_024.png"/></span></p>
<p><span class="koboSpan" id="kobo.506.1">We want the value of this ratio to be as high as possible. </span><span class="koboSpan" id="kobo.506.2">If we have a choice between two or more strategies, then we prefer the one for which the ratio of return to drawdown </span><span class="No-Break"><span class="koboSpan" id="kobo.507.1">is greater.</span></span></p>
<p><span class="koboSpan" id="kobo.508.1">In our example, the obvious choice would be a </span><em class="italic"><span class="koboSpan" id="kobo.509.1">linear</span></em><span class="koboSpan" id="kobo.510.1"> strategy because it delivers only gains without a single loss down the road. </span><span class="koboSpan" id="kobo.510.2">This means that this strategy has a value of ΔV = 0 and thus the ratio in question is infinite. </span><span class="koboSpan" id="kobo.510.3">Of course, it never happens in reality, but it gives a clear idea about the utopian goal of </span><span class="No-Break"><span class="koboSpan" id="kobo.511.1">any investor.</span></span></p>
<p><span class="koboSpan" id="kobo.512.1">The second strategy features a ratio of return to a drawdown of about 0.77. </span><span class="koboSpan" id="kobo.512.2">This means that although</span><a id="_idIndexMarker902"/><span class="koboSpan" id="kobo.513.1"> this strategy makes money, the investor </span><a id="_idIndexMarker903"/><span class="koboSpan" id="kobo.514.1">will have quite a few desperate moments until it gets to the positive zone: the volatility of returns of this strategy is greater than the </span><span class="No-Break"><span class="koboSpan" id="kobo.515.1">return itself!</span></span></p>
<p><span class="koboSpan" id="kobo.516.1">The approach that we have just considered is, of course, a very simplified one. </span><span class="koboSpan" id="kobo.516.2">In practical applications, beta is normally calculated as the volatility of returns compared not to returns on the same strategy or investment but to a benchmark, as with alpha and other investment performance metrics. </span><span class="koboSpan" id="kobo.516.3">Besides that, it would be more correct to evaluate not only the ratio of return to drawdown for the entire investment or trading period but to also calculate them first for a number of smaller periods, then average them, and finally calculate the dispersion of these values, thus understanding how this ratio changes over time or how consistent the volatility of returns is for this given strategy </span><span class="No-Break"><span class="koboSpan" id="kobo.517.1">or investment.</span></span></p>
<p><span class="koboSpan" id="kobo.518.1">However, I promised to keep things simple in this book and not require specific knowledge from the theory of probabilities, so we won’t go that far during our first acquaintance with performance metrics. </span><span class="koboSpan" id="kobo.518.2">If you want to deep-dive into this very interesting and very complex subject, I recommend starting with a framework article at Investopedia (</span><a href="https://www.investopedia.com/investing/measure-mutual-fund-risk"><span class="koboSpan" id="kobo.519.1">https://www.investopedia.com/investing/measure-mutual-fund-risk</span></a><span class="koboSpan" id="kobo.520.1">) and following all links provided there: very quickly, you will find yourself in the jungles of means, standard deviations, variance, and covariance, but in the long run, it’s going to be quite a </span><span class="No-Break"><span class="koboSpan" id="kobo.521.1">rewarding experience.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.522.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.523.1">The suggested estimate of beta is not the same beta used in the classical capital management formula earlier in this chapter. </span><span class="koboSpan" id="kobo.523.2">It is introduced here only to explain the essence of the volatility of returns and better understand the basic performance metrics </span><span class="No-Break"><span class="koboSpan" id="kobo.524.1">discussed next.</span></span></p>
<p><span class="koboSpan" id="kobo.525.1">Alright, we have refreshed our memory about both alpha and beta, but did you notice that so far we have been talking about alpha as a performance metric for investments? </span><span class="koboSpan" id="kobo.525.2">Is there any difference between investing and trading, and can we still use alpha to assess the performance of </span><span class="No-Break"><span class="koboSpan" id="kobo.526.1">trading strategies?</span></span></p>
<p><span class="koboSpan" id="kobo.527.1">The main difference between the two is that investing assumes buying an asset and holding it for a long time, while trading means that you actively buy and sell the asset during the same period of time. </span><span class="koboSpan" id="kobo.527.2">Therefore, with investment, we can potentially outperform the </span><a id="_idIndexMarker904"/><span class="koboSpan" id="kobo.528.1">market by choosing assets that perform </span><a id="_idIndexMarker905"/><span class="koboSpan" id="kobo.529.1">better than the broad market (by an index or any other benchmark), and in active trading, we try to outperform the asset itself by holding it for shorter periods </span><span class="No-Break"><span class="koboSpan" id="kobo.530.1">of time.</span></span></p>
<p><span class="koboSpan" id="kobo.531.1">The main problem with using both alpha- and beta-related metrics to analyze the performance of trading strategies is the lack of relevant benchmarks suitable for this purpose. </span><span class="koboSpan" id="kobo.531.2">We already mentioned this problem in </span><a href="B19145_09.xhtml#_idTextAnchor152"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.532.1">Chapter 9</span></em></span></a><span class="koboSpan" id="kobo.533.1">, </span><em class="italic"><span class="koboSpan" id="kobo.534.1">Trading Strategies and Their Core Elements</span></em><span class="koboSpan" id="kobo.535.1">, and pointed out that it would make more sense to use specific FX benchmarks to assess the performance of FX </span><span class="No-Break"><span class="koboSpan" id="kobo.536.1">trading strategies.</span></span></p>
<p><span class="koboSpan" id="kobo.537.1">However, sometimes it is really difficult to find a suitable benchmark to compare apples to apples: for example, if we try to assess the performance of an intraday strategy that opens and closes multiple positions per day ideally, we should compare it to a similar intraday strategy used as a reference, but finding such a reference will be quite a challenge by itself! </span><span class="koboSpan" id="kobo.537.2">So, what do we do in order to adequately assess the performance of a trading strategy given that we don’t have a benchmark </span><span class="No-Break"><span class="koboSpan" id="kobo.538.1">as such?</span></span></p>
<p><span class="koboSpan" id="kobo.539.1">Well, this is why most of the performance metrics used to evaluate the trading strategy performance only use that same performance data, sometimes in conjunction with the asset price data. </span><span class="koboSpan" id="kobo.539.2">These metrics can be considered </span><em class="italic"><span class="koboSpan" id="kobo.540.1">proxies</span></em><span class="koboSpan" id="kobo.541.1"> to </span><em class="italic"><span class="koboSpan" id="kobo.542.1">true alpha</span></em><span class="koboSpan" id="kobo.543.1"> or </span><em class="italic"><span class="koboSpan" id="kobo.544.1">true beta</span></em><span class="koboSpan" id="kobo.545.1">, and if put together, they can give quite a comprehensive analysis, which helps answer the main question </span><a id="_idIndexMarker906"/><span class="koboSpan" id="kobo.546.1">of trading: whether to put</span><a id="_idIndexMarker907"/><span class="koboSpan" id="kobo.547.1"> money at stake with this strategy </span><span class="No-Break"><span class="koboSpan" id="kobo.548.1">or not.</span></span></p>
<p><span class="koboSpan" id="kobo.549.1">Let’s start with metrics that aim at estimating the alpha of a trading </span><span class="No-Break"><span class="koboSpan" id="kobo.550.1">strategy returns.</span></span></p>
<h1 id="_idParaDest-225"><a id="_idTextAnchor226"/><span class="koboSpan" id="kobo.551.1">Net profit versus buy and hold</span></h1>
<p><span class="koboSpan" id="kobo.552.1">This is the</span><a id="_idIndexMarker908"/><span class="koboSpan" id="kobo.553.1"> first thing to check after you have confirmed that the average trade is greater than the required absolute minimum to cover all trading costs. </span><span class="koboSpan" id="kobo.553.2">Buy and hold means that we buy the same quantity of the currency that we use in backtest, hold the position for the entire period of the backtest, and then look at the</span><a id="_idIndexMarker909"/><span class="koboSpan" id="kobo.554.1"> final </span><strong class="bold"><span class="koboSpan" id="kobo.555.1">profit and loss</span></strong><span class="koboSpan" id="kobo.556.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.557.1">PnL</span></strong><span class="koboSpan" id="kobo.558.1">), on the last bar of the price time series. </span><span class="koboSpan" id="kobo.558.2">In our case, we should </span><em class="italic"><span class="koboSpan" id="kobo.559.1">buy</span></em><span class="koboSpan" id="kobo.560.1"> 10,000 AUD/USD, hold it for approximately 3 years, and look at the return from this </span><span class="No-Break"><span class="koboSpan" id="kobo.561.1">single trade.</span></span></p>
<p><span class="koboSpan" id="kobo.562.1">I recommend comparing not only the net profits of the strategy and buy and hold but also the equity curves: this will give us an idea about the change in the equity over time in </span><span class="No-Break"><span class="koboSpan" id="kobo.563.1">both scenarios.</span></span></p>
<p><span class="koboSpan" id="kobo.564.1">Let’s quickly create the equity curve of a buy-and-hold strategy. </span><span class="koboSpan" id="kobo.564.2">As you remember, we isolated the trade logic into a separate function, </span><strong class="source-inline"><span class="koboSpan" id="kobo.565.1">tradeLogic()</span></strong><span class="koboSpan" id="kobo.566.1">, so we only should rewrite the part between the </span><strong class="source-inline"><span class="koboSpan" id="kobo.567.1">Trade logic starts here</span></strong><span class="koboSpan" id="kobo.568.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.569.1">Trade logic ends here</span></strong><span class="koboSpan" id="kobo.570.1"> comments while keeping the rest of the code untouched. </span><span class="koboSpan" id="kobo.570.2">It’s a good idea to make a copy of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.571.1">tradeLogic()</span></strong><span class="koboSpan" id="kobo.572.1"> function first and give it a proper name – for example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.573.1">buyAndHold()</span></strong><span class="koboSpan" id="kobo.574.1">, before making changes to </span><span class="No-Break"><span class="koboSpan" id="kobo.575.1">the code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.576.1">
        if System.market_position == 0:
            close = bar['Close']
            order = {}
            order['Type'] = 'Market'
            order['Price'] = close
            order['Side'] = 'Buy'
            order['Size'] = 10000
            orders_stream.put(order)</span></pre>
<p><span class="koboSpan" id="kobo.577.1">As you can see, the only difference between </span><strong class="source-inline"><span class="koboSpan" id="kobo.578.1">buyAndHold()</span></strong><span class="koboSpan" id="kobo.579.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.580.1">tradeLogic()</span></strong><span class="koboSpan" id="kobo.581.1"> is that we removed all trade logic and replaced it with a single trade placed on the very first bar. </span><span class="koboSpan" id="kobo.581.2">No other trades are placed for the rest of </span><span class="No-Break"><span class="koboSpan" id="kobo.582.1">the backtesting.</span></span></p>
<p><span class="koboSpan" id="kobo.583.1">If we now run the backtest, we will see the equity curve of our hypothetical buy-and-hold </span><em class="italic"><span class="koboSpan" id="kobo.584.1">investment</span></em><span class="koboSpan" id="kobo.585.1">. </span><span class="koboSpan" id="kobo.585.2">Note that the </span><em class="italic"><span class="koboSpan" id="kobo.586.1">x</span></em><span class="koboSpan" id="kobo.587.1">- and </span><em class="italic"><span class="koboSpan" id="kobo.588.1">y</span></em><span class="koboSpan" id="kobo.589.1">-axes mean the same as in the simplified illustrations: the </span><em class="italic"><span class="koboSpan" id="kobo.590.1">x</span></em><span class="koboSpan" id="kobo.591.1">-axis represents time – in our backtest, days (because we use daily data in our </span><a id="_idIndexMarker910"/><span class="koboSpan" id="kobo.592.1">backtest) – and the </span><em class="italic"><span class="koboSpan" id="kobo.593.1">y</span></em><span class="koboSpan" id="kobo.594.1">-axis represents </span><span class="No-Break"><span class="koboSpan" id="kobo.595.1">the returns.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer154">
<span class="koboSpan" id="kobo.596.1"><img alt="Figure 13.5 – Buy-and-hold returns, AUD/USD" src="image/B19145_13_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.597.1">Figure 13.5 – Buy-and-hold returns, AUD/USD</span></p>
<p><span class="koboSpan" id="kobo.598.1">And the output in the console reads </span><span class="No-Break"><span class="koboSpan" id="kobo.599.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.600.1">
Total trades: 1
Average trade: -153.9999999999997</span></pre>
<p><span class="koboSpan" id="kobo.601.1">This means that if we bought 10,000 Australian dollars for US dollars 3 years ago (and the historical price data starts in 2020), then we would have had a generous return of -153 dollars (!), which equals -1.53% (!) in 3 years. </span><span class="koboSpan" id="kobo.601.2">And this is even without saying that we had a drawdown of almost 1,500 dollars or 15% before we achieved such an </span><span class="No-Break"><span class="koboSpan" id="kobo.602.1">incredible result.</span></span></p>
<p><span class="koboSpan" id="kobo.603.1">Well, I hope you got my sarcasm: now you can see why I always become very skeptical when I hear anything about </span><em class="italic"><span class="koboSpan" id="kobo.604.1">investments</span></em><span class="koboSpan" id="kobo.605.1"> in currency markets: even in such a brief timespan of 3 years, it’s very hard to find a currency pair that could deliver returns comparable to the </span><em class="italic"><span class="koboSpan" id="kobo.606.1">normal</span></em><span class="koboSpan" id="kobo.607.1"> state of a stock market (by </span><em class="italic"><span class="koboSpan" id="kobo.608.1">normal</span></em><span class="koboSpan" id="kobo.609.1"> here, I mean the bull market, when stock indices grow every year, quarter, and sometimes even every month. </span><span class="koboSpan" id="kobo.609.2">Let’s forget about bear markets for now, not to spoil such an idealistic picture). </span><span class="koboSpan" id="kobo.609.3">Without actively managing the positions (buying </span><em class="italic"><span class="koboSpan" id="kobo.610.1">and</span></em><span class="koboSpan" id="kobo.611.1"> selling), it would be impossible to achieve any acceptable returns in the FX markets. </span><span class="koboSpan" id="kobo.611.2">Let’s do the switch back – replace the </span><strong class="source-inline"><span class="koboSpan" id="kobo.612.1">buyAndHold()</span></strong><span class="koboSpan" id="kobo.613.1"> function</span><a id="_idIndexMarker911"/><span class="koboSpan" id="kobo.614.1"> with </span><strong class="source-inline"><span class="koboSpan" id="kobo.615.1">tradeLogic()</span></strong><span class="koboSpan" id="kobo.616.1"> and run the </span><span class="No-Break"><span class="koboSpan" id="kobo.617.1">backtest again:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer155">
<span class="koboSpan" id="kobo.618.1"><img alt="Figure 13.6 – Returns of the sample trend-following trading strategy, AUD/USD" src="image/B19145_13_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.619.1">Figure 13.6 – Returns of the sample trend-following trading strategy, AUD/USD</span></p>
<p><span class="koboSpan" id="kobo.620.1">And the console output now reads </span><span class="No-Break"><span class="koboSpan" id="kobo.621.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.622.1">
Total trades: 37
Average trade: 79.40540540540536</span></pre>
<p><span class="koboSpan" id="kobo.623.1">This means that for the same test period of 3 years, we made almost $3,000 by trading exactly the same size of 10,000 AUD/USD. </span><span class="koboSpan" id="kobo.623.2">Without any comments, it’s evident how this result surpasses the buy-and-hold strategy: it equals 30% in 3 years compared to -1.53% </span><span class="No-Break"><span class="koboSpan" id="kobo.624.1">for buy-and-hold.</span></span></p>
<p><span class="koboSpan" id="kobo.625.1">Let’s calculate an estimate of alpha for our trend-following strategy. </span><span class="koboSpan" id="kobo.625.2">The strategy return is 30%, the </span><em class="italic"><span class="koboSpan" id="kobo.626.1">risk-free</span></em><span class="koboSpan" id="kobo.627.1"> rate of return could be estimated at -2.85% (3 years of treasury bills at 4.25% yield minus inflation at 7.1% in 2022), the benchmark return at -1.53%, and given that the beta, or the volatility of returns, is at least no worse than the benchmark (which is obviously the case just looking at the two figures here), then the alpha for our strategy is about 31.53% in </span><span class="No-Break"><span class="koboSpan" id="kobo.628.1">3 years.</span></span></p>
<p><span class="koboSpan" id="kobo.629.1">So, we can say that the strategy has passed two checks: it has an average trade value that allows the strategy to actually trade (not only on paper), but it also generates alpha (outperforms the benchmark) and its returns are comparable to those of a conventional investment (for example, investing in the S&amp;P 500 ETF would return about 18% in the same </span><span class="No-Break"><span class="koboSpan" id="kobo.630.1">3 years).</span></span></p>
<p><span class="koboSpan" id="kobo.631.1">Let’s now move on to assessing the beta, or the volatility of returns. </span><span class="koboSpan" id="kobo.631.2">As noted previously, we are not going to provide the classical definition of beta used in capital management</span><a id="_idIndexMarker912"/><span class="koboSpan" id="kobo.632.1"> because it requires specific knowledge from the theory of probabilities. </span><span class="koboSpan" id="kobo.632.2">Instead, we will consider drawdown, the third most important metric after average trade and overall returns, and show why it can be used as a </span><em class="italic"><span class="koboSpan" id="kobo.633.1">proxy</span></em><span class="koboSpan" id="kobo.634.1"> to assess the volatility </span><span class="No-Break"><span class="koboSpan" id="kobo.635.1">of returns.</span></span></p>
<h1 id="_idParaDest-226"><a id="_idTextAnchor227"/><span class="koboSpan" id="kobo.636.1">Drawdown</span></h1>
<p><span class="koboSpan" id="kobo.637.1">According to an </span><a id="_idIndexMarker913"/><span class="koboSpan" id="kobo.638.1">article </span><a id="_idIndexMarker914"/><span class="koboSpan" id="kobo.639.1">published on CFI (Maximum </span><span class="No-Break"><span class="koboSpan" id="kobo.640.1">Drawdown: </span></span><a href="https://corporatefinanceinstitute.com/resources/capital-markets/maximum-drawdown/"><span class="No-Break"><span class="koboSpan" id="kobo.641.1">https://corporate</span></span><span class="koboSpan" id="kobo.642.1"> financeinstitute.com/resources/capital-markets/maximum-drawdown/</span></a><span class="koboSpan" id="kobo.643.1">), “A maximum drawdown (MDD) measures the maximum fall in the value of the investment, as given by the difference between the value of the lowest trough and that of the highest peak before the trough.” </span><span class="koboSpan" id="kobo.643.2">We already saw an illustration of the drawdown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.644.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.645.1">.4</span></em><span class="koboSpan" id="kobo.646.1"> and it is quite easy to understand. </span><span class="koboSpan" id="kobo.646.2">However, real equity curves never look like ideal sine waves used for illustration purposes, so drawdown is not a constant value; it changes over time and these changes also may say a lot about the volatility </span><span class="No-Break"><span class="koboSpan" id="kobo.647.1">of returns.</span></span></p>
<p><span class="koboSpan" id="kobo.648.1">So, we want to calculate a new time series according to the </span><span class="No-Break"><span class="koboSpan" id="kobo.649.1">following algorithm:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.650.1">Let the first (leftmost) data point in the equity curve be the current historical </span><span class="No-Break"><span class="koboSpan" id="kobo.651.1">high (maximum).</span></span></li>
<li><span class="koboSpan" id="kobo.652.1">Compare the next value with the </span><span class="No-Break"><span class="koboSpan" id="kobo.653.1">current one.</span></span></li>
<li><span class="koboSpan" id="kobo.654.1">If the next value is greater than the current, let the next value be the new </span><span class="No-Break"><span class="koboSpan" id="kobo.655.1">historical high.</span></span></li>
<li><span class="koboSpan" id="kobo.656.1">If the next value is less than the current, store the difference between this value and the current historical high as </span><span class="No-Break"><span class="koboSpan" id="kobo.657.1">the drawdown.</span></span></li>
<li><span class="koboSpan" id="kobo.658.1">Finish updating the drawdown when the equity curve makes a new historical high and repeat the </span><span class="No-Break"><span class="koboSpan" id="kobo.659.1">entire algorithm.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.660.1">As you can see, if we work with time series or any other sequences, iterables, arrays, and so on, we can more efficiently realize the same calculation in just </span><span class="No-Break"><span class="koboSpan" id="kobo.661.1">two steps:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.662.1">Form a new sequence in which the next element is either equal to the preceding one </span><span class="No-Break"><span class="koboSpan" id="kobo.663.1">or greater.</span></span></li>
<li><span class="koboSpan" id="kobo.664.1">Subtract</span><a id="_idIndexMarker915"/><span class="koboSpan" id="kobo.665.1"> the original sequence from</span><a id="_idIndexMarker916"/><span class="koboSpan" id="kobo.666.1"> the </span><span class="No-Break"><span class="koboSpan" id="kobo.667.1">resulting sequence.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.668.1">This will give us a sequence </span><span class="No-Break"><span class="koboSpan" id="kobo.669.1">of drawdowns.</span></span></p>
<p><span class="koboSpan" id="kobo.670.1">To better understand what the drawdown is and how it is calculated, let’s consider a </span><span class="No-Break"><span class="koboSpan" id="kobo.671.1">simple example.</span></span></p>
<p><span class="koboSpan" id="kobo.672.1">Let’s create a list containing a sequence of </span><span class="No-Break"><span class="koboSpan" id="kobo.673.1">non-negative values:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.674.1">
a = [1,2,4,3,5,8,7,6,2,9,10]</span></pre>
<p><span class="koboSpan" id="kobo.675.1">Then, prepare an empty list where we’re going to store </span><span class="No-Break"><span class="koboSpan" id="kobo.676.1">the result:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.677.1">
m = [] # m stands for 'maximum'</span></pre>
<p><span class="koboSpan" id="kobo.678.1">And initialize a variable that is supposed to store the current high (maximum) in the </span><span class="No-Break"><span class="koboSpan" id="kobo.679.1">initial list:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.680.1">
x = 0</span></pre>
<p><span class="koboSpan" id="kobo.681.1">Now, we iterate over all elements in the list, </span><strong class="source-inline"><span class="koboSpan" id="kobo.682.1">a</span></strong><span class="koboSpan" id="kobo.683.1">, compare them to the last maximum value, choose the new maximum, update it, and append it to the resulting </span><span class="No-Break"><span class="koboSpan" id="kobo.684.1">list, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.685.1">m</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.686.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.687.1">
for el in a:
    if el &gt; x:
        x = el
    m.append(x)</span></pre>
<p><span class="koboSpan" id="kobo.688.1">If you did everything correctly, then </span><strong class="source-inline"><span class="koboSpan" id="kobo.689.1">m</span></strong><span class="koboSpan" id="kobo.690.1"> should contain the following sequence: </span><strong class="source-inline"><span class="koboSpan" id="kobo.691.1">[1, 2, 4, 4, 5, 8, 8, 8, 8, 9, 10]</span></strong><span class="koboSpan" id="kobo.692.1">. </span><span class="koboSpan" id="kobo.692.2">If we now subtract the original sequence, </span><strong class="source-inline"><span class="koboSpan" id="kobo.693.1">a</span></strong><span class="koboSpan" id="kobo.694.1">, from </span><strong class="source-inline"><span class="koboSpan" id="kobo.695.1">m</span></strong><span class="koboSpan" id="kobo.696.1">, then we get the series </span><span class="No-Break"><span class="koboSpan" id="kobo.697.1">of drawdowns:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.698.1">
[x - y for x, y in zip(a, m)]</span></pre>
<p><span class="koboSpan" id="kobo.699.1">This returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.700.1">[0, 0, 0, -1, 0, 0, -1, -2, -6, 0, 0]</span></strong><span class="koboSpan" id="kobo.701.1">. </span><span class="koboSpan" id="kobo.701.2">This is the list of drawdowns calculated at every data point in the </span><span class="No-Break"><span class="koboSpan" id="kobo.702.1">original sequence.</span></span></p>
<p><span class="koboSpan" id="kobo.703.1">We can verify the result by scanning the data in the original sequence from left to right. </span><span class="koboSpan" id="kobo.703.2">The second element in </span><strong class="source-inline"><span class="koboSpan" id="kobo.704.1">a</span></strong><span class="koboSpan" id="kobo.705.1"> is greater than the first, so the drawdown is 0 and the latest high is 2. </span><span class="koboSpan" id="kobo.705.2">The third element is greater than the latest high, so the drawdown is again 0, and the latest high is updated to 4. </span><span class="koboSpan" id="kobo.705.3">The fourth element in </span><strong class="source-inline"><span class="koboSpan" id="kobo.706.1">a</span></strong><span class="koboSpan" id="kobo.707.1"> is less than the latest high by 1, so the fourth element in </span><strong class="source-inline"><span class="koboSpan" id="kobo.708.1">m</span></strong><span class="koboSpan" id="kobo.709.1"> is -1, and the latest high remains 4. </span><span class="koboSpan" id="kobo.709.2">You can continue this calculation and make sure that all the drawdown values are calculated correctly – and that you now fully understand the meaning of </span><span class="No-Break"><span class="koboSpan" id="kobo.710.1">the drawdown.</span></span></p>
<p><span class="koboSpan" id="kobo.711.1">There is a faster </span><a id="_idIndexMarker917"/><span class="koboSpan" id="kobo.712.1">way of doing exactly this by </span><a id="_idIndexMarker918"/><span class="koboSpan" id="kobo.713.1">using </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.714.1">numpy</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.715.1"> arrays:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.716.1">
import numpy as np
a = [1,2,4,3,5,8,7,6,2,9,10]
m = np.maximum.accumulate(a)
dd = a - m</span></pre>
<p><span class="koboSpan" id="kobo.717.1">This simple code will generate the same sequence of drawdowns as before, the only difference now is that it’s going to be a </span><strong class="source-inline"><span class="koboSpan" id="kobo.718.1">numpy</span></strong><span class="koboSpan" id="kobo.719.1"> array rather than a native </span><span class="No-Break"><span class="koboSpan" id="kobo.720.1">Python list:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.721.1">
&gt;&gt;&gt; dd
array([ 0,  0,  0, -1,  0,  0, -1, -2, -6,  0,  0])</span></pre>
<p><span class="koboSpan" id="kobo.722.1">Now that we fully understand what drawdown is and how it can be calculated, let’s do it for the equity time series of our </span><span class="No-Break"><span class="koboSpan" id="kobo.723.1">trend-following strategy.</span></span></p>
<p><span class="koboSpan" id="kobo.724.1">Firstly, and above all, we should add </span><strong class="source-inline"><span class="koboSpan" id="kobo.725.1">import numpy</span></strong><span class="koboSpan" id="kobo.726.1"> at the very beginning of the code, among </span><span class="No-Break"><span class="koboSpan" id="kobo.727.1">other imports.</span></span></p>
<p><span class="koboSpan" id="kobo.728.1">Next, let’s slightly modify the very end of the backtester code, where </span><strong class="source-inline"><span class="koboSpan" id="kobo.729.1">matplotlib</span></strong> <strong class="source-inline"><span class="koboSpan" id="kobo.730.1">plot()</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.731.1">is called:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.732.1">
dd = System.equity_timeseries - np.maximum.accumulate(System.equity_timeseries)
plt.subplot(2,1,1)
plt.plot(System.equity_timeseries)
plt.subplot(2,1,2)
plt.plot(dd)
plt.show()</span></pre>
<p><span class="koboSpan" id="kobo.733.1">You can see</span><a id="_idIndexMarker919"/><span class="koboSpan" id="kobo.734.1"> a </span><a id="_idIndexMarker920"/><span class="koboSpan" id="kobo.735.1">new command: </span><strong class="source-inline"><span class="koboSpan" id="kobo.736.1">plt.subplot()</span></strong><span class="koboSpan" id="kobo.737.1">. </span><span class="koboSpan" id="kobo.737.2">It is used to place multiple charts or graphs on the same canvas (see </span><a href="B19145_08.xhtml#_idTextAnchor130"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.738.1">Chapter 8</span></em></span></a><span class="koboSpan" id="kobo.739.1">, </span><em class="italic"><span class="koboSpan" id="kobo.740.1">Data Visualization in FX Trading with Python</span></em><span class="koboSpan" id="kobo.741.1">, to refresh your memory regarding the object model of </span><strong class="source-inline"><span class="koboSpan" id="kobo.742.1">matplotlib</span></strong><span class="koboSpan" id="kobo.743.1"> plots). </span><span class="koboSpan" id="kobo.743.2">To save time and space here, I recommend you have a glance at a tutorial at </span><a href="https://www.w3schools.com/python/matplotlib_subplot.asp"><span class="koboSpan" id="kobo.744.1">https://www.w3schools.com/python/matplotlib_subplot.asp</span></a><span class="koboSpan" id="kobo.745.1"> to understand the meaning of </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.746.1">subplot()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.747.1"> parameters.</span></span></p>
<p><span class="koboSpan" id="kobo.748.1">Now, if you have done everything correctly and run the backtest again (using, of course, the same source price data!), you will now see the same equity curve as before, but with the drawdown chart </span><span class="No-Break"><span class="koboSpan" id="kobo.749.1">beneath it:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer156">
<span class="koboSpan" id="kobo.750.1"><img alt="Figure 13.7 – Equity curve and drawdown of the sample trend-following strategy" src="image/B19145_13_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.751.1">Figure 13.7 – Equity curve and drawdown of the sample trend-following strategy</span></p>
<p><span class="koboSpan" id="kobo.752.1">Now, we know a lot more about our strategy, especially about the risks associated with it. </span><span class="koboSpan" id="kobo.752.2">Even without</span><a id="_idIndexMarker921"/><span class="koboSpan" id="kobo.753.1"> doing precise calculations (which </span><a id="_idIndexMarker922"/><span class="koboSpan" id="kobo.754.1">can be quite complex) and taking only a surface look at the resulting graphs here, we can make a number of important conclusions, which we are going to consider in the very </span><span class="No-Break"><span class="koboSpan" id="kobo.755.1">next section.</span></span></p>
<h2 id="_idParaDest-227"><a id="_idTextAnchor228"/><span class="koboSpan" id="kobo.756.1">Risk/reward and return on drawdown</span></h2>
<p><span class="koboSpan" id="kobo.757.1">First of all, we </span><a id="_idIndexMarker923"/><span class="koboSpan" id="kobo.758.1">want to </span><a id="_idIndexMarker924"/><span class="koboSpan" id="kobo.759.1">understand whether drawdowns are distributed more or less evenly during the backtest period. </span><span class="koboSpan" id="kobo.759.2">This is very important because if there are significant drawdowns that appear at random, then it’s a warning sign: this means that there are some occasional processes in the market that are not accounted for by the model used in the trading strategy, and sooner or later, one of these processes may destroy the </span><span class="No-Break"><span class="koboSpan" id="kobo.760.1">strategy completely.</span></span></p>
<p><span class="koboSpan" id="kobo.761.1">Before we proceed, I recommend you refresh your memory about the mean and standard deviation, which we discussed in the </span><em class="italic"><span class="koboSpan" id="kobo.762.1">Volatility indicators</span></em><span class="koboSpan" id="kobo.763.1"> section of </span><a href="B19145_06.xhtml#_idTextAnchor101"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.764.1">Chapter 6</span></em></span></a><span class="koboSpan" id="kobo.765.1">, </span><em class="italic"><span class="koboSpan" id="kobo.766.1">Basics of Fundamental Analysis and Its Possible Use in </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.767.1">FX Trading</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.768.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.769.1">We can quickly analyze the result by running the backtest in an interactive console and entering the following after the initial chart </span><span class="No-Break"><span class="koboSpan" id="kobo.770.1">is displayed:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.771.1">
mean_dd = dd.mean()</span></pre>
<p><span class="koboSpan" id="kobo.772.1">This calculates the mean drawdown. </span><span class="koboSpan" id="kobo.772.2">The following command returns the standard deviation </span><span class="No-Break"><span class="koboSpan" id="kobo.773.1">of drawdowns:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.774.1">
std_dd = dd.std()</span></pre>
<p><span class="koboSpan" id="kobo.775.1">Now, add three</span><a id="_idIndexMarker925"/><span class="koboSpan" id="kobo.776.1"> lines </span><a id="_idIndexMarker926"/><span class="koboSpan" id="kobo.777.1">to the plot: the mean drawdown, mean minus 1 sigma, and mean minus </span><span class="No-Break"><span class="koboSpan" id="kobo.778.1">2 sigma:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.779.1">
plt.plot(range(len(dd)), [mean_dd] * len(dd))
plt.plot(range(len(dd)), [mean_dd - std_dd] * len(dd))
plt.plot(range(len(dd)), [mean_dd - 2*std_dd] * len(dd))</span></pre>
<p><span class="koboSpan" id="kobo.780.1">If you have done everything correctly, you should see something like this in the </span><span class="No-Break"><span class="koboSpan" id="kobo.781.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer157">
<span class="koboSpan" id="kobo.782.1"><img alt="Figure 13.8 – Mean minus 1 and 2 sigma of drawdowns" src="image/B19145_13_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.783.1">Figure 13.8 – Mean minus 1 and 2 sigma of drawdowns</span></p>
<p><span class="koboSpan" id="kobo.784.1">How do we interpret </span><span class="No-Break"><span class="koboSpan" id="kobo.785.1">the result?</span></span></p>
<p><span class="koboSpan" id="kobo.786.1">Drawdowns that </span><a id="_idIndexMarker927"/><span class="koboSpan" id="kobo.787.1">lie outside </span><a id="_idIndexMarker928"/><span class="koboSpan" id="kobo.788.1">of 2 sigma (the bottom horizontal line in the chart) are so-called outliers. </span><span class="koboSpan" id="kobo.788.2">They deserve special attention because usually, they are caused by reasons not accounted for in the strategy logic. </span><span class="koboSpan" id="kobo.788.3">In our case, fortunately, they are not numerous and at least the very first one is easily explained by the market volatility at the beginning of the </span><span class="No-Break"><span class="koboSpan" id="kobo.789.1">COVID-19 panic.</span></span></p>
<p><span class="koboSpan" id="kobo.790.1">Drawdowns between mean and 2 sigma are distributed more or less evenly over time. </span><span class="koboSpan" id="kobo.790.2">This means that they are just systematic drawdowns caused by the imperfections of the market model used in </span><span class="No-Break"><span class="koboSpan" id="kobo.791.1">the strategy.</span></span></p>
<p><span class="koboSpan" id="kobo.792.1">Most of the drawdowns are above the mean value and again, they are distributed evenly along the time axis – so, this gives us hope that the market model is adequate for </span><span class="No-Break"><span class="koboSpan" id="kobo.793.1">the market.</span></span></p>
<p><span class="koboSpan" id="kobo.794.1">After an initial visual qualitative analysis, let’s go to numbers. </span><span class="koboSpan" id="kobo.794.2">The maximum drawdown (which also can be found by typing </span><strong class="source-inline"><span class="koboSpan" id="kobo.795.1">min(dd)</span></strong><span class="koboSpan" id="kobo.796.1"> in an interactive console or adding </span><strong class="source-inline"><span class="koboSpan" id="kobo.797.1">print(min(dd))</span></strong><span class="koboSpan" id="kobo.798.1"> to the code) of our strategy is 646 pips. </span><span class="koboSpan" id="kobo.798.2">Is it large or small? </span><span class="koboSpan" id="kobo.798.3">If you invest $10,000 and temporarily lose $646, this means that you risk about 6.5% of your account. </span><span class="koboSpan" id="kobo.798.4">This is a moderate-to-low-risk, which is considered acceptable to </span><span class="No-Break"><span class="koboSpan" id="kobo.799.1">most investors.</span></span></p>
<p><span class="koboSpan" id="kobo.800.1">However, a more important metric is the risk-to-reward ratio. </span><span class="koboSpan" id="kobo.800.2">The meaning of this metric is quite intuitive: the less the ratio, the less the volatility of returns and thus the less the overall risk </span><span class="No-Break"><span class="koboSpan" id="kobo.801.1">of investing.</span></span></p>
<p><span class="koboSpan" id="kobo.802.1">Let’s do the simple math for our example. </span><span class="koboSpan" id="kobo.802.2">The total net profit of our strategy is slightly above 3,000 pips in 3 years. </span><span class="koboSpan" id="kobo.802.3">Even if we assume that it generates the same return each year (which is not the case), then on average, it returns about 1,500 pips per annum. </span><span class="koboSpan" id="kobo.802.4">This means that by risking $646, we may expect about $1,500, so the risk/reward ratio is </span><span class="No-Break"><span class="koboSpan" id="kobo.803.1">about 0.43.</span></span></p>
<p><span class="koboSpan" id="kobo.804.1">The sacramental question again: is that </span><em class="italic"><span class="koboSpan" id="kobo.805.1">good</span></em> <span class="No-Break"><span class="koboSpan" id="kobo.806.1">or </span></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.807.1">bad</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.808.1">?</span></span></p>
<p><span class="koboSpan" id="kobo.809.1">Generally speaking, any risk/reward ratio less than 1 is good because this means that you risk less</span><a id="_idIndexMarker929"/><span class="koboSpan" id="kobo.810.1"> than you </span><a id="_idIndexMarker930"/><span class="koboSpan" id="kobo.811.1">may expect to win. </span><span class="koboSpan" id="kobo.811.2">There are debates on the </span><em class="italic"><span class="koboSpan" id="kobo.812.1">optimal</span></em><span class="koboSpan" id="kobo.813.1"> value of the risk/reward ratio (along with </span><em class="italic"><span class="koboSpan" id="kobo.814.1">optimal</span></em><span class="koboSpan" id="kobo.815.1"> values for all other performance metrics) but most authors agree that any value less than 0.5 gives a potential green light to investing in a </span><span class="No-Break"><span class="koboSpan" id="kobo.816.1">financial product.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.817.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.818.1">Strictly speaking, the question about the risk/reward ratio is also closely connected to the problem of benchmarking. </span><span class="koboSpan" id="kobo.818.2">Unfortunately, this subject is too wide and too complex to be carefully considered in this book, but the provided rough estimates can work quite well as starting points for </span><span class="No-Break"><span class="koboSpan" id="kobo.819.1">your research.</span></span></p>
<p><span class="koboSpan" id="kobo.820.1">Another metric that is essentially the inverted risk/reward ratio is the return on drawdown. </span><span class="koboSpan" id="kobo.820.2">The only difference is that the latter is usually calculated as a percentage and not as a fractional value. </span><span class="koboSpan" id="kobo.820.3">The meaning of this metric is also very intuitive: it means the expected premium for the risk – the payoff we expect if we risk a certain amount </span><span class="No-Break"><span class="koboSpan" id="kobo.821.1">of money.</span></span></p>
<p><span class="koboSpan" id="kobo.822.1">In our example, the return on drawdown equals 1,500/646*100 = 232.2% in 2 years. </span><span class="koboSpan" id="kobo.822.2">In other words, you may expect about twice the amount of risk you can afford to allocate to </span><span class="No-Break"><span class="koboSpan" id="kobo.823.1">this strategy.</span></span></p>
<p><span class="koboSpan" id="kobo.824.1">At this point, you may exclaim, </span><em class="italic"><span class="koboSpan" id="kobo.825.1">“why, but earlier in this chapter, we calculated an alpha of only about 30%, how come now we get such a </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.826.1">huge return?”</span></em></span></p>
<p><span class="koboSpan" id="kobo.827.1">This is probably</span><a id="_idIndexMarker931"/><span class="koboSpan" id="kobo.828.1"> the most</span><a id="_idIndexMarker932"/><span class="koboSpan" id="kobo.829.1"> confusing part of FX trading and we will consider it in detail in the very </span><span class="No-Break"><span class="koboSpan" id="kobo.830.1">next section.</span></span></p>
<h1 id="_idParaDest-228"><a id="_idTextAnchor229"/><span class="koboSpan" id="kobo.831.1">The power of leverage – how much do I need to trade it?</span></h1>
<p><span class="koboSpan" id="kobo.832.1">Finally, we are</span><a id="_idIndexMarker933"/><span class="koboSpan" id="kobo.833.1"> about to answer the main question of any investor: how much do I have to have in my trading account and how much can I expect </span><span class="No-Break"><span class="koboSpan" id="kobo.834.1">from it?</span></span></p>
<p><span class="koboSpan" id="kobo.835.1">Before we continue, let me draw your attention to the following important fact about </span><span class="No-Break"><span class="koboSpan" id="kobo.836.1">FX trading.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.837.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.838.1">Do not confuse the return on investment as a performance metric with the actual return on </span><span class="No-Break"><span class="koboSpan" id="kobo.839.1">actual investment!</span></span></p>
<p><span class="koboSpan" id="kobo.840.1">To understand it, we should again recall the essence of margin trading and how it differs from regular investment and trading </span><span class="No-Break"><span class="koboSpan" id="kobo.841.1">without margins.</span></span></p>
<p><span class="koboSpan" id="kobo.842.1">When you invest or trade without margin, you can buy only that amount of assets (equities, commodities, whatever) that cost the amount of money in your account. </span><span class="koboSpan" id="kobo.842.2">For example, if you trade stocks, and a stock’s price is $100, and you have $10,000 in your account, then you can buy no more than 100 shares of the stock (actually a bit less because of </span><span class="No-Break"><span class="koboSpan" id="kobo.843.1">trading costs).</span></span></p>
<p><span class="koboSpan" id="kobo.844.1">However, if you trade on margin, then you are supposed to have only a fraction of the full required amount, and the rest will be provided as a credit line by your broker. </span><span class="koboSpan" id="kobo.844.2">In our example with AUD/USD, if you have 10,000 US dollars in your account and your broker provides you with a retail leverage of 30:1, then you potentially can buy as much as </span><span class="koboSpan" id="kobo.845.1"><img alt="" src="image/Formula_B19145_13_025.png"/></span> <span class="No-Break"><span class="koboSpan" id="kobo.846.1">Australian dollars.</span></span></p>
<p><span class="koboSpan" id="kobo.847.1">The ability to purchase magnitudes more assets than otherwise possible with the amount in your trading account makes margin trading very attractive to many novice traders. </span><span class="koboSpan" id="kobo.847.2">However, leverage is a double-edged sword. </span><span class="koboSpan" id="kobo.847.3">Let’s do some simple math and see why it may be </span><span class="No-Break"><span class="koboSpan" id="kobo.848.1">quite dangerous.</span></span></p>
<p><span class="koboSpan" id="kobo.849.1">Do you remember that we consistently calculated everything in pips, and not in money? </span><span class="koboSpan" id="kobo.849.2">Now we can benefit from this because we only need to adjust the pip value according to the chosen leverage and scale all the </span><span class="No-Break"><span class="koboSpan" id="kobo.850.1">performance metrics.</span></span></p>
<p><span class="koboSpan" id="kobo.851.1">So, when we traded 10,000 AUD/USD, the net return was about 3,000 pips, and the maximum drawdown was 646 pips. </span><span class="koboSpan" id="kobo.851.2">If we had the same $10,000 in our account, that would mean that we traded without leverage, and for unleveraged trading, the return indeed would make about 30% while the drawdown would remain acceptably low, </span><span class="No-Break"><span class="koboSpan" id="kobo.852.1">around 6.5%.</span></span></p>
<p><span class="koboSpan" id="kobo.853.1">Now, we trade with a leverage of 30:1. </span><span class="koboSpan" id="kobo.853.2">This means that a pip value now equals $30, not $1. </span><span class="koboSpan" id="kobo.853.3">Then, the return would make $30 * 3000 = $90,000 – what a handsome profit! </span><span class="koboSpan" id="kobo.853.4">If we present this figure as percent growth over the initial investment, we will have an incredible value of 900% in just 3 years. </span><span class="koboSpan" id="kobo.853.5">So, margin trading is a great benefit and the way to go, </span><span class="No-Break"><span class="koboSpan" id="kobo.854.1">isn’t it?</span></span></p>
<p><span class="koboSpan" id="kobo.855.1">But we forgot </span><a id="_idIndexMarker934"/><span class="koboSpan" id="kobo.856.1">about the drawdown. </span><span class="koboSpan" id="kobo.856.2">We also have to scale it up, as now 1 pip costs $30. </span><span class="koboSpan" id="kobo.856.3">This way, a drawdown of 646 pips translates into $30 * 646 = $</span><span class="No-Break"><span class="koboSpan" id="kobo.857.1">19,380.</span></span></p>
<p><span class="No-Break"><span class="koboSpan" id="kobo.858.1">Oops.</span></span></p>
<p><span class="koboSpan" id="kobo.859.1">The drawdown now is twice as much as the total initial capital in the account! </span><span class="koboSpan" id="kobo.859.2">This means that in reality, we would have never reached the expected return. </span><span class="koboSpan" id="kobo.859.3">Moreover, instead of making a profit, we would have lost all money in our account and faced a catastrophe notoriously</span><a id="_idIndexMarker935"/><span class="koboSpan" id="kobo.860.1"> known as a </span><em class="italic"><span class="koboSpan" id="kobo.861.1">margin call</span></em><span class="koboSpan" id="kobo.862.1">: the situation when the broker calls for adding funds to your account because otherwise, the open position cannot be maintained. </span><span class="koboSpan" id="kobo.862.2">Most retail brokers do not wait until clients add funds to their accounts and simply liquidate such a position with a loss. </span><span class="koboSpan" id="kobo.862.3">Therefore, if we traded our strategy with a leverage of 30:1, we would have lost all money in the account during the very </span><span class="No-Break"><span class="koboSpan" id="kobo.863.1">first drawdown.</span></span></p>
<p><span class="koboSpan" id="kobo.864.1">So, how do we choose the </span><span class="No-Break"><span class="koboSpan" id="kobo.865.1">acceptable leverage?</span></span></p>
<p><span class="koboSpan" id="kobo.866.1">With margin trading, we normally start from the opposite end. </span><span class="koboSpan" id="kobo.866.2">Instead of calculating the projected returns from the strategy metrics, first of all, we try to estimate a leverage that would allow our positions to remain open during the entire </span><span class="No-Break"><span class="koboSpan" id="kobo.867.1">trading period.</span></span></p>
<p><span class="koboSpan" id="kobo.868.1">We know that the maximum drawdown is 646 pips and we have $10,000 in a trading account. </span><span class="koboSpan" id="kobo.868.2">Thus, the maximum possible leverage should make the pip value no greater than 10,000/646, which is about $15. </span><span class="koboSpan" id="kobo.868.3">Therefore, the absolute maximum possible leverage is 15:1, which is twice as low as the 30:1 offered by </span><span class="No-Break"><span class="koboSpan" id="kobo.869.1">the broker.</span></span></p>
<p><span class="koboSpan" id="kobo.870.1">Now, let’s have a critical look at </span><span class="No-Break"><span class="koboSpan" id="kobo.871.1">the result.</span></span></p>
<p><span class="koboSpan" id="kobo.872.1">Can we trade our strategy with leverage of 15:1? </span><span class="koboSpan" id="kobo.872.2">Theoretically yes, practically no because in this case, the drawdown would make up 100% of the trading account. </span><span class="koboSpan" id="kobo.872.3">I can’t imagine any trader, not commenting on investors, who would be able to withstand such a drawdown, even </span><span class="No-Break"><span class="koboSpan" id="kobo.873.1">just psychologically.</span></span></p>
<p><span class="koboSpan" id="kobo.874.1">In reality, the calculation of the right leverage is performed in the </span><span class="No-Break"><span class="koboSpan" id="kobo.875.1">following sequence:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.876.1">Define the maximum level of losses. </span><span class="koboSpan" id="kobo.876.2">This is not the maximum drawdown of a strategy, but the maximum drawdown acceptable by </span><span class="No-Break"><span class="koboSpan" id="kobo.877.1">the investor.</span></span></li>
<li><span class="koboSpan" id="kobo.878.1">Calculate the</span><a id="_idIndexMarker936"/><span class="koboSpan" id="kobo.879.1"> pip value so that this acceptable level of losses would equal the </span><span class="No-Break"><span class="koboSpan" id="kobo.880.1">strategy drawdown.</span></span></li>
<li><span class="koboSpan" id="kobo.881.1">Define leverage as the ratio of the projected pip value to the original </span><span class="No-Break"><span class="koboSpan" id="kobo.882.1">pip value.</span></span></li>
<li><span class="koboSpan" id="kobo.883.1">Define the trading size as the original trading size multiplied by </span><span class="No-Break"><span class="koboSpan" id="kobo.884.1">the leverage.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.885.1">Let’s calculate the leverage for our strategy with the assumption that an average investor can afford to withstand a drawdown of 10% of the initial investment. </span><span class="koboSpan" id="kobo.885.2">Let’s also assume that the initial investment is $10,000. </span><span class="koboSpan" id="kobo.885.3">Therefore, the maximum loss in the account should not ever exceed $1,000. </span><span class="koboSpan" id="kobo.885.4">With a maximum strategy drawdown of 646 pips, the value of 1 pip can be equal to $1,000/646 = $1.54. </span><span class="koboSpan" id="kobo.885.5">So, we use leverage of just 1.5:1 (not 15:1, not 30:1, and of course not 100:1 as offered by many brokers!) Now, we recall that a pip value of $1 is obtained when we trade $10,000 per trade. </span><span class="koboSpan" id="kobo.885.6">We multiply the original trading size (10,000) by the leverage (1.5) and we get only </span><span class="No-Break"><span class="koboSpan" id="kobo.886.1">15,000 AUD/USD.</span></span></p>
<p><span class="koboSpan" id="kobo.887.1">And what about returns? </span><span class="koboSpan" id="kobo.887.2">Previously we calculated two metrics – alpha and return on drawdown – and they gave two very different values: about 30% in the former case and over 200% in the latter. </span><span class="koboSpan" id="kobo.887.3">With our acceptable level of losses of 10% and leverage of 1.5:1, we expect a return of 3,000 pips * $1.5 = $4,500 in 2 years. </span><span class="koboSpan" id="kobo.887.4">This equals 45% of the initial investment </span><span class="No-Break"><span class="koboSpan" id="kobo.888.1">of $10,000.</span></span></p>
<p><span class="koboSpan" id="kobo.889.1">Now, let’s cover</span><a id="_idIndexMarker937"/><span class="koboSpan" id="kobo.890.1"> the key takeaways from everything we discussed in </span><span class="No-Break"><span class="koboSpan" id="kobo.891.1">this chapter.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.892.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.893.1">Alpha is calculated for an unleveraged investment and gives the lowest estimate of </span><span class="No-Break"><span class="koboSpan" id="kobo.894.1">possible returns.</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.895.1">Return on drawdown is calculated for the maximum possible leverage and gives the upper estimate of possible returns (assuming that the drawdown may reach 100% of the </span><span class="No-Break"><span class="koboSpan" id="kobo.896.1">initial investment).</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.897.1">The realistic return is calculated based on the chosen risk level and is always between alpha and the return on </span><span class="No-Break"><span class="koboSpan" id="kobo.898.1">the drawdown.</span></span></p>
<h1 id="_idParaDest-229"><a id="_idTextAnchor230"/><span class="koboSpan" id="kobo.899.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.900.1">In this chapter, we familiarized ourselves with the most basic yet essential performance metrics. </span><span class="koboSpan" id="kobo.900.2">We understand now that there are three main aspects that help assess the strategy performance: trade analysis, alpha-related metrics such as returns, and beta-related metrics such as the volatility of returns and analysis of drawdowns. </span><span class="koboSpan" id="kobo.900.3">We learned about the main factors that always have a negative impact on performance, such as spread, slippage, commission, and overnight swaps, and we saw how we can realistically account for them in </span><span class="No-Break"><span class="koboSpan" id="kobo.901.1">our assessment.</span></span></p>
<p><span class="koboSpan" id="kobo.902.1">We have had a surface peek into the basics of capital management and considered alpha and beta, in a simplified form, but at least in a helpful enough way to improve our judgments regarding strategy. </span><span class="koboSpan" id="kobo.902.2">Finally, we carefully considered the leverage, saw its double-edged nature, and adopted the correct way of choosing the leverage for markets traded on margin, such </span><span class="No-Break"><span class="koboSpan" id="kobo.903.1">as FX.</span></span></p>
<p><span class="koboSpan" id="kobo.904.1">Of course, this chapter is only an introduction to the vast, complex, but interesting world of capital management and risk assessment, as this entire book is only an introduction to the world of systematic FX trading in general. </span><span class="koboSpan" id="kobo.904.2">However, even the basic facts and techniques considered in this book are enough to start your own homework. </span><span class="koboSpan" id="kobo.904.3">Hopefully, this homework is going to be perpetual – because any successful trader, in the long run, is a perpetual student of </span><span class="No-Break"><span class="koboSpan" id="kobo.905.1">the market.</span></span></p>
<p><span class="koboSpan" id="kobo.906.1">I encourage you to test any idea you may come across – now that you know how to do it, critically analyze the results – using the approach outlined in this chapter, and continue your studies, using my remarks </span><em class="italic"><span class="koboSpan" id="kobo.907.1">“it is unfortunately outside the scope of this book”</span></em><span class="koboSpan" id="kobo.908.1"> as invitations to learn more yourself. </span><span class="koboSpan" id="kobo.908.2">One day, you may find that you operate a portfolio of various strategies running in a large number of markets, bringing you both mental satisfaction from decent work and quite a significant </span><span class="No-Break"><span class="koboSpan" id="kobo.909.1">material reward.</span></span></p>
</div>
</body></html>