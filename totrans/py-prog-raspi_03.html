<html><head></head><body>
        <section>

            <header>
                <h1 class="header-title">Conditional Statements, Functions, and Lists</h1>
            </header>

            <article>
                
<p>In this chapter, we will build upon what you learned in the previous chapter. You will learn about conditional statements and how to make use of logical operators to check conditions using conditional statements. Next, you will learn to write simple functions in Python and discuss interfacing inputs to the Raspberry Pi's GPIO header using a tactile switch (momentary push button). We will also discuss motor control (this is a run-up to the final project) using the Raspberry Pi Zero and control the motors using the switch inputs. Let's get to it!<br/>
In this chapter, we will discuss the following topics:</p>
<ul>
<li>Conditional statements in Python
<ul>
<li> Using conditional inputs to take actions based on GPIO pin states</li>
<li>Breaking out of loops using conditional statement</li>
</ul>
</li>
<li>Functions in Python
<ul>
<li>GPIO callback functions</li>
</ul>
</li>
<li>Motor control in Python</li>
</ul>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Conditional statements</h1>
            </header>

            <article>
                
<p>In Python, conditional statements are used to determine if a specific condition is met by testing whether a condition is <kbd>true</kbd> or <kbd>false</kbd>. Conditional statements are used to determine how a program is executed. For example, conditional statements could be used to determine whether it is time to turn on the lights. The syntax is as follows:</p>
<pre>
if condition_is_true:<br/><br/>  do_something()
</pre>
<p>The condition is usually tested using a logical operator, and the set of tasks under the indented block is executed. Let's consider the example, <kbd>check_address_if_statement.py</kbd> (available for download with this chapter) where the user input to a program needs to be verified using a <kbd>yes</kbd> or <kbd>no</kbd> question:</p>
<pre>
check_address = input("Is your address correct(yes/no)? ") <br/>if check_address == "yes": <br/>  print("Thanks. Your address has been saved") <br/>if check_address == "no": <br/>  del(address) <br/>  print("Your address has been deleted. Try again")
</pre>
<p>In this example, the program expects a <kbd>yes</kbd> or <kbd>no</kbd> input. If the user provides the input <kbd>yes</kbd>, the condition <kbd>if check_address == "yes"</kbd> is <kbd>true</kbd>, the message <kbd>Your address has been saved</kbd> is printed on the screen.</p>
<p>Likewise, if the user input is <kbd>no</kbd>, the program executes the indented code block under the logical test condition <kbd>if check_address == "no"</kbd> and deletes the variable <kbd>address</kbd>.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">An if-else statement</h1>
            </header>

            <article>
                
<p>In the preceding example, we used an <kbd>if</kbd> statement to test each condition. In Python, there is an alternative option named the <kbd>if-else</kbd> statement. The <kbd>if-else</kbd> statement enables testing an alternative condition if the main condition is not <kbd>true</kbd>:</p>
<pre>
check_address = input("Is your address correct(yes/no)? ") <br/>if check_address == "yes": <br/>  print("Thanks. Your address has been saved") <br/>else: <br/>  del(address) <br/>  print("Your address has been deleted. Try again")
</pre>
<p>In this example, if the user input is <kbd>yes</kbd>, the indented code block under <kbd>if</kbd> is executed. Otherwise, the code block under <kbd>else</kbd> is executed.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">if-elif-else statement</h1>
            </header>

            <article>
                
<p>In the preceding example, the program executes any piece of code under the <kbd>else</kbd> block for any user input other than <kbd>yes</kbd> that is if the user pressed the return key without providing any input or provided random characters instead of <kbd>no</kbd>, the <kbd>if-elif-else</kbd> statement works as follows:</p>
<pre>
check_address = input("Is your address correct(yes/no)? ") <br/>if check_address == "yes": <br/>  print("Thanks. Your address has been saved") <br/>elif check_address == "no": <br/>  del(address) <br/>  print("Your address has been deleted. Try again") <br/>else: <br/>  print("Invalid input. Try again")
</pre>
<p>If the user input is <kbd>yes</kbd>, the indented code block under the <kbd>if</kbd> statement is executed. If the user input is <kbd>no</kbd>, the indented code block under <kbd>elif</kbd> (<em>else-if</em>) is executed. If the user input is something else, the program prints the message: <kbd>Invalid input. Try again</kbd>.</p>
<p>It is important to note that the code block indentation determines the block of code that needs to be executed when a specific condition is met. We recommend modifying the indentation of the conditional statement block and find out what happens to the program execution. This will help understand the importance of indentation in Python.</p>
<p>In the three examples that we discussed so far, it could be noted that an <kbd>if</kbd> statement does not need to be complemented by an <kbd>else</kbd> statement. The <kbd>else</kbd> and <kbd>elif</kbd> statements need to have a preceding <kbd>if</kbd> statement or the program execution would result in an error.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Breaking out of loops</h1>
            </header>

            <article>
                
<p>Conditional statements can be used to break out of a loop execution (<kbd>for</kbd> loop and <kbd>while</kbd> loop). When a specific condition is met, an <kbd>if</kbd> statement can be used to break out of a loop:</p>
<pre>
i = 0 <br/>while True: <br/>  print("The value of i is ", i) <br/>  i += 1 <br/>  if i &gt; 100: <br/>    break
</pre>
<p>In the preceding example, the <kbd>while</kbd> loop is executed in an infinite loop. The value of <kbd>i</kbd> is incremented and printed on the screen. The program breaks out of the <kbd>while</kbd> loop when the value of <kbd>i</kbd> is greater than <kbd>100</kbd> and the value of <kbd>i</kbd> is printed from 1 to 100.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">The applications of conditional statements: executing tasks using GPIO</h1>
            </header>

            <article>
                
<p>In the previous chapter, we discussed interfacing outputs to the Raspberry Pi's GPIO. Let's discuss an example where a simple push button is pressed. A button press is detected by reading the GPIO pin state. We are going to make use of conditional statements to execute a task based on the GPIO pin state.</p>
<p>Let us connect a button to the Raspberry Pi's GPIO. All you need to get started are a button, pull-up resistor, and a few jumper wires. The figure given later shows an illustration on connecting the push button to the Raspberry Pi Zero. One of the push button's terminals is connected to the ground pin of the Raspberry Pi Zero's GPIO pin.</p>
<p>The schematic of the button's interface is shown here:</p>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref"><img class=" image-border" height="241" src="assets/image_03_001.png" width="269"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Raspberry Pi GPIO schematic</div>
<p>The other terminal of the <span>push</span> button is pulled up to 3.3V using a 10 K resistor. The junction of the push button terminal and the 10 K resistor is connected to the GPIO pin 2 (refer to the BCM GPIO pin map shared in the earlier chapter).</p>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref"><img class=" image-border" height="231" src="assets/image_03_002.png" width="490"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Interfacing the push button to the Raspberry Pi Zero's GPIO - an image generated using Fritzing</div>
<p>Let's review the code required to review the button state. We make use of loops and conditional statements to read the button inputs using the Raspberry Pi Zero.</p>
<p>We will be making use of the <kbd>gpiozero</kbd> library introduced in the previous chapter. The code sample for this section is <kbd>GPIO_button_test.py</kbd> and available for download along with this chapter.</p>
<p>In a later chapter, we will discuss <strong>object-oriented programming</strong> (<strong>OOP</strong>). For now, let's briefly discuss the concept of classes for this example. A <strong>class</strong> in Python is a blueprint that contains all the attributes that define an object. For example, the <kbd>Button</kbd> class of the <kbd>gpiozero</kbd> library contains all attributes required to interface a button to the Raspberry Pi Zero's GPIO interface. These attributes include button states and functions required to check the button states and so on. In order to interface a button and read its states, we need to make use of this blueprint. The process of creating a copy of this blueprint is called instantiation.</p>
<p>Let's get started with importing the <kbd>gpiozero</kbd> library and instantiate the <kbd>Button</kbd> class of the <kbd>gpiozero</kbd> library (we will discuss Python's classes, objects, and their attributes in a later chapter). The button is interfaced to GPIO pin 2. We need to pass the pin number as an argument during instantiation:</p>
<pre>
from gpiozero import Button <br/><br/>#button is interfaced to GPIO 2 <br/>button = Button(2)
</pre>
<p>The <kbd>gpiozero</kbd> library's documentation is available at <span class="URLPACKT"><a href="http://gpiozero.readthedocs.io/en/v1.2.0/api_input.html">http://gpiozero.readthedocs.io/en/v1.2.0/api_input.html</a>. </span>According to the documentation, there is a variable named <kbd>is_pressed</kbd> in the <kbd>Button</kbd> class that could be tested using a conditional statement to determine if the button is pressed:</p>
<pre>
if button.is_pressed: <br/>    print("Button pressed")
</pre>
<p>Whenever the button is pressed, the message <kbd>Button pressed</kbd> is printed on the screen. Let's stick this code snippet inside an infinite loop:</p>
<pre>
from gpiozero import Button <br/><br/>#button is interfaced to GPIO 2 <br/>button = Button(2)<br/><br/>while True: <br/>  if button.is_pressed: <br/>    print("Button pressed")
</pre>
<p>In an infinite <kbd>while</kbd> loop, the program constantly checks for a button press and prints the message as long as the button is being pressed. Once the button is released, it goes back to checking whether the button is pressed.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Breaking out a loop by counting button presses</h1>
            </header>

            <article>
                
<p>Let's review another example where we would like to count the number of button presses and break out of the infinite loop when the button has received a predetermined number of presses:</p>
<pre>
i = 0 <br/>while True: <br/>  if button.is_pressed: <br/>    button.wait_for_release() <br/>    i += 1 <br/>    print("Button pressed") <br/><br/>  if i &gt;= 10: <br/>    break
</pre>
<p>The preceding example is available for downloading along with this chapter as <kbd>GPIO_button_loop_break.py</kbd>.</p>
<p>In this example, the program checks for the state of the <kbd>is_pressed</kbd> variable. On receiving a button press, the program can be paused until the button is released using the <kbd>wait_for_release</kbd> method. When the button is released, the variable used to store the number of presses is incremented by one.</p>
<p>The program breaks out of the infinite loop, when the button has received 10 presses.</p>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref"><img class=" image-border" height="272" src="assets/image_03_003.png" width="422"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">A red momentary push button interfaced to Raspberry Pi Zero GPIO pin 2</div>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Functions in Python</h1>
            </header>

            <article>
                
<p>We briefly discussed functions in Python. Functions execute a predefined set of task. <kbd>print</kbd> is one example of a function in Python. It enables printing something to the screen. Let's discuss writing our own functions in Python.</p>
<p>A function can be declared in Python using the <kbd>def</kbd> keyword. A function could be defined as follows:</p>
<pre>
def my_func(): <br/>   print("This is a simple function")
</pre>
<p>In this function <kbd>my_func</kbd>, the <kbd>print</kbd> statement is written under an indented code block. Any block of code that is indented under the function definition is executed when the function is called during the code execution. The function could be executed as <kbd>my_func()</kbd>.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Passing arguments to a function:</h1>
            </header>

            <article>
                
<p>A function is always defined with parentheses. The parentheses are used to pass any requisite arguments to a function. Arguments are parameters required to execute a function. In the earlier example, there are no arguments passed to the function.</p>
<p>Let's review an example where we pass an argument to a function:</p>
<pre>
def add_function(a, b): <br/>  c = a + b <br/>  print("The sum of a and b is ", c)
</pre>
<p>In this example, <kbd>a</kbd> and <kbd>b</kbd> are arguments to the function. The function adds <kbd>a</kbd> and <kbd>b</kbd> and prints the sum on the screen. When the function <kbd>add_function</kbd> is called by passing the arguments <kbd>3</kbd> and <kbd>2</kbd> as <kbd>add_function(3,2)</kbd> where <kbd>a</kbd> is <kbd>3</kbd> and <kbd>b</kbd> is <kbd>2</kbd>, respectively.</p>
<p>Hence, the arguments <kbd>a</kbd> and <kbd>b</kbd> are required to execute function, or calling the function without the arguments would result in an error. Errors related to missing arguments could be avoided by setting default values to the arguments:</p>
<pre>
def add_function(a=0, b=0): <br/>  c = a + b <br/>  print("The sum of a and b is ", c)
</pre>
<p>The preceding function expects two arguments. If we pass only one argument to this function, the other defaults to zero. For example, <kbd>add_function(a=3)</kbd>, <kbd>b</kbd> defaults to <kbd>0</kbd>, or <kbd>add_function(b=2)</kbd>, <kbd>a</kbd> defaults to <kbd>0</kbd>. When an argument is not furnished while calling a function, it defaults to zero (declared in the function).</p>
<p>Similarly, the <kbd>print</kbd> function prints any variable passed as an argument. If the <kbd>print</kbd> function is called without any arguments, a blank line is printed.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Returning values from a function</h1>
            </header>

            <article>
                
<p>Functions can perform a set of defined operations and finally return a value at the end. Let's consider the following example:</p>
<pre>
def square(a): <br/>   return a**2
</pre>
<p>In this example, the function returns a square of the argument. In Python, the <kbd>return</kbd> keyword is used to return a value requested upon completion of execution.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">The scope of variables in a function</h1>
            </header>

            <article>
                
<p>There are two types of variables in a Python program: local and global variables. <strong>Local variables</strong> are local to a function, that is, it is a variable declared within a function is accessible within that function. The example is as follows:</p>
<pre>
def add_function(): <br/>  a = 3 <br/>  b = 2 <br/>  c = a + b <br/>  print("The sum of a and b is ", c)
</pre>
<p>In this example, the variables <kbd>a</kbd> and <kbd>b</kbd> are local to the function <kbd>add_function</kbd>. Let's consider an example of a <strong>global variable</strong>:</p>
<pre>
a = 3 <br/>b = 2 <br/>def add_function(): <br/>  c = a + b <br/>  print("The sum of a and b is ", c) <br/><br/>add_function()
</pre>
<p>In this case, the variables <kbd>a</kbd> and <kbd>b</kbd> are declared in the main body of the Python script. They are accessible across the entire program. Now, let's consider this example:</p>
<pre>
a = 3 <br/>def my_function(): <br/>  a = 5 <br/>  print("The value of a is ", a)<br/><br/>my_function() <br/>print("The value of a is ", a)
</pre>
<p><span class="s1">The program output is:</span></p>
<pre>
      The value of a is<br/><br/>      5<br/><br/>      The value of a is<br/><br/>      3
</pre>
<p>In this case, when <kbd>my_function</kbd> is called, the value of <kbd>a</kbd> is <kbd>5</kbd> and the value of <kbd>a</kbd> is <kbd>3</kbd> in the <kbd>print</kbd> statement of the main body of the script. In Python, it is not possible to explicitly modify the value of global variables inside functions. In order to modify the value of a global variable, we need to make use of the <kbd>global</kbd> keyword:</p>
<pre>
a = 3 <br/>def my_function(): <br/>  global a <br/>  a = 5 <br/>  print("The value of a is ", a)<br/><br/>my_function() <br/>print("The value of a is ", a)
</pre>
<p>In general, it is not recommended to modify variables inside functions as it is not a very safe practice of modifying variables. The best practice would be passing variables as arguments and returning the modified value. Consider the following example:</p>
<pre>
a = 3 <br/>def my_function(a): <br/>  a = 5 <br/>  print("The value of a is ", a) <br/>  return a <br/><br/>a = my_function(a) <br/>print("The value of a is ", a)
</pre>
<p>In the preceding program, the value of <kbd>a</kbd> is <kbd>3</kbd>. It is passed as an argument to <kbd>my_function</kbd>. The function returns <kbd>5</kbd>, which is saved to <kbd>a</kbd>. We were able to safely modify the value of <kbd>a</kbd>.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">GPIO callback functions</h1>
            </header>

            <article>
                
<p>Let's review some uses of functions with the GPIO example. Functions can be used in order to handle specific events related to the GPIO pins of the Raspberry Pi. For example, the <kbd>gpiozero</kbd> library provides the capability of calling a function either when a button is pressed or released:</p>
<pre>
from gpiozero import Button <br/><br/>def button_pressed(): <br/>  print("button pressed")<br/><br/>def button_released(): <br/>  print("button released")<br/><br/>#button is interfaced to GPIO 2 <br/>button = Button(2) <br/>button.when_pressed = button_pressed <br/>button.when_released = button_released<br/><br/>while True: <br/>  pass
</pre>
<p>In this example, we make use of the attributes <kbd>when_pressed</kbd> and <kbd>when_released</kbd> of the library's GPIO class. When the button is pressed, the function <kbd>button_pressed</kbd> is executed. Likewise, when the button is released, the function <kbd>button_released</kbd> is executed. We make use of the <kbd>while</kbd> loop to avoid exiting the program and keep listening for button events. The <kbd>pass</kbd> keyword is used to avoid an error and nothing happens when a <kbd>pass</kbd> keyword is executed.</p>
<p>This capability of being able to execute different functions for different events is useful in applications like <em>home automation</em>. For example, it could be used to turn on lights when it is dark and vice versa.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">DC motor control in Python</h1>
            </header>

            <article>
                
<p>In this section, we will discuss motor control using the Raspberry Pi Zero. Why discuss motor control? As we progress through different topics in this book, we will culminate in building a mobile robot. Hence, we need to discuss writing code in Python to control a motor using a Raspberry Pi.</p>
<p>In order to control a motor, we need an <strong>H-bridge motor driver</strong> (Discussing H-bridge is beyond our scope. There are several resources for H-bridge motor drivers: <a href="http://www.mcmanis.com/chuck/robotics/tutorial/h-bridge/"><span class="URLPACKT">http://www.mcmanis.com/chuck/robotics/tutorial/h-bridge/</span></a>). There are several motor driver kits designed for the Raspberry Pi. In this section, we will make use of the following kit: <a href="https://www.pololu.com/product/2753"><span class="URLPACKT">https://www.pololu.com/product/2753</span></a>.</p>
<p>The <strong>Pololu</strong> product page also provides instructions on how to connect the motor. Let's get to writing some Python code to operate the motor:</p>
<pre>
from gpiozero import Motor <br/>from gpiozero import OutputDevice <br/>import time<br/><br/>motor_1_direction = OutputDevice(13) <br/>motor_2_direction = OutputDevice(12)<br/><br/>motor = Motor(5, 6)<br/><br/>motor_1_direction.on() <br/>motor_2_direction.on()<br/><br/>motor.forward()<br/><br/>time.sleep(10)<br/><br/>motor.stop()<br/><br/>motor_1_direction.off() <br/>motor_2_direction.off()
</pre>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref"><img class=" image-border" height="257" src="assets/image_03_004.png" width="343"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Raspberry Pi based motor control</div>
<p>In order to control the motor, let's declare the pins, the motor's speed pins and direction pins. As per the motor driver's documentation, the motors are controlled by GPIO pins 12, 13 and 5, 6, respectively.</p>
<pre>
from gpiozero import Motor <br/>from gpiozero import OutputDevice <br/>import time <br/><br/>motor_1_direction = OutputDevice(13) <br/>motor_2_direction = OutputDevice(12) <br/><br/>motor = Motor(5, 6)
</pre>
<p>Controlling the motor is as simple as turning on the motor using the <kbd>on()</kbd> method and moving the motor in the forward direction using the <kbd>forward()</kbd> method:</p>
<pre>
motor.forward()
</pre>
<p>Similarly, reversing the motor direction could be done by calling the <kbd>reverse()</kbd> method. Stopping the motor could be done by:</p>
<pre>
motor.stop()
</pre>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Some mini-project challenges for the reader</h1>
            </header>

            <article>
                
<p>Here are some of mini-project challenged for our readers:</p>
<ul>
<li>In this chapter, we discussed interfacing inputs for the Raspberry Pi and controlling motors. Think about a project where we could drive a mobile robot that reads inputs from whisker switches and operate a mobile robot. Is it possible to build a wall following robot in combination with the limit switches and motors?</li>
<li>We discussed controlling a DC motor in this chapter. How do we control a stepper motor using a Raspberry Pi?</li>
<li>How can we interface a motion sensor to control the lights at home using a Raspberry Pi Zero?</li>
</ul>
<p>Read on to find out!</p>
<div class="packt_infobox">Interested in playing tricks on your friends with your Raspberry Pi Zero? Check this book's website!</div>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Summary</h1>
            </header>

            <article>
                
<p>In this chapter, we discussed conditional statements and the applications of conditional statements in Python. We also discussed functions in Python, passing arguments to a function, returning values from a function and scope of variables in a Python program. We discussed callback functions and motor control in Python.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </body></html>