<html xml:lang="en-US" xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
<head>
<meta charset="utf-8"/>
<meta content="pandoc" name="generator"/>
<title>ch018.xhtml</title>

<!-- kobo-style -->

<style id="koboSpanStyle" type="text/css" xmlns="http://www.w3.org/1999/xhtml">.koboSpan { -webkit-text-combine: inherit; }</style>
</head>
<body epub:type="bodymatter">

<h1 data-number="18">Chapter 14<br/>
Project 4.2: Creating Reports</h1>
<p>One easy way to share good-looking results is to use a Jupyter notebook’s <strong>Markdown </strong>cells to create a presentation. This chapter will create a “slide deck” that can be shared and presented. We can expand on this to create a PDF report using additional packages like <strong>Jupyter book </strong>or <strong>Quarto</strong>.</p>
<p>In this chapter, we’ll look at two important working results of data analysis:</p>
<ul>
<li><p>Slide decks build directly from a Jupyter Lab notebook.</p></li>
<li><p>PDF reports built from notebook data and analysis.</p></li>
</ul>
<p>This chapter’s project will upgrade an analysis notebook created in the previous chapter to create presentations that can be shared with colleagues. We’ll start by looking at the kinds of reports an analyst may need to produce. </p>

<h2 data-number="18.1">14.1  Description</h2>
<p>The first dozen chapters in the book created a pipeline to acquire and clean raw data. Once the data is available, we can now do more analytical work on the clean data.</p>
<p>The goal is to transform raw data into information, and possibly even insight to help stakeholders make properly informed decisions. Analytical results need to be shared to be valuable. A Jupyter Notebook is a solid basis to create readable, helpful presentations and reports.</p>
<p>We’ll start by transforming an analysis notebook into a slide deck. You can then use this slide deck to talk through our key points with stakeholders, providing helpful visuals to back up the information they need to understand. These are common in an enterprise environment. (Some would argue they are too common and contain too much of the wrong kind of details.)</p>
<p>We’ll start by looking at creating slide decks and presentations in Jupyter Lab. </p>

<h3 data-number="18.1.1">14.1.1  Slide decks and presentations</h3>
<p>A Jupyter Notebook can be exported to a presentation file. The underlying presentation will be an HTML-based repository of individual pages. <strong>Reveal.js </strong>project is used to control the navigation between pages. See <a class="url" href="https://revealjs.com">https://revealjs.com</a> for more details on how this engine works.</p>
<p>Within the notebook, each cell has properties. The “right sidebar” is the property inspector window, letting us manage these properties. One of the properties is the slide type. This allows the analyst to mark cells for inclusion in a presentation. We’ll look at the technical details in <a href="#x1-3180001"><em>Preparing</em> <em>slides</em></a>.</p>
<p>There are a huge number of guides and tutorials on creating useful, informative presentations. The author likes to focus on three key points:</p>
<ol>
<li><div><p>Tell them what you’ll tell them. Present a list of topics (or an agenda or an outline). This will often use <strong>Markdown </strong>lists.</p>
</div></li>
<li><div><p>Tell them. This should proceed from general observations to the specific details of the presentation. This may be a mixture of <strong>Markdown </strong>text and figures.</p>
</div></li>
<li><div><p>Tell them what you told them. Present a summary of what your message was and the actions you’d like them to take in response. This, too, will often use <strong>Markdown </strong>lists.</p>
</div></li>
</ol>
<p>What’s important here is using the slide presentation to contain the keywords and phrases to help the audience remember the essential points and the call to action. This often means making use of <strong>Markdown </strong>text to emphasize words with a bold or italic font. It can also mean using <strong>Markdown </strong>lists of various kinds.</p>
<p>Another important part is avoiding visual clutter created when trying to cram too many points into a single page. When there are a lot of details, a presentation may not be the best approach to managing all the information. A report document may be more useful than a presentation. A document can provide supplemental details to support a brief presentation as well. </p>


<h3 data-number="18.1.2">14.1.2  Reports</h3>
<p>There’s a blurry edge between a presentation and a report. Presentations tend to be shorter and focus on keywords and phrases. Reports tend to be longer and written in complete sentences. A well-organized presentation with complete sentences can be viewed as a brief report. A report with short paragraphs and a lot of figures can look like a presentation.</p>
<p>Markdown formatting provides a lot of capabilities to create publication-quality typeset documents. The technology stack from <strong>Markdown </strong>to HTML to a browser or a PDF rendering engine involves a number of transformation steps to get from simple Unicode text in a notebook cell to a richly detailed rendering. This stack is a first-class part of Jupyter Lab and can be exploited by tools like <strong>Quarto </strong>or <strong>Jupyter</strong>{<strong>Book</strong>} to create reports.</p>
<p>Not all of the typesetting conventions used by publications are available through <strong>Markdown </strong>source files. For example, some publication style guides will include an abstract section that has narrower margins, and sometimes a smaller font. This can be challenging to implement in the <strong>Markdown </strong>language. Some authors will use a less complex layout that lacks all the visual cues of margin and font size.</p>
<p>The power of HTML and CSS is such that a great many typesetting capabilities are available to the author willing to master the technology stack. The reader is encouraged to explore the capabilities of <strong>Markdown</strong>, HTML, and CSS. The reader is also advised to set realistic goals; a great deal of time can be invested in combining <strong>Markdown </strong>and CSS to achieve typesetting effects that don’t enhance a report’s message.</p>
<p>It often works out well to put each paragraph into a separate cell. This is not a strict rule: sometimes a group of paragraphs should be put into a single cell.</p>
<p>Top-level headings should often be in cells by themselves. This can make it easier to reorganize content within those headings. Some lower-level headings should be in the cell with their introductory paragraph since the heading and the cell’s content are unlikely to be separated.</p>
<p>We might have a cell with a level one heading that looks like this:</p>
<div><div><pre class="source-code"># Title of our document</pre>
</div>
</div>
<p>This cell has only the title and no following text. There will likely be a subheading in the next cell with the introduction to the document.</p>
<p>A lower-level cell might look like this:</p>
<div><div><pre class="source-code">## Conclusion

The various **Anscombe Quartet** series all have consistent
means and standard deviations.</pre>
</div>
</div>
<p>This cell has both a level two title, and the introductory text for this section of the document. It uses <code>**</code> <strong>Markdown </strong>syntax to show that a particular phrase should have strong emphasis, usually done with a bold font.</p>
<p>In the next sections, we’ll talk about the technical approach to adding tools to the Jupyter environment so that the analyst can create presentations or reports. </p>



<h2 data-number="18.2">14.2  Overall approach</h2>
<p>We’ll talk about the general technical steps to creating presentations and reports in a Jupyter Notebook. For presentations, no additional tools are needed. For some simple reports, the <strong>File </strong>menu offers the ability to save and export a notebook as pure Markdown, as a PDF file, or as a LaTeX document. For more complicated reports, it can help to use supplemental tools that create a more polished final document. </p>

<h3 data-number="18.2.1">14.2.1  Preparing slides</h3>
<p>An HTML-based presentation via <strong>Reveal.js </strong>is a first-class feature of a Jupyter Notebook. The <strong>File </strong>menu offers the ability to save and export a notebook as Reveal.js slides. This will create an HTML file that will display as a presentation.</p>
<p>Within Jupyter, the property inspector is used to set the type of slide for a cell. There’s an icon of two meshed gears on the top right side of the page to show the property inspector in the right sidebar. Under the <strong>View</strong> menu, the option to show the right sidebar will also show the property inspector.</p>
<p>There are several choices of <strong>Slide Type </strong>for each cell. The most important two choices are “slide” and “skip”.</p>
<p>The “slide” will be displayed as part of the presentation. The “skip” cells will be dropped from the presentation; this is great for computations and data preparation. The other options allow combining cells into a single slide and having subsidiary presentation slides.</p>
<p>Creating <strong>Markdown </strong>content and setting the slide type to “slide” creates the narrative text portion of a presentation. These slides would include title pages, agenda, and key points: all of the prompts and takeaway bullet points will be in these kinds of cells.</p>
<p>For data visualizations, we can use <strong>Seaborn </strong>or <strong>PyPlot </strong>to create the figure. The cell output has the slide type set to “slide” in the property inspector to include the visualization.</p>
<p>We can mark the computations, function definitions, and doctest cells with a slide type of <strong>skip</strong>. This will omit these details from the presentation.</p>
<p>The analyst can share the notebook with audience members who want to see the supporting details.</p>
<p>The <strong>Reveal.js </strong>has a huge repertoire of capabilities. Many of these features are available through HTML markup. For example, the auto-animate feature will smoothly transition between cells. Since HTML markup is part of <strong>Markdown</strong>, some familiarity with HTML is required for the use of the most advanced features.</p>
<p>The final step is to use the CLI to convert the notebook to a slide deck. The <strong>File</strong> menu has a <strong>Save and Export Notebook As... </strong>option, but this tends to make all of the code visible. Having visible code can distract from the essential message of the visualizations.</p>
<p>The following command hides the cell input value — the code — from the presentation:</p>
<div><div><pre class="source-code">jupyter nbconvert --to slides --no-input &lt;notebook.ipynb&gt;</pre>
</div>
</div>
<p>Use the name of your notebook in place of <code>&lt;notebook.ipynb&gt;</code>. This will create an HTML file with the <strong>Reveal.js </strong>code included.</p>
<div><div><p>The overall process has three steps:</p>
<ol>
<li><div><p>Edit the notebook.</p>
</div></li>
<li><div><p>Prepare the presentation. (The terminal tool in Jupyter Lab is ideal for this.)</p>
</div></li>
<li><div><p>View the presentation to find problems.</p>
</div></li>
</ol>
<p>This is distinct from the way products like <strong>Keynote </strong>and <strong>PowerPoint</strong> work. When working with Jupyter Lab, there will a bit of flipping back- and forth between browser windows and the notebook window. Placing windows on each side of the display can be helpful.</p>
<p>Be sure to refresh the browser window after each change to the notebook.</p>
</div>
</div>
<p></p>


<h3 data-number="18.2.2">14.2.2  Preparing a report</h3>
<p>Creating reports is a first-class part of Jupyter Lab. The <strong>File </strong>menu offers the ability to save and export a notebook as pure Markdown, as a PDF file, or as a LaTeX document.</p>
<p>A tool like <strong>pandoc </strong>can convert a <strong>Markdown </strong>file into a wide variety of desired formats. For output creating using LaTeX formatting, a TeX rendering package is required to create a PDF file from the source. The <strong>TeXLive </strong>project maintains a number of tools useful for rendering LaTeX. For macOS users, the <strong>MacTex</strong> project offers the required binaries. An online tool like <strong>Overleaf </strong>is also useful for handling LaTeX.</p>
<p>In many cases, more sophisticated processing is required than simply saving a notebook as a pure <strong>Markdown </strong>file. We can add the <strong>Jupyter</strong>{<strong>Book</strong>} tools to our environment. For more information see <a class="url" href="https://jupyterbook.org">https://jupyterbook.org</a>.</p>
<p>The <code>jupyter-book</code> component needs to be added to the <code>requirements-dev.txt</code> file so other developers know to install it.</p>
<p>When using <strong>conda </strong>to manage virtual environments, the command might look like the following:</p>
<div><div><pre class="console">% conda install --channel conda-forge jupyter-book</pre>
</div>
</div>
<p>When using other tools to manage virtual environments, the command might look like the following:</p>
<div><div><pre class="console">% python -m pip install jupyter-book</pre>
</div>
</div>
<p>A Jupyter book can be considerably more complicated than a single notebook file. There will be configuration and <strong>table-of-contents </strong>(<strong>TOC</strong>) files to structure the overall report. The content can be provided in a mixture of <strong>Markdown</strong>, reStructuredText, and Notebook files. Additionally, an extended version of the <strong>Markdown </strong>language, <strong>MyST</strong>, is available to add a wide variety of semantic markup capabilities.</p>
<p>One way to get started is to use the <code>jupyter-book</code><code> create</code> command to create a template project. This template includes the required <code>_config.yml</code> and <code>_toc.yml</code> files. It also includes examples of various other files that might be part of a project.</p>
<p>The <code>_config.yml</code> file has the title and author information. This is the place to start customizing the content to provide the correct report and author names. Other parts of the configuration may need to be changed, depending on how the report will be published. The built-in assumption is an HTML upload to a public repository. For many reports, this is ideal.</p>
<p>For some enterprise projects, however, reporting to a public repository with links to public GitHub isn’t acceptable. For these cases, the <code>_config.yml</code> file will have to be changed to correct the repository options to refer to an in-house repository.</p>
<p>It’s often helpful to immediately edit the <code>_toc.yml</code> file, and start creating the report’s outline. Generally, the data and notebooks already exist. The audience is often known, and the key points the audience members need to absorb are clear, permitting the analyst to create the outline, and placeholder documents, right away.</p>
<p>In some cases, the analyst can fill in the outline with notes extracted from the analysis notebooks. This refactoring of content can help to trim working notebooks down to the essential computation and visualization. The narrative text can be segregated into MyST or Markdown files outside the notebooks.</p>
<p>Once the content is in draft form, a book is created with the <code>jupyter-book</code><code> build</code> command. This will use the configuration and TOC file to build the complete document from various sources. The default document is an HTML page.</p>
<p>As of this book’s publication date, version 0.15.1 includes a warning that direct PDF production is under development and may have bugs. The more reliable way to create PDFs is to use <strong>Jupyter</strong>{<strong>Book</strong>} to create a LaTeX file. The OS-native <code>LaTeX</code> command can be used to build PDFs. An alternative is to use the <code>sphinx-jupyterbook-latex</code> package to wrap the TeXtools that transform the LaTeX to PDF.</p>
<p>This involves a number of moving parts, and the installation can be daunting. Here are some of the steps involved:</p>
<ol>
<li><div><p>The source <strong>Markdown </strong>text is converted to LaTeX by Jupyter Book.</p>
</div></li>
<li><div><p>Some intermediate work may be performed by the <code>sphinx-jupyterbook-latex</code> package.</p>
</div></li>
<li><div><p>The final PDF is created by an OS <code>latex</code> command; this is either the <strong>MacTex </strong>or <strong>TexLive </strong>installation of the TeX tools.</p>
</div></li>
</ol>
<p>The CLI build command is the <code>jupyter-book</code><code> build</code> command with an additional option <code>--builder</code><code> pdflatex</code> to specify that Sphinx and the TeX tools are used to render the PDF. </p>


<h3 data-number="18.2.3">14.2.3  Creating technical diagrams</h3>
<p>Technical diagrams, including the wide variety of diagrams defined by the UML, are often challenging to create. Popular presentation tools like <strong>Keynote </strong>and <strong>PowerPoint </strong>have clever drawing tools with lots of built-in shapes and options for positioning those shapes on a slide.</p>
<p>There are several choices for creating diagrams for a presentation:</p>
<ul>
<li><p>Use a separate graphics application to create <code>.PNG</code> or <code>.jpg</code> files and incorporate the graphics into the document. Many of the diagrams in this book were created with PlantUML, for example. See <a class="url" href="https://plantuml.com">https://plantuml.com</a>.</p></li>
<li><p>Use <code>matplotlib</code>, and write code to create the image. This can involve a lot of programming to draw some boxes connected by arrows.</p></li>
</ul>
<p>The <strong>PlantWEB </strong>project provides a Python interface to the PlantUML web service. This allows an analyst to work as follows:</p>
<ol>
<li><div><p>Create a file with text in the <strong>domain-specific language </strong>(<strong>DSL</strong>) that describes the image.</p>
</div></li>
<li><div><p>Render the image with the PlantUML engine to create an <code>.jpg</code> file.</p>
</div></li>
<li><div><p>Import the image into the notebook as an IPython <code>SVG</code> object.</p>
</div></li>
</ol>
<p>The image rendering uses the PlantUML server; this requires an active internet connection. In cases where the analyst might be working offline, the <strong>PlantWEB</strong> documentation suggests using <strong>Docker </strong>to run a local service in a local Docker container. This will do diagram rendering quickly without the requirement to connect to the internet.</p>
<p>Having looked at the various technical considerations to create slides and a report, we can emphasize the deliverables for this project. </p>



<h2 data-number="18.3">14.3  Deliverables</h2>
<p>There are two deliverables for this project:</p>
<ul>
<li><p>A presentation</p></li>
<li><p>A report</p></li>
</ul>
<p>The presentation should be an HTML document using the <strong>Reveal.js </strong>slide deck.</p>
<p>The report should be a PDF document from a single notebook. It should contain the visualization figures and some narrative text explaining the images.</p>
<p>For information on unit testing and acceptance testing of the notebooks, see <a href="ch017.xhtml#x1-29700013"><em>Chapter</em><em> 13</em></a>, <a href="ch017.xhtml#x1-29700013"><em>Project 4.1: Visual Analysis Techniques</em></a>. This project should build on the previous project. It doesn’t involve dramatic new programming. Instead, it involves the integration of a large number of components to create meaningful, useful presentations and reports. </p>


<h2 data-number="18.4">14.4  Summary</h2>
<p>In this chapter, we have built two important working results of data analysis:</p>
<ul>
<li><p>Slide decks that can be used as presentations to interested users and stakeholders</p></li>
<li><p>Reports in PDF format that can be distributed to stakeholders</p></li>
</ul>
<p>The line between these two is always hazy. Some presentations have a lot of details and are essentially reports presented in small pages.</p>
<p>Some reports are filled with figures and bullet points; they often seem to be presentations written in portrait mode.</p>
<p>Generally, presentations don’t have the depth of detail reports do. Often, reports are designed for long-term retention and provide background, as well as a bibliography to help readers fill in missing knowledge. Both are first-class parts of a Jupyter notebook and creating these should be part of every analyst’s skills.</p>
<p>This chapter has emphasized the additional tools required to create outstanding results. In the next chapter, we’ll shift gears and look at some of the statistical basics of data modeling. </p>


<h2 data-number="18.5">14.5  Extras</h2>
<p>Here are some ideas for the reader to add to these projects. </p>

<h3 data-number="18.5.1">14.5.1  Written reports with UML diagrams</h3>
<p>In <a href="#x1-3200003"><em>Creating technical diagrams</em></a> the process of creating UML diagrams was summarized. The reader is encouraged to use PlantUML to create C4 diagrams for their data acquisition and cleaning pipeline. These <code>.jpg</code> files can then be incorporated into a report as Markdown figures.</p>
<p>For more information on the C4 model, see <a class="url" href="https://c4model.com">https://c4model.com</a>.</p>
<p></p>



</body>
</html>
