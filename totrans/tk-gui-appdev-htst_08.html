<html><head></head><body><div><div><div><div><h1 class="title"><a id="appA"/>Appendix A. Miscellaneous Tips</h1></div></div></div><p>We are now into the final section of the book. Let's conclude by discussing concepts that do form a common theme in many GUI applications but did not appear in our applications.</p><div><div><div><div><h1 class="title"><a id="ch07lvl1sec75"/>Mission Briefing</h1></div></div></div><p>The topics covered here include:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Tracing Tkinter variables</li><li class="listitem" style="list-style-type: disc">Widget traversal</li><li class="listitem" style="list-style-type: disc">Validating user input</li><li class="listitem" style="list-style-type: disc">Formatting widget data</li><li class="listitem" style="list-style-type: disc">More on fonts</li><li class="listitem" style="list-style-type: disc">Working with Unicode characters</li><li class="listitem" style="list-style-type: disc">Tkinter class hierarchy</li><li class="listitem" style="list-style-type: disc">Custom-made mixins</li><li class="listitem" style="list-style-type: disc">Tips for code cleanup and program optimization</li><li class="listitem" style="list-style-type: disc">Distributing the Tkinter application</li><li class="listitem" style="list-style-type: disc">Limitations of Tkinter</li><li class="listitem" style="list-style-type: disc">Tkinter alternatives </li><li class="listitem" style="list-style-type: disc">Getting interactive help</li><li class="listitem" style="list-style-type: disc">Tkinter in Python 3.<em>x</em></li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec76"/>Tracing Tkinter variables</h1></div></div></div><p>When you specify a Tkinter variable as a <code class="literal">textvariable</code> for a widget <code class="literal">(textvariable = myvar)</code>, the widget automatically gets updated whenever the value of the variable changes. However, there might be times when, in addition to updating the widget, you need to do some extra <a id="id656" class="indexterm"/>processing at the time of reading or writing (or modifying) the variable.</p><p>Tkinter provides a method to attach a callback method that would be triggered every time the value of a variable is accessed. Thus, the callback acts as a <strong>variable observer</strong>
<a id="id657" class="indexterm"/>. The callback method is named <code class="literal">trace_variable(self, mode, callback)</code>, or simply <code class="literal">trace(self, mode, callback)</code>.</p><p>The mode argument can take any one of <code class="literal">'r'</code>, <code class="literal">'w'</code>, <code class="literal">'u'</code> values, which stand for read, write, or undefined. Depending upon the mode specifications, the callback method is triggered if the variable is read or written.</p><p>The callback method gets three arguments by default. The arguments in order of their position are:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Name of the Tkinter variable</li><li class="listitem" style="list-style-type: disc">The index of the variable, if the Tkinter variable is an array, else an empty string</li><li class="listitem" style="list-style-type: disc">The access modes (<code class="literal">'w'</code>, '<code class="literal">r'</code>, or '<code class="literal">u'</code>)</li></ul></div><p>Note that the triggered callback function may also modify the value of the variable. This modification does not, however, trigger any additional callbacks.</p><p>Let's see a small example of variable tracing in Tkinter, where writing into the Tkinter variable into an entry widget triggers a callback function (refer to the <code class="literal">8.01 trace variable.py</code> Python file available in the code bundle):</p><div><pre class="programlisting">from Tkinter import *
root = Tk()
myvar = StringVar()
def trace_when_myvar_written(var,indx,mode):
<strong>    print"Traced variable %s"%myvar.get()</strong>

<strong>myvar.trace_variable("w", trace_when_myvar_written)</strong>
Label(root, textvariable=myvar).pack(padx=5, pady=5)
Entry(root, textvariable=myvar).pack(padx=5, pady=5)

root.mainloop()</pre></div><p>The description of the preceding code is as follows:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">This code creates a trace variable on the Tkinter variable <code class="literal">myvar</code> in the write (<code class="literal">"w"</code>) mode</li><li class="listitem" style="list-style-type: disc">The trace variable is attached to a callback method named <code class="literal">trace_when_myvar_written</code> (this means that every time the value of <code class="literal">myvar</code> is changed, the callback method will be triggered)</li></ul></div><p>Now, every time you write into the entry widget, it modifies the value of <code class="literal">myvar</code>. Because we have set a trace on <code class="literal">myvar</code>, it triggers the callback method, which in our example, simply prints the new value into the console.</p><p>The code<a id="id658" class="indexterm"/> creates a GUI window similar to the one shown here:</p><div><img src="img/7941OT_08_01.jpg" alt="Tracing Tkinter variables"/></div><p>It also produces a console output in IDLE, which shows like the following once you start typing in the GUI window:</p><div><pre class="programlisting">Traced variable T
Traced variable Tr
Traced variable Tra
Traced variable Trac
Traced variable Traci
Traced variable Tracin
Traced variable Tracing</pre></div><div><div><h3 class="title"><a id="note57"/>Note</h3><p>The trace on a variable is active until it is explicitly deleted. You can delete a trace using:</p><div><pre class="programlisting">trace_vdelete(self, mode, callbacktobedeleted)
The <code class="literal">trace</code> method returns the name of the callback method. This can be used to get the name of the callback method that is to be deleted.</pre></div></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec77"/>Widget traversal</h1></div></div></div><p>When a GUI has more than one widget, a given widget can come under focus by an explicit mouse-click on the widget. Alternatively, the focus can be shifted to another given widget by pressing the <em>Tab</em> key on the keyboard in the order the widgets were created in the program.</p><p>It is therefore vital to create widgets in the order we want the user to traverse through them, or else the user will have a tough time navigating between the widgets using the keyboard.</p><p>Different widgets are designed to behave differently to different keyboard strokes. Let's therefore spend some time trying to understand the rules of traversing through widgets using the keyboard.</p><p>Let's look at the code of the <code class="literal">8.02 widget traversal.py</code> Python file to understand the keyboard traversal behavior for different widgets. Once you run the mentioned <code class="literal">.py</code> file, it shows a window something like the following:</p><div><img src="img/7941OT_08_02.jpg" alt="Widget traversal"/></div><p>The code is simple. It adds an entry widget, a few buttons, a few radio buttons, a text widget, and a scale widget. However, it also demonstrates some of the most important keyboard traversal behaviors for these widgets.</p><p>Here are some<a id="id659" class="indexterm"/> important points to note (refer to <code class="literal">8.02 widget traversal.py</code>):</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <em>Tab</em> key can be used to traverse forward, and <em>Shift</em> + <em>Tab</em> can be used to traverse backwards.</li><li class="listitem" style="list-style-type: disc">The text widget cannot be traversed using the <em>Tab</em> key. This is because the text widget can contain tab characters as its content. Instead, the text widget can be traversed using <em>Ctrl</em> + <em>Tab</em>.</li><li class="listitem" style="list-style-type: disc">Buttons on the widget can be pressed using the spacebar. Similarly, check buttons and radio buttons can also be toggled using the spacebar.</li><li class="listitem" style="list-style-type: disc">You can <a id="id660" class="indexterm"/>go up and down the items in a Listbox widget using the up and down arrows.</li><li class="listitem" style="list-style-type: disc">The Scale widget responds to both the left and right keys or up and down keys. Similarly, the Scrollbar widget responds to both the left/right or up/down keys, depending on their orientation.</li><li class="listitem" style="list-style-type: disc">Most of the widgets (except Frame, Label, and Menus) get an outline by default when they have the focus set on them. This outline normally displays as a thin black border around the widget. You can even set the Frame and Label widgets to show this outline by specifying the <code class="literal">highlightthickness</code> option to a non-zero <code class="literal">Integer</code> value for these widgets.</li><li class="listitem" style="list-style-type: disc">We change the color of the outline using <code class="literal">highlightcolor= 'red'</code> in our code.</li><li class="listitem" style="list-style-type: disc">Frame, Label, and Menu are not included in the tab navigation path. However, they can be included in the navigation path by using the <code class="literal">takefocus = 1</code> option. You can explicitly exclude a widget from the tab navigation path by setting the <code class="literal">takefocus= 0</code> option.</li><li class="listitem" style="list-style-type: disc">The <em>Tab</em> key traverses widgets in the order they were created. It visits a parent widget first (unless it is excluded using <code class="literal">takefocus = 0</code>) followed by all its children widgets.</li><li class="listitem" style="list-style-type: disc">You can use <code class="literal">widget.focus_force()</code> to force the input focus to the widget.</li></ul></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec78"/>Validating user input</h1></div></div></div><p>Let's now discuss input data validation.</p><p>Most of the applications <a id="id661" class="indexterm"/>we have developed in our book are point and click-based (drum machine, chess, drawing application), where validation of user input is not required. </p><p>However, data validation is a <em>must</em> in programs like our phonebook application, where the user enters some data, and we store it in a database.</p><p>Ignoring the user input validation can be dangerous in such applications because input data can be misused for SQL injection. In general, any application where an user can enter textual data, is a good candidate for validating user input. In fact, it is almost considered a maxim not to trust user inputs.</p><p>A wrong<a id="id662" class="indexterm"/> user input may be intentional or accidental. In either case, if you fail to validate or sanitize the data, you may cause unexpected error in your program. In worst cases, user input can be used to inject harmful code that may be capable of crashing a program or wiping out an entire database.</p><p>Widgets such as Listbox, Combobox, and Radiobuttons allow limited input options, and hence, cannot normally be misused to input wrong data. On the other hand, widgets such as Entry widget, Spinbox widget, and Text widget allow a large possibility of user inputs, and hence, need to be validated for correctness.</p><p>To enable validation on a widget, you need to specify an additional option of the form <code class="literal">validate = 'validationmode'</code> to the widget.</p><p>For example, if you want to enable validation on an entry widget, you begin by specifying the validate option as follows:</p><div><pre class="programlisting">Entry( <strong>root, validate="all", validatecommand=vcmd</strong>)</pre></div><p>The validation can occur in<a id="id663" class="indexterm"/> one of the following <strong>validation modes</strong>:</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Validation Mode</p>
</th><th style="text-align: left" valign="bottom">
<p>Explanation</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">none</code>
<a id="id664" class="indexterm"/>
</p>
</td><td style="text-align: left" valign="top">
<p>This is the default mode. No validation occurs if <code class="literal">validate</code> is set to <code class="literal">"none"</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">focus</code>
<a id="id665" class="indexterm"/>
</p>
</td><td style="text-align: left" valign="top">
<p>When <code class="literal">validate</code> is set to <code class="literal">"focus"</code>, the <code class="literal">validate</code> command is called twice; once when the widget receives <code class="literal">focus</code> and once when the <code class="literal">focus</code> is lost</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">focusin</code>
<a id="id666" class="indexterm"/>
</p>
</td><td style="text-align: left" valign="top">
<p>The <code class="literal">validate</code> command is called when the widget receives <code class="literal">focus</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">focusout</code>
<a id="id667" class="indexterm"/>
</p>
</td><td style="text-align: left" valign="top">
<p>The <code class="literal">validate</code> command is called when the widget loses <code class="literal">focus</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">key</code>
<a id="id668" class="indexterm"/>
</p>
</td><td style="text-align: left" valign="top">
<p>The <code class="literal">validate</code> command is called when the entry is <code class="literal">edited</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">all</code>
<a id="id669" class="indexterm"/>
</p>
</td><td style="text-align: left" valign="top">
<p>The <code class="literal">validate</code> command is called in all the above cases</p>
</td></tr></tbody></table></div><p>The code of the <code class="literal">8.03 validation mode demo.py</code> file demonstrates all these validation modes by attaching them to a single validation method. Note the different ways different Entry widgets respond to different events. Some Entry widgets call the validation method on focus events while others call the validation method at the time of entering key strokes into the widget, while still others use a combination of focus and key events.</p><p>Although we did set<a id="id670" class="indexterm"/> the validation mode to trigger the <code class="literal">validate</code> method, we need some sort of data to validate against our rules. This is passed to the <code class="literal">validate</code> method using<a id="id671" class="indexterm"/> <strong>percent substitution</strong>. For instance, we passed the mode as an argument to our <code class="literal">validate</code> method by performing a percent substitution on the <code class="literal">validate</code> command, as shown in the following:</p><div><pre class="programlisting">vcmd = (self.root.register(self.validate), '%V')</pre></div><p>We followed by passing the value of <code class="literal">v</code> as an argument to our validate method:</p><div><pre class="programlisting">def validate(self, v)</pre></div><p>In addition to <code class="literal">%V</code>, Tkinter recognizes the following percent substitutions:</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Percent substitutions</p>
</th><th style="text-align: left" valign="bottom">
<p>Explanation</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%d</code>
<a id="id672" class="indexterm"/>
</p>
</td><td style="text-align: left" valign="top">
<p>Type of action that occurred on the widget—<code class="literal">1</code> for insert, <code class="literal">0</code> for delete, and <code class="literal">-1</code> for focus, forced, or textvariable validation.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%i</code>
<a id="id673" class="indexterm"/>
</p>
</td><td style="text-align: left" valign="top">
<p>Index of <code class="literal">char</code> string inserted or deleted, if any, else it will be <code class="literal">-1</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%P</code>
<a id="id674" class="indexterm"/>
</p>
</td><td style="text-align: left" valign="top">
<p>The value of the entry if the edit is allowed. If you are configuring the Entry widget to have a new textvariable, this will be the value of that textvariable.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%s</code>
<a id="id675" class="indexterm"/>
</p>
</td><td style="text-align: left" valign="top">
<p>The current value of entry, prior to editing.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%S</code>
<a id="id676" class="indexterm"/>
</p>
</td><td style="text-align: left" valign="top">
<p>The text string being inserted/deleted, if any, <code class="literal">{}</code> otherwise.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%v</code>
<a id="id677" class="indexterm"/>
</p>
</td><td style="text-align: left" valign="top">
<p>The type of validation currently set.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%V</code>
<a id="id678" class="indexterm"/>
</p>
</td><td style="text-align: left" valign="top">
<p>The type of validation that triggered the callback method (key, focusin,  focusout, and forced).</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">%W</code>
<a id="id679" class="indexterm"/>
</p>
</td><td style="text-align: left" valign="top">
<p>The name of the Entry widget.</p>
</td></tr></tbody></table></div><p>These validations provide us with the necessary data we can use to validate the input.</p><p>Let's now pass all these data and just print them through a dummy <code class="literal">validate</code> method just to see the kind of data we can expect to get for carrying out our validations (refer to the code of <code class="literal">8.04 percent substitutions demo.py</code>):</p><div><div><h3 class="title"><a id="tip29"/>Tip</h3><p>Take particular note of data returned by <code class="literal">%P</code> and <code class="literal">%s</code>, because they pertain to the actual data entered by the user in the Entry widget.</p><p>In most cases, you will be checking either of these two data against your validation rules.</p></div></div><p>Now that <a id="id680" class="indexterm"/>we have a background of rules of data validation, let's see two practical examples that demonstrate input validation.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec154"/>Key Validation</h2></div></div></div><p>Let's <a id="id681" class="indexterm"/>assume that we have a form that asks for a user's name. We want the user to input only alphabets or space characters in the name. Thus, any number or special character is not to be allowed, as shown in the following screenshot of the widget:</p><div><img src="img/7941OT_08_03.jpg" alt="Key Validation"/></div><p>This is clearly a case of <code class="literal">'key'</code> validation mode, because we want to check if an entry is valid after every key press. The percent substitution that we need to check is <code class="literal">%S</code>, because it yields the text string being inserted or deleted in the Entry widget. Accordingly, the code that validates the entry widget is as follows (refer to <code class="literal">8.05 key validation.py</code>):</p><div><pre class="programlisting">import Tkinter as tk
class KeyValidationDemo():
    def __init__(self):
        root = tk.Tk()
        tk.Label(root, text='Enter your name').pack()
<strong>        vcmd = (root.register(self.validate_data), '%S')</strong>
<strong>        invcmd = (root.register(self.invalid_name), '%S')</strong>
<strong>        tk.Entry(root, validate="key", validatecommand=vcmd,invalidcommand=invcmd).pack(pady=5, padx=5)</strong>
        self.errmsg = tk.Label(root, text= '', fg='red')
        self.errmsg.pack()
        root.mainloop()

<strong>def validate_data</strong>(self, S):
    self.errmsg.config(text='')
    return (S.isalpha() or S =='') # always return True or False

<strong>def invalid_name</strong>(self, S):
    self.errmsg.config(text='Invalid characters \n name canonly have alphabets'%S)

app= KeyValidationDemo()</pre></div><p>The description <a id="id682" class="indexterm"/>of the preceding code is as follows:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">We first register two options <code class="literal">validatecommand</code> (<code class="literal">vcmd</code>) and <code class="literal">invalidcommand</code> (<code class="literal">invcmd</code>).</li><li class="listitem" style="list-style-type: disc">In our example, <code class="literal">validatecommand</code> is registered to call the <code class="literal">validate_data</code> method, and the <code class="literal">invalidcommand</code> option is registered to call another method named <code class="literal">invalid_name</code>.</li><li class="listitem" style="list-style-type: disc">The <code class="literal">validatecommand</code> option specifies a method to be evaluated which would validate the input. The validation method must return a Boolean value, where a <code class="literal">True</code> signifies that the data entered is valid, and a <code class="literal">False</code> return value signifies that data is invalid.</li><li class="listitem" style="list-style-type: disc">If the validate method returns <code class="literal">False</code> (invalid data), no data is added to the Entry widget and the script registered for <code class="literal">invalidcommand</code> is evaluated. In our case, a <code class="literal">False</code> validation would call the <code class="literal">invalid_name</code> method. The <code class="literal">invalidcommand</code> method is generally responsible for displaying error messages or setting back the focus to the Entry widget.</li></ul></div><div><div><h3 class="title"><a id="note58"/>Note</h3><p>Let's look at the code <code class="literal">register(self, func, subst=None, needcleanup=1)</code>.</p><p>The <code class="literal">register</code> method returns a newly created <code class="literal">Tcl</code> function. If this function is called, the Python function <code class="literal">func</code> is executed. If an optional function <code class="literal">subst</code> is provided it is executed before <code class="literal">func</code>.</p></div></div></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec155"/>Focus Out Validation</h2></div></div></div><p>The previous example demonstrated validation in <code class="literal">'key'</code> mode. This means that the validation method was called after every key press to check if the entry was valid.</p><p>However, there are situations when you might want to check the entire string entered into the widget, rather than checking individual key stroke entries.</p><p>For example, if an Entry widget accepts a valid e-mail address, we would ideally like to check the validity after the user has entered the entire e-mail address, and not after every key stroke entry.<a id="id683" class="indexterm"/> This would qualify as validation in <code class="literal">'focusout'</code> mode.</p><div><img src="img/7941OT_08_04.jpg" alt="Focus Out Validation"/></div><p>Check out the code of <code class="literal">8.06 focus out validation.py</code> for a demonstration on e-mail validation in the <code class="literal">focusout</code> mode:</p><div><pre class="programlisting">import Tkinter as tk
import re
class FocusOutValidationDemo():
    def __init__(self):
        self.master = tk.Tk()
        self.errormsg = tk.Label(text='', fg='red')
        self.errormsg.pack()
        tk.Label(text='Enter Email Address').pack()
        vcmd = (self.master.<strong>register(self.validate_email), '%P'</strong>)
        invcmd = (self.master.<strong>register(self.invalid_email), '%P'</strong>)
        self.emailentry = tk.Entry(self.master, validate ="focusout",    <strong>validatecommand=vcmd</strong>, <strong>invalidcommand=invcmd</strong>)
        self.emailentry.pack()
        tk.Button(self.master, text="Login").pack()
        tk.mainloop()

    def validate_email(self, P):
        self.errormsg.config(text='')
<strong>        x = re.match(r"[^@]+@[^@]+\.[^@]+", P)</strong>
<strong>        return (x != None)# True(valid email)/False(invalid email)</strong>

    def invalid_email(self, P):
        self.errormsg.config(text='Invalid Email Address')
        self.emailentry.focus_set()
    
app = FocusOutValidationDemo()</pre></div><p>The description of the preceding code is as follows:</p><p>The code has a lot of<a id="id684" class="indexterm"/> similarities to the previous validation example. However, note the following differences:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The validate mode is set to <code class="literal">'focusout'</code> in contrast to the <code class="literal">'key'</code> mode in the previous example. This means that the validation would be done only when the Entry widget loses <code class="literal">focus</code>.</li><li class="listitem" style="list-style-type: disc">This program uses data provided by the <code class="literal">%P</code> percentage substitution, in contrast to <code class="literal">%S</code>, as used in the previous example. This is understandable as <code class="literal">%P</code> provides the value entered in the Entry widget, but <code class="literal">%S</code> provides the value of the last key stroke.</li><li class="listitem" style="list-style-type: disc">This program uses regular expressions to check if the entered value corresponds to a valid e-mail format. Validation usually relies on regular expressions and a whole lot of explanation to cover this topic, but it is out of the scope of this project and the book. For more information on regular expression modules, visit the following link:<p>
<a class="ulink" href="http://docs.python.org/2/library/re.html">http://docs.python.org/2/library/re.html</a>
</p></li></ul></div><p>This concludes our discussion on input validation in Tkinter. Hopefully, you should now be able to implement input validation to suit your custom needs.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec79"/>Formatting widget data</h1></div></div></div><p>Several input data such as date, time, phone number, credit card number, website URL, IP number, and so on have an associated display format. For instance, date is better represented in <a id="id685" class="indexterm"/>a MM/DD/YYYY format.</p><p>Fortunately, it is easy to format the data in the required format as the user enters them in the widget (refer to <code class="literal">8.07 formatting entry widget to display date.py</code>). The mentioned Python file formats the user input automatically to insert forward slashes at the required places to display user-entered date in the MM/DD/YYYY format.</p><div><img src="img/7941OT_08_05.jpg" alt="Formatting widget data"/></div><div><pre class="programlisting">from Tkinter import *
class FormatEntryWidgetDemo:
    def __init__(self, root):
        Label(root, text='Date(MM/DD/YYYY)').pack()
        self.entereddata = StringVar()
        self.dateentrywidget =Entry(textvariable=self.entereddata)
        self.dateentrywidget.pack(padx=5, pady=5)
        self.dateentrywidget.focus_set()
        self.slashpositions = [2, 5]
        root.bind('&lt;Key&gt;', self.format_date_entry_widget)

    def format_date_entry_widget(self, event):
        entrylist = [c for c in self.entereddata.get() if c != '/']
        for pos in self.slashpositions:
            if len(entrylist) &gt; pos:
                entrylist.insert(pos, '/')
        self.entereddata.set(''.join(entrylist))
        # Controlling cursor
        cursorpos = self.dateentrywidget.index(INSERT)
        for pos in self.slashpositions:
            if cursorpos == (pos + 1): # if cursor is on slash
                cursorpos += 1
          if event.keysym not in ['BackSpace', 'Right', 'Left','Up', 'Down']:
                self.dateentrywidget.icursor(cursorpos)
root = Tk()
FormatEntryWidgetDemo(root)
root.mainloop()</pre></div><p>The description<a id="id686" class="indexterm"/> of the preceding code is as follows:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The Entry widget is bound to the key press event, where every new key press calls the related callback <code class="literal">format_date_entry_widget</code> method.</li><li class="listitem" style="list-style-type: disc">First, the <code class="literal">format_date_entry_widget</code> method breaks down the entered text into an equivalent list by the name <code class="literal">entrylist</code>, also ignoring any slash <code class="literal">'/'</code> symbol if entered by the user.</li><li class="listitem" style="list-style-type: disc">It then iterates through the <code class="literal">self.slashpositions</code> list and inserts the slash symbol at all required positions in the <code class="literal">entrylist</code> argument. The net result of this is a list that has slash inserted at all the right places.</li><li class="listitem" style="list-style-type: disc">The next line converts this list into an equivalent string using <code class="literal">join()</code>, and then sets the value of our Entry widget to this string. This ensures that the Entry widget text is formatted into the aforementioned date format.</li><li class="listitem" style="list-style-type: disc">The remaining pieces of code simply control the cursor to ensure that the cursor advances by one position whenever it encounters a slash symbol. It also ensures that key presses, such as <code class="literal">'BackSpace'</code>, <code class="literal">'Right'</code>, <code class="literal">'Left'</code>, <code class="literal">'Up'</code>, and <code class="literal">'Down'</code> are handled properly.</li></ul></div><p>Note that this method does not validate the date value and the user may add any invalid date. The method defined here will simply format it by adding forward slash at third and sixth positions. Adding date validation to this example is left as an exercise for you to complete.</p><p>This concludes our brief discussion on formatting data within widgets. Hopefully, you should now be able to create formatted widgets for a wide variety of input data that can be displayed better in a given format.</p></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec80"/>More on fonts</h1></div></div></div><p>Many Tkinter widgets let you specify custom font specifications either at the time of widget creation or later using the <code class="literal">configure()</code> option. For most cases, default fonts provide a standard look and feel. However, should you want to change font specifications, Tkinter lets you do so. There is one caveat though.</p><p>When you <a id="id687" class="indexterm"/>
<a id="id688" class="indexterm"/>specify your own font, you need to make sure it looks good on all platforms where the program is intended to be deployed. This is because a font might look good and match well on a particular platform, but may look awful on another. Unless you know what you are doing, it is always advisable to stick to Tkinter's default fonts.</p><p>Most platforms have their own set of standard fonts that are used by the platform's native widgets. So, rather than trying to reinvent the wheel on what looks good on a given platform or what would be available for a given platform, Tkinter assigns these standard platform-specific fonts into its widget, thus providing a native look and feel on every platform.</p><div><div><h3 class="title"><a id="note59"/>Note</h3><p>Tkinter assigns nine fonts to nine different names, which you can therefore use in your programs. The font names are as follows:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">TkDefaultFont</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">TkTextFont</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">TkFixedFont</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">TkMenuFont</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">TkHeadingFont</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">TkCaptionFont</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">TkSmallCaptionFont</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">TkIconFont </code></li><li class="listitem" style="list-style-type: disc"><code class="literal">TkTooltipFont</code><a id="id689" class="indexterm"/><a id="id690" class="indexterm"/></li></ul></div></div></div><p>Accordingly, you can use them in your programs in the following way:</p><div><pre class="programlisting">Label(text="Sale Up to 50% Off !", font="TkHeadingFont 20")

Label(text="**Conditions Apply", font="TkSmallCaptionFont 8")</pre></div><p>Using these kinds of fonts mark up, you can be assured that your font will look native across all platforms.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec156"/>Finer Control over Font</h2></div></div></div><p>In addition <a id="id691" class="indexterm"/>to the above method on handling fonts, Tkinter provides a separate <code class="literal">Font</code> class implementation. The source code of this class is located at the following link: &lt;<code class="literal">Python27_installtion_dir&gt;\Lib\lib-tk\tkfont.py</code>.</p><p>To use this module, you need to import <code class="literal">tkFont</code> into your namespace.(refer to <code class="literal">8.08 tkfont demo.py</code>):</p><div><pre class="programlisting">from Tkinter import Tk, Label, Pack
import tkFont
root=Tk()
label = Label(root, text="Humpty Dumpty was pushed")
label.pack()
<strong>currentfont = tkFont.Font(font=label['font'])</strong>
print'Actual :' + str(currentfont.<strong>actual</strong>())
print'Family :' + currentfont.<strong>cget</strong>("family")
print'Weight :' + currentfont.cget("weight")
print'Text width of Dumpty : %d' %currentfont.<strong>measure</strong>("Dumpty")
print'Metrics:' + str(currentfont.<strong>metrics</strong>())
<strong>currentfont.config(size=14)</strong>
label.config (font=currentfont)
print'New Actual :' + str(currentfont.<strong>actual</strong>())
root.mainloop()</pre></div><p>The console output of this program is as follows:</p><div><pre class="programlisting">
<strong>Actual :{'family': 'Segoe UI', 'weight': 'normal', 'slant': 'roman', 'overstrike': 0, 'underline': 0, 'size': 9}</strong>
<strong>Family : Segoe UI</strong>
<strong>Weight : normal</strong>
<strong>Text width of Dumpty : 43</strong>
<strong>Metrics:{'fixed': 0, 'ascent': 12, 'descent': 3, 'linespace': 15}</strong>
</pre></div><p>As you can see, the <code class="literal">tkfont</code> module provides a much better fine-grained control over various aspects of fonts, which are otherwise inaccessible.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec157"/>Font Selector</h2></div></div></div><p>Now that we have seen the basic features available in the <code class="literal">tkfont</code> module, let's use it to implement a font selector. <a id="id692" class="indexterm"/>The font selector would look like the one shown here:</p><div><img src="img/7941OT_08_06.jpg" alt="Font Selector"/></div><p>The code for the font selector is as follows (refer to <code class="literal">8.09 font selector.py</code>):</p><div><pre class="programlisting">from Tkinter import *
import ttk
import tkFont
class <strong>FontSelectorDemo</strong>():
    def __init__(self):
      self.currentfont    = tkFont.Font(font=('Times New Roman',12))
      self.family         = StringVar(value='Times New Roman')
      self.fontsize       = StringVar(value='12')
      self.fontweight     =StringVar(value=tkFont.NORMAL)
      self.slant          =  StringVar(value=tkFont.ROMAN)
      self.underlinevalue = BooleanVar(value=False)
      self.overstrikevalue= BooleanVar(value=False)
      self.<strong>gui_creator</strong>()</pre></div><p>The description <a id="id693" class="indexterm"/>of the preceding code is as follows: </p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">We import <code class="literal">Tkinter</code> (for all widgets), <code class="literal">ttk </code>(for the Combobox widget), and <code class="literal">tkfont</code> for handling font-related aspects of the program</li><li class="listitem" style="list-style-type: disc">We create a class named <code class="literal">FontSelectorDemo</code> and use its <code class="literal">__init_</code> method to initialize al attributes that we intend to track in our program.</li><li class="listitem" style="list-style-type: disc">Finally, the <code class="literal">__init__</code> method calls another method named <code class="literal">gui_creator()</code>, which is be responsible for creating all the GUI elements of the program</li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec158"/>Creating the GUI</h2></div></div></div><p>The code <a id="id694" class="indexterm"/>represented here is a highly abridged version of the actual code (refer to <code class="literal">8.09 font selector.py</code>). Here, we removed all the code that creates basic widgets, such as Label and Checkbuttons, in order to show only the font-related code:</p><div><pre class="programlisting">def gui_creator(self):
    # create the top labels – code removed
    fontList = ttk.Combobox(textvariable=self.family)
    fontList.bind('&lt;&lt;ComboboxSelected&gt;&gt;', <strong>self.on_value_change)</strong>
<strong>    allfonts = list(tkFont.families())</strong>
<strong>    allfonts.sort()</strong>
<strong>    fontList['values'] =  allfonts</strong>
      # Font Sizes
    sizeList = ttk.Combobox(textvariable=self.fontsize)
    sizeList.bind('&lt;&lt;ComboboxSelected&gt;&gt;', self.on_value_change)
<strong>    allfontsizes = range(6,70)</strong>
<strong>    sizeList['values'] =  allfontsizes</strong>
<strong>    # add four checkbuttons to provide choice for font style</strong>
    # all checkbuttons command attached to <strong>self.on_value_change</strong>
<strong>    #create text widget</strong>
    sampletext ='The quick brown fox jumps over the lazy dog'
    self.text.insert(INSERT,'%s\n%s'% (sampletext,sampletext.upper()),<strong>'fontspecs'</strong>)
    self.text.config(state=DISABLED)</pre></div><p>The description of the preceding code is as follows:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">We have highlighted the code that creates two Combobox widgets; one for the <strong>Font Family</strong>, and the other for the <strong>Font Size</strong> selection.</li><li class="listitem" style="list-style-type: disc">We use <code class="literal">tkfont.families()</code> to fetch the list of all the fonts installed on a computer. This is converted into a list format and sorted before it is inserted into the <code class="literal">fontList</code> Combobox widget.</li><li class="listitem" style="list-style-type: disc">Similarly, we add a font size range of values from <code class="literal">6</code> to <code class="literal">70</code> in the <strong>Font Size</strong> combobox.</li><li class="listitem" style="list-style-type: disc">We also add four Checkbutton widgets to keep track of font styles <strong>bold</strong>, <strong>italics</strong>, <strong>underline</strong>, and <strong>overstrike</strong>. The code for this has not been shown previously, because we have created similar check buttons in some of our previous programs.</li><li class="listitem" style="list-style-type: disc">We then add a Text widget and insert a sample text into it. More importantly, we add a tag to the text named <code class="literal">fontspec</code>.</li><li class="listitem" style="list-style-type: disc">Finally,<a id="id695" class="indexterm"/> all our widgets have a command callback method connecting back to a common method named <code class="literal">on_value_change</code>. This method will be responsible for updating the display of the sample text at the time of changes in the values of any of the widgets.</li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec159"/>Updating Sample Text</h2></div></div></div><div><pre class="programlisting">def on_value_change(self, event=None):
    try:
        self.currentfont.config(family=self.family.get(), size=self.fontsize.get(), weight=self.fontweight.get(), slant=self.slant.get(), underline=self.underlinevalue.get(), overstrike=self.overstrikevalue.get())
<strong>        self.text.tag_config('fontspecs', font=self.currentfont)</strong>
    except ValueError:
        pass ### invalid entry - ignored for now. You can use a  tkMessageBox dialog to show an error</pre></div><p>The description<a id="id696" class="indexterm"/> of the preceding code is as follows:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">This method is called at the time of a state change for any of the widgets</li><li class="listitem" style="list-style-type: disc">This method simply fetches all font data and configures our <code class="literal">currentfont</code> attribute with the updated font values</li><li class="listitem" style="list-style-type: disc">Finally, it updates the text content tagged as <code class="literal">fontspec</code> with the values of the current font</li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec81"/>Working with Unicode characters</h1></div></div></div><p>Computers only understand binary numbers. Therefore, all that you see on your computer, for example, texts, images, audio, video, and so on need to be expressed in terms of binary numbers.</p><p>This is<a id="id697" class="indexterm"/> where encoding comes into play. An <a id="id698" class="indexterm"/>
<strong>encoding</strong> is a set of standard rules that assign unique numeral values to each text character.</p><p>Python 2.<em>x</em> default encoding is ASCII (American Standard Code for Information Interchange). The ASCII character encoding is a 7-bit encoding that can encode 2 ^7 (128) characters.</p><p>Because ASCII encoding was developed in America, it encodes characters from the English alphabet, namely, the numbers 0-9, the letters a-z and A-Z, some common punctuation symbols, some teletype machine control codes, and a blank space.</p><p>It is here that Unicode encoding comes to our rescue. The following are the key features of<a id="id699" class="indexterm"/> Unicode encoding:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">It is a way to represent text without bytes</li><li class="listitem" style="list-style-type: disc">It provides unique code point for each character of every language</li><li class="listitem" style="list-style-type: disc">It defines more than a million code points, representing characters of all major scripts on the earth</li><li class="listitem" style="list-style-type: disc">Within Unicode, there are several <strong>Unicode Transformation Formats</strong> (<strong>UTF</strong>)<a id="id700" class="indexterm"/></li><li class="listitem" style="list-style-type: disc">UTF-8 is one of the most commonly used encodings, where <strong>8</strong> means that 8-bit numbers are used in the encoding</li><li class="listitem" style="list-style-type: disc">Python also supports UTF-16 encoding, but it's less frequently used, and UTF-32 is not supported by Python 2.<em>x</em></li></ul></div><p>Say you want to display a Hindi character on a Tkinter Label widget. You would intuitively try to run a code like the following:</p><div><pre class="programlisting">from Tkinter import *
root = Tk()
Label(<strong>root, text = "</strong>
<strong>भारतमेंआपकास्वागतहै</strong>
<strong>"</strong>).pack()
root.mainloop()</pre></div><p>If you try to run the previous code, you will get an error message as follows:</p><div><pre class="programlisting">
<strong>SyntaxError: Non-ASCII character '\xe0' in file 8.07.py on line 4, but no encoding declared; see http://www.Python.org/peps/pep-0263.html for details.</strong>
</pre></div><p>This means that Python 2.<em>x</em>, by default, cannot handle non-ASCII characters. Python standard library supports over 100 encodings, but if you are trying to use anything other than ASCII encoding you have to explicitly declare the encoding.</p><p>Fortunately, <a id="id701" class="indexterm"/>handling other encodings is very simple in Python. There are two ways in which you can deal with non-ASCII characters. They are described in the following sections:</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec160"/>Declaring line encoding</h2></div></div></div><p>The first way is to mark a string containing Unicode characters with the prefix <code class="literal">u</code> explicitly, as shown<a id="id702" class="indexterm"/> in the following code snippet (refer to <code class="literal">8.10 line encoding.py</code>):</p><div><pre class="programlisting">from Tkinter import *
root = Tk()
Label(root, text = u"भारतमेंआपकास्वागतहै").pack()
root.mainloop()</pre></div><p>When you try to run this program from IDLE, you get a warning message similar to the following one:</p><div><img src="img/7941OT_08_07.jpg" alt="Declaring line encoding"/></div><p>Simply click on <strong>Ok</strong> to save this file as UTF-8 and run this program to display the Unicode label.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec161"/>Declaring file encoding</h2></div></div></div><p>Alternatively,<a id="id703" class="indexterm"/> you can explicitly declare the entire file to have UTF-8 encoding by including a header declaration in your source file in the following format:</p><div><pre class="programlisting"># -*- coding: &lt;encoding-name&gt; -*-</pre></div><p>More precisely, the header declaration must match the regular expression:</p><div><pre class="programlisting">coding[:=]\s*([-\w.]+)</pre></div><div><div><h3 class="title"><a id="note60"/>Note</h3><p>This declaration must be included in either the first or second line of your program. If you add some other declaration or comments in the first two lines, Python won't recognize this as a header declaration.</p></div></div><p>So, if you are dealing with UTF-8 characters, you will add the following header declaration in the first or second line of your Python program:</p><div><pre class="programlisting"># -*- coding: utf-8 -*-</pre></div><p>Simply by adding this header declaration, your Python program can now recognize Unicode characters. So, our code can be rewritten as (refer to <code class="literal">8.11 file encoding.py</code>):</p><div><pre class="programlisting">
<strong># -*- coding: utf-8 -*- </strong>
from Tkinter import *
root = Tk()
Label(root, text = "भारतमेंआपकास्वागतहै").pack()
root.mainloop()</pre></div><p>Both of the above code examples generate an interface similar to the one shown here:</p><div><img src="img/7941OT_08_08.jpg" alt="Declaring file encoding"/></div><div><div><h3 class="title"><a id="note61"/>Note</h3><p>The default encoding in Python 3.<em>x</em> is Unicode (UTF-8). This means that you don't need an explicit Unicode declaration in Python 3.<em>x</em> to display non-ASCII characters.<a id="id704" class="indexterm"/>
</p></div></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec82"/>Tkinter class's hierarchy</h1></div></div></div><p>As programmers, we hardly need to understand the class hierarchy of Tkinter. After all, we have been able to code all the applications so far without bothering about the overall class hierarchy.</p><p>However,<a id="id705" class="indexterm"/> knowing about class hierarchy enables us to trace the origin of a method within the source code or source documentation of a method. A brief review of the class hierarchy will also help us prevent accidental overriding of methods in our programs.</p><p>In order to understand the class hierarchy of Tkinter, let us take a look at the source code of Tkinter. On Windows installation, the source code of Tkinter is located at <code class="literal">C:\Python27\Lib\lib-tk\Tkinter.py</code>.</p><p>When we open this file in a code editor and look at its list of class definitions, we can see the following structure:</p><div><img src="img/7941OT_08_09.jpg" alt="Tkinter class's hierarchy"/></div><p>So, what do we notice here? We have class definitions for each of the core Tkinter widgets. In addition, we have class definitions for different geometry managers and different variable types defined within Tkinter. These class definitions are what you would normally<a id="id706" class="indexterm"/> expect to be there.</p><p>However, in addition to these, we notice some strange-looking class names, such as <code class="literal">BaseWidget, Misc, Tk, </code>
<code class="literal">Toplevel, Widget</code>, and <code class="literal">Wm</code>. All these classes are circled in the above screenshot. So what services do these classes provide, and where do they fit in the larger scheme of things?</p><p>Let's use the <code class="literal">inspect</code> module to look at the class hierarchy of Tkinter. We will first inspect the class hierarchy of the Frame widget as a representation of class hierarchies for all other widgets. We will also look at the class hierarchy of the <code class="literal">Tk</code> and <code class="literal">Toplevel</code> classes to estimate their role in the overall class hierarchy of Tkinter (refer to <code class="literal">8.12 tkinter class hierarchy.py</code>):</p><div><pre class="programlisting">import Tkinter
<strong>import inspect</strong>
print 'Class Hierarchy for Frame Widget'
for i, classname in enumerate<strong>(inspect.getmro(Tkinter.Frame)):</strong>
<strong>    print'%s: %s'%(i, classname)</strong>

print 'Class Hierarchy for <strong>Toplevel'</strong>
for i, classname in enumerate(inspect.<strong>getmro</strong>(Tkinter.<strong>Toplevel</strong>)):
    print '%s: %s'%(i, classname)

print 'Class Hierarchy for <strong>Tk'</strong>
for i, classname in enumerate(inspect.<strong>getmro</strong>(Tkinter.<strong>Tk</strong>)):
    print'%s: %s'%(i, classname)</pre></div><p>The output<a id="id707" class="indexterm"/> of the preceding program is as follows:</p><div><pre class="programlisting">
<strong>Class Hierarchy for Frame Widget</strong>
0: Tkinter.Frame
1: Tkinter.Widget
2: Tkinter.BaseWidget
3: Tkinter.Misc
4: Tkinter.Pack
5: Tkinter.Place
6: Tkinter.Grid
<strong>Class Hierarchy for Toplevel</strong>
0: Tkinter.Toplevel
1: Tkinter.BaseWidget
2: Tkinter.Misc
3: Tkinter.Wm
<strong>Class Hierarchy for Tk</strong>
0: Tkinter.Tk
1: Tkinter.Misc
2: Tkinter.Wm</pre></div><p>The description of the preceding code is as follows: </p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <code class="literal">getmro(classname)</code> function from the inspect module returns a tuple, consisting of all the ancestors of <code class="literal">classname</code> in the order specified by the <a id="id708" class="indexterm"/><strong>Method Resolution Order</strong> (<strong>MRO</strong>). Method Resolution Order refers to the order in which base classes are searched when looking for a given method.</li><li class="listitem" style="list-style-type: disc">By inspecting the MRO and the source code, we come to know that the <code class="literal">Frame</code> class inherits from the <code class="literal">Widget</code> class, which in turn inherits from the <code class="literal">BaseWidget</code> class.</li><li class="listitem" style="list-style-type: disc">In addition, the <code class="literal">Frame</code> class also inherits from the <code class="literal">Misc</code> class, which is a generic <strong>mixin</strong> that provides a lot of functionality that we have used in our applications.</li><li class="listitem" style="list-style-type: disc">For a list of functionalities provided by the <code class="literal">Misc</code> class, run the following commands into your Python interactive shell:<div><pre class="programlisting">
<strong>&gt;&gt;&gt; import Tkinter</strong>
<strong>&gt;&gt;&gt; help(Tkinter.Misc)</strong>
</pre></div></li><li class="listitem" style="list-style-type: disc">Finally, all our widgets get properties from the geometry mixins—Pack, Grid, and Place.</li><li class="listitem" style="list-style-type: disc">Next, let us take a look at the <code class="literal">Tk</code> and <code class="literal">Toplevel</code> classes.</li><li class="listitem" style="list-style-type: disc">The <code class="literal">Tk </code>class represents the Toplevel widget of Tkinter, which represents the main window of an application. The <code class="literal">Toplevel</code> class provides several methods for constructing and managing a Toplevel widget with a given parent.</li><li class="listitem" style="list-style-type: disc">For a list<a id="id709" class="indexterm"/> of methods provided by the <code class="literal">Toplevel</code> and <code class="literal">Tk</code> classes, run the following commands into your Python interactive shell:<div><pre class="programlisting">
<strong>&gt;&gt;&gt;help(Tkinter.Toplevel)</strong>
<strong>&gt;&gt;&gt;help(Tkinter.Tk)</strong>
</pre></div></li><li class="listitem" style="list-style-type: disc">In addition to inheriting from the <code class="literal">Misc</code> mixin class, the <code class="literal">Toplevel</code> and <code class="literal">Tk </code>classes also inherit methods from the <code class="literal">Wm</code> mixin class.</li><li class="listitem" style="list-style-type: disc">The <code class="literal">Wm</code> (window manager) mixin class provides a lot of functions to communicate with the window manager. For a list of functions provided by the <code class="literal">Wm</code> class, run the following command into your Python interactive shell:<div><pre class="programlisting">
<strong>&gt;&gt;&gt;help(Tkinter.Wm)</strong>
</pre></div></li></ul></div><p>After translating the class hierarchy—as obtained from the previous program—into an image, we get a hierarchy image similar to the one shown in the following:</p><div><img src="img/7941OT_08_10.jpg" alt="Tkinter class's hierarchy"/></div><p>In addition <a id="id710" class="indexterm"/>to the normal inheritance relation (shown in the preceding diagram by unspotted lines), Tkinter provides a list of mixins (or helper classes). A <strong>mixin</strong> is a class that is designed not to be used directly, but to be combined with other classes using multiple inheritances.</p><p>Tkinter mixins can be broadly classified into two categories:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Geometry mixins, which includes the Grid, Pack, and Place classes</li><li class="listitem" style="list-style-type: disc">Implementation mixins, which includes:<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <code class="literal">Misc</code> class, which is used by the root window and widget classes, provides several Tk and window-related services</li><li class="listitem" style="list-style-type: disc">The <code class="literal">Wm</code> class, which is used by the root window and the Toplevel widget, provides several window manager services.</li></ul></div></li></ul></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec83"/>Custom-made mixins</h1></div></div></div><p>We created a "bare bone" GUI framework in order to avoid repetition of the code that creates widgets. Similar to this concept, there is another way to avoid writing boilerplate code by using what are named <a id="id711" class="indexterm"/>
<strong>custom GUI mixins</strong>. Take for example, the code of <code class="literal">8.13 creating custom mixins.py</code>. This program creates an interface similar to the one shown here:</p><div><img src="img/7941OT_08_11.jpg" alt="Custom-made mixins"/></div><p>Let's look<a id="id712" class="indexterm"/> at the code of <code class="literal">8.13 creating custom mixins.py</code>:</p><div><pre class="programlisting">from Tkinter import *

def frame(parent,  row, col):
    widget = Frame(parent)
    widget.grid(row= row, column=col)
    return widget

def label(parent,  row, col, text):
    widget = Label(parent, text=text)
    widget.grid(row=row, column=col,  sticky='w', padx=2)
    return widget

def button(parent, row, col, text, command):
    widget = Button(parent, text=text, command=command)
    widget.grid(row= row, column=col, sticky='e', padx=5, pady=3)
    return widget

def entry(parent,  row, col, var):
    widget = Entry(parent,textvariable= var)
    widget.grid(row= row, column=col, sticky='w', padx=5)
    return widget

def button_pressed(uname, pwd):
    print'Username: %s' %uname
    print'Password: %s'%pwd

if __name__ == '__main__':
    root = Tk()
    frm = frame(root, 0, 0) 
    label(frm, 1, 0, 'Username:')
    uname= StringVar()
    entry(frm, 1, 1, uname)
    label(frm, 2, 0, 'Password:')
    pwd= StringVar()
    entry(frm, 2, 1, pwd)
    button(frm, 3, 1, 'login', lambda: button_pressed(uname.get(), pwd.get()) )
    root.mainloop()</pre></div><p>The description <a id="id713" class="indexterm"/>of the preceding code is as follows: </p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">This program first creates functions for different widgets, such as Frame, Label, Button, and Entry. Each method can be named a mixin, because it takes care of both widget creation and its geometry management using the grid method. These are essentially convenience functions to help us avoid writing similar code for a similar set of widgets.</li><li class="listitem" style="list-style-type: disc">Now, in the main section of the program, we can create a widget in a single line of code without having to add a separate line for handling its geometry. The end result of this is fewer lines of code in our actual program. This strategy can reduce the size of your program by many lines if there are a large number of widgets in your program.<div><div><h3 class="title"><a id="note62"/>Note</h3><p>However, mixins are highly case specific. A mixin defined for one particular case scenario or application may not be applicable to another application. For instance, while defining the earlier mentioned mixins, we made a few assumptions, such as all our widgets will use the grid geometry manager, and similarly, buttons would stick to east and entries would stick to the west side. These assumptions may not hold for a different application.</p></div></div></li></ul></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec84"/>Tips for code cleanup and program optimization</h1></div></div></div><p>Let's now spend some time discussing the tips and tricks that will help improve the performance of our Python program. <a id="id714" class="indexterm"/>In a normal case scenario of GUI programming, this generally involves speeding up sections of program that contribute to improving the overall user experience.</p><p>Program optimization is often obsessively taken as an exercise in reducing code execution time. For programs where timing is a crucial factor, this obsession is genuine. However, if you are developing a simple GUI application, a correct and consistent user experience is generally more important than mere fast user experience.</p><p>Trying to optimize a code even before it is functional is premature optimization and should be avoided. However, a GUI program with correct but considerably long response time probably needs to be optimized, and this is the subject of discussion of the following sections.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec162"/>Choose the right data structure</h2></div></div></div><p>Selecting<a id="id715" class="indexterm"/> the right data structure can have a profound impact on the performance of a program. If your program is to spend considerable time on lookups, use a dictionary, if feasible. When all you need is to traverse over a collection, prefer to choose a list over dictionaries, because dictionaries take more space.</p><p>When your data is immutable, prefer to choose tuples over lists, because tuples can be traversed faster than lists.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec163"/>Working with Variables</h2></div></div></div><p>The way you <a id="id716" class="indexterm"/>select variables in your program can considerably affect the speed of the execution of your program. For instance, if you do not need to change the content or attributes of a widget after its instantiation, do not create a class-wide instance of the widget.</p><p>For example, if a Label widget is to remain static, use <code class="literal">Label(root, text='Name').pack(side=LEFT)</code>, instead of using the following snippet:</p><div><pre class="programlisting">self.mylabel = Label(root, text='Name')
self.mylabel.pack(side=LEFT)</pre></div><p>Similarly, do not create local variables if you are not going to use them more than once. For example, use <code class="literal">mylabel.config (text= event.keysym)</code> instead of first creating a local variable <code class="literal">key</code> and then using it only once:</p><div><pre class="programlisting">key = event.keysym
mylabel.config (text=key)</pre></div><p>If the local variable is to be used more than once, it may make sense to create a local variable.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec164"/>Using Exceptions</h2></div></div></div><p>Now here is a <a id="id717" class="indexterm"/>small caveat. In order to concentrate on illustrating core Tkinter concepts, we have deliberately ignored the clean exception handling in all our examples in this book.</p><p>We have implemented a "catch all errors" exception using simple try-except blocks in most of our projects. However, when programming your applications, you would ideally want to be as specific as possible about the exception you want to handle.</p><p>Python <a id="id718" class="indexterm"/>follows the EAFP (easier to ask for forgiveness than permission) style of coding, as opposed to the LBYL (look before you leap) style followed by most other programming languages.</p><p>Thus, using exception handling similar to the following one is normally cleaner in Python than checking conditions using the if-then block:</p><div><pre class="programlisting">try:
    doSomethingNormal()
except SomethingWrong:
    doSomethingElse()</pre></div><p>An example of an if-then block is shown in the following code snippet:</p><div><pre class="programlisting">if SomethingWrong:
    doSomethingElse()
else:
    doSomethingNormal()</pre></div></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec165"/>Filter and map</h2></div></div></div><p>Python provides two built-in functions named <code class="literal">filter</code> and <code class="literal">map</code> to manipulate lists directly, rather than having to directly iterate over each item in the list. The <code class="literal">filter</code>, <code class="literal">map</code>, and <code class="literal">reduce</code> functions are faster than using loops, because a lot of the work is done by the underlying code written in C.</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Filter: The <code class="literal">filter(function, list)</code> function returns a list (iterators in Python 3.<em>x</em>) that contains all the<a id="id719" class="indexterm"/> items for<a id="id720" class="indexterm"/> which the function returns a true value. For example:<div><pre class="programlisting">print filter(lambda num: num&gt;6, range(1,10))# prints [7, 8, 9]</pre></div><p>This is faster than running a conditional if-then check against the list.</p></li><li class="listitem" style="list-style-type: disc">Map: The <code class="literal">map(func, list)</code> function applies <code class="literal">func</code> to each item in the list and returns the <a id="id721" class="indexterm"/>values in a new<a id="id722" class="indexterm"/> list (returns iterators instead of lists in Python 3.<em>x</em>). For example:<div><pre class="programlisting">print map(lambda num: num+5, range(1,5)) #prints [6, 7, 8, 9]</pre></div><p>This again is faster than running the list through a loop, adding <code class="literal">5</code> to each element.</p></li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec166"/>Profiling</h2></div></div></div><p>
<strong>Profiling</strong> involves<a id="id723" class="indexterm"/> generating detailed statistics to show how often and for how long various routines of a <a id="id724" class="indexterm"/>program execute. This helps is isolating offending parts of a program, and those parts probably need redesigning.</p><p>Python 2.7.<em>x</em> provides a built-in module named <code class="literal">cProfile</code>, which enables generation of detailed statistics about a program. The module gives details such as the total program-running time, time taken to run each function, and the number of times each function is called. These statistics make it easy to determine the parts of code that need optimization.</p><div><div><h3 class="title"><a id="note63"/>Note</h3><p>In particular, <strong>cProfile</strong>
<a id="id725" class="indexterm"/> provides the following data for a function or script:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>ncalls</strong>: The number of times a function is called</li><li class="listitem" style="list-style-type: disc"><strong>tottime</strong>: The time spent on a function, excluding time spent on calling other functions</li><li class="listitem" style="list-style-type: disc"><strong>percall</strong>: <code class="literal">tottime</code> divided by ncalls</li><li class="listitem" style="list-style-type: disc"><strong>cumtime</strong>: The time spent on a function, including calls to other functions</li><li class="listitem" style="list-style-type: disc"><strong>percall</strong>: <code class="literal">cumtime</code> divided by <code class="literal">tottime</code></li></ul></div></div></div><p>You can profile an individual function with the help of this:</p><div><pre class="programlisting">import cProfile
cProfile.run('spam()','spam.profile')</pre></div><p>You can then view the results of profiling using another module called <code class="literal">pstats</code>:</p><div><pre class="programlisting">import pstats
stats = pstats.Stats('spam.profile')
stats.strip_dirs().sort_stats('time').print_stats()</pre></div><p>More importantly, you can profile an entire script. Let's say you want to profile a script named <code class="literal">myscript.py</code>. You simply navigate to the directory of the script using a command-line tool, and then type and run:</p><div><pre class="programlisting">
<strong>Python -m cProfilemyscript.py</strong>
</pre></div><p>This produces an output similar to the following:</p><div><pre class="programlisting">
<strong>1014 function calls in 0.093 CPU seconds</strong>
<strong>Ordered by: standard name</strong>
<strong>ncallstottimepercallcumtimepercallfilename:lineno(function)</strong>
<strong>1    0.000    0.000    0.000    0.000 Tkinter.py:3686(Studbutton)</strong>
<strong>1    0.000    0.000    0.000    0.000 Tkinter.py:3694(Tributton)</strong>
<strong>416  0.001    0.000    0.002    0.000 Tkinter.py:74(_cnfmerge)</strong>
<strong>1    0.011    0.011    0.028    0.028 myscript.py:19(&lt;module&gt;)</strong>
<strong>2    0.058    0.029    0.086    0.043 myscript.py:20(setAge)</strong>
<strong>7520.105   0.0000.257    0.129 myscript.py:23(findAudio)</strong>
<strong>10.001    0.001    0.013    0.013 myscript.py:25(createGUI)</strong>
<strong>1    40.004   0.000    0.005    0.005 myscript.py:4(saveAudio)</strong>
<strong>1    0.000    0.000    0.000    0.000 myscript.py:49(&lt;module&gt;)</strong>
</pre></div><p>After this, you can analyze the code to see the functions that take more time to execute. In our hypothetical example in the preceding output, we notice that the functions <code class="literal">findAudio</code> and <code class="literal">saveAudio</code> take the maximum time to execute. We can then analyze these two functions<a id="id726" class="indexterm"/> to see if they can be optimized.</p><p>In addition to the cProfile module, there are other modules, such as <strong>PyCallGraph</strong>
<a id="id727" class="indexterm"/>
 and <strong>objgraph</strong>
<a id="id728" class="indexterm"/>, and they provide visual graphs for profile data.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec167"/>Other Optimization Tips</h2></div></div></div><p>Optimization is a vast topic and there is a lot that you can do. If you are interested in knowing more about code optimization, you might start with the official Python optimization tips at the following link:</p><p>
<a class="ulink" href="http://wiki.python.org/moin/PythonSpeed/PerformanceTips">http://wiki.python.org/moin/PythonSpeed/PerformanceTips</a>
</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec85"/>Distributing the Tkinter application</h1></div></div></div><p>So, you have your new application ready and now you want to share it with the rest of the world. How do you do that?</p><p>Of course, you<a id="id729" class="indexterm"/> need Python installation for your program to run. Windows does not come with preinstalled Python. Most modern Linux distributions and Mac OS X come preinstalled with Python, but you don't just need any version of Python. You need a version of Python that is compatible with the version on which the program was originally written.</p><p>And then, if your program uses third-party modules, you need the appropriate module installed for the required Python version. Sure this is too much diversity to handle.</p><p>Fortunately, we have tools, such as <strong>Freeze</strong> tools, which allows us to distribute Python programs as standalone applications.</p><p>Given the diversity of platforms to be handled, there is a large number of Freeze tool options from which to choose. Therefore, a detailed discussion on any one of the tools is beyond the scope of this book.</p><p>We will list<a id="id730" class="indexterm"/> some of the most evolved freezing tools in the following sections. If you find a tool fitting into your distribution requirement, you can look at its documentation for more information.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec168"/>py2exe</h2></div></div></div><p>If you only need to distribute your Python application on Windows, <strong>py2exe</strong> is perhaps the most <a id="id731" class="indexterm"/>hardened tool. It converts Python programs into executable Windows programs that can run without requiring a Python installation. More information, <a id="id732" class="indexterm"/>a download link, and tutorials are available at <a class="ulink" href="http://www.py2exe.org/">http://www.py2exe.org/</a>.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec169"/>py2app</h2></div></div></div><p>
<strong>py2app</strong> performs <a id="id733" class="indexterm"/>the same tasks in Mac OS X that py2exe does for Windows. If you just need to distribute your Python application on Mac OS X, py2app is <a id="id734" class="indexterm"/>a time-tested tool. More information is available at <a class="ulink" href="http://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html">http://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html</a>.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec170"/>PyInstaller</h2></div></div></div><p>
<strong>PyInstaller</strong> has gained<a id="id735" class="indexterm"/> popularity as a freezing tool in the last few years partly because it supports a wide variety of platforms, such as Windows, Linux, Mac OS X, Solaris, and AIX.</p><p>In addition,<a id="id736" class="indexterm"/> executables created using PyInstaller are claimed to take less space than other freezing tools because it uses transparent compression. Another important feature of PyInstaller is its out of the box compatibility with a large number of third-party packages.</p><p>The full list of features, downloads, and documentation can be assessed at <a class="ulink" href="http://www.pyinstaller.org/">http://www.pyinstaller.org/</a>.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec171"/>Other Freezing Tools</h2></div></div></div><p>Other freezing<a id="id737" class="indexterm"/> tool include:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Freeze: This tool ships with standard Python distribution. Freeze can be used to compile executables only on Unix systems. However, the program is overly simplistic, as it fails to handle even the common third-party libraries.<a id="id738" class="indexterm"/> More information is available at this link:<p>
<a class="ulink" href="http://wiki.python.org/moin/Freeze">http://wiki.python.org/moin/Freeze</a>
</p></li><li class="listitem" style="list-style-type: disc">cx_Freeze: This tool <a id="id739" class="indexterm"/>is similar to py2exe and py2app, but claims to be portable across all platforms on which that Python itself works. More information is available at this link:<p>
<a class="ulink" href="http://cx-freeze.sourceforge.net/index.html">http://cx-freeze.sourceforge.net/index.html</a>
</p><div><div><h3 class="title"><a id="tip30"/>Tip</h3><p>If you're distributing a small program, a freeze tool might be just what you need. However, if you have a large program, say, with lots of external third-party library dependencies or dependencies not supported by any existing freezing tool, your application might be the right candidate for bundling the Python interpreter with your application.</p></div></div></li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec86"/>Limitations of Tkinter</h1></div></div></div><p>We have already explored the power of Tkinter. Perhaps the greatest power of Tkinter lies in its <a id="id740" class="indexterm"/>ease of use and a lightweight footprint.</p><p>However, ease of use and lightweightiness of Tkinter also result in some limitations.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec172"/>Limited number of core widgets</h2></div></div></div><p>Tkinter <a id="id741" class="indexterm"/>provides only a small number of basic widgets, and lacks a collection of more modern widgets. It needs <code class="literal">ttk</code>, <code class="literal">Pmw</code>, <code class="literal">Tix</code>, and other extensions to provide some really useful widgets. Even with these extensions, Tkinter fails to match the range of widgets provided by other GUI tools, such as <strong>wxPython</strong> advanced widget set and <strong>PyQt</strong>.</p><p>For instance, wxPython's HtmlWindow widget<a id="id742" class="indexterm"/> lets the user display HTML content with ease. There have been attempts to provide similar extensions in Tkinter, but they are far from satisfactory. Similarly, there are other widgets from Advanced User Interface Library and mixins in wxPython, such as floating/docking frames, perspective loading and saving, and others, which Tkinter users can only hope to be included in future releases.</p><p>Tkinter supporters often tend to refute this criticism by citing how easily you can construct new widgets from a collection of basic widgets.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec173"/>No Support for printing</h2></div></div></div><p>Tkinter is rightfully <a id="id743" class="indexterm"/>criticized for providing no support for printing features. Compare this to wxPython, which provides a complete printing solution in the form of a printing framework.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec174"/>No support for newer image formats</h2></div></div></div><p>Tkinter natively<a id="id744" class="indexterm"/> does not support image formats such as JPEG and PNG. The <code class="literal">PhotoImage</code> class of Tkinter can read images only in GIF and PGM/PPM formats.</p><p>Although there are workarounds, such as using ImageTk and Image submodules from the PIL module, it would have been better if Tkinter natively supported the popular image formats.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec175"/>Inactive development community</h2></div></div></div><p>Tkinter is often <a id="id745" class="indexterm"/>criticized as having a relatively inactive development community. This is true to a large extent. The documentation of Tkinter has remained a work-in-progress for many years now.</p><p>A large number of Tkinter extensions appeared over the years, but most of them have not been under active development for a long time.</p><p>Tkinter supporters refute this with the logic that Tkinter is a stable and mature technology that does not need frequent revisions like some other GUI modules that are being newly developed.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec87"/>Alternatives to Tkinter</h1></div></div></div><p>In addition<a id="id746" class="indexterm"/> to Tkinter, there are several other popular Python GUI toolkits. Most popular ones include wxPython, PyQt, <strong>PySide</strong>, and <strong>PyGTK</strong>. Here's a brief discussion on these toolkits.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec176"/>wxPython</h2></div></div></div><p>wxPython is aPython interface to <strong>wxWidgets</strong>, a popular open source GUI library. Code written in wxPython is portable across most major platforms such as Windows, Linux, and Mac OS X.</p><p>The wxPython<a id="id747" class="indexterm"/> interface is generally considered better than Tkinter at building more complex GUIs primarily because it has a large base of natively supported widgets. However, Tkinter supporters do contest this claim.</p><p>The wxWidgets <a id="id748" class="indexterm"/>interface is originally written in C++ programming language, and hence, wxPython inherits a large portion of the complexity that is typical of C++ programs. wxPython provides a very large base of classes, and it often takes more code to produce the same interface than it would take in Tkinter. However, in exchange for this complexity, wxPython provides a larger base of built-in widgets than Tkinter. Moreover, some people prefer the appearance of wxPython widgets over that rendered by Tkinter. </p><p>Owing to its inherent complexity, wxPython has seen the emergence of several GUI builder toolkits, such as<a id="id749" class="indexterm"/> <strong>wxGlade</strong>, <a id="id750" class="indexterm"/>
<strong>wxFormBuilder</strong>,<a id="id751" class="indexterm"/> <strong>wxDesigner</strong>, and so on.</p><p>The wxPython installation comes with demo programs that can help you get started with the toolkit quickly. To download the toolkit or for more information on wxPython, visit the following link:</p><p>
<a class="ulink" href="http://wxpython.org/">http://wxpython.org/</a>
</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec177"/>PyQt</h2></div></div></div><p>PyQt is a Python interface of the cross-platform GUI toolkit Qt, a project currently developed and<a id="id752" class="indexterm"/> maintained by British firm Riverbank Computing.</p><p>PyQt, <a id="id753" class="indexterm"/>with several hundred classes and thousands of functions is perhaps the most fully-featured GUI library that is currently available for GUI programming in Python. However, this feature load brings in a lot of complexity and a steep learning curve.</p><p>Qt (and hence pyQt) has a very rich set of supported widgets. In addition, it includes built-in support for network programming, SQL databases, threads, multimedia framework, regular expressions, XML, SVG, and much more. The designer feature of Qtletsus generates GUI code from a WYSIWYG (What You See Is What You Get) interface.</p><p>PyQt is available under variety of licenses including <strong>GNU</strong>, <strong>General Public License</strong> (<strong>GPL</strong>),<a id="id754" class="indexterm"/> and commercial license. However, its greatest disadvantage is that unlike Qt, it is unavailable under the LGPL.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec178"/>PySide</h2></div></div></div><p>If you are looking<a id="id755" class="indexterm"/> for a LGPL version of Qt bindings for Python, you may want to explore PySide. PySide was originally released under the LGPL in August 2009 by Nokia, the former owners of the <strong>Qttoolkit</strong>
<a id="id756" class="indexterm"/>. It is now owned by Digia. More information on PySide can be<a id="id757" class="indexterm"/> obtained from the following link:</p><p>
<a class="ulink" href="http://qt-project.org/wiki/PySide">http://qt-project.org/wiki/PySide</a>
</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec179"/>PyGTK</h2></div></div></div><p>
<strong>PyGTK</strong> is a collection<a id="id758" class="indexterm"/> of Python bindings for the GTK + GUI library. PyGTK applications are cross-platform, and can run on Windows, Linux, MacOS X, and others. PyGTK is a free software and licensed under the LGPL. You can therefore use, modify, and distribute it<a id="id759" class="indexterm"/> with very little restrictions.</p><p>More information about PyGTK can be obtained at the following link:</p><p>
<a class="ulink" href="http://www.pygtk.org/">http://www.pygtk.org/</a>
</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec180"/>Other Options</h2></div></div></div><p>Besides these most popular toolkits, there is a range of toolkits available for GUI programming in Python.</p><p>Java programmers who are comfortable with Java GUI libraries, such as swing and AWT, can seamlessly access these libraries by using <strong>Jython</strong>
<a id="id760" class="indexterm"/>. Similarly C# programmers can use <strong>IronPython</strong>
<a id="id761" class="indexterm"/> to access GUI construction features from the .NET framework.</p><p>For a comprehensive list of other GUI tools available to a Python developer visit this link:</p><p>
<a class="ulink" href="http://wiki.python.org/moin/GuiProgramming">http://wiki.python.org/moin/GuiProgramming</a>
</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec88"/>Getting interactive help</h1></div></div></div><p>This section is not just true about Tkinter, but for any Python object for which you need help.</p><p>Let's say you need a reference on Tkinter Pack geometry manager, you can get interactive help in your Python interactive shell using the help command, as shown in the following command lines:</p><div><pre class="programlisting">
<strong>&gt;&gt;&gt; import Tkinter</strong>
<strong>&gt;&gt;&gt; help(Tkinter.Pack)</strong>
</pre></div><p>This provides a detailed help documentation on all the methods defined under the <code class="literal">Pack</code> class in Tkinter.</p><p>You can<a id="id762" class="indexterm"/> similarly view help for all other individual widgets. For instance, you can check comprehensive and authoritative help documentation for Label widget in the interactive shell by typing:</p><div><pre class="programlisting">
<strong>&gt;&gt;&gt;help(Tkinter.Label)</strong>
</pre></div><p>This provides a list of:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">All methods defined in class <code class="literal">Label</code></li><li class="listitem" style="list-style-type: disc">All standard and widget specific options for Label widget</li><li class="listitem" style="list-style-type: disc">All methods inherited from other classes</li></ul></div><p>Finally, when in doubt about a method, look into the source file located at &lt;<code class="literal">location-of-python-installation&gt;\lib\lib-tk\Tkinter.py</code>.</p><div><div><h3 class="title"><a id="tip31"/>Tip</h3><p>The <code class="literal">lib-tk</code> directory is the home to some great Tkinter code that you can study. In particular, you may also want to take a look at the source code of:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">turtle.py: A popular <a id="id763" class="indexterm"/>way to introduce programming to kids. It includes some cool animated effects</li><li class="listitem" style="list-style-type: disc">Tkdnd.py<a id="id764" class="indexterm"/>: An experiment code that lets you drag and drop items on the Tkinter window.</li></ul></div><p>You might also find it useful to look at the source code implementation of various other modules, such as the color chooser, file dialogs, ttk module, and others.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec89"/>Tkinter in Python 3.<em>x</em>
</h1></div></div></div><p>In 2008, <a id="id765" class="indexterm"/>Guido van Rossum, the author of Python, forked the language into<a id="id766" class="indexterm"/> two branches—2.<em>x</em>, and 3.<em>x</em>. This was done to clean up and make the language more consistent.</p><p>Python 3.<em>x</em> broke backward compatibility with the Python 2.<em>x</em>. For example, the print statement in Python 2.<em>x</em> was replaced by <code class="literal">print()</code> function that would now take arguments as parameters.</p><p>We coded all <a id="id767" class="indexterm"/>our Tkinter programs in Python Version 2.7, because it has a richer set of third-party libraries than Python 3.<em>x</em>, which is still considered a developing version.</p><p>The core functionality of Tkinter remains the same between 2.<em>x</em>, and 3.<em>x</em>. The only significant change to Tkinter when moving from Python 2.<em>x</em> to Python 3.<em>x</em> involves changing the way Tkinter modules are imported.</p><p>
<strong>Tkinter</strong> has been renamed to <strong>tkinter</strong>  in Python 3.<em>x</em> (capitalization has been removed). Note that in 3.<em>x</em>, the directory <code class="literal">lib-tk</code> was renamed to <code class="literal">tkinter</code>. Inside the directory, the file <code class="literal">Tkinter.py</code> was renamed to <code class="literal">__init__.py</code>, thus making tkinter an importable module.</p><p>Accordingly, the biggest major difference lies in the way you import the Tkinter module into your current namespace:</p><div><pre class="programlisting">from <strong>Tkinter</strong> import *    # for Python2
from <strong>tkinter</strong> import *    # for Python3</pre></div><p>Further, take a note of the following changes:</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Python 2.x</p>
</th><th style="text-align: left" valign="bottom">
<p>Python 3.x</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">import ttk</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">import tkinter.ttk   OR</code>
</p>
<p>
<code class="literal">from tkinter import ttk</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">import tkMessageBox</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">import tkinter.messagebox</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">import tkColorChooser</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">import tkinter.colorchooser</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">import tkFileDialog</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">import tkinter.filedialog</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">import tkSimpleDialog</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">import tkinter.simpledialog</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">import tkCommonDialog</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">import tkinter.commondialog</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">import tkFont</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">import tkinter.font</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">import ScrolledText</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">import tkinter.scrolledtext</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">import Tix</code>
<a id="id768" class="indexterm"/>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">import tkinter.tix</code>
<a id="id769" class="indexterm"/>
</p>
</td></tr></tbody></table></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec90"/>Conclusion</h1></div></div></div><p>To conclude, let's summarize some of the key steps involved in designing an application:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Depending on what you want to design, choose a suitable data structure to represent your needs logically.</li><li class="listitem" style="list-style-type: disc">If required, combine primitive data structures to form complex structures like, say, a list of dictionaries or a tuple of dictionaries.</li><li class="listitem" style="list-style-type: disc">Create classes for objects that constitute your application. Add attributes that need to be manipulated and methods to manipulate those attributes.</li><li class="listitem" style="list-style-type: disc">Manipulate attributes using different API provided by a rich set of Python standard and external libraries.</li></ul></div><p>We tried to build several partly-functional applications in this book. And then we put up an explanation for the code. However, when you try to explain a software development process in a sequential text, you sometimes mislead your readers to imply that development of software programs is a linear process. This is hardly true.</p><p>Actual programming doesn't usually work this way. In fact, small-to-medium-sized programs are normally written in an incremental trial and error process where assumptions get changed and structures modified throughout the course of application development.</p><p>Here is how<a id="id770" class="indexterm"/> you would develop a small to medium application:</p><div><ol class="orderedlist arabic"><li class="listitem">Start with a simple script.</li><li class="listitem">Set a small achievable goal, implement it, and then think of adding the next feature to your program in an incremental fashion.</li><li class="listitem">You may or may not introduce a class structure initially. If you are clear about the problem domain, you may introduce the class structure right from the very beginning.</li><li class="listitem">If you are not sure about the class structure initially, start with simple procedural code. As your program starts to grow, you will probably start getting lot of global variables. It is here that you will start getting a glimpse of the structural dimensions of your program. It is now time to refactor and restructure your program to introduce a class structure.</li></ol></div><div><div><h3 class="title"><a id="tip33"/>Tip</h3><p>If you are writing a small program, the evolutionary <strong>trial and error</strong> strategy works well.</p><p>If, however, you get into developing medium to large-scale applications, it is better to do some serious upfront planning before you sit down to write your code, because the cost of failure of a large program is way higher than what we can generally afford.</p><p>An analogy would explain this better. You can build a small shed on a trial and error basis, but you would not attempt to build a skyscraper without some serious planning.</p></div></div><p>It is also <a id="id771" class="indexterm"/>important not to be unnecessarily bogged down by ever evolving jargons in the technical world. Programming is less about knowing a particular API or even a particular programming language. You can literally get to know the basic constructs of a programming language in a small sitting. Programming is rather a tool for finding solution to your immediate problems.</p><p>That brings us to the end of the book. I hope this book has taught you something about GUI programming with Python and Tkinter.</p><p>Beyond reading books, there is really no substitute for doing some original GUI programming. So, take up an original programming challenge and execute it for the fun of it.</p><p>How you implement it is a matter of individual experiences and taste. Do what feels comfortable to you, but keep yourself open to the idea of continuous refactoring at every stage of development.</p></div></body></html>