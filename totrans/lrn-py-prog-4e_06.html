<html><head></head><body>
  <div class="Basic-Text-Frame" id="_idContainer128">
   <h1 class="chapterNumber">
    <span class="koboSpan" id="kobo.1.1">
     6
    </span>
   </h1>
   <h1 class="chapterTitle" id="_idParaDest-183">
    <span class="koboSpan" id="kobo.2.1">
     OOP, Decorators, and Iterators
    </span>
   </h1>
   <blockquote class="packt_quote">
    <p class="quote">
     <span class="koboSpan" id="kobo.3.1">
      ”La classe non è acqua.”
     </span>
     <span class="koboSpan" id="kobo.3.2">
      (“Class will out.”)
     </span>
    </p>
    <p class="cite">
     <span class="koboSpan" id="kobo.4.1">
      —Italian saying
     </span>
    </p>
   </blockquote>
   <p class="normal">
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.5.1">
      Object-oriented programming (OOP)
     </span>
    </strong>
    <span class="koboSpan" id="kobo.6.1">
     is
    </span>
    <a id="_idIndexMarker583">
    </a>
    <span class="koboSpan" id="kobo.7.1">
     such a vast topic that entire books have been written about it.
    </span>
    <span class="koboSpan" id="kobo.7.2">
     In this chapter, we face the challenge of finding the balance between breadth and depth.
    </span>
    <span class="koboSpan" id="kobo.7.3">
     There are simply too many things to discuss, and plenty of them would take more than this whole chapter if we described them in depth.
    </span>
    <span class="koboSpan" id="kobo.7.4">
     Therefore, we will try to give you what we think is a good panoramic view of the fundamentals, plus a few things that may come in handy in the next chapters.
    </span>
    <span class="koboSpan" id="kobo.7.5">
     Python’s official documentation will help to fill the gaps.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.8.1">
     In this chapter, we are going to cover the following topics:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.9.1">
      Decorators
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.10.1">
      OOP with Python
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.11.1">
      Iterators
     </span>
    </li>
   </ul>
   <h1 class="heading-1" id="_idParaDest-184">
    <span class="koboSpan" id="kobo.12.1">
     Decorators
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.13.1">
     In
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.14.1">
      Chapter 5
     </span>
    </em>
    <span class="koboSpan" id="kobo.15.1">
     ,
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.16.1">
      Comprehensions and Generators
     </span>
    </em>
    <span class="koboSpan" id="kobo.17.1">
     , we measured the execution time of various expressions.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.18.1">
     If you
    </span>
    <a id="_idIndexMarker584">
    </a>
    <span class="koboSpan" id="kobo.19.1">
     recall, we had to capture the start time and subtract it from the current time after execution to calculate the elapsed time.
    </span>
    <span class="koboSpan" id="kobo.19.2">
     We also printed it on the console after each measurement.
    </span>
    <span class="koboSpan" id="kobo.19.3">
     That was impractical.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.20.1">
     Every time we find ourselves repeating things, an alarm bell should go off.
    </span>
    <span class="koboSpan" id="kobo.20.2">
     Can we put that code in a
    </span>
    <a id="_idIndexMarker585">
    </a>
    <span class="koboSpan" id="kobo.21.1">
     function and avoid repetition?
    </span>
    <span class="koboSpan" id="kobo.21.2">
     Most of the time, the answer is,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.22.1">
      yes
     </span>
    </em>
    <span class="koboSpan" id="kobo.23.1">
     , so let us look at an example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.24.1"># decorators/time.measure.start.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.25.1">from</span></span><span class="koboSpan" id="kobo.26.1"> time </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.27.1">import</span></span><span class="koboSpan" id="kobo.28.1"> sleep, time
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.29.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.30.1">f</span></span><span class="koboSpan" id="kobo.31.1">():
    sleep(</span><span class="hljs-number"><span class="koboSpan" id="kobo.32.1">0.3</span></span><span class="koboSpan" id="kobo.33.1">)
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.34.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.35.1">g</span></span><span class="koboSpan" id="kobo.36.1">():
    sleep(</span><span class="hljs-number"><span class="koboSpan" id="kobo.37.1">0.5</span></span><span class="koboSpan" id="kobo.38.1">)
t = time()
f()
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.39.1">print</span></span><span class="koboSpan" id="kobo.40.1">("f took:", time() - t)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.41.1"># f took: 0.3028988838195801</span></span><span class="koboSpan" id="kobo.42.1">
t = time()
g()
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.43.1">print</span></span><span class="koboSpan" id="kobo.44.1">("g took:", time() - t)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.45.1"># g took: 0.507941722869873</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.46.1">
     In the preceding code, we defined two functions,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.47.1">
      f()
     </span>
    </code>
    <span class="koboSpan" id="kobo.48.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.49.1">
      g()
     </span>
    </code>
    <span class="koboSpan" id="kobo.50.1">
     , which do nothing but sleep (for 0.3 and 0.5 seconds, respectively).
    </span>
    <span class="koboSpan" id="kobo.50.2">
     We used the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.51.1">
      sleep()
     </span>
    </code>
    <span class="koboSpan" id="kobo.52.1">
     function to suspend the execution for the desired amount of time.
    </span>
    <span class="koboSpan" id="kobo.52.2">
     Notice how the time measure is pretty accurate.
    </span>
    <span class="koboSpan" id="kobo.52.3">
     Now, how do we avoid repeating that code and those calculations?
    </span>
    <span class="koboSpan" id="kobo.52.4">
     One first potential approach could be the following:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.53.1"># decorators/time.measure.dry.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.54.1">from</span></span><span class="koboSpan" id="kobo.55.1"> time </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.56.1">import</span></span><span class="koboSpan" id="kobo.57.1"> sleep, time
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.58.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.59.1">f</span></span><span class="koboSpan" id="kobo.60.1">():
    sleep(</span><span class="hljs-number"><span class="koboSpan" id="kobo.61.1">0.3</span></span><span class="koboSpan" id="kobo.62.1">)
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.63.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.64.1">g</span></span><span class="koboSpan" id="kobo.65.1">():
    sleep(</span><span class="hljs-number"><span class="koboSpan" id="kobo.66.1">0.5</span></span><span class="koboSpan" id="kobo.67.1">)
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.68.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.69.1">measure</span></span><span class="koboSpan" id="kobo.70.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.71.1">func</span></span><span class="koboSpan" id="kobo.72.1">):
    t = time()
    func()
    </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.73.1">print</span></span><span class="koboSpan" id="kobo.74.1">(func.__name__, "took:", time() - t)
measure(f)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.75.1"># f took: 0.3043971061706543</span></span><span class="koboSpan" id="kobo.76.1">
measure(g)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.77.1"># g took: 0.5050859451293945</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.78.1">
     Much better.
    </span>
    <span class="koboSpan" id="kobo.78.2">
     The whole timing mechanism has been encapsulated in a function, so we do not repeat code.
    </span>
    <span class="koboSpan" id="kobo.78.3">
     We print the function name dynamically and the code is straightforward.
    </span>
    <span class="koboSpan" id="kobo.78.4">
     What if we needed to pass any arguments to the function we measure?
    </span>
    <span class="koboSpan" id="kobo.78.5">
     This code
    </span>
    <a id="_idIndexMarker586">
    </a>
    <span class="koboSpan" id="kobo.79.1">
     would get just a bit more complex.
    </span>
    <span class="koboSpan" id="kobo.79.2">
     Let us see an example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.80.1"># decorators/time.measure.arguments.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.81.1">from</span></span><span class="koboSpan" id="kobo.82.1"> time </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.83.1">import</span></span><span class="koboSpan" id="kobo.84.1"> sleep, time
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.85.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.86.1">f</span></span><span class="koboSpan" id="kobo.87.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.88.1">sleep_time=</span></span><span class="hljs-number"><span class="koboSpan" id="kobo.89.1">0.1</span></span><span class="koboSpan" id="kobo.90.1">):
    sleep(sleep_time)
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.91.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.92.1">measure</span></span><span class="koboSpan" id="kobo.93.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.94.1">func, *args, **kwargs</span></span><span class="koboSpan" id="kobo.95.1">):
    t = time()
    func(*args, **kwargs)
    </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.96.1">print</span></span><span class="koboSpan" id="kobo.97.1">(func.__name__, "took:", time() - t)
measure(f, sleep_time=</span><span class="hljs-number"><span class="koboSpan" id="kobo.98.1">0.3</span></span><span class="koboSpan" id="kobo.99.1">)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.100.1"># f took: 0.30092811584472656</span></span><span class="koboSpan" id="kobo.101.1">
measure(f, </span><span class="hljs-number"><span class="koboSpan" id="kobo.102.1">0.2</span></span><span class="koboSpan" id="kobo.103.1">)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.104.1"># f took: 0.20505475997924805</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.105.1">
     Now,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.106.1">
      f()
     </span>
    </code>
    <span class="koboSpan" id="kobo.107.1">
     expects to be fed
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.108.1">
      sleep_time
     </span>
    </code>
    <span class="koboSpan" id="kobo.109.1">
     (with a default value of 0.1), so we do not need
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.110.1">
      g()
     </span>
    </code>
    <span class="koboSpan" id="kobo.111.1">
     anymore.
    </span>
    <span class="koboSpan" id="kobo.111.2">
     We also had to change the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.112.1">
      measure()
     </span>
    </code>
    <span class="koboSpan" id="kobo.113.1">
     function so that it now accepts a function, any variable positional arguments, and any variable keyword arguments.
    </span>
    <span class="koboSpan" id="kobo.113.2">
     This way, whatever we call
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.114.1">
      measure()
     </span>
    </code>
    <span class="koboSpan" id="kobo.115.1">
     with, we redirect those arguments to the call to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.116.1">
      func()
     </span>
    </code>
    <span class="koboSpan" id="kobo.117.1">
     that we do inside.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.118.1">
     This is good, but we can improve it a little.
    </span>
    <span class="koboSpan" id="kobo.118.2">
     Let us say that we somehow want to have that timing behavior built into the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.119.1">
      f()
     </span>
    </code>
    <span class="koboSpan" id="kobo.120.1">
     function, enabling us to just call it and have that measure taken.
    </span>
    <span class="koboSpan" id="kobo.120.2">
     Here is how we could do it:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.121.1"># decorators/time.measure.deco1.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.122.1">from</span></span><span class="koboSpan" id="kobo.123.1"> time </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.124.1">import</span></span><span class="koboSpan" id="kobo.125.1"> sleep, time
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.126.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.127.1">f</span></span><span class="koboSpan" id="kobo.128.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.129.1">sleep_time=</span></span><span class="hljs-number"><span class="koboSpan" id="kobo.130.1">0.1</span></span><span class="koboSpan" id="kobo.131.1">):
    sleep(sleep_time)
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.132.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.133.1">measure</span></span><span class="koboSpan" id="kobo.134.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.135.1">func</span></span><span class="koboSpan" id="kobo.136.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.137.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.138.1">wrapper</span></span><span class="koboSpan" id="kobo.139.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.140.1">*args, **kwargs</span></span><span class="koboSpan" id="kobo.141.1">):
        t = time()
        func(*args, **kwargs)
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.142.1">print</span></span><span class="koboSpan" id="kobo.143.1">(func.__name__, "took:", time() - t)
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.144.1">return</span></span><span class="koboSpan" id="kobo.145.1"> wrapper
f = measure(f)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.146.1"># decoration point</span></span><span class="koboSpan" id="kobo.147.1">
f(</span><span class="hljs-number"><span class="koboSpan" id="kobo.148.1">0.2</span></span><span class="koboSpan" id="kobo.149.1">)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.150.1"># f took: 0.20128178596496582</span></span><span class="koboSpan" id="kobo.151.1">
f(sleep_time=</span><span class="hljs-number"><span class="koboSpan" id="kobo.152.1">0.3</span></span><span class="koboSpan" id="kobo.153.1">)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.154.1"># f took: 0.30509519577026367</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.155.1">print</span></span><span class="koboSpan" id="kobo.156.1">(f.__name__)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.157.1"># wrapper  &lt;- ouch!</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.158.1">
     The preceding
    </span>
    <a id="_idIndexMarker587">
    </a>
    <span class="koboSpan" id="kobo.159.1">
     code is not so straightforward.
    </span>
    <span class="koboSpan" id="kobo.159.2">
     Let us see what happens here.
    </span>
    <span class="koboSpan" id="kobo.159.3">
     The magic is in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.160.1">
      decoration point
     </span>
    </em>
    <span class="koboSpan" id="kobo.161.1">
     .
    </span>
    <span class="koboSpan" id="kobo.161.2">
     We reassign
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.162.1">
      f()
     </span>
    </code>
    <span class="koboSpan" id="kobo.163.1">
     with whatever is returned by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.164.1">
      measure()
     </span>
    </code>
    <span class="koboSpan" id="kobo.165.1">
     when we call it with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.166.1">
      f()
     </span>
    </code>
    <span class="koboSpan" id="kobo.167.1">
     as an argument.
    </span>
    <span class="koboSpan" id="kobo.167.2">
     Within
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.168.1">
      measure()
     </span>
    </code>
    <span class="koboSpan" id="kobo.169.1">
     , we define another function,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.170.1">
      wrapper()
     </span>
    </code>
    <span class="koboSpan" id="kobo.171.1">
     , and then we return it.
    </span>
    <span class="koboSpan" id="kobo.171.2">
     So the net effect is that after the decoration point, when we call
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.172.1">
      f()
     </span>
    </code>
    <span class="koboSpan" id="kobo.173.1">
     , we are actually calling
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.174.1">
      wrapper()
     </span>
    </code>
    <span class="koboSpan" id="kobo.175.1">
     (you can witness this in the last line of code).
    </span>
    <span class="koboSpan" id="kobo.175.2">
     Since the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.176.1">
      wrapper()
     </span>
    </code>
    <span class="koboSpan" id="kobo.177.1">
     inside calls
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.178.1">
      func()
     </span>
    </code>
    <span class="koboSpan" id="kobo.179.1">
     , which in this case is a reference to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.180.1">
      f()
     </span>
    </code>
    <span class="koboSpan" id="kobo.181.1">
     , we close the loop.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.182.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.183.1">
      wrapper()
     </span>
    </code>
    <span class="koboSpan" id="kobo.184.1">
     function is, not surprisingly, a wrapper.
    </span>
    <span class="koboSpan" id="kobo.184.2">
     It takes variable positional and keyword arguments and calls
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.185.1">
      f()
     </span>
    </code>
    <span class="koboSpan" id="kobo.186.1">
     with them.
    </span>
    <span class="koboSpan" id="kobo.186.2">
     It also does the time measurement calculation around the call.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.187.1">
     This technique
    </span>
    <a id="_idIndexMarker588">
    </a>
    <span class="koboSpan" id="kobo.188.1">
     is called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.189.1">
      decoration
     </span>
    </strong>
    <span class="koboSpan" id="kobo.190.1">
     , and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.191.1">
      measure()
     </span>
    </code>
    <span class="koboSpan" id="kobo.192.1">
     is, effectively, a
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.193.1">
      decorator
     </span>
    </strong>
    <span class="koboSpan" id="kobo.194.1">
     .
    </span>
    <span class="koboSpan" id="kobo.194.2">
     This paradigm became so popular and widely used that, in version 2.4, Python added a special syntax for it.
    </span>
    <span class="koboSpan" id="kobo.194.3">
     You can read the specifics in PEP 318 (
    </span>
    <a href="https://peps.python.org/pep-0318/">
     <span class="url">
      <span class="koboSpan" id="kobo.195.1">
       https://peps.python.org/pep-0318/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.196.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.196.2">
     In Python 3.0, we saw PEP 3129 (
    </span>
    <a href="https://peps.python.org/pep-3129/">
     <span class="url">
      <span class="koboSpan" id="kobo.197.1">
       https://peps.python.org/pep-3129/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.198.1">
     ) defining class decorators.
    </span>
    <span class="koboSpan" id="kobo.198.2">
     Finally, in Python 3.9, the decorator syntax was slightly amended to relax some grammar restrictions; this change was brought about in PEP 614 (
    </span>
    <a href="https://peps.python.org/pep-0614/">
     <span class="url">
      <span class="koboSpan" id="kobo.199.1">
       https://peps.python.org/pep-0614/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.200.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.201.1">
     Let us now explore three cases: one decorator, two decorators, and one decorator that takes arguments.
    </span>
    <span class="koboSpan" id="kobo.201.2">
     First, the single decorator case:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.202.1"># decorators/syntax.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.203.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.204.1">func</span></span><span class="koboSpan" id="kobo.205.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.206.1">arg1, arg2, ...</span></span><span class="koboSpan" id="kobo.207.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.208.1">pass</span></span><span class="koboSpan" id="kobo.209.1">
func = decorator(func)
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.210.1"># is equivalent to the following:</span></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.211.1">@decorator</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.212.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.213.1">func</span></span><span class="koboSpan" id="kobo.214.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.215.1">arg1, arg2, ...</span></span><span class="koboSpan" id="kobo.216.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.217.1">pass</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.218.1">
     Instead of manually reassigning the function to what was returned by the decorator, we prepend the definition of the function with the special syntax,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.219.1">
      @decorator_name
     </span>
    </code>
    <span class="koboSpan" id="kobo.220.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.221.1">
     We can apply multiple decorators to the same function in the following way:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.222.1"># decorators/syntax.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.223.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.224.1">func</span></span><span class="koboSpan" id="kobo.225.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.226.1">arg1, arg2, ...</span></span><span class="koboSpan" id="kobo.227.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.228.1">pass</span></span><span class="koboSpan" id="kobo.229.1">
func = deco1(deco2(func))
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.230.1"># is equivalent to the following:</span></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.231.1">@deco1</span></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.232.1">@deco2</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.233.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.234.1">func</span></span><span class="koboSpan" id="kobo.235.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.236.1">arg1, arg2, ...</span></span><span class="koboSpan" id="kobo.237.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.238.1">pass</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.239.1">
     When
    </span>
    <a id="_idIndexMarker589">
    </a>
    <span class="koboSpan" id="kobo.240.1">
     applying multiple decorators, it is important to pay attention to the order.
    </span>
    <span class="koboSpan" id="kobo.240.2">
     In the preceding example,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.241.1">
      func()
     </span>
    </code>
    <span class="koboSpan" id="kobo.242.1">
     is decorated with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.243.1">
      deco2()
     </span>
    </code>
    <span class="koboSpan" id="kobo.244.1">
     first, and the result is decorated with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.245.1">
      deco1()
     </span>
    </code>
    <span class="koboSpan" id="kobo.246.1">
     .
    </span>
    <span class="koboSpan" id="kobo.246.2">
     A good rule of thumb is
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.247.1">
      the closer the decorator is to the function, the sooner it is applied
     </span>
    </em>
    <span class="koboSpan" id="kobo.248.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.249.1">
     Before we give you another example, let us fix the issue with the function name.
    </span>
    <span class="koboSpan" id="kobo.249.2">
     Take a look at the highlighted section in the following code:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.250.1"># decorators/time.measure.deco1.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.251.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.252.1">measure</span></span><span class="koboSpan" id="kobo.253.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.254.1">func</span></span><span class="koboSpan" id="kobo.255.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.256.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.257.1">wrapper</span></span><span class="koboSpan" id="kobo.258.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.259.1">*args, **kwargs</span></span><span class="koboSpan" id="kobo.260.1">):
        …
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.261.1">return</span></span><span class="koboSpan" id="kobo.262.1"> wrapper
f = measure(f)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.263.1"># decoration point</span></span>
<span class="code-highlight"><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.264.1">print</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.265.1">(f.__name__)  </span></strong><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.266.1"># wrapper  &lt;- ouch!</span></strong></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.267.1">
     We don’t want to lose the original function’s name and docstring when we decorate it.
    </span>
    <span class="koboSpan" id="kobo.267.2">
     But because
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.268.1">
      f
     </span>
    </code>
    <span class="koboSpan" id="kobo.269.1">
     , the decorated function, is reassigned to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.270.1">
      wrapper
     </span>
    </code>
    <span class="koboSpan" id="kobo.271.1">
     , its original attributes are lost, replaced with those of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.272.1">
      wrapper()
     </span>
    </code>
    <span class="koboSpan" id="kobo.273.1">
     .
    </span>
    <span class="koboSpan" id="kobo.273.2">
     There is an easy fix for that from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.274.1">
      functools
     </span>
    </code>
    <span class="koboSpan" id="kobo.275.1">
     module.
    </span>
    <span class="koboSpan" id="kobo.275.2">
     We will fix the issue and rewrite the code to use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.276.1">
      @
     </span>
    </code>
    <span class="koboSpan" id="kobo.277.1">
     operator:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.278.1"># decorators/time.measure.deco2.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.279.1">from</span></span><span class="koboSpan" id="kobo.280.1"> time </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.281.1">import</span></span><span class="koboSpan" id="kobo.282.1"> sleep, time
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.283.1">from</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.284.1"> functools </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.285.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.286.1"> wraps</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.287.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.288.1">measure</span></span><span class="koboSpan" id="kobo.289.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.290.1">func</span></span><span class="koboSpan" id="kobo.291.1">):
</span><span class="hljs-meta">    </span><span class="code-highlight"><strong class="hljs-meta-slc"><span class="koboSpan" id="kobo.292.1">@wraps(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.293.1">func</span></strong><strong class="hljs-meta-slc"><span class="koboSpan" id="kobo.294.1">)</span></strong></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.295.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.296.1">wrapper</span></span><span class="koboSpan" id="kobo.297.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.298.1">*args, **kwargs</span></span><span class="koboSpan" id="kobo.299.1">):
        t = time()
        func(*args, **kwargs)
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.300.1">print</span></span><span class="koboSpan" id="kobo.301.1">(func.__name__, "took:", time() - t)
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.302.1">return</span></span><span class="koboSpan" id="kobo.303.1"> wrapper
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.304.1">@measure</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.305.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.306.1">f</span></span><span class="koboSpan" id="kobo.307.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.308.1">sleep_time=</span></span><span class="hljs-number"><span class="koboSpan" id="kobo.309.1">0.1</span></span><span class="koboSpan" id="kobo.310.1">):
    """I'm a cat. </span><span class="koboSpan" id="kobo.310.2">I love to sleep!"""
    </span><span class="koboSpan" id="kobo.310.3">sleep(sleep_time)
f(sleep_time=</span><span class="hljs-number"><span class="koboSpan" id="kobo.311.1">0.3</span></span><span class="koboSpan" id="kobo.312.1">)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.313.1"># f took: 0.30042004585266113</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.314.1">print</span></span><span class="koboSpan" id="kobo.315.1">(f.__name__)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.316.1"># f</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.317.1">print</span></span><span class="koboSpan" id="kobo.318.1">(f.__doc__ )  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.319.1"># I'm a cat. </span><span class="koboSpan" id="kobo.319.2">I love to sleep!</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.320.1">
     All looks good.
    </span>
    <span class="koboSpan" id="kobo.320.2">
     As
    </span>
    <a id="_idIndexMarker590">
    </a>
    <span class="koboSpan" id="kobo.321.1">
     you can see, all we need to do is to tell Python that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.322.1">
      wrapper
     </span>
    </code>
    <span class="koboSpan" id="kobo.323.1">
     actually wraps
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.324.1">
      func()
     </span>
    </code>
    <span class="koboSpan" id="kobo.325.1">
     (by means of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.326.1">
      wraps()
     </span>
    </code>
    <span class="koboSpan" id="kobo.327.1">
     function in the highlighted portion of the code above), and you can see that the original name and docstring are maintained.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.328.1">
      For the full list of function attributes that are reassigned by
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.329.1">
       func()
      </span>
     </code>
     <span class="koboSpan" id="kobo.330.1">
      , please check the official documentation for the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.331.1">
       functools.update_wrapper()
      </span>
     </code>
     <span class="koboSpan" id="kobo.332.1">
      function here:
     </span>
     <a href="https://docs.python.org/3/library/functools.html?#functools.update_wrapper">
      <span class="url">
       <span class="koboSpan" id="kobo.333.1">
        https://docs.python.org/3/library/functools.html?#functools.update_wrapper
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.334.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.335.1">
     Let us see another example.
    </span>
    <span class="koboSpan" id="kobo.335.2">
     We want a decorator that prints an error message when the result of a function is greater than a certain threshold.
    </span>
    <span class="koboSpan" id="kobo.335.3">
     We will also take this opportunity to show you how to apply two decorators at once:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.336.1"># decorators/two.decorators.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.337.1">from</span></span><span class="koboSpan" id="kobo.338.1"> time </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.339.1">import</span></span><span class="koboSpan" id="kobo.340.1"> time
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.341.1">from</span></span><span class="koboSpan" id="kobo.342.1"> functools </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.343.1">import</span></span><span class="koboSpan" id="kobo.344.1"> wraps
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.345.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.346.1">measure</span></span><span class="koboSpan" id="kobo.347.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.348.1">func</span></span><span class="koboSpan" id="kobo.349.1">):
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.350.1">    @wraps(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.351.1">func</span></span><span class="hljs-meta"><span class="koboSpan" id="kobo.352.1">)</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.353.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.354.1">wrapper</span></span><span class="koboSpan" id="kobo.355.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.356.1">*args, **kwargs</span></span><span class="koboSpan" id="kobo.357.1">):
        t = time()
        result = func(*args, **kwargs)
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.358.1">print</span></span><span class="koboSpan" id="kobo.359.1">(func.__name__, "took:", time() - t)
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.360.1">return</span></span><span class="koboSpan" id="kobo.361.1"> result
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.362.1">return</span></span><span class="koboSpan" id="kobo.363.1"> wrapper
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.364.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.365.1">max_result</span></span><span class="koboSpan" id="kobo.366.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.367.1">func</span></span><span class="koboSpan" id="kobo.368.1">):
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.369.1">    @wraps(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.370.1">func</span></span><span class="hljs-meta"><span class="koboSpan" id="kobo.371.1">)</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.372.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.373.1">wrapper</span></span><span class="koboSpan" id="kobo.374.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.375.1">*args, **kwargs</span></span><span class="koboSpan" id="kobo.376.1">):
        result = func(*args, **kwargs)
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.377.1">if</span></span><span class="koboSpan" id="kobo.378.1"> result &gt; </span><span class="hljs-number"><span class="koboSpan" id="kobo.379.1">100</span></span><span class="koboSpan" id="kobo.380.1">:
            </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.381.1">print</span></span><span class="koboSpan" id="kobo.382.1">(
                f"Result </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.383.1">is</span></span><span class="koboSpan" id="kobo.384.1"> too big ({result}). </span><span class="koboSpan" id="kobo.384.2">"
                "Max allowed </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.385.1">is</span></span> <span class="hljs-number"><span class="koboSpan" id="kobo.386.1">100.</span></span><span class="koboSpan" id="kobo.387.1">"
            )
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.388.1">return</span></span><span class="koboSpan" id="kobo.389.1"> result
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.390.1">return</span></span><span class="koboSpan" id="kobo.391.1"> wrapper
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.392.1">@measure</span></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.393.1">@max_result</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.394.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.395.1">cube</span></span><span class="koboSpan" id="kobo.396.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.397.1">n</span></span><span class="koboSpan" id="kobo.398.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.399.1">return</span></span><span class="koboSpan" id="kobo.400.1"> n**</span><span class="hljs-number"><span class="koboSpan" id="kobo.401.1">3</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.402.1">print</span></span><span class="koboSpan" id="kobo.403.1">(cube(</span><span class="hljs-number"><span class="koboSpan" id="kobo.404.1">2</span></span><span class="koboSpan" id="kobo.405.1">))
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.406.1">print</span></span><span class="koboSpan" id="kobo.407.1">(cube(</span><span class="hljs-number"><span class="koboSpan" id="kobo.408.1">5</span></span><span class="koboSpan" id="kobo.409.1">))
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.410.1">
     We had to
    </span>
    <a id="_idIndexMarker591">
    </a>
    <span class="koboSpan" id="kobo.411.1">
     enhance the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.412.1">
      measure()
     </span>
    </code>
    <span class="koboSpan" id="kobo.413.1">
     decorator so that its
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.414.1">
      wrapper()
     </span>
    </code>
    <span class="koboSpan" id="kobo.415.1">
     now returns the result of the call to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.416.1">
      func()
     </span>
    </code>
    <span class="koboSpan" id="kobo.417.1">
     .
    </span>
    <span class="koboSpan" id="kobo.417.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.418.1">
      max_result()
     </span>
    </code>
    <span class="koboSpan" id="kobo.419.1">
     decorator does that as well, but before returning, it checks that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.420.1">
      result
     </span>
    </code>
    <span class="koboSpan" id="kobo.421.1">
     is not greater than
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.422.1">
      100
     </span>
    </code>
    <span class="koboSpan" id="kobo.423.1">
     , which is the maximum allowed.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.424.1">
     We decorated
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.425.1">
      cube()
     </span>
    </code>
    <span class="koboSpan" id="kobo.426.1">
     with both of them.
    </span>
    <span class="koboSpan" id="kobo.426.2">
     First,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.427.1">
      max_result()
     </span>
    </code>
    <span class="koboSpan" id="kobo.428.1">
     is applied, and then
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.429.1">
      measure()
     </span>
    </code>
    <span class="koboSpan" id="kobo.430.1">
     .
    </span>
    <span class="koboSpan" id="kobo.430.2">
     Running this code yields this result:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.431.1">$ </span><span class="language-bash"><span class="koboSpan" id="kobo.432.1">python two.decorators.py</span></span><span class="koboSpan" id="kobo.433.1">
cube took: 9.5367431640625e-07
8
Result is too big (125). </span><span class="koboSpan" id="kobo.433.2">Max allowed is 100.
</span><span class="koboSpan" id="kobo.433.3">cube took: 3.0994415283203125e-06
125
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.434.1">
     For your convenience, we have separated the results of the two calls with a blank line.
    </span>
    <span class="koboSpan" id="kobo.434.2">
     In the first call, the result is 8, which passes the threshold check.
    </span>
    <span class="koboSpan" id="kobo.434.3">
     The running time is measured and printed.
    </span>
    <span class="koboSpan" id="kobo.434.4">
     Finally, we print the result (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.435.1">
      8
     </span>
    </code>
    <span class="koboSpan" id="kobo.436.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.437.1">
     On the second call, the result is 125, so the error message is printed and the result returned; then it is the turn of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.438.1">
      measure()
     </span>
    </code>
    <span class="koboSpan" id="kobo.439.1">
     , which prints the running time again, and finally, we print the result (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.440.1">
      125
     </span>
    </code>
    <span class="koboSpan" id="kobo.441.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.442.1">
     Had we decorated the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.443.1">
      cube()
     </span>
    </code>
    <span class="koboSpan" id="kobo.444.1">
     function with the same two decorators but in a different order, the order of the printed messages would also have been different.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-185">
    <span class="koboSpan" id="kobo.445.1">
     A decorator factory
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.446.1">
     Some
    </span>
    <a id="_idIndexMarker592">
    </a>
    <span class="koboSpan" id="kobo.447.1">
     decorators can take arguments.
    </span>
    <span class="koboSpan" id="kobo.447.2">
     This technique is generally used to produce another decorator (in which case, the object could be called a
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.448.1">
      decorator factory
     </span>
    </strong>
    <span class="koboSpan" id="kobo.449.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.449.2">
     Let us look at the syntax, and then we will see an example of it:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.450.1"># decorators/syntax.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.451.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.452.1">func</span></span><span class="koboSpan" id="kobo.453.1">(arg1, arg2, ...):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.454.1">pass</span></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.455.1">func</span></span><span class="koboSpan" id="kobo.456.1"> = decoarg(arg_a, arg_b)(func)
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.457.1"># is equivalent to the following:</span></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.458.1">@decoarg(</span></span><span class="koboSpan" id="kobo.459.1">arg_a, arg_b</span><span class="hljs-meta"><span class="koboSpan" id="kobo.460.1">)</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.461.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.462.1">func</span></span><span class="koboSpan" id="kobo.463.1">(arg1, arg2, ...):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.464.1">pass</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.465.1">
     As you can see, this case is a bit different.
    </span>
    <span class="koboSpan" id="kobo.465.2">
     First,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.466.1">
      decoarg()
     </span>
    </code>
    <span class="koboSpan" id="kobo.467.1">
     is called with the given arguments, and then its return value (the actual decorator) is called with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.468.1">
      func()
     </span>
    </code>
    <span class="koboSpan" id="kobo.469.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.470.1">
     Let us improve on the example now.
    </span>
    <span class="koboSpan" id="kobo.470.2">
     We are going back to a single decorator:
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.471.1">
      max_result()
     </span>
    </code>
    <span class="koboSpan" id="kobo.472.1">
     .
    </span>
    <span class="koboSpan" id="kobo.472.2">
     We want to make it so that we can decorate different functions with different thresholds, as we do not want to have to write one decorator for each threshold.
    </span>
    <span class="koboSpan" id="kobo.472.3">
     Therefore, let us amend
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.473.1">
      max_result()
     </span>
    </code>
    <span class="koboSpan" id="kobo.474.1">
     so that it allows us to decorate functions by specifying the threshold dynamically:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.475.1"># decorators/decorators.factory.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.476.1">from</span></span><span class="koboSpan" id="kobo.477.1"> functools </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.478.1">import</span></span><span class="koboSpan" id="kobo.479.1"> wraps
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.480.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.481.1">max_result</span></span><span class="koboSpan" id="kobo.482.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.483.1">threshold</span></span><span class="koboSpan" id="kobo.484.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.485.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.486.1">decorator</span></span><span class="koboSpan" id="kobo.487.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.488.1">func</span></span><span class="koboSpan" id="kobo.489.1">):
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.490.1">        @wraps(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.491.1">func</span></span><span class="hljs-meta"><span class="koboSpan" id="kobo.492.1">)</span></span>
        <span class="hljs-keyword"><span class="koboSpan" id="kobo.493.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.494.1">wrapper</span></span><span class="koboSpan" id="kobo.495.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.496.1">*args, **kwargs</span></span><span class="koboSpan" id="kobo.497.1">):
            result = func(*args, **kwargs)
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.498.1">if</span></span><span class="koboSpan" id="kobo.499.1"> result &gt; threshold:
                </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.500.1">print</span></span><span class="koboSpan" id="kobo.501.1">(
                    f"Result </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.502.1">is</span></span><span class="koboSpan" id="kobo.503.1"> too big ({result})."
                    </span><span class="koboSpan" id="kobo.503.2">f"Max allowed </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.504.1">is</span></span><span class="koboSpan" id="kobo.505.1"> {threshold}."
                </span><span class="koboSpan" id="kobo.505.2">)
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.506.1">return</span></span><span class="koboSpan" id="kobo.507.1"> result
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.508.1">return</span></span><span class="koboSpan" id="kobo.509.1"> wrapper
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.510.1">return</span></span><span class="koboSpan" id="kobo.511.1"> decorator
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.512.1">@max_result(</span></span><span class="hljs-number"><span class="koboSpan" id="kobo.513.1">75</span></span><span class="hljs-meta"><span class="koboSpan" id="kobo.514.1">)</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.515.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.516.1">cube</span></span><span class="koboSpan" id="kobo.517.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.518.1">n</span></span><span class="koboSpan" id="kobo.519.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.520.1">return</span></span><span class="koboSpan" id="kobo.521.1"> n**</span><span class="hljs-number"><span class="koboSpan" id="kobo.522.1">3</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.523.1">
     The preceding
    </span>
    <a id="_idIndexMarker593">
    </a>
    <span class="koboSpan" id="kobo.524.1">
     code shows you how to write a decorator factory.
    </span>
    <span class="koboSpan" id="kobo.524.2">
     If you recall, decorating a function with a decorator that takes arguments is the same as writing
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.525.1">
      func = decorator(argA, argB)(func)
     </span>
    </code>
    <span class="koboSpan" id="kobo.526.1">
     , so when we decorate
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.527.1">
      cube()
     </span>
    </code>
    <span class="koboSpan" id="kobo.528.1">
     with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.529.1">
      max_result(75)
     </span>
    </code>
    <span class="koboSpan" id="kobo.530.1">
     , we are doing
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.531.1">
      cube = max_result(75)(cube)
     </span>
    </code>
    <span class="koboSpan" id="kobo.532.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.533.1">
     Let us go through what happens, step by step.
    </span>
    <span class="koboSpan" id="kobo.533.2">
     When we call
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.534.1">
      max_result(75)
     </span>
    </code>
    <span class="koboSpan" id="kobo.535.1">
     , we enter its body.
    </span>
    <span class="koboSpan" id="kobo.535.2">
     A
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.536.1">
      decorator()
     </span>
    </code>
    <span class="koboSpan" id="kobo.537.1">
     function is defined inside the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.538.1">
      max_result(75)
     </span>
    </code>
    <span class="koboSpan" id="kobo.539.1">
     function, which takes a function as its only argument.
    </span>
    <span class="koboSpan" id="kobo.539.2">
     Inside that function, we find the usual decoration pattern.
    </span>
    <span class="koboSpan" id="kobo.539.3">
     We define
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.540.1">
      wrapper()
     </span>
    </code>
    <span class="koboSpan" id="kobo.541.1">
     , inside of which we check the result of the original function’s call.
    </span>
    <span class="koboSpan" id="kobo.541.2">
     The beauty of this approach is that from the innermost level, we can still refer to both
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.542.1">
      func()
     </span>
    </code>
    <span class="koboSpan" id="kobo.543.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.544.1">
      threshold
     </span>
    </code>
    <span class="koboSpan" id="kobo.545.1">
     , which allows us to set the threshold dynamically.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.546.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.547.1">
      wrapper()
     </span>
    </code>
    <span class="koboSpan" id="kobo.548.1">
     function returns
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.549.1">
      result
     </span>
    </code>
    <span class="koboSpan" id="kobo.550.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.551.1">
      decorator()
     </span>
    </code>
    <span class="koboSpan" id="kobo.552.1">
     returns
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.553.1">
      wrapper()
     </span>
    </code>
    <span class="koboSpan" id="kobo.554.1">
     , and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.555.1">
      max_result()
     </span>
    </code>
    <span class="koboSpan" id="kobo.556.1">
     returns
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.557.1">
      decorator()
     </span>
    </code>
    <span class="koboSpan" id="kobo.558.1">
     .
    </span>
    <span class="koboSpan" id="kobo.558.2">
     This means that the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.559.1">
      cube = max_result(75)(cube)
     </span>
    </code>
    <span class="koboSpan" id="kobo.560.1">
     instruction actually becomes
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.561.1">
      cube = decorator(cube)
     </span>
    </code>
    <span class="koboSpan" id="kobo.562.1">
     .
    </span>
    <span class="koboSpan" id="kobo.562.2">
     However, it’s not just any
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.563.1">
      decorator()
     </span>
    </code>
    <span class="koboSpan" id="kobo.564.1">
     but one for which
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.565.1">
      threshold
     </span>
    </code>
    <span class="koboSpan" id="kobo.566.1">
     has a value of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.567.1">
      75
     </span>
    </code>
    <span class="koboSpan" id="kobo.568.1">
     .
    </span>
    <span class="koboSpan" id="kobo.568.2">
     This is achieved by a mechanism
    </span>
    <a id="_idIndexMarker594">
    </a>
    <span class="koboSpan" id="kobo.569.1">
     called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.570.1">
      closure
     </span>
    </strong>
    <span class="koboSpan" id="kobo.571.1">
     .
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.572.1">
      Dynamically created functions that are returned by other functions are called
     </span>
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.573.1">
       closures
      </span>
     </strong>
     <span class="koboSpan" id="kobo.574.1">
      .
     </span>
     <span class="koboSpan" id="kobo.574.2">
      Their main feature is that they have full access to the variables and names defined in the local namespace at the time of their creation, even though the enclosing in which they were defined has returned and finished executing.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.575.1">
     Running the last example produces the following result:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.576.1">$ python decorators.factory.py
Result is too big (125). </span><span class="koboSpan" id="kobo.576.2">Max allowed is 75.
</span><span class="koboSpan" id="kobo.576.3">125
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.577.1">
     The preceding code allows us to use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.578.1">
      max_result()
     </span>
    </code>
    <span class="koboSpan" id="kobo.579.1">
     decorator with different thresholds, like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.580.1"># decorators/decorators.factory.py</span></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.581.1">@max_result(</span></span><span class="code-highlight"><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.582.1">75</span></strong></span><span class="hljs-meta"><span class="koboSpan" id="kobo.583.1">)</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.584.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.585.1">cube</span></span><span class="koboSpan" id="kobo.586.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.587.1">n</span></span><span class="koboSpan" id="kobo.588.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.589.1">return</span></span><span class="koboSpan" id="kobo.590.1"> n**</span><span class="hljs-number"><span class="koboSpan" id="kobo.591.1">3</span></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.592.1">@max_result(</span></span><span class="code-highlight"><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.593.1">100</span></strong></span><span class="hljs-meta"><span class="koboSpan" id="kobo.594.1">)</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.595.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.596.1">square</span></span><span class="koboSpan" id="kobo.597.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.598.1">n</span></span><span class="koboSpan" id="kobo.599.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.600.1">return</span></span><span class="koboSpan" id="kobo.601.1"> n**</span><span class="hljs-number"><span class="koboSpan" id="kobo.602.1">2</span></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.603.1">@max_result(</span></span><span class="code-highlight"><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.604.1">1000</span></strong></span><span class="hljs-meta"><span class="koboSpan" id="kobo.605.1">)</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.606.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.607.1">multiply</span></span><span class="koboSpan" id="kobo.608.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.609.1">a, b</span></span><span class="koboSpan" id="kobo.610.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.611.1">return</span></span><span class="koboSpan" id="kobo.612.1"> a * b
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.613.1">
     Note that every
    </span>
    <a id="_idIndexMarker595">
    </a>
    <span class="koboSpan" id="kobo.614.1">
     decoration uses a different
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.615.1">
      threshold
     </span>
    </code>
    <span class="koboSpan" id="kobo.616.1">
     value.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.617.1">
     Decorators are very popular in Python.
    </span>
    <span class="koboSpan" id="kobo.617.2">
     They are used quite often, and they make code simpler and more elegant.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-186">
    <span class="koboSpan" id="kobo.618.1">
     OOP
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.619.1">
     Now that
    </span>
    <a id="_idIndexMarker596">
    </a>
    <span class="koboSpan" id="kobo.620.1">
     the basics of the decoration pattern have been covered, it is time to explore OOP.
    </span>
    <span class="koboSpan" id="kobo.620.2">
     We will use the definition from
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.621.1">
      Kindler, E.; Krivy, I.
     </span>
     <span class="koboSpan" id="kobo.621.2">
      (2011).
     </span>
     <span class="koboSpan" id="kobo.621.3">
      Object-oriented simulation of systems with sophisticated control (International Journal of General Systems)
     </span>
    </em>
    <span class="koboSpan" id="kobo.622.1">
     , and adapt it to Python:
    </span>
   </p>
   <blockquote class="packt_quote">
    <p class="quote">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.623.1">
       Object-oriented programming
      </span>
     </strong>
     <span class="koboSpan" id="kobo.624.1">
      (
     </span>
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.625.1">
       OOP
      </span>
     </strong>
     <span class="koboSpan" id="kobo.626.1">
      ) is a programming paradigm based on the concept of “objects,” which are data structures that contain data, in the form of attributes, and code, in the form of functions known as methods.
     </span>
     <span class="koboSpan" id="kobo.626.2">
      A distinguishing feature of objects is that an object’s method can access and often modify the data attributes of the object with which they are associated (objects have a notion of “self”).
     </span>
     <span class="koboSpan" id="kobo.626.3">
      In OO programming, computer programs are designed by making them out of objects that interact with one another.
     </span>
    </p>
   </blockquote>
   <p class="normal">
    <span class="koboSpan" id="kobo.627.1">
     Python has full support for this paradigm.
    </span>
    <span class="koboSpan" id="kobo.627.2">
     Actually, as we have already said,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.628.1">
      everything in Python is an object
     </span>
    </em>
    <span class="koboSpan" id="kobo.629.1">
     , so this shows that OOP is not just supported by Python but is also a core feature of the language.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.630.1">
     The two main players in OOP
    </span>
    <a id="_idIndexMarker597">
    </a>
    <span class="koboSpan" id="kobo.631.1">
     are
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.632.1">
      objects
     </span>
    </strong>
    <span class="koboSpan" id="kobo.633.1">
     and
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.634.1">
      classes
     </span>
    </strong>
    <span class="koboSpan" id="kobo.635.1">
     .
    </span>
    <span class="koboSpan" id="kobo.635.2">
     Classes
    </span>
    <a id="_idIndexMarker598">
    </a>
    <span class="koboSpan" id="kobo.636.1">
     are used to create objects, and we say that objects are
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.637.1">
      instances
     </span>
    </strong>
    <span class="koboSpan" id="kobo.638.1">
     of classes.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.639.1">
     If you struggle to understand the difference between objects and classes, think of it like this.
    </span>
    <span class="koboSpan" id="kobo.639.2">
     When you hear the word “pen,” you know exactly what the type (or class) of object that the word represents is.
    </span>
    <span class="koboSpan" id="kobo.639.3">
     However, if we say “this pen,” then we’re not referring to a class of objects but, rather, to an “instance” of that class: a real object.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.640.1">
     When
    </span>
    <a id="_idIndexMarker599">
    </a>
    <span class="koboSpan" id="kobo.641.1">
     objects are created from a class, they inherit the class attributes and methods.
    </span>
    <span class="koboSpan" id="kobo.641.2">
     They represent concrete items in the program’s domain.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-187">
    <span class="koboSpan" id="kobo.642.1">
     The simplest Python class
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.643.1">
     We
    </span>
    <a id="_idIndexMarker600">
    </a>
    <span class="koboSpan" id="kobo.644.1">
     will start with the simplest class you could ever write in Python:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.645.1"># oop/simplest.class.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.646.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.647.1">Simplest</span></span><span class="koboSpan" id="kobo.648.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.649.1">pass</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.650.1">print</span></span><span class="koboSpan" id="kobo.651.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.652.1">type</span></span><span class="koboSpan" id="kobo.653.1">(Simplest))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.654.1"># </span></span><span class="code-highlight"><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.655.1">what type is this object?</span></strong></span><span class="koboSpan" id="kobo.656.1">
simp = Simplest()  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.657.1"># we create an instance of Simplest: simp</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.658.1">print</span></span><span class="koboSpan" id="kobo.659.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.660.1">type</span></span><span class="koboSpan" id="kobo.661.1">(simp))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.662.1"># what type is simp?</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.663.1"># is simp an instance of Simplest?</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.664.1">print</span></span><span class="koboSpan" id="kobo.665.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.666.1">type</span></span><span class="koboSpan" id="kobo.667.1">(simp) </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.668.1">is</span></span><span class="koboSpan" id="kobo.669.1"> Simplest)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.670.1"># There's a better way to do this</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.671.1">
     Let us run the preceding code and explain it line by line:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.672.1">$ python simplest.class.py
&lt;class 'type'&gt;
&lt;class '__main__.Simplest'&gt;
True
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.673.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.674.1">
      Simplest
     </span>
    </code>
    <span class="koboSpan" id="kobo.675.1">
     class we defined has only the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.676.1">
      pass
     </span>
    </code>
    <span class="koboSpan" id="kobo.677.1">
     instruction in its body, which means it doesn’t have any custom attributes or methods.
    </span>
    <span class="koboSpan" id="kobo.677.2">
     We will print its type (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.678.1">
      __main__
     </span>
    </code>
    <span class="koboSpan" id="kobo.679.1">
     is the name of the scope in which top-level code executes), and we are aware that, in the highlighted comment, we wrote
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.680.1">
      object
     </span>
    </em>
    <span class="koboSpan" id="kobo.681.1">
     instead of
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.682.1">
      class
     </span>
    </em>
    <span class="koboSpan" id="kobo.683.1">
     .
    </span>
    <span class="koboSpan" id="kobo.683.2">
     As you can see by the result of that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.684.1">
      print
     </span>
    </code>
    <span class="koboSpan" id="kobo.685.1">
     statement,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.686.1">
      classes are in fact objects themselves
     </span>
    </em>
    <span class="koboSpan" id="kobo.687.1">
     .
    </span>
    <span class="koboSpan" id="kobo.687.2">
     To be precise, they are instances of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.688.1">
      type
     </span>
    </code>
    <span class="koboSpan" id="kobo.689.1">
     .
    </span>
    <span class="koboSpan" id="kobo.689.2">
     Explaining this concept would lead us to a
    </span>
    <a id="_idIndexMarker601">
    </a>
    <span class="koboSpan" id="kobo.690.1">
     talk about
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.691.1">
      metaclasses
     </span>
    </strong>
    <span class="koboSpan" id="kobo.692.1">
     and
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.693.1">
      metaprogramming
     </span>
    </strong>
    <span class="koboSpan" id="kobo.694.1">
     , advanced
    </span>
    <a id="_idIndexMarker602">
    </a>
    <span class="koboSpan" id="kobo.695.1">
     concepts that require a solid grasp of the fundamentals to be understood and are beyond the scope of this chapter.
    </span>
    <span class="koboSpan" id="kobo.695.2">
     As usual, we mentioned it to leave a pointer for you, for when you are ready to explore more deeply.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.696.1">
     Let us go back to the example: we created
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.697.1">
      simp
     </span>
    </code>
    <span class="koboSpan" id="kobo.698.1">
     , an instance of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.699.1">
      Simplest
     </span>
    </code>
    <span class="koboSpan" id="kobo.700.1">
     class.
    </span>
    <span class="koboSpan" id="kobo.700.2">
     You can see that the syntax to create an instance is the same as the syntax for calling a function.
    </span>
    <span class="koboSpan" id="kobo.700.3">
     Next, we
    </span>
    <a id="_idIndexMarker603">
    </a>
    <span class="koboSpan" id="kobo.701.1">
     print what type
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.702.1">
      simp
     </span>
    </code>
    <span class="koboSpan" id="kobo.703.1">
     belongs to, and we verify that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.704.1">
      simp
     </span>
    </code>
    <span class="koboSpan" id="kobo.705.1">
     is, in fact, an instance of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.706.1">
      Simplest
     </span>
    </code>
    <span class="koboSpan" id="kobo.707.1">
     .
    </span>
    <span class="koboSpan" id="kobo.707.2">
     We will show you a better way of doing this later on in the chapter.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.708.1">
     So far, it has all been very simple.
    </span>
    <span class="koboSpan" id="kobo.708.2">
     However, what happens when we write
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.709.1">
      class ClassName(): pass
     </span>
    </code>
    <span class="koboSpan" id="kobo.710.1">
     ?
    </span>
    <span class="koboSpan" id="kobo.710.2">
     Well, what Python does is to create a class object and assign it a name.
    </span>
    <span class="koboSpan" id="kobo.710.3">
     This is very similar to what happens when we declare a function using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.711.1">
      def
     </span>
    </code>
    <span class="koboSpan" id="kobo.712.1">
     .
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-188">
    <span class="koboSpan" id="kobo.713.1">
     Class and object namespaces
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.714.1">
     After a
    </span>
    <a id="_idIndexMarker604">
    </a>
    <span class="koboSpan" id="kobo.715.1">
     class object has been created (which usually happens when the module is first imported), it represents a namespace.
    </span>
    <span class="koboSpan" id="kobo.715.2">
     We can call that class to create its instances.
    </span>
    <span class="koboSpan" id="kobo.715.3">
     Each instance inherits the class attributes and methods and is given its own namespace.
    </span>
    <span class="koboSpan" id="kobo.715.4">
     We already know that in order to walk a namespace, all we need to do is to use the dot (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.716.1">
      .
     </span>
    </code>
    <span class="koboSpan" id="kobo.717.1">
     ) operator.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.718.1">
     Let us look at another example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.719.1"># oop/class.namespaces.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.720.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.721.1">Person</span></span><span class="koboSpan" id="kobo.722.1">:
    species = "Human"
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.723.1">print</span></span><span class="koboSpan" id="kobo.724.1">(Person.species)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.725.1"># Human</span></span><span class="koboSpan" id="kobo.726.1">
Person.alive = </span><span class="hljs-literal"><span class="koboSpan" id="kobo.727.1">True</span></span>  <span class="hljs-comment"><span class="koboSpan" id="kobo.728.1"># Added dynamically!</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.729.1">print</span></span><span class="koboSpan" id="kobo.730.1">(Person.alive)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.731.1"># True</span></span><span class="koboSpan" id="kobo.732.1">
man = Person()
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.733.1">print</span></span><span class="koboSpan" id="kobo.734.1">(man.species)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.735.1"># Human (inherited)</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.736.1">print</span></span><span class="koboSpan" id="kobo.737.1">(man.alive)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.738.1"># True (inherited)</span></span><span class="koboSpan" id="kobo.739.1">
Person.alive = </span><span class="hljs-literal"><span class="koboSpan" id="kobo.740.1">False</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.741.1">print</span></span><span class="koboSpan" id="kobo.742.1">(man.alive)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.743.1"># False (inherited)</span></span><span class="koboSpan" id="kobo.744.1">
man.name = "Darth"
man.surname = "Vader"
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.745.1">print</span></span><span class="koboSpan" id="kobo.746.1">(man.name, man.surname)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.747.1"># Darth Vader</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.748.1">
     In the preceding example, we
    </span>
    <a id="_idIndexMarker605">
    </a>
    <span class="koboSpan" id="kobo.749.1">
     defined a
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.750.1">
      class attribute
     </span>
    </strong>
    <span class="koboSpan" id="kobo.751.1">
     called
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.752.1">
      species
     </span>
    </code>
    <span class="koboSpan" id="kobo.753.1">
     .
    </span>
    <span class="koboSpan" id="kobo.753.2">
     Any name defined in the body of a class becomes an attribute that belongs to that class.
    </span>
    <span class="koboSpan" id="kobo.753.3">
     In the code, we also defined
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.754.1">
      Person.alive
     </span>
    </code>
    <span class="koboSpan" id="kobo.755.1">
     , which is another class attribute.
    </span>
    <span class="koboSpan" id="kobo.755.2">
     You can see that there is no restriction on accessing that attribute from the class.
    </span>
    <span class="koboSpan" id="kobo.755.3">
     You can see that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.756.1">
      man
     </span>
    </code>
    <span class="koboSpan" id="kobo.757.1">
     , which is an
    </span>
    <a id="_idIndexMarker606">
    </a>
    <span class="koboSpan" id="kobo.758.1">
     instance of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.759.1">
      Person
     </span>
    </code>
    <span class="koboSpan" id="kobo.760.1">
     , inherits both of them, reflecting them instantly when they change.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.761.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.762.1">
      man
     </span>
    </code>
    <span class="koboSpan" id="kobo.763.1">
     instance
    </span>
    <a id="_idIndexMarker607">
    </a>
    <span class="koboSpan" id="kobo.764.1">
     also has two attributes that belong to its own namespace and are, therefore, called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.765.1">
      instance attributes
     </span>
    </strong>
    <span class="koboSpan" id="kobo.766.1">
     :
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.767.1">
      name
     </span>
    </code>
    <span class="koboSpan" id="kobo.768.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.769.1">
      surname
     </span>
    </code>
    <span class="koboSpan" id="kobo.770.1">
     .
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.771.1">
       Class attributes
      </span>
     </strong>
     <span class="koboSpan" id="kobo.772.1">
      are shared among all instances, while
     </span>
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.773.1">
       instance attributes
      </span>
     </strong>
     <span class="koboSpan" id="kobo.774.1">
      are not; therefore, you should use class attributes to provide the states and behaviors to be shared by all instances, and use instance attributes for data that will be specific to each individual object.
     </span>
    </p>
   </div>
   <h2 class="heading-2" id="_idParaDest-189">
    <span class="koboSpan" id="kobo.775.1">
     Attribute shadowing
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.776.1">
     When you
    </span>
    <a id="_idIndexMarker608">
    </a>
    <span class="koboSpan" id="kobo.777.1">
     search for an attribute on an object and cannot find it, Python extends the search to the attributes on the object’s class (and keeps searching until the attribute is either found or the end of the inheritance chain is reached—more on inheritance later).
    </span>
    <span class="koboSpan" id="kobo.777.2">
     This leads to an interesting shadowing behavior.
    </span>
    <span class="koboSpan" id="kobo.777.3">
     Let us look at an example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.778.1"># oop/class.attribute.shadowing.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.779.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.780.1">Point</span></span><span class="koboSpan" id="kobo.781.1">:
    x = </span><span class="hljs-number"><span class="koboSpan" id="kobo.782.1">10</span></span><span class="koboSpan" id="kobo.783.1">
    y = </span><span class="hljs-number"><span class="koboSpan" id="kobo.784.1">7</span></span><span class="koboSpan" id="kobo.785.1">
p = Point()
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.786.1">print</span></span><span class="koboSpan" id="kobo.787.1">(p.x)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.788.1"># 10 (from class attribute)</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.789.1">print</span></span><span class="koboSpan" id="kobo.790.1">(p.y)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.791.1"># 7 (from class attribute)</span></span><span class="koboSpan" id="kobo.792.1">
p.x = </span><span class="hljs-number"><span class="koboSpan" id="kobo.793.1">12</span></span>  <span class="hljs-comment"><span class="koboSpan" id="kobo.794.1"># p gets its own `x` attribute</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.795.1">print</span></span><span class="koboSpan" id="kobo.796.1">(p.x)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.797.1"># 12 (now found on the instance)</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.798.1">print</span></span><span class="koboSpan" id="kobo.799.1">(Point.x)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.800.1"># 10 (class attribute still the same)</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.801.1">del</span></span><span class="koboSpan" id="kobo.802.1"> p.x  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.803.1"># we delete instance attribute</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.804.1">print</span></span><span class="koboSpan" id="kobo.805.1">(p.x)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.806.1"># 10 (now search has to go again to find class attr)</span></span><span class="koboSpan" id="kobo.807.1">
p.z = </span><span class="hljs-number"><span class="koboSpan" id="kobo.808.1">3</span></span>  <span class="hljs-comment"><span class="koboSpan" id="kobo.809.1"># let's make it a 3D point</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.810.1">print</span></span><span class="koboSpan" id="kobo.811.1">(p.z)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.812.1"># 3</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.813.1">print</span></span><span class="koboSpan" id="kobo.814.1">(Point.z)
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.815.1"># AttributeError: type object 'Point' has no attribute 'z'</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.816.1">
     The preceding code is interesting.
    </span>
    <span class="koboSpan" id="kobo.816.2">
     We defined a class called
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.817.1">
      Point
     </span>
    </code>
    <span class="koboSpan" id="kobo.818.1">
     with two class attributes,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.819.1">
      x
     </span>
    </code>
    <span class="koboSpan" id="kobo.820.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.821.1">
      y
     </span>
    </code>
    <span class="koboSpan" id="kobo.822.1">
     .
    </span>
    <span class="koboSpan" id="kobo.822.2">
     When we create an instance of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.823.1">
      Point
     </span>
    </code>
    <span class="koboSpan" id="kobo.824.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.825.1">
      p
     </span>
    </code>
    <span class="koboSpan" id="kobo.826.1">
     , you can see that we can access both
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.827.1">
      x
     </span>
    </code>
    <span class="koboSpan" id="kobo.828.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.829.1">
      y
     </span>
    </code>
    <span class="koboSpan" id="kobo.830.1">
     from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.831.1">
      p
     </span>
    </code>
    <span class="koboSpan" id="kobo.832.1">
     namespace (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.833.1">
      p.x
     </span>
    </code>
    <span class="koboSpan" id="kobo.834.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.835.1">
      p.y
     </span>
    </code>
    <span class="koboSpan" id="kobo.836.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.836.2">
     What happens when we do that is that Python doesn’t find any
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.837.1">
      x
     </span>
    </code>
    <span class="koboSpan" id="kobo.838.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.839.1">
      y
     </span>
    </code>
    <span class="koboSpan" id="kobo.840.1">
     attributes on the instance, and therefore, it searches the class and finds them there.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.841.1">
     Then, we
    </span>
    <a id="_idIndexMarker609">
    </a>
    <span class="koboSpan" id="kobo.842.1">
     give
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.843.1">
      p
     </span>
    </code>
    <span class="koboSpan" id="kobo.844.1">
     its own
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.845.1">
      x
     </span>
    </code>
    <span class="koboSpan" id="kobo.846.1">
     attribute by assigning
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.847.1">
      p.x = 12
     </span>
    </code>
    <span class="koboSpan" id="kobo.848.1">
     .
    </span>
    <span class="koboSpan" id="kobo.848.2">
     This behavior may appear a bit weird at first, but if you think about it, it is exactly the same as what happens in a function that declares
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.849.1">
      x = 12
     </span>
    </code>
    <span class="koboSpan" id="kobo.850.1">
     when there is a global
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.851.1">
      x = 10
     </span>
    </code>
    <span class="koboSpan" id="kobo.852.1">
     outside (see the section about scopes in
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.853.1">
      Chapter 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.854.1">
     ,
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.855.1">
      Functions, the Building Blocks of Code
     </span>
    </em>
    <span class="koboSpan" id="kobo.856.1">
     , for a refresher).
    </span>
    <span class="koboSpan" id="kobo.856.2">
     We know that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.857.1">
      x = 12
     </span>
    </code>
    <span class="koboSpan" id="kobo.858.1">
     won’t affect the global one, and for class and instance attributes, it is exactly the same.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.859.1">
     After assigning
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.860.1">
      p.x = 12
     </span>
    </code>
    <span class="koboSpan" id="kobo.861.1">
     , when we print it, the search does not need to reach the class attributes because
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.862.1">
      x
     </span>
    </code>
    <span class="koboSpan" id="kobo.863.1">
     is found on the instance, so we get
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.864.1">
      12
     </span>
    </code>
    <span class="koboSpan" id="kobo.865.1">
     printed out.
    </span>
    <span class="koboSpan" id="kobo.865.2">
     We also print
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.866.1">
      Point.x
     </span>
    </code>
    <span class="koboSpan" id="kobo.867.1">
     , which refers to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.868.1">
      x
     </span>
    </code>
    <span class="koboSpan" id="kobo.869.1">
     in the class namespace, to show that it is still 10.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.870.1">
     Then, we delete
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.871.1">
      x
     </span>
    </code>
    <span class="koboSpan" id="kobo.872.1">
     from the namespace of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.873.1">
      p
     </span>
    </code>
    <span class="koboSpan" id="kobo.874.1">
     , which means that, on the next line, when we print it again, Python will have to search for it in the class because it is no longer found on the instance.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.875.1">
     The last three lines show you that assigning attributes to an instance doesn’t mean that they will be found in the class.
    </span>
    <span class="koboSpan" id="kobo.875.2">
     Instances get whatever is in the class, but the opposite is not true.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.876.1">
     What do you think about putting the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.877.1">
      x
     </span>
    </code>
    <span class="koboSpan" id="kobo.878.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.879.1">
      y
     </span>
    </code>
    <span class="koboSpan" id="kobo.880.1">
     coordinates as class attributes?
    </span>
    <span class="koboSpan" id="kobo.880.2">
     Do you think it was a good idea?
    </span>
    <span class="koboSpan" id="kobo.880.3">
     What if we created another instance of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.881.1">
      Point
     </span>
    </code>
    <span class="koboSpan" id="kobo.882.1">
     ?
    </span>
    <span class="koboSpan" id="kobo.882.2">
     Would that help to show why instance attributes are needed?
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-190">
    <span class="koboSpan" id="kobo.883.1">
     The self argument
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.884.1">
     From
    </span>
    <a id="_idIndexMarker610">
    </a>
    <span class="koboSpan" id="kobo.885.1">
     within a class method, we can refer to an instance by means of a special argument, called
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.886.1">
      self
     </span>
    </code>
    <span class="koboSpan" id="kobo.887.1">
     by convention.
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.888.1">
      self
     </span>
    </code>
    <span class="koboSpan" id="kobo.889.1">
     is always the
    </span>
    <a id="_idIndexMarker611">
    </a>
    <span class="koboSpan" id="kobo.890.1">
     first attribute of an instance method.
    </span>
    <span class="koboSpan" id="kobo.890.2">
     Let us examine this behavior, together with how we can share not just attributes but also methods with all instances:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.891.1"># oop/class.self.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.892.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.893.1">Square</span></span><span class="koboSpan" id="kobo.894.1">:
    side = </span><span class="hljs-number"><span class="koboSpan" id="kobo.895.1">8</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.896.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.897.1">area</span></span><span class="koboSpan" id="kobo.898.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.899.1">self</span></span><span class="koboSpan" id="kobo.900.1">):  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.901.1"># self is a reference to an instance</span></span>
        <span class="hljs-keyword"><span class="koboSpan" id="kobo.902.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.903.1">self</span></span><span class="koboSpan" id="kobo.904.1">.side**</span><span class="hljs-number"><span class="koboSpan" id="kobo.905.1">2</span></span><span class="koboSpan" id="kobo.906.1">
sq = Square()
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.907.1">print</span></span><span class="koboSpan" id="kobo.908.1">(sq.area())  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.909.1"># 64 (side is found on the class)</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.910.1">print</span></span><span class="koboSpan" id="kobo.911.1">(Square.area(sq))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.912.1"># 64 (equivalent to sq.area())</span></span><span class="koboSpan" id="kobo.913.1">
sq.side = </span><span class="hljs-number"><span class="koboSpan" id="kobo.914.1">10</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.915.1">print</span></span><span class="koboSpan" id="kobo.916.1">(sq.area())  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.917.1"># 100 (side is found on the instance)</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.918.1">
     Note how
    </span>
    <a id="_idIndexMarker612">
    </a>
    <span class="koboSpan" id="kobo.919.1">
     the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.920.1">
      area()
     </span>
    </code>
    <span class="koboSpan" id="kobo.921.1">
     method is used by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.922.1">
      sq
     </span>
    </code>
    <span class="koboSpan" id="kobo.923.1">
     .
    </span>
    <span class="koboSpan" id="kobo.923.2">
     The two calls,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.924.1">
      Square.area(sq)
     </span>
    </code>
    <span class="koboSpan" id="kobo.925.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.926.1">
      sq.area()
     </span>
    </code>
    <span class="koboSpan" id="kobo.927.1">
     , are equivalent, and they teach us how the mechanism works.
    </span>
    <span class="koboSpan" id="kobo.927.2">
     Either you pass the instance to the method call (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.928.1">
      Square.area(sq)
     </span>
    </code>
    <span class="koboSpan" id="kobo.929.1">
     ), which within the method will take the name
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.930.1">
      self
     </span>
    </code>
    <span class="koboSpan" id="kobo.931.1">
     , or you can use a more comfortable syntax,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.932.1">
      sq.area()
     </span>
    </code>
    <span class="koboSpan" id="kobo.933.1">
     , and Python will translate that for you behind the scenes.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.934.1">
     Let us look at a better example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.935.1"># oop/class.price.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.936.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.937.1">Price</span></span><span class="koboSpan" id="kobo.938.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.939.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.940.1">final_price</span></span><span class="koboSpan" id="kobo.941.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.942.1">self, vat, discount=</span></span><span class="hljs-number"><span class="koboSpan" id="kobo.943.1">0</span></span><span class="koboSpan" id="kobo.944.1">):
        """Returns price after applying vat </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.945.1">and</span></span><span class="koboSpan" id="kobo.946.1"> fixed discount."""
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.947.1">return</span></span><span class="koboSpan" id="kobo.948.1"> (</span><span class="hljs-variable"><span class="koboSpan" id="kobo.949.1">self</span></span><span class="koboSpan" id="kobo.950.1">.net_price * (</span><span class="hljs-number"><span class="koboSpan" id="kobo.951.1">100</span></span><span class="koboSpan" id="kobo.952.1"> + vat) / </span><span class="hljs-number"><span class="koboSpan" id="kobo.953.1">100</span></span><span class="koboSpan" id="kobo.954.1">) - discount
p1 = Price()
p1.net_price = </span><span class="hljs-number"><span class="koboSpan" id="kobo.955.1">100</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.956.1">print</span></span><span class="koboSpan" id="kobo.957.1">(Price.final_price(p1, </span><span class="hljs-number"><span class="koboSpan" id="kobo.958.1">20</span></span><span class="koboSpan" id="kobo.959.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.960.1">10</span></span><span class="koboSpan" id="kobo.961.1">))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.962.1"># 110 (100 * 1.2 - 10)</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.963.1">print</span></span><span class="koboSpan" id="kobo.964.1">(p1.final_price(</span><span class="hljs-number"><span class="koboSpan" id="kobo.965.1">20</span></span><span class="koboSpan" id="kobo.966.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.967.1">10</span></span><span class="koboSpan" id="kobo.968.1">))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.969.1"># equivalent</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.970.1">
     The preceding code shows us that nothing prevents us from using arguments when declaring methods.
    </span>
    <span class="koboSpan" id="kobo.970.2">
     We can use the exact same syntax as we used with the function, but we need to remember that the first argument will always be the instance that the method will be bound to.
    </span>
    <span class="koboSpan" id="kobo.970.3">
     We don’t need to necessarily call it
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.971.1">
      self
     </span>
    </code>
    <span class="koboSpan" id="kobo.972.1">
     , but it is the convention, and this is one of the few cases where it is very important to abide by it.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-191">
    <span class="koboSpan" id="kobo.973.1">
     Initializing an instance
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.974.1">
     Have you
    </span>
    <a id="_idIndexMarker613">
    </a>
    <span class="koboSpan" id="kobo.975.1">
     noticed how, before calling
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.976.1">
      p1.final_price()
     </span>
    </code>
    <span class="koboSpan" id="kobo.977.1">
     in the code above, we had to assign
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.978.1">
      net_price
     </span>
    </code>
    <span class="koboSpan" id="kobo.979.1">
     to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.980.1">
      p1
     </span>
    </code>
    <span class="koboSpan" id="kobo.981.1">
     ?
    </span>
    <span class="koboSpan" id="kobo.981.2">
     There is a better way to do it.
    </span>
    <span class="koboSpan" id="kobo.981.3">
     In other languages, this would
    </span>
    <a id="_idIndexMarker614">
    </a>
    <span class="koboSpan" id="kobo.982.1">
     be called a
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.983.1">
      constructor
     </span>
    </strong>
    <span class="koboSpan" id="kobo.984.1">
     , but in Python, it is not.
    </span>
    <span class="koboSpan" id="kobo.984.2">
     It is actually
    </span>
    <a id="_idIndexMarker615">
    </a>
    <span class="koboSpan" id="kobo.985.1">
     an
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.986.1">
      initializer
     </span>
    </strong>
    <span class="koboSpan" id="kobo.987.1">
     , since it works on an already created instance, and therefore, it is called
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.988.1">
      __init__()
     </span>
    </code>
    <span class="koboSpan" id="kobo.989.1">
     .
    </span>
    <span class="koboSpan" id="kobo.989.2">
     It is a
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.990.1">
      magic method
     </span>
    </strong>
    <span class="koboSpan" id="kobo.991.1">
     , which
    </span>
    <a id="_idIndexMarker616">
    </a>
    <span class="koboSpan" id="kobo.992.1">
     is run right after the object is created.
    </span>
    <span class="koboSpan" id="kobo.992.2">
     Python objects also have a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.993.1">
      __new__()
     </span>
    </code>
    <span class="koboSpan" id="kobo.994.1">
     method, which is the actual constructor.
    </span>
    <span class="koboSpan" id="kobo.994.2">
     However, in practice, it is not so common to have to override it; that is a technique
    </span>
    <a id="_idIndexMarker617">
    </a>
    <span class="koboSpan" id="kobo.995.1">
     that is mostly used when writing metaclasses.
    </span>
    <span class="koboSpan" id="kobo.995.2">
     Let us now see an example of how to initialize objects in Python:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.996.1"># oop/class.init.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.997.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.998.1">Rectangle</span></span><span class="koboSpan" id="kobo.999.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1000.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1001.1">__init__</span></span><span class="koboSpan" id="kobo.1002.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1003.1">self, side_a, side_b</span></span><span class="koboSpan" id="kobo.1004.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1005.1">self</span></span><span class="koboSpan" id="kobo.1006.1">.side_a = side_a
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1007.1">self</span></span><span class="koboSpan" id="kobo.1008.1">.side_b = side_b
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1009.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1010.1">area</span></span><span class="koboSpan" id="kobo.1011.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1012.1">self</span></span><span class="koboSpan" id="kobo.1013.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1014.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1015.1">self</span></span><span class="koboSpan" id="kobo.1016.1">.side_a * </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1017.1">self</span></span><span class="koboSpan" id="kobo.1018.1">.side_b
r1 = Rectangle(</span><span class="hljs-number"><span class="koboSpan" id="kobo.1019.1">10</span></span><span class="koboSpan" id="kobo.1020.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1021.1">4</span></span><span class="koboSpan" id="kobo.1022.1">)
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1023.1">print</span></span><span class="koboSpan" id="kobo.1024.1">(r1.side_a, r1.side_b)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1025.1"># 10 4</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.1026.1">print</span></span><span class="koboSpan" id="kobo.1027.1">(r1.area())  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1028.1"># 40</span></span><span class="koboSpan" id="kobo.1029.1">
r2 = Rectangle(</span><span class="hljs-number"><span class="koboSpan" id="kobo.1030.1">7</span></span><span class="koboSpan" id="kobo.1031.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1032.1">3</span></span><span class="koboSpan" id="kobo.1033.1">)
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1034.1">print</span></span><span class="koboSpan" id="kobo.1035.1">(r2.area())  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1036.1"># 21</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1037.1">
     Things are finally starting to take shape.
    </span>
    <span class="koboSpan" id="kobo.1037.2">
     When an object is created, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1038.1">
      __init__()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1039.1">
     method is run for us automatically.
    </span>
    <span class="koboSpan" id="kobo.1039.2">
     In this case, we wrote it so that when we create a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1040.1">
      Rectangle
     </span>
    </code>
    <span class="koboSpan" id="kobo.1041.1">
     object (by calling the class name like a function), we pass arguments to the creation call, like we would on any regular function call.
    </span>
    <span class="koboSpan" id="kobo.1041.2">
     The way we pass parameters follows the signature of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1042.1">
      __init__()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1043.1">
     method, and therefore, in the two creation statements,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1044.1">
      10
     </span>
    </code>
    <span class="koboSpan" id="kobo.1045.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1046.1">
      4
     </span>
    </code>
    <span class="koboSpan" id="kobo.1047.1">
     will be
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1048.1">
      side_a
     </span>
    </code>
    <span class="koboSpan" id="kobo.1049.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1050.1">
      side_b
     </span>
    </code>
    <span class="koboSpan" id="kobo.1051.1">
     for
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1052.1">
      r1
     </span>
    </code>
    <span class="koboSpan" id="kobo.1053.1">
     , while
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1054.1">
      7
     </span>
    </code>
    <span class="koboSpan" id="kobo.1055.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1056.1">
      3
     </span>
    </code>
    <span class="koboSpan" id="kobo.1057.1">
     will be
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1058.1">
      side_a
     </span>
    </code>
    <span class="koboSpan" id="kobo.1059.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1060.1">
      side_b
     </span>
    </code>
    <span class="koboSpan" id="kobo.1061.1">
     for
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1062.1">
      r2
     </span>
    </code>
    <span class="koboSpan" id="kobo.1063.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1063.2">
     You can see that the call to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1064.1">
      area()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1065.1">
     from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1066.1">
      r1
     </span>
    </code>
    <span class="koboSpan" id="kobo.1067.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1068.1">
      r2
     </span>
    </code>
    <span class="koboSpan" id="kobo.1069.1">
     reflects that they have different instance arguments.
    </span>
    <span class="koboSpan" id="kobo.1069.2">
     Setting up objects in this way is more convenient.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-192">
    <span class="koboSpan" id="kobo.1070.1">
     OOP is about code reuse
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1071.1">
     By
    </span>
    <a id="_idIndexMarker618">
    </a>
    <span class="koboSpan" id="kobo.1072.1">
     now, it should be clear:
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1073.1">
      OOP is all about code reuse
     </span>
    </em>
    <span class="koboSpan" id="kobo.1074.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1074.2">
     We define a class, we create instances, and those instances can use the methods that are defined in the class.
    </span>
    <span class="koboSpan" id="kobo.1074.3">
     They will behave differently according to how the instances have been set up by the initializer.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-193">
    <span class="koboSpan" id="kobo.1075.1">
     Inheritance and composition
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.1076.1">
     However, this is just half of the story; OOP is more than just this.
    </span>
    <span class="koboSpan" id="kobo.1076.2">
     We have two main design constructs to use: inheritance and composition.
    </span>
   </p>
   <p class="normal">
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1077.1">
      Inheritance
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1078.1">
     means
    </span>
    <a id="_idIndexMarker619">
    </a>
    <span class="koboSpan" id="kobo.1079.1">
     that two objects are
    </span>
    <a id="_idIndexMarker620">
    </a>
    <span class="koboSpan" id="kobo.1080.1">
     related by means of an
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1081.1">
      Is-A
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1082.1">
     type of relationship.
    </span>
    <span class="koboSpan" id="kobo.1082.2">
     On the other hand,
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1083.1">
      composition
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1084.1">
     means
    </span>
    <a id="_idIndexMarker621">
    </a>
    <span class="koboSpan" id="kobo.1085.1">
     that two objects
    </span>
    <a id="_idIndexMarker622">
    </a>
    <span class="koboSpan" id="kobo.1086.1">
     are related by
    </span>
    <a id="_idIndexMarker623">
    </a>
    <span class="koboSpan" id="kobo.1087.1">
     means of a
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1088.1">
      Has-A
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1089.1">
     relationship.
    </span>
    <span class="koboSpan" id="kobo.1089.2">
     Let us explain with an example, where we declare classes for engine types:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1090.1"># oop/class_inheritance.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1091.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1092.1">Engine</span></span><span class="koboSpan" id="kobo.1093.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1094.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1095.1">start</span></span><span class="koboSpan" id="kobo.1096.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1097.1">self</span></span><span class="koboSpan" id="kobo.1098.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1099.1">pass</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.1100.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1101.1">stop</span></span><span class="koboSpan" id="kobo.1102.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1103.1">self</span></span><span class="koboSpan" id="kobo.1104.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1105.1">pass</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1106.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1107.1">ElectricEngine</span></span><span class="koboSpan" id="kobo.1108.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1109.1">Engine</span></span><span class="koboSpan" id="kobo.1110.1">):  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1111.1"># Is-A Engine</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.1112.1">pass</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1113.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1114.1">V8Engine</span></span><span class="koboSpan" id="kobo.1115.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1116.1">Engine</span></span><span class="koboSpan" id="kobo.1117.1">):  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1118.1"># Is-A Engine</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.1119.1">pass</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1120.1">
     Then, we want to declare some car types that will use those engines:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1121.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1122.1">Car</span></span><span class="koboSpan" id="kobo.1123.1">:
    engine_cls = Engine
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1124.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1125.1">__init__</span></span><span class="koboSpan" id="kobo.1126.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1127.1">self</span></span><span class="koboSpan" id="kobo.1128.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1129.1">self</span></span><span class="koboSpan" id="kobo.1130.1">.engine = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1131.1">self</span></span><span class="koboSpan" id="kobo.1132.1">.engine_cls()  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1133.1"># Has-A Engine</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.1134.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1135.1">start</span></span><span class="koboSpan" id="kobo.1136.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1137.1">self</span></span><span class="koboSpan" id="kobo.1138.1">):
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1139.1">print</span></span><span class="koboSpan" id="kobo.1140.1">(
            f"Starting {</span><span class="hljs-variable"><span class="koboSpan" id="kobo.1141.1">self</span></span><span class="koboSpan" id="kobo.1142.1">.engine.__class__.__name__} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1143.1">for</span></span><span class="koboSpan" id="kobo.1144.1"> "
            f"{</span><span class="hljs-variable"><span class="koboSpan" id="kobo.1145.1">self</span></span><span class="koboSpan" id="kobo.1146.1">.__class__.__name__}... </span><span class="koboSpan" id="kobo.1146.2">Wroom, wroom!"
        </span><span class="koboSpan" id="kobo.1146.3">)
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1147.1">self</span></span><span class="koboSpan" id="kobo.1148.1">.engine.start()
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1149.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1150.1">stop</span></span><span class="koboSpan" id="kobo.1151.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1152.1">self</span></span><span class="koboSpan" id="kobo.1153.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1154.1">self</span></span><span class="koboSpan" id="kobo.1155.1">.engine.stop()
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1156.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1157.1">RaceCar</span></span><span class="koboSpan" id="kobo.1158.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1159.1">Car</span></span><span class="koboSpan" id="kobo.1160.1">):  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1161.1"># Is-A Car</span></span><span class="koboSpan" id="kobo.1162.1">
    engine_cls = V8Engine
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1163.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1164.1">CityCar</span></span><span class="koboSpan" id="kobo.1165.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1166.1">Car</span></span><span class="koboSpan" id="kobo.1167.1">):  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1168.1"># Is-A Car</span></span><span class="koboSpan" id="kobo.1169.1">
    engine_cls = ElectricEngine
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1170.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1171.1">F1Car</span></span><span class="koboSpan" id="kobo.1172.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1173.1">RaceCar</span></span><span class="koboSpan" id="kobo.1174.1">):  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1175.1"># Is-A RaceCar and also Is-A Car</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.1176.1">pass</span></span>  <span class="hljs-comment"><span class="koboSpan" id="kobo.1177.1"># engine_cls same as parent</span></span><span class="koboSpan" id="kobo.1178.1">
car = Car()
racecar = RaceCar()
citycar = CityCar()
f1car = F1Car()
cars = [car, racecar, citycar, f1car]
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1179.1">for</span></span><span class="koboSpan" id="kobo.1180.1"> car </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1181.1">in</span></span><span class="koboSpan" id="kobo.1182.1"> cars:
    car.start()
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1183.1">
     Running the above prints the following:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1184.1">$ python class_inheritance.py
Starting Engine for Car... </span><span class="koboSpan" id="kobo.1184.2">Wroom, wroom!
</span><span class="koboSpan" id="kobo.1184.3">Starting V8Engine for RaceCar... </span><span class="koboSpan" id="kobo.1184.4">Wroom, wroom!
</span><span class="koboSpan" id="kobo.1184.5">Starting ElectricEngine for CityCar... </span><span class="koboSpan" id="kobo.1184.6">Wroom, wroom!
</span><span class="koboSpan" id="kobo.1184.7">Starting V8Engine for F1Car... </span><span class="koboSpan" id="kobo.1184.8">Wroom, wroom!
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1185.1">
     The preceding
    </span>
    <a id="_idIndexMarker624">
    </a>
    <span class="koboSpan" id="kobo.1186.1">
     example shows you both the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1187.1">
      Is-A
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1188.1">
     and
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1189.1">
      Has-A
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1190.1">
     types of relationships.
    </span>
    <span class="koboSpan" id="kobo.1190.2">
     First of all, let us consider
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1191.1">
      Engine
     </span>
    </code>
    <span class="koboSpan" id="kobo.1192.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1192.2">
     It is a simple class with two methods,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1193.1">
      start()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1194.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1195.1">
      stop()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1196.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1196.2">
     We then define
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1197.1">
      ElectricEngine
     </span>
    </code>
    <span class="koboSpan" id="kobo.1198.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1199.1">
      V8Engine
     </span>
    </code>
    <span class="koboSpan" id="kobo.1200.1">
     , which both inherit from it.
    </span>
    <span class="koboSpan" id="kobo.1200.2">
     You can see this from their definition, which includes
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1201.1">
      Engine
     </span>
    </code>
    <span class="koboSpan" id="kobo.1202.1">
     within brackets after the name.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1203.1">
     This means
    </span>
    <a id="_idIndexMarker625">
    </a>
    <span class="koboSpan" id="kobo.1204.1">
     that both
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1205.1">
      ElectricEngine
     </span>
    </code>
    <span class="koboSpan" id="kobo.1206.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1207.1">
      V8Engine
     </span>
    </code>
    <span class="koboSpan" id="kobo.1208.1">
     inherit attributes and methods from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1209.1">
      Engine
     </span>
    </code>
    <span class="koboSpan" id="kobo.1210.1">
     class, which is said to
    </span>
    <a id="_idIndexMarker626">
    </a>
    <span class="koboSpan" id="kobo.1211.1">
     be
    </span>
    <a id="_idIndexMarker627">
    </a>
    <span class="koboSpan" id="kobo.1212.1">
     their
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1213.1">
      base class
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1214.1">
     (or
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1215.1">
      parent class
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1216.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1217.1">
     The same happens with cars.
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1218.1">
      Car
     </span>
    </code>
    <span class="koboSpan" id="kobo.1219.1">
     is a base class for both
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1220.1">
      RaceCar
     </span>
    </code>
    <span class="koboSpan" id="kobo.1221.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1222.1">
      CityCar
     </span>
    </code>
    <span class="koboSpan" id="kobo.1223.1">
     .
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1224.1">
      RaceCar
     </span>
    </code>
    <span class="koboSpan" id="kobo.1225.1">
     is also the base class of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1226.1">
      F1Car
     </span>
    </code>
    <span class="koboSpan" id="kobo.1227.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1227.2">
     Another way of saying this is that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1228.1">
      F1Car
     </span>
    </code>
    <span class="koboSpan" id="kobo.1229.1">
     inherits from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1230.1">
      RaceCar
     </span>
    </code>
    <span class="koboSpan" id="kobo.1231.1">
     , which inherits from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1232.1">
      Car
     </span>
    </code>
    <span class="koboSpan" id="kobo.1233.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1233.2">
     Therefore,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1234.1">
      F1Car
     </span>
    </code>
    <em class="italic">
     <span class="koboSpan" id="kobo.1235.1">
      Is-A
     </span>
    </em>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1236.1">
      RaceCar
     </span>
    </code>
    <span class="koboSpan" id="kobo.1237.1">
     , and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1238.1">
      RaceCar
     </span>
    </code>
    <em class="italic">
     <span class="koboSpan" id="kobo.1239.1">
      Is-A
     </span>
    </em>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1240.1">
      Car
     </span>
    </code>
    <span class="koboSpan" id="kobo.1241.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1241.2">
     Because of the transitive property, we can say that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1242.1">
      F1Car
     </span>
    </code>
    <em class="italic">
     <span class="koboSpan" id="kobo.1243.1">
      Is-A
     </span>
    </em>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1244.1">
      Car
     </span>
    </code>
    <span class="koboSpan" id="kobo.1245.1">
     as well.
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1246.1">
      CityCar
     </span>
    </code>
    <span class="koboSpan" id="kobo.1247.1">
     , too,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1248.1">
      Is-A
     </span>
    </em>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1249.1">
      Car
     </span>
    </code>
    <span class="koboSpan" id="kobo.1250.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1251.1">
     When we define
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1252.1">
      class A(B): pass
     </span>
    </code>
    <span class="koboSpan" id="kobo.1253.1">
     , we say that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1254.1">
      A
     </span>
    </code>
    <span class="koboSpan" id="kobo.1255.1">
     is the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1256.1">
      child
     </span>
    </em>
    <span class="koboSpan" id="kobo.1257.1">
     of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1258.1">
      B
     </span>
    </code>
    <span class="koboSpan" id="kobo.1259.1">
     , and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1260.1">
      B
     </span>
    </code>
    <span class="koboSpan" id="kobo.1261.1">
     is the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1262.1">
      parent
     </span>
    </em>
    <span class="koboSpan" id="kobo.1263.1">
     of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1264.1">
      A
     </span>
    </code>
    <span class="koboSpan" id="kobo.1265.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1265.2">
     The
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1266.1">
      parent
     </span>
    </em>
    <span class="koboSpan" id="kobo.1267.1">
     and
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1268.1">
      base
     </span>
    </em>
    <span class="koboSpan" id="kobo.1269.1">
     classes are synonyms, and so are
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1270.1">
      child of
     </span>
    </em>
    <span class="koboSpan" id="kobo.1271.1">
     and
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1272.1">
      derived from
     </span>
    </em>
    <span class="koboSpan" id="kobo.1273.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1273.2">
     Also, we say that a class
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1274.1">
      inherits
     </span>
    </em>
    <span class="koboSpan" id="kobo.1275.1">
     from another class, or that it
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1276.1">
      extends
     </span>
    </em>
    <span class="koboSpan" id="kobo.1277.1">
     it.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1278.1">
     This is the inheritance mechanism.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1279.1">
     Let us
    </span>
    <a id="_idIndexMarker628">
    </a>
    <span class="koboSpan" id="kobo.1280.1">
     now go back to the code.
    </span>
    <span class="koboSpan" id="kobo.1280.2">
     Each class has a class attribute,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1281.1">
      engine_cls
     </span>
    </code>
    <span class="koboSpan" id="kobo.1282.1">
     , which is a reference to the engine class that we want to assign to each type of car.
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1283.1">
      Car
     </span>
    </code>
    <span class="koboSpan" id="kobo.1284.1">
     has a generic
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1285.1">
      Engine
     </span>
    </code>
    <span class="koboSpan" id="kobo.1286.1">
     , the two race cars have a V8 engine, and the city car has an electric one.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1287.1">
     When a
    </span>
    <a id="_idIndexMarker629">
    </a>
    <span class="koboSpan" id="kobo.1288.1">
     car is created in the initializer method,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1289.1">
      __init__()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1290.1">
     , we create an instance of whatever engine class is assigned to the car and set it as the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1291.1">
      engine
     </span>
    </code>
    <span class="koboSpan" id="kobo.1292.1">
     instance attribute.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1293.1">
     It makes sense to have
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1294.1">
      engine_cls
     </span>
    </code>
    <span class="koboSpan" id="kobo.1295.1">
     shared among all class instances because it is quite likely that all instances of the same car class will have the same kind of engine.
    </span>
    <span class="koboSpan" id="kobo.1295.2">
     On the other hand, it would not be good to have a single engine (an instance of any
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1296.1">
      Engine
     </span>
    </code>
    <span class="koboSpan" id="kobo.1297.1">
     class) as a class attribute because that would mean sharing one engine among all car instances, which is incorrect.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1298.1">
     The type of relationship between a car and its engine is a
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1299.1">
      Has-A
     </span>
    </em>
    <span class="koboSpan" id="kobo.1300.1">
     type.
    </span>
    <span class="koboSpan" id="kobo.1300.2">
     A car
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1301.1">
      Has-A
     </span>
    </em>
    <span class="koboSpan" id="kobo.1302.1">
     engine.
    </span>
    <span class="koboSpan" id="kobo.1302.2">
     This is called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1303.1">
      composition
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1304.1">
     and
    </span>
    <a id="_idIndexMarker630">
    </a>
    <span class="koboSpan" id="kobo.1305.1">
     reflects the fact that objects can be composed of many other objects.
    </span>
    <span class="koboSpan" id="kobo.1305.2">
     A car
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1306.1">
      Has-A
     </span>
    </em>
    <span class="koboSpan" id="kobo.1307.1">
     engine, gears, wheels, a frame, doors, seats, and so on.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1308.1">
     When using OOP, it is important to describe objects in this way so that we can properly structure our code.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.1309.1">
      Notice that we had to avoid having dots in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1310.1">
       class_inheritance.py
      </span>
     </code>
     <span class="koboSpan" id="kobo.1311.1">
      script name, as dots in module names make imports difficult.
     </span>
     <span class="koboSpan" id="kobo.1311.2">
      Most modules in the source code of the book are meant to be run as standalone scripts, so we chose to add dots to enhance readability when possible, but in general, you want to avoid dots in your module names.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1312.1">
     Before we leave this paragraph, let us verify the correctness of what we stated above with another example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1313.1"># oop/class.issubclass.isinstance.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1314.1">from</span></span><span class="koboSpan" id="kobo.1315.1"> class_inheritance </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1316.1">import</span></span><span class="koboSpan" id="kobo.1317.1"> Car, RaceCar, F1Car
car = Car()
racecar = RaceCar()
f1car = F1Car()
cars = [(car, "car"), (racecar, "racecar"), (f1car, "f1car")]
car_classes = [Car, RaceCar, F1Car]
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1318.1">for</span></span><span class="koboSpan" id="kobo.1319.1"> car, car_name </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1320.1">in</span></span><span class="koboSpan" id="kobo.1321.1"> cars:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1322.1">for</span></span><span class="koboSpan" id="kobo.1323.1"> class_ </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1324.1">in</span></span><span class="koboSpan" id="kobo.1325.1"> car_classes:
        belongs = </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1326.1">isinstance</span></span><span class="koboSpan" id="kobo.1327.1">(car, class_)
        msg = "</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1328.1">is</span></span><span class="koboSpan" id="kobo.1329.1"> a" </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1330.1">if</span></span><span class="koboSpan" id="kobo.1331.1"> belongs </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1332.1">else</span></span><span class="koboSpan" id="kobo.1333.1"> "</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1334.1">is</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1335.1">not</span></span><span class="koboSpan" id="kobo.1336.1"> a"
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1337.1">print</span></span><span class="koboSpan" id="kobo.1338.1">(car_name, msg, class_.__name__)
""" Prints:
… (starting enging messages omitted)
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1339.1">car </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1340.1">is</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1341.1"> a Car</span></strong></span><span class="koboSpan" id="kobo.1342.1">
car </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1343.1">is</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1344.1">not</span></span><span class="koboSpan" id="kobo.1345.1"> a RaceCar
car </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1346.1">is</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1347.1">not</span></span><span class="koboSpan" id="kobo.1348.1"> a F1Car
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1349.1">racecar </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1350.1">is</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1351.1"> a Car</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1352.1">racecar </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1353.1">is</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1354.1"> a RaceCar</span></strong></span><span class="koboSpan" id="kobo.1355.1">
racecar </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1356.1">is</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1357.1">not</span></span><span class="koboSpan" id="kobo.1358.1"> a F1Car
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1359.1">f1car </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1360.1">is</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1361.1"> a Car</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1362.1">f1car </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1363.1">is</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1364.1"> a RaceCar</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1365.1">f1car </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1366.1">is</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1367.1"> a F1Car</span></strong></span><span class="koboSpan" id="kobo.1368.1">
"""
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1369.1">
     As you
    </span>
    <a id="_idIndexMarker631">
    </a>
    <span class="koboSpan" id="kobo.1370.1">
     can see,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1371.1">
      car
     </span>
    </code>
    <span class="koboSpan" id="kobo.1372.1">
     is just an instance of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1373.1">
      Car
     </span>
    </code>
    <span class="koboSpan" id="kobo.1374.1">
     , while
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1375.1">
      racecar
     </span>
    </code>
    <span class="koboSpan" id="kobo.1376.1">
     is an instance of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1377.1">
      RaceCar
     </span>
    </code>
    <span class="koboSpan" id="kobo.1378.1">
     (and by extension of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1379.1">
      Car
     </span>
    </code>
    <span class="koboSpan" id="kobo.1380.1">
     ), and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1381.1">
      f1car
     </span>
    </code>
    <span class="koboSpan" id="kobo.1382.1">
     is an instance of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1383.1">
      F1Car
     </span>
    </code>
    <span class="koboSpan" id="kobo.1384.1">
     (and of both
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1385.1">
      RaceCar
     </span>
    </code>
    <span class="koboSpan" id="kobo.1386.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1387.1">
      Car
     </span>
    </code>
    <span class="koboSpan" id="kobo.1388.1">
     , by extension).
    </span>
    <span class="koboSpan" id="kobo.1388.2">
     Similarly, a
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1389.1">
      banana
     </span>
    </em>
    <span class="koboSpan" id="kobo.1390.1">
     is an
    </span>
    <a id="_idIndexMarker632">
    </a>
    <span class="koboSpan" id="kobo.1391.1">
     instance of
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1392.1">
      Banana
     </span>
    </em>
    <span class="koboSpan" id="kobo.1393.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1393.2">
     But, also, it is a
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1394.1">
      Fruit
     </span>
    </em>
    <span class="koboSpan" id="kobo.1395.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1395.2">
     Also, it is
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1396.1">
      Food
     </span>
    </em>
    <span class="koboSpan" id="kobo.1397.1">
     , right?
    </span>
    <span class="koboSpan" id="kobo.1397.2">
     Same concept.
    </span>
    <span class="koboSpan" id="kobo.1397.3">
     To check whether an object is an instance of a class, use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1398.1">
      isinstance()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1399.1">
     function.
    </span>
    <span class="koboSpan" id="kobo.1399.2">
     It is recommended over sheer type comparison (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1400.1">
      type(object) is Class
     </span>
    </code>
    <span class="koboSpan" id="kobo.1401.1">
     ).
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.1402.1">
      Notice that we have left out the prints you get when instantiating the cars.
     </span>
     <span class="koboSpan" id="kobo.1402.2">
      We saw them in the previous example.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1403.1">
     Let us also check inheritance.
    </span>
    <span class="koboSpan" id="kobo.1403.2">
     Same setup, but different logic in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1404.1">
      for
     </span>
    </code>
    <span class="koboSpan" id="kobo.1405.1">
     loops:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1406.1"># oop/class.issubclass.isinstance.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1407.1">for</span></span><span class="koboSpan" id="kobo.1408.1"> class1 </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1409.1">in</span></span><span class="koboSpan" id="kobo.1410.1"> car_classes:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1411.1">for</span></span><span class="koboSpan" id="kobo.1412.1"> class2 </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1413.1">in</span></span><span class="koboSpan" id="kobo.1414.1"> car_classes:
        is_subclass = </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1415.1">issubclass</span></span><span class="koboSpan" id="kobo.1416.1">(class1, class2)
        msg = "{</span><span class="hljs-number"><span class="koboSpan" id="kobo.1417.1">0</span></span><span class="koboSpan" id="kobo.1418.1">} a subclass of".</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1419.1">format</span></span><span class="koboSpan" id="kobo.1420.1">(
            "</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1421.1">is</span></span><span class="koboSpan" id="kobo.1422.1">" </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1423.1">if</span></span><span class="koboSpan" id="kobo.1424.1"> is_subclass </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1425.1">else</span></span><span class="koboSpan" id="kobo.1426.1"> "</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1427.1">is</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1428.1">not</span></span><span class="koboSpan" id="kobo.1429.1">"
        )
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1430.1">print</span></span><span class="koboSpan" id="kobo.1431.1">(class1.__name__, msg, class2.__name__)
""" Prints:
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1432.1">Car </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1433.1">is</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1434.1"> a subclass of Car</span></strong></span><span class="koboSpan" id="kobo.1435.1">
Car </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1436.1">is</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1437.1">not</span></span><span class="koboSpan" id="kobo.1438.1"> a subclass of RaceCar
Car </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1439.1">is</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1440.1">not</span></span><span class="koboSpan" id="kobo.1441.1"> a subclass of F1Car
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1442.1">RaceCar </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1443.1">is</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1444.1"> a subclass of Car</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1445.1">RaceCar </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1446.1">is</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1447.1"> a subclass of RaceCar</span></strong></span><span class="koboSpan" id="kobo.1448.1">
RaceCar </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1449.1">is</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1450.1">not</span></span><span class="koboSpan" id="kobo.1451.1"> a subclass of F1Car
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1452.1">F1Car </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1453.1">is</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1454.1"> a subclass of Car</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1455.1">F1Car </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1456.1">is</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1457.1"> a subclass of RaceCar</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1458.1">F1Car </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1459.1">is</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1460.1"> a subclass of F1Car</span></strong></span><span class="koboSpan" id="kobo.1461.1">
"""
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1462.1">
     Interestingly, we
    </span>
    <a id="_idIndexMarker633">
    </a>
    <span class="koboSpan" id="kobo.1463.1">
     learn that
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1464.1">
      a class is a subclass of itself
     </span>
    </em>
    <span class="koboSpan" id="kobo.1465.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1465.2">
     Check the output of the preceding example to see that it matches
    </span>
    <a id="_idIndexMarker634">
    </a>
    <span class="koboSpan" id="kobo.1466.1">
     the explanation we provided.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.1467.1">
      Note that, by convention, class names are written using
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1468.1">
       CapWords
      </span>
     </em>
     <span class="koboSpan" id="kobo.1469.1">
      , which means
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1470.1">
       ThisWayIsCorrect
      </span>
     </em>
     <span class="koboSpan" id="kobo.1471.1">
      , as opposed to functions and methods, which are written in snake case, like
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1472.1">
       this_way_is_correct
      </span>
     </em>
     <span class="koboSpan" id="kobo.1473.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1473.2">
      Also, if you want to use a name in your code that clashes with a Python-reserved keyword or a built-in function or class, the convention is to add a trailing underscore to the name.
     </span>
     <span class="koboSpan" id="kobo.1473.3">
      In the first
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1474.1">
       for loop
      </span>
     </em>
     <span class="koboSpan" id="kobo.1475.1">
      example, we loop through the class names using
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1476.1">
       for class_ in ...
      </span>
     </code>
     <span class="koboSpan" id="kobo.1477.1">
      because
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1478.1">
       class
      </span>
     </code>
     <span class="koboSpan" id="kobo.1479.1">
      is a reserved word.
     </span>
     <span class="koboSpan" id="kobo.1479.2">
      You can refresh your knowledge about conventions by reading PEP 8.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1480.1">
     To help illustrate the difference between
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1481.1">
      Is-A
     </span>
    </em>
    <span class="koboSpan" id="kobo.1482.1">
     and
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1483.1">
      Has-A
     </span>
    </em>
    <span class="koboSpan" id="kobo.1484.1">
     , look at the following diagram:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1485.1">
     <img alt="img" src="../Images/B30992_06_01.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1486.1">
     Figure 6.1: Is-A versus Has-A relationships
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-194">
    <span class="koboSpan" id="kobo.1487.1">
     Accessing a base class
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1488.1">
     We have
    </span>
    <a id="_idIndexMarker635">
    </a>
    <span class="koboSpan" id="kobo.1489.1">
     already seen class declarations, such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1490.1">
      class ClassA: pass
     </span>
    </code>
    <span class="koboSpan" id="kobo.1491.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1492.1">
      class ClassB(BaseClassName): pass
     </span>
    </code>
    <span class="koboSpan" id="kobo.1493.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1493.2">
     When we don’t specify a base class explicitly, Python will set the built-in
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1494.1">
      object
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1495.1">
     class as the base class.
    </span>
    <span class="koboSpan" id="kobo.1495.2">
     Ultimately, all classes derive from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1496.1">
      object
     </span>
    </code>
    <span class="koboSpan" id="kobo.1497.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1497.2">
     Please remember that, if you do not specify a base class, brackets are optional and, in practice, are never used.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1498.1">
     Therefore, writing
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1499.1">
      class A: pass
     </span>
    </code>
    <span class="koboSpan" id="kobo.1500.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1501.1">
      class A(): pass
     </span>
    </code>
    <span class="koboSpan" id="kobo.1502.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1503.1">
      class A(object): pass
     </span>
    </code>
    <span class="koboSpan" id="kobo.1504.1">
     are all equivalent.
    </span>
    <span class="koboSpan" id="kobo.1504.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1505.1">
      object
     </span>
    </code>
    <span class="koboSpan" id="kobo.1506.1">
     class is a special class in that it hosts the methods that are common to all Python classes, and it does not allow you to set any attributes on it.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1507.1">
     Let us see how we can access a base class from within a class:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1508.1"># oop/super.duplication.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1509.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1510.1">Book</span></span><span class="koboSpan" id="kobo.1511.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1512.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1513.1">__init__</span></span><span class="koboSpan" id="kobo.1514.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1515.1">self, title, publisher, pages</span></span><span class="koboSpan" id="kobo.1516.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1517.1">self</span></span><span class="koboSpan" id="kobo.1518.1">.title = title
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1519.1">self</span></span><span class="koboSpan" id="kobo.1520.1">.publisher = publisher
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1521.1">self</span></span><span class="koboSpan" id="kobo.1522.1">.pages = pages
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1523.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1524.1">Ebook</span></span><span class="koboSpan" id="kobo.1525.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1526.1">Book</span></span><span class="koboSpan" id="kobo.1527.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1528.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1529.1">__init__</span></span><span class="koboSpan" id="kobo.1530.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1531.1">self, title, publisher, pages, format_</span></span><span class="koboSpan" id="kobo.1532.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1533.1">self</span></span><span class="koboSpan" id="kobo.1534.1">.title = title
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1535.1">self</span></span><span class="koboSpan" id="kobo.1536.1">.publisher = publisher
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1537.1">self</span></span><span class="koboSpan" id="kobo.1538.1">.pages = pages
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1539.1">self</span></span><span class="koboSpan" id="kobo.1540.1">.format_ = format_
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1541.1">
     Take a look at the preceding code.
    </span>
    <span class="koboSpan" id="kobo.1541.2">
     Three of the input parameters for
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1542.1">
      Book
     </span>
    </code>
    <span class="koboSpan" id="kobo.1543.1">
     are duplicated in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1544.1">
      Ebook
     </span>
    </code>
    <span class="koboSpan" id="kobo.1545.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1545.2">
     This is bad practice because we now have two sets of instructions that are doing the same thing.
    </span>
    <span class="koboSpan" id="kobo.1545.3">
     Moreover, any change in the signature of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1546.1">
      Book.__init__()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1547.1">
     will not be reflected in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1548.1">
      Ebook
     </span>
    </code>
    <span class="koboSpan" id="kobo.1549.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1549.2">
     Normally, we want changes in a base class to be reflected in its children.
    </span>
    <span class="koboSpan" id="kobo.1549.3">
     Let us see one way to fix this issue:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1550.1"># oop/super.explicit.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1551.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1552.1">Book</span></span><span class="koboSpan" id="kobo.1553.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1554.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1555.1">__init__</span></span><span class="koboSpan" id="kobo.1556.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1557.1">self, title, publisher, pages</span></span><span class="koboSpan" id="kobo.1558.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1559.1">self</span></span><span class="koboSpan" id="kobo.1560.1">.title = title
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1561.1">self</span></span><span class="koboSpan" id="kobo.1562.1">.publisher = publisher
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1563.1">self</span></span><span class="koboSpan" id="kobo.1564.1">.pages = pages
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1565.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1566.1">Ebook</span></span><span class="koboSpan" id="kobo.1567.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1568.1">Book</span></span><span class="koboSpan" id="kobo.1569.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1570.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1571.1">__init__</span></span><span class="koboSpan" id="kobo.1572.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1573.1">self, title, publisher, pages, format_</span></span><span class="koboSpan" id="kobo.1574.1">):
        Book.__init__(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.1575.1">self</span></span><span class="koboSpan" id="kobo.1576.1">, title, publisher, pages)
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1577.1">self</span></span><span class="koboSpan" id="kobo.1578.1">.format_ = format_
ebook = Ebook(
    "Learn Python Programming", "Packt Publishing", </span><span class="hljs-number"><span class="koboSpan" id="kobo.1579.1">500</span></span><span class="koboSpan" id="kobo.1580.1">, "PDF"
)
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1581.1">print</span></span><span class="koboSpan" id="kobo.1582.1">(ebook.title)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1583.1"># Learn Python Programming</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.1584.1">print</span></span><span class="koboSpan" id="kobo.1585.1">(ebook.publisher)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1586.1"># Packt Publishing</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.1587.1">print</span></span><span class="koboSpan" id="kobo.1588.1">(ebook.pages)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1589.1"># 500</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.1590.1">print</span></span><span class="koboSpan" id="kobo.1591.1">(ebook.format_)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1592.1"># PDF</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1593.1">
     Much
    </span>
    <a id="_idIndexMarker636">
    </a>
    <span class="koboSpan" id="kobo.1594.1">
     better.
    </span>
    <span class="koboSpan" id="kobo.1594.2">
     We have removed that code duplication.
    </span>
    <span class="koboSpan" id="kobo.1594.3">
     In this example, we tell Python to call the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1595.1">
      __init__()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1596.1">
     method of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1597.1">
      Book
     </span>
    </code>
    <span class="koboSpan" id="kobo.1598.1">
     class; we feed
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1599.1">
      self
     </span>
    </code>
    <span class="koboSpan" id="kobo.1600.1">
     to that call, making sure that we bind it to the present instance.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1601.1">
     If we modify the logic within the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1602.1">
      __init__()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1603.1">
     method of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1604.1">
      Book
     </span>
    </code>
    <span class="koboSpan" id="kobo.1605.1">
     , we do not need to touch
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1606.1">
      Ebook
     </span>
    </code>
    <span class="koboSpan" id="kobo.1607.1">
     ; the change will transfer automatically.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1608.1">
     This approach is good, but it still suffers from a minor issue.
    </span>
    <span class="koboSpan" id="kobo.1608.2">
     Say that we change the name of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1609.1">
      Book
     </span>
    </code>
    <span class="koboSpan" id="kobo.1610.1">
     to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1611.1">
      Liber
     </span>
    </code>
    <span class="koboSpan" id="kobo.1612.1">
     , which is the Latin word for “book.”
    </span>
    <span class="koboSpan" id="kobo.1612.2">
     We would then have to change the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1613.1">
      __init__()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1614.1">
     method of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1615.1">
      Ebook
     </span>
    </code>
    <span class="koboSpan" id="kobo.1616.1">
     to reflect that change.
    </span>
    <span class="koboSpan" id="kobo.1616.2">
     This can be avoided by using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1617.1">
      super
     </span>
    </code>
    <span class="koboSpan" id="kobo.1618.1">
     :
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1619.1"># oop/super.implicit.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1620.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1621.1">Book</span></span><span class="koboSpan" id="kobo.1622.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1623.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1624.1">__init__</span></span><span class="koboSpan" id="kobo.1625.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1626.1">self, title, publisher, pages</span></span><span class="koboSpan" id="kobo.1627.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1628.1">self</span></span><span class="koboSpan" id="kobo.1629.1">.title = title
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1630.1">self</span></span><span class="koboSpan" id="kobo.1631.1">.publisher = publisher
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1632.1">self</span></span><span class="koboSpan" id="kobo.1633.1">.pages = pages
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1634.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1635.1">Ebook</span></span><span class="koboSpan" id="kobo.1636.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1637.1">Book</span></span><span class="koboSpan" id="kobo.1638.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1639.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1640.1">__init__</span></span><span class="koboSpan" id="kobo.1641.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1642.1">self, title, publisher, pages, format_</span></span><span class="koboSpan" id="kobo.1643.1">):
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1644.1">super</span></span><span class="koboSpan" id="kobo.1645.1">().__init__(title, publisher, pages)
        </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1646.1"># Another way to do the same thing is:</span></span>
        <span class="hljs-comment"><span class="koboSpan" id="kobo.1647.1"># super(Ebook, self).__init__(title, publisher, pages)</span></span>
        <span class="hljs-variable"><span class="koboSpan" id="kobo.1648.1">self</span></span><span class="koboSpan" id="kobo.1649.1">.format_ = format_
ebook = Ebook(
    "Learn Python Programming", "Packt Publishing", </span><span class="hljs-number"><span class="koboSpan" id="kobo.1650.1">500</span></span><span class="koboSpan" id="kobo.1651.1">, "PDF"
)
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1652.1">print</span></span><span class="koboSpan" id="kobo.1653.1">(ebook.title)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1654.1"># Learn Python Programming</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.1655.1">print</span></span><span class="koboSpan" id="kobo.1656.1">(ebook.publisher)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1657.1"># Packt Publishing</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.1658.1">print</span></span><span class="koboSpan" id="kobo.1659.1">(ebook.pages)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1660.1"># 500</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.1661.1">print</span></span><span class="koboSpan" id="kobo.1662.1">(ebook.format_)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1663.1"># PDF</span></span>
</code></pre>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1664.1">
      super()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1665.1">
     is a
    </span>
    <a id="_idIndexMarker637">
    </a>
    <span class="koboSpan" id="kobo.1666.1">
     function that returns a proxy object that delegates method calls to a parent or sibling class.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.1667.1">
      Two classes are siblings if they share the same parents.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1668.1">
     In this case,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1669.1">
      super()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1670.1">
     will delegate the call to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1671.1">
      Book.__init__()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1672.1">
     , and the beauty of this approach is that now we are free to change
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1673.1">
      Book
     </span>
    </code>
    <span class="koboSpan" id="kobo.1674.1">
     to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1675.1">
      Liber
     </span>
    </code>
    <span class="koboSpan" id="kobo.1676.1">
     without having to touch the logic in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1677.1">
      __init__()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1678.1">
     method of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1679.1">
      Ebook
     </span>
    </code>
    <span class="koboSpan" id="kobo.1680.1">
     at all.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1681.1">
     Now that we know how to access a base class from its child, let us explore Python’s multiple inheritance.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-195">
    <span class="koboSpan" id="kobo.1682.1">
     Multiple inheritance
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1683.1">
     In Python, we
    </span>
    <a id="_idIndexMarker638">
    </a>
    <span class="koboSpan" id="kobo.1684.1">
     are allowed to define classes that inherit from more than one base class.
    </span>
    <span class="koboSpan" id="kobo.1684.2">
     This is called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1685.1">
      multiple inheritance
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1686.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1686.2">
     When a
    </span>
    <a id="_idIndexMarker639">
    </a>
    <span class="koboSpan" id="kobo.1687.1">
     class has more than one base class, attribute search can follow more than one path.
    </span>
    <span class="koboSpan" id="kobo.1687.2">
     Take a look at the following diagram:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1688.1">
     <img alt="img" src="../Images/B30992_06_02.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1689.1">
     Figure 6.2: A class inheritance diagram
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1690.1">
     As you
    </span>
    <a id="_idIndexMarker640">
    </a>
    <span class="koboSpan" id="kobo.1691.1">
     can see,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1692.1">
      Shape
     </span>
    </code>
    <span class="koboSpan" id="kobo.1693.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1694.1">
      Plotter
     </span>
    </code>
    <span class="koboSpan" id="kobo.1695.1">
     act as base classes for all the others.
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1696.1">
      Polygon
     </span>
    </code>
    <span class="koboSpan" id="kobo.1697.1">
     inherits directly from them,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1698.1">
      RegularPolygon
     </span>
    </code>
    <span class="koboSpan" id="kobo.1699.1">
     inherits from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1700.1">
      Polygon
     </span>
    </code>
    <span class="koboSpan" id="kobo.1701.1">
     , and both
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1702.1">
      RegularHexagon
     </span>
    </code>
    <span class="koboSpan" id="kobo.1703.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1704.1">
      Square
     </span>
    </code>
    <span class="koboSpan" id="kobo.1705.1">
     inherit from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1706.1">
      RegularPolygon
     </span>
    </code>
    <span class="koboSpan" id="kobo.1707.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1707.2">
     Note also that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1708.1">
      Shape
     </span>
    </code>
    <span class="koboSpan" id="kobo.1709.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1710.1">
      Plotter
     </span>
    </code>
    <span class="koboSpan" id="kobo.1711.1">
     implicitly inherit from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1712.1">
      object
     </span>
    </code>
    <span class="koboSpan" id="kobo.1713.1">
     , so from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1714.1">
      Polygon
     </span>
    </code>
    <span class="koboSpan" id="kobo.1715.1">
     up to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1716.1">
      object
     </span>
    </code>
    <span class="koboSpan" id="kobo.1717.1">
     , we have what is known
    </span>
    <a id="_idIndexMarker641">
    </a>
    <span class="koboSpan" id="kobo.1718.1">
     as a
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1719.1">
      diamond.
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1720.1">
     In simpler terms, we have more than one path to reach a base class.
    </span>
    <span class="koboSpan" id="kobo.1720.2">
     We will see why this matters in a few moments.
    </span>
    <span class="koboSpan" id="kobo.1720.3">
     Let us translate the diagram into code:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1721.1"># oop/multiple.inheritance.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1722.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1723.1">Shape</span></span><span class="koboSpan" id="kobo.1724.1">:
    geometric_type = "</span><span class="hljs-type"><span class="koboSpan" id="kobo.1725.1">Generic</span></span><span class="koboSpan" id="kobo.1726.1"> Shape"
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1727.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1728.1">area</span></span><span class="koboSpan" id="kobo.1729.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1730.1">self</span></span><span class="koboSpan" id="kobo.1731.1">):  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1732.1"># This acts as placeholder for the interface</span></span>
        <span class="hljs-keyword"><span class="koboSpan" id="kobo.1733.1">raise</span></span><span class="koboSpan" id="kobo.1734.1"> NotImplementedError
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1735.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1736.1">get_geometric_type</span></span><span class="koboSpan" id="kobo.1737.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1738.1">self</span></span><span class="koboSpan" id="kobo.1739.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1740.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1741.1">self</span></span><span class="koboSpan" id="kobo.1742.1">.geometric_type
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1743.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1744.1">Plotter</span></span><span class="koboSpan" id="kobo.1745.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1746.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1747.1">plot</span></span><span class="koboSpan" id="kobo.1748.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1749.1">self, ratio, topleft</span></span><span class="koboSpan" id="kobo.1750.1">):
        </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1751.1"># Imagine some nice plotting logic here...</span></span>
        <span class="hljs-built_in"><span class="koboSpan" id="kobo.1752.1">print</span></span><span class="koboSpan" id="kobo.1753.1">("Plotting at {}, ratio {}.".</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1754.1">format</span></span><span class="koboSpan" id="kobo.1755.1">(topleft, ratio))
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1756.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1757.1">Polygon</span></span><span class="koboSpan" id="kobo.1758.1">(Shape, Plotter):  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1759.1"># base class for polygons</span></span><span class="koboSpan" id="kobo.1760.1">
    geometric_type = "Polygon"
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1761.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1762.1">RegularPolygon</span></span><span class="koboSpan" id="kobo.1763.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1764.1">Polygon</span></span><span class="koboSpan" id="kobo.1765.1">):  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1766.1"># Is-A Polygon</span></span><span class="koboSpan" id="kobo.1767.1">
    geometric_type = "Regular Polygon"
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1768.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1769.1">__init__</span></span><span class="koboSpan" id="kobo.1770.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1771.1">self, side</span></span><span class="koboSpan" id="kobo.1772.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1773.1">self</span></span><span class="koboSpan" id="kobo.1774.1">.side = side
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1775.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1776.1">RegularHexagon</span></span><span class="koboSpan" id="kobo.1777.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1778.1">RegularPolygon</span></span><span class="koboSpan" id="kobo.1779.1">):  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1780.1"># Is-A RegularPolygon</span></span><span class="koboSpan" id="kobo.1781.1">
    geometric_type = "RegularHexagon"
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1782.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1783.1">area</span></span><span class="koboSpan" id="kobo.1784.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1785.1">self</span></span><span class="koboSpan" id="kobo.1786.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1787.1">return</span></span> <span class="hljs-number"><span class="koboSpan" id="kobo.1788.1">1.5</span></span><span class="koboSpan" id="kobo.1789.1"> * (</span><span class="hljs-number"><span class="koboSpan" id="kobo.1790.1">3</span></span><span class="koboSpan" id="kobo.1791.1">**</span><span class="hljs-number"><span class="koboSpan" id="kobo.1792.1">0.5</span></span><span class="koboSpan" id="kobo.1793.1"> * </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1794.1">self</span></span><span class="koboSpan" id="kobo.1795.1">.side**</span><span class="hljs-number"><span class="koboSpan" id="kobo.1796.1">2</span></span><span class="koboSpan" id="kobo.1797.1">)
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1798.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1799.1">Square</span></span><span class="koboSpan" id="kobo.1800.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1801.1">RegularPolygon</span></span><span class="koboSpan" id="kobo.1802.1">):  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1803.1"># Is-A RegularPolygon</span></span><span class="koboSpan" id="kobo.1804.1">
    geometric_type = "Square"
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1805.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1806.1">area</span></span><span class="koboSpan" id="kobo.1807.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1808.1">self</span></span><span class="koboSpan" id="kobo.1809.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1810.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1811.1">self</span></span><span class="koboSpan" id="kobo.1812.1">.side * </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1813.1">self</span></span><span class="koboSpan" id="kobo.1814.1">.side
hexagon = RegularHexagon(</span><span class="hljs-number"><span class="koboSpan" id="kobo.1815.1">10</span></span><span class="koboSpan" id="kobo.1816.1">)
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1817.1">print</span></span><span class="koboSpan" id="kobo.1818.1">(hexagon.area())  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1819.1"># 259.8076211353316</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.1820.1">print</span></span><span class="koboSpan" id="kobo.1821.1">(hexagon.get_geometric_type())  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1822.1"># RegularHexagon</span></span><span class="koboSpan" id="kobo.1823.1">
hexagon.plot(</span><span class="hljs-number"><span class="koboSpan" id="kobo.1824.1">0.8</span></span><span class="koboSpan" id="kobo.1825.1">, (</span><span class="hljs-number"><span class="koboSpan" id="kobo.1826.1">75</span></span><span class="koboSpan" id="kobo.1827.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1828.1">77</span></span><span class="koboSpan" id="kobo.1829.1">))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1830.1"># Plotting at (75, 77), ratio 0.8.</span></span><span class="koboSpan" id="kobo.1831.1">
square = Square(</span><span class="hljs-number"><span class="koboSpan" id="kobo.1832.1">12</span></span><span class="koboSpan" id="kobo.1833.1">)
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1834.1">print</span></span><span class="koboSpan" id="kobo.1835.1">(square.area())  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1836.1"># 144</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.1837.1">print</span></span><span class="koboSpan" id="kobo.1838.1">(square.get_geometric_type())  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1839.1"># Square</span></span><span class="koboSpan" id="kobo.1840.1">
square.plot(</span><span class="hljs-number"><span class="koboSpan" id="kobo.1841.1">0.93</span></span><span class="koboSpan" id="kobo.1842.1">, (</span><span class="hljs-number"><span class="koboSpan" id="kobo.1843.1">74</span></span><span class="koboSpan" id="kobo.1844.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1845.1">75</span></span><span class="koboSpan" id="kobo.1846.1">))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1847.1"># Plotting at (74, 75), ratio 0.93.</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1848.1">
     Take a look at the
    </span>
    <a id="_idIndexMarker642">
    </a>
    <span class="koboSpan" id="kobo.1849.1">
     preceding code: the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1850.1">
      Shape
     </span>
    </code>
    <span class="koboSpan" id="kobo.1851.1">
     class has one attribute,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1852.1">
      geometric_type
     </span>
    </code>
    <span class="koboSpan" id="kobo.1853.1">
     , and two methods,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1854.1">
      area()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1855.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1856.1">
      get_geometric_type()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1857.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1857.2">
     It is quite common to use base classes (such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1858.1">
      Shape
     </span>
    </code>
    <span class="koboSpan" id="kobo.1859.1">
     , in our example) to define an
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1860.1">
      interface
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1861.1">
     , a
    </span>
    <a id="_idIndexMarker643">
    </a>
    <span class="koboSpan" id="kobo.1862.1">
     set of methods for which children must provide an implementation.
    </span>
    <span class="koboSpan" id="kobo.1862.2">
     There are different and better ways to do this, but we want to keep this example as simple as possible for the time being.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1863.1">
     We also have the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1864.1">
      Plotter
     </span>
    </code>
    <span class="koboSpan" id="kobo.1865.1">
     class, which adds the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1866.1">
      plot()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1867.1">
     method, thereby providing plotting capabilities for any class that inherits from it.
    </span>
    <span class="koboSpan" id="kobo.1867.2">
     Of course, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1868.1">
      plot()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1869.1">
     implementation is just a dummy
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1870.1">
      print()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1871.1">
     in this example.
    </span>
    <span class="koboSpan" id="kobo.1871.2">
     The first interesting class is
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1872.1">
      Polygon
     </span>
    </code>
    <span class="koboSpan" id="kobo.1873.1">
     , which inherits from both
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1874.1">
      Shape
     </span>
    </code>
    <span class="koboSpan" id="kobo.1875.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1876.1">
      Plotter
     </span>
    </code>
    <span class="koboSpan" id="kobo.1877.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1878.1">
     There are
    </span>
    <a id="_idIndexMarker644">
    </a>
    <span class="koboSpan" id="kobo.1879.1">
     many types of polygons, one of which is the regular one, which is both equiangular (all angles are equal) and equilateral (all sides are equal), so we create the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1880.1">
      RegularPolygon
     </span>
    </code>
    <span class="koboSpan" id="kobo.1881.1">
     class that inherits from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1882.1">
      Polygon
     </span>
    </code>
    <span class="koboSpan" id="kobo.1883.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1883.2">
     For a regular polygon, where all sides are equal, we can implement a simple
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1884.1">
      __init__()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1885.1">
     method, which just takes the length of the side.
    </span>
    <span class="koboSpan" id="kobo.1885.2">
     We create the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1886.1">
      RegularHexagon
     </span>
    </code>
    <span class="koboSpan" id="kobo.1887.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1888.1">
      Square
     </span>
    </code>
    <span class="koboSpan" id="kobo.1889.1">
     classes, which both inherit from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1890.1">
      RegularPolygon
     </span>
    </code>
    <span class="koboSpan" id="kobo.1891.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1892.1">
     This structure is quite long, but hopefully, it gives you an idea of how to specialize the classification of your objects.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1893.1">
     Now, please take a look at the last eight lines of code.
    </span>
    <span class="koboSpan" id="kobo.1893.2">
     Note that when we call the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1894.1">
      area()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1895.1">
     method on
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1896.1">
      hexagon
     </span>
    </code>
    <span class="koboSpan" id="kobo.1897.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1898.1">
      square
     </span>
    </code>
    <span class="koboSpan" id="kobo.1899.1">
     , we get the correct area for both.
    </span>
    <span class="koboSpan" id="kobo.1899.2">
     This is because they both provide the correct implementation logic for it.
    </span>
    <span class="koboSpan" id="kobo.1899.3">
     Also, we can call
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1900.1">
      get_geometric_type()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1901.1">
     on both of them, even though it is not defined in their classes, and Python goes all the way up to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1902.1">
      Shape
     </span>
    </code>
    <span class="koboSpan" id="kobo.1903.1">
     to find an implementation for it.
    </span>
    <span class="koboSpan" id="kobo.1903.2">
     Note that, even though the implementation is provided in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1904.1">
      Shape
     </span>
    </code>
    <span class="koboSpan" id="kobo.1905.1">
     class, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1906.1">
      self.geometric_type()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1907.1">
     used for the return value is correctly taken from the caller instance.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1908.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1909.1">
      plot()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1910.1">
     method calls are also interesting and show you how you can enrich your objects with capabilities they would not otherwise have.
    </span>
    <span class="koboSpan" id="kobo.1910.2">
     This technique is very popular in web frameworks such as Django, which provides special
    </span>
    <a id="_idIndexMarker645">
    </a>
    <span class="koboSpan" id="kobo.1911.1">
     classes called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1912.1">
      mixins
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1913.1">
     , whose capabilities you can just use out of the box.
    </span>
    <span class="koboSpan" id="kobo.1913.2">
     All you need is to define the desired mixin as one of the base classes for your class.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1914.1">
     Multiple inheritance is powerful, but at the same time, it can get a bit messy, so we need to make sure we understand what happens when we use it.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-196">
    <span class="koboSpan" id="kobo.1915.1">
     Method resolution order
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.1916.1">
     By
    </span>
    <a id="_idIndexMarker646">
    </a>
    <span class="koboSpan" id="kobo.1917.1">
     now, we know that when we ask for
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1918.1">
      someobject.attribute
     </span>
    </code>
    <span class="koboSpan" id="kobo.1919.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1920.1">
      attribute
     </span>
    </code>
    <span class="koboSpan" id="kobo.1921.1">
     is not found on that object, Python starts searching in the class that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1922.1">
      someobject
     </span>
    </code>
    <span class="koboSpan" id="kobo.1923.1">
     was created from.
    </span>
    <span class="koboSpan" id="kobo.1923.2">
     If it is not there either, Python searches up the inheritance chain until either
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1924.1">
      attribute
     </span>
    </code>
    <span class="koboSpan" id="kobo.1925.1">
     is found or the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1926.1">
      object
     </span>
    </code>
    <span class="koboSpan" id="kobo.1927.1">
     class is reached.
    </span>
    <span class="koboSpan" id="kobo.1927.2">
     This is quite simple to understand if the inheritance chain is only made of single-inheritance steps, which means that classes have only one parent, all the way up to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1928.1">
      object
     </span>
    </code>
    <span class="koboSpan" id="kobo.1929.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1929.2">
     However, when multiple inheritance is involved, there are cases when
    </span>
    <a id="_idIndexMarker647">
    </a>
    <span class="koboSpan" id="kobo.1930.1">
     it is not straightforward to predict which class will be searched next if an attribute is not found.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1931.1">
     Python provides a way
    </span>
    <a id="_idIndexMarker648">
    </a>
    <span class="koboSpan" id="kobo.1932.1">
     to always know the order in which classes are searched on attribute lookup: the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1933.1">
      method resolution order
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1934.1">
     (
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1935.1">
      MRO
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1936.1">
     ).
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.1937.1">
      The MRO is the order in which base classes are searched for a member during lookup.
     </span>
     <span class="koboSpan" id="kobo.1937.2">
      Since version 2.3, Python uses an algorithm called
     </span>
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1938.1">
       C3
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1939.1">
      , which guarantees monotonicity.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1940.1">
     Let us see the MRO for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1941.1">
      Square
     </span>
    </code>
    <span class="koboSpan" id="kobo.1942.1">
     class from the previous example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1943.1"># oop/multiple.inheritance.py</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.1944.1">print</span></span><span class="koboSpan" id="kobo.1945.1">(square.__class__.__mro__)
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.1946.1"># prints:</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.1947.1"># (&lt;class '__main__.Square'&gt;, &lt;class '__main__.RegularPolygon'&gt;,</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.1948.1">#  &lt;class '__main__.Polygon'&gt;, &lt;class '__main__.Shape'&gt;,</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.1949.1">#  &lt;class '__main__.Plotter'&gt;, &lt;class 'object'&gt;)</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1950.1">
     To get to the MRO of a class, we can go from the instance to its
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1951.1">
      __class__
     </span>
    </code>
    <span class="koboSpan" id="kobo.1952.1">
     attribute, and from that to its
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1953.1">
      __mro__
     </span>
    </code>
    <span class="koboSpan" id="kobo.1954.1">
     attribute.
    </span>
    <span class="koboSpan" id="kobo.1954.2">
     Alternatively, we could have used
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1955.1">
      Square.__mro__
     </span>
    </code>
    <span class="koboSpan" id="kobo.1956.1">
     , or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1957.1">
      Square.mro()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1958.1">
     directly, but if you need to access the MRO from an instance, you will have to derive its class dynamically.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1959.1">
     Note that the only point of doubt is the branching after
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1960.1">
      Polygon
     </span>
    </code>
    <span class="koboSpan" id="kobo.1961.1">
     , where the inheritance chain creates two paths: one leads to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1962.1">
      Shape
     </span>
    </code>
    <span class="koboSpan" id="kobo.1963.1">
     and the other to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1964.1">
      Plotter
     </span>
    </code>
    <span class="koboSpan" id="kobo.1965.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1965.2">
     We know by scanning the MRO for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1966.1">
      Square
     </span>
    </code>
    <span class="koboSpan" id="kobo.1967.1">
     class that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1968.1">
      Shape
     </span>
    </code>
    <span class="koboSpan" id="kobo.1969.1">
     is searched before
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1970.1">
      Plotter
     </span>
    </code>
    <span class="koboSpan" id="kobo.1971.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1972.1">
     Why is this important?
    </span>
    <span class="koboSpan" id="kobo.1972.2">
     Well, consider the following code:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1973.1"># oop/mro.simple.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1974.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1975.1">A</span></span><span class="koboSpan" id="kobo.1976.1">:
    label = "a"
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1977.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1978.1">B</span></span><span class="koboSpan" id="kobo.1979.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1980.1">A</span></span><span class="koboSpan" id="kobo.1981.1">):
    label = "b"
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1982.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1983.1">C</span></span><span class="koboSpan" id="kobo.1984.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1985.1">A</span></span><span class="koboSpan" id="kobo.1986.1">):
    label = "c"
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1987.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1988.1">D</span></span><span class="koboSpan" id="kobo.1989.1">(B, C):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1990.1">pass</span></span><span class="koboSpan" id="kobo.1991.1">
d = D()
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1992.1">print</span></span><span class="koboSpan" id="kobo.1993.1">(d.label)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1994.1"># Hypothetically this could be either 'b' or 'c'</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1995.1">
     Both
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1996.1">
      B
     </span>
    </code>
    <span class="koboSpan" id="kobo.1997.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1998.1">
      C
     </span>
    </code>
    <span class="koboSpan" id="kobo.1999.1">
     inherit from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2000.1">
      A
     </span>
    </code>
    <span class="koboSpan" id="kobo.2001.1">
     , and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2002.1">
      D
     </span>
    </code>
    <span class="koboSpan" id="kobo.2003.1">
     inherits from both
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2004.1">
      B
     </span>
    </code>
    <span class="koboSpan" id="kobo.2005.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2006.1">
      C
     </span>
    </code>
    <span class="koboSpan" id="kobo.2007.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2007.2">
     This means that the lookup for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2008.1">
      label
     </span>
    </code>
    <span class="koboSpan" id="kobo.2009.1">
     attribute can reach the top (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2010.1">
      A
     </span>
    </code>
    <span class="koboSpan" id="kobo.2011.1">
     ) through either
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2012.1">
      B
     </span>
    </code>
    <span class="koboSpan" id="kobo.2013.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2014.1">
      C
     </span>
    </code>
    <span class="koboSpan" id="kobo.2015.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2015.2">
     Depending on which is reached first, we get a different result.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2016.1">
     In this
    </span>
    <a id="_idIndexMarker649">
    </a>
    <span class="koboSpan" id="kobo.2017.1">
     preceding example, we get
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2018.1">
      'b'
     </span>
    </code>
    <span class="koboSpan" id="kobo.2019.1">
     , which is what we were expecting, since
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2020.1">
      B
     </span>
    </code>
    <span class="koboSpan" id="kobo.2021.1">
     is the leftmost among the base classes of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2022.1">
      D
     </span>
    </code>
    <span class="koboSpan" id="kobo.2023.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2023.2">
     But what happens if we remove the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2024.1">
      label
     </span>
    </code>
    <span class="koboSpan" id="kobo.2025.1">
     attribute from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2026.1">
      B
     </span>
    </code>
    <span class="koboSpan" id="kobo.2027.1">
     ?
    </span>
    <span class="koboSpan" id="kobo.2027.2">
     This would be a confusing situation: will the algorithm go all the way up to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2028.1">
      A
     </span>
    </code>
    <span class="koboSpan" id="kobo.2029.1">
     or will it get to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2030.1">
      C
     </span>
    </code>
    <span class="koboSpan" id="kobo.2031.1">
     first?
    </span>
    <span class="koboSpan" id="kobo.2031.2">
     Let us find out:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2032.1"># oop/mro.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2033.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2034.1">A</span></span><span class="koboSpan" id="kobo.2035.1">:
    label = "a"
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2036.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2037.1">B</span></span><span class="koboSpan" id="kobo.2038.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2039.1">A</span></span><span class="koboSpan" id="kobo.2040.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2041.1">pass</span></span>  <span class="hljs-comment"><span class="koboSpan" id="kobo.2042.1"># was: label = 'b'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2043.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2044.1">C</span></span><span class="koboSpan" id="kobo.2045.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2046.1">A</span></span><span class="koboSpan" id="kobo.2047.1">):
    label = "c"
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2048.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2049.1">D</span></span><span class="koboSpan" id="kobo.2050.1">(B, C):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2051.1">pass</span></span><span class="koboSpan" id="kobo.2052.1">
d = D()
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2053.1">print</span></span><span class="koboSpan" id="kobo.2054.1">(d.label)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2055.1"># 'c'</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.2056.1">print</span></span><span class="koboSpan" id="kobo.2057.1">(d.__class__.mro())  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2058.1"># notice another way to get the MRO</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.2059.1"># prints:</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.2060.1"># [&lt;class '__main__.D'&gt;, &lt;class '__main__.B'&gt;,</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.2061.1">#  &lt;class '__main__.C'&gt;, &lt;class '__main__.A'&gt;, &lt;class 'object'&gt;]</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2062.1">
     So we learn that the MRO is
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2063.1">
      D-&gt;B-&gt;C-&gt;A-&gt;object
     </span>
    </code>
    <span class="koboSpan" id="kobo.2064.1">
     , which means that when we ask for
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2065.1">
      d.label
     </span>
    </code>
    <span class="koboSpan" id="kobo.2066.1">
     , we get
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2067.1">
      'c'
     </span>
    </code>
    <span class="koboSpan" id="kobo.2068.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2069.1">
     In day-to-day programming, it is not common to have to deal with the MRO, but we felt it was important to at least mention it in this paragraph so that, should you get entangled in a complex mixins structure, you will be able to find your way out of it.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-197">
    <span class="koboSpan" id="kobo.2070.1">
     Class and static methods
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2071.1">
     So far, we have written classes with attributes in the form of data and instance methods, but there are two other types of methods that we can find in a class definition:
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2072.1">
      static methods
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2073.1">
     and
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2074.1">
      class methods
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2075.1">
     .
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-198">
    <span class="koboSpan" id="kobo.2076.1">
     Static methods
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.2077.1">
     When you
    </span>
    <a id="_idIndexMarker650">
    </a>
    <span class="koboSpan" id="kobo.2078.1">
     create a class object, Python
    </span>
    <a id="_idIndexMarker651">
    </a>
    <span class="koboSpan" id="kobo.2079.1">
     assigns a name to it.
    </span>
    <span class="koboSpan" id="kobo.2079.2">
     That name acts as a namespace, and sometimes, it makes sense to group functionalities under it.
    </span>
    <span class="koboSpan" id="kobo.2079.3">
     Static methods are perfect for this use case.
    </span>
    <span class="koboSpan" id="kobo.2079.4">
     Unlike instance methods, they do not need to be passed an instance when called.
    </span>
    <span class="koboSpan" id="kobo.2079.5">
     Let us look at an example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2080.1"># oop/static.methods.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2081.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2082.1">StringUtil</span></span><span class="koboSpan" id="kobo.2083.1">:
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.2084.1">    @staticmethod</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.2085.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2086.1">is_palindrome</span></span><span class="koboSpan" id="kobo.2087.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2088.1">s, case_insensitive=</span></span><span class="hljs-literal"><span class="koboSpan" id="kobo.2089.1">True</span></span><span class="koboSpan" id="kobo.2090.1">):
        </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2091.1"># we allow only letters and numbers</span></span><span class="koboSpan" id="kobo.2092.1">
        s = "".join(c </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2093.1">for</span></span><span class="koboSpan" id="kobo.2094.1"> c </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2095.1">in</span></span><span class="koboSpan" id="kobo.2096.1"> s </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2097.1">if</span></span><span class="koboSpan" id="kobo.2098.1"> c.isalnum())  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2099.1"># Study this!</span></span>
        <span class="hljs-comment"><span class="koboSpan" id="kobo.2100.1"># For case insensitive comparison, we lower-case s</span></span>
        <span class="hljs-keyword"><span class="koboSpan" id="kobo.2101.1">if</span></span><span class="koboSpan" id="kobo.2102.1"> case_insensitive:
            s = s.lower()
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2103.1">for</span></span><span class="koboSpan" id="kobo.2104.1"> c </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2105.1">in</span></span> <span class="hljs-built_in"><span class="koboSpan" id="kobo.2106.1">range</span></span><span class="koboSpan" id="kobo.2107.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2108.1">len</span></span><span class="koboSpan" id="kobo.2109.1">(s) // </span><span class="hljs-number"><span class="koboSpan" id="kobo.2110.1">2</span></span><span class="koboSpan" id="kobo.2111.1">):
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2112.1">if</span></span><span class="koboSpan" id="kobo.2113.1"> s[c] != s[-c - </span><span class="hljs-number"><span class="koboSpan" id="kobo.2114.1">1</span></span><span class="koboSpan" id="kobo.2115.1">]:
                </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2116.1">return</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.2117.1">False</span></span>
        <span class="hljs-keyword"><span class="koboSpan" id="kobo.2118.1">return</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.2119.1">True</span></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.2120.1">    @staticmethod</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.2121.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2122.1">get_unique_words</span></span><span class="koboSpan" id="kobo.2123.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2124.1">sentence</span></span><span class="koboSpan" id="kobo.2125.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2126.1">return</span></span> <span class="hljs-built_in"><span class="koboSpan" id="kobo.2127.1">set</span></span><span class="koboSpan" id="kobo.2128.1">(sentence.split())
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2129.1">print</span></span><span class="koboSpan" id="kobo.2130.1">(
    StringUtil.is_palindrome("Radar", case_insensitive=</span><span class="hljs-literal"><span class="koboSpan" id="kobo.2131.1">False</span></span><span class="koboSpan" id="kobo.2132.1">)
)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2133.1"># False: Case Sensitive</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.2134.1">print</span></span><span class="koboSpan" id="kobo.2135.1">(StringUtil.is_palindrome("A nut </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2136.1">for</span></span><span class="koboSpan" id="kobo.2137.1"> a jar of tuna"))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2138.1"># True</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.2139.1">print</span></span><span class="koboSpan" id="kobo.2140.1">(StringUtil.is_palindrome("Never Odd, Or Even!"))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2141.1"># True</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.2142.1">print</span></span><span class="koboSpan" id="kobo.2143.1">(
    StringUtil.is_palindrome(
        "In Girum Imus Nocte Et Consumimur Igni"
    )  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2144.1"># Latin palindrome</span></span><span class="koboSpan" id="kobo.2145.1">
)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2146.1"># True</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.2147.1">print</span></span><span class="koboSpan" id="kobo.2148.1">(
    StringUtil.get_unique_words(
        "I love palindromes. </span><span class="koboSpan" id="kobo.2148.2">I really really love them!"
    </span><span class="koboSpan" id="kobo.2148.3">)
)
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.2149.1"># {'them!', 'palindromes.', 'I', 'really', 'love'}</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2150.1">
     The
    </span>
    <a id="_idIndexMarker652">
    </a>
    <span class="koboSpan" id="kobo.2151.1">
     preceding code is quite interesting.
    </span>
    <span class="koboSpan" id="kobo.2151.2">
     First, we learn that static methods are created by simply applying the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2152.1">
      staticmethod
     </span>
    </code>
    <span class="koboSpan" id="kobo.2153.1">
     decorator to them.
    </span>
    <span class="koboSpan" id="kobo.2153.2">
     You can see that they don’t require any extra arguments, so apart from the decoration, they just look like functions.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2154.1">
     We have a
    </span>
    <a id="_idIndexMarker653">
    </a>
    <span class="koboSpan" id="kobo.2155.1">
     class,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2156.1">
      StringUtil
     </span>
    </code>
    <span class="koboSpan" id="kobo.2157.1">
     , that acts as a container for functions.
    </span>
    <span class="koboSpan" id="kobo.2157.2">
     Another approach would be to have a separate module with functions inside.
    </span>
    <span class="koboSpan" id="kobo.2157.3">
     It is really a matter of style, most of the time.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2158.1">
     The logic inside
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2159.1">
      is_palindrome()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2160.1">
     should be straightforward for you by now, but just in case, let us go through it.
    </span>
    <span class="koboSpan" id="kobo.2160.2">
     First, we remove all characters from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2161.1">
      s
     </span>
    </code>
    <span class="koboSpan" id="kobo.2162.1">
     that are neither letters nor numbers.
    </span>
    <span class="koboSpan" id="kobo.2162.2">
     We use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2163.1">
      join()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2164.1">
     method of a string object to do this.
    </span>
    <span class="koboSpan" id="kobo.2164.2">
     By calling
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2165.1">
      join()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2166.1">
     on an empty string, the result is that all elements in the iterable you pass to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2167.1">
      join()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2168.1">
     will be concatenated together.
    </span>
    <span class="koboSpan" id="kobo.2168.2">
     We feed
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2169.1">
      join()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2170.1">
     a generator expression that produces all alphanumeric characters in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2171.1">
      s
     </span>
    </code>
    <span class="koboSpan" id="kobo.2172.1">
     in order.
    </span>
    <span class="koboSpan" id="kobo.2172.2">
     This is a normal procedure when analyzing palindromes.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2173.1">
     If
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2174.1">
      case_insensitive
     </span>
    </code>
    <span class="koboSpan" id="kobo.2175.1">
     is
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2176.1">
      True
     </span>
    </code>
    <span class="koboSpan" id="kobo.2177.1">
     , we lowercase
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2178.1">
      s
     </span>
    </code>
    <span class="koboSpan" id="kobo.2179.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2179.2">
     Finally, we proceed to check whether
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2180.1">
      s
     </span>
    </code>
    <span class="koboSpan" id="kobo.2181.1">
     is a palindrome.
    </span>
    <span class="koboSpan" id="kobo.2181.2">
     To do this, we compare the first and last characters, then the second and the second to last, and so on.
    </span>
    <span class="koboSpan" id="kobo.2181.3">
     If, at any point, we find a difference, it means the string isn’t a palindrome, and therefore, we can return
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2182.1">
      False
     </span>
    </code>
    <span class="koboSpan" id="kobo.2183.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2183.2">
     On the other hand, if we exit the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2184.1">
      for
     </span>
    </code>
    <span class="koboSpan" id="kobo.2185.1">
     loop normally, it means no differences were found, and we can, therefore, say the string is a palindrome.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2186.1">
     Notice that this code works correctly regardless of the length of the string—that is, if the length is odd or even.
    </span>
    <span class="koboSpan" id="kobo.2186.2">
     The measure
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2187.1">
      len(s) // 2
     </span>
    </code>
    <span class="koboSpan" id="kobo.2188.1">
     reaches half of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2189.1">
      s
     </span>
    </code>
    <span class="koboSpan" id="kobo.2190.1">
     , and if
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2191.1">
      s
     </span>
    </code>
    <span class="koboSpan" id="kobo.2192.1">
     is an odd number of characters long, the middle one won’t be checked (for instance, in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.2193.1">
      RaDaR
     </span>
    </em>
    <span class="koboSpan" id="kobo.2194.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.2195.1">
      D
     </span>
    </em>
    <span class="koboSpan" id="kobo.2196.1">
     is not checked), but we don’t care, as it would be compared to itself.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2197.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2198.1">
      get_unique_words()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2199.1">
     method is much simpler: it just returns a set to which we feed a list with the words from a sentence.
    </span>
    <span class="koboSpan" id="kobo.2199.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2200.1">
      set
     </span>
    </code>
    <span class="koboSpan" id="kobo.2201.1">
     class removes any duplication for us, so we don’t need to do anything else.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2202.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2203.1">
      StringUtil
     </span>
    </code>
    <span class="koboSpan" id="kobo.2204.1">
     class provides us with a container namespace for methods that are meant to work on strings.
    </span>
    <span class="koboSpan" id="kobo.2204.2">
     Another example could have been a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2205.1">
      MathUtil
     </span>
    </code>
    <span class="koboSpan" id="kobo.2206.1">
     class with some static methods to work on numbers.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-199">
    <span class="koboSpan" id="kobo.2207.1">
     Class methods
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.2208.1">
     Class methods
    </span>
    <a id="_idIndexMarker654">
    </a>
    <span class="koboSpan" id="kobo.2209.1">
     are slightly different from
    </span>
    <a id="_idIndexMarker655">
    </a>
    <span class="koboSpan" id="kobo.2210.1">
     static methods in that, like instance methods, they also receive a special first argument.
    </span>
    <span class="koboSpan" id="kobo.2210.2">
     In their case, it is the class object itself, rather than the instance.
    </span>
    <span class="koboSpan" id="kobo.2210.3">
     A very common use case for class methods is to provide factory capability to a class, which means having alternative ways to create instances of the class.
    </span>
    <span class="koboSpan" id="kobo.2210.4">
     Let us see an example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2211.1"># oop/class.methods.factory.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2212.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2213.1">Point</span></span><span class="koboSpan" id="kobo.2214.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2215.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2216.1">__init__</span></span><span class="koboSpan" id="kobo.2217.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2218.1">self, x, y</span></span><span class="koboSpan" id="kobo.2219.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2220.1">self</span></span><span class="koboSpan" id="kobo.2221.1">.x = x
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2222.1">self</span></span><span class="koboSpan" id="kobo.2223.1">.y = y
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.2224.1">    @classmethod</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.2225.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2226.1">from_tuple</span></span><span class="koboSpan" id="kobo.2227.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2228.1">cls, coords</span></span><span class="koboSpan" id="kobo.2229.1">):  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2230.1"># cls is Point</span></span>
        <span class="hljs-keyword"><span class="koboSpan" id="kobo.2231.1">return</span></span><span class="koboSpan" id="kobo.2232.1"> cls(*coords)
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.2233.1">    @classmethod</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.2234.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2235.1">from_point</span></span><span class="koboSpan" id="kobo.2236.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2237.1">cls, point</span></span><span class="koboSpan" id="kobo.2238.1">):  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2239.1"># cls is Point</span></span>
        <span class="hljs-keyword"><span class="koboSpan" id="kobo.2240.1">return</span></span><span class="koboSpan" id="kobo.2241.1"> cls(point.x, point.y)
p = Point.from_tuple((</span><span class="hljs-number"><span class="koboSpan" id="kobo.2242.1">3</span></span><span class="koboSpan" id="kobo.2243.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.2244.1">7</span></span><span class="koboSpan" id="kobo.2245.1">))
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2246.1">print</span></span><span class="koboSpan" id="kobo.2247.1">(p.x, p.y)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2248.1"># 3 7</span></span><span class="koboSpan" id="kobo.2249.1">
q = Point.from_point(p)
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2250.1">print</span></span><span class="koboSpan" id="kobo.2251.1">(q.x, q.y)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2252.1"># 3 7</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2253.1">
     In the preceding code, we show you how to use a class method to create a factory for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2254.1">
      Point
     </span>
    </code>
    <span class="koboSpan" id="kobo.2255.1">
     class.
    </span>
    <span class="koboSpan" id="kobo.2255.2">
     In this case, we want to create a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2256.1">
      Point
     </span>
    </code>
    <span class="koboSpan" id="kobo.2257.1">
     instance by passing both coordinates (regular creation
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2258.1">
      p = Point(3, 7)
     </span>
    </code>
    <span class="koboSpan" id="kobo.2259.1">
     ), but we also want to be able to create an instance by passing a tuple (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2260.1">
      Point.from_tuple()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2261.1">
     ) or another instance (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2262.1">
      Point.from_point()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2263.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2264.1">
     Within each class method, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2265.1">
      cls
     </span>
    </code>
    <span class="koboSpan" id="kobo.2266.1">
     argument refers to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2267.1">
      Point
     </span>
    </code>
    <span class="koboSpan" id="kobo.2268.1">
     class.
    </span>
    <span class="koboSpan" id="kobo.2268.2">
     As with the instance method, which takes
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2269.1">
      self
     </span>
    </code>
    <span class="koboSpan" id="kobo.2270.1">
     as the first argument, the class method takes a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2271.1">
      cls
     </span>
    </code>
    <span class="koboSpan" id="kobo.2272.1">
     argument.
    </span>
    <span class="koboSpan" id="kobo.2272.2">
     Both
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2273.1">
      self
     </span>
    </code>
    <span class="koboSpan" id="kobo.2274.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2275.1">
      cls
     </span>
    </code>
    <span class="koboSpan" id="kobo.2276.1">
     are named after a convention that you are not forced to follow but are strongly encouraged to respect.
    </span>
    <span class="koboSpan" id="kobo.2276.2">
     This is something that no professional Python coder would change; it is so strong a convention that plenty of tools, such as parsers, linters, and the like, rely on it.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2277.1">
     Class and
    </span>
    <a id="_idIndexMarker656">
    </a>
    <span class="koboSpan" id="kobo.2278.1">
     static methods
    </span>
    <a id="_idIndexMarker657">
    </a>
    <span class="koboSpan" id="kobo.2279.1">
     play well together.
    </span>
    <span class="koboSpan" id="kobo.2279.2">
     Static methods are particularly useful for breaking up the logic of a class method to improve its layout.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2280.1">
     Let us see an example by refactoring the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2281.1">
      StringUtil
     </span>
    </code>
    <span class="koboSpan" id="kobo.2282.1">
     class:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2283.1"># oop/class.methods.split.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2284.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2285.1">StringUtil</span></span><span class="koboSpan" id="kobo.2286.1">:
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.2287.1">    @classmethod</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.2288.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2289.1">is_palindrome</span></span><span class="koboSpan" id="kobo.2290.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2291.1">cls, s, case_insensitive=</span></span><span class="hljs-literal"><span class="koboSpan" id="kobo.2292.1">True</span></span><span class="koboSpan" id="kobo.2293.1">):
        s = cls._strip_string(s)
        </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2294.1"># For case insensitive comparison, we lower-case s</span></span>
        <span class="hljs-keyword"><span class="koboSpan" id="kobo.2295.1">if</span></span><span class="koboSpan" id="kobo.2296.1"> case_insensitive:
            s = s.lower()
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2297.1">return</span></span><span class="koboSpan" id="kobo.2298.1"> cls._is_palindrome(s)
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.2299.1">    @staticmethod</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.2300.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2301.1">_strip_string</span></span><span class="koboSpan" id="kobo.2302.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2303.1">s</span></span><span class="koboSpan" id="kobo.2304.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2305.1">return</span></span><span class="koboSpan" id="kobo.2306.1"> "".join(c </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2307.1">for</span></span><span class="koboSpan" id="kobo.2308.1"> c </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2309.1">in</span></span><span class="koboSpan" id="kobo.2310.1"> s </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2311.1">if</span></span><span class="koboSpan" id="kobo.2312.1"> c.isalnum())
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.2313.1">    @staticmethod</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.2314.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2315.1">_is_palindrome</span></span><span class="koboSpan" id="kobo.2316.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2317.1">s</span></span><span class="koboSpan" id="kobo.2318.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2319.1">for</span></span><span class="koboSpan" id="kobo.2320.1"> c </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2321.1">in</span></span> <span class="hljs-built_in"><span class="koboSpan" id="kobo.2322.1">range</span></span><span class="koboSpan" id="kobo.2323.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2324.1">len</span></span><span class="koboSpan" id="kobo.2325.1">(s) // </span><span class="hljs-number"><span class="koboSpan" id="kobo.2326.1">2</span></span><span class="koboSpan" id="kobo.2327.1">):
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2328.1">if</span></span><span class="koboSpan" id="kobo.2329.1"> s[c] != s[-c - </span><span class="hljs-number"><span class="koboSpan" id="kobo.2330.1">1</span></span><span class="koboSpan" id="kobo.2331.1">]:
                </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2332.1">return</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.2333.1">False</span></span>
        <span class="hljs-keyword"><span class="koboSpan" id="kobo.2334.1">return</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.2335.1">True</span></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.2336.1">    @staticmethod</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.2337.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2338.1">get_unique_words</span></span><span class="koboSpan" id="kobo.2339.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2340.1">sentence</span></span><span class="koboSpan" id="kobo.2341.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2342.1">return</span></span> <span class="hljs-built_in"><span class="koboSpan" id="kobo.2343.1">set</span></span><span class="koboSpan" id="kobo.2344.1">(sentence.split())
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2345.1">print</span></span><span class="koboSpan" id="kobo.2346.1">(StringUtil.is_palindrome("radar"))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2347.1"># True</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.2348.1">print</span></span><span class="koboSpan" id="kobo.2349.1">(StringUtil.is_palindrome("</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2350.1">not</span></span><span class="koboSpan" id="kobo.2351.1"> a palindrome"))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2352.1"># False</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2353.1">
     Compare this code with the previous version.
    </span>
    <span class="koboSpan" id="kobo.2353.2">
     First of all, note that even though
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2354.1">
      is_palindrome()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2355.1">
     is now a class method, we call it in the same way we called it when it was a static one.
    </span>
    <span class="koboSpan" id="kobo.2355.2">
     The reason why we changed it to a class method is that after factoring out some of its logic (to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2356.1">
      _strip_string()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2357.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2358.1">
      _is_palindrome()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2359.1">
     ), we need to get a reference to those methods, and if we have no
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2360.1">
      cls
     </span>
    </code>
    <span class="koboSpan" id="kobo.2361.1">
     in our method, the only option would be to call them by using the name of the class itself, like so:
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2362.1">
      StringUtil._strip_string()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2363.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2364.1">
      StringUtil._is_palindrome()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2365.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2366.1">
     However, this is not good practice because we would hardcode the class name in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2367.1">
      is_palindrome()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2368.1">
     method, thereby putting ourselves in the position of having to modify it whenever we want to
    </span>
    <a id="_idIndexMarker658">
    </a>
    <span class="koboSpan" id="kobo.2369.1">
     change the class name.
    </span>
    <span class="koboSpan" id="kobo.2369.2">
     Using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2370.1">
      cls
     </span>
    </code>
    <span class="koboSpan" id="kobo.2371.1">
     means
    </span>
    <a id="_idIndexMarker659">
    </a>
    <span class="koboSpan" id="kobo.2372.1">
     it will act as the class name, which means our code won’t need any modifications should the class name change.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2373.1">
     Notice how the new logic reads much better than the previous version.
    </span>
    <span class="koboSpan" id="kobo.2373.2">
     Moreover, notice that, by naming the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.2374.1">
      factored-out
     </span>
    </em>
    <span class="koboSpan" id="kobo.2375.1">
     methods with a leading underscore, we hint that those methods are not supposed to be called from outside the class, but this will be the subject of the next paragraph.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-200">
    <span class="koboSpan" id="kobo.2376.1">
     Private methods and name mangling
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2377.1">
     If you have
    </span>
    <a id="_idIndexMarker660">
    </a>
    <span class="koboSpan" id="kobo.2378.1">
     any background in languages like Java, C#, or C++, then you know that they allow the programmer to assign a privacy status to attributes (both data and methods).
    </span>
    <span class="koboSpan" id="kobo.2378.2">
     Each language has its own slightly different flavor for this, but the gist is that public attributes are accessible from any point in the code, while private ones are accessible only within the scope they are defined in.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2379.1">
     In Python, there is no such thing.
    </span>
    <span class="koboSpan" id="kobo.2379.2">
     Everything is public; therefore, we rely on conventions and, for privacy, on
    </span>
    <a id="_idIndexMarker661">
    </a>
    <span class="koboSpan" id="kobo.2380.1">
     a mechanism
    </span>
    <a id="_idIndexMarker662">
    </a>
    <span class="koboSpan" id="kobo.2381.1">
     called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2382.1">
      name mangling
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2383.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2384.1">
     The convention is as follows: if an attribute’s name has no leading underscores, it is considered public.
    </span>
    <span class="koboSpan" id="kobo.2384.2">
     This means you can access it and modify it freely.
    </span>
    <span class="koboSpan" id="kobo.2384.3">
     When the name has one leading underscore, the attribute is considered private, which means it is intended to be used internally, and you should not modify it or call it from the outside.
    </span>
    <span class="koboSpan" id="kobo.2384.4">
     A very common use case for private attributes is helper methods that are supposed to be used by public ones (possibly in call chains in conjunction with other methods).
    </span>
    <span class="koboSpan" id="kobo.2384.5">
     Another use case is internal data, such as scaling factors, or any other data that we would ideally put in a constant, a variable that, once defined, cannot change.
    </span>
    <span class="koboSpan" id="kobo.2384.6">
     However, Python has no concept of constants.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2385.1">
     We know some programmers who don’t feel at ease with this aspect of Python.
    </span>
    <span class="koboSpan" id="kobo.2385.2">
     In our experience, we have never encountered situations in which we had bugs because Python lacks private attributes.
    </span>
    <span class="koboSpan" id="kobo.2385.3">
     It is a matter of discipline, best practices, and following conventions.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2386.1">
     The amount of freedom Python offers to a developer is the reason why, sometimes, it is referred to as a
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.2387.1">
      language for adults
     </span>
    </em>
    <span class="koboSpan" id="kobo.2388.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2388.2">
     And of course, there are pros and cons to every design choice.
    </span>
    <span class="koboSpan" id="kobo.2388.3">
     At the end of the day, some people prefer languages that allow more power and might
    </span>
    <a id="_idIndexMarker663">
    </a>
    <span class="koboSpan" id="kobo.2389.1">
     require a bit more
    </span>
    <a id="_idIndexMarker664">
    </a>
    <span class="koboSpan" id="kobo.2390.1">
     responsibility, while others prefer languages that are more constrictive.
    </span>
    <span class="koboSpan" id="kobo.2390.2">
     To each their own; it’s not a matter of right or wrong.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2391.1">
     That said, the call for privacy actually makes sense because, without it, you risk introducing bugs into your code for real.
    </span>
    <span class="koboSpan" id="kobo.2391.2">
     Let us show you what we mean:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2392.1"># oop/private.attrs.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2393.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2394.1">A</span></span><span class="koboSpan" id="kobo.2395.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2396.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2397.1">__init__</span></span><span class="koboSpan" id="kobo.2398.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2399.1">self, factor</span></span><span class="koboSpan" id="kobo.2400.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2401.1">self</span></span><span class="koboSpan" id="kobo.2402.1">._factor = factor
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2403.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2404.1">op1</span></span><span class="koboSpan" id="kobo.2405.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2406.1">self</span></span><span class="koboSpan" id="kobo.2407.1">):
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2408.1">print</span></span><span class="koboSpan" id="kobo.2409.1">("Op1 </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2410.1">with</span></span><span class="koboSpan" id="kobo.2411.1"> factor {}...".</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2412.1">format</span></span><span class="koboSpan" id="kobo.2413.1">(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.2414.1">self</span></span><span class="koboSpan" id="kobo.2415.1">._factor))
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2416.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2417.1">B</span></span><span class="koboSpan" id="kobo.2418.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2419.1">A</span></span><span class="koboSpan" id="kobo.2420.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2421.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2422.1">op2</span></span><span class="koboSpan" id="kobo.2423.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2424.1">self, factor</span></span><span class="koboSpan" id="kobo.2425.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2426.1">self</span></span><span class="koboSpan" id="kobo.2427.1">._factor = factor
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2428.1">print</span></span><span class="koboSpan" id="kobo.2429.1">("Op2 </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2430.1">with</span></span><span class="koboSpan" id="kobo.2431.1"> factor {}...".</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2432.1">format</span></span><span class="koboSpan" id="kobo.2433.1">(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.2434.1">self</span></span><span class="koboSpan" id="kobo.2435.1">._factor))
obj = B(</span><span class="hljs-number"><span class="koboSpan" id="kobo.2436.1">100</span></span><span class="koboSpan" id="kobo.2437.1">)
obj.op1()  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2438.1"># Op1 with factor 100...</span></span><span class="koboSpan" id="kobo.2439.1">
obj.op2(</span><span class="hljs-number"><span class="koboSpan" id="kobo.2440.1">42</span></span><span class="koboSpan" id="kobo.2441.1">)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2442.1"># Op2 with factor 42...</span></span><span class="koboSpan" id="kobo.2443.1">
obj.op1()  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2444.1"># Op1 with factor 42...  </span><span class="koboSpan" id="kobo.2444.2">&lt;- This is BAD</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2445.1">
     In the preceding code, we have an attribute called
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2446.1">
      _factor
     </span>
    </code>
    <span class="koboSpan" id="kobo.2447.1">
     , and let us pretend it is so important that it shouldn’t be modified at runtime after the instance is created because
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2448.1">
      op1()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2449.1">
     depends on it to function correctly.
    </span>
    <span class="koboSpan" id="kobo.2449.2">
     We’ve named it with a leading underscore, but the issue here is that the call
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2450.1">
      obj.op2(42)
     </span>
    </code>
    <span class="koboSpan" id="kobo.2451.1">
     modifies it, and this is then reflected in subsequent calls to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2452.1">
      op1()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2453.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2454.1">
     We can fix this undesired behavior by adding a second leading underscore:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2455.1"># oop/private.attrs.fixed.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2456.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2457.1">A</span></span><span class="koboSpan" id="kobo.2458.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2459.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2460.1">__init__</span></span><span class="koboSpan" id="kobo.2461.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2462.1">self, factor</span></span><span class="koboSpan" id="kobo.2463.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2464.1">self</span></span><span class="koboSpan" id="kobo.2465.1">.__factor = factor
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2466.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2467.1">op1</span></span><span class="koboSpan" id="kobo.2468.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2469.1">self</span></span><span class="koboSpan" id="kobo.2470.1">):
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2471.1">print</span></span><span class="koboSpan" id="kobo.2472.1">("Op1 </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2473.1">with</span></span><span class="koboSpan" id="kobo.2474.1"> factor {}...".</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2475.1">format</span></span><span class="koboSpan" id="kobo.2476.1">(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.2477.1">self</span></span><span class="koboSpan" id="kobo.2478.1">.__factor))
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2479.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2480.1">B</span></span><span class="koboSpan" id="kobo.2481.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2482.1">A</span></span><span class="koboSpan" id="kobo.2483.1">):
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2484.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2485.1">op2</span></span><span class="koboSpan" id="kobo.2486.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2487.1">self, factor</span></span><span class="koboSpan" id="kobo.2488.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2489.1">self</span></span><span class="koboSpan" id="kobo.2490.1">.__factor = factor
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2491.1">print</span></span><span class="koboSpan" id="kobo.2492.1">("Op2 </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2493.1">with</span></span><span class="koboSpan" id="kobo.2494.1"> factor {}...".</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2495.1">format</span></span><span class="koboSpan" id="kobo.2496.1">(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.2497.1">self</span></span><span class="koboSpan" id="kobo.2498.1">.__factor))
obj = B(</span><span class="hljs-number"><span class="koboSpan" id="kobo.2499.1">100</span></span><span class="koboSpan" id="kobo.2500.1">)
obj.op1()  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2501.1"># Op1 with factor 100...</span></span><span class="koboSpan" id="kobo.2502.1">
obj.op2(</span><span class="hljs-number"><span class="koboSpan" id="kobo.2503.1">42</span></span><span class="koboSpan" id="kobo.2504.1">)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2505.1"># Op2 with factor 42...</span></span><span class="koboSpan" id="kobo.2506.1">
obj.op1()  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2507.1"># Op1 with factor 100...  </span><span class="koboSpan" id="kobo.2507.2">&lt;- Now it's good!</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2508.1">
     Now, it is
    </span>
    <a id="_idIndexMarker665">
    </a>
    <span class="koboSpan" id="kobo.2509.1">
     working as desired.
    </span>
    <span class="koboSpan" id="kobo.2509.2">
     Python is kind of magic, and in this case, what is happening is that the name-mangling mechanism has kicked in.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2510.1">
     Name mangling
    </span>
    <a id="_idIndexMarker666">
    </a>
    <span class="koboSpan" id="kobo.2511.1">
     means that any attribute
    </span>
    <a id="_idIndexMarker667">
    </a>
    <span class="koboSpan" id="kobo.2512.1">
     name that has at least two leading underscores and at most one trailing underscore, such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2513.1">
      __my_attr
     </span>
    </code>
    <span class="koboSpan" id="kobo.2514.1">
     , is replaced with a name that includes an underscore and the class name before the actual name, such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2515.1">
      _ClassName__my_attr
     </span>
    </code>
    <span class="koboSpan" id="kobo.2516.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2517.1">
     This means that when you inherit from a class, the mangling mechanism gives your private attribute two different names in the base and child classes so that name collision is avoided.
    </span>
    <span class="koboSpan" id="kobo.2517.2">
     Every class and instance object stores references to their attributes in a special attribute, called
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2518.1">
      __dict__
     </span>
    </code>
    <span class="koboSpan" id="kobo.2519.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2519.2">
     Let us inspect
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2520.1">
      obj.__dict__
     </span>
    </code>
    <span class="koboSpan" id="kobo.2521.1">
     to see name mangling in action:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2522.1"># oop/private.attrs.py</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.2523.1">print</span></span><span class="koboSpan" id="kobo.2524.1">(obj.__dict__.keys())
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.2525.1"># dict_keys(['_factor'])</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2526.1">
     This is the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2527.1">
      _factor
     </span>
    </code>
    <span class="koboSpan" id="kobo.2528.1">
     attribute that we find in the problematic version of this example, but look at the one that uses
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2529.1">
      __factor
     </span>
    </code>
    <span class="koboSpan" id="kobo.2530.1">
     :
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2531.1"># oop/private.attrs.fixed.py</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.2532.1">print</span></span><span class="koboSpan" id="kobo.2533.1">(obj.__dict__.keys())
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.2534.1"># dict_keys(['_A__factor', '_B__factor'])</span></span>
</code></pre>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2535.1">
      obj
     </span>
    </code>
    <span class="koboSpan" id="kobo.2536.1">
     has two attributes now,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2537.1">
      _A__factor
     </span>
    </code>
    <span class="koboSpan" id="kobo.2538.1">
     (mangled within the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2539.1">
      A
     </span>
    </code>
    <span class="koboSpan" id="kobo.2540.1">
     class) and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2541.1">
      _B__factor
     </span>
    </code>
    <span class="koboSpan" id="kobo.2542.1">
     (mangled within the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2543.1">
      B
     </span>
    </code>
    <span class="koboSpan" id="kobo.2544.1">
     class).
    </span>
    <span class="koboSpan" id="kobo.2544.2">
     This is the mechanism that ensures that when you execute
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2545.1">
      obj.__factor = 42
     </span>
    </code>
    <span class="koboSpan" id="kobo.2546.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2547.1">
      __factor
     </span>
    </code>
    <span class="koboSpan" id="kobo.2548.1">
     in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2549.1">
      A
     </span>
    </code>
    <span class="koboSpan" id="kobo.2550.1">
     isn’t changed because you’re actually touching
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2551.1">
      _B__factor
     </span>
    </code>
    <span class="koboSpan" id="kobo.2552.1">
     , which has no effect on
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2553.1">
      _A__factor
     </span>
    </code>
    <span class="koboSpan" id="kobo.2554.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2555.1">
     If you are designing a library with classes that are meant to be used and extended by other developers, you will need to keep this in mind in order to avoid the unintentional overriding of your attributes.
    </span>
    <span class="koboSpan" id="kobo.2555.2">
     Bugs like these can be subtle and hard to spot.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-201">
    <span class="koboSpan" id="kobo.2556.1">
     The property decorator
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2557.1">
     Another
    </span>
    <a id="_idIndexMarker668">
    </a>
    <span class="koboSpan" id="kobo.2558.1">
     thing that would be a crime not to mention
    </span>
    <a id="_idIndexMarker669">
    </a>
    <span class="koboSpan" id="kobo.2559.1">
     is the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2560.1">
      property
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2561.1">
     decorator.
    </span>
    <span class="koboSpan" id="kobo.2561.2">
     Imagine that you have an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2562.1">
      age
     </span>
    </code>
    <span class="koboSpan" id="kobo.2563.1">
     attribute in a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2564.1">
      Person
     </span>
    </code>
    <span class="koboSpan" id="kobo.2565.1">
     class and, at some point, you want to make sure that when you change its value, you also check that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2566.1">
      age
     </span>
    </code>
    <span class="koboSpan" id="kobo.2567.1">
     is within a proper range, such as [18, 99].
    </span>
    <span class="koboSpan" id="kobo.2567.2">
     You
    </span>
    <a id="_idIndexMarker670">
    </a>
    <span class="koboSpan" id="kobo.2568.1">
     could write
    </span>
    <a id="_idIndexMarker671">
    </a>
    <span class="koboSpan" id="kobo.2569.1">
     accessor methods, such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2570.1">
      get_age()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2571.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2572.1">
      set_age()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2573.1">
     (also called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2574.1">
      getters
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2575.1">
     and
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2576.1">
      setters
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2577.1">
     ), and put the logic there.
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2578.1">
      get_age()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2579.1">
     will most likely just return
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2580.1">
      age
     </span>
    </code>
    <span class="koboSpan" id="kobo.2581.1">
     , while
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2582.1">
      set_age()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2583.1">
     will set its value after checking its validity.
    </span>
    <span class="koboSpan" id="kobo.2583.2">
     The problem is that you may already have some code accessing the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2584.1">
      age
     </span>
    </code>
    <span class="koboSpan" id="kobo.2585.1">
     attribute directly, which means you’re now ready for some refactoring.
    </span>
    <span class="koboSpan" id="kobo.2585.2">
     Languages like Java overcome this problem by using the accessor pattern basically by default.
    </span>
    <span class="koboSpan" id="kobo.2585.3">
     Many Java
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2586.1">
      Integrated Development Environments
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2587.1">
     (
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2588.1">
      IDEs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2589.1">
     ) autocomplete
    </span>
    <a id="_idIndexMarker672">
    </a>
    <span class="koboSpan" id="kobo.2590.1">
     an attribute declaration by writing getter and setter accessor method stubs for you on the fly.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2591.1">
     But we are not learning Java.
    </span>
    <span class="koboSpan" id="kobo.2591.2">
     Python achieves the same result with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2592.1">
      property
     </span>
    </code>
    <span class="koboSpan" id="kobo.2593.1">
     decorator.
    </span>
    <span class="koboSpan" id="kobo.2593.2">
     When you decorate a method with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2594.1">
      property
     </span>
    </code>
    <span class="koboSpan" id="kobo.2595.1">
     , you can use the name of the method as if it were a data attribute.
    </span>
    <span class="koboSpan" id="kobo.2595.2">
     Because of this, it is always best to refrain from putting logic that would take a while to complete in such methods because, by accessing them as attributes, we do not expect to wait.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2596.1">
     Let us look at an example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2597.1"># oop/property.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2598.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2599.1">Person</span></span><span class="koboSpan" id="kobo.2600.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2601.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2602.1">__init__</span></span><span class="koboSpan" id="kobo.2603.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2604.1">self, age</span></span><span class="koboSpan" id="kobo.2605.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2606.1">self</span></span><span class="koboSpan" id="kobo.2607.1">.age = age  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2608.1"># anyone can modify this freely</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2609.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2610.1">PersonWithAccessors</span></span><span class="koboSpan" id="kobo.2611.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2612.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2613.1">__init__</span></span><span class="koboSpan" id="kobo.2614.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2615.1">self, age</span></span><span class="koboSpan" id="kobo.2616.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2617.1">self</span></span><span class="koboSpan" id="kobo.2618.1">._age = age
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2619.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2620.1">get_age</span></span><span class="koboSpan" id="kobo.2621.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2622.1">self</span></span><span class="koboSpan" id="kobo.2623.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2624.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.2625.1">self</span></span><span class="koboSpan" id="kobo.2626.1">._age
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2627.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2628.1">set_age</span></span><span class="koboSpan" id="kobo.2629.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2630.1">self, age</span></span><span class="koboSpan" id="kobo.2631.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2632.1">if</span></span> <span class="hljs-number"><span class="koboSpan" id="kobo.2633.1">18</span></span><span class="koboSpan" id="kobo.2634.1"> &lt;= age &lt;= </span><span class="hljs-number"><span class="koboSpan" id="kobo.2635.1">99</span></span><span class="koboSpan" id="kobo.2636.1">:
            </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2637.1">self</span></span><span class="koboSpan" id="kobo.2638.1">._age = age
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2639.1">else</span></span><span class="koboSpan" id="kobo.2640.1">:
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2641.1">raise</span></span><span class="koboSpan" id="kobo.2642.1"> ValueError("Age must be within [</span><span class="hljs-number"><span class="koboSpan" id="kobo.2643.1">18</span></span><span class="koboSpan" id="kobo.2644.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.2645.1">99</span></span><span class="koboSpan" id="kobo.2646.1">]")
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2647.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2648.1">PersonPythonic</span></span><span class="koboSpan" id="kobo.2649.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2650.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2651.1">__init__</span></span><span class="koboSpan" id="kobo.2652.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2653.1">self, age</span></span><span class="koboSpan" id="kobo.2654.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2655.1">self</span></span><span class="koboSpan" id="kobo.2656.1">._age = age
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.2657.1">    @property</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.2658.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2659.1">age</span></span><span class="koboSpan" id="kobo.2660.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2661.1">self</span></span><span class="koboSpan" id="kobo.2662.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2663.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.2664.1">self</span></span><span class="koboSpan" id="kobo.2665.1">._age
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.2666.1">    @age.setter</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.2667.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2668.1">age</span></span><span class="koboSpan" id="kobo.2669.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2670.1">self, age</span></span><span class="koboSpan" id="kobo.2671.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2672.1">if</span></span> <span class="hljs-number"><span class="koboSpan" id="kobo.2673.1">18</span></span><span class="koboSpan" id="kobo.2674.1"> &lt;= age &lt;= </span><span class="hljs-number"><span class="koboSpan" id="kobo.2675.1">99</span></span><span class="koboSpan" id="kobo.2676.1">:
            </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2677.1">self</span></span><span class="koboSpan" id="kobo.2678.1">._age = age
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2679.1">else</span></span><span class="koboSpan" id="kobo.2680.1">:
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2681.1">raise</span></span><span class="koboSpan" id="kobo.2682.1"> ValueError("Age must be within [</span><span class="hljs-number"><span class="koboSpan" id="kobo.2683.1">18</span></span><span class="koboSpan" id="kobo.2684.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.2685.1">99</span></span><span class="koboSpan" id="kobo.2686.1">]")
person = PersonPythonic(</span><span class="hljs-number"><span class="koboSpan" id="kobo.2687.1">39</span></span><span class="koboSpan" id="kobo.2688.1">)
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2689.1">print</span></span><span class="koboSpan" id="kobo.2690.1">(person.age)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2691.1"># 39 - Notice we access as data attribute</span></span><span class="koboSpan" id="kobo.2692.1">
person.age = </span><span class="hljs-number"><span class="koboSpan" id="kobo.2693.1">42</span></span>  <span class="hljs-comment"><span class="koboSpan" id="kobo.2694.1"># Notice we access as data attribute</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.2695.1">print</span></span><span class="koboSpan" id="kobo.2696.1">(person.age)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2697.1"># 42</span></span><span class="koboSpan" id="kobo.2698.1">
person.age = </span><span class="hljs-number"><span class="koboSpan" id="kobo.2699.1">100</span></span>  <span class="hljs-comment"><span class="koboSpan" id="kobo.2700.1"># ValueError: Age must be within [18, 99]</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2701.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2702.1">
      Person
     </span>
    </code>
    <span class="koboSpan" id="kobo.2703.1">
     class
    </span>
    <a id="_idIndexMarker673">
    </a>
    <span class="koboSpan" id="kobo.2704.1">
     may be the first version we write.
    </span>
    <span class="koboSpan" id="kobo.2704.2">
     Then, we realize we need to put the range logic in place, so with another language, we would have to rewrite
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2705.1">
      Person
     </span>
    </code>
    <span class="koboSpan" id="kobo.2706.1">
     as the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2707.1">
      PersonWithAccessors
     </span>
    </code>
    <span class="koboSpan" id="kobo.2708.1">
     class and refactor the code that uses
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2709.1">
      Person.age
     </span>
    </code>
    <span class="koboSpan" id="kobo.2710.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2710.2">
     In Python, we rewrite
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2711.1">
      Person
     </span>
    </code>
    <span class="koboSpan" id="kobo.2712.1">
     as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2713.1">
      PersonPythonic
     </span>
    </code>
    <span class="koboSpan" id="kobo.2714.1">
     (you normally wouldn’t change the name, of course; this is just for the sake of illustration).
    </span>
    <span class="koboSpan" id="kobo.2714.2">
     In
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2715.1">
      PersonPythonic
     </span>
    </code>
    <span class="koboSpan" id="kobo.2716.1">
     the age is stored in a
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.2717.1">
      private
     </span>
    </em>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2718.1">
      _age
     </span>
    </code>
    <span class="koboSpan" id="kobo.2719.1">
     variable, and we define property getters and setters using the decoration shown, which allows us to keep using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2720.1">
      person
     </span>
    </code>
    <span class="koboSpan" id="kobo.2721.1">
     instances as before.
    </span>
    <span class="koboSpan" id="kobo.2721.2">
     A
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2722.1">
      getter
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2723.1">
     is
    </span>
    <a id="_idIndexMarker674">
    </a>
    <span class="koboSpan" id="kobo.2724.1">
     a method that is called when we access an attribute for reading.
    </span>
    <span class="koboSpan" id="kobo.2724.2">
     On the other hand, a
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2725.1">
      setter
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2726.1">
     is a
    </span>
    <a id="_idIndexMarker675">
    </a>
    <span class="koboSpan" id="kobo.2727.1">
     method that is called when we access an attribute to write it.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2728.1">
     Unlike languages that use the getter/setter paradigm, Python allows us to start writing simple code and refactor later, only when we need it; there is no need to pollute the code with accessor methods only because they may be helpful in the future.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2729.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2730.1">
      property
     </span>
    </code>
    <span class="koboSpan" id="kobo.2731.1">
     decorator also allows read-only data (by not writing the setter counterpart) and for special actions when the attribute is deleted.
    </span>
    <span class="koboSpan" id="kobo.2731.2">
     Please refer to the official documentation to dig deeper.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-202">
    <span class="koboSpan" id="kobo.2732.1">
     The cached_property decorator
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2733.1">
     One
    </span>
    <a id="_idIndexMarker676">
    </a>
    <span class="koboSpan" id="kobo.2734.1">
     convenient use of properties is
    </span>
    <a id="_idIndexMarker677">
    </a>
    <span class="koboSpan" id="kobo.2735.1">
     when we need to run some code to set up the object we want to use.
    </span>
    <span class="koboSpan" id="kobo.2735.2">
     For example, let us say we needed to connect to a database (or to an API).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2736.1">
     In both cases, we might have to set up a client object that knows how to talk to the database (or the API).
    </span>
    <span class="koboSpan" id="kobo.2736.2">
     It is quite common to use a property, in these cases, so that we can hide away the complexity of having to set the client up, and simply use it.
    </span>
    <span class="koboSpan" id="kobo.2736.3">
     Let us show you a simple example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2737.1"># oop/cached.property.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2738.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2739.1">Client</span></span><span class="koboSpan" id="kobo.2740.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2741.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2742.1">__init__</span></span><span class="koboSpan" id="kobo.2743.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2744.1">self</span></span><span class="koboSpan" id="kobo.2745.1">):
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2746.1">print</span></span><span class="koboSpan" id="kobo.2747.1">("Setting up the client...")
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2748.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2749.1">query</span></span><span class="koboSpan" id="kobo.2750.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2751.1">self, **kwargs</span></span><span class="koboSpan" id="kobo.2752.1">):
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2753.1">print</span></span><span class="koboSpan" id="kobo.2754.1">(f"Performing a query: {kwargs}")
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2755.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2756.1">Manager</span></span><span class="koboSpan" id="kobo.2757.1">:
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.2758.1">    @property</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.2759.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2760.1">client</span></span><span class="koboSpan" id="kobo.2761.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2762.1">self</span></span><span class="koboSpan" id="kobo.2763.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2764.1">return</span></span><span class="koboSpan" id="kobo.2765.1"> Client()
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2766.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2767.1">perform_query</span></span><span class="koboSpan" id="kobo.2768.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2769.1">self, **kwargs</span></span><span class="koboSpan" id="kobo.2770.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2771.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.2772.1">self</span></span><span class="koboSpan" id="kobo.2773.1">.client.query(**kwargs)
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2774.1">
     In the preceding example, we have a dummy
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2775.1">
      Client
     </span>
    </code>
    <span class="koboSpan" id="kobo.2776.1">
     class, which prints the string
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2777.1">
      "Setting up the client…"
     </span>
    </code>
    <span class="koboSpan" id="kobo.2778.1">
     every time we create a new instance.
    </span>
    <span class="koboSpan" id="kobo.2778.2">
     It also has a pretend
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2779.1">
      query()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2780.1">
     method that prints a string as well.
    </span>
    <span class="koboSpan" id="kobo.2780.2">
     We then have a class,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2781.1">
      Manager
     </span>
    </code>
    <span class="koboSpan" id="kobo.2782.1">
     , which has a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2783.1">
      client
     </span>
    </code>
    <span class="koboSpan" id="kobo.2784.1">
     property that creates a new instance of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2785.1">
      Client
     </span>
    </code>
    <span class="koboSpan" id="kobo.2786.1">
     every time it is called (for example, by a call to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2787.1">
      perform_query()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2788.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2789.1">
     If we were to run this code, we would notice that every time we call
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2790.1">
      perform_query()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2791.1">
     on the manager, we see the string
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2792.1">
      "Setting up the client…"
     </span>
    </code>
    <span class="koboSpan" id="kobo.2793.1">
     being printed.
    </span>
    <span class="koboSpan" id="kobo.2793.2">
     When creating a client is expensive, this code would be wasting resources, so it might be better to cache that client, like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2794.1"># oop/cached.property.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2795.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2796.1">ManualCacheManager</span></span><span class="koboSpan" id="kobo.2797.1">:
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.2798.1">    @property</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.2799.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2800.1">client</span></span><span class="koboSpan" id="kobo.2801.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2802.1">self</span></span><span class="koboSpan" id="kobo.2803.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2804.1">if</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2805.1">not</span></span> <span class="hljs-built_in"><span class="koboSpan" id="kobo.2806.1">hasattr</span></span><span class="koboSpan" id="kobo.2807.1">(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.2808.1">self</span></span><span class="koboSpan" id="kobo.2809.1">, "_client"):
            </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2810.1">self</span></span><span class="koboSpan" id="kobo.2811.1">._client = Client()
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2812.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.2813.1">self</span></span><span class="koboSpan" id="kobo.2814.1">._client
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2815.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2816.1">perform_query</span></span><span class="koboSpan" id="kobo.2817.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2818.1">self, **kwargs</span></span><span class="koboSpan" id="kobo.2819.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2820.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.2821.1">self</span></span><span class="koboSpan" id="kobo.2822.1">.client.query(**kwargs)
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2823.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2824.1">
      ManualCacheManager
     </span>
    </code>
    <span class="koboSpan" id="kobo.2825.1">
     class
    </span>
    <a id="_idIndexMarker678">
    </a>
    <span class="koboSpan" id="kobo.2826.1">
     is a bit smarter: the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2827.1">
      client
     </span>
    </code>
    <span class="koboSpan" id="kobo.2828.1">
     property first checks if the attribute
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2829.1">
      _client
     </span>
    </code>
    <span class="koboSpan" id="kobo.2830.1">
     exists on the instance, by calling the built-in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2831.1">
      hasattr()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2832.1">
     function.
    </span>
    <span class="koboSpan" id="kobo.2832.2">
     If not, it
    </span>
    <a id="_idIndexMarker679">
    </a>
    <span class="koboSpan" id="kobo.2833.1">
     assigns
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2834.1">
      _client
     </span>
    </code>
    <span class="koboSpan" id="kobo.2835.1">
     to a new instance of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2836.1">
      Client
     </span>
    </code>
    <span class="koboSpan" id="kobo.2837.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2837.2">
     Finally, it simply returns it.
    </span>
    <span class="koboSpan" id="kobo.2837.3">
     Repeatedly accessing the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2838.1">
      client
     </span>
    </code>
    <span class="koboSpan" id="kobo.2839.1">
     property on this class will only create one instance of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2840.1">
      Client
     </span>
    </code>
    <span class="koboSpan" id="kobo.2841.1">
     , the first time.
    </span>
    <span class="koboSpan" id="kobo.2841.2">
     From the second call on,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2842.1">
      _client
     </span>
    </code>
    <span class="koboSpan" id="kobo.2843.1">
     is simply returned with no creation of new instances.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2844.1">
     This is such a common need that, in Python 3.8, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2845.1">
      functools
     </span>
    </code>
    <span class="koboSpan" id="kobo.2846.1">
     module added the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2847.1">
      cached_property
     </span>
    </code>
    <span class="koboSpan" id="kobo.2848.1">
     decorator.
    </span>
    <span class="koboSpan" id="kobo.2848.2">
     The beauty of using that, instead of our manual solution, is that if we need to refresh the client, we can simply delete the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2849.1">
      client
     </span>
    </code>
    <span class="koboSpan" id="kobo.2850.1">
     property, and the next time we call it, it will recreate a brand new
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2851.1">
      Client
     </span>
    </code>
    <span class="koboSpan" id="kobo.2852.1">
     for us.
    </span>
    <span class="koboSpan" id="kobo.2852.2">
     Let us see an example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2853.1"># oop/cached.property.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2854.1">from</span></span><span class="koboSpan" id="kobo.2855.1"> functools </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2856.1">import</span></span><span class="koboSpan" id="kobo.2857.1"> cached_property
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2858.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2859.1">CachedPropertyManager</span></span><span class="koboSpan" id="kobo.2860.1">:
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.2861.1">    @cached_property</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.2862.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2863.1">client</span></span><span class="koboSpan" id="kobo.2864.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2865.1">self</span></span><span class="koboSpan" id="kobo.2866.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2867.1">return</span></span><span class="koboSpan" id="kobo.2868.1"> Client()
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2869.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2870.1">perform_query</span></span><span class="koboSpan" id="kobo.2871.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2872.1">self, **kwargs</span></span><span class="koboSpan" id="kobo.2873.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2874.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.2875.1">self</span></span><span class="koboSpan" id="kobo.2876.1">.client.query(**kwargs)
manager = CachedPropertyManager()
manager.perform_query(object_id=</span><span class="hljs-number"><span class="koboSpan" id="kobo.2877.1">42</span></span><span class="koboSpan" id="kobo.2878.1">)
manager.perform_query(name_ilike="%Python%")
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2879.1">del</span></span><span class="koboSpan" id="kobo.2880.1"> manager.client  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2881.1"># This causes a new Client on next call</span></span><span class="koboSpan" id="kobo.2882.1">
manager.perform_query(age_gte=</span><span class="hljs-number"><span class="koboSpan" id="kobo.2883.1">18</span></span><span class="koboSpan" id="kobo.2884.1">)
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2885.1">
     Running this code gives the following result:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.2886.1">$ python cached.property.py
Setting up the client...                         </span><span class="koboSpan" id="kobo.2886.2"># New Client
Performing a query: {'object_id': 42}            # first query
Performing a query: {'name_ilike': '%Python%'}   # second query
Setting up the client...                         </span><span class="koboSpan" id="kobo.2886.3"># Another Client
Performing a query: {'age_gte': 18}              # Third query
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2887.1">
     As you
    </span>
    <a id="_idIndexMarker680">
    </a>
    <span class="koboSpan" id="kobo.2888.1">
     can see, it is only after we manually delete the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2889.1">
      manager.client
     </span>
    </code>
    <span class="koboSpan" id="kobo.2890.1">
     attribute that we get a new one, when
    </span>
    <a id="_idIndexMarker681">
    </a>
    <span class="koboSpan" id="kobo.2891.1">
     we invoke
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2892.1">
      manager.perform_query()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2893.1">
     again.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2894.1">
     Python 3.9 introduced a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2895.1">
      cache
     </span>
    </code>
    <span class="koboSpan" id="kobo.2896.1">
     decorator, which can be used in conjunction with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2897.1">
      property
     </span>
    </code>
    <span class="koboSpan" id="kobo.2898.1">
     decorator, to cover scenarios for which
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2899.1">
      cached_property
     </span>
    </code>
    <span class="koboSpan" id="kobo.2900.1">
     is not suitable.
    </span>
    <span class="koboSpan" id="kobo.2900.2">
     As always, we encourage you to read up on all the details in the official Python documentation and experiment.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-203">
    <span class="koboSpan" id="kobo.2901.1">
     Operator overloading
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2902.1">
     Python’s
    </span>
    <a id="_idIndexMarker682">
    </a>
    <span class="koboSpan" id="kobo.2903.1">
     approach to
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2904.1">
      operator overloading
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2905.1">
     is brilliant.
    </span>
    <span class="koboSpan" id="kobo.2905.2">
     To
    </span>
    <a id="_idIndexMarker683">
    </a>
    <span class="koboSpan" id="kobo.2906.1">
     overload an operator means giving it a meaning according to the context in which it is used.
    </span>
    <span class="koboSpan" id="kobo.2906.2">
     For example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2907.1">
      +
     </span>
    </code>
    <span class="koboSpan" id="kobo.2908.1">
     operator means addition when we deal with numbers but concatenation when we deal with sequences.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2909.1">
     When using operators, Python calls special methods behind the scenes.
    </span>
    <span class="koboSpan" id="kobo.2909.2">
     For example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2910.1">
      a[k]
     </span>
    </code>
    <span class="koboSpan" id="kobo.2911.1">
     call on a dictionary roughly translates to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2912.1">
      type(a).__getitem__(a, k)
     </span>
    </code>
    <span class="koboSpan" id="kobo.2913.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2913.2">
     We can override these special methods for our purposes.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2914.1">
     As an example, let us create a class that stores a string and evaluates to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2915.1">
      True
     </span>
    </code>
    <span class="koboSpan" id="kobo.2916.1">
     if
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2917.1">
      '42'
     </span>
    </code>
    <span class="koboSpan" id="kobo.2918.1">
     is part of that string, and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2919.1">
      False
     </span>
    </code>
    <span class="koboSpan" id="kobo.2920.1">
     otherwise.
    </span>
    <span class="koboSpan" id="kobo.2920.2">
     Also, let us give the class a length property that corresponds to the length of the stored string:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2921.1"># oop/operator.overloading.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2922.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2923.1">Weird</span></span><span class="koboSpan" id="kobo.2924.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2925.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2926.1">__init__</span></span><span class="koboSpan" id="kobo.2927.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2928.1">self, s</span></span><span class="koboSpan" id="kobo.2929.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2930.1">self</span></span><span class="koboSpan" id="kobo.2931.1">._s = s
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2932.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2933.1">__len__</span></span><span class="koboSpan" id="kobo.2934.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2935.1">self</span></span><span class="koboSpan" id="kobo.2936.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2937.1">return</span></span> <span class="hljs-built_in"><span class="koboSpan" id="kobo.2938.1">len</span></span><span class="koboSpan" id="kobo.2939.1">(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.2940.1">self</span></span><span class="koboSpan" id="kobo.2941.1">._s)
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2942.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2943.1">__bool__</span></span><span class="koboSpan" id="kobo.2944.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2945.1">self</span></span><span class="koboSpan" id="kobo.2946.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2947.1">return</span></span><span class="koboSpan" id="kobo.2948.1"> "</span><span class="hljs-number"><span class="koboSpan" id="kobo.2949.1">42</span></span><span class="koboSpan" id="kobo.2950.1">" </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2951.1">in</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.2952.1">self</span></span><span class="koboSpan" id="kobo.2953.1">._s
weird = Weird("Hello! </span><span class="koboSpan" id="kobo.2953.2">I am </span><span class="hljs-number"><span class="koboSpan" id="kobo.2954.1">9</span></span><span class="koboSpan" id="kobo.2955.1"> years old!")
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2956.1">print</span></span><span class="koboSpan" id="kobo.2957.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2958.1">len</span></span><span class="koboSpan" id="kobo.2959.1">(weird))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2960.1"># 24</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.2961.1">print</span></span><span class="koboSpan" id="kobo.2962.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2963.1">bool</span></span><span class="koboSpan" id="kobo.2964.1">(weird))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2965.1"># False</span></span><span class="koboSpan" id="kobo.2966.1">
weird2 = Weird("Hello! </span><span class="koboSpan" id="kobo.2966.2">I am </span><span class="hljs-number"><span class="koboSpan" id="kobo.2967.1">42</span></span><span class="koboSpan" id="kobo.2968.1"> years old!")
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2969.1">print</span></span><span class="koboSpan" id="kobo.2970.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2971.1">len</span></span><span class="koboSpan" id="kobo.2972.1">(weird2))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2973.1"># 25</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.2974.1">print</span></span><span class="koboSpan" id="kobo.2975.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2976.1">bool</span></span><span class="koboSpan" id="kobo.2977.1">(weird2))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2978.1"># True</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2979.1">
     For the
    </span>
    <a id="_idIndexMarker684">
    </a>
    <span class="koboSpan" id="kobo.2980.1">
     complete list of magic
    </span>
    <a id="_idIndexMarker685">
    </a>
    <span class="koboSpan" id="kobo.2981.1">
     methods that you can override to provide your custom implementation of operators for your classes, please refer to the Python data model in the official documentation.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-204">
    <span class="koboSpan" id="kobo.2982.1">
     Polymorphism—a brief overview
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2983.1">
     The
    </span>
    <a id="_idIndexMarker686">
    </a>
    <span class="koboSpan" id="kobo.2984.1">
     word
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2985.1">
      polymorphism
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2986.1">
     comes from
    </span>
    <a id="_idIndexMarker687">
    </a>
    <span class="koboSpan" id="kobo.2987.1">
     the Greek
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.2988.1">
      polys
     </span>
    </em>
    <span class="koboSpan" id="kobo.2989.1">
     (many, much) and
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.2990.1">
      morphē
     </span>
    </em>
    <span class="koboSpan" id="kobo.2991.1">
     (form, shape), and its meaning is the provision of a single interface for entities of different types.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2992.1">
     In our car example, we call
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2993.1">
      engine.start()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2994.1">
     , regardless of what kind of engine it is.
    </span>
    <span class="koboSpan" id="kobo.2994.2">
     As long as it exposes the start method, we can call it.
    </span>
    <span class="koboSpan" id="kobo.2994.3">
     That’s polymorphism in action.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2995.1">
     In other languages, such as Java, in order to give a function the ability to accept different types and call a method on them, those types need to be coded in such a way that they share an interface.
    </span>
    <span class="koboSpan" id="kobo.2995.2">
     In this way, the compiler knows that the method will be available regardless of the type of the object the function is fed (as long as it extends the specific interface, of course).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2996.1">
     In Python, things are different.
    </span>
    <span class="koboSpan" id="kobo.2996.2">
     Polymorphism is implicit, and nothing prevents you from calling a method of an object; therefore, technically, there is no need to implement interfaces or other patterns.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2997.1">
     There is a special kind of polymorphism called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2998.1">
      ad hoc polymorphism
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2999.1">
     , which is what we saw in the last section on operator
    </span>
    <a id="_idIndexMarker688">
    </a>
    <span class="koboSpan" id="kobo.3000.1">
     overloading.
    </span>
    <span class="koboSpan" id="kobo.3000.2">
     This is the ability of an
    </span>
    <a id="_idIndexMarker689">
    </a>
    <span class="koboSpan" id="kobo.3001.1">
     operator to change shape according to the type of data it is applied to.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3002.1">
     Polymorphism also
    </span>
    <a id="_idIndexMarker690">
    </a>
    <span class="koboSpan" id="kobo.3003.1">
     allows Python programmers to simply use the interface (methods and properties) exposed from an object, rather than having to check which class it was instantiated from.
    </span>
    <span class="koboSpan" id="kobo.3003.2">
     This allows the code to be more compact and feel more natural.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3004.1">
     We cannot spend too much time on polymorphism, but we encourage you to check it out by yourself; it will expand your understanding of OOP.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-205">
    <span class="koboSpan" id="kobo.3005.1">
     Data classes
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.3006.1">
     Before
    </span>
    <a id="_idIndexMarker691">
    </a>
    <span class="koboSpan" id="kobo.3007.1">
     we leave the OOP realm, there is one
    </span>
    <a id="_idIndexMarker692">
    </a>
    <span class="koboSpan" id="kobo.3008.1">
     last thing we want to mention:
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.3009.1">
      data classes
     </span>
    </strong>
    <span class="koboSpan" id="kobo.3010.1">
     .
    </span>
    <span class="koboSpan" id="kobo.3010.2">
     Introduced in Python 3.7 by PEP 557 (
    </span>
    <a href="https://peps.python.org/pep-0557/">
     <span class="url">
      <span class="koboSpan" id="kobo.3011.1">
       https://peps.python.org/pep-0557/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.3012.1">
     ), they can be described as
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.3013.1">
      mutable named tuples with defaults
     </span>
    </em>
    <span class="koboSpan" id="kobo.3014.1">
     .
    </span>
    <span class="koboSpan" id="kobo.3014.2">
     You can brush up on named tuples in
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.3015.1">
      Chapter 2
     </span>
    </em>
    <span class="koboSpan" id="kobo.3016.1">
     ,
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.3017.1">
      Built-In Data Types
     </span>
    </em>
    <span class="koboSpan" id="kobo.3018.1">
     .
    </span>
    <span class="koboSpan" id="kobo.3018.2">
     Let us dive straight into an example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.3019.1"># oop/dataclass.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.3020.1">from</span></span><span class="koboSpan" id="kobo.3021.1"> dataclasses </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3022.1">import</span></span><span class="koboSpan" id="kobo.3023.1"> dataclass
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.3024.1">@dataclass</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.3025.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3026.1">Body</span></span><span class="koboSpan" id="kobo.3027.1">:
    """Class to represent a physical body."""
    </span><span class="koboSpan" id="kobo.3027.2">name: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.3028.1">str</span></span><span class="koboSpan" id="kobo.3029.1">
    mass: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.3030.1">float</span></span><span class="koboSpan" id="kobo.3031.1"> = </span><span class="hljs-number"><span class="koboSpan" id="kobo.3032.1">0.0</span></span>  <span class="hljs-comment"><span class="koboSpan" id="kobo.3033.1"># Kg</span></span><span class="koboSpan" id="kobo.3034.1">
    speed: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.3035.1">float</span></span><span class="koboSpan" id="kobo.3036.1"> = </span><span class="hljs-number"><span class="koboSpan" id="kobo.3037.1">1.0</span></span>  <span class="hljs-comment"><span class="koboSpan" id="kobo.3038.1"># m/s</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.3039.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3040.1">kinetic_energy</span></span><span class="koboSpan" id="kobo.3041.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.3042.1">self</span></span><span class="koboSpan" id="kobo.3043.1">) -&gt; </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.3044.1">float</span></span><span class="koboSpan" id="kobo.3045.1">:
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3046.1">return</span></span><span class="koboSpan" id="kobo.3047.1"> (</span><span class="hljs-variable"><span class="koboSpan" id="kobo.3048.1">self</span></span><span class="koboSpan" id="kobo.3049.1">.mass * </span><span class="hljs-variable"><span class="koboSpan" id="kobo.3050.1">self</span></span><span class="koboSpan" id="kobo.3051.1">.speed**</span><span class="hljs-number"><span class="koboSpan" id="kobo.3052.1">2</span></span><span class="koboSpan" id="kobo.3053.1">) / </span><span class="hljs-number"><span class="koboSpan" id="kobo.3054.1">2</span></span><span class="koboSpan" id="kobo.3055.1">
body = Body("Ball", </span><span class="hljs-number"><span class="koboSpan" id="kobo.3056.1">19</span></span><span class="koboSpan" id="kobo.3057.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.3058.1">3.1415</span></span><span class="koboSpan" id="kobo.3059.1">)
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.3060.1">print</span></span><span class="koboSpan" id="kobo.3061.1">(body.kinetic_energy())  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.3062.1"># 93.755711375 Joule</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.3063.1">print</span></span><span class="koboSpan" id="kobo.3064.1">(body)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.3065.1"># Body(name='Ball', mass=19, speed=3.1415)</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.3066.1">
     In the previous code, we created a class to represent a physical body, with one method that allows us to calculate its kinetic energy (using the formula
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.3067.1">
      E
     </span>
    </em>
    <sub class="subscript-italic" style="font-style: italic;">
     <span class="koboSpan" id="kobo.3068.1">
      k
     </span>
    </sub>
    <em class="italic">
     <span class="koboSpan" id="kobo.3069.1">
      =½mv
     </span>
    </em>
    <sup class="superscript-italic" style="font-style: italic;">
     <span class="koboSpan" id="kobo.3070.1">
      2
     </span>
    </sup>
    <span class="koboSpan" id="kobo.3071.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.3071.2">
     Notice that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3072.1">
      name
     </span>
    </code>
    <span class="koboSpan" id="kobo.3073.1">
     is supposed to be a string, while
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3074.1">
      mass
     </span>
    </code>
    <span class="koboSpan" id="kobo.3075.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3076.1">
      speed
     </span>
    </code>
    <span class="koboSpan" id="kobo.3077.1">
     are both floats, and both are given a default value.
    </span>
    <span class="koboSpan" id="kobo.3077.2">
     It is also interesting that we didn’t have to write any
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3078.1">
      __init__()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3079.1">
     method; it is done for
    </span>
    <a id="_idIndexMarker693">
    </a>
    <span class="koboSpan" id="kobo.3080.1">
     us by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3081.1">
      dataclass
     </span>
    </code>
    <span class="koboSpan" id="kobo.3082.1">
     decorator, along with methods for comparison and to produce the string representation of the object (implicitly called on the last line by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3083.1">
      print
     </span>
    </code>
    <span class="koboSpan" id="kobo.3084.1">
     ).
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.3085.1">
      Another thing to notice is how
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3086.1">
       name
      </span>
     </code>
     <span class="koboSpan" id="kobo.3087.1">
      ,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3088.1">
       mass
      </span>
     </code>
     <span class="koboSpan" id="kobo.3089.1">
      , and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3090.1">
       speed
      </span>
     </code>
     <span class="koboSpan" id="kobo.3091.1">
      are defined.
     </span>
     <span class="koboSpan" id="kobo.3091.2">
      This technique is called
     </span>
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.3092.1">
       type hinting
      </span>
     </strong>
     <span class="koboSpan" id="kobo.3093.1">
      and
     </span>
     <a id="_idIndexMarker694">
     </a>
     <span class="koboSpan" id="kobo.3094.1">
      will be the subject of
     </span>
     <em class="chapterRef">
      <span class="koboSpan" id="kobo.3095.1">
       Chapter 12
      </span>
     </em>
     <span class="koboSpan" id="kobo.3096.1">
      ,
     </span>
     <em class="chapterRef">
      <span class="koboSpan" id="kobo.3097.1">
       Introduction to Type Hinting
      </span>
     </em>
     <span class="koboSpan" id="kobo.3098.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.3099.1">
     You can read all the specifications in PEP 557 if you are curious, but for now, just remember that data classes might offer a nicer, slightly more powerful alternative to named tuples, if you need it.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-206">
    <span class="koboSpan" id="kobo.3100.1">
     Writing a custom iterator
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.3101.1">
     Now, we
    </span>
    <a id="_idIndexMarker695">
    </a>
    <span class="koboSpan" id="kobo.3102.1">
     have all the tools to appreciate how we can write our own custom iterator.
    </span>
    <span class="koboSpan" id="kobo.3102.2">
     Let us first define what iterable and iterator mean:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.3103.1">
       Iterable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.3104.1">
      : An
     </span>
     <a id="_idIndexMarker696">
     </a>
     <span class="koboSpan" id="kobo.3105.1">
      object is said to be iterable if it can return its members one at a time.
     </span>
     <span class="koboSpan" id="kobo.3105.2">
      Lists, tuples, strings, and dictionaries are all iterables.
     </span>
     <span class="koboSpan" id="kobo.3105.3">
      Custom objects that define either of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3106.1">
       __iter__()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3107.1">
      or
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3108.1">
       __getitem__()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3109.1">
      methods are also iterables.
     </span>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.3110.1">
       Iterator
      </span>
     </strong>
     <span class="koboSpan" id="kobo.3111.1">
      : An object is
     </span>
     <a id="_idIndexMarker697">
     </a>
     <span class="koboSpan" id="kobo.3112.1">
      said to be an iterator if it represents a stream of data.
     </span>
     <span class="koboSpan" id="kobo.3112.2">
      A custom iterator is required to provide an implementation for the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3113.1">
       __iter__()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3114.1">
      method that returns the object itself, as well as an implementation for the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3115.1">
       __next__()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3116.1">
      method that returns the next item of the data stream until the stream is exhausted, at which point all successive calls to
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3117.1">
       __next__()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3118.1">
      simply raise a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3119.1">
       StopIteration
      </span>
     </code>
     <span class="koboSpan" id="kobo.3120.1">
      exception.
     </span>
     <span class="koboSpan" id="kobo.3120.2">
      Built-in functions, such as
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3121.1">
       iter()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3122.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3123.1">
       next()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3124.1">
      , are mapped to call the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3125.1">
       __iter__()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3126.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3127.1">
       __next__()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3128.1">
      methods on an object, behind the scenes.
     </span>
    </li>
   </ul>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.3129.1">
      Exceptions will be the subject of
     </span>
     <em class="chapterRef">
      <span class="koboSpan" id="kobo.3130.1">
       Chapter 7
      </span>
     </em>
     <span class="koboSpan" id="kobo.3131.1">
      ,
     </span>
     <em class="chapterRef">
      <span class="koboSpan" id="kobo.3132.1">
       Exceptions and Context Managers
      </span>
     </em>
     <span class="koboSpan" id="kobo.3133.1">
      .
     </span>
     <span class="koboSpan" id="kobo.3133.2">
      They can represent errors during code execution but are also used to regulate the flow of execution, and Python relies on them for mechanisms such as the iteration protocol.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.3134.1">
     Let us write an iterator that returns all the odd characters from a string first, and then the even ones:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.3135.1"># iterators/iterator.py</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.3136.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3137.1">OddEven</span></span><span class="koboSpan" id="kobo.3138.1">:
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3139.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3140.1">__init__</span></span><span class="koboSpan" id="kobo.3141.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.3142.1">self, data</span></span><span class="koboSpan" id="kobo.3143.1">):
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.3144.1">self</span></span><span class="koboSpan" id="kobo.3145.1">._data = data
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.3146.1">self</span></span><span class="koboSpan" id="kobo.3147.1">.indexes = </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.3148.1">list</span></span><span class="koboSpan" id="kobo.3149.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.3150.1">range</span></span><span class="koboSpan" id="kobo.3151.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.3152.1">0</span></span><span class="koboSpan" id="kobo.3153.1">, </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.3154.1">len</span></span><span class="koboSpan" id="kobo.3155.1">(data), </span><span class="hljs-number"><span class="koboSpan" id="kobo.3156.1">2</span></span><span class="koboSpan" id="kobo.3157.1">)) + </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.3158.1">list</span></span><span class="koboSpan" id="kobo.3159.1">(
            </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.3160.1">range</span></span><span class="koboSpan" id="kobo.3161.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.3162.1">1</span></span><span class="koboSpan" id="kobo.3163.1">, </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.3164.1">len</span></span><span class="koboSpan" id="kobo.3165.1">(data), </span><span class="hljs-number"><span class="koboSpan" id="kobo.3166.1">2</span></span><span class="koboSpan" id="kobo.3167.1">)
        )
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3168.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3169.1">__iter__</span></span><span class="koboSpan" id="kobo.3170.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.3171.1">self</span></span><span class="koboSpan" id="kobo.3172.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3173.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.3174.1">self</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.3175.1">def</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3176.1">__next__</span></span><span class="koboSpan" id="kobo.3177.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.3178.1">self</span></span><span class="koboSpan" id="kobo.3179.1">):
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3180.1">if</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.3181.1">self</span></span><span class="koboSpan" id="kobo.3182.1">.indexes:
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3183.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.3184.1">self</span></span><span class="koboSpan" id="kobo.3185.1">._data[</span><span class="hljs-variable"><span class="koboSpan" id="kobo.3186.1">self</span></span><span class="koboSpan" id="kobo.3187.1">.indexes.pop(</span><span class="hljs-number"><span class="koboSpan" id="kobo.3188.1">0</span></span><span class="koboSpan" id="kobo.3189.1">)]
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3190.1">raise</span></span><span class="koboSpan" id="kobo.3191.1"> StopIteration
oddeven = OddEven("0123456789")
</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.3192.1">print</span></span><span class="koboSpan" id="kobo.3193.1">("".join(c </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3194.1">for</span></span><span class="koboSpan" id="kobo.3195.1"> c </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3196.1">in</span></span><span class="koboSpan" id="kobo.3197.1"> oddeven))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.3198.1"># 0246813579</span></span><span class="koboSpan" id="kobo.3199.1">
oddeven = OddEven("ABCD")  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.3200.1"># or manually...</span></span><span class="koboSpan" id="kobo.3201.1">
it = </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.3202.1">iter</span></span><span class="koboSpan" id="kobo.3203.1">(oddeven)  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.3204.1"># this calls oddeven.__iter__ internally</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.3205.1">print</span></span><span class="koboSpan" id="kobo.3206.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.3207.1">next</span></span><span class="koboSpan" id="kobo.3208.1">(it))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.3209.1"># A</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.3210.1">print</span></span><span class="koboSpan" id="kobo.3211.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.3212.1">next</span></span><span class="koboSpan" id="kobo.3213.1">(it))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.3214.1"># C</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.3215.1">print</span></span><span class="koboSpan" id="kobo.3216.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.3217.1">next</span></span><span class="koboSpan" id="kobo.3218.1">(it))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.3219.1"># B</span></span>
<span class="hljs-built_in"><span class="koboSpan" id="kobo.3220.1">print</span></span><span class="koboSpan" id="kobo.3221.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.3222.1">next</span></span><span class="koboSpan" id="kobo.3223.1">(it))  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.3224.1"># D</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.3225.1">
     So, we
    </span>
    <a id="_idIndexMarker698">
    </a>
    <span class="koboSpan" id="kobo.3226.1">
     provide an implementation for
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3227.1">
      __iter__()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3228.1">
     that returns the object itself, and one for
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3229.1">
      __next__()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3230.1">
     .
    </span>
    <span class="koboSpan" id="kobo.3230.2">
     Let us go through it.
    </span>
    <span class="koboSpan" id="kobo.3230.3">
     What needs to happen is the return of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3231.1">
      _data[0]
     </span>
    </code>
    <span class="koboSpan" id="kobo.3232.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3233.1">
      _data[2]
     </span>
    </code>
    <span class="koboSpan" id="kobo.3234.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3235.1">
      _data[4]
     </span>
    </code>
    <span class="koboSpan" id="kobo.3236.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3237.1">
      ...
     </span>
    </code>
    <span class="koboSpan" id="kobo.3238.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3239.1">
      _data[1]
     </span>
    </code>
    <span class="koboSpan" id="kobo.3240.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3241.1">
      _data[3]
     </span>
    </code>
    <span class="koboSpan" id="kobo.3242.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3243.1">
      _data[5]
     </span>
    </code>
    <span class="koboSpan" id="kobo.3244.1">
     , and so on until we have returned every item in the data.
    </span>
    <span class="koboSpan" id="kobo.3244.2">
     To do that, we prepare a list of indexes, such as [0, 2, 4, 6, ..., 1, 3, 5, ...], and while there is at least one element in the list, we pop the first one out and return the corresponding element from the data list, thereby achieving our goal.
    </span>
    <span class="koboSpan" id="kobo.3244.3">
     When
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3245.1">
      indexes
     </span>
    </code>
    <span class="koboSpan" id="kobo.3246.1">
     is empty, we raise
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3247.1">
      StopIteration
     </span>
    </code>
    <span class="koboSpan" id="kobo.3248.1">
     , as required by the iterator protocol.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3249.1">
     There are other ways to achieve the same result, so go ahead and try to code a different one yourself.
    </span>
    <span class="koboSpan" id="kobo.3249.2">
     Make sure that the end result works for all edge cases, empty sequences, and sequences of lengths of 1, 2, and so on.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-207">
    <span class="koboSpan" id="kobo.3250.1">
     Summary
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.3251.1">
     In this chapter, we looked at decorators, discovered their purpose, and covered a few examples, using one or more at the same time.
    </span>
    <span class="koboSpan" id="kobo.3251.2">
     We also saw decorators that take arguments, which are usually used as decorator factories.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3252.1">
     We have scratched the surface of OOP in Python.
    </span>
    <span class="koboSpan" id="kobo.3252.2">
     We covered all the basics, so you should now be able to understand the code that will come in future chapters.
    </span>
    <span class="koboSpan" id="kobo.3252.3">
     We talked about all kinds of methods and attributes that you can write in a class; we explored inheritance versus composition, method overriding, properties, operator overloading, and polymorphism.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3253.1">
     Finally, we very briefly touched on iterators, which should enrich your understanding of generators.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3254.1">
     In the next chapter, we are going to learn about exceptions and context managers.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-208">
    <span class="koboSpan" id="kobo.3255.1">
     Join our community on Discord
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.3256.1">
     Join our community’s Discord space for discussions with the authors and other readers:
    </span>
   </p>
   <p class="normal">
    <a href="Chapter_6.xhtml">
     <span class="url">
      <span class="koboSpan" id="kobo.3257.1">
       https://discord.com/invite/uaKmaz7FEC
      </span>
     </span>
    </a>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3258.1">
     <img alt="img" src="../Images/QR_Code119001106417026468.png"/>
    </span>
   </p>
  </div>
 </body></html>