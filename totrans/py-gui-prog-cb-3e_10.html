<html><head></head><body><div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Building GUIs with PyQt5</h1>
                </header>
            
            <article>
                
<p class="mce-root"><span>In this</span> chapter<span>, we will introduce another Python GUI toolkit, named PyQt5, which is truly excellent. PyQt5 has similar capabilities to <kbd>tkinter</kbd> but comes with a very nice Visual Designer tool that lets us drag and drop widgets onto a form. We will also use another tool that converts the Designer <kbd>.ui</kbd> code into Python code.</span></p>
<p>After visually designing our GUI in the Designer and then converting the code into Python code, we will continue using pure Python to add functionality to our widgets. First, we will <span>install PyQt5 and the Designer before writing</span> a simple PyQt5 GUI without the Designer. After that, we will visually design our GUI.</p>
<p>Knowing how to use PyQt5, and the Visual Designer tool and how to convert <kbd>.ui</kbd> into <kbd>.py</kbd> code will add great skills to your Python GUI development toolbox. From this, you will learn how to create powerful and complex GUIs, as well as how to visually design the UI and then decouple the functionality from the design using a modular approach to software development.</p>
<p>This also gives you the opportunity to compare the different GUI frameworks we have been showing you throughout this book, which will ultimately lead to you choosing one to explore in more depth.</p>
<div class="packt_tip">I have created two Packt video courses that focus very deeply on Python GUI programming with <kbd>tkinter</kbd> and <strong>PyQt5</strong>. You can find them on the Packt website. I will also provide links to them at the end of this chapter.</div>
<p>The following screenshot provides an overview of the Python modules you will need for this chapter:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/9e36a06f-ed01-492a-875d-037004f8bee0.png" style="width:17.75em;height:24.25em;" width="266" height="363"/></p>
<p>We will be covering the following recipes:</p>
<ul>
<li class="mce-root">Installing PyQt5</li>
<li>Installing the PyQt5 Designer tool</li>
<li>Writing our first PyQt5 GUI</li>
<li>Changing the title of the GUI</li>
<li>Refactoring our code with object-oriented programming</li>
<li>Inheriting from QMainWindow</li>
<li>Adding a status bar widget</li>
<li>Adding a menu bar widget</li>
<li>Starting the PyQt5 Designer tool</li>
<li>Previewing the form within the PyQt5 Designer</li>
<li>Saving the PyQt5 Designer form</li>
<li>Converting Designer <kbd>.ui</kbd> code into <kbd>.py</kbd> code</li>
<li>Understanding the converted <span>Designer</span> code</li>
<li>Building a modular GUI design</li>
<li>Adding another menu item to our menu bar</li>
<li>Connecting functionality to the Exit menu item</li>
<li>Adding a Tab Widget via the Designer</li>
<li>Using layouts in the Designer</li>
<li>Adding buttons and labels in the Designer</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Installing PyQt5</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will install the PyQt5 GUI framework. We will be using Python's <kbd>pip</kbd> tool to download the PyQt5 wheel format installer.</p>
<p>You can find the official documentation at the following link: <a href="https://www.riverbankcomputing.com/static/Docs/PyQt5/installation.html">https://www.riverbankcomputing.com/static/Docs/PyQt5/installation.html</a>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>You need to have Python's <kbd>pip</kbd> tool installed on your computer. You probably already have it.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Let's see how we can install PyQt5 using Python's <kbd>pip</kbd> tool:</p>
<ol>
<li>Open a Windows PowerShell window or Command Prompt.</li>
<li>Type in the <kbd>pip install pyqt5</kbd> command.</li>
<li>Press the <em>Enter</em> key.</li>
<li>Verify the installation by running <kbd>pip list</kbd>.</li>
</ol>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In <em>step 1</em>, we open a PowerShell window, and in <em>step 2</em>, we use Python's <kbd>pip</kbd> tool. After pressing the <em>Enter</em> key to run the command in <em>step 3</em>, the installation will start and run to completion. You will see output similar to the following:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/f8a36733-35ee-4a68-b761-b1958e85d981.jpg" width="922" height="285"/></p>
<p>In <em>step 4</em>, we use <kbd>pip</kbd> again to verify that we have <span>installed</span> PyQt5 successfully. The output will look similar to the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/75ac526b-95ad-4022-855a-78156cfa0b59.jpg" style="width:14.75em;height:19.92em;" width="290" height="392"/></p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>You may see more packages installed on your computer. The important thing to check is that the <span>PyQt5 package is listed. The version number that's been installed is listed to the right of the package's name.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Installing the PyQt5 Designer tool</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will install the PyQt5 Designer tool. We will do this by using Python's <kbd>pip</kbd> tool. The steps are very similar to the previous recipe's, where we installed PyQt5.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>You need to have Python's <kbd>pip</kbd> tool installed on your computer.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Let's see how we can install the PyQt5 Designer using Python's <kbd>pip</kbd> tool. Note that the package includes more than just the Designer tool:</p>
<ol>
<li>Open a Windows PowerShell window or Command Prompt.</li>
<li>Type in the following command:</li>
</ol>
<pre style="padding-left: 60px"><strong>pip install pyqt5-tools</strong></pre>
<ol start="3">
<li>Press the <em>Enter</em> key.</li>
<li>Verify the installation by running the following command:</li>
</ol>
<pre style="padding-left: 60px"><strong>pip list</strong></pre>
<ol start="5">
<li>Locate the <kbd>Designer.exe</kbd> file on your hard drive.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In <em>step 1</em>, we open a PowerShell window and in <em>step 2</em>, we use Python's <kbd>pip</kbd> tool. After pressing the <em>Enter</em> key to run the command in <em>step 3</em>, the installation will start and run to completion. You will see output similar to the following:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/87d1907b-1fa0-4b95-b857-f39f5c09cdf3.jpg" width="1223" height="664"/></p>
<div class="packt_infobox">Please note that, in the preceding screenshot, the installation ran into an error. I don't know why, but sometimes installations do run into errors. I simply reran the installation, and this time it ran without any errors. The necessary tools, including the Designer, were installed successfully.</div>
<p><em>Step 4</em> is the exact same step as in the previous recipe, and the output is exactly the same. Please refer to the output screenshot of the <em>Installing PyQt5</em> recipe for more information.</p>
<p>In <em>step 5</em>, we want to find the <kbd>Designer.exe</kbd> file, which is the Visual Designer tool we will use in later recipes. After finding it, you will want to make a shortcut to it on your desktop.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>Here is a screenshot of where <kbd>Designer.exe</kbd> is installed on my computer:</p>
<p class="CDPAlignCenter CDPAlign"><br/>
<img src="Images/8bd875d4-bcfc-4af3-818e-c8743a4abe30.png" width="392" height="81"/></p>
<p>Your location might be different, but this gives you an idea of where to look for the tool.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Writing our first PyQt5 GUI</h1>
                </header>
            
            <article>
                
<p><span>In this recipe, we will be writing our first PyQt5 GUI. We will be using PyQt5 directly without using the Designer.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>You need to have <span>PyQt5 installed. See the <em>Installing PyQt5</em> recipe to find out how to install PyQt5. Use your favorite Python editor to write the code. If you are not familiar with modern IDEs such as Eclipse, PyCharm, and so on, you can use the IDLE editor, which ships with Python.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Let's look at how we can build our first GUI with PyQt5:</p>
<ol>
<li>Open your favorite Python editor.</li>
<li>Create a new Python module and save it as <kbd>First_GUI_PyQt5.py</kbd>.</li>
<li>Start by typing in the following import statements:</li>
</ol>
<pre style="padding-left: 60px">import sys <br/>from PyQt5.QtWidgets import QApplication, QWidget</pre>
<ol start="4">
<li>Add the following four lines of code below the import statements:</li>
</ol>
<pre style="padding-left: 60px">app = QApplication(sys.argv)<br/>gui = QWidget() <br/>gui.show()<br/>sys.exit(app.exec_())</pre>
<ol start="5">
<li>Run the preceding code. Maximize, minimize, and resize the resultant GUI. Click the <span class="packt_screen">Χ</span> symbol in the top-right corner to close the application:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/0bf4df51-979f-466a-8144-bca6a98b488e.png" style="width:17.42em;height:5.00em;" width="227" height="65"/></p>
<p>Now, let's go behind the scenes to understand how this works.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In <em>steps 1</em> and <em>2</em>, we <span>create a new Python module. In <em>step 3</em>, we write some import statements.</span></p>
<p>We import <kbd>sys</kbd> so that we can pass command-line arguments into our GUI.</p>
<p>From the PyQt5 package, we import the <kbd>QApplication</kbd> and <kbd>QWidget</kbd> classes, both of which reside within the <kbd>QtWidgets</kbd> module.</p>
<p>We create an instance of the <span><kbd>QApplication</kbd> class, passing in <kbd>sys.argv</kbd> so that we can pass in additional command-line arguments. We save this instance in the <kbd>app</kbd> variable. This will create our application.</span></p>
<p>Then, we create an instance of the <span><kbd>QWidget</kbd> class, which becomes our GUI. We save this instance in a local variable named <kbd>gui</kbd>.</span></p>
<p>Next, we call the <kbd>show</kbd> method on our <kbd>gui</kbd> class instance to make the GUI visible.</p>
<p>After that, we call the <kbd>exec_</kbd> method on our application class instance, which executes our application. We wrap the call into <kbd>sys.exit</kbd> in order to catch any exceptions that might occur. If an <span>exception</span> occurs, this will make sure that our Python application exits cleanly and does not crash.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Changing the title of the GUI</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will change the title of the GUI we created in the previous recipe.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p> </p>
<p>We will be using the code from the previous recipe, so either type it into a module of your own or download it from the Packt website for this book.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>We <span>will</span> <span>enhance the GUI from the previous recipe by changing the title of this GUI. Let's get started:</span></p>
<ol>
<li>Open <span><kbd>First_GUI_PyQt5.py</kbd> and save it as <kbd>GUI_PyQt5_title.py</kbd></span>.</li>
<li>Add the following line of code into the middle of the existing code:</li>
</ol>
<pre style="padding-left: 60px">gui.setWindowTitle('PyQt5 GUI')</pre>
<ol start="3">
<li>Run the code and note the new title:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/93a3ebf1-acd2-4497-a95f-ac60e51b7839.png" width="251" height="58"/></p>
<p><span>Now, let's go behind the scenes to understand how this works.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In <em>step 1</em>, we <span>are reusing the code from the previous recipe by saving it under a new name.</span></p>
<p>In <em>step 2</em>, we are calling the <kbd>setWindowTitle</kbd> method on our <kbd>gui</kbd> instance, passing it as a string. This string becomes our new title when we run the application.</p>
<p class="mce-root"/>
<p>The complete code now looks like this:</p>
<pre>import sys <br/>from PyQt5.QtWidgets import QApplication, QWidget<br/><br/>app = QApplication(sys.argv)<br/>gui = QWidget() <br/>gui.setWindowTitle('PyQt5 GUI')           # &lt;-- method call in the middle<br/>gui.show()<br/>sys.exit(app.exec_())</pre>
<p>In <em>step 3</em>, we run the code and see that our window title now displays <span class="packt_screen">PyQt5 GUI</span> instead of <span class="packt_screen">python</span>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p>One very important thing to note in the preceding code is the place where we are calling <kbd>setWindowTitle</kbd>, because this shows us the typical code structure every PyQt5 application follows.</p>
<p>After the import statements, at the top, we create a PyQt5 application. At the bottom, we execute the application. All of the functionality we add to the GUI resides in between the top and bottom pieces of code.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Refactoring our code into object-oriented programming</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will refactor our code into <strong>object-oriented programming</strong> (<strong>OOP</strong>) using classes. This is in preparation for the PyQt5 Designer code and the recipes we will be building later in this chapter. In this recipe, the resultant output of the GUI will look the same, but the code will be different.</p>
<p>We will build a class that inherits from <kbd>QWidget</kbd>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>We will be refactoring the code from the previous recipe, so make sure you understand that code.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>We <span>will turn our previous, procedural code into object-oriented code. Here is how we do this:</span></p>
<ol>
<li>Create a new module and name it <kbd>GUI_PyQt5_refactored_OOP.py</kbd>.</li>
<li>Start by writing the same import statements:</li>
</ol>
<pre style="padding-left: 60px">import sys<br/>from PyQt5.QtWidgets import QApplication, QWidget</pre>
<ol start="3">
<li>Create a class that inherits from <kbd>QWidget</kbd>:</li>
</ol>
<pre style="padding-left: 60px">class GUI(QWidget): <br/>    def __init__(self): <br/>        super().__init__()     <br/>        # initialize super class, which creates the Window <br/>        self.initUI() <br/><br/>    def initUI(self):<br/>        self.setWindowTitle('PyQt5 GUI')    </pre>
<ol start="4">
<li>Add a Python self-testing section under the preceding code:</li>
</ol>
<pre style="padding-left: 60px">if __name__ == '__main__': <br/>    app = QApplication(sys.argv)        <br/>    gui = GUI() <br/>    gui.show() <br/>    sys.exit(app.exec_()) </pre>
<ol start="5">
<li>Run the application. The resultant GUI will be identical to the one from the previous recipe.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In <em>step 1</em>, we <span>are creating a new module, while in <em>step 2</em>, we are adding the same import statements we used in the previous recipes in this chapter.</span></p>
<p>In <em>step 3</em>, we are creating a new class that inherits from <kbd>QWidget</kbd>. We call <kbd>super</kbd> to initialize the parent, which, in turn, creates our GUI.</p>
<p>Then, we create and call a class method that sets the window title.</p>
<p>In <em>step 4</em>, we are using Python's self-testing capabilities to create the PyQt5 application and the GUI, and then we are executing the code.</p>
<p>Running this code creates the same GUI as in the previous recipe, but our code is now using OOP.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Inheriting from QMainWindow</h1>
                </header>
            
            <article>
                
<p>Now that we have seen how to inherit from PyQt5 classes, in this recipe, we will inherit from <kbd>QMainWindow</kbd>. This gives us more options when it comes to designing our GUI compared to inheriting from <kbd>QWidgets</kbd>. In addition to setting the GUI window title, we will also give it a certain size.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p><span>Read through the previous recipe so that you understand the code we are writing here.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>We <span>will inherit from</span> <span><kbd>QMainWindow</kbd> and specify the size of the GUI. Let's get started:</span></p>
<ol>
<li>Create a new module and name it <kbd>GUI_PyQt5_QMainWindow.py</kbd>.</li>
<li>Write the following import statements:</li>
</ol>
<pre style="padding-left: 60px">import sys<br/>from PyQt5.QtWidgets import QApplication, QMainWindow </pre>
<ol start="3">
<li>Create the following class:</li>
</ol>
<pre style="padding-left: 60px">class GUI(QMainWindow): <br/>    def __init__(self): <br/>        super().__init__() <br/>        self.initUI() <br/> <br/>    def initUI(self): <br/>        self.setWindowTitle('PyQt5 GUI') <br/>        self.resize(400, 300)</pre>
<ol start="4">
<li>Add the same <kbd>'__main__'</kbd> code that was shown in the previous recipe.</li>
<li>Run the code. The resultant GUI will look the same as it did in the previous two recipes, but it will be smaller.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In <em>step 1</em>, we <span>are creating a new module, while in <em>step 2</em>, we are writing the import statements. This time, however, we are not importing <kbd>QWidgets</kbd> – we are importing <kbd>QMainWindow</kbd> instead. In <em>step 3</em>, we are creating a new class that inherits from <kbd>QMainWindow</kbd>. As before, we set the title in the method we are calling. However, in addition to setting the title, we are also giving our GUI a specific size. We do this by calling the <kbd>resize</kbd> method, passing in the width and height.</span></p>
<p><em>Steps 4</em> and <em>5</em> are the same as they were in the previous recipe, but the resultant GUI is now the size we specified in the <kbd>resize</kbd> method.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Adding a status bar widget</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will start to add widgets to the GUI we created previously. We will start by adding a status bar. This is a widget that comes built in with PyQt5, so all we have to do is use it.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>We will extend the GUI from the previous recipe, so read the previous recipe in order to understand the code we are writing here.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Let's get started:</p>
<ol>
<li>Create a new module and name it <kbd><span>GUI_PyQt5_statusbar</span>.py</kbd>.</li>
<li>Write the exact same code from the previous recipe, which can be found in <kbd><span>GUI_PyQt5_QMainWindow.py</span></kbd><span>.</span></li>
</ol>
<p> </p>
<ol start="3">
<li>Create a new method, <kbd>add_widgets</kbd>, within the class and call it, as shown in the following code block:</li>
</ol>
<pre style="padding-left: 60px">Def initUI(self): <br/>    self.setWindowTitle('PyQt5 GUI') <br/>    self.resize(400, 300) <br/>    self.add_widgets()                # &lt;== call new method here<br/> <br/>def add_widgets(self):<br/>    self.statusBar().showMessage('Text in statusbar')</pre>
<ol start="4">
<li>Run the preceding code and note the new status bar at the bottom of the GUI:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/934b13c7-e45d-4361-8280-332a6c1a5f0a.png" style="width:17.75em;height:7.00em;" width="259" height="102"/></p>
<p><span>Now, let's go behind the scenes to understand how this works.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In <em>step 1</em>, we <span>are creating a new module, while in <em>step 2</em>, we are reusing the code from the previous recipe. In <em>step 3</em>, we create a new method, <kbd>add_widget</kbd>, in which we are creating the PyQt5 built-in status bar. We are using <kbd>self</kbd> to access this widget since the <kbd>statusBar</kbd> widget is part of <kbd>QMainWindow</kbd>. This is one of the reasons we are inheriting from <kbd>QMainWindow</kbd> instead of <kbd>QWidgets</kbd> to build our GUI.</span></p>
<p>After creating the status bar, we immediately call the <kbd>showMessage</kbd> method on it. We could have done this in two steps, that is, creating the status bar and saving the instance of this class in a local variable, and then using the variable to call <kbd>showMessage</kbd> on it. Here, we streamlined the code into one line.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Adding a menu bar widget</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will add a menu bar to the GUI we created in the previous recipe. We did this in a previous chapter with <kbd>tkinter</kbd>, but in this recipe, we will see how creating a menu bar with PyQt5 is much simpler and more intuitive.</p>
<p>We will also start creating PyQt5 <strong>actions</strong>, which add functionality to the GUI.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>We will extend the GUI from the previous recipe, where we added a status bar. Read the previous recipe in order to understand the code we are writing here.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>We <span>will extend from the previous recipe, in which we added our first widget. Let's see how we can do that:</span></p>
<ol>
<li>Create a new module and name it <kbd><span>GUI_PyQt5_menubar</span>.py</kbd>.</li>
<li>Copy the code from the previous recipe, which can be found in <kbd><span>GUI_PyQt5_statusbar</span><span>.py</span></kbd>.</li>
<li>In the <kbd>add_widgets</kbd> <span>method, add the following code:</span></li>
</ol>
<pre style="padding-left: 60px">def add_widgets(self): <br/>    self.statusBar().showMessage('Text in statusbar')<br/> <br/>    menubar = self.menuBar()                            <br/>    file_menu = menubar.addMenu('File')                <br/> <br/>    new_action = QAction('New', self)                   <br/>    file_menu.addAction(new_action)                     <br/> <br/>    new_action.setStatusTip('New File')</pre>
<ol start="4">
<li>Run the preceding code. You will see a new menu bar with a menu item. Click on the <span class="packt_screen">File</span> menu and then click on <span class="packt_screen">New</span>. Look at the text in the status bar:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/9189f67f-e9a5-4ed1-8812-a30f269b0deb.png" width="267" height="127"/></p>
<p><span>Let's go behind the scenes to understand how this works.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In <em>step 1</em>, we <span>are creating a new module, while in <em>step 2</em>, we are reusing the code from the previous recipe. In <em>step 3</em>, we add new code to the <kbd>add_widgets</kbd> method. Again, we are using <kbd>self</kbd> to access the <kbd>menuBar</kbd> class that is built into <kbd>QMainWindow</kbd>. After creating an instance of the menu bar, we use the <kbd>addMenu</kbd> method to create a menu. We use the <kbd>QAction</kbd> class to create a menu item and then we use the <kbd>addAction</kbd> method to add this menu item to the menu.</span></p>
<p>We use the <kbd>new_action</kbd> variable to call <kbd>setStatusTip</kbd>. Now, when we click on <span class="packt_screen">File | New</span>, we can see the text displayed in the status bar, as shown in <em>step 4</em>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Starting the PyQt5 Designer tool</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will start to use the PyQt5 Designer tool. We will visually design our GUIs and drag and drop our widgets onto a window main form. This form can be a <kbd>QWidgets</kbd> form or a <kbd>QMainWindow</kbd> form.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>You will need to have both PyQt5 and the Qt Designer tool installed on your computer. Please read the <em>Installing PyQt5</em> and <em>Installing the PyQt5 Designer tool</em> recipes to find out how to do this.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>You will need to run the <kbd>Designer.exe</kbd> file. Its location can be found in the <em>Installing the PyQt5 Designer too</em><em>l</em> recipe.</p>
<p class="mce-root"/>
<p>Let's get started:</p>
<ol>
<li>Locate <kbd>Designer.exe</kbd> and double-click on it to run it.</li>
<li>The Designer GUI will open, as follows:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/303ff0b8-8bce-4e9e-aba2-13ea74f4389c.png" width="1285" height="726"/></p>
<ol start="3">
<li>In the <span class="packt_screen">New Form - Qt Designer</span> dialog box, as shown in the preceding screenshot, change the default in the top-left corner to <span class="packt_screen">Main Window</span>.</li>
</ol>
<p> </p>
<ol start="4">
<li>Click the <span class="packt_screen">Create</span> <span>button in the dialog.</span></li>
<li>You should see the <span class="packt_screen">Qt Designer</span> change to the following view:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/6f64ab2b-bd1f-4988-a08e-49aed8943ccb.png" width="883" height="489"/></p>
<p>Let's <span>go behind the scenes to understand what we are seeing.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In <em>step 1</em>, we <span>are starting the <span class="packt_screen">Qt Designer</span> by double-clicking the executable. In <em>step 2</em>, we can see that, by default, we are being presented with a dialog form that lets us create a new UI or open an existing UI.</span></p>
<p>The form directly behind the dialog box is dark grey, which means it is empty. This is actually the area in which we design our GUIs.</p>
<p>On the left-hand side, we can see the <span class="packt_screen">Widget Box</span> area. This area contains all of the PyQt5 widgets the Designer has access to. We will drag and drop widgets from this <span class="packt_screen">Widget Box</span> onto the UI form.</p>
<p class="mce-root"/>
<p>On the right-hand side of the Designer, we have two windows: the <span class="packt_screen">Object Inspector</span> and the <span class="packt_screen">Property Editor</span>. Both are currently empty.</p>
<p>In <em>step 3</em>, we change the default setting to <span class="packt_screen">Main Window</span> because we want to create a <kbd>QMainWindow</kbd> application. In the previous recipes, we did this manually, but here we are using the Designer to do this for us.</p>
<p>In <em>step 4</em>, we click the <span class="packt_screen">Create</span> <span>button, which closes the dialog and creates a new <span class="packt_screen">Main Window</span> form in the center area of the Designer. At the same time, the two windows on the right-hand side are no longer empty.</span></p>
<p>In <em>step 5</em>, we note that the classes and properties the <span class="packt_screen">Main Window</span> has. In t<span>he</span> <span class="packt_screen">Object Inspector</span><span>, we can see four classes:</span> <span class="packt_screen">QMainWindow</span><span>,</span> <span class="packt_screen">QWidget</span><span>,</span> <span class="packt_screen">QMenuBar</span>, <span>and</span> <span class="packt_screen">QStatusBar</span><span>. In the previous recipes, we manually added a menu bar and a status bar. Using the Designer tool when creating a new <kbd>QMainWindow</kbd>, we can see that the Designer has automatically added this functionality for us.</span></p>
<p>In <span>the</span> <span class="packt_screen">Property Editor</span><span>, we can see the</span> <span class="packt_screen">geometry</span> <span>property for the</span> <span class="packt_screen">centralwidget</span> <span>object. This is a</span> <span class="packt_screen">QWidget</span> <span>and is the central part of the entire</span> <span class="packt_screen">Main Window</span><span>. The <span class="packt_screen">menubar</span> and <span class="packt_screen">statusbar</span> are located above and below the central form, respectively. The values for the</span> <span class="packt_screen">geometry</span> <span>property default to 800 x 600, which will become the resultant size of our GUI when we run the code the way it is.</span></p>
<div class="packt_infobox"><span>We can use this property to change the size of the UI. Alternatively, we can drag the UI form to the center of the Designer to change its size. This will update this property so that it works in both ways.</span></div>
<p>Take a look around the Designer to get a feel for how it works and what information it provides.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Previewing the form within the PyQt5 Designer</h1>
                </header>
            
            <article>
                
<div>
<p>In this recipe, we will learn how to preview the form we are creating with the Designer. This is a very useful feature the Designer offers us because we can make changes, undo them, preview them, and so on until we are happy with our design. At that point, we can save the design.</p>
</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>You will need to have both PyQt5 and the Qt Designer tool installed on your computer.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Run <kbd>Designer.exe</kbd>, as explained in the previous recipe. We will change the Main Window size and then preview it. Follow these steps to learn how to preview the form:</p>
<ol>
<li>Perform <em>steps 1</em> to <em>5</em> from the previous recipe.</li>
<li>In the <span class="packt_screen">Property Editor</span>, change the <strong><span class="packt_screen">geometry</span></strong> property to <kbd>400</kbd> x <kbd>300</kbd>, as shown in the following screenshot:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/6257f04d-9346-41ad-b82e-421e91bf9d15.png" width="1017" height="547"/></p>
<p class="mce-root"/>
<p class="mce-root"/>
<ol start="3">
<li>In the Designer menu, click <span class="packt_screen">Form | Preview...</span> or press <em>Ctrl</em> + <em>R</em>.</li>
<li>You should see the following preview:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/8976689f-0b9b-4964-8898-4754ae1c9020.png" style="width:25.42em;height:4.75em;" width="378" height="71"/></p>
<p>Let's go behind the scenes to understand this code better.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In <em>step 1</em>, we <span>are performing the same steps that we performed in the previous recipe. This brings us back to the same stage, because once we close the Designer tool, our UI will be lost if we do not save it. We haven't saved it so far.</span></p>
<p>In <em>step 2</em>, we are using the <span class="packt_screen">Property Editor</span> on the right-hand side of the Designer to change the size of our UI. Make sure you have <span class="packt_screen">QWidget</span> selected in this editor and not <span class="packt_screen">QMainWindow</span>. If your editor looks like the following screenshot, simply expand the <span class="packt_screen">QWidget</span> properties by clicking the arrow to the left of it:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/b5247e83-d6d2-4ffe-8b5f-cfc282063337.png" style="width:29.25em;height:20.50em;" width="488" height="342"/></p>
<p>In <em>step 3</em>, we are previewing our current UI design. There are two ways to do this: <span>clicking</span> the menu item and pressing the key shortcut.</p>
<p><em>Step 4</em> shows the resultant UI. Note the word <span class="packt_screen">[Preview]</span> in the title bar of the window.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Saving the PyQt5 Designer form</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will add the same menu and menu item that we created previously. We will save our UI after previewing it.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>You will need to have both PyQt5 and the Qt Designer tool installed on your computer.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Run <kbd>Designer.exe</kbd>, as explained in the previous recipe. <span>In order to create the menu and menu item, we can simply type into the Main Window within the Designer. Moving on, perform the following steps:</span></p>
<ol>
<li>Perform <em>step 1</em> and <em>step 2</em> from the previous recipe.</li>
<li>In the Designer, inside <span class="packt_screen">MainWindow - untitled*</span>, type <kbd>File</kbd> into the <span class="packt_screen">Type Here</span> menu, as shown in the following screenshot:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/6b8a918e-a119-4327-b39e-fc3422a34036.png" style="width:16.00em;height:7.42em;" width="194" height="90"/></p>
<p class="mce-root"/>
<ol start="3">
<li>Click on <span class="packt_screen">File</span>, type <kbd>New</kbd>, and press the <em>Enter</em> key to create a menu item:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/c0e21c0b-67c7-4828-9130-1cdc84df57cc.png" width="171" height="121"/></p>
<ol start="4">
<li>Press <em>Ctrl</em> + <em>R</em> to preview the UI:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/43f6436c-4a8e-4458-8e6b-c8597bf8e688.png" style="width:27.33em;height:9.83em;" width="406" height="145"/></p>
<ol start="5">
<li>Close the preview and save the design in the Designer as <kbd>Designer_First_UI.ui</kbd>, as shown in the following screenshot:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/e70c9cde-6b61-44fc-9e09-29ee2659399a.png" width="607" height="172"/></p>
<p>Let's go behind the scenes so that we can understand these steps better.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In <em>step 1</em>, we <span>are performing the same steps that we performed in the previous recipe. In <em>step 2</em>, we are creating a <span class="packt_screen">File</span> menu by simply typing into the menu bar the Designer has provided for us. In <em>step 3</em>, we add a menu item to this menu, also simply by typing into <span class="packt_screen">Type Here</span> below our new menu.</span></p>
<p><span>In <em>step 4</em>, we preview our UI design, while in <em>step 5</em>, we are actually saving our design for the first time.</span></p>
<p><span>Note how the extension of UIs we design in the Designer is <kbd>.ui</kbd>.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Converting Designer .ui code into .py code</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will look at the <kbd>.ui</kbd> code we saved in the previous recipe when we saved our design in the Qt Designer tool. After that, we will use a utility we installed during the installation of the PyQt5 tools that will convert the <kbd>ui</kbd> code into Python <kbd>py</kbd> code.</p>
<p><span>We will be specifically using the</span> <kbd>pyuic5</kbd> <span>tool. You can think of the name as follows:</span></p>
<div class="packt_quote">Generate Python <strong>py</strong> code from the Designer <strong>ui</strong> code by <strong>c</strong>onverting it, using PyQt version <strong>5</strong>.</div>
<div class="packt_tip">If you are trying to find where <kbd>pyuic5.exe</kbd> is located, it actually gets installed into the Python <kbd>scripts</kbd> subfolder. On my installation, this is <kbd>C:\Python37\Scripts\pyuic5.exe</kbd><span>. Make sure your <kbd>PATH</kbd> is set to the <kbd>Scripts</kbd> folder in order to successfully run it.</span></div>
<p>Let's get ready.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>You will need to have the <span>PyQt5</span> tools installed on your computer.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>First, we will open the <kbd>.ui</kbd> code we generated in the previous recipe when we saved our UI in the Designer. Now, follow these steps:</p>
<ol>
<li>Open <span><kbd>Designer_First_UI.ui</kbd> from the previous recipe in a word editor such as Notepad++</span>.</li>
<li>Look at the <kbd>.ui</kbd> code:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/9bba826f-01c7-46ba-abd0-14faa90c44d9.png" style="width:29.50em;height:24.58em;" width="569" height="475"/></p>
<ol start="3">
<li>Navigate to the location on your hard drive where you saved <span><kbd>Designer_First_UI.ui</kbd> and open a Windows PowerShell or Command Prompt window.</span></li>
<li>Type in the <kbd><span>pyuic5 -x -o Designer_First_UI.py Designer_First_UI.ui</span></kbd> command and press the <em>Enter</em> key as shown in the following screenshot:</li>
</ol>
<p> </p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/4a8f5deb-6f5a-4957-b721-df89d5faaa73.png" style="width:34.08em;height:4.92em;" width="638" height="93"/></p>
<p class="mce-root"/>
<ol start="5">
<li>Run the <kbd>ls</kbd> command in PowerShell or the <kbd>dir</kbd> command in a Command Prompt window to see the newly generated <kbd>.py</kbd> file. Alternatively, use Windows File Explorer to see the new file:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/8273b02f-6773-40b0-a071-aec4524b356a.png" style="width:42.08em;height:18.92em;" width="841" height="379"/></p>
<p><span>Let's go behind the scenes to understand these conversion steps better.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In <em>steps 1</em> and <em>2</em>, we <span>are opening the <kbd>.ui</kbd> file that got saved in the Designer. We are using Notepad++ or any other word editor for this. The resultant <kbd>.ui</kbd> output is clearly XML.</span></p>
<p>This is definitely not Python code. We have to convert the XML into Python code, which we do in <em>steps 3</em> and <em>4</em>.</p>
<div class="packt_infobox">The <kbd>-x</kbd> argument after <kbd>pyuic5.exe</kbd> makes the resultant Python module executable, while <kbd>-o</kbd> specifies the name of the output file. We have chosen the same name as the <kbd>.ui</kbd> file but with a <kbd>.py</kbd> extension. We can choose any name we wish, as long as it has a <kbd>.py</kbd> extension. The <kbd>pyuic5</kbd> utility also has the capability to convert more than one <kbd>.ui</kbd> file into a single <kbd>.py</kbd> file, so being able to choose a name comes in handy.</div>
<p>When running <kbd>pyuic5.exe</kbd>, we do not get any output if the conversion was successful. If we do not get any errors, this means the conversion was successful.</p>
<p>In <em>step 5</em>, we verify that we have the new output file, that is, <kbd>Designer_First_UI.py</kbd>.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Understanding the converted Designer code</h1>
                </header>
            
            <article>
                
<p>In the previous recipe, we converted the Designer UI code into Python code using the <kbd>pyuic5</kbd> converter tool. In this recipe, we will look at the generated code. Every GUI we create with the Designer needs to be converted and any changes we make will overwrite all the previous code. This will allow us to understand how to decouple UI code from the functionality we will add to the UI using a modular approach in Python.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>You will need to have the <span>converted code from the previous recipe available. If you did not follow the preceding recipes in this chapter, simply download the necessary code from the Packt website for this book. The website provides all of the code for this book and you can simply click one button to download it all via GitHub.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>We will need to open the <kbd>.py</kbd> code we converted from the <kbd>.ui</kbd> code to understand its structure. Now that we've done this, we can follow these steps:</p>
<ol>
<li><span>Open <kbd>Designer_First_UI.py</kbd> from the previous recipe</span>.</li>
<li>Note the top section of the auto generated module:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/c8ad4514-e1ca-4c76-99a6-7e9f66d324a0.png" style="width:33.50em;height:8.67em;" width="564" height="146"/></p>
<ol start="3">
<li>Look at the import statements just below the preceding section:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/dd3d1eb8-0d3e-46d5-905d-55402fe5f319.png" style="width:23.08em;height:2.08em;" width="343" height="31"/></p>
<p class="mce-root"/>
<ol start="4">
<li>Look at the class that was created and its first method:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/caf0a228-8780-4249-91c6-4174f2635226.png" style="width:30.17em;height:23.42em;" width="461" height="359"/></p>
<ol start="5">
<li>Look at the second method, which is below the first method within the class:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/d0089ad4-3fc4-4d43-bb7f-4a3d5ed1e692.png" style="width:39.42em;height:7.25em;" width="500" height="92"/></p>
<ol start="6">
<li>Lastly, look at the <kbd>"__main__"</kbd> section at the bottom of the code:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/8bc6c967-b11f-45ef-b2fa-0b82990e6bf0.png" style="width:22.25em;height:9.67em;" width="306" height="133"/></p>
<p class="mce-root"/>
<ol start="7">
<li>Run this code. The result should be a running Python GUI:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/8f8f6f80-df98-4f38-93cd-adb95f33eb22.png" style="width:19.83em;height:6.50em;" width="286" height="94"/></p>
<p><span>Let's go behind the scenes to better understand the code.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In <em>step 1</em><span>, we open the converted UI as a Python module. In <em>step 2</em>, we can see an important warning.</span></p>
<div class="packt_tip">I strongly recommend that you take this warning <strong>seriously</strong>. If you add code to this module and regenerate the code via <kbd>pyuic5.exe</kbd> at a later date, all of your changes will indeed be <strong>lost</strong>!</div>
<p><em>Step 3</em> shows us the three import statements. These are always being imported, although <kbd>QtGui</kbd> is not required, as can be seen by the yellow warning and underline in my Eclipse/PyDev editor.</p>
<p><em>Step 4</em> shows us the class that's always created. It is immediately followed by the <kbd>setupUi</kbd> method. There is no <kbd>__init__</kbd> method in between. The code in this method is very important for us because we can access the class attributes via the generated names.</p>
<p>In <em>step 5</em>, we note the <kbd>retranslateUi</kbd> method. This method is also auto generated. By taking a closer look, we can find the names of the menu and menu items we added during the UI design phase.</p>
<p><em>Step 6</em> shows us the <kbd>"__main__"</kbd> <span>section</span> <span>at the bottom of the code. The important thing to know about this is that this section is only created when we specify the <kbd>-x</kbd> option during the <kbd>pyuic5</kbd> conversion. If we leave this option out, we won't see this section.</span></p>
<p>In <em>step 7</em>, we run our GUI. Note how we are no longer <em>previewing</em> the UI. This is real and pure Python code now.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Building a modular GUI design</h1>
                </header>
            
            <article>
                
<p>As we saw in the previous recipe, all of the auto generated code of the UI we are designing with the Designer will be overwritten as soon as we rerun the <kbd>pyuic5</kbd> utility. This is a good thing because it encourages us to design our Python modules in a modular fashion (hence the name <em>module</em>).</p>
<p>In this recipe, we will import the generated UI from a new Python module and add functionality within it. Whenever we rerun <span>the <kbd>pyuic5</kbd> utility, our code will not get accidentally overwritten, because we are separating the logic from the UI.</span></p>
<div class="packt_infobox"><strong>Separation of Concerns</strong> (<strong>SoC</strong>) is a software term that refers to the benefits of good, modular design.</div>
<p>So, let's write some code!</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>You will need the <span>converted code from the previous recipe, which can be found in <kbd>Designer_First_UI.py</kbd>.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>We will <span>create a new module in which we will add functionality to our UI code. We will import the UI we created in the Qt Designer that we converted into Python code. Let's get started:</span></p>
<ol>
<li>Create a new Python module and name it <kbd>Designer_GUI_modular.py</kbd>.</li>
<li>In this module, write the following line of code:</li>
</ol>
<pre style="padding-left: 60px">from Ch10_Code.Designer_First_UI import Ui_MainWindow</pre>
<div class="packt_infobox">Note that y<span>ou might have to adjust the <kbd>Ch10_Code</kbd> prefix to match your location.</span></div>
<ol start="3">
<li>Run the preceding code. You shouldn't get any errors.</li>
<li>Next, copy the <kbd>"__main__"</kbd> <span>section from <kbd>Designer_First_UI.py</kbd> into this new module.</span></li>
<li>You will also need to import <kbd>QtWidgets</kbd> to make this work:</li>
</ol>
<pre style="padding-left: 60px" class="mce-root"><span>from PyQt5 import QtWidgets</span><br/><span>from Ch10_Code.Designer_First_UI import Ui_MainWindow</span><br/><br/>if __name__ == "__main__":<br/>    import sys<br/>    app = QtWidgets.QApplication(sys.argv)<br/>    MainWindow = QtWidgets.QMainWindow()<br/>    ui = Ui_MainWindow()<br/>    ui.setupUi(MainWindow)<br/>    MainWindow.show()<br/>    sys.exit(app.exec_())</pre>
<ol start="6">
<li>Now, run the preceding code. You should see the GUI we designed and previously ran stand-alone:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/67c63c36-5288-46cc-b813-d7f227a4b965.png" width="268" height="123"/></p>
<p><span>Let's go behind the scenes to better understand the code.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In <em>step 1</em><span>, we create a new Python module. In <em>step 2</em>, all we do is import the UI into the Python generated code.</span></p>
<div class="packt_infobox"><strong>This is very important, because it shows the principle of SoC!</strong></div>
<p>In <em>step 3</em>, we run this one line of code. No GUI will be visible, but the important thing here is that we don't get any errors. If we get some errors, it typically means that our import statement failed because our module could not locate the module we are trying to import.</p>
<p><em>Step 4</em> copies the <kbd>"__main__"</kbd> <span>section from our converted <kbd>.py</kbd> file. While the module runs by itself, when we import it, we also have to import <kbd>QtWidgets</kbd>, because when we import modules, the import statements of those modules do not automatically get imported. We do this in <em>step 5</em>. In <em>step 6</em>, we have our GUI up and running, but this time via a modular approach.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Adding another menu item to our menu bar</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will add a second menu item to our GUI. We will use the Designer and then regenerate the UI code. After that, we will attach functionality to the menu item from our modular Python module. The Designer has certain capabilities so that it can add this functionality as well, but here, we are simply keeping the UI code separated from the functionality of our GUI.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>You will need to have the <span>UI code from the previous recipes available. All the other recipes' prerequisites apply to this recipe as well.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>We will <span>enhance our UI design from a previous recipe by adding a second menu item. After that, we will convert the UI code into Python code, like we did previously. Let's get started:</span></p>
<ol>
<li>In the Qt Designer, open <kbd>Designer_First_UI.ui</kbd>.</li>
<li>Below the <span class="packt_screen">File | New</span> menu item, create another menu item and name it <kbd>Exit</kbd>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/7561525e-b08d-4703-bfc4-93d6b5c1644e.png" style="width:30.25em;height:15.00em;" width="480" height="237"/></p>
<p style="padding-left: 60px">Type this new menu item into the <span class="packt_screen">Type Here</span> area. It will look like this:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/a97af1d2-f8b1-413a-b44d-e70501e0fd23.png" style="width:21.75em;height:8.50em;" width="360" height="140"/></p>
<ol start="3">
<li>Press the <em>Enter</em> key and save the <kbd>.ui</kbd> file. Next, preview the UI:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/edb428a3-0e3d-4697-80ac-f65b508b7d3b.png" style="width:24.42em;height:8.00em;" width="391" height="127"/></p>
<ol start="4">
<li>Run the <kbd>pyuic5.exe</kbd> utility to convert the <kbd>.ui</kbd> file into a <kbd>.py</kbd> file. Let's save it under a new name to distinguish it from our original module.</li>
</ol>
<p style="padding-left: 60px">In a PowerShell or Command Prompt window, type <kbd>pyuic5.exe -x -o Designer_First_UI_Exit.py Designer_First_UI.ui</kbd> and then press the <em>Enter</em> key:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/65f16567-d33f-42c0-a66e-842529fe7425.png" width="673" height="40"/></p>
<p style="padding-left: 60px">You should now have a new Python module named <kbd>Designer_First_UI_Exit.py</kbd>.</p>
<ol start="5">
<li>Create a new Python module and name it <kbd>Designer_GUI_modular_exit.py.</kbd> Import the newly converted file into it. Here is what the code looks like:</li>
</ol>
<pre style="padding-left: 60px">from PyQt5 import QtWidgets<br/>from Ch10_Code.Designer_First_UI_Exit import Ui_MainWindow<br/><br/><span>if __name__ == "__main__":</span><br/><span>    import sys</span><br/><span>    app = QtWidgets.QApplication(sys.argv)</span><br/><span>    MainWindow = QtWidgets.QMainWindow()</span><br/><span>    ui = Ui_MainWindow()</span><br/><span>    ui.setupUi(MainWindow)</span><br/><span>    MainWindow.show()</span><br/><span>    sys.exit(app.exec_())</span></pre>
<ol start="6">
<li class="mce-root">Run the GUI and click on the <span class="packt_screen">File</span> menu to see the new <span class="packt_screen">Exit</span> menu item. The result will be the same one we got in <em>step 3</em> when we previewed the running GUI in the Designer before we converted it:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/87178407-ac82-4c5a-833a-a7bdca54cac1.png" style="width:23.50em;height:11.67em;" width="286" height="142"/></p>
<p>Now, let's go behind the scenes to understand what's going on.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In <em>step 1</em><span>, we are opening the <kbd>.ui</kbd> design file we created previously. We aren't saving it under a different name, so we are basically adding a new menu item to our existing design.</span></p>
<p>In <em>step 2</em>, we use the Designer tool to add a new menu item and name it <kbd>Exit</kbd>.</p>
<p>In <em>step 3</em>, we press the <em>Enter</em> key, which, quite honestly, sounds very trivial, but if we don't do this, our new item will not be saved. We also save the <kbd>.ui</kbd> file under the same name, overwriting our previous version. This is okay because we are simply adding some small functionality to the UI.</p>
<p>In <em>step 4</em>, we are running the <kbd>pyuic5.exe</kbd> utility to turn the XML of the <kbd>.ui</kbd> file into Python code. This time, however, we are giving the resultant <kbd>.py</kbd> output file a different name than the <kbd>.ui</kbd> file. We do this so that we don't overwrite our previous Python module.</p>
<p>In <em>step 5</em>, we create a new Python module and import the converted <kbd>.ui</kbd> into it. We have done this before. Finally, in <em>step 6</em>, we run the pure Python code so that we can see our new menu item.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p>In <span>the next recipe, we will add functionality to our new</span> <span class="packt_screen">Exit</span> <span>menu item so that when we click on it, our GUI will indeed exit and the application will end.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Connecting functionality to the Exit menu item</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will add functionality to the <span class="packt_screen">Exit</span> menu item we created in the previous recipe. So far, we have two menu items, but they aren't interactive.</p>
<p>Here, we will learn how to add functionality outside of the UI by using our modular approach to coding. We will also improve our code by transforming the <kbd>"__main__"</kbd> self-testing section into a class of its own.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>You will need to have the <span><kbd>.ui</kbd> code from the previous recipe available. All the other prerequisites apply to this recipe as well.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>We will <span>add functionality to our GUI using the modular approach of SoC. To make our code more robust, we will create a new class. Let's get started:</span></p>
<ol>
<li>Create a new Python module and name it <kbd>Designer_GUI_modular_exit_class.py</kbd>.</li>
<li>Type the following import statements into the module:</li>
</ol>
<pre style="padding-left: 60px">import sys<br/>from PyQt5 import QtWidgets<br/>from Ch10_Code.Designer_First_UI_Exit import Ui_MainWindow</pre>
<ol start="3">
<li>Create a new Python class with an <kbd>__init__</kbd> method:</li>
</ol>
<pre style="padding-left: 60px">class ExitDesignerGUI():<br/>    def __init__(self):<br/>        app = QtWidgets.QApplication(sys.argv)<br/>        self.MainWindow = QtWidgets.QMainWindow() <br/>        self.ui = Ui_MainWindow() <br/>        self.ui.setupUi(self.MainWindow) <br/>        self.update_widgets()<br/>        self.widget_actions() <br/>        self.MainWindow.show()<br/>        sys.exit(app.exec_())</pre>
<ol start="4">
<li>Create a method that updates the status bar and connects an action to the menu item:</li>
</ol>
<pre style="padding-left: 30px">    def widget_actions(self):<br/>        self.ui.actionExit.setStatusTip(<br/>        'Click to exit the application') <br/>        self.ui.actionExit.triggered.connect(self.close_GUI)</pre>
<ol start="5">
<li>Write a callback method that closes the GUI:</li>
</ol>
<pre style="padding-left: 60px">def close_GUI(self): <br/>    self.MainWindow.close()</pre>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<ol start="6">
<li>Write a class method that updates the title of the GUI:</li>
</ol>
<pre style="padding-left: 60px">def update_widgets(self):<br/>    self.MainWindow.setWindowTitle('PyQt5 GUI')</pre>
<ol start="7">
<li>Create an instance of the class in the <kbd>"__main__"</kbd> section:</li>
</ol>
<pre style="padding-left: 60px">if __name__ == "__main__":<br/>    ExitDesignerGUI()</pre>
<p>Now, let's see how this works.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p><span>In <em>step 1</em>, we are creating a new Python module, while in <em>step 2</em>, we are writing the import statements we need at the top of the module.</span></p>
<div class="packt_infobox"><span>Writing all the import statements at the top of a module is a Python best practice and is highly recommended.</span></div>
<p>In <em>step 3</em>, we are creating our own Python class and starting with the typical initializer. Toward the end of the initializer method, we are calling methods that we are creating below the initializer. Because we are doing it like this, all we have to do is instantiate the class, and the methods will run without us having to call any particular methods on the class instance after the creation of the class instance (object).</p>
<p>In <em>step 4</em>, we are accessing the name of our menu item via <kbd>self.ui.actionExit</kbd>. We can use <kbd>self.ui</kbd> because, in the <kbd>"__init__"</kbd> method, we created an instance of the <kbd>MainWindow</kbd> and saved it as such. This is the line of code:</p>
<pre>self.ui = Ui_MainWindow()</pre>
<p>How come we use <span><kbd>actionExit</kbd>? We have to look at the auto generated code to find this object name.</span></p>
<p class="mce-root"/>
<p>We designed our UI in the Designer and the Designer chose a name for us. We could change that object name if we wish, but it isn't necessary. We just have to find the name we are looking for. So, let's look at <kbd>Designer_First_UI_Exit.py</kbd>:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/51694739-6d4e-412e-8399-877b43b65141.png" style="width:37.75em;height:25.75em;" width="558" height="381"/></p>
<p>We can find the <kbd>"actionExit"</kbd> name in this file.</p>
<p>We can also look it up in <span class="packt_screen">Qt Designer</span> in the <span class="packt_screen">Object Inspector</span>:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/5cedb6d6-b2ca-46db-a45b-cc3320645869.png" style="width:24.67em;height:11.75em;" width="361" height="172"/></p>
<p>Either way works.</p>
<p>Also in <em>step 4</em>, we are achieving the desired functionality, that is, closing our GUI via the <span class="packt_screen">Exit</span> menu item.</p>
<p class="mce-root"/>
<p>We do this in the following line of code, which calls the method we create in <em>step 5</em>:</p>
<pre>self.ui.actionExit.triggered.connect(self.close_GUI) </pre>
<p>The very important thing to note is that we call <kbd>triggered.connect(<strong>&lt;method name&gt;</strong>)</kbd> to achieve this functionality. This connects the <em>action</em> to the event of the menu item being <em>triggered</em>.</p>
<div class="packt_infobox">This is PyQt5 syntax and semantics.</div>
<p>In <em>step 5</em>, in order to close the GUI, we call the built-in <kbd>close</kbd> method on <kbd>MainWindow</kbd>. We saved a reference to <kbd>MainWindow</kbd> in <span>the</span> <kbd>"__init__"</kbd> <span>method so that we can reference it from within this method, within the same Python class.</span></p>
<p>In <em>step 6</em>, we use the same reference of <kbd>self.MainWindow</kbd> to give our GUI window a title.</p>
<p>In <em>step 7</em>, we use Python's self-testing <kbd>"__main__"</kbd> section to create a class instance. This is all we need to do to run our GUI.</p>
<p>Now, when we click on the <kbd>Exit</kbd> menu item, our GUI will exit.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Adding a Tab Widget via the Designer</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will add a Tab Widget to our UI using the Designer tool. Then, we will convert the <kbd>.ui</kbd> code into Python code. This will serve us well in preparation for adding more widgets and functionality to our GUI.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>You will need to have the <span><kbd>.ui</kbd> code from the previous recipe available. All the other prerequisites apply to this recipe as well.</span></p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>We will <span>add a Tab Widget to our UI design by using the Designer. It is as simple as dragging and dropping. Let's get started:</span></p>
<ol>
<li>In Qt Designer, open <kbd>Designer_First_UI.ui</kbd> and save it as <kbd>Designer_Second_UI.ui</kbd>.</li>
<li>From the left-hand side within the Designer, drag a <span class="packt_screen">Tab Widget</span> onto the main form:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/004828a0-d8ab-48d9-820e-9460bd7ecb1f.png" width="928" height="589"/></p>
<ol start="3">
<li>Resize the <span class="packt_screen">Tab Widget</span> to make it fill up most of the <kbd>MainWindow</kbd>, as shown in the preceding screenshot.</li>
<li>Save the <kbd>.ui</kbd> design and preview it:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/bfa45e25-bdc1-476e-8c8a-8522c976394d.png" style="width:24.42em;height:9.67em;" width="399" height="158"/></p>
<ol start="5">
<li>Click on <span class="packt_screen">Tab 1</span> and <span class="packt_screen">Tab 2</span>.</li>
<li>Click on the <span class="packt_screen">Exit</span> menu item.</li>
<li>Use the <kbd>pyuic5.exe</kbd> tool to convert the <kbd>.ui</kbd> code into Python code.</li>
<li>Run the converted Python UI code.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In <em>step 1</em><span>, we are opening our existing <kbd>.ui</kbd> file in the Qt Designer, but this time, we are saving it under a different filename. Saving the different versions of our UI design under different names is typically a good idea go back to prior versions if our UI design messes up.</span></p>
<div class="packt_tip"><span>Our nice UI design being accidentally messed up can happen quite easily, so make sure you make backups of your <kbd>.ui</kbd> files. You can also use a version control system such as GitHub to back up your code.</span></div>
<p>In <em>step 2</em>, we are using the fantastic drag and drop capability of the Designer to visually (and physically) move a widget onto the canvas form. We can simply use the resize handles to adjust the widget any way we want. We do this in <em>step 3</em>.</p>
<div class="packt_tip">Look at the Object Inspector on the right-hand side of the Designer and note the new <span class="packt_screen">Tab Widget</span>, as well as the two tabs, object names, and PyQt5 classes they belong to.</div>
<p>You may also notice a star (<span class="packt_screen">*</span>) to the right of the <kbd>MainWindow</kbd> title. This means that we haven't saved the design yet. Pay attention to this because, if you close the UI design without saving it, you will lose your beautiful design.</p>
<p class="mce-root"/>
<p>In <em>step 4</em>, we save our UI design and preview it.</p>
<p>In <em>step 5</em>, we can click between the two new tabs. Note how the color of each tab defaults to white and looks different in preview mode than it does in design mode.</p>
<p><em>Step 6</em> will <em>not</em> close the UI because the functionality for closing the UI is decoupled from the UI. We wrote the code so that we could close the GUI in a different Python module.</p>
<p><em>Step 7</em> is mainly left as an exercise for you.</p>
<div class="packt_tip">Get used to making small changes in the Designer, converting the code, importing it, running it, making more changes in the Designer, and so on. <span>Get used to this rhythm of GUI development when you use the Designer tool.</span></div>
<p>In <em>step 8</em>, we run the code. Using the <kbd>-x</kbd> option creates the self-testing <kbd>"__main__"</kbd> section, so you should be able to run the converted Python code without having to import it.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Using layouts in the Designer</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will explore the very important concept of using layouts with PyQt5 and we will do so using the Designer tool. In <kbd>tkinter</kbd>, we explored Label Frames. In PyQt5, horizontal and vertical layouts are the main ways in which we can design our UI.</p>
<div class="packt_tip">This can get a little bit tricky, so, as I mentioned previously, make sure you back up your UI design often so that, when things turn out ugly, you have a foundation to go back to.</div>
<p>In the following recipe, we will place widgets into these layouts.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>You will need to have the <span><kbd>.ui</kbd> code from the previous recipe available. All the other prerequisites apply to this recipe as well.</span></p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>We will <span>add two horizontal layouts to our Main Window, which we will do using drag and drop inside the Qt Designer. Let's get started:</span></p>
<ol>
<li>In the Designer, open <kbd><span>Designer_Second_UI.ui</span></kbd> and save it as <kbd>Designer_Second_UI_layout.ui</kbd>.</li>
<li>Drag one horizontal layout toward the bottom of the form and resize it.</li>
<li>Drag a second horizontal layout and place it above the first layout:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/f1678874-5b67-4a0c-9f27-d86109ca5cdd.png" width="977" height="574"/></p>
<p style="padding-left: 60px">Your <kbd>MainWindow</kbd> will now look like the preceding screenshot.</p>
<ol start="4">
<li>Save the design, convert it into Python, and then run it to make sure you do not get any errors. The code should run, but note that you won't see any difference in the resultant GUI.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In <em>step 1</em><span>, we are saving our UI design under a different name, practically making a backup.</span></p>
<p>In <em>steps 2</em> and <em>3</em>, we are visually dragging horizontal layouts onto the main form. You can see them in the preceding screenshot, but you won't notice any difference in preview mode.</p>
<p>One very important thing to note is the names and classes in the <span class="packt_screen">Object Inspector</span> in the top-right corner of the Designer, as well the properties that are automatically made available to us in the <span class="packt_screen">Property Editor</span> in the bottom-right corner of the Designer.</p>
<p>Also, note how we are placing these widgets in <span class="packt_screen">Tab 1</span>. <span class="packt_screen">Tab 2</span> is still empty.</p>
<div class="packt_tip">What's really cool about using these PyQt5 layouts is that, once we place widgets into these layouts, we can move the entire group of widgets by simply moving the layout. We can even hide them all, making them invisible!</div>
<p>In <em>step 4</em>, we are making sure that we know the process of making changes in the Designer and then converting it into Python code. If running the code doesn't work, something might have gone wrong. It's good to make small changes and then test your code.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Adding buttons and labels in the Designer</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will add a button and a label, both of which we will place in the layouts we added to our UI design in the previous recipe.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>You will need to have the <span><kbd>.ui</kbd> code from the previous recipe available. All the other prerequisites apply to this recipe as well.</span></p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>We will <span>add a button and a label to our UI design. We will also use the Designer to connect the two, creating some of the available functionality directly within the Designer. Let's take a look at the steps:</span></p>
<ol>
<li>In the Designer, open <kbd><span>Designer_Second_UI_layout</span><span>.ui</span></kbd> and save it as <kbd>Designer_Second_UI_layout_button.ui</kbd>.</li>
<li>Drag a <span><kbd>PushButton</kbd> from the left-hand side into the lower horizontal layout:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/0eee7c92-e2db-414f-8579-c8f744a4c879.png" width="849" height="491"/></p>
<p style="padding-left: 60px">Note how the button automatically adjusts itself to the left and right edges of the horizontal layout.</p>
<p class="mce-root"/>
<ol start="3">
<li>Save and preview the UI. Click the button during the preview run of the UI:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/5c5f3322-fece-486a-a153-bbcedc8cc733.png" style="width:17.92em;height:14.92em;" width="413" height="344"/></p>
<p style="padding-left: 60px">When clicking it, the button looks pressed in and comes with a default name we can change.</p>
<ol start="4">
<li>Drag a <span class="packt_screen">Label</span> widget from the left-hand side and place it into the top horizontal layout:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/fe137fae-d910-41ea-82fd-b28fbd2c1d56.png" style="width:48.92em;height:30.00em;" width="798" height="489"/></p>
<p class="mce-root"/>
<ol start="5">
<li>Save the <kbd>.ui</kbd> design and preview it:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/1446a269-ac53-4715-93d5-05a840f621ed.png" style="width:21.58em;height:17.67em;" width="401" height="328"/></p>
<ol start="6">
<li>Next, we will connect the <kbd>PushButton</kbd> to the label within the Designer.</li>
</ol>
<p style="padding-left: 60px">Press the <em>F4</em> key to get into the signals/slots editing mode or use the <span class="packt_screen">Edit</span> menu within the Designer. Drag a signal/slot connection from the button to the label. The Designer will now look like this:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/cd7d1ffe-f487-4b55-8362-66d76e109ecf.png" width="1052" height="425"/></p>
<p class="mce-root"/>
<ol start="7">
<li>In the <strong><span class="packt_screen">Configure Connection</span></strong> pop-up dialog, click on <kbd>clicked()</kbd> in the top-left corner. This will enable the right-hand side of the dialog box. Select the <kbd>clear()</kbd> method:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/318b9508-6c5b-432c-adb8-b7fff1c9d4d6.png" style="width:26.08em;height:19.25em;" width="440" height="324"/></p>
<ol start="8">
<li>Press <span class="packt_screen">OK</span> and save the <kbd>.ui</kbd> file. You will now see a connection between the button and the label:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/1c7f1bd4-fcb4-4b25-b139-5a4ecf4aa9d6.png" style="width:28.00em;height:22.42em;" width="410" height="329"/></p>
<ol start="9">
<li>Preview the <kbd>.ui</kbd> code and click the button. You will notice that the label text is cleared.</li>
<li>Convert the <kbd>.ui</kbd> code into Python code using <kbd>pyuic5.exe</kbd>, as we did previously.</li>
</ol>
<p>Let's look at the converted code to understand how this functionality of connecting the button to clear the label works.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In <em>step 1</em><span>, we are saving the UI design under a new name, while in <em>step 2</em>, we are dragging and dropping a <kbd>PushButton</kbd> onto the <kbd>MainWindow</kbd> form. By itself, this button doesn't do anything, but there are a few methods that are available within the Designer that can add functionality to it.</span></p>
<p>In <em>step 3</em>, we are previewing the UI. Note that the button was automatically stretched to fill in the entire horizontal layout box. Vertically, it is only as tall as it needs to be to display its default text. These are properties that we can change in the <span class="packt_screen">Property Editor</span>.</p>
<p>In <em>step 4</em>, we are visually dragging a text label widget onto the <kbd>MainWindow</kbd>. This widget doesn't attach itself to the left- and right-hand sides of the horizontal layout, because it comes with a predefined width.</p>
<p>It attaches itself to the left-hand side. In the <span class="packt_screen">Property Editor</span>, we can change this if we wish to.</p>
<p><em>Step 5</em> gives us a preview of our UI running from within the Designer.</p>
<p><em>Step 6</em> brings us into the <span class="packt_screen">Signal/Slot Editor</span>. Signals and slots are peculiar to PyQt5. The following screenshot shows you how to enable this editor:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/17fce7e9-d052-4782-840f-64385d10d04f.png" style="width:16.50em;height:12.00em;" width="327" height="238"/></p>
<p>You can find the editor under the <span class="packt_screen">View</span> menu. This opens a new window to the right, below the <span class="packt_screen">Property Editor</span>:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/7ce3ce8b-f9cd-46b4-b588-3f8b878636f5.png" style="width:32.17em;height:21.00em;" width="473" height="309"/></p>
<p>You can see that the <kbd>pushButton</kbd> object is the <span class="packt_screen">Sender</span>, the <span class="packt_screen">Signal</span> is <kbd>clicked()</kbd>, the <span class="packt_screen">Receiver</span> is <kbd>label</kbd>, and the <span class="packt_screen">Slot</span> is <kbd>clear()</kbd>.</p>
<p><em>Step 7</em> shows us some of the functionality that becomes available when we connect signals and slots between <kbd>PushButton</kbd> and the <kbd>Label</kbd> widget. The <kbd>clear()</kbd> method is built in, so we can simply select it to clear the label whenever we push the button.</p>
<p>In <em>step 8</em>, we can see that the editor changed after we clicked <span class="packt_screen">OK</span> to connect the two widgets.</p>
<p class="mce-root"/>
<p>Because the functionality has been added within the Designer, when we preview our UI, it actually works. Clicking the button does indeed clear the label, as can be seen in <em>step 9</em>.</p>
<p>When we convert our <kbd>.ui</kbd> code into Python code, we get the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/3d1c639d-51f9-4b9b-b0cc-6e0d913ebd75.png" style="width:49.83em;height:16.92em;" width="771" height="262"/></p>
<p>Note how the <kbd>pushButton</kbd> has the same syntax of <kbd>clicked.connect(&lt;method&gt;)</kbd>, which is what we had outside of the Designer when we enabled the Exit menu item.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p>The PyQt5 GUI framework is a very exciting tool to work with. I especially enjoy the Qt Designer tool.</p>
<p>Together with Packt, I have created several <em>Python GUI Programming Recipes using PyQt5</em> video courses.</p>
<p>One course is especially focused on PyQt5 GUI development. It is a little over four hours long.</p>
<p class="mce-root"/>
<p>Here's a screenshot of my course, which can be found at <a href="https://www.packtpub.com/application-development/python-gui-programming-recipes-using-pyqt5-video">https://www.packtpub.com/application-development/python-gui-programming-recipes-using-pyqt5-video</a>:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/a0ba4373-02dc-496b-9ccf-2bcd6aa5d02b.png" style="width:43.75em;height:34.33em;" width="748" height="587"/></p>
<p class="mce-root"/>
<p>If this is too long for you (I am covering a lot of PyQt5 material in this course), there is also a shorter course, which focuses on <kbd>tkinter</kbd> and PyQt5, which can be found at <a href="https://www.packtpub.com/application-development/hands-python-3x-gui-programming-video">https://www.packtpub.com/application-development/hands-python-3x-gui-programming-video</a>:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/4e32cf5b-fe22-4123-ad20-60cc5a9547a3.png" style="width:42.00em;height:31.42em;" width="816" height="610"/></p>
<div class="packt_quote"><q>I wish</q> you <q>the <em>best of luck</em> in your software development efforts.</q></div>
<div class="packt_figref packt_quote"><q>Python is a</q> wonderful <q>programming language.</q></div>


            </article>

            
        </section>
    </div>



  </body></html>