<html><head></head><body>
  <div><div><div><div><div><h1 class="title"><a id="ch02"/>Chapter 2. Getting Started with Grok</h1></div></div></div><p>Now that we know something about Grok and its history, let's get started with it. The first thing to do, of course, is to install the programs on which Grok is dependent. Luckily, most of this work will be performed automatically for us, but there are three key programs that you may need to install manually: Python, a C compiler (not necessary on Windows systems), and EasyInstall. Also, please be aware that Grok installs itself over the network, so an internet connection is required.</p><p>In this chapter, we will cover:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">How to install Python on different platforms</li><li class="listitem" style="list-style-type: disc">What the Python Package Index (PyPI) is</li><li class="listitem" style="list-style-type: disc">How to work with EasyInstall to quickly install packages from the PyPI over the network</li><li class="listitem" style="list-style-type: disc">How<code class="literal"> virtualenv</code> allows us to set up clean Python environments for our development work</li><li class="listitem" style="list-style-type: disc">How to create a project using<code class="literal"> grokproject</code></li><li class="listitem" style="list-style-type: disc">How to run an application using paster</li><li class="listitem" style="list-style-type: disc">What the Grok admin UI is, and how to use it</li></ul></div><p>Because Python runs on many different platforms, Grok can be installed almost anywhere. In this chapter, we will provide instructions for installing it on three specific platforms: Unix/Linux, Mac OS X, and Windows.</p><div><div><div><div><h1 class="title"><a id="ch02lvl1sec01"/>Getting a C compiler</h1></div></div></div><p>If you use Linux or Mac OS X, your first step is to obtain a compiler. Grok depends on the Zope Toolkit, which includes some C extensions in its source code, and thus we need a compiler to build these extensions, on most platforms.<a id="id21" class="indexterm"/>
</p><p>Windows users need not worry about this because the Grok installation process uses precompiled packages, but the other systems do require a compiler to be installed, in order for Grok to be built.</p><p>Many Linux distributions include a compiler in the default setup, so no action is needed for these distributions, but Ubuntu in particular needs a special package containing the compiler and other development tools to be installed. The package name in this case is<code class="literal"> build-essential</code> and you install it by using the following command:</p><div><pre class="programlisting"><strong># sudo apt-get install build-essential
</strong>
</pre></div><p>On Mac OS X systems, there's a compiler included in the Developer Tools package on the system DVD. See<a class="ulink" href="http://developer.apple.com/tools/xcode/">http://developer.apple.com/tools/xcode/</a> for more information.<a id="id22" class="indexterm"/>
</p></div></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch02lvl1sec02"/>Installing Python</h1></div></div></div><p>One of Grok's greatest strengths is that it is written in Python. Grok requires Python version 2.4 or 2.5 to run (at the time of writing, 2.6 support is around the corner), but be aware that it won't run on the recently released 3.0 version, because this version breaks compatibility with older versions of Python and thus is still not supported by most libraries and frameworks.<a id="id23" class="indexterm"/>
</p><div><div><div><div><h2 class="title"><a id="ch02lvl2sec01"/>Installing Python on Unix/Linux</h2></div></div></div><p>Unix/Linux distributions generally come with Python already installed, so the chances are that your system already has a suitable version of Python installed. To see which version you have, type the command<code class="literal"> python V</code> at the shell prompt; you'll get a result similar to this:<a id="id24" class="indexterm"/>
</p><div><pre class="programlisting"><strong># python -V
Python 2.5.2
</strong>
</pre></div><p>If you get an error, then this means that Python is not installed on your machine, and so you will have to install it yourself. This should not happen in any mainstream Linux distribution, but it could conceivably happen with some Unix variants. This is highly unlikely though, so you should get a version number similar to the previous example.</p><p>If your version number is 2.4 or 2.5, you may use your system's Python installation for developing with Grok. However, depending on your Linux distribution, you may need additional packages. Some distributions bundle the development libraries and headers for Python in separate packages, so it could be necessary to install these on your system.</p><p>If you use Ubuntu or Debian, for example, you will need to install the<code class="literal"> python-dev</code> package as well. You can easily do this by using the command line.</p><div><pre class="programlisting"><strong># sudo apt-get update
# sudo apt-get install python-dev
</strong>
</pre></div><p>Other distributions may require different packages to be installed. Consult your system's documentation for instructions.</p><p>If you don't have Python installed, you should be able to install it easily using your system's package manager, similar to the way we set up additional packages:</p><div><pre class="programlisting"><strong># sudo apt-get install python
</strong>
</pre></div><p>If you have Python, but it's not version 2.4 or 2.5, it's very likely that your Linux distribution includes the package for version 2.5. In Ubuntu or Debian, you can use the following command:<a id="id25" class="indexterm"/>
</p><div><pre class="programlisting"><strong># sudo apt-get install python2.5
</strong>
</pre></div><p>You don't necessarily have to use the system's version of Python. Some developers prefer to manually compile their own Python from the source. This can give you more flexibility and also avoid package conflicts, which can occur when different Python frameworks or tools are installed on the same system (note that similar goals may be accomplished without compiling your own version, by using the<code class="literal"> virtualenv</code> tool, as described elsewhere in this chapter).</p><p>To install from the source you need to download the desired version from <a class="ulink" href="http://www.python.org/download/">http://www.python.org/download/</a> and go through the usual<strong> configure-build-install</strong> cycle required for Unix/Linux packages. Remember to use Python 2.4 or 2.5.</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec02"/>Installing Python on Mac OS X</h2></div></div></div><p>Mac OS X always comes with Python pre-installed, but due to the Mac release cycle, the version installed on your computer can be one or even two years old. Therefore, in many cases, Python-Mac community members recommend that you install your own version.<a id="id26" class="indexterm"/>
</p><p>If your OS X version is 10.5, you should be fine with the installed version of Python. For older versions, you might want to check <a class="ulink" href="http://www.python.org/download/mac/">http://www.python.org/download/mac/</a> for available installers and suggestions.</p><p>Grok has a known dependency clash with<strong> Twisted</strong>, a networking package included in recent versions of Mac OS X, so it's best to use a separate Python environment for Grok. You could, of course, build your own version, as described at the end of the<em> Installing Python on Unix/Linux</em> section of this chapter. If, for some reason, you are not comfortable with building your own Python from the source, the recommended approach is to use a virtual environment. This will be covered later in this chapter.<a id="id27" class="indexterm"/>
</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec03"/>Installing Python on Windows</h2></div></div></div><p>In addition to the source download, Python releases come with a very good Windows installer. All you have to do to install Python on Windows (we suggest you use at least XP or Vista) is to select a Python version from <a class="ulink" href="http://www.python.org/download/">http://www.python.org/download/</a> and choose to download the corresponding<code class="literal"> .msi</code> installer from the available options.<a id="id28" class="indexterm"/>
</p><p>After downloading the installer, double-click the installer file, select an appropriate directory to install Python (the default should be fine), and you can begin to use Python. Since you need to work from the command line to use Grok, you might want to add the Python installation path to your system path so that you can easily access the Python interpreter from any directory.</p><p>To do this, go to the Windows<strong> Control Panel</strong>, click on the<strong> System</strong> icon, and select the<strong> Advanced</strong> tab. From there, click on the<strong> Environment Variables</strong> button and select<strong> Path</strong> from the<strong> System Variables</strong> windows (the one at the bottom). Click on<strong> Edit</strong>, and a window with a text box will be displayed, in which you can edit the current value. Be sure to leave the current value exactly as it is, and add the path to your Python installation at the end. The path is the one you selected when running the installer, and is usually in the form<code class="literal"> C:\PythonXX</code>, where XX represents the Python version without a dot (for example,<strong> C:\Python25</strong>, as shown in the following screenshot). Separate this path from the previous paths already present in the system path by using a semicolon. You might also want to add<code class="literal"> C:\PythonXX\Scripts</code> after this, so that the Python scripts that we are going to install in this chapter can also be invoked from anywhere.</p><div><img src="img/7481_02_01.jpg" alt="Installing Python on Windows"/></div><p>To use Grok, you will also need to install the<code class="literal"> win32all</code> package, which includes the Win32 API, COM support, and Pythonwin. This package also comes with an installer, so it should be easy to set up. Just go to <a class="ulink" href="http://sourceforge.net/projects/pywin32/files">http://sourceforge.net/projects/pywin32/files</a> and download the corresponding<code class="literal"> win32all</code> version for your already installed version of Python. Simply run the installer after downloading it, and everything will be ready.<a id="id29" class="indexterm"/>
</p></div></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch02lvl1sec03"/>EasyInstall and the Python Package Index (PyPI)</h1></div></div></div><p>The <strong> Python Package Index</strong> (<strong>PyPI</strong>) is a repository of software for Python, where thousands of packages are available for download. You can find many kinds of libraries and applications there, and Zope and Grok are well represented, with hundreds of packages at your disposal.<a id="id30" class="indexterm"/>
</p><p>What makes PyPI much more powerful is a Python script called<code class="literal"> easy_install</code> a script that allows Python developers to install any package indexed on the PyPI over the network, keeping track of dependencies and versions. Packages that can be easy installed are packaged either as compressed files or in a special format, using the<code class="literal"> .egg</code> extension, and are known as<strong> Python eggs.</strong>
</p><p>The<code class="literal"> easy_install</code> module is a part of a package known as<code class="literal"> setuptools</code>, so you need to install that in order to obtain it. There's an installer for Windows and a<code class="literal"> .egg</code> file for Unix/Linux/Mac available at the setuptools PyPI page on <a class="ulink" href="http://pypi.python.org/pypi/setuptools">http://pypi.python.org/pypi/setuptools</a>.<a id="id31" class="indexterm"/>
</p><p>To install<code class="literal"> setuptools</code> on Windows, just run the installer. For Unix/Linux/Mac systems, run the<code class="literal"> .egg</code> file as a shell script, like in this example (your version may vary):</p><div><pre class="programlisting"><strong># sh setuptools-0.6c11-py2.4.egg
</strong>
</pre></div><p>Many Linux distributions include a package for<code class="literal"> setuptools</code>. In Ubuntu or Debian, for example, you can use<code class="literal"> apt-get</code> to install it:</p><div><pre class="programlisting"><strong># sudo apt-get install python-setuptools
</strong>
</pre></div><p>However, we recommend that you install the newest version manually, even if there's a package available for your system, as this way you are assured of getting the latest version.</p><p>After this, the<code class="literal"> easy_install</code> script will be available on the system Python's path, and from then onwards any package from PyPI can be installed on your system using:<a id="id32" class="indexterm"/>
</p><div><pre class="programlisting"><strong># sudo easy_install &lt;package name&gt;
</strong>
</pre></div><p>It could be possible that you already have<code class="literal"> setuptools</code> installed, but some package that you want to easy install might need a more recent version. In this case, you will receive an error informing you of this fact. To quickly update your<code class="literal"> setuptools</code> version, use the following command:</p><div><pre class="programlisting"><strong># sudo easy_install -U setuptools
</strong>
</pre></div><p>The<code class="literal"> -U</code> switch tells<code class="literal"> easy_install</code> to get the latest version of a package and update the previous version in place. The<code class="literal"> easy_install</code> commands are identical on Windows systems. Just leave out the word<code class="literal"> sudo</code> at the beginning.</p><p>As mentioned before, Grok and dozens of packages that you can use with both Grok and plain Zope, are available on PyPI, so we will use<code class="literal"> easy_install</code> to install the packages required by Grok. But first, we'll learn how to set up a clean environment for our Grok development work.</p></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch02lvl1sec04"/>Grok and the Python environment</h1></div></div></div><p>Grok uses a fairly large number of packages. If other large Python packages, or even a number of smaller Python packages, are installed under the same installation of Python dependency problems or version conflicts can sometimes arise. This is because, the code for Python packages installed by<code class="literal"> easy_install</code> or other Python installation methods are usually stored inside the<code class="literal"> site-packages</code> directory of the Python library.<a id="id33" class="indexterm"/>
</p><p>Grok isolates its packages by placing them inside the<code class="literal"> .buildout/eggs</code> directory, but the Python interpreter still looks into<code class="literal"> site-packages</code> for finding a required package, which means that if another Python tool installs a different version of a library used by Grok, a conflict could occur.</p><p>This probably will not be a problem for you unless you use another Zope-based technology, such as<strong> Plone</strong>. If you are starting with Grok, the easiest course is probably to just go ahead and install it, but if you run into any version conflicts there's a tool that can help you out of the mess; it's called<code class="literal"> virtualenv</code>.<a id="id34" class="indexterm"/>
</p></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch02lvl1sec05"/>Virtualenv</h1></div></div></div><p>
<code class="literal">virtualenv</code> is a Python package that allows the creation of isolated Python environments. This is a way to avoid conflicting packages inside the<code class="literal"> site-packages</code> directory from interfering with your Grok application.<a id="id35" class="indexterm"/>
</p><p>
<code class="literal">virtualenv</code> can be installed by using<code class="literal"> easy_install:</code>
</p><div><pre class="programlisting"><strong># sudo easy_install virtualenv
</strong>
</pre></div><p>Once it's installed, you can work with it by creating environments for any new projects. For example, to create a test environment for Grok, go to a directory of your choice under your home directory, and type:</p><div><pre class="programlisting"><strong># virtualenv --no-site-packages no-site-packages no-site-packages testgrok
</strong>
</pre></div><p>This command will create a directory named<code class="literal"> testgrok</code>, with subdirectories<code class="literal"> bin</code> and<code class="literal"> lib</code> (Scripts and<code class="literal"> Lib</code> under Windows). Inside the<code class="literal"> bin</code> directory you will find the<code class="literal"> python</code> and<code class="literal"> easy_install</code> commands, which will run under the context of the virtual environment that you just created. This means,<code class="literal"> python</code> will run the Python interpreter by using the<code class="literal"> lib</code> directory under<code class="literal"> testgrok</code>, and<code class="literal"> easy_install</code> will add new packages under the<code class="literal"> site-packages</code> directory there.</p><p>The<code class="literal"> --no-site-packages</code> option tells<code class="literal"> virtualenv</code> that none of the existing packages under the system's Python<code class="literal"> site-packages</code> should be available in the new<code class="literal"> virtualenv</code>. It is recommended that you use this option when building environments for Grok. However, if you have many different environments for applications that tend to use the same general libraries, it is possible to install those libraries under the main Python environment and just add the required packages for each application under the virtual environment. In this case, the<code class="literal"> no-site-packages</code> option should not be used, but you will need to plan your setup very carefully.</p><p>When working inside a<code class="literal"> virtualenv</code>, you must remember to use the full path to the<code class="literal"> python</code> and<code class="literal"> easy_install</code> commands, or you may inadvertently install a package in the main Python environment, or run your application with a different set of packages than you intended. To prevent this problem, a batch script named<code class="literal"> activate</code> is included in the<code class="literal"> bin</code> directory of the<code class="literal"> virtualenv</code> (Scripts directory under Windows). Once you run it, all further invocations of the<code class="literal"> python</code> and<code class="literal"> easy_install</code> commands will use their<code class="literal"> virtualenv</code> versions until you end the session by using the corresponding<code class="literal"> deactivate</code> script.</p><p>Use the following command to activate the<code class="literal"> virtualenv</code> under Unix/Linux/Mac for our<code class="literal"> testgrok</code> environment:<a id="id36" class="indexterm"/>
</p><div><pre class="programlisting"><strong># source testgrok/bin/activate
</strong>
</pre></div><p>And in Windows:</p><div><pre class="programlisting"><strong>&gt; testgrok\scripts\activate
</strong>
</pre></div><p>As<code class="literal"> buildout</code> itself takes care of this, the<code class="literal"> activate</code> and<code class="literal"> deactivate</code> scripts are not needed for Grok; they are only mentioned here for completeness.</p><div><div><div><div><h2 class="title"><a id="ch02lvl2sec04"/>Installing Grok using grokproject</h2></div></div></div><p>We are finally ready to install Grok. To make it easy to create a project along with a basic directory structure, Grok uses the<code class="literal"> grokproject</code> package, which can be installed using<code class="literal"> easy_install</code>. Go to a directory where you want to create your application (if you are using<code class="literal"> virtualenv</code>, go inside the<code class="literal"> testgrok virtualenv</code> we created in the previous section). Now type the following command:<a id="id37" class="indexterm"/>
</p><div><pre class="programlisting"><strong># easy_install grokproject
</strong>
</pre></div><p>You have now installed it, but keep in mind the<code class="literal"> -U</code> switch for<code class="literal"> easy_install</code> that allows you to update a package in place, because<code class="literal"> grokproject</code> is under continuous development, and updating it frequently is a good idea. Now we can create our first Grok project.</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec05"/>Creating our first project</h2></div></div></div><p>As mentioned earlier, the<code class="literal"> grokproject</code> package we just installed is a tool for creating projects. A Grok project is a directory that constitutes a working environment in which Grok applications can be developed. It's a template that includes a simple executable application that can be used as a base for development and as a guide for where things usually go in Grok.<a id="id38" class="indexterm"/>
</p><p>Creating a project is very easy. Let's create the traditional hello world example using Grok:</p><div><pre class="programlisting"><strong># grokproject helloworld
</strong>
</pre></div><p>
<code class="literal">grokproject</code> takes as an argument, the name of directory where the project will be created. After you run the command, you will immediately be asked for an administrator username and password. Take note of this because you will need it later, to run the application for the first time.</p><p>Once it has the required information,<code class="literal"> grokproject</code> downloads and installs the Zope Toolkit packages that Grok requires, as well as Grok itself. This can take a few minutes, depending on the speed of your network connection, because Grok consists of many packages. Once the download is finished,<code class="literal"> grokproject</code> configures Grok, and sets up the Grok application template, leaving it ready for use.<a id="id39" class="indexterm"/>
</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec06"/>Running the default application</h2></div></div></div><p>To run the default application that is created along with the project workspace, we need to start up Grok. Let's change the current directory to that of our hello world example, and do that.<a id="id40" class="indexterm"/>
</p><div><pre class="programlisting"><strong># cd helloworld
# bin/paster serve parts/etc/deploy.ini
</strong>
</pre></div><p>Note that the command needs to be run directly from the project's directory. Please do not change to the<code class="literal"> bin</code> directory and try to run<code class="literal"> paster</code> there. In general, all project scripts and commands are meant to be run from the main project directory.</p><p>This command will start Grok on port 8080, which is its default port. Now you can see Grok in action at last by opening a web browser and pointing it to<code class="literal"> http://localhost:8080</code>.</p><p>If, for some reason, you have to use a different port on your system, you will need to edit the<code class="literal"> deploy.ini</code> file inside the<code class="literal"> parts/etc/</code> directory. This file holds Grok's deployment configuration. You will find the line where the port is set (very near to the bottom of the file). Simply change it to whatever number you want, and run<code class="literal"> paster</code> again. Here is an example of how the relevant part of the file should look:</p><div><pre class="programlisting">[server:main]
use = egg:Paste#http
host = 127.0.0.1
port = 8888
</pre></div><p>When you go to that URL, you will see a login prompt. Here you have to use the login and password that you selected when you created the project in the previous section. After that, you will be inside the Grok administration interface (refer the following screenshot).</p><div><img src="img/7481_02_02.jpg" alt="Running the default application"/></div><p>All you need to do to create a copy of the default application is to type a name for it in the text box with the label<strong> Name your new app</strong> label and click the<strong> Create</strong> button. Call it<strong> hello</strong>, for example. After that, you will see a new section on the page where installed applications are shown, and<strong> hello</strong> should be the only one in the list, as shown in the next screenshot. You can either click the name from there, or point your browser to<code class="literal"> http://localhost:8080/hello</code>, to see the application running.<a id="id41" class="indexterm"/>
</p><div><img src="img/7481_02_03.jpg" alt="Running the default application"/></div><p>At this point, your browser should display a very simple HTML page with a message telling you that Grok is up and running, as seen in the following screenshot:<a id="id42" class="indexterm"/>
</p><div><img src="img/7481_02_04.jpg" alt="Running the default application"/></div><p>To stop the server, you need to press<em> Ctrl + C</em>, which will let you regain control of the shell. To restart it again, just rerun the<code class="literal"> paster serve</code> command.<a id="id43" class="indexterm"/>
</p></div></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch02lvl1sec06"/>What's inside a Grok project?</h1></div></div></div><p>As we mentioned earlier, the<code class="literal"> grokproject</code> command that we used to create a project in the last section uses (behind the scenes) a tool called<code class="literal"> zc.buildout</code> a system for managing repeatable development and production environments.<code class="literal"> buildout</code> took care of downloading all of Grok's dependencies, building and installing them under the project directory. It also installed all of the scripts required to run Grok, like the<code class="literal"> paster</code> command that we used before.<a id="id44" class="indexterm"/>
</p><p>We'll take a closer look at<code class="literal"> buildout</code> and its directory structure later in this book. For now, just note that the files in the main project directory are a part of the<code class="literal"> buildout</code>. The actual Grok application will be stored under the<code class="literal"> src</code> directory.</p><p>Let's take a look at the directories and files specifically associated with the hello world Grok application that we created.</p><div><div><div><div><h2 class="title"><a id="ch02lvl2sec07"/>Overview of the application structure</h2></div></div></div><p>The hello world application code is stored inside the<code class="literal"> src</code> subdirectory under the<code class="literal"> helloworld</code> directory that<code class="literal"> grokproject</code> created for us, earlier in this chapter. Let's take a look at the files stored there:<a id="id45" class="indexterm"/>
</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>File</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">app.py</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Contains the models and views for the application</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">app_templates</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Directory where application templates are stored</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">app.txt</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Functional tests for the application</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">configure.zcml</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Zope 3 XML configuration file</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">ftesting.zcml</code>
</p>
</td><td style="text-align: left" valign="top">
<p>XML configuration for functional tests</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">__init__.py</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This file exists to make the directory a package</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">startup.py</code>
</p>
</td><td style="text-align: left" valign="top">
<p>WSGI application factory</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">static</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Directory for static resources, such as images and CSS</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">tests.py</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Contains application testing code</p>
</td></tr></tbody></table></div><p>We'll have more to say about all of these files in further chapters, but for now the most important points to take home are:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The file<code class="literal"> app.py</code> contains the actual application code, which in this case is minimal.</li><li class="listitem" style="list-style-type: disc">The message that was displayed in the browser window when we executed the application comes from the<code class="literal"> index.pt</code> template stored inside the<code class="literal"> app_templates</code> directory.</li><li class="listitem" style="list-style-type: disc">An XML configuration file, which is used mainly to load Grok's configuration.</li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec08"/>Creating our first template</h2></div></div></div><p>In the last section, we presented a template that comprises the only visible part of the hello world application. This template can be found inside the<code class="literal"> src/app_templates</code> directory of our Grok project. To get our feet wet with Grok, let's change that template and add a message of our own.<a id="id46" class="indexterm"/>
</p><p>From the<code class="literal"> helloworld</code> directory, open the file<code class="literal"> src/app_templates/index.pt</code> using your favorite text editor. The file has the following contents:</p><div><pre class="programlisting">&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Congratulations!&lt;/h1&gt;
&lt;p&gt;Your Grok application is up and running.
Edit &lt;code&gt;testdrive/app_templates/index.pt&lt;/code&gt; to change
this page.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div><p>Change the file to look like this:<a id="id47" class="indexterm"/>
</p><div><pre class="programlisting">&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Hello World!&lt;/h1&gt;
&lt;p&gt;Grok the caveman says hi.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div><p>Actually, you can change the message to say whatever you like; just be aware that Grok templates require XHTML.</p><p>Finally, save the template and run the server instance using<code class="literal"> paster</code> again:</p><div><pre class="programlisting"><strong># bin/paster serve parts/etc/deploy.ini
</strong>
</pre></div><p>If you left the server running before, there's no need to restart it for this change, as modifications to page templates, images, and CSS can be viewed immediately.</p><p>Open the URL<code class="literal"> http://localhost:8080/hello</code> in your browser. You should see something similar to the following screenshot:</p><div><img src="img/7481_02_05.jpg" alt="Creating our first template"/></div><p>Grok says hi. Now rejoice, you have finished your first Grok application.<a id="id48" class="indexterm"/>
</p></div></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch02lvl1sec07"/>The Grok admin UI</h1></div></div></div><p>You briefly interacted with the Grok admin application manager before, when you named and launched the hello world application. Let's take a look in more detail at the three tabs in this admin UI.<a id="id49" class="indexterm"/>
</p><div><div><div><div><h2 class="title"><a id="ch02lvl2sec09"/>Applications</h2></div></div></div><p>In this tab, you can manage all your application instances. For any application that you define, you will see its dotted class path, such as<code class="literal"> helloworld.app.Helloworld</code> in our example, and a text box and button for creating and naming an instance.<a id="id50" class="indexterm"/>
</p><p>Once you create an instance of an application, you will see it listed at the top of the page, along with any other application that you might have created before. From there you can launch an application by clicking on its name, or can delete it, or rename it by using the checkbox on its left and the corresponding button.</p><p>You can also use the<strong> object browser</strong> link next to the application's name to inspect the instance and take a look at its base classes, attributes, properties, and methods. For example, it's possible to explore the documentation included in the docstrings of a class or module. You can take a look at the second screenshot under the<em> Running the default application</em> section to see the link to the object browser in the Grok admin UI.</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec10"/>Server control</h2></div></div></div><p>The<strong> Server Control</strong> tab allows you to take a look at the server process information, such as uptime, platform, and software versions. It also allows you to start, stop, or restart the server process, provided you are running it as a daemon and not from the command line. See the next screenshot for an example of the information found in this tab.<a id="id51" class="indexterm"/>
</p><div><img src="img/7481_02_06.jpg" alt="Server control"/></div><p>Because the<strong> ZODB</strong> that Grok uses for persistence is transactional and supports undo, it tends to grow a lot in size as more and more objects are added to it and modified constantly. To keep your project's database neat and tidy, it is recommended to "pack" it regularly. The packing process deletes older revisions of your objects and keeps only the latest information, thus reducing file size.</p><p>You can pack the ZODB from Grok from the server control panel. Just pick the number of days for which you would like to preserve object information and click on the<strong> Pack</strong> button. A value of<strong> 0</strong> clears all previous object revisions leaving only the latest versions of all objects. The packing process runs on the background, so your application can still serve requests while it takes place.</p><p>One last feature you can use from this tab is administrative message, which allows you to type in a message that will be seen by all administrators on every page of the Grok admin UI until someone resets the text.<a id="id52" class="indexterm"/>
</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec11"/>Documentation</h2></div></div></div><p>The<strong> Documentation</strong> tab presents links to the DocGrok package and object browsers, which allow you to look at all the information provided by most of the things living under the running Grok process. This includes, but is not limited to objects, classes, modules, functions, and text files.<a id="id53" class="indexterm"/>
</p></div></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch02lvl1sec08"/>Summary</h1></div></div></div><p>In this chapter, we installed Grok and its dependencies and created our first Grok project and application.</p><p>Now that we can create our own Grok projects, it's time to learn how to define and create different kinds of views and develop our first working application using that knowledge.</p></div></div>
</body></html>