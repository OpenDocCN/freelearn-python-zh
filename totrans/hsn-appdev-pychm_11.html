<html><head></head><body>
<div id="_idContainer367">
<h1 class="chapter-number" id="_idParaDest-261"><a id="_idTextAnchor266"/><span class="koboSpan" id="kobo.1.1">11</span></h1>
<h1 id="_idParaDest-262"><a id="_idTextAnchor267"/><span class="koboSpan" id="kobo.2.1">Understanding Database Management in PyCharm</span></h1>
<p><span class="koboSpan" id="kobo.3.1">What do horseshoe crabs, coelacanths, crocodiles, and relational databases have in common? </span><span class="koboSpan" id="kobo.3.2">I’ll wait while you go look up </span><em class="italic"><span class="koboSpan" id="kobo.4.1">coelacanth</span></em><span class="koboSpan" id="kobo.5.1">. </span><span class="koboSpan" id="kobo.5.2">All four of these have been around for millions of years and yet have evolved very little. </span><span class="koboSpan" id="kobo.5.3">OK, databases haven’t been around for millions of years, but they have been around for millions of internet years. </span><span class="koboSpan" id="kobo.5.4">Everybody knows that internet years are very short. </span><span class="koboSpan" id="kobo.5.5">JavaScript developers often joke that before lunchtime, anywhere in the world, dozens of new frameworks have been invented, risen to prominence, fallen out of favor, and then been abandoned all before you finish </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">your noodles.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">In the early 1970s, a researcher named E. </span><span class="koboSpan" id="kobo.7.2">F. </span><span class="koboSpan" id="kobo.7.3">Codd was working at IBM’s San Jose Research Laboratory in California. </span><span class="koboSpan" id="kobo.7.4">He developed a revolutionary concept called </span><strong class="bold"><span class="koboSpan" id="kobo.8.1">the relational model of data</span></strong><span class="koboSpan" id="kobo.9.1">. </span><span class="koboSpan" id="kobo.9.2">In his </span><a id="_idIndexMarker894"/><span class="koboSpan" id="kobo.10.1">seminal paper titled </span><em class="italic"><span class="koboSpan" id="kobo.11.1">A Relational Model of Data for Large Shared Data Banks</span></em><span class="koboSpan" id="kobo.12.1">, published in 1970, Codd outlined the principles and foundations of this new approach to organizing and </span><span class="No-Break"><span class="koboSpan" id="kobo.13.1">retrieving data.</span></span></p>
<p><span class="koboSpan" id="kobo.14.1">Codd’s relational model proposed a way to represent data as a collection of tables, known as relations, with each table consisting of rows and columns. </span><span class="koboSpan" id="kobo.14.2">He introduced the concept of </span><strong class="bold"><span class="koboSpan" id="kobo.15.1">relational algebra</span></strong><span class="koboSpan" id="kobo.16.1">, a mathematical framework for manipulating and querying data in these tables. </span><span class="koboSpan" id="kobo.16.2">The model emphasized the use of mathematical </span><strong class="bold"><span class="koboSpan" id="kobo.17.1">set theory</span></strong><span class="koboSpan" id="kobo.18.1"> and logic to define relationships and perform operations on </span><span class="No-Break"><span class="koboSpan" id="kobo.19.1">the data.</span></span></p>
<p><span class="koboSpan" id="kobo.20.1">Codd’s ideas challenged the prevailing hierarchical and network database models of the time, which were more complex and less flexible. </span><span class="koboSpan" id="kobo.20.2">The relational model offered a simpler and more intuitive way to manage data, providing a foundation for </span><strong class="bold"><span class="koboSpan" id="kobo.21.1">Structured Query Language</span></strong><span class="koboSpan" id="kobo.22.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.23.1">SQL</span></strong><span class="koboSpan" id="kobo.24.1">) and other tools used in </span><span class="No-Break"><span class="koboSpan" id="kobo.25.1">relational databases.</span></span></p>
<p><span class="koboSpan" id="kobo.26.1">In 1974, IBM released the first </span><a id="_idIndexMarker895"/><span class="koboSpan" id="kobo.27.1">commercially available </span><strong class="bold"><span class="koboSpan" id="kobo.28.1">relational database management system</span></strong><span class="koboSpan" id="kobo.29.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.30.1">RDBMS</span></strong><span class="koboSpan" id="kobo.31.1">), called </span><em class="italic"><span class="koboSpan" id="kobo.32.1">System R</span></em><span class="koboSpan" id="kobo.33.1">, based on Codd’s work. </span><span class="koboSpan" id="kobo.33.2">System R implemented many of the concepts outlined in Codd’s research and became an influential precursor to subsequent relational database systems. </span><span class="koboSpan" id="kobo.33.3">In 1974, IBM released System R based on Codd’s work, but the product wasn’t aggressively marketed or sold because IBM executives were worried about cannibalizing sales on other database systems sold by the company. </span><span class="koboSpan" id="kobo.33.4">During that time, another start-up database company was born: </span><strong class="bold"><span class="koboSpan" id="kobo.34.1">Oracle</span></strong><span class="koboSpan" id="kobo.35.1">. </span><span class="koboSpan" id="kobo.35.2">The initial release of Oracle was developed by Larry Ellison, Bob Miner, and Ed Oates. </span><span class="koboSpan" id="kobo.35.3">Released in 1983, Oracle is generally considered to be the first commercial success even though IBM had a serious </span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">head start.</span></span></p>
<p><span class="koboSpan" id="kobo.37.1">Relational database technology evolved throughout the 80s and 90s, and along the way, it became a staple of corporate IT in every industry in every corner of the globe. </span><span class="koboSpan" id="kobo.37.2">In 1986, the SQL language became standardized. </span><span class="koboSpan" id="kobo.37.3">The standard evolved over time, but to be honest, 49 years after the invention of SQL, most development is done with the simplest and oldest set of </span><span class="No-Break"><span class="koboSpan" id="kobo.38.1">language statements.</span></span></p>
<p><span class="koboSpan" id="kobo.39.1">A moment ago, I stated that Codd’s ideas challenged the prevailing hierarchical and network database models of the time, which were more complex and less flexible. </span><span class="koboSpan" id="kobo.39.2">It is interesting to note that in the early 2000s, there was a shift away from relational database technology toward what we call </span><strong class="bold"><span class="koboSpan" id="kobo.40.1">NoSQL databases</span></strong><span class="koboSpan" id="kobo.41.1">. </span><span class="koboSpan" id="kobo.41.2">The world of IT often acts like a pendulum, forever swinging back and forth. </span><span class="koboSpan" id="kobo.41.3">We used to have relatively low-powered PCs capable of playing video files at 12 frames per second in a postage stamp-sized window. </span><span class="koboSpan" id="kobo.41.4">Technology improved to the point where we could watch a 4K high-definition video at full speed on a PC, but then we invented small hand-held devices, such as the iPod, and we were back to low-end processing and choppy, grainy video. </span><span class="koboSpan" id="kobo.41.5">Eventually, those improved into the iPhone, which can play video at high definition and high frame rates. </span><span class="koboSpan" id="kobo.41.6">Some iPhones are bigger than the TV I had </span><span class="No-Break"><span class="koboSpan" id="kobo.42.1">in college.</span></span></p>
<p><span class="koboSpan" id="kobo.43.1">Likewise, with databases, one day the world was using hierarchical and network-oriented databases. </span><span class="koboSpan" id="kobo.43.2">The next day everything swung to a new thing called </span><em class="italic"><span class="koboSpan" id="kobo.44.1">relational</span></em><span class="koboSpan" id="kobo.45.1">. </span><span class="koboSpan" id="kobo.45.2">Today, we see a swing back in the other direction. </span><span class="koboSpan" id="kobo.45.3">More and more projects today favor non-relational databases, many of which support hierarchical data. </span><span class="koboSpan" id="kobo.45.4">Regardless of which technology you might favor, it is safe to say that just about any project you build, especially in the corporate IT world, will interact with some database in some </span><span class="No-Break"><span class="koboSpan" id="kobo.46.1">big way.</span></span></p>
<p><span class="koboSpan" id="kobo.47.1">In 2015, JetBrains created a new product aimed at becoming a popular IDE for database developers. </span><strong class="bold"><span class="koboSpan" id="kobo.48.1">DataGrip</span></strong><span class="koboSpan" id="kobo.49.1"> was created to provide a unified interface and robust toolset for working with various databases. </span><span class="koboSpan" id="kobo.49.2">It offers features such as intelligent code completion, advanced SQL editing capabilities, schema navigation, data analysis, and integration with version control systems. </span><span class="koboSpan" id="kobo.49.3">Like the web development product by JetBrains, WebStorm, the DataGrip product is integrated into the Professional edition of PyCharm through its plugin system. </span><span class="koboSpan" id="kobo.49.4">Consider that your 99 USD investment in PyCharm Professional gets you a Python IDE, a JavaScript IDE, an IDE for web frontend work in HTML and CSS, and now a fully fledged IDE for database work and you’ll see you’ve gotten a </span><span class="No-Break"><span class="koboSpan" id="kobo.50.1">solid deal!</span></span></p>
<p><span class="koboSpan" id="kobo.51.1">In this chapter, we will cover the features of PyCharm related to databases. </span><span class="koboSpan" id="kobo.51.2">By the end of the chapter, you will have learned </span><span class="No-Break"><span class="koboSpan" id="kobo.52.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.53.1">Some database history and some basics just to make sure we’re all on the same page in terms of terminology. </span><span class="koboSpan" id="kobo.53.2">If you’ve been developing software for a while, this might be a review. </span><span class="koboSpan" id="kobo.53.3">If you’re new, I will endeavor to provide you with the best possible introduction to </span><span class="No-Break"><span class="koboSpan" id="kobo.54.1">database technology.</span></span></li>
<li><span class="koboSpan" id="kobo.55.1">How to navigate to the database tools in PyCharm, which are hidden away in a tab on the right side of the interface. </span><span class="koboSpan" id="kobo.55.2">I have met many developers who have used PyCharm for years yet don’t know these tools are </span><span class="No-Break"><span class="koboSpan" id="kobo.56.1">even present.</span></span></li>
<li><span class="koboSpan" id="kobo.57.1">How to connect to different databases, including how to add the necessary connection drivers to PyCharm. </span><span class="koboSpan" id="kobo.57.2">JetBrains has made this </span><span class="No-Break"><span class="koboSpan" id="kobo.58.1">very easy!</span></span></li>
<li><span class="koboSpan" id="kobo.59.1">How to configure SQL dialects for individual projects as well </span><span class="No-Break"><span class="koboSpan" id="kobo.60.1">as globally.</span></span></li>
<li><span class="koboSpan" id="kobo.61.1">How to use SQL generation templates to help you write SQL queries </span><span class="No-Break"><span class="koboSpan" id="kobo.62.1">more quickly.</span></span></li>
<li><span class="koboSpan" id="kobo.63.1">How to generate an </span><strong class="bold"><span class="koboSpan" id="kobo.64.1">entity relationship </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.65.1">diagram</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.66.1"> (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.67.1">ERD</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.68.1">).</span></span></li>
<li><span class="koboSpan" id="kobo.69.1">How to use the graphical designers to build </span><span class="No-Break"><span class="koboSpan" id="kobo.70.1">tables easily.</span></span></li>
<li><span class="koboSpan" id="kobo.71.1">How to use consoles to create and run ad hoc queries against </span><span class="No-Break"><span class="koboSpan" id="kobo.72.1">any database.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.73.1">On a personal note, besides learning to code in BASIC when I was 12, relational technology was the first skill I mastered when I got into the IT field over 30 years ago. </span><span class="koboSpan" id="kobo.73.2">This is a skill set that has always been in demand, and will probably continue to be in demand for many years to come. </span><span class="koboSpan" id="kobo.73.3">It is a subject I have extensive experience in, and I am excited to share that experience with you in this chapter. </span><span class="koboSpan" id="kobo.73.4">So, let’s get </span><span class="No-Break"><span class="koboSpan" id="kobo.74.1">to it</span><a id="_idTextAnchor268"/><span class="koboSpan" id="kobo.75.1">!</span></span></p>
<h1 id="_idParaDest-263"><a id="_idTextAnchor269"/><span class="koboSpan" id="kobo.76.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.77.1">In order to proceed with this chapter, and indeed the rest of the book, you will need </span><span class="No-Break"><span class="koboSpan" id="kobo.78.1">the following:</span></span></p>
<p><span class="koboSpan" id="kobo.79.1">An installed and working Python interpreter. </span><span class="koboSpan" id="kobo.79.2">I’ll be using the latest </span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">from </span></span><a href="https://python.org"><span class="No-Break"><span class="koboSpan" id="kobo.81.1">https://python.org</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.82.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.83.1">An installed and working copy of PyCharm. </span><span class="koboSpan" id="kobo.83.2">Installation was covered in </span><a href="B19644_02.xhtml#_idTextAnchor028"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.84.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.85.1">, </span><em class="italic"><span class="koboSpan" id="kobo.86.1">Installation and Configuration</span></em><span class="koboSpan" id="kobo.87.1">, in case you are jumping into the middle of </span><span class="No-Break"><span class="koboSpan" id="kobo.88.1">the book.</span></span></p>
<p><span class="koboSpan" id="kobo.89.1">A database server is a nice-to-have in this chapter so you can practice on a real database. </span><span class="koboSpan" id="kobo.89.2">There are dozens of popular relational databases to choose from, so it is not practical for me to cover all of them. </span><span class="koboSpan" id="kobo.89.3">I will be running </span><strong class="bold"><span class="koboSpan" id="kobo.90.1">MySQL</span></strong><span class="koboSpan" id="kobo.91.1"> using </span><strong class="bold"><span class="koboSpan" id="kobo.92.1">Docker Desktop</span></strong><span class="koboSpan" id="kobo.93.1">. </span><span class="koboSpan" id="kobo.93.2">If you plan on following along, you’ll need to have Docker Desktop installed on your computer. </span><span class="koboSpan" id="kobo.93.3">You can find instructions for installation </span><span class="No-Break"><span class="koboSpan" id="kobo.94.1">at </span></span><a href="https://www.docker.com/products/docker-desktop/"><span class="No-Break"><span class="koboSpan" id="kobo.95.1">https://www.docker.com/products/docker-desktop/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.96.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.97.1">This book’s sample source code is from GitHub. </span><span class="koboSpan" id="kobo.97.2">We covered cloning the code in </span><a href="B19644_02.xhtml#_idTextAnchor028"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.98.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.99.1">, </span><em class="italic"><span class="koboSpan" id="kobo.100.1">Installation and Configuration</span></em><span class="koboSpan" id="kobo.101.1">. </span><span class="koboSpan" id="kobo.101.2">You’ll find this chapter’s relevant code </span><span class="No-Break"><span class="koboSpan" id="kobo.102.1">at </span></span><a href="https://github.com/PacktPublishing/Hands-On-Application-Development-with-PyCharm---Second-Edition/tree/main/chapter-11"><span class="No-Break"><span class="koboSpan" id="kobo.103.1">https://github.com/PacktPublishing/Hands-On-Application-Development-with-PyCharm---Second-Edition/tree/main/chapter-11</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.104.1">.</span></span></p>
<h1 id="_idParaDest-264"><a id="_idTextAnchor270"/><span class="koboSpan" id="kobo.105.1">Relational databases in a nutshell</span></h1>
<p><span class="koboSpan" id="kobo.106.1">The idea of relational data conceived by E. </span><span class="koboSpan" id="kobo.106.2">F. </span><span class="koboSpan" id="kobo.106.3">Codd is based on a few simple principles. </span><span class="koboSpan" id="kobo.106.4">Firstly, data can be represented in</span><a id="_idIndexMarker896"/><span class="koboSpan" id="kobo.107.1"> sets called </span><em class="italic"><span class="koboSpan" id="kobo.108.1">tables</span></em><span class="koboSpan" id="kobo.109.1">. </span><span class="koboSpan" id="kobo.109.2">A </span><strong class="bold"><span class="koboSpan" id="kobo.110.1">table</span></strong><span class="koboSpan" id="kobo.111.1"> consists of </span><strong class="bold"><span class="koboSpan" id="kobo.112.1">rows</span></strong><span class="koboSpan" id="kobo.113.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.114.1">columns</span></strong><span class="koboSpan" id="kobo.115.1">. </span><span class="koboSpan" id="kobo.115.2">For </span><a id="_idIndexMarker897"/><span class="koboSpan" id="kobo.116.1">example, if we</span><a id="_idIndexMarker898"/><span class="koboSpan" id="kobo.117.1"> wanted to create a database to be used by an online bookstore, the first table we might </span><a id="_idIndexMarker899"/><span class="koboSpan" id="kobo.118.1">want to think about is one called </span><strong class="source-inline"><span class="koboSpan" id="kobo.119.1">books</span></strong><span class="koboSpan" id="kobo.120.1">. </span><span class="koboSpan" id="kobo.120.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.121.1">books</span></strong><span class="koboSpan" id="kobo.122.1"> table will contain columns that define the data within those columns – maybe something </span><span class="No-Break"><span class="koboSpan" id="kobo.123.1">like this:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001-4">
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.124.1">Title</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.125.1">ISBN</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.126.1">Page Count</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.127.1">Author</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.128.1">Price</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.129.1">The Art </span><span class="No-Break"><span class="koboSpan" id="kobo.130.1">of War</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.131.1">1599869772</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.132.1">68</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.133.1">Sun Tzu</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.134.1">4.99</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.135.1">Book of </span><span class="No-Break"><span class="koboSpan" id="kobo.136.1">Five Rings</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.137.1">8387743849</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.138.1">43</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.139.1">Miyamoto Musashi</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.140.1">4.50</span></span></p>
</td>
</tr>
</tbody>
</table>
<p><span class="koboSpan" id="kobo.141.1">This table has five columns designed to </span><a id="_idIndexMarker900"/><span class="koboSpan" id="kobo.142.1">structure data about books. </span><span class="koboSpan" id="kobo.142.2">We have two books, which are stored as rows in </span><span class="No-Break"><span class="koboSpan" id="kobo.143.1">the table.</span></span></p>
<h1 id="_idParaDest-265"><a id="_idTextAnchor271"/><span class="koboSpan" id="kobo.144.1">Structured Query Language</span></h1>
<p><span class="koboSpan" id="kobo.145.1">E. </span><span class="koboSpan" id="kobo.145.2">F. </span><span class="koboSpan" id="kobo.145.3">Codd’s paper that</span><a id="_idIndexMarker901"/><span class="koboSpan" id="kobo.146.1"> defined relational algebra served as the basis for SQL. </span><span class="koboSpan" id="kobo.146.2">SQL is unlike any other coding language you will ever use because it is one of only a handful of languages that use a declarative paradigm. </span><span class="koboSpan" id="kobo.146.3">Most languages you use, including Python, use an imperative paradigm. </span><span class="koboSpan" id="kobo.146.4">In short, the language serves as a syntactical framework to give a computer instructions on what you want it to do. </span><span class="koboSpan" id="kobo.146.5">You are basically a micro-manager. </span><span class="koboSpan" id="kobo.146.6">You specify every input, every output and every step the program will take during the processing that happens to get the input to the output. </span><span class="koboSpan" id="kobo.146.7">You must be meticulous, as the computer will take you literally. </span><span class="koboSpan" id="kobo.146.8">If you leave out even a single detail, you are setting things up </span><span class="No-Break"><span class="koboSpan" id="kobo.147.1">to malfunction.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.148.1">Declarative programming</span></strong><span class="koboSpan" id="kobo.149.1">, on the other hand, entails </span><a id="_idIndexMarker902"/><span class="koboSpan" id="kobo.150.1">merely specifying the output you want from an implicit input. </span><span class="koboSpan" id="kobo.150.2">You have little to no control over the operations performed to derive the output from the input. </span><span class="koboSpan" id="kobo.150.3">Consider this SQL statement designed to get some rows from your </span><span class="No-Break"><span class="koboSpan" id="kobo.151.1">bookstore database:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.152.1">
SELECT title AS Title, isbn AS ISBN, author AS Author, price AS Price FROM books ORDER BY price DESC</span></pre> <p><span class="koboSpan" id="kobo.153.1">This query will produce some output consisting of a table that has a few of the columns from your original database, which serves as the implicit input. </span><span class="koboSpan" id="kobo.153.2">You’ll get the </span><span class="No-Break"><span class="koboSpan" id="kobo.154.1">following columns:</span></span></p>
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.155.1">Title</span></strong></span></p>
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.156.1">ISBN</span></strong></span></p>
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.157.1">Author</span></strong></span></p>
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.158.1">Price</span></strong></span></p>
<p><span class="koboSpan" id="kobo.159.1">But you won’t get the page count because you didn’t ask for it in the query. </span><span class="koboSpan" id="kobo.159.2">The input data source is implied in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.160.1">FROM books</span></strong><span class="koboSpan" id="kobo.161.1"> section of the query. </span><span class="koboSpan" id="kobo.161.2">At the end, we have a request to order the results by price in descending order (</span><strong class="source-inline"><span class="koboSpan" id="kobo.162.1">DESC</span></strong><span class="koboSpan" id="kobo.163.1">), which will make our resulting tabular list of books appear from the most expensive to </span><span class="No-Break"><span class="koboSpan" id="kobo.164.1">the cheapest.</span></span></p>
<h2 id="_idParaDest-266"><a id="_idTextAnchor272"/><span class="koboSpan" id="kobo.165.1">The two halves of SQL</span></h2>
<p><span class="koboSpan" id="kobo.166.1">SQL itself is split into two separate sets of syntax: </span><strong class="bold"><span class="koboSpan" id="kobo.167.1">Data Definition Language</span></strong><span class="koboSpan" id="kobo.168.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.169.1">DDL</span></strong><span class="koboSpan" id="kobo.170.1">) and </span><strong class="bold"><span class="koboSpan" id="kobo.171.1">Data Manipulation Language</span></strong><span class="koboSpan" id="kobo.172.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.173.1">DML</span></strong><span class="koboSpan" id="kobo.174.1">). </span><span class="koboSpan" id="kobo.174.2">DDL is used to define the structure of the database. </span><span class="koboSpan" id="kobo.174.3">DML is used to query the database and to </span><a id="_idIndexMarker903"/><span class="koboSpan" id="kobo.175.1">perform</span><a id="_idIndexMarker904"/><span class="koboSpan" id="kobo.176.1"> the four basic </span><strong class="bold"><span class="koboSpan" id="kobo.177.1">Create, Read, Update, Delete</span></strong><span class="koboSpan" id="kobo.178.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.179.1">CRUD</span></strong><span class="koboSpan" id="kobo.180.1">) operations we’ve referenced in </span><a id="_idIndexMarker905"/><span class="koboSpan" id="kobo.181.1">early chapters. </span><span class="koboSpan" id="kobo.181.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.182.1">SELECT</span></strong><span class="koboSpan" id="kobo.183.1"> statement presented earlier is an example of a read operation. </span><span class="koboSpan" id="kobo.183.2">SQL has keywords for </span><strong class="source-inline"><span class="koboSpan" id="kobo.184.1">INSERT</span></strong><span class="koboSpan" id="kobo.185.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.186.1">UPDATE</span></strong><span class="koboSpan" id="kobo.187.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.188.1">DELETE</span></strong><span class="koboSpan" id="kobo.189.1"> operations for records which are straightforward, so I want to focus on DDL since this is going to be a big part of your work </span><span class="No-Break"><span class="koboSpan" id="kobo.190.1">in PyCharm.</span></span></p>
<p><span class="koboSpan" id="kobo.191.1">Our earlier example of a table to be used in a bookstore application had one table in it called </span><strong class="source-inline"><span class="koboSpan" id="kobo.192.1">books</span></strong><span class="koboSpan" id="kobo.193.1">. </span><span class="koboSpan" id="kobo.193.2">That table contained a set of columns, which we would define using DDL </span><span class="No-Break"><span class="koboSpan" id="kobo.194.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.195.1">
CREATE TABLE books (
  title VARCHAR(255),
  isbn VARCHAR(255) UNIQUE,
  price DECIMAL(10, 2),
  author VARCHAR(255),
  page_count INT
);</span></pre> <p><span class="koboSpan" id="kobo.196.1">If you are new to SQL, you might have noticed the keywords are capitalized. </span><span class="koboSpan" id="kobo.196.2">In fact, I’ll bet you correctly assumed that the capitalized words were keywords. </span><span class="koboSpan" id="kobo.196.3">While it isn’t a requirement to capitalize keywords, it is good practice – particularly if your project’s database lead is a large man retired from the United States Marine Corps who is particular about the details of syntax in </span><em class="italic"><span class="koboSpan" id="kobo.197.1">his</span></em><span class="koboSpan" id="kobo.198.1"> database! </span><span class="koboSpan" id="kobo.198.2">In this case, good practice might become a matter </span><span class="No-Break"><span class="koboSpan" id="kobo.199.1">of survival.</span></span></p>
<p><span class="koboSpan" id="kobo.200.1">Most of what you read in the table’s DDL is easy to figure out. </span><span class="koboSpan" id="kobo.200.2">We’re creating a table called </span><strong class="source-inline"><span class="koboSpan" id="kobo.201.1">books</span></strong><span class="koboSpan" id="kobo.202.1">. </span><span class="koboSpan" id="kobo.202.2">We already knew about the column names. </span><span class="koboSpan" id="kobo.202.3">SQL uses a strong type system, meaning you have to define the type of data that will go into a column, and violating that constraint might come with consequences. </span><span class="koboSpan" id="kobo.202.4">I’ve said many times before that a developer’s job is to protect a program from entering an invalid state. </span><span class="koboSpan" id="kobo.202.5">Likewise, it is a database developer’s job, as well as that </span><a id="_idIndexMarker906"/><span class="koboSpan" id="kobo.203.1">of a </span><strong class="bold"><span class="koboSpan" id="kobo.204.1">database administrator</span></strong><span class="koboSpan" id="kobo.205.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.206.1">DBA</span></strong><span class="koboSpan" id="kobo.207.1">), to limit the ability of a program to enter invalid data into a database. </span><span class="koboSpan" id="kobo.207.2">The first line of defense is the type system. </span><span class="koboSpan" id="kobo.207.3">The </span><a id="_idIndexMarker907"/><span class="koboSpan" id="kobo.208.1">thing that confuses or even intimidates developers is the different names for the types. </span><span class="koboSpan" id="kobo.208.2">Looking at our</span><a id="_idIndexMarker908"/><span class="koboSpan" id="kobo.209.1"> preceding list, you might be able to guess that </span><strong class="source-inline"><span class="koboSpan" id="kobo.210.1">VARCHAR</span></strong><span class="koboSpan" id="kobo.211.1"> refers to a variable-length set of characters. </span><span class="koboSpan" id="kobo.211.2">Programmers call this a </span><em class="italic"><span class="koboSpan" id="kobo.212.1">string</span></em><span class="koboSpan" id="kobo.213.1">. </span><span class="koboSpan" id="kobo.213.2">The number (</span><strong class="source-inline"><span class="koboSpan" id="kobo.214.1">255</span></strong><span class="koboSpan" id="kobo.215.1">) after the type refers to the maximum length of </span><strong class="source-inline"><span class="koboSpan" id="kobo.216.1">VARCHAR</span></strong><span class="koboSpan" id="kobo.217.1">. </span><span class="koboSpan" id="kobo.217.2">All of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.218.1">VARCHAR</span></strong><span class="koboSpan" id="kobo.219.1"> (string) fields in the database are limited to 255 characters in length. </span><span class="koboSpan" id="kobo.219.2">The number 255 is very common because many of us old-timers grew up in the world of 8-bit computing. </span><span class="koboSpan" id="kobo.219.3">The number 255, being the maximum value of an 8-bit unsigned integer, was a common maximum for the length of the field. </span><span class="koboSpan" id="kobo.219.4">We’d set it to that when we weren’t sure how long the data </span><span class="No-Break"><span class="koboSpan" id="kobo.220.1">might be.</span></span></p>
<p><span class="koboSpan" id="kobo.221.1">Naturally, today, we normally work in 32- and even 64-bit architectures, so the maximum can be much higher. </span><span class="koboSpan" id="kobo.221.2">It is normal to constrain ourselves to the old maximum because 255 characters are generally enough for most things. </span><span class="koboSpan" id="kobo.221.3">Specifying sane maximums helps keep your database storage and memory </span><span class="No-Break"><span class="koboSpan" id="kobo.222.1">requirements reasonable.</span></span></p>
<p><span class="koboSpan" id="kobo.223.1">Look at the </span><strong class="source-inline"><span class="koboSpan" id="kobo.224.1">price</span></strong><span class="koboSpan" id="kobo.225.1"> field. </span><span class="koboSpan" id="kobo.225.2">It is specified as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.226.1">DECIMAL</span></strong><span class="koboSpan" id="kobo.227.1"> type, which is obviously like a float. </span><span class="koboSpan" id="kobo.227.2">Database systems have different names for their types, so you should always consult your database system’s documentation to get the exact naming. </span><strong class="source-inline"><span class="koboSpan" id="kobo.228.1">DECIMAL</span></strong><span class="koboSpan" id="kobo.229.1"> is indeed a floating-point number, but we also specified the level of precision with </span><strong class="source-inline"><span class="koboSpan" id="kobo.230.1">(10,2)</span></strong><span class="koboSpan" id="kobo.231.1">. </span><span class="koboSpan" id="kobo.231.2">This means we can have a 10-digit number with 2 decimal places. </span><span class="koboSpan" id="kobo.231.3">This is commonly used to specify prices. </span><span class="koboSpan" id="kobo.231.4">Some database systems have specialized types specifically for currency. </span><span class="koboSpan" id="kobo.231.5">SQL Server is an example of this with their </span><strong class="source-inline"><span class="koboSpan" id="kobo.232.1">MONEY</span></strong><span class="koboSpan" id="kobo.233.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.234.1">SMALLMONEY</span></strong><span class="koboSpan" id="kobo.235.1"> types. </span><span class="koboSpan" id="kobo.235.2">Again, check your database system’s documentation for appropriate types since these specialized types aren’t part of </span><span class="No-Break"><span class="koboSpan" id="kobo.236.1">standard SQL.</span></span></p>
<h2 id="_idParaDest-267"><a id="_idTextAnchor273"/><span class="koboSpan" id="kobo.237.1">Relationships</span></h2>
<p><span class="koboSpan" id="kobo.238.1">Consider our bookstore</span><a id="_idIndexMarker909"/><span class="koboSpan" id="kobo.239.1"> will naturally grow in size and complexity. </span><span class="koboSpan" id="kobo.239.2">Let’s say we’ve added some different fields and removed some we weren’t using. </span><span class="koboSpan" id="kobo.239.3">Our new table structure looks </span><span class="No-Break"><span class="koboSpan" id="kobo.240.1">like this:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table002">
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.241.1">Title</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.242.1">Author_name</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.243.1">Author_email</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.244.1">Pages</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.245.1">Price</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.246.1">C Programming Language, </span><span class="No-Break"><span class="koboSpan" id="kobo.247.1">2nd Edition</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.248.1">Brian Kernighan and </span><span class="No-Break"><span class="koboSpan" id="kobo.249.1">Dennis Ritchie</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.250.1">bkernigan@notrealaddress.com</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.251.1">272</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.252.1">53.60</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.253.1">Real-World Implementation of C# </span><span class="No-Break"><span class="koboSpan" id="kobo.254.1">Design Patterns</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.255.1">Bruce </span><span class="No-Break"><span class="koboSpan" id="kobo.256.1">Van Horn</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.257.1">bvanhorn@notrealaddress.com</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.258.1">442</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.259.1">44.99</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.260.1">Hands-On Application Development </span><span class="No-Break"><span class="koboSpan" id="kobo.261.1">with PyCharm</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.262.1">Quan Nguyen</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.263.1">qnguyen@notrealaddress.com</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.264.1">7</span></span><span class="No-Break"><span class="koboSpan" id="kobo.265.1">85</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.266.1">35.45</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.267.1">Hands-On Application Development with PyCharm, </span><span class="No-Break"><span class="koboSpan" id="kobo.268.1">2</span></span><span class="No-Break"><span class="superscript"><span class="koboSpan" id="kobo.269.1">nd</span></span></span><span class="No-Break"><span class="koboSpan" id="kobo.270.1"> Edition</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.271.1">Bruce </span><span class="No-Break"><span class="koboSpan" id="kobo.272.1">Van Horn</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.273.1">bvanhorn@notrealaddress.com</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.274.1">840</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.275.1">44.99</span></span></p>
</td>
</tr>
</tbody>
</table>
<p><span class="koboSpan" id="kobo.276.1">Besides the complexity coming</span><a id="_idIndexMarker910"/><span class="koboSpan" id="kobo.277.1"> from more records, we’ve introduced some complexity in terms of design. </span><span class="koboSpan" id="kobo.277.2">At some point, it became important for us to track more information about the authors of any given book. </span><span class="koboSpan" id="kobo.277.3">We added fields for the name and email address, which seemed to solve our problems at first, but ultimately led to </span><span class="No-Break"><span class="koboSpan" id="kobo.278.1">more issues.</span></span></p>
<p><span class="koboSpan" id="kobo.279.1">The C book has two authors, but we only have one field. </span><span class="koboSpan" id="kobo.279.2">While it might be fine to store both authors as we did, there is also a field for the email address and this can only accommodate one address. </span><span class="koboSpan" id="kobo.279.3">This is not ideal since our objective might be to send royalty statements or sales reports to the authors. </span><span class="koboSpan" id="kobo.279.4">One address is </span><span class="No-Break"><span class="koboSpan" id="kobo.280.1">a problem.</span></span></p>
<p><span class="koboSpan" id="kobo.281.1">The email addresses will be duplicated in the event we store two books with the same author. </span><span class="koboSpan" id="kobo.281.2">If the author changes email addresses, all of the records have to be updated. </span><span class="koboSpan" id="kobo.281.3">This is the equivalent of hardcoded values kept in multiple places in a program. </span><span class="koboSpan" id="kobo.281.4">You have to remember to change it in lots of places. </span><span class="koboSpan" id="kobo.281.5">The problem is compounded if this email address data is duplicated in several </span><span class="No-Break"><span class="koboSpan" id="kobo.282.1">different tables.</span></span></p>
<p><span class="koboSpan" id="kobo.283.1">The solution to this is prescribed by SQL and the ideas behind relational algebra. </span><span class="koboSpan" id="kobo.283.2">You need a single source of truth for </span><a id="_idIndexMarker911"/><span class="koboSpan" id="kobo.284.1">the author’s data instead of mixing it in with other tables. </span><span class="koboSpan" id="kobo.284.2">So, we create a new table </span><span class="No-Break"><span class="koboSpan" id="kobo.285.1">for authors:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.286.1">
CREATE TABLE authors (
  id SERIAL PRIMARY KEY,
  first_name VARCHAR(255),
  last_name VARCHAR(255),
  email_address VARCHAR(255)
);</span></pre> <p><span class="koboSpan" id="kobo.287.1">This table has fields for the first and last names as well as the email address. </span><span class="koboSpan" id="kobo.287.2">It also has a field called </span><strong class="source-inline"><span class="koboSpan" id="kobo.288.1">id</span></strong><span class="koboSpan" id="kobo.289.1">, which is going to the server as a primary key. </span><span class="koboSpan" id="kobo.289.2">A primary key is a field that can uniquely identify the information in that row. </span><span class="koboSpan" id="kobo.289.3">The idea here is that every author gets only one row to store their information. </span><span class="koboSpan" id="kobo.289.4">We need some piece of data to uniquely identify that row. </span><span class="koboSpan" id="kobo.289.5">Consider my own records. </span><span class="koboSpan" id="kobo.289.6">My first and last names make poor choices to uniquely define my record in the database. </span><span class="koboSpan" id="kobo.289.7">I know of at least three other people named Bruce Van Horn. </span><span class="koboSpan" id="kobo.289.8">One was my father, who published in the medical field. </span><span class="koboSpan" id="kobo.289.9">One is a motivational speaker who publishes books in that literary field. </span><span class="koboSpan" id="kobo.289.10">I found another Bruce Van Horn on LinkedIn, and believe it or not, he too is a software developer! </span><span class="koboSpan" id="kobo.289.11">So the name is a poor choice as a </span><span class="No-Break"><span class="koboSpan" id="kobo.290.1">unique identifier.</span></span></p>
<p><span class="koboSpan" id="kobo.291.1">Email addresses might work, except that we’ve already figured out that email addresses can change. </span><span class="koboSpan" id="kobo.291.2">I have no fewer than five email addresses and at least one of these is so overtaken with spam that I no longer even check it. </span><span class="koboSpan" id="kobo.291.3">Email isn’t going </span><span class="No-Break"><span class="koboSpan" id="kobo.292.1">to work.</span></span></p>
<p><span class="koboSpan" id="kobo.293.1">The best practice is to use some piece of data that is unique but arbitrary, with no bearing at all on the rest of the data in the record. </span><span class="koboSpan" id="kobo.293.2">There are two ways to do this. </span><span class="koboSpan" id="kobo.293.3">The most common is to use a database </span><a id="_idIndexMarker912"/><span class="koboSpan" id="kobo.294.1">sequence. </span><span class="koboSpan" id="kobo.294.2">A </span><strong class="bold"><span class="koboSpan" id="kobo.295.1">sequence</span></strong><span class="koboSpan" id="kobo.296.1"> is an automatically incrementing source of integers. </span><span class="koboSpan" id="kobo.296.2">Each time a record is inserted into a table, the sequencer generates a sequential number, which is guaranteed to </span><span class="No-Break"><span class="koboSpan" id="kobo.297.1">be unique.</span></span></p>
<p><span class="koboSpan" id="kobo.298.1">The other approach is to use </span><strong class="bold"><span class="koboSpan" id="kobo.299.1">universally unique identifiers</span></strong><span class="koboSpan" id="kobo.300.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.301.1">UUIDs</span></strong><span class="koboSpan" id="kobo.302.1">). </span><span class="koboSpan" id="kobo.302.2">This approach uses an algorithm that presents </span><a id="_idIndexMarker913"/><span class="koboSpan" id="kobo.303.1">a combination of data that will make a unique ID. </span><span class="koboSpan" id="kobo.303.2">For example, you might take the serial number of a user’s processor, combine it with the current date stamp on the computer, and maybe lump in some information about the computer’s BIOS serial number, or maybe the IP address or the MAC address on the user’s network connection. </span><span class="koboSpan" id="kobo.303.3">If you take many factors, one of which involves time, the possibility of two computers </span><a id="_idIndexMarker914"/><span class="koboSpan" id="kobo.304.1">generating the same UUID is effectively nil. </span><span class="koboSpan" id="kobo.304.2">UUIDs are a little harder to work with than plain integers. </span><span class="koboSpan" id="kobo.304.3">A UUID might look like this: </span><strong class="source-inline"><span class="koboSpan" id="kobo.305.1">6f35e0e7-d99a-4437-b894-f73ff35bd3ad</span></strong><span class="koboSpan" id="kobo.306.1"> versus a record with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.307.1">id</span></strong><span class="koboSpan" id="kobo.308.1"> value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.309.1">16</span></strong><span class="koboSpan" id="kobo.310.1">. </span><span class="koboSpan" id="kobo.310.2">Which would you rather type into </span><span class="No-Break"><span class="koboSpan" id="kobo.311.1">your queries?</span></span></p>
<p><span class="koboSpan" id="kobo.312.1">Now that we have a field that uniquely identifies an author’s record, we can adjust our book table structure </span><span class="No-Break"><span class="koboSpan" id="kobo.313.1">like this:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table003">
<colgroup>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="bold"><a id="_idTextAnchor274"/></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.314.1">Title</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.315.1">pages</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.316.1">price</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.317.1">author_id</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.318.1">Real-World Implementation of C# </span><span class="No-Break"><span class="koboSpan" id="kobo.319.1">Design Patterns</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.320.1">442</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.321.1">44.99</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.322.1">2</span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.323.1">Hands-On Application Development </span><span class="No-Break"><span class="koboSpan" id="kobo.324.1">with PyCharm</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.325.1">785</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.326.1">35.45</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.327.1">1</span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.328.1">Hands-On Application Development with PyCharm, </span><span class="No-Break"><span class="koboSpan" id="kobo.329.1">2</span></span><span class="No-Break"><span class="superscript"><span class="koboSpan" id="kobo.330.1">nd</span></span></span><span class="No-Break"><span class="koboSpan" id="kobo.331.1"> Edition</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.332.1">840</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.333.1">44.99</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.334.1">2</span></p>
</td>
</tr>
</tbody>
</table>
<p><span class="koboSpan" id="kobo.335.1">Our </span><strong class="source-inline"><span class="koboSpan" id="kobo.336.1">authors</span></strong><span class="koboSpan" id="kobo.337.1"> table looks </span><span class="No-Break"><span class="koboSpan" id="kobo.338.1">like this:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table004">
<colgroup>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.339.1">author_id</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.340.1">first_name</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.341.1">last_name</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.342.1">email</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.343.1">1</span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.344.1">Quan</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.345.1">Nguyen</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.346.1">qnugyen@notrealaddress.com</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.347.1">2</span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.348.1">Bruce</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.349.1">Van Horn</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.350.1">bvanhorn@notrealaddress.com</span></span></p>
</td>
</tr>
</tbody>
</table>
<p><span class="koboSpan" id="kobo.351.1">The author ID in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.352.1">authors</span></strong><span class="koboSpan" id="kobo.353.1"> table is used as a related column in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.354.1">books</span></strong><span class="koboSpan" id="kobo.355.1"> table using a one-to-many relationship. </span><span class="koboSpan" id="kobo.355.2">Each author will have one record, which is related to many records in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.356.1">books</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.357.1"> table.</span></span></p>
<h2 id="_idParaDest-268"><a id="_idTextAnchor275"/><span class="koboSpan" id="kobo.358.1">More relational structures</span></h2>
<p><span class="koboSpan" id="kobo.359.1">We’ve solved a big problem using our </span><a id="_idIndexMarker915"/><span class="koboSpan" id="kobo.360.1">one-to-many table structure. </span><span class="koboSpan" id="kobo.360.2">We no longer have duplicate data in multiple records for our authors. </span><span class="koboSpan" id="kobo.360.3">We didn’t, however, solve all of our problems. </span><span class="koboSpan" id="kobo.360.4">For example, the C book has multiple authors. </span><span class="koboSpan" id="kobo.360.5">How can we store authors in a way that allows each book to support </span><span class="No-Break"><span class="koboSpan" id="kobo.361.1">multiple authors?</span></span></p>
<p><span class="koboSpan" id="kobo.362.1">I’m afraid we’ve reached the point where I tell you that this isn’t a book on SQL, nor is it a book on relational theory. </span><span class="koboSpan" id="kobo.362.2">If I’ve hooked you on this, I can recommend some excellent books that I used when I learned these things. </span><span class="koboSpan" id="kobo.362.3">We’ve presented enough relational database vocabulary to help you relate to what you will see in PyCharm’s tooling and that was my </span><span class="No-Break"><span class="koboSpan" id="kobo.363.1">real objective.</span></span></p>
<p><span class="koboSpan" id="kobo.364.1">Since I am not a total </span><a id="_idIndexMarker916"/><span class="koboSpan" id="kobo.365.1">degenerate, regardless of what you may read about me on Stack Overflow, I will give you the solution quickly and without many pages </span><span class="No-Break"><span class="koboSpan" id="kobo.366.1">of explanation.</span></span></p>
<p><span class="koboSpan" id="kobo.367.1">You’d solve it using what we call a mapping table. </span><span class="koboSpan" id="kobo.367.2">Your structure would require the addition of a table </span><span class="No-Break"><span class="koboSpan" id="kobo.368.1">called </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.369.1">books_authors_map</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.370.1">:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table005">
<colgroup>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.371.1">Id</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.372.1">Book_id</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.373.1">Author_id</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.374.1">1</span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.375.1">1</span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.376.1">1</span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.377.1">2</span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.378.1">1</span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.379.1">2</span></p>
</td>
</tr>
</tbody>
</table>
<p><span class="koboSpan" id="kobo.380.1">Your </span><strong class="source-inline"><span class="koboSpan" id="kobo.381.1">books</span></strong><span class="koboSpan" id="kobo.382.1"> table would look </span><span class="No-Break"><span class="koboSpan" id="kobo.383.1">like this:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table006">
<colgroup>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.384.1">Book_id</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.385.1">Title</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.386.1">Pages</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.387.1">Price</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.388.1">1</span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.389.1">The C </span><span class="No-Break"><span class="koboSpan" id="kobo.390.1">Programming Language</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.391.1">442</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.392.1">44.99</span></span></p>
</td>
</tr>
</tbody>
</table>
<p><span class="koboSpan" id="kobo.393.1">We took out the </span><strong class="source-inline"><span class="koboSpan" id="kobo.394.1">author_id</span></strong><span class="koboSpan" id="kobo.395.1"> field and added a </span><strong class="source-inline"><span class="koboSpan" id="kobo.396.1">book_id</span></strong><span class="koboSpan" id="kobo.397.1"> field, which really should have been there all along. </span><span class="koboSpan" id="kobo.397.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.398.1">authors</span></strong><span class="koboSpan" id="kobo.399.1"> table would look </span><span class="No-Break"><span class="koboSpan" id="kobo.400.1">the same:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table007">
<colgroup>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.401.1">Author_id</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.402.1">First_name</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.403.1">Last_name</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.404.1">Email</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.405.1">1</span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.406.1">Brian</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.407.1">Kernighan</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.408.1">bkernigan@notrealaddress.com</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.409.1">2</span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.410.1">Dennis</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.411.1">Ritchie</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.412.1">dritche@noterealaddress.com</span></span></p>
</td>
</tr>
</tbody>
</table>
<p><span class="koboSpan" id="kobo.413.1">The mapping table can map a </span><strong class="bold"><span class="koboSpan" id="kobo.414.1">many-to-many relationship</span></strong><span class="koboSpan" id="kobo.415.1"> between </span><strong class="source-inline"><span class="koboSpan" id="kobo.416.1">books</span></strong><span class="koboSpan" id="kobo.417.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.418.1">authors</span></strong><span class="koboSpan" id="kobo.419.1">! </span><span class="koboSpan" id="kobo.419.2">If either author goes solo and publishes a book without their co-author, that will work! </span><span class="koboSpan" id="kobo.419.3">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.420.1">books</span></strong><span class="koboSpan" id="kobo.421.1"> table’s record will have one related record in the map, which has one related record in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.422.1">authors</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.423.1"> table.</span></span></p>
<p><span class="koboSpan" id="kobo.424.1">If a book has 10 authors, it will have 1 book record, 10 author records, and 10 mapping entries. </span><span class="koboSpan" id="kobo.424.2">Relational algebra is pretty cool! </span><span class="koboSpan" id="kobo.424.3">It is an </span><a id="_idIndexMarker917"/><span class="koboSpan" id="kobo.425.1">underrated skill in today’s </span><a id="_idIndexMarker918"/><span class="koboSpan" id="kobo.426.1">world of </span><strong class="bold"><span class="koboSpan" id="kobo.427.1">object relational mappers</span></strong><span class="koboSpan" id="kobo.428.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.429.1">ORMs</span></strong><span class="koboSpan" id="kobo.430.1">), which abstract all of this into normal object structures. </span><span class="koboSpan" id="kobo.430.2">Developers today tend to </span><a id="_idIndexMarker919"/><span class="koboSpan" id="kobo.431.1">lose this skill. </span><span class="koboSpan" id="kobo.431.2">If you do, you give up a lot. </span><span class="koboSpan" id="kobo.431.3">You can make fine-grained modifications in your DDL that lead to huge performance gains for </span><span class="No-Break"><span class="koboSpan" id="kobo.432.1">your application.</span></span></p>
<p><span class="koboSpan" id="kobo.433.1">Speaking of that, let’s learn about PyCharm’s tooling for </span><span class="No-Break"><span class="koboSpan" id="kobo.434.1">database development.</span></span></p>
<h2 id="_idParaDest-269"><a id="_idTextAnchor276"/><span class="koboSpan" id="kobo.435.1">Database terminology uses simple English plurals</span></h2>
<p><span class="koboSpan" id="kobo.436.1">As we go through some of the terminology </span><a id="_idIndexMarker920"/><span class="koboSpan" id="kobo.437.1">used when talking about databases, I feel compelled to point out something that bothered me for a very long time. </span><span class="koboSpan" id="kobo.437.2">Many terms used when talking about databases come from Latin root </span><a id="_idIndexMarker921"/><span class="koboSpan" id="kobo.438.1">words. </span><span class="koboSpan" id="kobo.438.2">For example, an </span><strong class="bold"><span class="koboSpan" id="kobo.439.1">index</span></strong><span class="koboSpan" id="kobo.440.1"> is an addition to a table that can speed up data retrieval at the cost of the speed of inserting new data. </span><span class="koboSpan" id="kobo.440.2">It is also a Latin word that refers to </span><em class="italic"><span class="koboSpan" id="kobo.441.1">a pointer, indicator, or signpost</span></em><span class="koboSpan" id="kobo.442.1">. </span><span class="koboSpan" id="kobo.442.2">A </span><strong class="bold"><span class="koboSpan" id="kobo.443.1">schema</span></strong><span class="koboSpan" id="kobo.444.1"> refers to a way </span><a id="_idIndexMarker922"/><span class="koboSpan" id="kobo.445.1">of partitioning off tables and other structures in a database. </span><span class="koboSpan" id="kobo.445.2">The word </span><em class="italic"><span class="koboSpan" id="kobo.446.1">schema</span></em><span class="koboSpan" id="kobo.447.1"> originated with the Greek word σχῆμα (</span><em class="italic"><span class="koboSpan" id="kobo.448.1">skema</span></em><span class="koboSpan" id="kobo.449.1">) and in both languages means </span><em class="italic"><span class="koboSpan" id="kobo.450.1">shape, form, </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.451.1">or plan</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.452.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.453.1">When talking about the plural forms, the words might not be as you expect if you received a classical education as I did. </span><span class="koboSpan" id="kobo.453.2">If you come from a country where your language is based on Latin, you might notice this issue </span><span class="No-Break"><span class="koboSpan" id="kobo.454.1">as well.</span></span></p>
<p><span class="koboSpan" id="kobo.455.1">I would expect the plural form of </span><em class="italic"><span class="koboSpan" id="kobo.456.1">schema</span></em><span class="koboSpan" id="kobo.457.1"> to be </span><em class="italic"><span class="koboSpan" id="kobo.458.1">schemata</span></em><span class="koboSpan" id="kobo.459.1">, and the plural of </span><em class="italic"><span class="koboSpan" id="kobo.460.1">index</span></em><span class="koboSpan" id="kobo.461.1"> to be </span><em class="italic"><span class="koboSpan" id="kobo.462.1">indices</span></em><span class="koboSpan" id="kobo.463.1">. </span><span class="koboSpan" id="kobo.463.2">If you expect this, you will always be disappointed. </span><span class="koboSpan" id="kobo.463.3">The industry has standardized simple plural forms such as </span><em class="italic"><span class="koboSpan" id="kobo.464.1">schemas</span></em> <span class="No-Break"><span class="koboSpan" id="kobo.465.1">and </span></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.466.1">indexes</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.467.1">.</span></span></p>
<h1 id="_idParaDest-270"><a id="_idTextAnchor277"/><span class="koboSpan" id="kobo.468.1">Database tooling in PyCharm</span></h1>
<p><span class="koboSpan" id="kobo.469.1">The database tooling in PyCharm is </span><a id="_idIndexMarker923"/><span class="koboSpan" id="kobo.470.1">complete but generic. </span><span class="koboSpan" id="kobo.470.2">By this, I mean that PyCharm attempts to support every database out there, and as such, it generally supports features common to all. </span><span class="koboSpan" id="kobo.470.3">You may find yourself sometimes leaning on more specific tools, such as </span><strong class="bold"><span class="koboSpan" id="kobo.471.1">SQL Server Management Studio</span></strong><span class="koboSpan" id="kobo.472.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.473.1">SSMS</span></strong><span class="koboSpan" id="kobo.474.1">) for SQL Server. </span><span class="koboSpan" id="kobo.474.2">However, for general </span><a id="_idIndexMarker924"/><span class="koboSpan" id="kobo.475.1">development work, the tooling in PyCharm is more than sufficient. </span><span class="koboSpan" id="kobo.475.2">The starting point for working with databases in PyCharm is opening the database tools and creating a connection. </span><span class="koboSpan" id="kobo.475.3">For this, you also need a database. </span><span class="koboSpan" id="kobo.475.4">PyCharm supports dozens of the most popular database servers. </span><span class="koboSpan" id="kobo.475.5">Since this is true, it would be impossible for me to predict which one you</span><a id="_idIndexMarker925"/><span class="koboSpan" id="kobo.476.1"> prefer, so I’m going to fall back on one that I know well: MySQL. </span><span class="koboSpan" id="kobo.476.2">Regardless of your favorite, the tooling in PyCharm is generic, so as long as you pick a relational database that is standards-compliant, the processes are </span><span class="No-Break"><span class="koboSpan" id="kobo.477.1">the same.</span></span></p>
<h1 id="_idParaDest-271"><a id="_idTextAnchor278"/><span class="koboSpan" id="kobo.478.1">Setting up a MySQL database server with Docker</span></h1>
<p><span class="koboSpan" id="kobo.479.1">The easiest way to try out any database system, or pretty much any server technology at all, is to use Docker. </span><span class="koboSpan" id="kobo.479.2">I have more</span><a id="_idIndexMarker926"/><span class="koboSpan" id="kobo.480.1"> plans for Docker later in the book, and I will be using Docker Desktop, along with the command line. </span><span class="koboSpan" id="kobo.480.2">I like the desktop’s GUI for seeing what is running graphically, but you should master Docker</span><a id="_idIndexMarker927"/><span class="koboSpan" id="kobo.481.1"> command-line skills in order to remain competitive. </span><span class="koboSpan" id="kobo.481.2">If you don’t have Docker Desktop installed, you can find the installation instructions at </span><a href="https://www.docker.com/products/docker-desktop/"><span class="koboSpan" id="kobo.482.1">https://www.docker.com/products/docker-desktop/</span></a><span class="koboSpan" id="kobo.483.1">. </span><span class="koboSpan" id="kobo.483.2">Naturally, there are other options, such as installing a database server on your computer. </span><span class="koboSpan" id="kobo.483.3">I personally rail against this because database servers are very complicated. </span><span class="koboSpan" id="kobo.483.4">Installing something such as SQL Server or Oracle will make modifications to your OS at a level that makes these software packages hard to uninstall. </span><span class="koboSpan" id="kobo.483.5">It used to be a rule of thumb that if you made any mistakes installing the database server, the smartest option was the wipe the OS and start over. </span><span class="koboSpan" id="kobo.483.6">I’m relatively sure that’s no longer the case, but I still treat database servers with respect because of all the moving parts in your solution, this one is easily the most complicated. </span><span class="koboSpan" id="kobo.483.7">The last thing you want is a broken database server on your laptop while in the middle of developing an epic project. </span><span class="koboSpan" id="kobo.483.8">So, I recommend Docker. </span><span class="koboSpan" id="kobo.483.9">If something goes wrong, you delete the container and make a </span><span class="No-Break"><span class="koboSpan" id="kobo.484.1">new one.</span></span></p>
<p><span class="koboSpan" id="kobo.485.1">Likewise, you can create a VM using products </span><a id="_idIndexMarker928"/><span class="koboSpan" id="kobo.486.1">such as </span><strong class="bold"><span class="koboSpan" id="kobo.487.1">VMware Workstation</span></strong><span class="koboSpan" id="kobo.488.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.489.1">Oracle VirtualBox</span></strong><span class="koboSpan" id="kobo.490.1">. </span><span class="koboSpan" id="kobo.490.2">This is </span><a id="_idIndexMarker929"/><span class="koboSpan" id="kobo.491.1">another fine way to work, though it takes up more space and resources than Docker will, and you must remember to keep your VMs up </span><span class="No-Break"><span class="koboSpan" id="kobo.492.1">to date.</span></span></p>
<p><span class="koboSpan" id="kobo.493.1">Another fine option is to spin up your database server of choice in your favorite cloud. </span><span class="koboSpan" id="kobo.493.2">I recommend </span><strong class="bold"><span class="koboSpan" id="kobo.494.1">DigitalOcean</span></strong><span class="koboSpan" id="kobo.495.1"> for this since</span><a id="_idIndexMarker930"/><span class="koboSpan" id="kobo.496.1"> their pricing and setup are both extremely easy to understand. </span><span class="koboSpan" id="kobo.496.2">I use this service to host the companion website for this book. </span><span class="koboSpan" id="kobo.496.3">If your computer isn’t up for running a database server, VMware, or Docker, using a cloud provider is your </span><span class="No-Break"><span class="koboSpan" id="kobo.497.1">best option.</span></span></p>
<p><span class="koboSpan" id="kobo.498.1">All these options are great, but I need to pick </span><a id="_idIndexMarker931"/><span class="koboSpan" id="kobo.499.1">one, so I’m going to be working with Docker. </span><span class="koboSpan" id="kobo.499.2">Remember, this isn’t a book on </span><a id="_idIndexMarker932"/><span class="koboSpan" id="kobo.500.1">Docker. </span><span class="koboSpan" id="kobo.500.2">My coverage is going to be tacit. </span><span class="koboSpan" id="kobo.500.3">Your objective is to get a database server up and running so you can practice. </span><span class="koboSpan" id="kobo.500.4">If you can do that with something besides Docker, go ahead and skip to the </span><span class="No-Break"><span class="koboSpan" id="kobo.501.1">next section.</span></span></p>
<h2 id="_idParaDest-272"><a id="_idTextAnchor279"/><span class="koboSpan" id="kobo.502.1">Installing and running the MySQL container</span></h2>
<p><span class="koboSpan" id="kobo.503.1">I’m assuming you have</span><a id="_idIndexMarker933"/><span class="koboSpan" id="kobo.504.1"> Docker running on your computer and that your Docker </span><a id="_idIndexMarker934"/><span class="koboSpan" id="kobo.505.1">commands are available in your </span><strong class="source-inline"><span class="koboSpan" id="kobo.506.1">PATH</span></strong><span class="koboSpan" id="kobo.507.1">. </span><span class="koboSpan" id="kobo.507.2">We can confirm this by opening our terminal and typing </span><span class="No-Break"><span class="koboSpan" id="kobo.508.1">this command:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.509.1">
docker ps -a</span></pre> <p><span class="koboSpan" id="kobo.510.1">This command will list all the containers currently running, or stopped. </span><span class="koboSpan" id="kobo.510.2">If you just installed Docker, you should see an empty list, which is to say, nothing at all. </span><span class="koboSpan" id="kobo.510.3">The test is really to make sure the command runs and doesn’t throw any errors. </span><span class="koboSpan" id="kobo.510.4">If it doesn’t, you’re ready to grab MySQL using </span><span class="No-Break"><span class="koboSpan" id="kobo.511.1">this command:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.512.1">
docker pull mysql</span></pre> <p><span class="koboSpan" id="kobo.513.1">You’ll see a nicely animated display of the installation, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.514.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.515.1">.1</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.516.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer326">
<span class="koboSpan" id="kobo.517.1"><img alt="Figure 11.1: The Docker command used to pull the images needed for MySQL" src="image/B19644_11_001.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.518.1">Figure 11.1: The Docker command used to pull the images needed for MySQL</span></p>
<p><span class="koboSpan" id="kobo.519.1">This command pulled all the requirements needed to run one or more containers for MySQL. </span><span class="koboSpan" id="kobo.519.2">Next, we need to create and run a</span><a id="_idIndexMarker935"/><span class="koboSpan" id="kobo.520.1"> container with </span><span class="No-Break"><span class="koboSpan" id="kobo.521.1">this command:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.522.1">
docker run --name pycharm-mysql -e MYSQL_ROOT_PASSWORD=P@ssw0rd –p 3306:3306 -d mysql</span></pre> <p><span class="koboSpan" id="kobo.523.1">This command will create and run </span><a id="_idIndexMarker936"/><span class="koboSpan" id="kobo.524.1">a container named </span><strong class="source-inline"><span class="koboSpan" id="kobo.525.1">pycharm-mysql</span></strong><span class="koboSpan" id="kobo.526.1">. </span><span class="koboSpan" id="kobo.526.2">It sets the root password for the MySQL database to </span><strong class="source-inline"><span class="koboSpan" id="kobo.527.1">P@ssw0rd</span></strong><span class="koboSpan" id="kobo.528.1">. </span><span class="koboSpan" id="kobo.528.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.529.1">–p</span></strong><span class="koboSpan" id="kobo.530.1"> flag maps port </span><strong class="source-inline"><span class="koboSpan" id="kobo.531.1">3306</span></strong><span class="koboSpan" id="kobo.532.1">, which is the standard port for MySQL, to the same value between your container and the host. </span><span class="koboSpan" id="kobo.532.2">This will make it seem as though you are running the MySQL server directly on your computer. </span><span class="koboSpan" id="kobo.532.3">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.533.1">-d</span></strong><span class="koboSpan" id="kobo.534.1"> flag tells Docker to run MySQL as a background process rather than waiting for it to exit. </span><span class="koboSpan" id="kobo.534.2">This is common with server software. </span><span class="koboSpan" id="kobo.534.3">I hope I don’t need to remind you that </span><em class="italic"><span class="koboSpan" id="kobo.535.1">this is not production ready</span></em><span class="koboSpan" id="kobo.536.1">. </span><span class="koboSpan" id="kobo.536.2">If you are in a small group where the developers are responsible for standing up a production environment, don’t simply duplicate your development environment on a server open to the internet. </span><span class="koboSpan" id="kobo.536.3">You should at least map your database to more robust permanent storage, as well as harden MySQL, use non-privileged accounts for your app, and use a non-obvious </span><span class="No-Break"><span class="koboSpan" id="kobo.537.1">root password.</span></span></p>
<p><span class="koboSpan" id="kobo.538.1">We are now running the MySQL server. </span><span class="koboSpan" id="kobo.538.2">When you run the Docker command, your output is somewhat cryptic and unsatisfying. </span><span class="koboSpan" id="kobo.538.3">You can see mine in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.539.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.540.1">.2</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.541.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer327">
<span class="koboSpan" id="kobo.542.1"><img alt="Figure 11.2: A long string of seemingly random letters and numbers is Docker’s way of saying “I love you,” or at least that your container is running" src="image/B19644_11_002.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.543.1">Figure 11.2: A long string of seemingly random letters and numbers is Docker’s way of saying “I love you,” or at least that your container is running</span></p>
<p><span class="koboSpan" id="kobo.544.1">There is an old saying that goes, </span><em class="italic"><span class="koboSpan" id="kobo.545.1">Tell a man there are a trillion stars in the galaxy, and he’ll believe you. </span><span class="koboSpan" id="kobo.545.2">Tell him his container is successfully running in Docker and he’ll run</span></em><strong class="source-inline"><span class="koboSpan" id="kobo.546.1"> docker ps -a</span></strong><em class="italic"><span class="koboSpan" id="kobo.547.1"> to be sure.</span></em><span class="koboSpan" id="kobo.548.1"> In truth, I might have just made that up. </span><span class="koboSpan" id="kobo.548.2">Nevertheless, let’s </span><span class="No-Break"><span class="koboSpan" id="kobo.549.1">make sure:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.550.1">
docker ps -a</span></pre> <p><span class="koboSpan" id="kobo.551.1">You should see proof like mine in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.552.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.553.1">.3</span></em><span class="koboSpan" id="kobo.554.1">. </span><span class="koboSpan" id="kobo.554.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.555.1">CONTAINER ID</span></strong><span class="koboSpan" id="kobo.556.1"> value will be different for every run, so don’t expect yours to </span><span class="No-Break"><span class="koboSpan" id="kobo.557.1">match mine.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer328">
<span class="koboSpan" id="kobo.558.1"><img alt="Figure 11.3: I can see my container named pycharm-mysql is running and has exposed port 3306" src="image/B19644_11_003.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.559.1">Figure 11.3: I can see my container named pycharm-mysql is running and has exposed port 3306</span></p>
<h2 id="_idParaDest-273"><a id="_idTextAnchor280"/><span class="koboSpan" id="kobo.560.1">Stopping and starting the container</span></h2>
<p><span class="koboSpan" id="kobo.561.1">When you’re ready to retire for the day, you might want to stop </span><span class="No-Break"><span class="koboSpan" id="kobo.562.1">the container:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.563.1">
docker stop pycharm-mysql</span></pre> <p><span class="koboSpan" id="kobo.564.1">This stops the container. </span><span class="koboSpan" id="kobo.564.2">You can</span><a id="_idIndexMarker937"/><span class="koboSpan" id="kobo.565.1"> check with the same </span><strong class="source-inline"><span class="koboSpan" id="kobo.566.1">docker ps -a</span></strong><span class="koboSpan" id="kobo.567.1"> command we’ve been using to </span><a id="_idIndexMarker938"/><span class="koboSpan" id="kobo.568.1">confirm the status changed from </span><em class="italic"><span class="koboSpan" id="kobo.569.1">Up</span></em><span class="koboSpan" id="kobo.570.1"> to </span><em class="italic"><span class="koboSpan" id="kobo.571.1">Stopped</span></em><span class="koboSpan" id="kobo.572.1">. </span><span class="koboSpan" id="kobo.572.2">Tomorrow morning, when you come back, type </span><span class="No-Break"><span class="koboSpan" id="kobo.573.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.574.1">
docker start pycharm-mysql</span></pre> <p><span class="koboSpan" id="kobo.575.1">This starts things up so you can pick up where you </span><span class="No-Break"><span class="koboSpan" id="kobo.576.1">left off.</span></span></p>
<h1 id="_idParaDest-274"><a id="_idTextAnchor281"/><span class="koboSpan" id="kobo.577.1">Connecting to data sources using PyCharm</span></h1>
<p><span class="koboSpan" id="kobo.578.1">Open PyCharm Professional and </span><a id="_idIndexMarker939"/><span class="koboSpan" id="kobo.579.1">create a new Python project called </span><strong class="source-inline"><span class="koboSpan" id="kobo.580.1">database_fun</span></strong><span class="koboSpan" id="kobo.581.1">. </span><span class="koboSpan" id="kobo.581.2">Now, locate the database tools. </span><span class="koboSpan" id="kobo.581.3">You can find them on the right side toolbar via the database icon that looks like a three-layer cake (yum!). </span><span class="koboSpan" id="kobo.581.4">Alternatively, you can find it via the hamburger (yum!) menu by clicking </span><strong class="bold"><span class="koboSpan" id="kobo.582.1">View</span></strong><span class="koboSpan" id="kobo.583.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.584.1">Tool Windows</span></strong><span class="koboSpan" id="kobo.585.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.586.1">Database</span></strong><span class="koboSpan" id="kobo.587.1">. </span><span class="koboSpan" id="kobo.587.2">Both options are shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.588.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.589.1">.4</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.590.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer329">
<span class="koboSpan" id="kobo.591.1"><img alt="Figure 11.4: Two options for opening database tools – one from the menu, and the second by clicking the database tools icon" src="image/B19644_11_004.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.592.1">Figure 11.4: Two options for opening database tools – one from the menu, and the second by clicking the database tools icon</span></p>
<p><span class="koboSpan" id="kobo.593.1">With the database tools open, you need to create a new </span><strong class="bold"><span class="koboSpan" id="kobo.594.1">data source</span></strong><span class="koboSpan" id="kobo.595.1">. </span><span class="koboSpan" id="kobo.595.2">Note the generic terminology. </span><span class="koboSpan" id="kobo.595.3">PyCharm supports relational as well as non-relational databases, so the term </span><em class="italic"><span class="koboSpan" id="kobo.596.1">data source</span></em><span class="koboSpan" id="kobo.597.1"> is just a generic way of pointing that out. </span><span class="koboSpan" id="kobo.597.2">Click the </span><strong class="bold"><span class="koboSpan" id="kobo.598.1">+</span></strong><span class="koboSpan" id="kobo.599.1"> icon shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.600.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.601.1">.5</span></em><span class="koboSpan" id="kobo.602.1">, then hover over </span><strong class="bold"><span class="koboSpan" id="kobo.603.1">Data Source</span></strong><span class="koboSpan" id="kobo.604.1">. </span><span class="koboSpan" id="kobo.604.2">You’ll see a long list of supported data sources. </span><span class="koboSpan" id="kobo.604.3">Find </span><strong class="bold"><span class="koboSpan" id="kobo.605.1">MySQL</span></strong><span class="koboSpan" id="kobo.606.1"> and </span><span class="No-Break"><span class="koboSpan" id="kobo.607.1">click it.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer330">
<span class="koboSpan" id="kobo.608.1"><img alt="Figure 11.5: Supported data sources in PyCharm" src="image/B19644_11_005.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.609.1">Figure 11.5: Supported data sources in PyCharm</span></p>
<p><span class="koboSpan" id="kobo.610.1">You’ll see a configuration window like mine in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.611.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.612.1">.6</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.613.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer331">
<span class="koboSpan" id="kobo.614.1"><img alt="Figure 11.6: Configuration window for a MySQL database" src="image/B19644_11_006.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.615.1">Figure 11.6: Configuration window for a MySQL database</span></p>
<p><span class="koboSpan" id="kobo.616.1">Each database server may have slightly different settings, but essentially they boil down to the IP address (or DNS name), port, security credentials, and, very often, the default database, which may not yet exist. </span><span class="koboSpan" id="kobo.616.2">We </span><a id="_idIndexMarker940"/><span class="koboSpan" id="kobo.617.1">defined the root password for our MySQL server as </span><strong class="source-inline"><span class="koboSpan" id="kobo.618.1">P@ssw0rd</span></strong><span class="koboSpan" id="kobo.619.1">, and we know since we’re running in Docker our IP is just going to be </span><strong class="source-inline"><span class="koboSpan" id="kobo.620.1">localhost</span></strong><span class="koboSpan" id="kobo.621.1">. </span><span class="koboSpan" id="kobo.621.2">You might also remember the port that was displayed in the output of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.622.1">docker ps -a</span></strong><span class="koboSpan" id="kobo.623.1"> command we ran earlier is </span><strong class="source-inline"><span class="koboSpan" id="kobo.624.1">3306</span></strong><span class="koboSpan" id="kobo.625.1">. </span><span class="koboSpan" id="kobo.625.2">The arrow in the preceding figure points to an important aspect of database tooling </span><span class="No-Break"><span class="koboSpan" id="kobo.626.1">in PyCharm.</span></span></p>
<p><span class="koboSpan" id="kobo.627.1">PyCharm, like most JetBrains IDEs, is written in Java. </span><span class="koboSpan" id="kobo.627.2">As such, PyCharm relies on </span><strong class="bold"><span class="koboSpan" id="kobo.628.1">Java Database Connectivity</span></strong><span class="koboSpan" id="kobo.629.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.630.1">JDBC</span></strong><span class="koboSpan" id="kobo.631.1">) drivers in order to </span><a id="_idIndexMarker941"/><span class="koboSpan" id="kobo.632.1">work. </span><span class="koboSpan" id="kobo.632.2">Most JDBC drivers are written by the same company or group that publishes the database, which means it’s generally not legal for JetBrains to bundle those drivers with PyCharm without getting lawyers involved. </span><span class="koboSpan" id="kobo.632.3">Nobody wants that! </span><span class="koboSpan" id="kobo.632.4">JetBrains did the next best thing. </span><span class="koboSpan" id="kobo.632.5">The IDE can download and install the driver automatically, but you have to initiate this by clicking the </span><strong class="bold"><span class="koboSpan" id="kobo.633.1">Download missing driver files</span></strong><span class="koboSpan" id="kobo.634.1"> link on this screen. </span><span class="koboSpan" id="kobo.634.2">This only needs to be done the first time you use the database driver. </span><span class="koboSpan" id="kobo.634.3">Once the drivers are installed, the option shown by the arrow in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.635.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.636.1">.6</span></em><span class="koboSpan" id="kobo.637.1"> no longer appears. </span><span class="koboSpan" id="kobo.637.2">You can test your connection by clicking the </span><strong class="bold"><span class="koboSpan" id="kobo.638.1">Test Connection</span></strong><span class="koboSpan" id="kobo.639.1"> link. </span><span class="koboSpan" id="kobo.639.2">If everything works, you’ll get a confirmation message stating your database connection was successful. </span><span class="koboSpan" id="kobo.639.3">Click </span><strong class="bold"><span class="koboSpan" id="kobo.640.1">OK</span></strong><span class="koboSpan" id="kobo.641.1"> to close the </span><span class="No-Break"><span class="koboSpan" id="kobo.642.1">connection dialog.</span></span></p>
<p><span class="koboSpan" id="kobo.643.1">Once the connection dialog is closed, you’ll see a list of data source connections for your project in the </span><strong class="bold"><span class="koboSpan" id="kobo.644.1">Database</span></strong><span class="koboSpan" id="kobo.645.1"> panel. </span><span class="koboSpan" id="kobo.645.2">There is a </span><a id="_idIndexMarker942"/><span class="koboSpan" id="kobo.646.1">small toolbar visible at the top of the database panel, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.647.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.648.1">.7</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.649.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer332">
<span class="koboSpan" id="kobo.650.1"><img alt="Figure 11.7: The database panel has a small menu bar at the top" src="image/B19644_11_007.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.651.1">Figure 11.7: The database panel has a small menu bar at the top</span></p>
<p><span class="koboSpan" id="kobo.652.1">As usual, I’ve numbered the options in the figure. </span><span class="koboSpan" id="kobo.652.2">Let’s </span><span class="No-Break"><span class="koboSpan" id="kobo.653.1">review them:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.654.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.655.1">Add Data Source</span></strong><span class="koboSpan" id="kobo.656.1"> button, which we’ve already seen, allows you to add new data sources to </span><span class="No-Break"><span class="koboSpan" id="kobo.657.1">your project.</span></span></li>
<li><span class="koboSpan" id="kobo.658.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.659.1">Duplicate</span></strong><span class="koboSpan" id="kobo.660.1"> button allows you to make a quick copy, presumably with some minor adjustments. </span><span class="koboSpan" id="kobo.660.2">Many of my projects entail multiple databases on one server. </span><span class="koboSpan" id="kobo.660.3">All I have to do is set up the first one, then duplicate the connection and change the name of the database. </span><span class="koboSpan" id="kobo.660.4">This option makes this a quick and </span><span class="No-Break"><span class="koboSpan" id="kobo.661.1">easy process.</span></span></li>
<li><span class="koboSpan" id="kobo.662.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.663.1">Refresh</span></strong><span class="koboSpan" id="kobo.664.1"> button reloads the metadata for your connections. </span><span class="koboSpan" id="kobo.664.2">Remember this one. </span><span class="koboSpan" id="kobo.664.3">PyCharm doesn’t automatically keep track of all your database changes, especially if they are made outside of PyCharm. </span><span class="koboSpan" id="kobo.664.4">You’ll need to click the </span><strong class="bold"><span class="koboSpan" id="kobo.665.1">Refresh</span></strong><span class="koboSpan" id="kobo.666.1"> button periodically to make sure you’re viewing the latest information on your </span><span class="No-Break"><span class="koboSpan" id="kobo.667.1">data sources.</span></span></li>
<li><span class="koboSpan" id="kobo.668.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.669.1">Data source properties</span></strong><span class="koboSpan" id="kobo.670.1"> button will display a dialog that allows you to change the settings of the data </span><span class="No-Break"><span class="koboSpan" id="kobo.671.1">source configuration.</span></span></li>
<li><span class="koboSpan" id="kobo.672.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.673.1">Disconnect</span></strong><span class="koboSpan" id="kobo.674.1"> button will disconnect you from a </span><span class="No-Break"><span class="koboSpan" id="kobo.675.1">database server.</span></span></li>
<li><span class="koboSpan" id="kobo.676.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.677.1">Edit data</span></strong><span class="koboSpan" id="kobo.678.1"> button allows you to directly edit data in tables in your database using a graphical, spreadsheet-like UI. </span><span class="koboSpan" id="kobo.678.2">This is nice for quickly adding or changing </span><span class="No-Break"><span class="koboSpan" id="kobo.679.1">test data.</span></span></li>
<li><span class="koboSpan" id="kobo.680.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.681.1">Go To DDL</span></strong><span class="koboSpan" id="kobo.682.1"> button will take you to the SQL definition of whatever you have currently selected. </span><span class="koboSpan" id="kobo.682.2">You </span><a id="_idIndexMarker943"/><span class="koboSpan" id="kobo.683.1">need to have a DDL mapping for this to </span><span class="No-Break"><span class="koboSpan" id="kobo.684.1">work properly.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.685.1">Compare Structure</span></strong><span class="koboSpan" id="kobo.686.1"> lets us compare two database structures. </span><span class="koboSpan" id="kobo.686.2">This is usually used to help migrate one database structure to another after changes were made during the normal development process. </span><span class="koboSpan" id="kobo.686.3">Migration technology in PyCharm 2023 is only partially complete, so this feature might have changed at the time you are reading </span><span class="No-Break"><span class="koboSpan" id="kobo.687.1">this book.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.688.1">Jump to Query Console</span></strong><span class="koboSpan" id="kobo.689.1"> is pretty much your go-to tool for interacting with the database at the command line. </span><span class="koboSpan" id="kobo.689.2">A query console was opened automatically when you first connected to the database, but if you closed it, this button opens it and brings it </span><span class="No-Break"><span class="koboSpan" id="kobo.690.1">into focus.</span></span></li>
<li><span class="koboSpan" id="kobo.691.1">The filter button allows you to filter what you see in the data sources you have defined. </span><span class="koboSpan" id="kobo.691.2">By default, everything is turned on, which might be a bit much for most developers who are not usually accustomed to seeing all the guts of the database so </span><span class="No-Break"><span class="koboSpan" id="kobo.692.1">explicitly displayed.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.693.1">Besides these tools, there are others that pertain to setting up how you view and work with your data sources. </span><span class="koboSpan" id="kobo.693.2">These will be a little easier to explain once we have a database to play with. </span><span class="koboSpan" id="kobo.693.3">Let’s take a moment to </span><span class="No-Break"><span class="koboSpan" id="kobo.694.1">create one.</span></span></p>
<h2 id="_idParaDest-275"><a id="_idTextAnchor282"/><span class="koboSpan" id="kobo.695.1">Creating a new database</span></h2>
<p><span class="koboSpan" id="kobo.696.1">Before we do anything else, we</span><a id="_idIndexMarker944"/><span class="koboSpan" id="kobo.697.1"> need a new database. </span><span class="koboSpan" id="kobo.697.2">Most database servers just call this “a new database.” </span><span class="koboSpan" id="kobo.697.3">MySQL is a little different. </span><span class="koboSpan" id="kobo.697.4">They call a new database a new </span><strong class="bold"><span class="koboSpan" id="kobo.698.1">schema</span></strong><span class="koboSpan" id="kobo.699.1">. </span><span class="koboSpan" id="kobo.699.2">To create a new database or schema, right-click the server (</span><strong class="source-inline"><span class="koboSpan" id="kobo.700.1">@localhost</span></strong><span class="koboSpan" id="kobo.701.1">) and click </span><strong class="bold"><span class="koboSpan" id="kobo.702.1">New</span></strong><span class="koboSpan" id="kobo.703.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.704.1">Schema</span></strong><span class="koboSpan" id="kobo.705.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.706.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.707.1">.8</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.708.1">.</span></span></p>
<p class="IMG---Figure"> </p>
<div>
<div class="IMG---Figure" id="_idContainer333">
<span class="koboSpan" id="kobo.709.1"><img alt="Figure 11.8: Create a new database by right-clicking the server (indicated by the arrow), then New | Schema" src="image/B19644_11_008.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.710.1">Figure 11.8: Create a new database by right-clicking the server (indicated by the arrow), then New | Schema</span></p>
<p><span class="koboSpan" id="kobo.711.1">When you do this, you are prompted to</span><a id="_idIndexMarker945"/><span class="koboSpan" id="kobo.712.1"> name the schema, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.713.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.714.1">.9</span></em><span class="koboSpan" id="kobo.715.1">. </span><span class="koboSpan" id="kobo.715.2">I’ll name my schema to match my project in PyCharm. </span><span class="koboSpan" id="kobo.715.3">I’ll call </span><span class="No-Break"><span class="koboSpan" id="kobo.716.1">it </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.717.1">database_fun</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.718.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer334">
<span class="koboSpan" id="kobo.719.1"><img alt="Figure 11.9: Name your schema using this dialog" src="image/B19644_11_009.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.720.1">Figure 11.9: Name your schema using this dialog</span></p>
<p><span class="koboSpan" id="kobo.721.1">Beneath the covers, PyCharm is just</span><a id="_idIndexMarker946"/><span class="koboSpan" id="kobo.722.1"> generating and executing DDL statements. </span><span class="koboSpan" id="kobo.722.2">This is how it is able to be so agnostic with respect to so many database options. </span><span class="koboSpan" id="kobo.722.3">You can see the preview of the command it will run in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.723.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.724.1">.9</span></em><span class="koboSpan" id="kobo.725.1">. </span><span class="koboSpan" id="kobo.725.2">Click </span><strong class="bold"><span class="koboSpan" id="kobo.726.1">OK</span></strong><span class="koboSpan" id="kobo.727.1"> to execute the command, and the database window will update to show the </span><span class="No-Break"><span class="koboSpan" id="kobo.728.1">new schema.</span></span></p>
<p><span class="koboSpan" id="kobo.729.1">You’ve just created a new database! </span><span class="koboSpan" id="kobo.729.2">It is just as easy using any other database server software supported </span><span class="No-Break"><span class="koboSpan" id="kobo.730.1">by PyCharm.</span></span></p>
<p><span class="koboSpan" id="kobo.731.1">Before we get into working on the structure of our database, there are a few more setup options </span><span class="No-Break"><span class="koboSpan" id="kobo.732.1">to consider.</span></span></p>
<h2 id="_idParaDest-276"><a id="_idTextAnchor283"/><span class="koboSpan" id="kobo.733.1">Setting the SQL dialect (this is crucial)</span></h2>
<p><span class="koboSpan" id="kobo.734.1">Since PyCharm supports dozens</span><a id="_idIndexMarker947"/><span class="koboSpan" id="kobo.735.1"> of different databases, each with its own dialect of SQL, it stands to reason that you might need to tell PyCharm which SQL dialect you intend to use. </span><span class="koboSpan" id="kobo.735.2">You won’t have any trouble remembering to do this because PyCharm nags you until you fill in </span><span class="No-Break"><span class="koboSpan" id="kobo.736.1">the setting.</span></span></p>
<p><span class="koboSpan" id="kobo.737.1">In your project window, right-click the project and create a new file called </span><strong class="source-inline"><span class="koboSpan" id="kobo.738.1">test.sql</span></strong><span class="koboSpan" id="kobo.739.1">. </span><span class="koboSpan" id="kobo.739.2">It’s the same process we’ve been using for Python files, except there isn’t a template in the list. </span><span class="koboSpan" id="kobo.739.3">Right-click the project, then click </span><strong class="bold"><span class="koboSpan" id="kobo.740.1">New File</span></strong><span class="koboSpan" id="kobo.741.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.742.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.743.1">.10</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.744.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer335">
<span class="koboSpan" id="kobo.745.1"><img alt="Figure 11.10: There isn’t a specific listing for SQL files, so just right-click and pick New | File" src="image/B19644_11_010.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.746.1">Figure 11.10: There isn’t a specific listing for SQL files, so just right-click and pick New | File</span></p>
<p><span class="koboSpan" id="kobo.747.1">A small dialog will appear. </span><span class="koboSpan" id="kobo.747.2">Type the </span><a id="_idIndexMarker948"/><span class="koboSpan" id="kobo.748.1">name of the file as </span><strong class="source-inline"><span class="koboSpan" id="kobo.749.1">test.sql</span></strong><span class="koboSpan" id="kobo.750.1">. </span><span class="koboSpan" id="kobo.750.2">The moment you do this, the nagging begins. </span><span class="koboSpan" id="kobo.750.3">You’ll see a message stating the SQL dialect is not configured, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.751.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.752.1">.11</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.753.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer336">
<span class="koboSpan" id="kobo.754.1"><img alt="Figure 11.11: PyCharm will hound you until you configure the SQL dialect" src="image/B19644_11_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.755.1">Figure 11.11: PyCharm will hound you until you configure the SQL dialect</span></p>
<p><span class="koboSpan" id="kobo.756.1">If PyCharm were me and the user of PyCharm were my 13-year-old daughter, there would be a lot of eye-rolling, an exasperated grunt, followed by, “Fine! </span><span class="koboSpan" id="kobo.756.2">I’ll set the SQL dialog! </span><span class="koboSpan" id="kobo.756.3">But none of my friends do!” </span><span class="koboSpan" id="kobo.756.4">Then I’d say, “If you’re friends all installed Windows 7 on their computers, would you follow their example?” </span><span class="koboSpan" id="kobo.756.5">Then she’d sag her head and say, “No, of </span><span class="No-Break"><span class="koboSpan" id="kobo.757.1">course not.”</span></span></p>
<p><span class="koboSpan" id="kobo.758.1">Nobody wants this dialogue playing out, so we’d better </span><a id="_idIndexMarker949"/><span class="koboSpan" id="kobo.759.1">make our IDE overlord happy. </span><span class="koboSpan" id="kobo.759.2">Click the link in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.760.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.761.1">.11</span></em><span class="koboSpan" id="kobo.762.1"> to set the dialect. </span><span class="koboSpan" id="kobo.762.2">You’ll need to set it locally and globally. </span><span class="koboSpan" id="kobo.762.3">The configuration is shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.763.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.764.1">.12</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.765.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer337">
<span class="koboSpan" id="kobo.766.1"><img alt="Figure 11.12: Set the SQL dialects globally and locally" src="image/B19644_11_012.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.767.1">Figure 11.12: Set the SQL dialects globally and locally</span></p>
<p><span class="koboSpan" id="kobo.768.1">The global setting carries across all projects, so if you’re like me and you only ever use one database server type, you can set it globally here, and it will be set for all your projects. </span><span class="koboSpan" id="kobo.768.2">The project dialect is a little more nuanced. </span><span class="koboSpan" id="kobo.768.3">If you value your sanity, you really need to create a folder for your SQL files, then set the dialect for the folder. </span><span class="koboSpan" id="kobo.768.4">Here, I’m just showing you where the settings are. </span><span class="koboSpan" id="kobo.768.5">Go ahead and pick </span><strong class="bold"><span class="koboSpan" id="kobo.769.1">MySQL</span></strong><span class="koboSpan" id="kobo.770.1"> for your global and local dialect and we’ll worry about the whole folder idea a </span><span class="No-Break"><span class="koboSpan" id="kobo.771.1">little later.</span></span></p>
<h2 id="_idParaDest-277"><a id="_idTextAnchor284"/><span class="koboSpan" id="kobo.772.1">Grouping and color coding data sources</span></h2>
<p><span class="koboSpan" id="kobo.773.1">My own work consists of creating the SaaS product sold by my employer. </span><span class="koboSpan" id="kobo.773.2">This means that for the first seven years of the project, I only had one database to deal with. </span><span class="koboSpan" id="kobo.773.3">As the product grew in capability, we </span><a id="_idIndexMarker950"/><span class="koboSpan" id="kobo.774.1">added two more SQL databases, a </span><a id="_idIndexMarker951"/><span class="koboSpan" id="kobo.775.1">MongoDB database, and several Redis data caches to the project. </span><span class="koboSpan" id="kobo.775.2">My project is still pretty tame compared to some I’ve worked on. </span><span class="koboSpan" id="kobo.775.3">If you have many databases to deal with, PyCharm allows you to organize them in several </span><span class="No-Break"><span class="koboSpan" id="kobo.776.1">different ways.</span></span></p>
<h3><span class="koboSpan" id="kobo.777.1">Organizing by folders</span></h3>
<p><span class="koboSpan" id="kobo.778.1">You can organize your data sources by grouping them into folders. </span><span class="koboSpan" id="kobo.778.2">We only have one, but we’ll go through the process anyway. </span><span class="koboSpan" id="kobo.778.3">Click the data source indicated by the arrow in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.779.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.780.1">.8</span></em><span class="koboSpan" id="kobo.781.1">. </span><span class="koboSpan" id="kobo.781.2">Last time, we right-clicked; this time, just click the data source and press </span><em class="italic"><span class="koboSpan" id="kobo.782.1">F6</span></em><span class="koboSpan" id="kobo.783.1"> on your keyboard. </span><span class="koboSpan" id="kobo.783.2">This brings up a</span><a id="_idIndexMarker952"/><span class="koboSpan" id="kobo.784.1"> dialog, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.785.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.786.1">.13</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.787.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer338">
<span class="koboSpan" id="kobo.788.1"><img alt="Figure 11.13: Create a new folder for your data source" src="image/B19644_11_013.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.789.1">Figure 11.13: Create a new folder for your data source</span></p>
<p><span class="koboSpan" id="kobo.790.1">Organizing by folder can be useful if you have lots of databases in your project, or maybe you have separate sets of connections for</span><a id="_idIndexMarker953"/><span class="koboSpan" id="kobo.791.1"> development, </span><strong class="bold"><span class="koboSpan" id="kobo.792.1">user acceptance testing</span></strong><span class="koboSpan" id="kobo.793.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.794.1">UAT</span></strong><span class="koboSpan" id="kobo.795.1">), </span><span class="No-Break"><span class="koboSpan" id="kobo.796.1">and production.</span></span></p>
<h3><span class="koboSpan" id="kobo.797.1">Color coding databases</span></h3>
<p><span class="koboSpan" id="kobo.798.1">I’m fond of this feature since I</span><a id="_idIndexMarker954"/><span class="koboSpan" id="kobo.799.1"> have </span><span class="No-Break"><span class="koboSpan" id="kobo.800.1">four environments:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.801.1">A local database, just like we </span><span class="No-Break"><span class="koboSpan" id="kobo.802.1">have now</span></span></li>
<li><span class="koboSpan" id="kobo.803.1">A central development testing database where the development validates their designs before the product team is allowed to see </span><span class="No-Break"><span class="koboSpan" id="kobo.804.1">our changes</span></span></li>
<li><span class="koboSpan" id="kobo.805.1">A staging database that is connected to a staged version of our application </span><span class="No-Break"><span class="koboSpan" id="kobo.806.1">for UAT</span></span></li>
<li><span class="koboSpan" id="kobo.807.1">A </span><span class="No-Break"><span class="koboSpan" id="kobo.808.1">production database</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.809.1">I always color code everything! </span><span class="koboSpan" id="kobo.809.2">You can set a color for the data source by opening up the </span><strong class="bold"><span class="koboSpan" id="kobo.810.1">Data Source Properties</span></strong><span class="koboSpan" id="kobo.811.1"> window. </span><span class="koboSpan" id="kobo.811.2">To do this, click the </span><strong class="bold"><span class="koboSpan" id="kobo.812.1">Data Source Properties</span></strong><span class="koboSpan" id="kobo.813.1"> button on the toolbar. </span><span class="koboSpan" id="kobo.813.2">I showed you this earlier in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.814.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.815.1">.7 (4)</span></em><span class="koboSpan" id="kobo.816.1">. </span><span class="koboSpan" id="kobo.816.2">Clicking this button reveals a dialog box similar to the one you used to create the data source earlier. </span><span class="koboSpan" id="kobo.816.3">Look at mine in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.817.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.818.1">.14</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.819.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer339">
<span class="koboSpan" id="kobo.820.1"><img alt="Figure 11.14: Click the innocuous dot next to the data source name in the properties window to set a color for your data source" src="image/B19644_11_014.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.821.1">Figure 11.14: Click the innocuous dot next to the data source name in the properties window to set a color for your data source</span></p>
<p><span class="koboSpan" id="kobo.822.1">You can probably figure it out from here. </span><span class="koboSpan" id="kobo.822.2">Once you dismiss the dialog, your database elements in the IDE become awash with lovely pastel hues. </span><span class="koboSpan" id="kobo.822.3">Personally, I set my local development environment to violet, the dev environment to green, staging to yellow, and production to red. </span><span class="koboSpan" id="kobo.822.4">Not rose from the selection, but a bright, obnoxious, over-the-top, fire engine red picked from the custom dialog at the bottom of the list. </span><span class="koboSpan" id="kobo.822.5">As the project’s development lead, there are</span><a id="_idIndexMarker955"/><span class="koboSpan" id="kobo.823.1"> times when I need to go look at the project in production. </span><span class="koboSpan" id="kobo.823.2">I want to make sure I remember where I am! </span><span class="koboSpan" id="kobo.823.3">Color </span><span class="No-Break"><span class="koboSpan" id="kobo.824.1">coding helps!</span></span></p>
<h3><span class="koboSpan" id="kobo.825.1">Sharing a data source between projects</span></h3>
<p><span class="koboSpan" id="kobo.826.1">If you have many projects that</span><a id="_idIndexMarker956"/><span class="koboSpan" id="kobo.827.1"> use the same data source, it would be tedious to have to set the same thing over and over for each project. </span><span class="koboSpan" id="kobo.827.2">Thankfully, you don’t have to. </span><span class="koboSpan" id="kobo.827.3">PyCharm allows you to make a data source global, meaning it is available to all your projects in PyCharm. </span><span class="koboSpan" id="kobo.827.4">In the data source properties window shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.828.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.829.1">.15</span></em><span class="koboSpan" id="kobo.830.1">, find the button indicated by </span><span class="No-Break"><span class="koboSpan" id="kobo.831.1">the arrow.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer340">
<span class="koboSpan" id="kobo.832.1"><img alt="Figure 11.15: You can make your data source configuration global so it is available to all your projects" src="image/B19644_11_015.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.833.1">Figure 11.15: You can make your data source configuration global so it is available to all your projects</span></p>
<p><span class="koboSpan" id="kobo.834.1">If you click it, the dialog changes very subtly to indicate the data source is now global. </span><span class="koboSpan" id="kobo.834.2">If you want to check, just make a </span><a id="_idIndexMarker957"/><span class="koboSpan" id="kobo.835.1">new project like we did earlier. </span><span class="koboSpan" id="kobo.835.2">Open the database tools and you’ll find the data source is already there. </span><span class="koboSpan" id="kobo.835.3">I made a project called </span><strong class="source-inline"><span class="koboSpan" id="kobo.836.1">more_database_fun</span></strong><span class="koboSpan" id="kobo.837.1">, and as you can see in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.838.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.839.1">.16</span></em><span class="koboSpan" id="kobo.840.1">, the data source indeed </span><span class="No-Break"><span class="koboSpan" id="kobo.841.1">carried over.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer341">
<span class="koboSpan" id="kobo.842.1"><img alt="Figure 11.16: I made a new project and opened the database tools. The global data source is there" src="image/B19644_11_016.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.843.1">Figure 11.16: I made a new project and opened the database tools. </span><span class="koboSpan" id="kobo.843.2">The global data source is there</span></p>
<p><span class="koboSpan" id="kobo.844.1">Since there is no code in this second </span><a id="_idIndexMarker958"/><span class="koboSpan" id="kobo.845.1">project, I did not include it in the chapter </span><span class="No-Break"><span class="koboSpan" id="kobo.846.1">source code.</span></span></p>
<p><span class="koboSpan" id="kobo.847.1">Another fun feature is the global data sources are exported when you export your IDE settings. </span><span class="koboSpan" id="kobo.847.2">Refer back to </span><a href="B19644_02.xhtml#_idTextAnchor028"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.848.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.849.1">, </span><em class="italic"><span class="koboSpan" id="kobo.850.1">Installation and Configuration</span></em><span class="koboSpan" id="kobo.851.1">, if you need a refresher on importing and exporting settings, but I’ll go ahead and point out the export settings I’m talking about here in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.852.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.853.1">.17</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.854.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer342">
<span class="koboSpan" id="kobo.855.1"><img alt="Figure 11.17: You can export your global data sources to the settings export ZIP file, allowing others to simply import the relevant settings" src="image/B19644_11_017.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.856.1">Figure 11.17: You can export your global data sources to the settings export ZIP file, allowing others to simply import the relevant settings</span></p>
<p><span class="koboSpan" id="kobo.857.1">If you are a development lead, you might consider creating an export of your IDE settings that does not include things such as color and font size. </span><span class="koboSpan" id="kobo.857.2">Those are likely more personal preferences and make sense when you want to copy your settings between a laptop and a workstation. </span><span class="koboSpan" id="kobo.857.3">But it does make sense to export more work-specific settings such as your data sources so your</span><a id="_idIndexMarker959"/><span class="koboSpan" id="kobo.858.1"> team can easily import them. </span><span class="koboSpan" id="kobo.858.2">If you do this, remember you are also potentially copying credentials! </span><span class="koboSpan" id="kobo.858.3">You should only make development data sources available as global exports lest your </span><strong class="source-inline"><span class="koboSpan" id="kobo.859.1">settings.zip</span></strong><span class="koboSpan" id="kobo.860.1"> file falls into the wrong hands. </span><span class="koboSpan" id="kobo.860.2">This is especially important in an age where more and more of us are using cloud database servers rather than locally </span><span class="No-Break"><span class="koboSpan" id="kobo.861.1">installed servers.</span></span></p>
<p><span class="koboSpan" id="kobo.862.1">If you need tight control over credentials, PyCharm can integrate with a product called </span><em class="italic"><span class="koboSpan" id="kobo.863.1">KeePass</span></em><span class="koboSpan" id="kobo.864.1">. </span><span class="koboSpan" id="kobo.864.2">Since that is fairly niche, I’ll not cover it here, but I will leave a link with more details in the </span><em class="italic"><span class="koboSpan" id="kobo.865.1">Further reading</span></em><span class="koboSpan" id="kobo.866.1"> section of </span><a id="_idIndexMarker960"/><span class="No-Break"><span class="koboSpan" id="kobo.867.1">this chapter.</span></span></p>
<h3><span class="koboSpan" id="kobo.868.1">Connecting with SSL and SSH options</span></h3>
<p><span class="koboSpan" id="kobo.869.1">For even more security, especially with respect to cloud data sources, PyCharm supports SSL and SSH </span><a id="_idIndexMarker961"/><span class="koboSpan" id="kobo.870.1">configuration options. </span><span class="koboSpan" id="kobo.870.2">See </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.871.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.872.1">.18</span></em><span class="koboSpan" id="kobo.873.1"> for your security setup options for your </span><span class="No-Break"><span class="koboSpan" id="kobo.874.1">data sources.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer343">
<span class="koboSpan" id="kobo.875.1"><img alt="Figure 11.18: SSH and SSL security options can be found in the data source settings on the SSH/SSL tab" src="image/B19644_11_018.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.876.1">Figure 11.18: SSH and SSL security options can be found in the data source settings on the SSH/SSL tab</span></p>
<p><span class="koboSpan" id="kobo.877.1">I won’t go deep into this here, but you need to know where these settings lie in the IDE since you will need them for cloud providers such as </span><span class="No-Break"><span class="koboSpan" id="kobo.878.1">Microsoft Azure.</span></span></p>
<h1 id="_idParaDest-278"><a id="_idTextAnchor285"/><span class="koboSpan" id="kobo.879.1">Database design and manipulation</span></h1>
<p><span class="koboSpan" id="kobo.880.1">Let’s move on to the part you’ve probably </span><a id="_idIndexMarker962"/><span class="koboSpan" id="kobo.881.1">been waiting for: the part where we get to build a database! </span><span class="koboSpan" id="kobo.881.2">We already created the schema, but at the moment, we don’t have any tables. </span><span class="koboSpan" id="kobo.881.3">Let’s fix </span><span class="No-Break"><span class="koboSpan" id="kobo.882.1">that first!</span></span></p>
<h2 id="_idParaDest-279"><a id="_idTextAnchor286"/><span class="koboSpan" id="kobo.883.1">Creating a table</span></h2>
<p><span class="koboSpan" id="kobo.884.1">Right-click the schema, </span><strong class="bold"><span class="koboSpan" id="kobo.885.1">database_fun</span></strong><span class="koboSpan" id="kobo.886.1">, which we created </span><a id="_idIndexMarker963"/><span class="koboSpan" id="kobo.887.1">earlier, and click </span><strong class="bold"><span class="koboSpan" id="kobo.888.1">New</span></strong><span class="koboSpan" id="kobo.889.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.890.1">Table</span></strong><span class="koboSpan" id="kobo.891.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.892.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.893.1">.19</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.894.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer344">
<span class="koboSpan" id="kobo.895.1"><img alt="Figure 11.19: Right-click on the schema indicated by the arrow, then click New | Table" src="image/B19644_11_019.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.896.1">Figure 11.19: Right-click on the schema indicated by the arrow, then click New | Table</span></p>
<p><span class="koboSpan" id="kobo.897.1">You’ll get a new window, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.898.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.899.1">.20</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.900.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer345">
<span class="koboSpan" id="kobo.901.1"><img alt="Figure 11.20: New window" src="image/B19644_11_020.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.902.1">Figure 11.20: New window</span></p>
<p><span class="koboSpan" id="kobo.903.1">I had to stretch mine out a little to see it all, as shown in the figure. </span><span class="koboSpan" id="kobo.903.2">The next few steps will build our table. </span><span class="koboSpan" id="kobo.903.3">I went ahead and </span><a id="_idIndexMarker964"/><span class="koboSpan" id="kobo.904.1">typed the table name in the </span><strong class="bold"><span class="koboSpan" id="kobo.905.1">Name</span></strong><span class="koboSpan" id="kobo.906.1"> field at the top. </span><span class="koboSpan" id="kobo.906.2">You can see what’s going on here. </span><span class="koboSpan" id="kobo.906.3">As before, with the schema creation DDL, PyCharm is building a DDL script in the preview at the bottom of the window. </span><span class="koboSpan" id="kobo.906.4">Right now, we have a red squiggly line under the semicolon because we have yet to add any fields, so this DDL </span><span class="No-Break"><span class="koboSpan" id="kobo.907.1">is invalid.</span></span></p>
<p><span class="koboSpan" id="kobo.908.1">At the top left of the window is a button with a </span><strong class="bold"><span class="koboSpan" id="kobo.909.1">+</span></strong><span class="koboSpan" id="kobo.910.1"> icon. </span><span class="koboSpan" id="kobo.910.2">Click that to see a list of elements you can add to the table, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.911.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.912.1">.21</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.913.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer346">
<span class="koboSpan" id="kobo.914.1"><img alt="Figure 11.21: You can add to the table by clicking the + button" src="image/B19644_11_021.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.915.1">Figure 11.21: You can add to the table by clicking the + button</span></p>
<p><span class="koboSpan" id="kobo.916.1">From here, you can pick whatever it is you need to add. </span><span class="koboSpan" id="kobo.916.2">We’re going to add our primary key field first. </span><span class="koboSpan" id="kobo.916.3">If you’re new to relational database design and you need a good primer, </span><em class="italic"><span class="koboSpan" id="kobo.917.1">Database Design for Mere Mortals</span></em><span class="koboSpan" id="kobo.918.1"> by Michael</span><a id="_idIndexMarker965"/><span class="koboSpan" id="kobo.919.1"> Hernandez is a must-read. </span><span class="koboSpan" id="kobo.919.2">I’ve used it as a textbook in my classes for over 20 years! </span><span class="koboSpan" id="kobo.919.3">Hernandez has an equally impactful book on SQL queries, as does another author, named Ben Forta. </span><span class="koboSpan" id="kobo.919.4">I’ll leave the details in the </span><em class="italic"><span class="koboSpan" id="kobo.920.1">Further reading</span></em><span class="koboSpan" id="kobo.921.1"> section of </span><span class="No-Break"><span class="koboSpan" id="kobo.922.1">this chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.923.1">In short, every table we create should have a field that can uniquely identify individual records. </span><span class="koboSpan" id="kobo.923.2">It should not consist of data that is related to the domain of data contained in the table. </span><span class="koboSpan" id="kobo.923.3">By this I mean we are making a table to hold information about book authors. </span><span class="koboSpan" id="kobo.923.4">We should not use any field related to the author as the primary key, the record’s unique identifier. </span><span class="koboSpan" id="kobo.923.5">Instead, we should use something unrelated. </span><span class="koboSpan" id="kobo.923.6">With MySQL, the norm is to use an auto-incrementing </span><span class="No-Break"><span class="koboSpan" id="kobo.924.1">integer field.</span></span></p>
<p><span class="koboSpan" id="kobo.925.1">An auto-incrementing integer field refers to a field that will automatically populate a number from a sequence starting with the number 1 and increasing automatically with each record insertion. </span><span class="koboSpan" id="kobo.925.2">The increment is not something you should do in code. </span><span class="koboSpan" id="kobo.925.3">This is a feature of the database itself. </span><span class="koboSpan" id="kobo.925.4">This is important. </span><span class="koboSpan" id="kobo.925.5">Relational databases are designed to be atomic, meaning all transactions are isolated. </span><span class="koboSpan" id="kobo.925.6">This is important because it means the database will never generate the same value for the auto-incrementing key even if two record insertions happen within microseconds of one another. </span><span class="koboSpan" id="kobo.925.7">This is something you cannot guarantee with your own code. </span><span class="koboSpan" id="kobo.925.8">You</span><a id="_idIndexMarker966"/><span class="koboSpan" id="kobo.926.1"> need to rely on the server </span><span class="No-Break"><span class="koboSpan" id="kobo.927.1">for this.</span></span></p>
<p><span class="koboSpan" id="kobo.928.1">Using the menu shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.929.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.930.1">.21</span></em><span class="koboSpan" id="kobo.931.1">, add a column and set it as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.932.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.933.1">.22</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.934.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer347">
<span class="koboSpan" id="kobo.935.1"><img alt="Figure 11.22: Add the first column with the settings shown here" src="image/B19644_11_022.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.936.1">Figure 11.22: Add the first column with the settings shown here</span></p>
<p><span class="koboSpan" id="kobo.937.1">Here, we’ve created an auto-incrementing integer field called </span><strong class="source-inline"><span class="koboSpan" id="kobo.938.1">author_id</span></strong><span class="koboSpan" id="kobo.939.1">. </span><span class="koboSpan" id="kobo.939.2">I’m using snake case here, but this is not required. </span><span class="koboSpan" id="kobo.939.3">Use whatever naming conventions your project requires. </span><span class="koboSpan" id="kobo.939.4">Note I haven’t yet officially made it the primary key. </span><span class="koboSpan" id="kobo.939.5">That’s coming. </span><span class="koboSpan" id="kobo.939.6">First, let’s finish out the rest of </span><span class="No-Break"><span class="koboSpan" id="kobo.940.1">our columns.</span></span></p>
<p><span class="koboSpan" id="kobo.941.1">This can be done quickly if you leave the </span><strong class="source-inline"><span class="koboSpan" id="kobo.942.1">author_id</span></strong><span class="koboSpan" id="kobo.943.1"> field selected, then click the plus button three times. </span><span class="koboSpan" id="kobo.943.2">When you have a column selected, or even when you have the </span><strong class="source-inline"><span class="koboSpan" id="kobo.944.1">columns</span></strong><span class="koboSpan" id="kobo.945.1"> folder selected in the window, PyCharm assumes that when you click the </span><strong class="bold"><span class="koboSpan" id="kobo.946.1">+</span></strong><span class="koboSpan" id="kobo.947.1"> button, you want a column. </span><span class="koboSpan" id="kobo.947.2">Likewise, you can </span><a id="_idIndexMarker967"/><span class="koboSpan" id="kobo.948.1">select any of the other folders for things such as primary keys, foreign keys, and indexes. </span><span class="koboSpan" id="kobo.948.2">PyCharm will simply create it without making you use the menu we </span><span class="No-Break"><span class="koboSpan" id="kobo.949.1">saw earlier.</span></span></p>
<p><span class="koboSpan" id="kobo.950.1">Configure the three fields </span><span class="No-Break"><span class="koboSpan" id="kobo.951.1">like so:</span></span></p>
<ul>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.952.1">first_name</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.953.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.954.1">varchar(30)</span></strong></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.955.1">last_name</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.956.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.957.1">varchar(30)</span></strong></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.958.1">email</span></strong><span class="koboSpan" id="kobo.959.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.960.1">varchar(255) </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.961.1">not null</span></strong></span></li>
</ul>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.962.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.963.1">.23</span></em><span class="koboSpan" id="kobo.964.1"> shows the last field configuration. </span><span class="koboSpan" id="kobo.964.2">I gave this one the </span><strong class="source-inline"><span class="koboSpan" id="kobo.965.1">not null</span></strong><span class="koboSpan" id="kobo.966.1"> constraint, which will prevent a record insertion from completing if the </span><strong class="source-inline"><span class="koboSpan" id="kobo.967.1">email</span></strong><span class="koboSpan" id="kobo.968.1"> field is left empty. </span><span class="koboSpan" id="kobo.968.2">This is done by clicking the checkbox titled </span><strong class="bold"><span class="koboSpan" id="kobo.969.1">Not null</span></strong><span class="koboSpan" id="kobo.970.1">, as seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.971.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.972.1">.22</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.973.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer348">
<span class="koboSpan" id="kobo.974.1"><img alt="Figure 11.23: Configure the email field as shown" src="image/B19644_11_023.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.975.1">Figure 11.23: Configure the email field as shown</span></p>
<p><span class="koboSpan" id="kobo.976.1">It’s starting to look</span><a id="_idIndexMarker968"/><span class="koboSpan" id="kobo.977.1"> like a table, isn’t it? </span><span class="koboSpan" id="kobo.977.2">There are just a couple more things we need. </span><span class="koboSpan" id="kobo.977.3">Let’s go ahead and configure the </span><strong class="source-inline"><span class="koboSpan" id="kobo.978.1">author_id</span></strong><span class="koboSpan" id="kobo.979.1"> field to be a proper </span><span class="No-Break"><span class="koboSpan" id="kobo.980.1">primary key.</span></span></p>
<h3><span class="koboSpan" id="kobo.981.1">Setting the primary key</span></h3>
<p><span class="koboSpan" id="kobo.982.1">Click on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.983.1">keys</span></strong><span class="koboSpan" id="kobo.984.1"> folder, then </span><a id="_idIndexMarker969"/><span class="koboSpan" id="kobo.985.1">click the </span><strong class="bold"><span class="koboSpan" id="kobo.986.1">+</span></strong><span class="koboSpan" id="kobo.987.1"> button. </span><span class="koboSpan" id="kobo.987.2">You’re asked whether you want to create a primary or unique key, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.988.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.989.1">.24</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.990.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer349">
<span class="koboSpan" id="kobo.991.1"><img alt="Figure 11.24: Make sure the keys folder is selected, as shown in this figure, then click the + icon and pick Primary Key" src="image/B19644_11_024.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.992.1">Figure 11.24: Make sure the keys folder is selected, as shown in this figure, then click the + icon and pick Primary Key</span></p>
<p><span class="koboSpan" id="kobo.993.1">This will bring up a different</span><a id="_idIndexMarker970"/><span class="koboSpan" id="kobo.994.1"> window, as seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.995.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.996.1">.25</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.997.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer350">
<span class="koboSpan" id="kobo.998.1"><img alt="Figure 11.25: Adding a primary key entails clicking the + icon and then selecting the field name from the dropdown" src="image/B19644_11_025.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.999.1">Figure 11.25: Adding a primary key entails clicking the + icon and then selecting the field name from the dropdown</span></p>
<p><span class="koboSpan" id="kobo.1000.1">To add the key, click the </span><strong class="bold"><span class="koboSpan" id="kobo.1001.1">+</span></strong><span class="koboSpan" id="kobo.1002.1"> button shown by the arrow, then click the dropdown to reveal the fields. </span><span class="koboSpan" id="kobo.1002.2">Click the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1003.1">author_id</span></strong><span class="koboSpan" id="kobo.1004.1"> field to add it as the primary key. </span><span class="koboSpan" id="kobo.1004.2">The relational theory allows for the creation of compound</span><a id="_idIndexMarker971"/><span class="koboSpan" id="kobo.1005.1"> keys, which is why you could potentially add more than one field. </span><span class="koboSpan" id="kobo.1005.2">It isn’t used in general practice since if you stick to an auto-incrementing integer for your key, creating a compound primary key isn’t needed. </span><span class="koboSpan" id="kobo.1005.3">In fact, I consider a compound key to be a </span><span class="No-Break"><span class="koboSpan" id="kobo.1006.1">code smell.</span></span></p>
<h3><span class="koboSpan" id="kobo.1007.1">Adding a unique key constraint</span></h3>
<p><span class="koboSpan" id="kobo.1008.1">Next, let’s constrain the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1009.1">email</span></strong><span class="koboSpan" id="kobo.1010.1"> field so that the value of any inserted record must be unique. </span><span class="koboSpan" id="kobo.1010.2">This prevents data toxicity </span><a id="_idIndexMarker972"/><span class="koboSpan" id="kobo.1011.1">problems arising from promiscuous inserts. </span><span class="koboSpan" id="kobo.1011.2">There should really only be one record for each email address. </span><span class="koboSpan" id="kobo.1011.3">Let’s enforce it formally with a </span><span class="No-Break"><span class="koboSpan" id="kobo.1012.1">unique key.</span></span></p>
<p><span class="koboSpan" id="kobo.1013.1">The process is the same as with the primary key, except this time we’ll pick a unique key instead of the primary key and we’ll specify the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1014.1">email</span></strong><span class="koboSpan" id="kobo.1015.1"> field. </span><span class="koboSpan" id="kobo.1015.2">There’s a trick though. </span><span class="koboSpan" id="kobo.1015.3">This time, you’ll need to right-click the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1016.1">keys</span></strong><span class="koboSpan" id="kobo.1017.1"> folder to pick the </span><strong class="bold"><span class="koboSpan" id="kobo.1018.1">Unique Key</span></strong><span class="koboSpan" id="kobo.1019.1">. </span><span class="koboSpan" id="kobo.1019.2">If you just click the </span><strong class="bold"><span class="koboSpan" id="kobo.1020.1">+</span></strong><span class="koboSpan" id="kobo.1021.1"> icon, it will add another primary key field, which isn’t what we want. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1022.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1023.1">.26</span></em><span class="koboSpan" id="kobo.1024.1"> shows you what </span><span class="No-Break"><span class="koboSpan" id="kobo.1025.1">to do.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer351">
<span class="koboSpan" id="kobo.1026.1"><img alt="Figure 11.26: Right-click keys, then click New | Unique Key to avoid creating a second primary key" src="image/B19644_11_026.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1027.1">Figure 11.26: Right-click keys, then click New | Unique Key to avoid creating a second primary key</span></p>
<p><span class="koboSpan" id="kobo.1028.1">Right-click the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1029.1">keys</span></strong><span class="koboSpan" id="kobo.1030.1"> folder, indicated by</span><a id="_idIndexMarker973"/><span class="koboSpan" id="kobo.1031.1"> the arrow in the preceding figure, then click </span><strong class="bold"><span class="koboSpan" id="kobo.1032.1">New</span></strong><span class="koboSpan" id="kobo.1033.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1034.1">Unique Key</span></strong><span class="koboSpan" id="kobo.1035.1"> to create the unique key constraint. </span><span class="koboSpan" id="kobo.1035.2">Then, as before, click the dropdown, then click the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1036.1">email</span></strong><span class="koboSpan" id="kobo.1037.1"> field. </span><span class="koboSpan" id="kobo.1037.2">I would also change the name from the generated </span><strong class="source-inline"><span class="koboSpan" id="kobo.1038.1">authors_pk2</span></strong><span class="koboSpan" id="kobo.1039.1"> value to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1040.1">authors_uq</span></strong><span class="koboSpan" id="kobo.1041.1">. </span><span class="koboSpan" id="kobo.1041.2">This will tell you at a glance in the DDL that it is a unique </span><span class="No-Break"><span class="koboSpan" id="kobo.1042.1">field constraint.</span></span></p>
<h3><span class="koboSpan" id="kobo.1043.1">Adding an index</span></h3>
<p><span class="koboSpan" id="kobo.1044.1">Adding an index to a table will make filtered </span><a id="_idIndexMarker974"/><span class="koboSpan" id="kobo.1045.1">read operations more performant. </span><span class="koboSpan" id="kobo.1045.2">It would be a reasonable requirement to expect an application to allow users to search for an author by their email address. </span><span class="koboSpan" id="kobo.1045.3">Adding an index to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1046.1">email</span></strong><span class="koboSpan" id="kobo.1047.1"> field will make this search faster at the expense of making new record inserts slightly slower. </span><span class="koboSpan" id="kobo.1047.2">The insert performance hit is small, but if you were to add an index to every single field, it would become noticeable, so pick the fields you want to </span><span class="No-Break"><span class="koboSpan" id="kobo.1048.1">index carefully.</span></span></p>
<p><span class="koboSpan" id="kobo.1049.1">The process is the same for creating the keys. </span><span class="koboSpan" id="kobo.1049.2">Refer to </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1050.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1051.1">.27</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1052.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer352">
<span class="koboSpan" id="kobo.1053.1"><img alt="Figure 11.27: Right-click the indexes folder and add the index as shown" src="image/B19644_11_027.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1054.1">Figure 11.27: Right-click the indexes folder and add the index as shown</span></p>
<p><span class="koboSpan" id="kobo.1055.1">This time, we right-click</span><a id="_idIndexMarker975"/><span class="koboSpan" id="kobo.1056.1"> the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1057.1">indexes</span></strong><span class="koboSpan" id="kobo.1058.1"> folder and click </span><strong class="bold"><span class="koboSpan" id="kobo.1059.1">New</span></strong><span class="koboSpan" id="kobo.1060.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1061.1">Index</span></strong><span class="koboSpan" id="kobo.1062.1">. </span><span class="koboSpan" id="kobo.1062.2">From here, the dialog is familiar, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1063.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1064.1">.28</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1065.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer353">
<span class="koboSpan" id="kobo.1066.1"><img alt="Figure 11.28: We’ve added an index to the email field" src="image/B19644_11_028.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1067.1">Figure 11.28: We’ve added an index to the email field</span></p>
<p><span class="koboSpan" id="kobo.1068.1">At this point, our table code won’t fit in a</span><a id="_idIndexMarker976"/><span class="koboSpan" id="kobo.1069.1"> screenshot, so here’s what </span><span class="No-Break"><span class="koboSpan" id="kobo.1070.1">we have:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1071.1">
create table authors
(
  author_id int auto_increment,
  first_name varchar(30) null,
  last_name varchar(30) null,
  email   varchar(255) not null,
  constraint authors_pk
    primary key (author_id)
);
create unique index authors_email_uindex
  on authors (email);
alter table authors
  add constraint authors_uq
    unique (email);</span></pre> <p><span class="koboSpan" id="kobo.1072.1">When you’re happy with your table structure, click </span><strong class="bold"><span class="koboSpan" id="kobo.1073.1">OK</span></strong><span class="koboSpan" id="kobo.1074.1"> and PyCharm will apply the DDL code generated to the database. </span><span class="koboSpan" id="kobo.1074.2">You</span><a id="_idIndexMarker977"/><span class="koboSpan" id="kobo.1075.1"> can see the results in the data source. </span><span class="koboSpan" id="kobo.1075.2">Check mine out in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1076.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1077.1">.29</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1078.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer354">
<span class="koboSpan" id="kobo.1079.1"><img alt="Figure 11.29: The results of our hard work are shown in the data source panel" src="image/B19644_11_029.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1080.1">Figure 11.29: The results of our hard work are shown in the data source panel</span></p>
<h2 id="_idParaDest-280"><a id="_idTextAnchor287"/><span class="koboSpan" id="kobo.1081.1">Altering existing structures</span></h2>
<p><span class="koboSpan" id="kobo.1082.1">I’ve seen a lot of tools over the</span><a id="_idIndexMarker978"/><span class="koboSpan" id="kobo.1083.1"> years that are good at allowing you to graphically create a database structure, but when it comes to altering existing structures, they fall flat. </span><span class="koboSpan" id="kobo.1083.2">Microsoft SSMS springs to mind! </span><span class="koboSpan" id="kobo.1083.3">It will let you merrily design away only to tell you when you try to commit your changes that it can’t </span><span class="No-Break"><span class="koboSpan" id="kobo.1084.1">do it.</span></span></p>
<p><span class="koboSpan" id="kobo.1085.1">PyCharm’s not like that. </span><span class="koboSpan" id="kobo.1085.2">PyCharm handles changes the way your company’s DBA wants you to do it. </span><span class="koboSpan" id="kobo.1085.3">If you’re new to the field, a DBA is in charge of the database. </span><span class="koboSpan" id="kobo.1085.4">They’re the boss. </span><span class="koboSpan" id="kobo.1085.5">If you are lucky enough to be granted</span><a id="_idIndexMarker979"/><span class="koboSpan" id="kobo.1086.1"> the </span><em class="italic"><span class="koboSpan" id="kobo.1087.1">privilege</span></em><span class="koboSpan" id="kobo.1088.1"> of creating anything in their database, you will follow their rules. </span><span class="koboSpan" id="kobo.1088.2">And they want you to alter structures using SQL </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1089.1">alter</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1090.1"> statements.</span></span></p>
<p><span class="koboSpan" id="kobo.1091.1">Right-click the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1092.1">authors</span></strong><span class="koboSpan" id="kobo.1093.1"> table and click </span><strong class="bold"><span class="koboSpan" id="kobo.1094.1">Modify Table…</span></strong><span class="koboSpan" id="kobo.1095.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1096.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1097.1">.30</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1098.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer355">
<span class="koboSpan" id="kobo.1099.1"><img alt="Figure 11.30: You can alter existing tables by right-clicking the table" src="image/B19644_11_30.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1100.1">Figure 11.30: You can alter existing tables by right-clicking the table</span></p>
<p><span class="koboSpan" id="kobo.1101.1">When you do this, you get a window like the one shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1102.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1103.1">.31</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1104.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer356">
<span class="koboSpan" id="kobo.1105.1"><img alt="Figure 11.31: Changes you make here are generated as an alter statement, which is a best practice in database development" src="image/B19644_11_31.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1106.1">Figure 11.31: Changes you make here are generated as an alter statement, which is a best practice in database development</span></p>
<p><span class="koboSpan" id="kobo.1107.1">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1108.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1109.1">.31</span></em><span class="koboSpan" id="kobo.1110.1">, I’ve added a column called </span><strong class="source-inline"><span class="koboSpan" id="kobo.1111.1">date_of_birthd</span></strong><span class="koboSpan" id="kobo.1112.1"> with the type of date. </span><span class="koboSpan" id="kobo.1112.2">As you can see in the preview window, PyCharm is generating an </span><strong class="source-inline"><span class="koboSpan" id="kobo.1113.1">alter</span></strong><span class="koboSpan" id="kobo.1114.1"> statement rather than trying to drop and</span><a id="_idIndexMarker980"/><span class="koboSpan" id="kobo.1115.1"> recreate the table as many database editors do. </span><span class="koboSpan" id="kobo.1115.2">If you wanted to drop the table, there was an option for that in the menu displayed in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1116.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1117.1">.30</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1118.1">.</span></span></p>
<h2 id="_idParaDest-281"><a id="_idTextAnchor288"/><span class="koboSpan" id="kobo.1119.1">Generating scripts</span></h2>
<p><span class="koboSpan" id="kobo.1120.1">PyCharm has a very powerful utility for</span><a id="_idIndexMarker981"/><span class="koboSpan" id="kobo.1121.1"> generating all kinds of SQL scripts. </span><span class="koboSpan" id="kobo.1121.2">Since we’re talking about DDL here, it makes sense to learn how to generate the full SQL script that will create the table we’ve been </span><span class="No-Break"><span class="koboSpan" id="kobo.1122.1">working on.</span></span></p>
<p><span class="koboSpan" id="kobo.1123.1">Right-click the database, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1124.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1125.1">.32</span></em><span class="koboSpan" id="kobo.1126.1">, and click the </span><strong class="bold"><span class="koboSpan" id="kobo.1127.1">SQL Scripts</span></strong><span class="koboSpan" id="kobo.1128.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1129.1">SQL Generator…</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1130.1">menu item.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer357">
<span class="koboSpan" id="kobo.1131.1"><img alt="Figure 11.32: SQL Generator generates the create script for our database" src="image/B19644_11_32.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1132.1">Figure 11.32: SQL Generator generates the create script for our database</span></p>
<p><span class="koboSpan" id="kobo.1133.1">The panel on the left allows you to set </span><a id="_idIndexMarker982"/><span class="koboSpan" id="kobo.1134.1">a few interesting options. </span><span class="koboSpan" id="kobo.1134.2">As you click them, the generated SQL will change if applicable. </span><span class="koboSpan" id="kobo.1134.3">I say </span><em class="italic"><span class="koboSpan" id="kobo.1135.1">if applicable</span></em><span class="koboSpan" id="kobo.1136.1"> because not every database platform supports every syntax option in the list. </span><span class="koboSpan" id="kobo.1136.2">We’re using MySQL, which supports the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1137.1">Use CREATE IF NOT EXISTS</span></strong><span class="koboSpan" id="kobo.1138.1"> syntax but doesn’t support the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1139.1">CREATE OR REPLACE</span></strong><span class="koboSpan" id="kobo.1140.1"> syntax, which you would find in Postgres or Oracle. </span><span class="koboSpan" id="kobo.1140.2">Clicking a syntax that isn’t supported simply doesn’t change the syntax in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1141.1">preview window.</span></span></p>
<p><span class="koboSpan" id="kobo.1142.1">When the DDL script meets your needs, you can use the buttons on the far right (circled in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1143.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1144.1">.32</span></em><span class="koboSpan" id="kobo.1145.1">) to copy, save, or run the script in </span><a id="_idIndexMarker983"/><span class="koboSpan" id="kobo.1146.1">a </span><span class="No-Break"><span class="koboSpan" id="kobo.1147.1">query window.</span></span></p>
<h3><span class="koboSpan" id="kobo.1148.1">Generating a database diagram</span></h3>
<p><span class="koboSpan" id="kobo.1149.1">Very traditional database practices typically </span><a id="_idIndexMarker984"/><span class="koboSpan" id="kobo.1150.1">entail a design document such as a database schema diagram. </span><span class="koboSpan" id="kobo.1150.2">In the good old days, we’d use dedicated tools for diagramming. </span><span class="koboSpan" id="kobo.1150.3">PyCharm has a diagramming tool built in, and the best part is the diagram is generated based on the structure of the database, rather than being drawn </span><span class="No-Break"><span class="koboSpan" id="kobo.1151.1">from scratch.</span></span></p>
<p><span class="koboSpan" id="kobo.1152.1">To generate a diagram, just right-click your database, find the </span><strong class="bold"><span class="koboSpan" id="kobo.1153.1">Diagrams</span></strong><span class="koboSpan" id="kobo.1154.1"> menu item, and pick either option shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1155.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1156.1">.33</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1157.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer358">
<span class="koboSpan" id="kobo.1158.1"><img alt="Figure 11.33: The Diagrams menu items are shown along with a generated diagram" src="image/B19644_11_33.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1159.1">Figure 11.33: The Diagrams menu items are shown along with a generated diagram</span></p>
<p><span class="koboSpan" id="kobo.1160.1">The only difference between the two options is one draws the diagram directly in the content area of the IDE while the other generates it in a pop-up window. </span><span class="koboSpan" id="kobo.1160.2">The pop-up window is useful for viewing the diagram on another monitor. </span><span class="koboSpan" id="kobo.1160.3">You can navigate the diagram with zooming tools, as well as panning around by right-clicking within the diagram </span><span class="No-Break"><span class="koboSpan" id="kobo.1161.1">while dragging.</span></span></p>
<p><span class="koboSpan" id="kobo.1162.1">You’ll also find export options on the top toolbar for exporting your diagram to image files, as well as data files that can be</span><a id="_idIndexMarker985"/><span class="koboSpan" id="kobo.1163.1"> imported into dedicated </span><span class="No-Break"><span class="koboSpan" id="kobo.1164.1">diagramming tools.</span></span></p>
<h1 id="_idParaDest-282"><a id="_idTextAnchor289"/><span class="koboSpan" id="kobo.1165.1">Querying the data source using SQL</span></h1>
<p><span class="koboSpan" id="kobo.1166.1">Querying the database is probably the second most useful feature of having database tooling built right into the IDE. </span><span class="koboSpan" id="kobo.1166.2">As </span><a id="_idIndexMarker986"/><span class="koboSpan" id="kobo.1167.1">with many of the features in PyCharm, this one ensures you never need to leave PyCharm to get your </span><span class="No-Break"><span class="koboSpan" id="kobo.1168.1">work done.</span></span></p>
<p><span class="koboSpan" id="kobo.1169.1">There are several places that</span><a id="_idIndexMarker987"/><span class="koboSpan" id="kobo.1170.1"> allow you to run queries. </span><span class="koboSpan" id="kobo.1170.2">You can run ad hoc queries in a query console, or you can run queries directly from </span><strong class="source-inline"><span class="koboSpan" id="kobo.1171.1">.</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1172.1">sql</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1173.1"> files.</span></span></p>
<h2 id="_idParaDest-283"><a id="_idTextAnchor290"/><span class="koboSpan" id="kobo.1174.1">Ad hoc queries</span></h2>
<p><span class="koboSpan" id="kobo.1175.1">Ad hoc queries are simply queries for an</span><a id="_idIndexMarker988"/><span class="koboSpan" id="kobo.1176.1"> immediate purpose. </span><span class="koboSpan" id="kobo.1176.2">An ad hoc query has a number </span><span class="No-Break"><span class="koboSpan" id="kobo.1177.1">of</span></span><span class="No-Break"><a id="_idIndexMarker989"/></span><span class="No-Break"><span class="koboSpan" id="kobo.1178.1"> characteristics:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.1179.1">Unplanned</span></strong><span class="koboSpan" id="kobo.1180.1">: Ad hoc queries are not part of a predefined set of queries. </span><span class="koboSpan" id="kobo.1180.2">They are written on the spot to address a </span><span class="No-Break"><span class="koboSpan" id="kobo.1181.1">particular need.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1182.1">Temporary</span></strong><span class="koboSpan" id="kobo.1183.1">: They are used to retrieve data for a specific task or situation and are not saved for future use. </span><span class="koboSpan" id="kobo.1183.2">They aren’t part of your application, though after some experimentation and tweaking, you might formalize them in </span><span class="No-Break"><span class="koboSpan" id="kobo.1184.1">your code.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1185.1">No optimization</span></strong><span class="koboSpan" id="kobo.1186.1">: Ad hoc queries might not be optimized for efficiency, as they are quickly put together without the time </span><span class="No-Break"><span class="koboSpan" id="kobo.1187.1">for fine-tuning.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1188.1">Variability</span></strong><span class="koboSpan" id="kobo.1189.1">: The syntax and structure of ad hoc queries can vary depending on the user’s knowledge </span><span class="No-Break"><span class="koboSpan" id="kobo.1190.1">and experience.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1191.1">Not stored</span></strong><span class="koboSpan" id="kobo.1192.1">: Unlike stored procedures or views, ad hoc queries are not stored in the database as with, say, a view or a stored procedure. </span><span class="koboSpan" id="kobo.1192.2">This means they cannot be called or executed again later unless you save them to a </span><span class="No-Break"><span class="koboSpan" id="kobo.1193.1">file later.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1194.1">Ad hoc queries are executed in a database console. </span><span class="koboSpan" id="kobo.1194.2">A console window appears automatically when you complete your connection to the data source, but there are many places in the interface where you can create a new console view. </span><span class="koboSpan" id="kobo.1194.3">Look at </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1195.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1196.1">.34</span></em><span class="koboSpan" id="kobo.1197.1"> and you’ll see the data source window. </span><span class="koboSpan" id="kobo.1197.2">A button labeled </span><strong class="bold"><span class="koboSpan" id="kobo.1198.1">QL</span></strong><span class="koboSpan" id="kobo.1199.1">, for </span><strong class="bold"><span class="koboSpan" id="kobo.1200.1">Query Language</span></strong><span class="koboSpan" id="kobo.1201.1">, is circled. </span><span class="koboSpan" id="kobo.1201.2">It doesn’t say </span><em class="italic"><span class="koboSpan" id="kobo.1202.1">SQL</span></em><span class="koboSpan" id="kobo.1203.1"> because, remember, PyCharm also supports NoSQL databases, such as </span><a id="_idIndexMarker990"/><span class="koboSpan" id="kobo.1204.1">MongoDB, Apache Cassandra, </span><span class="No-Break"><span class="koboSpan" id="kobo.1205.1">and Redis.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer359">
<span class="koboSpan" id="kobo.1206.1"><img alt="Figure 11.34: Any place you see a QL icon like this you can launch a console window and query your data source using an ad hoc query" src="image/B19644_11_034.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1207.1">Figure 11.34: Any place you see a QL icon like this you can launch a console window and query your data source using an ad hoc query</span></p>
<p><span class="koboSpan" id="kobo.1208.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.1209.1">QL</span></strong><span class="koboSpan" id="kobo.1210.1"> button is sensitive to the database selected in the data source window, so if you have more than one data source, you can open a query source to any of them by selecting them in the data source window and then hitting the </span><strong class="bold"><span class="koboSpan" id="kobo.1211.1">QL</span></strong><span class="koboSpan" id="kobo.1212.1"> button. </span><span class="koboSpan" id="kobo.1212.2">I actually closed the console that was automatically launched when I created the data source. </span><span class="koboSpan" id="kobo.1212.3">To create a new </span><a id="_idIndexMarker991"/><span class="koboSpan" id="kobo.1213.1">console, I’ll hit the </span><strong class="bold"><span class="koboSpan" id="kobo.1214.1">QL</span></strong><span class="koboSpan" id="kobo.1215.1"> button and select </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1216.1">New Console</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1217.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1218.1">The first console you open becomes the </span><strong class="bold"><span class="koboSpan" id="kobo.1219.1">default console</span></strong><span class="koboSpan" id="kobo.1220.1">. </span><span class="koboSpan" id="kobo.1220.2">PyCharm keeps track of your consoles in the </span><strong class="bold"><span class="koboSpan" id="kobo.1221.1">Scratches and Consoles</span></strong><span class="koboSpan" id="kobo.1222.1"> folder, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1223.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1224.1">.35</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1225.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer360">
<span class="koboSpan" id="kobo.1226.1"><img alt="Figure 11.35: PyCharm tracks consoles along with scratch files in a dedicated folder in the IDE" src="image/B19644_11_35.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1227.1">Figure 11.35: PyCharm tracks consoles along with scratch files in a dedicated folder in the IDE</span></p>
<p><span class="koboSpan" id="kobo.1228.1">If you’ve typed any SQL in the console, PyCharm will keep the contents even between sessions. </span><span class="koboSpan" id="kobo.1228.2">Empty consoles will disappear when you exit PyCharm. </span><span class="koboSpan" id="kobo.1228.3">This is handy for keeping track of your ad </span><span class="No-Break"><span class="koboSpan" id="kobo.1229.1">hoc work.</span></span></p>
<h2 id="_idParaDest-284"><a id="_idTextAnchor291"/><span class="koboSpan" id="kobo.1230.1">Generating SQL statements</span></h2>
<p><span class="koboSpan" id="kobo.1231.1">We need to create some seed </span><a id="_idIndexMarker992"/><span class="koboSpan" id="kobo.1232.1">records, which will ultimately be saved as a seed script. </span><span class="koboSpan" id="kobo.1232.2">A seed script is a script that can be used for testing an application by seeding the database with some initial test data. </span><span class="koboSpan" id="kobo.1232.3">We’re moving away from the strictly DDL statements we’ve used so far. </span><span class="koboSpan" id="kobo.1232.4">We’re going to be using more DML, which are the statements used to work with data rather than database structure. </span><span class="koboSpan" id="kobo.1232.5">Seed scripts are also useful for filling in data tables with static data that </span><span class="No-Break"><span class="koboSpan" id="kobo.1233.1">rarely changes.</span></span></p>
<p><span class="koboSpan" id="kobo.1234.1">We’re going to seed our </span><strong class="source-inline"><span class="koboSpan" id="kobo.1235.1">authors</span></strong><span class="koboSpan" id="kobo.1236.1"> table with a few records, but we’re going to have PyCharm generate a lot of the SQL for us. </span><span class="koboSpan" id="kobo.1236.2">Begin by creating a console if you don’t have one open already. </span><span class="koboSpan" id="kobo.1236.3">Right-click the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1237.1">authors</span></strong><span class="koboSpan" id="kobo.1238.1"> table, hover over </span><strong class="bold"><span class="koboSpan" id="kobo.1239.1">SQL Scripts</span></strong><span class="koboSpan" id="kobo.1240.1">, then find </span><strong class="bold"><span class="koboSpan" id="kobo.1241.1">Insert rows into a table</span></strong><span class="koboSpan" id="kobo.1242.1">. </span><span class="koboSpan" id="kobo.1242.2">Check out </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1243.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1244.1">.36</span></em><span class="koboSpan" id="kobo.1245.1"> to see it </span><span class="No-Break"><span class="koboSpan" id="kobo.1246.1">in action.</span></span></p>
<p class="IMG---Figure"><span class="koboSpan" id="kobo.1247.1">s</span></p>
<div>
<div class="IMG---Figure" id="_idContainer361">
<span class="koboSpan" id="kobo.1248.1"><img alt="Figure 11.36: PyCharm will generate DML queries for you automatically!" src="image/B19644_11_36.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1249.1">Figure 11.36: PyCharm will generate DML queries for you automatically!</span></p>
<p><span class="koboSpan" id="kobo.1250.1">Once you click the option, you’ll find an </span><strong class="source-inline"><span class="koboSpan" id="kobo.1251.1">insert</span></strong><span class="koboSpan" id="kobo.1252.1"> statement has </span><a id="_idIndexMarker993"/><span class="koboSpan" id="kobo.1253.1">been inserted (oh yes!) directly into the console. </span><span class="koboSpan" id="kobo.1253.2">You can see mine in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1254.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1255.1">.37</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1256.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer362">
<span class="koboSpan" id="kobo.1257.1"><img alt="Figure 11.37: PyCharm generated an insert statement for the table we selected" src="image/B19644_11_037.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1258.1">Figure 11.37: PyCharm generated an insert statement for the table we selected</span></p>
<p><span class="koboSpan" id="kobo.1259.1">Note the bounding box around the</span><a id="_idIndexMarker994"/><span class="koboSpan" id="kobo.1260.1"> text. </span><span class="koboSpan" id="kobo.1260.2">We’ve seen this before. </span><span class="koboSpan" id="kobo.1260.3">You’re looking at a template! </span><span class="koboSpan" id="kobo.1260.4">This means we can tab from place to place in the templated text, which is why you shouldn’t mess with the text as </span><span class="No-Break"><span class="koboSpan" id="kobo.1261.1">I did.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.1262.1">Copy-paste warning!</span></p>
<p class="callout"><span class="koboSpan" id="kobo.1263.1">If you have an electronic copy of this book that allows you to copy and paste from the e-book itself, be careful with any code that relies on single quotation marks as the upcoming SQL statement does. </span><span class="koboSpan" id="kobo.1263.2">The process of editing the book often turns them into special characters that won’t work when you paste them into a console. </span><span class="koboSpan" id="kobo.1263.3">Make sure the single quotation marks are really single </span><span class="No-Break"><span class="koboSpan" id="kobo.1264.1">quotation marks!</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.1265.1">insert</span></strong><span class="koboSpan" id="kobo.1266.1"> statements can be divided into </span><span class="No-Break"><span class="koboSpan" id="kobo.1267.1">two halves:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1268.1">
insert into authors (first_name, last_name, email)
values ('Bruce', 'Van Horn', 'bruce@test.com');</span></pre> <p><span class="koboSpan" id="kobo.1269.1">The halves I’m talking about are the parts of the statement that aren’t boilerplate – the parts in the two sets of parentheses. </span><span class="koboSpan" id="kobo.1269.2">The first set specifies which fields you’ll be filling, and the second set is the values. </span><span class="koboSpan" id="kobo.1269.3">You have to match the order and type of the fields in the first half when you type values for each field. </span><span class="koboSpan" id="kobo.1269.4">If you hit the </span><em class="italic"><span class="koboSpan" id="kobo.1270.1">Tab</span></em><span class="koboSpan" id="kobo.1271.1"> key, you’ll move between the two halves of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1272.1">insert</span></strong><span class="koboSpan" id="kobo.1273.1"> statement, allowing you to modify it as you </span><span class="No-Break"><span class="koboSpan" id="kobo.1274.1">see fit.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.1275.1">Unconventional generated SQL</span></p>
<p class="callout"><span class="koboSpan" id="kobo.1276.1">PyCharm doesn’t generate SQL keywords in all caps by default, which is the normal convention. </span><span class="koboSpan" id="kobo.1276.2">You might notice that statements that I type are all caps, but generated ones aren’t. </span><span class="koboSpan" id="kobo.1276.3">I had to resist the temptation to fix that for the sake of the book, but I also need to explain why there are inconsistencies </span><span class="No-Break"><span class="koboSpan" id="kobo.1277.1">at play.</span></span></p>
<p><span class="koboSpan" id="kobo.1278.1">PyCharm generated a placeholder for the primary key, which is a field you wouldn’t normally populate since the</span><a id="_idIndexMarker995"/><span class="koboSpan" id="kobo.1279.1"> database fills that in automatically. </span><span class="koboSpan" id="kobo.1279.2">Go ahead and take that first field out of the field set in the first parentheses as I did in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1280.1">preceding code.</span></span></p>
<p><span class="koboSpan" id="kobo.1281.1">Next, tab over to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1282.1">values</span></strong><span class="koboSpan" id="kobo.1283.1"> section, and begin to fill in values. </span><span class="koboSpan" id="kobo.1283.2">Remember, in SQL, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1284.1">varchar (string)</span></strong><span class="koboSpan" id="kobo.1285.1"> values must be enclosed in single quotes. </span><span class="koboSpan" id="kobo.1285.2">Python allows you to use either single or double quotes but SQL does not. </span><span class="koboSpan" id="kobo.1285.3">As you type values, PyCharm will give you hints about the field you are matching for the value. </span><span class="koboSpan" id="kobo.1285.4">It does this with a tooltip over the text in the editor, but it also color codes the current field in the top half of the statement. </span><span class="koboSpan" id="kobo.1285.5">See </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1286.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1287.1">.38</span></em><span class="koboSpan" id="kobo.1288.1"> to see what </span><span class="No-Break"><span class="koboSpan" id="kobo.1289.1">I mean.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer363">
<span class="koboSpan" id="kobo.1290.1"><img alt="Figure 11.38: PyCharm gives tooltips for the field and type you are currently filling in the second half of the query" src="image/B19644_11_038.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1291.1">Figure 11.38: PyCharm gives tooltips for the field and type you are currently filling in the second half of the query</span></p>
<p><span class="koboSpan" id="kobo.1292.1">This is huge! </span><span class="koboSpan" id="kobo.1292.2">How many times have you written a long </span><strong class="source-inline"><span class="koboSpan" id="kobo.1293.1">insert</span></strong><span class="koboSpan" id="kobo.1294.1"> statement only to find that you have more values than fields? </span><span class="koboSpan" id="kobo.1294.2">Or worse, you discover you’ve transposed a few fields and you enter a bunch of garbage data by mistake? </span><span class="koboSpan" id="kobo.1294.3">PyCharm gives you a visual indicator to make sure you know exactly which field you’re entering by showing you a tooltip with the field and type you are filling in. </span><span class="koboSpan" id="kobo.1294.4">It also shades the field in the top half of the </span><span class="No-Break"><span class="koboSpan" id="kobo.1295.1">SQL statement.</span></span></p>
<h2 id="_idParaDest-285"><a id="_idTextAnchor292"/><span class="koboSpan" id="kobo.1296.1">Running the query</span></h2>
<p><span class="koboSpan" id="kobo.1297.1">You probably don’t need me to tell you this because, at this point, you’re probably used to seeing green run arrows where it</span><a id="_idIndexMarker996"/><span class="koboSpan" id="kobo.1298.1"> is appropriate to run something. </span><span class="koboSpan" id="kobo.1298.2">You can run the contents of the console by clicking the green arrow at the top of the console’s tab in the IDE. </span><span class="koboSpan" id="kobo.1298.3">You can also highlight a section of the console’s contents and run a portion of </span><span class="No-Break"><span class="koboSpan" id="kobo.1299.1">the query.</span></span></p>
<p><span class="koboSpan" id="kobo.1300.1">Change the contents of your console to match </span><span class="No-Break"><span class="koboSpan" id="kobo.1301.1">this code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1302.1">
insert into authors (first_name, last_name, email)
values ('Bruce', 'Van Horn', 'bruce@test.com');
insert into authors (first_name, last_name, email)
values ('Kinnari', 'Chohan', 'kinnari@test.com');
insert into authors (first_name, last_name, email)
values ('Prajakta', 'Naik', 'prajakta@test.com');
insert into authors (first_name, last_name, email)
values ('Jubit', 'Pincy', 'jubit@test.com');</span></pre> <p><span class="koboSpan" id="kobo.1303.1">All I did was copy the same SQL four times, then I changed the names for a little variety, and to give a shout-out to my Packt crew (holla!). </span><span class="koboSpan" id="kobo.1303.2">Next, highlight the first statement and run the query. </span><span class="koboSpan" id="kobo.1303.3">The </span><strong class="bold"><span class="koboSpan" id="kobo.1304.1">Services</span></strong><span class="koboSpan" id="kobo.1305.1"> panel will open to show the results of the query. </span><span class="koboSpan" id="kobo.1305.2">As you can see in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1306.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1307.1">.39</span></em><span class="koboSpan" id="kobo.1308.1">, only one record </span><span class="No-Break"><span class="koboSpan" id="kobo.1309.1">was inserted.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer364">
<span class="koboSpan" id="kobo.1310.1"><img alt="Figure 11.39: You can execute single statements by selecting them and clicking the Run button" src="image/B19644_11_039.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1311.1">Figure 11.39: You can execute single statements by selecting them and clicking the Run button</span></p>
<p><span class="koboSpan" id="kobo.1312.1">If you select the remainder </span><a id="_idIndexMarker997"/><span class="koboSpan" id="kobo.1313.1">and run again, you’ll find </span><span class="No-Break"><span class="koboSpan" id="kobo.1314.1">three insertions.</span></span></p>
<p><span class="koboSpan" id="kobo.1315.1">Now that we have some data, let’s query with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1316.1">SELECT</span></strong><span class="koboSpan" id="kobo.1317.1"> statement. </span><span class="koboSpan" id="kobo.1317.2">Add this code to </span><span class="No-Break"><span class="koboSpan" id="kobo.1318.1">your console:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1319.1">
SELECT * FROM authors;</span></pre> <p><span class="koboSpan" id="kobo.1320.1">I could have generated </span><strong class="source-inline"><span class="koboSpan" id="kobo.1321.1">select</span></strong><span class="koboSpan" id="kobo.1322.1">, but this query is short. </span><span class="koboSpan" id="kobo.1322.2">I wanted to show you how PyCharm displays the results. </span><span class="koboSpan" id="kobo.1322.3">Take a look at </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1323.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1324.1">.40</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1325.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer365">
<span class="koboSpan" id="kobo.1326.1"><img alt="Figure 11.40: By default, select statements produce a nice, tabular output" src="image/B19644_11_040.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1327.1">Figure 11.40: By default, select statements produce a nice, tabular output</span></p>
<p><span class="koboSpan" id="kobo.1328.1">This is a dense panel! </span><span class="koboSpan" id="kobo.1328.2">You can do a lot here. </span><span class="koboSpan" id="kobo.1328.3">By </span><a id="_idIndexMarker998"/><span class="koboSpan" id="kobo.1329.1">default, you see a tabular view of the data (</span><strong class="bold"><span class="koboSpan" id="kobo.1330.1">1</span></strong><span class="koboSpan" id="kobo.1331.1">). </span><span class="koboSpan" id="kobo.1331.2">You can double-click the cells and edit the data in place. </span><span class="koboSpan" id="kobo.1331.3">You can also add and delete rows using this UI (</span><strong class="bold"><span class="koboSpan" id="kobo.1332.1">2</span></strong><span class="koboSpan" id="kobo.1333.1">). </span><span class="koboSpan" id="kobo.1333.2">After you’ve edited the data to your liking, you can submit your changes using the small green up arrow on the toolbar (</span><strong class="bold"><span class="koboSpan" id="kobo.1334.1">2</span></strong><span class="koboSpan" id="kobo.1335.1">) in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1336.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1337.1">.40</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1338.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1339.1">If you’d rather change the output view from tabular to either raw text or a tree view (which makes more sense for querying hierarchical data), you can click the eyeball icon in the toolbar (</span><strong class="bold"><span class="koboSpan" id="kobo.1340.1">2</span></strong><span class="koboSpan" id="kobo.1341.1">) in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1342.1">Figure 11</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1343.1">.41</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1344.1">.</span></span></p>
<h2 id="_idParaDest-286"><a id="_idTextAnchor293"/><span class="koboSpan" id="kobo.1345.1">Exporting query results</span></h2>
<p><span class="koboSpan" id="kobo.1346.1">You can export the results of your </span><strong class="source-inline"><span class="koboSpan" id="kobo.1347.1">select</span></strong><span class="koboSpan" id="kobo.1348.1"> statements </span><a id="_idIndexMarker999"/><span class="koboSpan" id="kobo.1349.1">using the export button </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1350.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1351.1">.41</span></em><span class="koboSpan" id="kobo.1352.1">. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1353.1">Figure 11</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1354.1">.41</span></em><span class="koboSpan" id="kobo.1355.1"> shows what this </span><span class="No-Break"><span class="koboSpan" id="kobo.1356.1">looks like.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer366">
<span class="koboSpan" id="kobo.1357.1"><img alt="Figure 11.41: Exporting data is easy in PyCharm" src="image/B19644_11_041.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1358.1">Figure 11.41: Exporting data is easy in PyCharm</span></p>
<p><span class="koboSpan" id="kobo.1359.1">The export format </span><a id="_idIndexMarker1000"/><span class="koboSpan" id="kobo.1360.1">defaults to </span><strong class="bold"><span class="koboSpan" id="kobo.1361.1">comma-separated values</span></strong><span class="koboSpan" id="kobo.1362.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1363.1">CSV</span></strong><span class="koboSpan" id="kobo.1364.1">), which is a common format for tabular data exchange. </span><span class="koboSpan" id="kobo.1364.2">PyCharm supports </span><a id="_idIndexMarker1001"/><span class="koboSpan" id="kobo.1365.1">dozens of other useful formats, which you’ll find in the </span><strong class="bold"><span class="koboSpan" id="kobo.1366.1">Extractor</span></strong><span class="koboSpan" id="kobo.1367.1"> drop-down list. </span><span class="koboSpan" id="kobo.1367.2">Change the output file to something you like, then click the </span><strong class="bold"><span class="koboSpan" id="kobo.1368.1">Export to </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1369.1">file</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1370.1"> button.</span></span></p>
<h2 id="_idParaDest-287"><a id="_idTextAnchor294"/><span class="koboSpan" id="kobo.1371.1">Working with SQL files</span></h2>
<p><span class="koboSpan" id="kobo.1372.1">PyCharm supports </span><a id="_idIndexMarker1002"/><span class="koboSpan" id="kobo.1373.1">files with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1374.1">.sql</span></strong><span class="koboSpan" id="kobo.1375.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1376.1">.ddl</span></strong><span class="koboSpan" id="kobo.1377.1"> file extension. </span><span class="koboSpan" id="kobo.1377.2">Like other recognized file types, you’ll get auto-completion, syntax highlighting, and so on. </span><span class="koboSpan" id="kobo.1377.3">You can also run statements directly in the SQL file just like we can in </span><span class="No-Break"><span class="koboSpan" id="kobo.1378.1">the console.</span></span></p>
<p><span class="koboSpan" id="kobo.1379.1">Let’s immortalize our console work so far as a proper script. </span><span class="koboSpan" id="kobo.1379.2">Create a new file in PyCharm called </span><strong class="source-inline"><span class="koboSpan" id="kobo.1380.1">seed.sql</span></strong><span class="koboSpan" id="kobo.1381.1">. </span><span class="koboSpan" id="kobo.1381.2">Next, add this line to the top of the </span><span class="No-Break"><span class="koboSpan" id="kobo.1382.1">script file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1383.1">
USE database_fun;
TRUNCATE TABLE authors;</span></pre> <p><span class="koboSpan" id="kobo.1384.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1385.1">USE</span></strong><span class="koboSpan" id="kobo.1386.1"> statement is MySQL-specific and ensures you have the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1387.1">database_fun</span></strong><span class="koboSpan" id="kobo.1388.1"> database selected prior to executing the SQL statements. </span><span class="koboSpan" id="kobo.1388.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1389.1">TRUNCATE</span></strong><span class="koboSpan" id="kobo.1390.1"> statement will delete all the records in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1391.1">authors</span></strong><span class="koboSpan" id="kobo.1392.1"> table and reset the auto-incrementor sequence on the table back to its initial value. </span><span class="koboSpan" id="kobo.1392.2">This is useful for development testing since now the seed script can reset to a clean set of testing values. </span><span class="koboSpan" id="kobo.1392.3">Just be careful to never run the seed script </span><span class="No-Break"><span class="koboSpan" id="kobo.1393.1">in production!</span></span></p>
<p><span class="koboSpan" id="kobo.1394.1">Next, cut and paste the contents of your console beneath the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1395.1">TRUNCATE</span></strong><span class="koboSpan" id="kobo.1396.1"> statement. </span><span class="koboSpan" id="kobo.1396.2">Note that I said cut. </span><span class="koboSpan" id="kobo.1396.3">You want the</span><a id="_idIndexMarker1003"/><span class="koboSpan" id="kobo.1397.1"> console empty. </span><span class="koboSpan" id="kobo.1397.2">The script should look </span><span class="No-Break"><span class="koboSpan" id="kobo.1398.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1399.1">
USE database_fun;
TRUNCATE TABLE authors;
insert into authors (first_name, last_name, email)
values ('Bruce', 'Van Horn', 'bruce@test.com');
insert into authors (first_name, last_name, email)
values ('Kinnari', 'Chohan', 'kinnari@test.com');
insert into authors (first_name, last_name, email)
values ('Prajakta', 'Naik', 'prajakta@test.com');
insert into authors (first_name, last_name, email)
values ('Jubit', 'Pincy', 'jubit@test.com');
SELECT * FROM authors;</span></pre> <p><span class="koboSpan" id="kobo.1400.1">Save your seed script and run it. </span><span class="koboSpan" id="kobo.1400.2">It should </span><span class="No-Break"><span class="koboSpan" id="kobo.1401.1">execute successfully.</span></span></p>
<h1 id="_idParaDest-288"><a id="_idTextAnchor295"/><span class="koboSpan" id="kobo.1402.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.1403.1">I have this terrible feeling that I haven’t covered everything. </span><span class="koboSpan" id="kobo.1403.2">That’s because I didn’t. </span><span class="koboSpan" id="kobo.1403.3">I could write a whole book just on the database features of PyCharm, but if I did, I might as well title it something like </span><em class="italic"><span class="koboSpan" id="kobo.1404.1">Hands-On Database Programming with DataGrip</span></em><span class="koboSpan" id="kobo.1405.1">. </span><span class="koboSpan" id="kobo.1405.2">Don’t forget, we’re seeing a whole other IDE crammed into the crevices of PyCharm much as we did with WebStorm in </span><a href="B19644_07.xhtml#_idTextAnchor172"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1406.1">Chapter 7</span></em></span></a><span class="koboSpan" id="kobo.1407.1">, </span><em class="italic"><span class="koboSpan" id="kobo.1408.1">Web Development with JavaScript, HTML, and CSS</span></em><span class="koboSpan" id="kobo.1409.1">. </span><span class="koboSpan" id="kobo.1409.2">The feature set is truly staggering and I didn’t cover some of the really interesting features owing to either lack of space in this book or because some of the really cool features are still works </span><span class="No-Break"><span class="koboSpan" id="kobo.1410.1">in progress.</span></span></p>
<p><span class="koboSpan" id="kobo.1411.1">For example, you can set code as a data source and synchronize the code to the structure of the database. </span><span class="koboSpan" id="kobo.1411.2">At present, it isn’t 100% complete, which is why I left it out. </span><span class="koboSpan" id="kobo.1411.3">As a database developer, I would expect to be able to have a round-trip experience where changes to the code are reflected in the database and changes to the database are copied back to the code. </span><span class="koboSpan" id="kobo.1411.4">I think we’re well on </span><span class="No-Break"><span class="koboSpan" id="kobo.1412.1">our way.</span></span></p>
<p><span class="koboSpan" id="kobo.1413.1">What we did cover, though, was pretty complete coverage for either full stack web development or a data science practitioner needing to tap multiple database platforms and data </span><span class="No-Break"><span class="koboSpan" id="kobo.1414.1">storage paradigms.</span></span></p>
<p><span class="koboSpan" id="kobo.1415.1">We started out with a little history. </span><span class="koboSpan" id="kobo.1415.2">I like covering the history in this and previous chapters because I have the advantage of a long career behind me. </span><span class="koboSpan" id="kobo.1415.3">I was around for most of what I’m describing, and I had a front-row seat. </span><span class="koboSpan" id="kobo.1415.4">I was in the first grade when E. </span><span class="koboSpan" id="kobo.1415.5">F. </span><span class="koboSpan" id="kobo.1415.6">Codd formalized relational algebra. </span><span class="koboSpan" id="kobo.1415.7">Part of me wishes I could brag about using his early work, but in truth, I was a bigger fan of watching the Saturday morning TV show </span><em class="italic"><span class="koboSpan" id="kobo.1416.1">Lassie and the Rescue Rangers</span></em><span class="koboSpan" id="kobo.1417.1"> in my footy pajamas than I was of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1418.1">SELECT</span></strong><span class="koboSpan" id="kobo.1419.1"> statements. </span><span class="koboSpan" id="kobo.1419.2">When I was older, I got to work on IBM mainframes, so I did eventually </span><span class="No-Break"><span class="koboSpan" id="kobo.1420.1">catch up.</span></span></p>
<p><span class="koboSpan" id="kobo.1421.1">Moving into more practical matters, we learned that PyCharm, using separately installed JDBC drivers, can connect to dozens of different database platforms. </span><span class="koboSpan" id="kobo.1421.2">We learned it supports not only relational databases but NoSQL as well. </span><span class="koboSpan" id="kobo.1421.3">After we learned how to open the database tools and connect our data source, we learned how to design a database using a host of tools that generate DDL </span><span class="No-Break"><span class="koboSpan" id="kobo.1422.1">for us.</span></span></p>
<p><span class="koboSpan" id="kobo.1423.1">Then we moved on to using PyCharm to generate the DML that would power our work once we got some data in our tables. </span><span class="koboSpan" id="kobo.1423.2">Finally, after working in a console to create our initial work, we saved our SQL into a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1424.1">.</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1425.1">sql</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1426.1"> file.</span></span></p>
<p><span class="koboSpan" id="kobo.1427.1">The positioning of this chapter in the book is very intentional. </span><span class="koboSpan" id="kobo.1427.2">I’ve restrained myself from doing a lot of coding in the full stack frameworks we covered in the last few chapters. </span><span class="koboSpan" id="kobo.1427.3">In real life, you would most assuredly have databases attached to such projects. </span><span class="koboSpan" id="kobo.1427.4">While many developers rely on ORMs to handle the database work for them, it never hurts to at least be able to examine the database and its contents directly using </span><span class="No-Break"><span class="koboSpan" id="kobo.1428.1">a console.</span></span></p>
<p><span class="koboSpan" id="kobo.1429.1">If you’re like me, and you forgo ORMs entirely, you now have the missing piece to the puzzle. </span><span class="koboSpan" id="kobo.1429.2">You can create your database code using a marvelous set of tools without </span><span class="No-Break"><span class="koboSpan" id="kobo.1430.1">leaving PyCharm.</span></span></p>
<p><span class="koboSpan" id="kobo.1431.1">This chapter also offered a logical split as the next few chapters start coverage of PyCharm Professional’s power data science feature set. </span><span class="koboSpan" id="kobo.1431.2">It only makes sense to preface that set of chapters with coverage of these most ubiquitous engines for data storage </span><span class="No-Break"><span class="koboSpan" id="kobo.1432.1">and retrieval.</span></span></p>
<p><span class="koboSpan" id="kobo.1433.1">In the next chapter, we’ll be turning on </span><em class="italic"><span class="koboSpan" id="kobo.1434.1">science mode</span></em><span class="koboSpan" id="kobo.1435.1">! </span><span class="koboSpan" id="kobo.1435.2">Go pick up your lab coat from the dry cleaners, grab yourself a big cup of C</span><span class="subscript"><span class="koboSpan" id="kobo.1436.1">8</span></span><span class="koboSpan" id="kobo.1437.1">H</span><span class="subscript"><span class="koboSpan" id="kobo.1438.1">10</span></span><span class="koboSpan" id="kobo.1439.1">N</span><span class="subscript"><span class="koboSpan" id="kobo.1440.1">4</span></span><span class="koboSpan" id="kobo.1441.1">O</span><span class="subscript"><span class="koboSpan" id="kobo.1442.1">2</span></span><span class="koboSpan" id="kobo.1443.1">, and I’ll see you in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1444.1">next chapter!</span></span></p>
<h1 id="_idParaDest-289"><a id="_idTextAnchor296"/><span class="koboSpan" id="kobo.1445.1">Further reading</span></h1>
<p><span class="koboSpan" id="kobo.1446.1">Be sure to check out the companion website for the book </span><span class="No-Break"><span class="koboSpan" id="kobo.1447.1">at </span></span><a href="https://www.pycharm-book.com"><span class="No-Break"><span class="koboSpan" id="kobo.1448.1">https://www.pycharm-book.com</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1449.1">.</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1450.1">Docker Desktop installation </span><span class="No-Break"><span class="koboSpan" id="kobo.1451.1">instructions: </span></span><a href="https://www.docker.com/products/docker-desktop/"><span class="No-Break"><span class="koboSpan" id="kobo.1452.1">https://www.docker.com/products/docker-desktop/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1453.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1454.1">Using KeePass in </span><span class="No-Break"><span class="koboSpan" id="kobo.1455.1">PyCharm: </span></span><a href="https://www.jetbrains.com/help/pycharm/reference-ide-settings-password-safe.html"><span class="No-Break"><span class="koboSpan" id="kobo.1456.1">https://www.jetbrains.com/help/pycharm/reference-ide-settings-password-safe.html</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1457.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1458.1">Codd, E. </span><span class="koboSpan" id="kobo.1458.2">F. </span><span class="koboSpan" id="kobo.1458.3">(1983). </span><span class="koboSpan" id="kobo.1458.4">A relational model of data for large shared data banks. </span><em class="italic"><span class="koboSpan" id="kobo.1459.1">Communications of the ACM</span></em><span class="koboSpan" id="kobo.1460.1">, </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1461.1">26</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1462.1">(1), 64-69.</span></span></li>
<li><span class="koboSpan" id="kobo.1463.1">Forta, B. </span><span class="koboSpan" id="kobo.1463.2">(2013). </span><em class="italic"><span class="koboSpan" id="kobo.1464.1">Sams teach yourself SQL in 10 minutes</span></em><span class="koboSpan" id="kobo.1465.1">. </span><span class="No-Break"><span class="koboSpan" id="kobo.1466.1">Pearson Education.</span></span></li>
<li><span class="koboSpan" id="kobo.1467.1">Hernandez, M. </span><span class="koboSpan" id="kobo.1467.2">J. </span><span class="koboSpan" id="kobo.1467.3">(2013). </span><em class="italic"><span class="koboSpan" id="kobo.1468.1">Database Design for Mere Mortals: A Hands-On Guide to Relational Database Design</span></em><span class="koboSpan" id="kobo.1469.1">. </span><span class="No-Break"><span class="koboSpan" id="kobo.1470.1">Pearson Education.</span></span></li>
<li><span class="koboSpan" id="kobo.1471.1">Pettit, T. </span><span class="koboSpan" id="kobo.1471.2">and Cossetino, S. </span><span class="koboSpan" id="kobo.1471.3">(2022). </span><em class="italic"><span class="koboSpan" id="kobo.1472.1">The MySQL Workshop</span></em><span class="koboSpan" id="kobo.1473.1">. </span><span class="No-Break"><span class="koboSpan" id="kobo.1474.1">Packt Publishing.</span></span></li>
<li><span class="koboSpan" id="kobo.1475.1">Poulton, N. </span><span class="koboSpan" id="kobo.1475.2">(2023). </span><em class="italic"><span class="koboSpan" id="kobo.1476.1">Docker Deep Dive – 2nd Edition.</span></em> <span class="No-Break"><span class="koboSpan" id="kobo.1477.1">Packt Publishing.</span></span></li>
<li><span class="koboSpan" id="kobo.1478.1">Viescas, J. </span><span class="koboSpan" id="kobo.1478.2">L. </span><span class="koboSpan" id="kobo.1478.3">and Hernandez, M. </span><span class="koboSpan" id="kobo.1478.4">J. </span><span class="koboSpan" id="kobo.1478.5">(2014). </span><em class="italic"><span class="koboSpan" id="kobo.1479.1">SQL Queries for Mere Mortals: A Hands-On Guide to Data Manipulation in SQL</span></em><span class="koboSpan" id="kobo.1480.1">. </span><span class="No-Break"><span class="koboSpan" id="kobo.1481.1">Pearson Education.</span></span></li>
</ul>
</div>


<div class="Content" id="_idContainer368">
<h1 id="_idParaDest-290" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor297"/><span class="koboSpan" id="kobo.1.1">Part 4: Data Science with PyCharm</span></h1>
<p><span class="koboSpan" id="kobo.2.1">Similar to the previous part, this part of the book focuses on a specific application of Python programming, this time data analysis and data science. </span><span class="koboSpan" id="kobo.2.2">Readers will be able to use PyCharm and its features to efficiently work on their data science and scientific </span><span class="No-Break"><span class="koboSpan" id="kobo.3.1">computing projects.</span></span></p>
<p><span class="koboSpan" id="kobo.4.1">This part has the </span><span class="No-Break"><span class="koboSpan" id="kobo.5.1">following chapters:</span></span></p>
<ul>
<li><a href="B19644_12.xhtml#_idTextAnchor298"><em class="italic"><span class="koboSpan" id="kobo.6.1">Chapter 12</span></em></a><span class="koboSpan" id="kobo.7.1">, </span><em class="italic"><span class="koboSpan" id="kobo.8.1">Turning on Scientific Mode</span></em></li>
<li><a href="B19644_13.xhtml#_idTextAnchor318"><em class="italic"><span class="koboSpan" id="kobo.9.1">Chapter 13</span></em></a><span class="koboSpan" id="kobo.10.1">, </span><em class="italic"><span class="koboSpan" id="kobo.11.1">Dynamic Data Viewing with SciView and Jupyter</span></em></li>
<li><a href="B19644_14.xhtml#_idTextAnchor340"><em class="italic"><span class="koboSpan" id="kobo.12.1">Chapter 14</span></em></a><span class="koboSpan" id="kobo.13.1">, </span><em class="italic"><span class="koboSpan" id="kobo.14.1">Building a Data Pipeline in PyCharm</span></em></li>
</ul>
</div>
<div>
<div id="_idContainer369">
</div>
</div>
<div>
<div class="Basic-Graphics-Frame" id="_idContainer370">
</div>
</div>
</body></html>