<html><head></head><body>
        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Introduction to Microsoft Azure Functions</h1>
                
            
            <article>
                
<p class="calibre2">So far, we have learned how to build serverless functions and serverless architectures using Python in the AWS environment. We have also learned about the settings and environment of the AWS Lambda tool in great detail. We shall now learn and explore its counterpart from Microsoft Azure Functions.</p>
<p class="calibre2">In this chapter, you will learn how Microsoft Azure Functions work, what the Microsoft Azure Functions console looks like, and how to go about understanding the settings in the console. This chapter is divided into the following sections:</p>
<ul class="calibre9">
<li class="calibre10">Introduction to Microsoft Azure Functions</li>
<li class="calibre10">Creating your first Azure Function</li>
<li class="calibre10">Understanding triggers</li>
<li class="calibre10">Understanding logging and monitoring</li>
<li class="calibre10">Best practices for writing <span>Microsoft Azure Functions</span></li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Introduction to Microsoft Azure Functions</h1>
                
            
            <article>
                
<p class="calibre2">Microsoft Azure Functions is the Azure counterpart of AWS's Lambda service. In this section, we will learn how to locate and navigate the Microsoft Azure Functions console. So, let's start by performing the following steps:</p>
<ol class="calibre13">
<li value="1" class="calibre10">You can locate the Azure Functions app by navigating to the <span>All services</span> tab on the left menu and typing out the function filter. You will now notice the <span>Microsoft Azure Function's</span> service under the name, <span>Function Apps</span>:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00280.jpeg" class="calibre48"/></div>
<ol start="2" class="calibre13">
<li value="2" class="calibre10">Once you click on that, you will be re-directed to the <span>Function Apps</span> console. For now, it will be empty if you haven't created any functions. The console will look something like this:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00281.jpeg" class="calibre48"/></div>
<ol start="3" class="calibre13">
<li value="3" class="calibre10">Now, let's start with creating an Azure Function. To do so, we need to click on the <span>Create a resource</span> option on the left menu, then click on the <span>Compute</span> option from that list, and then select the <span>Function App</span> option from the subsequent list of options:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00282.jpeg" class="calibre183"/></div>
<p class="calibre2">Microsoft Azure Functions come under the list of <span class="calibre11"><strong class="calibre4">Compute</strong></span> resources on the dashboard. In the following sections, we will learn how to create <span class="calibre11">Microsoft Azure Functions</span> and also understand the different kinds of triggers and how they work.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Creating your first Azure Function</h1>
                
            
            <article>
                
<p class="calibre2">In this section, we will learn how to create and deploy an Azure Function. We will go through the process step by step in order to understand how each section of an Azure function works:</p>
<ol class="calibre13">
<li value="1" class="calibre10">When you click on the <span>Functions App</span> in the menu, you will be re-directed to the <span>Function App </span>creation wizard, as shown in the following screenshot:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00283.jpeg" class="calibre184"/></div>
<ol start="2" class="calibre13">
<li value="2" class="calibre10">Add the required information in the wizard accordingly. Choose <span>Linux (Preview)</span> as the OS. Then, click on the blue <span>Create</span> button at the bottom of the wizard:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00284.jpeg" class="calibre185"/></div>
<ol start="3" class="calibre13">
<li value="3" class="calibre10">Clicking on the <span>Automation options</span> at the bottom will open up a validation screen for automating Function deployments. This is not needed for this chapter. This will simply validate your Azure Function:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00285.jpeg" class="calibre48"/></div>
<ol start="4" class="calibre13">
<li value="4" class="calibre10">Once you click <span>Create</span>, you will see the deployment in progress under the <span>Notifications</span> menu:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00286.jpeg" class="calibre186"/></div>
<ol start="5" class="calibre13">
<li value="5" class="calibre10">Once it has been successfully created, it will be reflected in your notifications list with a green-colored notification:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00287.jpeg" class="calibre187"/></div>
<ol start="6" class="calibre13">
<li value="6" class="calibre10">Clicking on <span>Go to resource</span> will take you to the newly created Azure Function. The function console will look like this:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00288.jpeg" class="calibre48"/></div>
<p class="calibre2">We have successfully created an Azure Function. We will cover in more detail triggers, monitoring, and security in the forthcoming sections of this chapter.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Understanding triggers</h1>
                
            
            <article>
                
<p class="calibre2">In this section, we will look at how triggers work in Azures Function applications. We will also learn about the different types of triggers and their purpose. Perform the following steps:</p>
<ol class="calibre13">
<li value="1" class="calibre10">In the left menu, click on the (<span>+</span>) symbol beside the <span>Functions</span> option for adding, removing, or editing a trigger:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00289.jpeg" class="calibre188"/></div>
<ol start="2" class="calibre13">
<li value="2" class="calibre10">You will be taken to the function creation console, which looks like this:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00290.jpeg" class="calibre189"/></div>
<ol start="3" class="calibre13">
<li value="3" class="calibre10">Azure does not have a lot of support for Python. So, in this console, let's choose a custom function of our own. Click on <span>Custom function</span> under the <span>Get Started on your own</span> option at the bottom:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00291.jpeg" class="calibre190"/></div>
<ol start="4" class="calibre13">
<li value="4" class="calibre10">In the function creation wizard, enable the <span>Experimental Language</span> option in the right menu. Now, you will be able to see the <span>Python</span> option in the available languages:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00292.jpeg" class="calibre48"/></div>
<ol start="5" class="calibre13">
<li value="5" class="calibre10">There are two triggers that are available for the Python language. One is the <span>HTTP trigger</span> and the other is the <span>Queue trigger<strong class="calibre1">,</strong></span> as seen in the following screenshot:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00293.jpeg" class="calibre191"/></div>
<ol start="6" class="calibre13">
<li value="6" class="calibre10">The <span>HTTP trigger</span> will trigger the function whenever it receives an HTTP request. When you click on it, you will notice options for adding different HTTP-related settings, such as authorization and name:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00294.jpeg" class="calibre192"/></div>
<ol start="7" class="calibre13">
<li value="7" class="calibre10">The next trigger is the <span>Queue trigger</span>. This will trigger the function whenever a message is added to the queue. We have done the same in AWS Lambda in one of our previous chapters too:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00295.jpeg" class="calibre193"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Understanding logging and monitoring in Azures Functions</h1>
                
            
            <article>
                
<p class="calibre2">In this section, we will learn and understand the monitoring and logging mechanisms available to the user in <span class="calibre11">Microsoft Azure Functions</span>. Perform the following steps:</p>
<ol class="calibre13">
<li value="1" class="calibre10">By clicking on the <span>Monitor</span> option under the function, we can access the monitoring suite of that particular Azure Function:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00296.jpeg" class="calibre48"/></div>
<ol start="2" class="calibre13">
<li value="2" class="calibre10">The monitoring suite for the function that we created looks like this:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00297.jpeg" class="calibre194"/></div>
<ol start="3" class="calibre13">
<li value="3" class="calibre10">Now, click on the <span>Open Application Insights</span> option at the top of the menu. This will take you to the detailed monitoring page:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00298.jpeg" class="calibre195"/></div>
<ol start="4" class="calibre13">
<li value="4" class="calibre10">If you scroll down, you will see the function-specific metrics, such as the server response times and request performance. This is very useful as it means we don't need separate dashboards for monitoring all these statistics:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00299.jpeg" class="calibre196"/></div>
<p class="calibre2">Now that we have learned about <span class="calibre11">Microsoft Azure Functions</span> logging and monitoring, let's go through some best practices.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Best practices for writing Azure Functions</h1>
                
            
            <article>
                
<p class="calibre2">We have learned how to create, configure, and deploy <span class="calibre11">Microsoft Azure Functions</span>. We will now learn about the best practices for using them:</p>
<ul class="calibre9">
<li class="calibre10"><span>Microsoft Azure Functions</span> don't have a huge support for Python like AWS Lambda. They have a very limited set of Python-based triggers. So, you need to write custom functions for most of them. Developers need to keep that in mind before taking a decision on using <span>Microsoft Azure Functions</span>. The languages supported by <span>Microsoft Azure Functions</span> are <span>C#</span>, <span>F#</span>, and <span>JavaScript</span>:</li>
</ul>
<div class="cdpaligncenter"><img src="../images/00300.jpeg" class="calibre197"/></div>
<ul class="calibre9">
<li class="calibre10">The experimental languages that are supported by <span>Microsoft Azure Functions</span> are <span>Bash</span>, <span>Batch</span>, <span>PHP</span>, <span>TypeScript</span>, <span>Python</span>, and <span>PowerShell</span>:</li>
</ul>
<div class="cdpaligncenter"><img src="../images/00301.jpeg" class="calibre198"/></div>
<ul class="calibre9">
<li class="calibre10">Make sure you use the security settings properly to secure your functions. You can find all the settings you need in the <span>Platform features</span> options: </li>
</ul>
<div class="cdpaligncenter"><img src="../images/00302.jpeg" class="calibre199"/></div>
<ul class="calibre9">
<li class="calibre10">Finally, use monitoring as much as possible, as it is crucial to log and monitor serverless functions. We have already gone through the monitoring details and the corresponding settings. </li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Summary</h1>
                
            
            <article>
                
<p class="calibre2">In this chapter, we learned about Microsoft Azure Functions and how to build them. We  learned about the various functionalities available, along with the available triggers for the Python runtime. We also learned and experimented with the logging and monitoring capabilities of <span class="calibre11">Microsoft Azure Functions</span> along with understanding and experimenting with the experimental features of Azure such as the additional runtimes apart from the standard set of languages it offers out of the box.</p>


            </article>

            
        </section>
    </body></html>