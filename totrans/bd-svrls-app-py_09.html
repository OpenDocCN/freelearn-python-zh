<html><head></head><body>
        

                            
                    <h1 class="header-title" id="calibre_pb_0">Introduction to Microsoft Azure Functions</h1>
                
            
            
                
<p class="calibre2">So far, we have learned how to build serverless functions and serverless architectures using Python in the AWS environment. We have also learned about the settings and environment of the AWS Lambda tool in great detail. We shall now learn and explore its counterpart from Microsoft Azure Functions.</p>
<p class="calibre2">In this chapter, you will learn how Microsoft Azure Functions work, what the Microsoft Azure Functions console looks like, and how to go about understanding the settings in the console. This chapter is divided into the following sections:</p>
<ul class="calibre9">
<li class="calibre10">Introduction to Microsoft Azure Functions</li>
<li class="calibre10">Creating your first Azure Function</li>
<li class="calibre10">Understanding triggers</li>
<li class="calibre10">Understanding logging and monitoring</li>
<li class="calibre10">Best practices for writing Microsoft Azure Functions</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title" id="calibre_pb_0">Introduction to Microsoft Azure Functions</h1>
                
            
            
                
<p class="calibre2">Microsoft Azure Functions is the Azure counterpart of AWS's Lambda service. In this section, we will learn how to locate and navigate the Microsoft Azure Functions console. So, let's start by performing the following steps:</p>
<ol class="calibre13">
<li value="1" class="calibre10">You can locate the Azure Functions app by navigating to the All services tab on the left menu and typing out the function filter. You will now notice the Microsoft Azure Function's service under the name, Function Apps:</li>
</ol>
<div><img src="img/00280.jpeg" class="calibre48"/></div>
<ol start="2" class="calibre13">
<li value="2" class="calibre10">Once you click on that, you will be re-directed to the Function Apps console. For now, it will be empty if you haven't created any functions. The console will look something like this:</li>
</ol>
<div><img src="img/00281.jpeg" class="calibre48"/></div>
<ol start="3" class="calibre13">
<li value="3" class="calibre10">Now, let's start with creating an Azure Function. To do so, we need to click on the Create a resource option on the left menu, then click on the Compute option from that list, and then select the Function App option from the subsequent list of options:</li>
</ol>
<div><img src="img/00282.jpeg" class="calibre183"/></div>
<p class="calibre2">Microsoft Azure Functions come under the list of <strong class="calibre4">Compute</strong> resources on the dashboard. In the following sections, we will learn how to create Microsoft Azure Functions and also understand the different kinds of triggers and how they work.</p>


            

            
        
    

        

                            
                    <h1 class="header-title" id="calibre_pb_0">Creating your first Azure Function</h1>
                
            
            
                
<p class="calibre2">In this section, we will learn how to create and deploy an Azure Function. We will go through the process step by step in order to understand how each section of an Azure function works:</p>
<ol class="calibre13">
<li value="1" class="calibre10">When you click on the Functions App in the menu, you will be re-directed to the Function App creation wizard, as shown in the following screenshot:</li>
</ol>
<div><img src="img/00283.jpeg" class="calibre184"/></div>
<ol start="2" class="calibre13">
<li value="2" class="calibre10">Add the required information in the wizard accordingly. Choose Linux (Preview) as the OS. Then, click on the blue Create button at the bottom of the wizard:</li>
</ol>
<div><img src="img/00284.jpeg" class="calibre185"/></div>
<ol start="3" class="calibre13">
<li value="3" class="calibre10">Clicking on the Automation options at the bottom will open up a validation screen for automating Function deployments. This is not needed for this chapter. This will simply validate your Azure Function:</li>
</ol>
<div><img src="img/00285.jpeg" class="calibre48"/></div>
<ol start="4" class="calibre13">
<li value="4" class="calibre10">Once you click Create, you will see the deployment in progress under the Notifications menu:</li>
</ol>
<div><img src="img/00286.jpeg" class="calibre186"/></div>
<ol start="5" class="calibre13">
<li value="5" class="calibre10">Once it has been successfully created, it will be reflected in your notifications list with a green-colored notification:</li>
</ol>
<div><img src="img/00287.jpeg" class="calibre187"/></div>
<ol start="6" class="calibre13">
<li value="6" class="calibre10">Clicking on Go to resource will take you to the newly created Azure Function. The function console will look like this:</li>
</ol>
<div><img src="img/00288.jpeg" class="calibre48"/></div>
<p class="calibre2">We have successfully created an Azure Function. We will cover in more detail triggers, monitoring, and security in the forthcoming sections of this chapter.</p>


            

            
        
    

        

                            
                    <h1 class="header-title" id="calibre_pb_0">Understanding triggers</h1>
                
            
            
                
<p class="calibre2">In this section, we will look at how triggers work in Azures Function applications. We will also learn about the different types of triggers and their purpose. Perform the following steps:</p>
<ol class="calibre13">
<li value="1" class="calibre10">In the left menu, click on the (+) symbol beside the Functions option for adding, removing, or editing a trigger:</li>
</ol>
<div><img src="img/00289.jpeg" class="calibre188"/></div>
<ol start="2" class="calibre13">
<li value="2" class="calibre10">You will be taken to the function creation console, which looks like this:</li>
</ol>
<div><img src="img/00290.jpeg" class="calibre189"/></div>
<ol start="3" class="calibre13">
<li value="3" class="calibre10">Azure does not have a lot of support for Python. So, in this console, let's choose a custom function of our own. Click on Custom function under the Get Started on your own option at the bottom:</li>
</ol>
<div><img src="img/00291.jpeg" class="calibre190"/></div>
<ol start="4" class="calibre13">
<li value="4" class="calibre10">In the function creation wizard, enable the Experimental Language option in the right menu. Now, you will be able to see the Python option in the available languages:</li>
</ol>
<div><img src="img/00292.jpeg" class="calibre48"/></div>
<ol start="5" class="calibre13">
<li value="5" class="calibre10">There are two triggers that are available for the Python language. One is the HTTP trigger and the other is the Queue trigger<strong class="calibre1">,</strong> as seen in the following screenshot:</li>
</ol>
<div><img src="img/00293.jpeg" class="calibre191"/></div>
<ol start="6" class="calibre13">
<li value="6" class="calibre10">The HTTP trigger will trigger the function whenever it receives an HTTP request. When you click on it, you will notice options for adding different HTTP-related settings, such as authorization and name:</li>
</ol>
<div><img src="img/00294.jpeg" class="calibre192"/></div>
<ol start="7" class="calibre13">
<li value="7" class="calibre10">The next trigger is the Queue trigger. This will trigger the function whenever a message is added to the queue. We have done the same in AWS Lambda in one of our previous chapters too:</li>
</ol>
<div><img src="img/00295.jpeg" class="calibre193"/></div>


            

            
        
    

        

                            
                    <h1 class="header-title" id="calibre_pb_0">Understanding logging and monitoring in Azures Functions</h1>
                
            
            
                
<p class="calibre2">In this section, we will learn and understand the monitoring and logging mechanisms available to the user in Microsoft Azure Functions. Perform the following steps:</p>
<ol class="calibre13">
<li value="1" class="calibre10">By clicking on the Monitor option under the function, we can access the monitoring suite of that particular Azure Function:</li>
</ol>
<div><img src="img/00296.jpeg" class="calibre48"/></div>
<ol start="2" class="calibre13">
<li value="2" class="calibre10">The monitoring suite for the function that we created looks like this:</li>
</ol>
<div><img src="img/00297.jpeg" class="calibre194"/></div>
<ol start="3" class="calibre13">
<li value="3" class="calibre10">Now, click on the Open Application Insights option at the top of the menu. This will take you to the detailed monitoring page:</li>
</ol>
<div><img src="img/00298.jpeg" class="calibre195"/></div>
<ol start="4" class="calibre13">
<li value="4" class="calibre10">If you scroll down, you will see the function-specific metrics, such as the server response times and request performance. This is very useful as it means we don't need separate dashboards for monitoring all these statistics:</li>
</ol>
<div><img src="img/00299.jpeg" class="calibre196"/></div>
<p class="calibre2">Now that we have learned about Microsoft Azure Functions logging and monitoring, let's go through some best practices.</p>


            

            
        
    

        

                            
                    <h1 class="header-title" id="calibre_pb_0">Best practices for writing Azure Functions</h1>
                
            
            
                
<p class="calibre2">We have learned how to create, configure, and deploy Microsoft Azure Functions. We will now learn about the best practices for using them:</p>
<ul class="calibre9">
<li class="calibre10">Microsoft Azure Functions don't have a huge support for Python like AWS Lambda. They have a very limited set of Python-based triggers. So, you need to write custom functions for most of them. Developers need to keep that in mind before taking a decision on using Microsoft Azure Functions. The languages supported by Microsoft Azure Functions are C#, F#, and JavaScript:</li>
</ul>
<div><img src="img/00300.jpeg" class="calibre197"/></div>
<ul class="calibre9">
<li class="calibre10">The experimental languages that are supported by Microsoft Azure Functions are Bash, Batch, PHP, TypeScript, Python, and PowerShell:</li>
</ul>
<div><img src="img/00301.jpeg" class="calibre198"/></div>
<ul class="calibre9">
<li class="calibre10">Make sure you use the security settings properly to secure your functions. You can find all the settings you need in the Platform features options: </li>
</ul>
<div><img src="img/00302.jpeg" class="calibre199"/></div>
<ul class="calibre9">
<li class="calibre10">Finally, use monitoring as much as possible, as it is crucial to log and monitor serverless functions. We have already gone through the monitoring details and the corresponding settings. </li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title" id="calibre_pb_0">Summary</h1>
                
            
            
                
<p class="calibre2">In this chapter, we learned about Microsoft Azure Functions and how to build them. We  learned about the various functionalities available, along with the available triggers for the Python runtime. We also learned and experimented with the logging and monitoring capabilities of Microsoft Azure Functions along with understanding and experimenting with the experimental features of Azure such as the additional runtimes apart from the standard set of languages it offers out of the box.</p>


            

            
        
    </body></html>