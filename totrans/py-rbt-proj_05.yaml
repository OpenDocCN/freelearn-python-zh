- en: Making a Pet Feeding Robot
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we will take a step further in terms of integrating the sensors
    to make a robot that feeds your pet whenever you have programmed it to. It is
    fairly simple to build; you might need some DIY skills and a few old cardboards
    to prepare this project. Keep scissors and adhesives handy, as they might be needed
    here.
  prefs: []
  type: TYPE_NORMAL
- en: There are times when you are not at home throughout the day and your pet keeps
    waiting for you to feed him. For such a situation, this robot would be of great
    help; it will feed your pet at specific times and also make sure that your pet
    gets the right quantity of food every single time. This can even be helpful on
    a daily basis. As it will never forget to feed your pet, no matter what.
  prefs: []
  type: TYPE_NORMAL
- en: Force measurement
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Force is one of the fundamental units that is applied to objects, either due
    to gravity or some external factors. Force measurements can give us a lot of insight
    about the environment or the object. If you have an electronic weight scale, then
    every time you step on to the weight scale, the weight being told to you happens
    because of a force sensor. This happens because your body has a mass. Due to the
    mass, the gravity pulls the object toward the center of the earth. The force being
    applied by the gravity to any physical object is referred to as the weight of
    the object. Hence, with the force sensor, we are basically sensing how much force
    gravity is applying to a body.
  prefs: []
  type: TYPE_NORMAL
- en: Now when we talk about force measurements, it can be done using multiple ways.
    There are various types of complex load cells that can precisely tell us how many
    milligrams of weight have changed. There are also much simpler sensors that can
    simply give us a rough estimate of how much force is being applied. From this
    data, we can calculate the relative weight of the object. You must be asking why
    are we not using the load cell. The reason is that it can be slightly complicated
    for the present scenario, and it's always good to start with basics.
  prefs: []
  type: TYPE_NORMAL
- en: So, let's see what we have. The load sensor we are talking about is a resistive
    force sensor. The way it works is very simple. It consists of polymer whose resistance
    changes with the change of force applied to it. In general, the more force you
    apply, the lower would be the resistance. Hence, due to change in this resistance,
    we can simply calculate the resultant voltage. This resultant voltage would be
    directly proportional to the weight being put on the force sensor.
  prefs: []
  type: TYPE_NORMAL
- en: Constructing the robot
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Now, to make this robot, we would need a few cardboard cartons. We need to
    make two parts of it:'
  prefs: []
  type: TYPE_NORMAL
- en: A food dispenser
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A collecting bowl with a force sensor
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'First, let''s see how the dispenser has to be made. You need to follow these
    steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Take a medium-sized carton that can carry up to about four and a half pounds
    of pet food.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Then, go ahead and make a small cutout.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: This cutout should be big enough to dispense food but not so big that a lot
    of food comes out of it at once.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now, once that is done, you need to make a lid that covers that through-hole.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: This lid should be slightly bigger than the through-hole itself.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Install the lid over the shaft of the motor.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Fix the motor on to the cardboard, as shown in the following diagram. Make sure
    that the position of the motor should be such that the lid covers the entire through-hole
    on the cardboard.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, install ends-stops. These are simple pieces of cardboard that will
    restrict the movement of the lid in either direction.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The first end-stop should be at a position that it should stop the lid exactly
    where it covers the entire through-hole.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The second should be at a position where the lid is entirely opened, and there
    is no obstruction when the food comes down from the container.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To help you with the construction, refer to the following diagram; you can
    devise other ways to control the opening or closing as well if you want:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/4d8071ec-b20a-4e4f-93df-a7f245c651f0.png)'
  prefs: []
  type: TYPE_IMG
- en: Now, the second part is the bowl. This part is pretty straightforward. You simply
    need to paste the force sensor using a mild adhesive onto the bottom of the bowl,
    where it makes contact with the ground. Once this is done, add another layer of
    adhesive and attach it exactly below the dispenser.
  prefs: []
  type: TYPE_NORMAL
- en: 'Once this constitution is done, go ahead and wire it up, as shown here:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/8a4a6b59-6c83-411c-921b-4dcf1c997f21.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Perfect! Now we are ready to upload our code and make this thing work. So,
    go ahead and upload the following code; then I will tell you what exactly is happening:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Now, once you upload this code, you will start to get the raw reading of the
    force sensors. How? Let''s see:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Here, we are sporting the library for `ADS1x15` using the command `import Adafruit_ADS1x115`;
    this will help us read the value from the ADC:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'You should know what this line does; however if you are not sure, refer to
    [Chapter 2](ef81f30f-708e-4228-a92d-0f343f5928d3.xhtml), *Using GPIOs as Input*:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: In this line, the raw reading that has been received by the ADC will be shown
    to you.
  prefs: []
  type: TYPE_NORMAL
- en: You must be wondering why we are doing this. Till now, you must have been feeding
    your pet based on visual quantity, instead of a specific weight. Hence, what we
    are doing here is printing the value of the force sensor. Once this value is printed,
    then you can correct quantity of the food in the container and measure the reading.
    This reading will act as a threshold. That is, this is the quantity that would
    be dispensed.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, once you have noted this reading, we will change the code slightly. Let''s
    see what it is:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: Now let's see what we have done!
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: Here, we are declaring the pins connected for the motor, buzzer, and **Force
    Sensitive Resistor** (**FSR**). Also, we are assigning the value to a variable
    named `THRESHOLD`; this will determine the amount of food that will be dispensed.
    Here, we have kept an arbitrary value as `1000`. In your code, you must put the
    value that you have calculated in the previous code.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now that most of the code is easily understandable, let''s jump to the part
    where the main show is happening:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'In the first line using the function `datetime.dateime.now().strftime(''%H'')`,we
    are deriving the value of hours at that moment, and using the function `M = datetime.datetime.now().strftime(''%M'')`,
    we are deriving the minutes. Once this is done, then using the condition `if (H
    == 12 or H ==20) && M == 00`, we are checking whether the time is  12 noon or
    20:00 hours in the evening. Once any of these condition are true, then the value
    of `M` is also getting checked. If `M == 00`, then the value of ADC would be checked
    using the function `adc.get_last_result()`. The function stores the value in a
    variable named `value`. Once the value is checked, it is checked by `while value<
    THRESHOLD:`. If the condition is true, then `BUZZER` and `MOTOR1a` are set to
    high. This means that the buzzer will ring and the motor will turn in one direction. As
    we have an end-stop at both directions, the motor will stop whenever it reaches
    that position:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: Once the preceding condition is false, then the rest of code will come into
    action, which basically will turn the motor to the closing side and it will stop
    the buzzer from buzzing. The motor will try to retract to its closed position
    for `5` seconds, as after the condition `time.sleep(5)`, the motor will get a
    command `GPIO.output(MOTOR1b,0)`, which will stop the motor from turning.
  prefs: []
  type: TYPE_NORMAL
- en: Hence, in summary, the robot will dispense the food at certain times and in
    a very specific quantity that you decide.
  prefs: []
  type: TYPE_NORMAL
- en: Making the robot detect pets
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The preceding code is good, and I'm sure it would be dispensing the food at
    set times. However, there can be a problem, as the robot would not be effective
    if the pet does not know whether the food had been fetched. Hence, we need to
    have an alarm that should inform the pets that the food is ready to be eaten.
  prefs: []
  type: TYPE_NORMAL
- en: Even in the previous program, we have used a buzzer that will inform the pet
    when the food is being dispensed, but, that was only for a very short period of
    time. However, what we are talking about here is an alarm system that will keep
    on ringing till the time the pet does not come and eat the food. To do this, connect
    the system as follows and mount the ultrasonic sensor in such a way that it notes
    the distance of the pet while he is eating the food.
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/9a02b251-9ebb-4f6d-9a99-8a6017acc744.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Now, to do that, you will need to upload the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'As you can see, most of the code is almost identical; however, there is an
    added feature that will keep ringing the buzzer till the time the pet does not
    come and eat the food. To do this, we input the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: 'We have defined a function that notes down the distance taken from the ultrasonic
    sensor. You may recollect this code form the previous chapters. So, now, whenever
    this function is called, the distance will be noted down:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: 'As you can see, the buzzer is getting switched on in the while loop just like
    last time; however, after `5` in the previous code after 5 second of wait the
    buzzer was switched off.  However, in this code, we are not doing so. Hence, the
    buzzer will stay active till the time some part of our code does not turn it off. Now,
    to turn on the buzzer, we are calculating the distance at the end of the code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: This part of code is checking whether distance is less than `2` centimeters
    and the weight value of the food container is less than `50`. This means the pet
    approaches the food container and eats at least half of the food. If he does not
    eat the food properly, then the buzzer will keep on buzzing.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: So readers, I think you understood the basics of motor integration with logic
    of time and force sensor to make a robot that does some of your work on a daily
    basis. These kinds of robots are available on the market for hundreds of dollars,
    but see how easily and at such low cost you made one for yourself. Moving forward,
    in the next chapter, we will be building a Bluetooth controlled robotic car.
  prefs: []
  type: TYPE_NORMAL
