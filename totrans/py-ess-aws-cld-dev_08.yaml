- en: '8'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '8'
- en: Database Operations with RDS
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用RDS进行数据库操作
- en: 'In this chapter, we are going to learn the basics of **Amazon Relational Database
    Service** (**Amazon RDS**) and create an RDS instance in order to make a database
    operation. You can use RDS to create the most popular databases in AWS. You can
    create Oracle, MySQL, or MS SQL databases on the cloud with scaling capabilities.
    In general, when you need to create a database, you must manage the infrastructure
    using an on-premises system. Managing the hardware and infrastructure, installing
    the database, and then monitoring could require a lot of effort to set up. AWS
    allows you to select the database type that you want and then create it with a
    simple button click – that is all:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将学习**Amazon关系数据库服务**（**Amazon RDS**）的基础知识，并创建一个RDS实例以进行数据库操作。您可以使用RDS在AWS中创建最流行的数据库。您可以在云上创建具有可伸缩能力的Oracle、MySQL或MS
    SQL数据库。通常，当您需要创建数据库时，您必须使用本地系统管理基础设施。管理硬件和基础设施、安装数据库以及监控可能需要大量努力来设置。AWS允许您选择您想要的数据库类型，然后通过简单的点击按钮创建它——这就是全部：
- en: '![](img/Figure_8.01_B19195.jpg)'
  id: totrans-3
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Figure_8.01_B19195.jpg)'
- en: Figure 8.1 – Click to create
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.1 – 点击创建
- en: 'In this chapter, we will create a database and make some operations using Python.
    The chapter covers the following topics:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将使用Python创建数据库并执行一些操作。本章涵盖了以下主题：
- en: Features of RDS
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RDS的功能
- en: Provisioning RDS
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置RDS
- en: Connecting to the RDS
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 连接到RDS
- en: Creating a table in the database
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在数据库中创建表
- en: Database operations with Python
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Python进行数据库操作
- en: Secrets Manager
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 密钥管理器
- en: Features of RDS
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: RDS的功能
- en: 'RDS comes with different features that facilitate the creation and maintenance
    of the database. Let’s look at the most important features:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: RDS具有不同的功能，便于数据库的创建和维护。让我们看看最重要的功能：
- en: '**Easy to use**: You can easily create and maintain RDS via the AWS console.
    It also allows us to use some API capabilities to make some programmatic operations.
    For example, you can create and scale the database, and monitor its usage.'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**易于使用**：您可以通过AWS控制台轻松创建和维护RDS。它还允许我们使用一些API功能进行一些程序化操作。例如，您可以创建和扩展数据库，并监控其使用情况。'
- en: '**Scalability**: RDS supports scalability; if there is a need to support more
    capacity, you can easily scale the database up. However, if the capacity is less
    than you estimate, you can reduce the capacity with a *scale-down request* to
    reduce the cost. Another option is Amazon Aurora, which allows cloud users to
    implement more performance-intensive applications that support a **Relational
    Database Management** **System** (**RDBMS**).'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可伸缩性**：RDS支持可伸缩性；如果需要支持更多容量，您可以轻松扩展数据库。然而，如果容量低于您的估计，您可以通过*缩容请求*来减少容量以降低成本。另一个选项是Amazon
    Aurora，它允许云用户实现更高性能密集型应用，这些应用支持**关系数据库管理系统**（**RDBMS**）。'
- en: '**Backup**: A database backup is important in case any issue arises with the
    infrastructure. In some cases, the backup is used to create a new database. RDS
    supports both manual and automated backups. You can create a snapshot whenever
    you want, or RDS can take a snapshot at regular intervals. In general, the snapshots
    are stored in AWS S3 buckets.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**备份**：在基础设施出现任何问题时，数据库备份非常重要。在某些情况下，备份用于创建新的数据库。RDS支持手动和自动备份。您可以在任何时候创建快照，或者RDS可以定期进行快照。通常，快照存储在AWS
    S3桶中。'
- en: '**Multi-AZ deployment**: RDS can be available within different locations to
    improve availability. If the infrastructure is down in one location, RDS can serve
    in another location to improve availability. This approach can be used for critical
    applications that use databases in the cloud.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**多可用区部署**：RDS可以在不同的位置提供可用性，以提高可用性。如果某个位置的基础设施出现故障，RDS可以在另一个位置提供服务以提高可用性。这种方法适用于使用云数据库的关键应用。'
- en: '**Monitoring**: Monitoring is very important for critical applications. You
    can track how the database is behaving and see whether there are any issues in
    it. RDS has a supporting monitoring feature. For example, you can track when I/O
    problems are happening in the database, and you can take the right action.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**监控**：对于关键应用，监控非常重要。您可以跟踪数据库的行为，并查看是否存在任何问题。RDS有一个支持监控的功能。例如，您可以跟踪数据库中何时发生I/O问题，并采取适当的行动。'
- en: '**Cost options**: AWS offers different pricing options for using the database.
    One of the popular options is the *pay-as-you-go* option. In this option, you
    don’t need to commit to any long-term contract. You simply pay for how many resources
    you use in a specific period. Hence, you can pay the bill monthly. In other options,
    you make a contract with AWS for a specific duration; however, in this case, you
    have to pay for the contract even if you don’t use the database.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**成本选项**：AWS为使用数据库提供了不同的定价选项。其中一种流行的选项是*按量付费*选项。在此选项中，你不需要承诺任何长期合同。你只需为特定时期内使用的资源付费。因此，你可以按月支付账单。在其他选项中，你与AWS签订了一段时间的合同；然而，在这种情况下，即使你不使用数据库，你也必须为合同付费。'
- en: Provisioning RDS
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置RDS
- en: 'In this section, we are going to create a sample relational database on the
    cloud. To provision the RDS on AWS, carry out the following steps:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将创建一个云上的示例关系型数据库。为了在AWS上配置RDS，执行以下步骤：
- en: 'Open the AWS console and type `rds` in the search box:'
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开AWS控制台，在搜索框中输入`rds`：
- en: '![](img/Figure_8.02_B19195.jpg)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Figure_8.02_B19195.jpg)'
- en: Figure 8.2 – RDS on the console
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.2 – 控制台上的RDS
- en: 'Click **Databases** on the left pane to see the list of databases. To create
    a new database, click **Create database**:'
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧面板中点击**数据库**以查看数据库列表。要创建新数据库，点击**创建数据库**：
- en: '![](img/Figure_8.03_B19195.jpg)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Figure_8.03_B19195.jpg)'
- en: Figure 8.3 – Database list
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.3 – 数据库列表
- en: 'On the new panel, **Create database**, and fill out the information required
    for the new database. RDS supports multiple database types, such as Amazon Aurora,
    MySQL, MariaDB, PostgreSQL, Oracle, and Microsoft SQL Server. In this example,
    we will use **MySQL**:'
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在新面板上，点击**创建数据库**，并填写新数据库所需的信息。RDS支持多种数据库类型，如Amazon Aurora、MySQL、MariaDB、PostgreSQL、Oracle和Microsoft
    SQL Server。在本例中，我们将使用**MySQL**：
- en: '![](img/Figure_8.04_B19195.jpg)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Figure_8.04_B19195.jpg)'
- en: Figure 8.4 – MySQL selection
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.4 – MySQL选择
- en: 'After selecting **MySQL**, scroll down and select the correct version of MySQL.
    In this example, we will use one of the latest versions, **MySQL 8.0.28**:'
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**MySQL**后，向下滚动并选择正确的MySQL版本。在本例中，我们将使用最新版本之一，**MySQL 8.0.28**：
- en: '![](img/Figure_8.05_B19195.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Figure_8.05_B19195.jpg)'
- en: Figure 8.5 – Template selection
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.5 – 模板选择
- en: Templates are useful for working in different environments. When you select
    the **Production** template, it gives you high availability. In this example,
    we will select the **Free tier** template to avoid any costs.
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模板对于在不同的环境中工作很有用。当你选择**生产**模板时，它为你提供高可用性。在本例中，我们将选择**免费层**模板以避免任何费用。
- en: 'Scroll down and fill in the **Settings** details. In the **Settings** panel,
    you need to fill in the database identifier, username, and password:'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 向下滚动并填写**设置**详细信息。在**设置**面板中，你需要填写数据库标识符、用户名和密码：
- en: '![](img/Figure_8.06_B19195.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Figure_8.06_B19195.jpg)'
- en: Figure 8.6 – Settings
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.6 – 设置
- en: '**DB instance identifier** is used to represent the database name in the cloud.
    You can also enter the **Master username** and **Master password** details. These
    credentials are important for security.'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '**DB实例标识符**用于在云中表示数据库名称。你还可以输入**主用户名**和**主密码**详细信息。这些凭证对于安全性很重要。'
- en: Scroll down and fill in the details with regard to storage and instance configuration.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 向下滚动并填写有关存储和实例配置的详细信息。
- en: In **Instance configuration**, in **DB instance class**, you can select the
    processor and memory types. Since we are creating it for education, you can select
    the simple instance type that has basic hardware features. Another hardware selection
    is made for **Storage**. You can keep what AWS has recommended or use the minimum
    values.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**实例配置**中，在**DB实例类别**中，你可以选择处理器和内存类型。由于我们是为教育目的创建它，你可以选择具有基本硬件特征的简单实例类型。对于**存储**，你也可以保留AWS推荐的内容或使用最小值。
- en: In **Storage type**, you can select the disk type. In **Allocated storage**,
    you have to specify the limit of the disk. For this example, we selected **200**
    GiB. If the disk needs to be scaled, you can check the **Enable storage autoscaling**
    checkbox.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在**存储类型**中，你可以选择磁盘类型。在**分配存储**中，你必须指定磁盘的限制。对于本例，我们选择了**200** GiB。如果需要扩展磁盘，你可以勾选**启用存储自动扩展**复选框。
- en: 'When the disk is scaled, the value you enter in the `1000`:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 当磁盘扩展时，你在`1000`中输入的值：
- en: '![](img/Figure_8.07_B19195.jpg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Figure_8.07_B19195.jpg)'
- en: Figure 8.7 – Instance configuration (part 1)
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.7 – 实例配置（第1部分）
- en: Scroll down and fill in the details with regard to **Connectivity**.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 向下滚动并填写有关**连接性**的详细信息。
- en: In the first option, AWS asks whether you want to connect to EC2\. For this
    example, we don’t need to connect to EC2, so we select **Don’t connect to an EC2
    compute resource**. (After setting up the database, we will use Lambda for database
    operations.) RDS needs to be created in the VPC, so in **Virtual private cloud
    (VPC)**, we select **Create new VPC**, and it will automatically create a VPC.
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在第一个选项中，AWS询问你是否想连接到EC2。对于此示例，我们不需要连接到EC2，所以我们选择**不连接到EC2计算资源**。（在设置数据库后，我们将使用Lambda进行数据库操作。）RDS需要在VPC中创建，所以在**虚拟私有云（VPC）**中，我们选择**创建新的VPC**，它将自动创建一个VPC。
- en: Another option is to select a group in **DB Subnet group**. This allows you
    to define which IP group is going to connect to the database. It is also important
    in terms of security. You can limit the IP range with this option.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个选项是选择**DB子网组**。这允许你定义哪个IP组将要连接到数据库。在安全方面也很重要。你可以使用此选项限制IP范围。
- en: '**Public access** allows you to enable access over the internet. For this application,
    we will use public access. However, you need to be careful when you set production
    databases as public.'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '**公共访问**允许你通过互联网启用访问。对于此应用程序，我们将使用公共访问。然而，当你设置生产数据库为公共时，你需要小心。'
- en: 'The final option for **Connectivity** is to select a group in **VPC security
    group (firewall)**. In this case, you can define the same security group that
    connects to RDS:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '**连接性**的最后一个选项是选择**VPC安全组（防火墙）**中的组。在这种情况下，你可以定义与RDS连接的相同安全组：'
- en: '![](img/Figure_8.08_B19195.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.08_B19195.jpg)'
- en: Figure 8.8 – Instance configuration (part 2)
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.8 – 实例配置（第二部分）
- en: Scroll down and fill in the database port information.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 滚动并填写数据库端口信息。
- en: '`3306` for MySQL, but you can also change it:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: MySQL的`3306`，但你也可以更改它：
- en: '![](img/Figure_8.09_B19195.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.09_B19195.jpg)'
- en: Figure 8.9 – Database port
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.9 – 数据库端口
- en: Scroll down and fill in the authentication details.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 滚动并填写认证详细信息。
- en: '**Database authentication** is used to define the approach for password management.
    You can connect with only a password, a combination of a password with IAM authentication,
    or a password with Kerberos authentication. Let’s keep it simple and just use
    **Password authentication**:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**数据库认证**用于定义密码管理的方法。你可以仅使用密码，密码与IAM认证的组合，或密码与Kerberos认证的组合进行连接。让我们保持简单，只使用**密码认证**：'
- en: '![](img/Figure_8.10_B19195.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.10_B19195.jpg)'
- en: Figure 8.10 – Database authentication
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.10 – 数据库认证
- en: Scroll down and fill in the details regarding database creation.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 滚动并填写有关数据库创建的详细信息。
- en: 'As a final step, you can keep other values as is. Click **Create database**
    and proceed with the database creation:'
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 作为最后一步，你可以保持其他值不变。点击**创建数据库**并继续创建数据库：
- en: '![](img/Figure_8.11_B19195.jpg)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.11_B19195.jpg)'
- en: Figure 8.11 – Database creation
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.11 – 数据库创建
- en: 'This forwards you to the **Databases** list, in which you can see the database
    is being created:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 这将带你去**数据库**列表，在那里你可以看到数据库正在创建中：
- en: '![](img/Figure_8.12_B19195.jpg)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.12_B19195.jpg)'
- en: Figure 8.12 – Databases list with a Creating status
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.12 – 正在创建状态的数据库列表
- en: 'After some time, you can see the database is ready to use:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 经过一段时间，你可以看到数据库已准备好使用：
- en: '![](img/Figure_8.13_B19195.jpg)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.13_B19195.jpg)'
- en: Figure 8.13 – Databases list with an Available status
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.13 – 可用状态的数据库列表
- en: We will connect from our computer. To connect to the database, we need to enable
    the connection from outside of AWS.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从我们的电脑连接。为了连接到数据库，我们需要启用AWS外部的连接。
- en: 'Click the **Connectivity & security** tab. You will see **VPC security groups**;
    click the link:'
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**连接性与安全**选项卡。你会看到**VPC安全组**；点击链接：
- en: '![](img/Figure_8.14_B19195.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.14_B19195.jpg)'
- en: Figure 8.14 – Security groups
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.14 – 安全组
- en: 'In the new panel, click **Edit inbound rules**. This will allow us to define
    the inbound connections:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在新面板中，点击**编辑入站规则**。这将允许我们定义入站连接：
- en: '![](img/Figure_8.15_B19195.jpg)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.15_B19195.jpg)'
- en: Figure 8.15 – Inbound rules
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.15 – 入站规则
- en: 'Add the rule for the MySQL/Aurora type and click **Save**, which isn’t depicted
    in the following figure but is situated at the bottom of the page:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为MySQL/Aurora类型添加规则并点击**保存**，这在下面的图中没有显示，但位于页面底部：
- en: '![](img/Figure_8.16_B19195.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.16_B19195.jpg)'
- en: Figure 8.16 – Adding the rule
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.16 – 添加规则
- en: These steps allow us to accept the connection from outside of AWS. Hence, we
    will connect to AWS via a local computer.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 这些步骤允许我们接受AWS外部的连接。因此，我们将通过本地电脑连接到AWS。
- en: Congrats! You have created the database on the cloud. As you can see in the
    steps, creating a database is easy and efficient on the cloud. Let’s connect to
    the database in the next topic.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜！您已在云上创建了数据库。正如您在步骤中所看到的，在云上创建数据库既简单又高效。让我们在下一个主题中连接到数据库。
- en: Connecting to the RDS
  id: totrans-82
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 连接到RDS
- en: 'In this section, we are going to connect to the RDS from one of the database
    viewers. For that purpose, you can install a free database viewer; I will use
    a MySQL viewer. To install the MySQL viewer, carry out the following steps:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将从数据库查看器之一连接到RDS。为此，您可以安装一个免费的数据查看器；我将使用MySQL查看器。要安装MySQL查看器，请执行以下步骤：
- en: 'Open the following link: [https://www.mysql.com/products/Workbench/](https://www.mysql.com/products/workbench/).'
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开以下链接：[https://www.mysql.com/products/Workbench/](https://www.mysql.com/products/workbench/)。
- en: 'Click **Download Now** on the main page:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在主页面上点击**立即下载**：
- en: '![](img/Figure_8.17_B19195.jpg)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![图8.17_B19195](img/Figure_8.17_B19195.jpg)'
- en: Figure 8.17 – MySQL Workbench
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.17 – MySQL Workbench
- en: 'Click **Download** on the next page:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页上点击**下载**：
- en: '![](img/Figure_8.18_B19195.jpg)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![图8.18_B19195](img/Figure_8.18_B19195.jpg)'
- en: Figure 8.18 – MySQL Workbench download
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.18 – MySQL Workbench下载
- en: Double-click and install the downloaded package, and the installation will be
    done.
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击并安装下载的包，安装将完成。
- en: 'Once the installation has been completed, click the **+** symbol to connect
    to the new database:'
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，点击**+**符号以连接到新数据库：
- en: '![](img/Figure_8.19_B19195.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![图8.19_B19195](img/Figure_8.19_B19195.jpg)'
- en: Figure 8.19 – New connection
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.19 – 新连接
- en: 'Open AWS and copy the connection details:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开AWS并复制连接详细信息：
- en: '![](img/Figure_8.20_B19195.jpg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![图8.20_B19195](img/Figure_8.20_B19195.jpg)'
- en: Figure 8.20 – Endpoint name
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.20 – 端点名称
- en: 'Fill out the endpoint and password details in MySQL Workbench and click **Test
    Connection**:'
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在MySQL Workbench中填写端点和密码详细信息，然后点击**测试连接**：
- en: '![](img/Figure_8.21_B19195.jpg)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![图8.21_B19195](img/Figure_8.21_B19195.jpg)'
- en: Figure 8.21 – Test Connection
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.21 – 测试连接
- en: 'After clicking **Test Connection**, you will be able to see the connection:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**测试连接**后，您将能够看到连接：
- en: '![](img/Figure_8.22_B19195.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![图8.22_B19195](img/Figure_8.22_B19195.jpg)'
- en: Figure 8.22 – Connection is successful
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.22 – 连接成功
- en: Good work! We have successfully connected to the RDS database from MySQL Workbench.
    Let’s create a table and insert some records in the next topic.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 干得好！我们已经成功从MySQL Workbench连接到了RDS数据库。让我们在下一个主题中创建一个表并插入一些记录。
- en: Creating a table in the database
  id: totrans-105
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在数据库中创建表
- en: 'We have created a database in the cloud and have connected via MySQL Workbench.
    As a next step, we are going to create a table via MySQL Workbench:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已在云上创建了一个数据库，并通过MySQL Workbench进行了连接。作为下一步，我们将通过MySQL Workbench创建一个表：
- en: Connect to the database via MySQL Workbench.
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过MySQL Workbench连接到数据库。
- en: 'Create a database with the following command and click the *lightning* symbol,
    as shown in the figure that follows:'
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令创建一个数据库，并点击如图所示的*闪电*符号：
- en: '[PRE0]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '![](img/Figure_8.23_B19195.jpg)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![图8.23_B19195](img/Figure_8.23_B19195.jpg)'
- en: Figure 8.23 – Creating a database
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.23 – 创建数据库
- en: 'Execute the `USE address` command in order to switch databases:'
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行`USE address`命令以切换数据库：
- en: '[PRE1]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![](img/Figure_8.24_B19195.jpg)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![图8.24_B19195](img/Figure_8.24_B19195.jpg)'
- en: Figure 8.24 – USE address
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.24 – USE address
- en: 'Create an address table:'
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个地址表：
- en: '[PRE2]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![](img/Figure_8.25_B19195.jpg)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![图8.25_B19195](img/Figure_8.25_B19195.jpg)'
- en: Figure 8.25 – Creating a table
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.25 – 创建表
- en: We have created an address table, and for the next step, we are going to insert
    data into the table.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已创建了一个地址表，接下来我们将向表中插入数据。
- en: 'Execute the following script to insert data into the table:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下脚本以向表中插入数据：
- en: '[PRE3]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '![](img/Figure_8.26_B19195.jpg)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![图8.26_B19195](img/Figure_8.26_B19195.jpg)'
- en: Figure 8.26 – Inserting script
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.26 – 插入脚本
- en: 'The table has two rows, and we are going to read these values from the Lambda
    function:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 该表有两行，我们将从Lambda函数中读取这些值：
- en: '![](img/Figure_8.27_B19195.jpg)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![图8.27_B19195](img/Figure_8.27_B19195.jpg)'
- en: Figure 8.27 – Select script
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.27 – 选择脚本
- en: In this topic, we have created a simple table and inserted records. The insertion
    was made with MySQL Workbench, but you can also use other database tools. As a
    next step, we are going to read the records using Python.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 在本主题中，我们创建了一个简单的表并插入了记录。插入是通过MySQL Workbench完成的，但您也可以使用其他数据库工具。作为下一步，我们将使用Python读取记录。
- en: Database operations with Python
  id: totrans-129
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Python进行数据库操作
- en: 'In this section, we are going to read a table using Python. To execute a Python
    function, we will use PyCharm on a local computer. Carry out the following steps:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将使用Python读取一个表。为了执行Python函数，我们将在本地计算机上使用PyCharm。执行以下步骤：
- en: Open PyCharm or an IDE, whichever you prefer.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开PyCharm或你喜欢的IDE。
- en: 'We are going to install MySQL Connector to PyCharm. MySQL Connector will be
    used for database operations from Python. In PyCharm, select **File** | **New
    Projects Setup** | **Preferences for** **New Projects…**:'
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将安装MySQL Connector到PyCharm。MySQL Connector将用于从Python进行数据库操作。在PyCharm中，选择**文件**
    | **新建项目设置** | **新项目…**的**首选项**：
- en: '![](img/Figure_8.28_B19195.jpg)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.28_B19195.jpg)'
- en: Figure 8.28 – Preferences
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.28 – 首选项
- en: 'In the panel, select **Python Interpreter**:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在面板中，选择**Python解释器**：
- en: '![](img/Figure_8.29_B19195.jpg)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.29_B19195.jpg)'
- en: Figure 8.29 – Python Interpreter
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.29 – Python解释器
- en: 'To add a new package, click the **+** symbol:'
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要添加一个新包，点击**+**符号：
- en: '![](img/Figure_8.30_B19195.jpg)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.30_B19195.jpg)'
- en: Figure 8.30 – Adding a package
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.30 – 添加包
- en: 'In the upcoming panel, type `mysql-conn` to install **mysql-connector**. You
    will be able to see **mysql-connector**. Click **Install Package** to install
    it:'
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在即将出现的面板中，输入`mysql-conn`来安装**mysql-connector**。你将能够看到**mysql-connector**。点击**安装包**来安装它：
- en: '![](img/Figure_8.31_B19195.jpg)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.31_B19195.jpg)'
- en: Figure 8.31 – Installing mysql-connector
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.31 – 安装mysql-connector
- en: 'Once you install it, you will be able to see **mysql-connector** within the
    installed packages:'
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦安装，你将能够在已安装的包中看到**mysql-connector**：
- en: '![](img/Figure_8.32_B19195.jpg)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.32_B19195.jpg)'
- en: Figure 8.32 – Package list
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.32 – 包列表
- en: 'Copy and paste the following code to read data from the database:'
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 复制并粘贴以下代码以从数据库读取数据：
- en: '[PRE4]'
  id: totrans-148
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The preceding code block connects to the RDS database and reads from the address
    table by executing the `select * from address` query. For `rds_host`, `name`,
    and `password`, please fill out your database host and credentials:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 上述代码块通过执行`select * from address`查询连接到RDS数据库并从地址表读取。对于`rds_host`、`name`和`password`，请填写您的数据库主机和凭证：
- en: '![](img/Figure_8.33_B19195.jpg)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.33_B19195.jpg)'
- en: Figure 8.33 – Query from the database
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.33 – 数据库查询
- en: 'When you click **Run**, you can see the results from the database:'
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当你点击**运行**时，你可以看到数据库的结果：
- en: '![](img/Figure_8.34_B19195.jpg)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.34_B19195.jpg)'
- en: Figure 8.34 – Results from the database
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.34 – 数据库结果
- en: Congrats! You are able to read data from the AWS database via Python. You can
    also extend your query by implementing `insert` and `update` queries. In this
    topic, we learned how to make a database operation via Python.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜！你现在能够通过Python读取AWS数据库中的数据。你还可以通过实现`insert`和`update`查询来扩展你的查询。在本主题中，我们学习了如何通过Python进行数据库操作。
- en: Secrets Manager
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 秘密管理器
- en: '**Secrets Manager** is an AWS service that allows you to manage and retrieve
    database credentials, which can be helpful when using a database. Let’s learn
    how to use Secrets Manager:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: '**秘密管理器**是AWS的一项服务，允许你管理和检索数据库凭证，这在使用数据库时可能很有帮助。让我们学习如何使用秘密管理器：'
- en: 'Open **Secrets Manager** via the console:'
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过控制台打开**秘密管理器**：
- en: '![](img/Figure_8.35_B19195.jpg)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.35_B19195.jpg)'
- en: Figure 8.35 – Opening Secrets Manager
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.35 – 打开秘密管理器
- en: 'Click the **Store a new** **secret** button:'
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**存储新** **秘密**按钮：
- en: '![](img/Figure_8.36_B19195.jpg)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.36_B19195.jpg)'
- en: Figure 8.36 – Storing a new secret
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.36 – 存储新秘密
- en: 'Select the secret type that you want to store a secret for, and fill out the
    username and password. In this case, we will select the **database-1** instance.
    After filling out the details, click **Next**:'
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你想要存储秘密的秘密类型，并填写用户名和密码。在这种情况下，我们将选择**database-1**实例。填写详细信息后，点击**下一步**：
- en: '![](img/Figure_8.37_B19195.jpg)'
  id: totrans-165
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.37_B19195.jpg)'
- en: Figure 8.37 – Filling out the details
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.37 – 填写详细信息
- en: 'You need to give a name to the upcoming path in the **Secret** **name** textbox:'
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你需要在**秘密** **名称**文本框中为即将出现的路径命名：
- en: '![](img/Figure_8.38_B19195.jpg)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.38_B19195.jpg)'
- en: Figure 8.38 – Naming the secret
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.38 – 命名秘密
- en: 'On the next screen, you will see the options for using this secret with different
    programming languages. Click **Store** to finalize it:'
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一屏，你将看到使用此秘密与不同编程语言一起使用的选项。点击**存储**以完成：
- en: '![](img/Figure_8.39_B19195.jpg)'
  id: totrans-171
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.39_B19195.jpg)'
- en: Figure 8.39 – Store secret
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.39 – 存储秘密
- en: 'As the final step, you will see the secret on the list:'
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 作为最后一步，你将在列表中看到秘密：
- en: '![](img/Figure_8.40_B19195.jpg)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/Figure_8.40_B19195.jpg)'
- en: Figure 8.40 – List of secrets
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.40 – 秘密列表
- en: Congrats! You have learned how to create and store secrets on the cloud in a
    secure way.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜！你已经学会了如何在云中安全地创建和存储秘密。
- en: Summary
  id: totrans-177
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we learned about AWS RDS, which is used to create a relational
    database on the cloud. You can create your database in an efficient way. The point
    to note is that you have the possibility to create different databases, including
    MySQL, Microsoft SQL, and PostgreSQL. In this chapter, we have created an RDS
    instance on the cloud and run a Python application to make a read operation. In
    the following chapter, we will take a look at creating an API in AWS.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了AWS RDS，这是一种用于在云上创建关系型数据库的工具。你可以以高效的方式创建你的数据库。需要注意的是，你有创建不同数据库的可能性，包括MySQL、Microsoft
    SQL和PostgreSQL。在本章中，我们在云上创建了一个RDS实例，并运行了一个Python应用程序来进行读取操作。在下一章中，我们将探讨如何在AWS中创建API。
