<html><head></head><body>
  <div id="sbo-rt-content"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="ch07"/>Chapter 7. The Presentation Layer</h1></div></div></div><p>Until now, we have developed our application from a server-side point of view. In this chapter, we will start focusing on the client side of the photoblog. Initially, we will introduce HTML templating via the<code class="literal"> Kid</code> Python engine and JavaScript via the Mochikit library. We will present briefly a few important components of the success of the Web such as HTML, XHTML, and CSS. However, these sections do not aim at explaining each of them deeply, as this is out of the scope of this book.<a id="id189" class="indexterm"/>
</p><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec01"/>HTML</h1></div></div></div><p>Although in our previous chapter, we introduced the separation of concerns between layers within our application, we need to keep in mind that our primary target is Internet browsers, so we will focus on HTML rendering.<a id="id190" class="indexterm"/>
</p><p>
<span class="strong"><strong>HTML</strong></span> (<span class="strong"><strong>HyperText Markup Language</strong></span>), used right from the beginning of the Web as defined by Tim Berners-Lee in the early 1990s, is a light version of<span class="strong"><strong> SGML</strong></span> (<span class="strong"><strong>Standard Generalized Markup Language</strong></span>) keeping only simple elements that are useful for the Web. Due to the quick growth of the Web, further development was achieved on HTML to improve it. Eventually HTML 4.0 was officially specified in 1997 by the W3C with an update in 1999 leading to HTML 4.01, which is still as of today the official version to use.</p><p>Example of an HTML 4.01 document:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Hello World!&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;p&gt;Not much to say really.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div><p>The first line of the document states the DOCTYPE declaration, specifying which variant of a format a document follows. DOCTYPEs are specified in DTDs (Document Type Definitions).</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec02"/>XML</h1></div></div></div><p>In 1996, W3C started to work on<span class="strong"><strong> XML</strong></span> (<span class="strong"><strong>Extensible Markup Language</strong></span>), a generic simpler markup language derived from SGML keeping its power while avoiding its complexity. In the context of the Web, the goal of XML is aimed at solving a few limitations of HTML, such as the lack of:<a id="id191" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
<span class="strong"><strong>Extensibility:</strong></span> HTML did not allow new elements to be added to the language.</p></li><li class="listitem"><p>
<span class="strong"><strong>Validation:</strong></span> HTML did not offer a language to validate against the structure nor the semantics of a document.</p></li><li class="listitem"><p>
<span class="strong"><strong>Structure:</strong></span> HTML did not allow complex structures.</p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec03"/>XHTML</h1></div></div></div><p>Due to XML, expressive and flexible work was undertaken by W3C to reformulate HTML 4 through XML, leading to specification of XHTML 1.0 in the year 2000.<a id="id192" class="indexterm"/>
</p><p>XHTML 1.0 has the following features:<a id="id193" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>User agents that solely understand HTML 4 can render a document, making it backward compatible.</p></li><li class="listitem"><p>Publishers can enter the XML world and its richness.</p></li></ul></div><p>Example of an XHTML 1.0 document:</p><div class="informalexample"><pre class="programlisting">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
&lt;html &gt;
&lt;head&gt;
&lt;title&gt;Hello World!&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;p&gt;Not much to say really.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div><p>In this example, we also specify a DOCTYPE declaration informing consumers that our document respects the XHTML 1.0 Strict DTD. Since XHTML is an application of XML:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>We provide the XML declaration on the very first line to give the XML-consuming processor some hints about the document content, such as the fact that it is encoded in UTF-8. Note that it is not compulsory.</p></li><li class="listitem"><p>We also explicitly mark the anonymous namespace of that document as the XHTML namespace.</p></li></ul></div><p>Although the syntax for both the documents is very close, they carry different semantics and would be treated differently by user agents. Therefore, both the documents have distinct MIME formats. An HTML document should be served using the<code class="literal"> text/html</code> MIME content-type, while XHTML documents should be served via<code class="literal"> application/xhtml+xml</code>. However, because XHTML 1.0 aims at being backward compatible with user agents that do not understand its MIME content-type, it is allowed to serve an XHTML 1.0 document respecting specific guidelines as<code class="literal"> text/html</code>. This is, however, not recommended and can lead to unexpected rendering that depends on how user agents treat the structure of the document; it is often referred as<span class="emphasis"><em> tag-soup</em></span>.</p><p>For these reasons, serving XHTML can be cumbersome on the Internet and is the root of extremely heated discussions. Our photoblog application will therefore keep it simple by using HTML.<a id="id194" class="indexterm"/>
</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec04"/>CSS</h1></div></div></div><p>Whether you use HTML or XHTML, both formats only specify the structure and the semantics of your pages; they do not inform user agents how they ought to render those pages. This is achieved through CSS (Cascading Style Sheets), a language to describe rules to apply on elements within a marked up document such as HTML or XHTML. A rule is structured as follows:<a id="id195" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>A<span class="emphasis"><em> selector</em></span> indicates the element on which the rule is to be applied. The selector can be precise to target only one specific element within the context of the document or applicable to all.</p></li><li class="listitem"><p>One or more<span class="emphasis"><em> attributes</em></span> indicate which property of the element is involved.</p></li><li class="listitem"><p>A<span class="emphasis"><em> value</em></span> or a set of values is associated to each attribute.</p></li></ul></div><p>An example applied to the previous HTML example is as follows:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Hello World!&lt;/title&gt;
&lt;style type="text/css"&gt;
body
{
background-color: #666633;
color: #fff;
}
p
{
text-align: center;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;p&gt;Not much to say really.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div><p>In this example:<a id="id196" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
<code class="literal">body</code> is the selector.</p></li><li class="listitem"><p>
<code class="literal">background-color</code> is the attribute, whose value is<code class="literal"> #666633</code>.</p></li></ul></div><p>In the previous example, we have embedded the CSS within the HTML document itself. It is advisable to externalize it into its own document and link it from the HTML page, as follows:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Hello World!&lt;/title&gt;
&lt;link rel="stylesheet" href="style.css"&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;p&gt;Not much to say really.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div><p>The CSS file,<code class="literal"> style.css</code>, is as follows:</p><div class="informalexample"><pre class="programlisting">body
{
background-color: #663;
color: #fff;
}
p
{
text-align: center;
}
</pre></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec05"/>DHTML</h1></div></div></div><p>When Tim Berners-Lee imagined the Web, he did so to enable the exchange of documents between researchers. Those documents were static and were not generated by the web application. In fact, web applications did not exist at that time, only web servers that were accepting requests and returning content. Since then, the Web has grown much more value and web applications are a reality. Nonetheless, for a long time the component achieving the work has been the server itself, the client only being required to display the rendered content. Quickly enough however, it appeared that providing much fancier interfaces would move the Web one step further for it to attract a larger public. The Web should, could, and would be more than presenting books or papers on a screen.<a id="id197" class="indexterm"/>
</p><p>The term DHTML (Dynamic HTML) was coined to group a set of technologies to improve client-side content handling. DHTML encompasses:<a id="id198" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>HTML defining the structure of the document to manipulate</p></li><li class="listitem"><p>CSS to style the web page</p></li><li class="listitem"><p>JavaScript to dynamically modify the Document Object Model (DOM)</p></li></ul></div><p>A DOM is a memory representation of the (X)HTML document structure built by the browser. By using JavaScript functions, it is possible to dynamically modify the DOM tree and thus change its rendering from the end-user perspective.</p><p>However interesting the idea behind DHTML was, it never really took off due to interoperability issues between browser vendors. JavaScript and CSS were not implemented equally across navigators making it really hard for web developers to ensure their page would act as expected in most cases. Nowadays, DHTML is not a common term in the field but its ideas have been kept and improved in newer techniques. This has been also possible thanks to a better interoperability between browsers, better debugging tools, and the arrival of dedicated JavaScript toolkits or frameworks encapsulating browser differences in a common API, as we will see later on.</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec06"/>Templating</h1></div></div></div><p>In the previous sections, we have introduced the basic components that constitute web pages—HTML or XHTML for the structure and CSS for the style. Generating web pages can be as easy as using your favorite text editor and laying it down. However in the context of a dynamic application, where the content is based on a given context and generated on the fly, you need tools to ease such creation. This is achieved through the use of templating engines. A templating engine takes a model of the page as well as the input data and then processes both to render the final page.</p><p>When searching for a templating engine, you should look for one that offers at least some features such as:<a id="id199" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Variable substitution: In your template, a variable can act as place holder for your input.</p></li><li class="listitem"><p>Conditional statements: It is common that a template needs to be rendered with slight differences based on the context of the input data.</p></li><li class="listitem"><p>Looping mechanism: This is obviously mandatory when your template has to render a set of data into a table for example.</p></li><li class="listitem"><p>Extensibility: Templates can often share aspects and diverge in some specific contexts, for example common header and footer templates.</p></li></ul></div><p>The Python world is anything but short in templating engines, and selecting one for your needs will certainly be a matter of taste based on its features as well as its syntax. For the purpose of this book, we will use a templating engine named<code class="literal"> Kid</code> developed by Ryan Tomayko.</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec07"/>Kid—The Templating Engine<a id="id200" class="indexterm"/>
</h1></div></div></div><p>Now, we will have some description of our<code class="literal"> Kid</code> engine.</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec01"/>Overview</h2></div></div></div><p>Let's start our introduction to the<code class="literal"> Kid</code> engine by creating a template of our previous examples:<a id="id201" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"&gt;
&lt;html &gt;
&lt;head&gt;
&lt;title&gt;${title}&lt;/title&gt;
&lt;link rel="stylesheet" href="style.css" /&gt;
&lt;/head&gt;
&lt;body&gt; &lt;p&gt;${message}&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div><p>As you can see, a template looks very similar to the final expected rendered page. When you save this template in a file named<code class="literal"> helloworld.kid</code>, the next step is to process the template via the<code class="literal"> Kid</code> engine as follows:</p><div class="informalexample"><pre class="programlisting">import kid
params = {'title': 'Hello world', 'message': 'Not much to say.'}
t = kid.Template('helloworld.kid', **params)
print t.serialize(output='html')
</pre></div><p>
<code class="literal">Kid</code> provides a<code class="literal"> Template</code> function that requires the name of the template to be processed and the input data to be passed on during the rendering of the template. When a template is being processed for the first time,<code class="literal"> Kid</code> creates a Python module that serves as a cached version of the template for latter use. The<code class="literal"> kid.Template</code> function returns an instance of the<code class="literal"> Template</code> class you then use to render the output content. To do so, the<code class="literal"> Template</code> class provides the following methods:<a id="id202" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
<code class="literal">serialize:</code> This returns the output content as a Python string.</p></li><li class="listitem"><p>
<code class="literal">generate:</code> This returns the output content as a Python iterator.</p></li><li class="listitem"><p>
<code class="literal">write:</code> This dumps the output content into a file object.</p></li></ul></div><p>These three methods take the following parameters:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
<code class="literal">encoding:</code> This informs<code class="literal"> Kid</code> how to encode the output content; it defaults to UTF-8.</p></li><li class="listitem"><p>
<code class="literal">fragment:</code> This is a Boolean value asking<code class="literal"> Kid</code> to include or not the XML prolog or Doctype in the final result.</p></li><li class="listitem"><p>
<code class="literal">output:</code> This specifies which type of serialization should be used by<code class="literal"> Kid</code> to render the content.</p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec02"/>Kid's Attributes</h2></div></div></div><p>The attributes of<code class="literal"> Kid</code> are as follows:<a id="id203" class="indexterm"/>
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec01"/>XML-Based Templating Language</h3></div></div></div><p>
<code class="literal">Kid</code> is an XML-based language, which means:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>A<code class="literal"> Kid</code> template must be a well-formed XML document.</p></li><li class="listitem"><p>
<code class="literal">Kid</code> uses attributes within XML elements to inform the underlying engine what action to follow when reaching an element. To avoid collision with other existing attributes within the XML document,<code class="literal"> Kid</code> comes with its own namespace (<a class="ulink" href="http://purl.org/kid/ns#">http://purl.org/kid/ns#</a>), most of the time associated with the<code class="literal"> py</code> prefix, for example:</p></li></ul></div><div class="informalexample"><pre class="programlisting">&lt;p py:if="..."&gt;...&lt;/p&gt;
</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec02"/>Variable Substitution</h3></div></div></div><p>
<code class="literal">Kid</code> comes with a very simple variable substitution scheme:<code class="literal"> ${variable-name}</code>.</p><p>This can be used either in attributes of elements or as the text content of an element.<code class="literal"> Kid</code> will evaluate the variable each time it comes across it in the template.</p><p>If you need to output a literal string such as<code class="literal"> ${something}</code>, you can escape the variable substitution by doubling the dollar sign such as<code class="literal"> $${something}</code>, which will be rendered as<code class="literal"> ${something}</code>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec03"/>Conditional Statement</h3></div></div></div><p>When you need to toggle between different cases in a template, you need to use the following syntax:</p><div class="informalexample"><pre class="programlisting">&lt;tag py:if="expression"&gt;...&lt;/tag&gt;
</pre></div><p>Where:<a id="id204" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
<code class="literal">tag</code> is the name of the element, for instance<code class="literal"> DIV</code> or<code class="literal"> SPAN</code>.</p></li><li class="listitem"><p>
<code class="literal">expression</code> is a Python expression. If as a Boolean it evaluates to<code class="literal"> True</code> the element will be included in the output content. Otherwise, the element will not be part of it.</p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec04"/>Looping Mechanism</h3></div></div></div><p>To tell<code class="literal"> Kid</code> to loop on an element, you must use the following syntax:</p><div class="informalexample"><pre class="programlisting">&lt;tag py:for="<span class="emphasis"><em>expression</em></span>"&gt;...&lt;/tag&gt;
</pre></div><p>Where:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
<code class="literal">tag</code> is the name of the element.</p></li><li class="listitem"><p>
<code class="literal">expression</code> is a Python expression, for example<code class="literal"> for value in [...]</code>.</p></li></ul></div><p>The looping mechanism is as follows:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"&gt;
&lt;html &gt;
&lt;head&gt;
&lt;title&gt;${title}&lt;/title&gt;
&lt;link rel="stylesheet" href="style.css" /&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;table&gt;
&lt;caption&gt;A few songs&lt;/caption&gt;
&lt;tr&gt;
&lt;th&gt;Artist&lt;/th&gt;
&lt;th&gt;Album&lt;/th&gt;
&lt;th&gt;Title&lt;/th&gt;
&lt;/tr&gt;
&lt;tr py:for="info in infos"&gt;
&lt;td&gt;${info['artist']}&lt;/td&gt;
&lt;td&gt;${info['album']}&lt;/td&gt;
&lt;td&gt;${info['song']}&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;
import kid
# Fake object and method which suggests that we pull the data to be
# rendered from a database in the form of a Python dictionary.
params = discography.retrieve_songs()
t = kid.Template('songs.kid', **params)
print t.serialize(output='html')
<a id="id205" class="indexterm"/>
</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec05"/>Extensibility</h3></div></div></div><p>Extending a template is done using the following syntax:</p><div class="informalexample"><pre class="programlisting">&lt;tag py:extends="templates"&gt;...&lt;/tag&gt;
</pre></div><p>Where:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
<code class="literal">tag</code> is the name of the element. In this specific case however, the element can only be the root element of the current template.</p></li><li class="listitem"><p>
<code class="literal">templates</code> is a comma-separated list of<code class="literal"> Kid</code> template filenames or instances.</p></li></ul></div><p>First, define a<code class="literal"> Kid</code> template named<code class="literal"> common.kid:</code>
</p><div class="informalexample"><pre class="programlisting">&lt;html &gt;
&lt;head py:match="item.tag == 'this-is-ed'"&gt;
&lt;title&gt;${title}&lt;/title&gt;
&lt;link rel="stylesheet" href="style.css" /&gt;
&lt;/head&gt;
&lt;/html&gt;
</pre></div><p>Then, modify the template of the previous example:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"&gt;
&lt;html py:extends="'common.kid'" &gt;
...
...
&lt;body&gt;
&lt;table&gt;
&lt;caption&gt;A few songs&lt;/caption&gt;
&lt;tr&gt;
&lt;th&gt;Artist&lt;/th&gt;
&lt;th&gt;Album&lt;/th&gt;
&lt;th&gt;Title&lt;/th&gt;
&lt;/tr&gt;
&lt;tr py:for="info in infos"&gt;
&lt;td&gt;${info['artist']}&lt;/td&gt;
&lt;td&gt;${info['album']}&lt;/td&gt;
&lt;td&gt;${info['song']}&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;
<a id="id206" class="indexterm"/>
</pre></div><p>When<code class="literal"> Kid</code> processes that template, it will first compile the<code class="literal"> common.kid</code> template. When<code class="literal"> Kid</code> meets the<code class="literal">&lt;this-is-ed /&gt;</code> element, it will understand that it matches the head element of the<code class="literal"> common.kid</code> template, and will replace its content.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec06"/>Other Attributes</h3></div></div></div><p>
<code class="literal">Kid</code> comes with more attributes to the basic ones we have reviewed before:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
<code class="literal">py:content="expression":</code> The descendant of the element using this attribute will be replaced by the output content of the expression.</p></li><li class="listitem"><p>
<code class="literal">py:strip="expression":</code> If the expression evaluates to<code class="literal"> True</code>, the containing element will not be present in the result but its descendants will be there. If the expression evaluates to<code class="literal"> False</code>, the processing goes as normal.</p></li><li class="listitem"><p>
<code class="literal">py:replace="expression":</code> This is a shortcut for<code class="literal"> py:content="expression" py:strip="True"</code>.</p></li><li class="listitem"><p>
<code class="literal">py:attrs="expression":</code> This allows dynamic insertion of new attributes into the element.</p></li><li class="listitem"><p>
<code class="literal">py:def="template_name(args)":</code> This allows creation of a temporary template that can be referenced elsewhere in the main template.</p></li></ul></div><p>You can get more information by navigating to the official<code class="literal"> Kid</code> documentation available at <a class="ulink" href="http://kid-templating.org/">http://kid-templating.org/</a>.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec08"/>Photoblog Design Preparation</h1></div></div></div><p>In the previous sections, we have introduced tools that we will use to create our application interface. In the following sections, we will create the base of that interface.<a id="id207" class="indexterm"/>
</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec03"/>Targetting the User Agent</h2></div></div></div><p>Considering the fact that the photoblog application is centered on the images to be displayed, we will disregard user agents not supporting that feature. The application will also heavily use client-side code through JavaScript. Thus, we will solely focus on the modern browser engines supporting it.<a id="id208" class="indexterm"/>
</p><p>Here is a brief list of our principal targets:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col width="2.32777777777778" style="text-align: left" class="C1"/><col width="2.93263888888889" style="text-align: left" class="C2"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Engine</p>
</th><th style="text-align: left" valign="bottom">
<p>Browsers Targeted</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Gecko</p>
</td><td style="text-align: left" valign="top">
<p>Mozilla Firefox 1.5 and above, Netscape 8</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>MSHTML</p>
</td><td style="text-align: left" valign="top">
<p>Internet Explorer 6 SP1 and above</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>KHTML (and WebKit)</p>
</td><td style="text-align: left" valign="top">
<p>Konqueror, Safari</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Presto</p>
</td><td style="text-align: left" valign="top">
<p>Opera 9 and above</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec04"/>Tools</h2></div></div></div><p>For this application you will need:<a id="id209" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>A text editor; your favorite text editor will do.</p></li><li class="listitem"><p>A browser providing development tools; Mozilla Firefox with the following extensions would be a good choice:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Web developer or Firebug</p></li><li class="listitem"><p>LiveHTTPHeader or Tamper Data. Alternatively, CherryPy provides the<code class="literal"> log_headers</code> tool, which when enabled in the global settings of CherryPy will log the request headers on the server allowing an easy debugging per request.</p></li><li class="listitem"><p>DOM inspector</p></li><li class="listitem"><p>JavaScript debugger</p></li></ul></div></li></ul></div><p>Moreover, although we will be doing most of our development using one specific browser, it is recommended to test it regularly using as many browsers as you can.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec05"/>Global Design Goals</h2></div></div></div><p>As we said, the photoblog application is focused on images. With this in mind, we will draw a globally designed interface, as follows:<a id="id210" class="indexterm"/>
</p><div class="mediaobject"><img src="images/1848_07_01.jpg" alt="Global Design Goals"/></div><p>As you can see, our default design will not have the fanciest look but it provides us with the basic structure for a blog that we are looking for, to explore web design.</p><p>The topmost area will be our header. This is where you will put the catchy name of your blog. Right under it we will have the navigation menu with a few links to move through the base areas of the blog. Then we will have the content area where we will only display by default photography. It means that by default no text will be displayed and it will require user interaction to reveal it. This ensures that the focus stays on the photography. However, the content area will stretch as requested, when it has to display text content. Finally, there is a footer area containing information about the copyrights of the content of this blog.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec06"/>Design Directory Layout</h2></div></div></div><p>The design that we will use for the photoblog application will reside in the following directory structure:<a id="id211" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">default\
commond.kid
index.kid
css\
style.css
images\
js\
</pre></div><p>We will name this design<span class="emphasis"><em> default</em></span>, as it will be the one shipped with the application and used by default during the first access to the application.</p><p>You will note that the<code class="literal"> js</code> directory is empty in spite of intensive use of JavaScript. The reason is that we will define a global static directory of files that might be shared by different templates, which could be the case with all the JavaScript files we will create.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec07"/>CherryPy—Encapsulating the Template Rendering Process</h2></div></div></div><p>CherryPy handlers could well be fine calling<code class="literal"> Kid</code> themselves and returning the serialized output of a template but we will not do it that way. Instead, we will encapsulate<code class="literal"> Kid</code> into a CherryPy tool that our handlers will call. There are two reasons for such a decision:<a id="id212" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>To allow you to switch from<code class="literal"> Kid</code> to a different templating engine. Imagine that you prefer the<code class="literal"> Cheetah</code> templating engine to<code class="literal"> Kid</code>. You could write a template with<code class="literal"> Cheetah</code> and only modify the tool without having to go through the entire application.</p></li><li class="listitem"><p>To ease the maintenance. If<code class="literal"> Kid</code> evolves and changes its syntax, it will be easier to update just the tool rather than the entire application.</p></li></ul></div><p>The tool named<code class="literal"> Design</code> is attached to the default CherryPy toolbox:</p><div class="informalexample"><pre class="programlisting">import os.path
import cherrypy
from cherrypy import Tool, tools
import kid
def transform(path=None, template=None):
params = cherrypy.response.body
if path and template and isinstance(params, dict):
path = os.path.normpath(os.path.join(path, template + '.kid'))
template = kid.Template(file=path, **params)
cherrypy.response.body = template.generate(output='html')
# Attach our Design tool to the CherryPy default toolbox
tools.design = Tool("before_finalize", transform)
</pre></div><p>Then we will use the tool like this:</p><div class="informalexample"><pre class="programlisting">@cherrypy.expose
@cherrypy.tools.design(template='index')
def index(self):
return {...}
</pre></div><p>A page handler using that tool will be required to return a Python dictionary containing values to be passed to the templating engine and expected by the template.<a id="id213" class="indexterm"/>
</p><p>Note also that the tool expects a<code class="literal"> path</code> parameter that will not be passed to the decorator call itself. That<code class="literal"> path</code> represents the absolute base path of the folder containing a design directory and in our example<code class="literal"> path</code> would be the<code class="literal"> default</code> directory that we have already defined. We will set this value once in a configuration file that will be attached to the CherryPy application. We will see more details about this in<a class="link" href="ch10.html" title="Chapter 10. Deployment">Chapter 10</a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note27"/>Note</h3><p>Christian Wyglendowski is the maintainer of a project called Buffet that aims at providing the core feature demonstrated in the mentioned tool. It supports many templating languages and offers an extended API. However, it currently supports solely CherryPy 2 and therefore it is not used in this chapter. CherryPy 3 support is planned and will certainly be available soon.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec09"/>Photoblog Design in Detail</h1></div></div></div><p>Now, we will have a look at the basic structure of our photoblog design.</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec08"/>Basic Structure</h2></div></div></div><p>Our first step is to define the HTML structure of the page:<a id="id214" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd"&gt;
&lt;html py:extends="'common.kid'" &gt;
&lt;head /&gt;
&lt;body&gt;
&lt;!-- main container of our content --&gt;
&lt;div id="page"&gt;
&lt;div id="header"&gt;
&lt;br /&gt;
&lt;/div&gt;
&lt;div id="nav"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="/"&gt;Albums&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="/"&gt;Sign-In&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="/"&gt;About&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;!-- content area where we will display the picture
and other content such as forms --&gt;
&lt;div id="content-pane"&gt;
&lt;div id="photo-pane"&gt;
&lt;img id="photo-data" src="" alt="" /&gt;&lt;br /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="footer"&gt;
&lt;br /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div><p>This template, which we will name<code class="literal"> index.kid</code>, extends the template<code class="literal"> common.kid</code>. It looks as follows:<a id="id215" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;html &gt;
&lt;head py:match="item.tag == 'head'"&gt;
&lt;title&gt;&lt;/title&gt;
&lt;meta http-equiv="content-type" content="text/html;
charset=iso-8859-1"&gt; &lt;/meta&gt;
&lt;/head&gt;
&lt;/html&gt;
</pre></div><p>The<code class="literal"> head</code> element of the<code class="literal"> index.kid</code> template will be replaced by that of the<code class="literal"> Kid</code> template named<code class="literal"> common.kid</code>.</p><p>We will process that template as follows:</p><div class="informalexample"><pre class="programlisting">import cherrypy
import kid
class Root:
@cherrypy.expose
def index(self):
t = kid.Template('index.kid')
return t.generate(output='html')
if __name__ == '__main__':
import os.path
cur_dir = os.getcwd()
conf = {'/style.css': {'tools.staticfile.on': \
True,'tools.staticfile.filename': os.path.join(cur_dir, \
'style.css')}}
cherrypy.quickstart(Root(), config=conf)
</pre></div><p>Now if you navigate to <a class="ulink" href="http://localhost:8080/">http://localhost:8080/</a>, it should look as follows:<a id="id216" class="indexterm"/>
</p><div class="mediaobject"><img src="images/1848_07_02.jpg" alt="Basic Structure"/></div><p>The next step is to add the CSS stylesheet by modifying the<code class="literal"> common.kid</code> template:</p><div class="informalexample"><pre class="programlisting">&lt;html &gt;
&lt;head py:match="item.tag == 'head'"&gt;
&lt;title&gt;&lt;/title&gt;
&lt;meta http-equiv="content-type" content="text/html;
charset=iso-8859-1"&gt;
&lt;/meta&gt;
&lt;link rel="stylesheet" type="text/css" href="/style.css"&gt; &lt;/link&gt;
&lt;/head&gt;
&lt;/html&gt;
</pre></div><p>Then, we define the CSS as follows:</p><div class="informalexample"><pre class="programlisting">body
{
background-color: #ffffff;
font-family: sans-serif;
font-size: small;
line-height: 1.3em;
text-align: center;
}
#page
{
position:relative;
Photoblog designbasic structuretop: 25px;
margin: 0px auto;
text-align:left;
width: 600px;
position: left;
border: 1px #ffffff solid;
}
#header
{
height: 45px;
background-color: #71896D;
border-bottom: 2px #858A6E solid;
}
#nav
{
height: 20px;
background-color: #CED6AB;
border-bottom: 2px #858A6E solid;
font-weight: bold;
text-align: right;
}
#nav ul
{
margin: 0 0 0 20px;
padding: 0;
list-style-type: none;
}
#nav li
{
display: inline;
padding: 0 10px;
}
#nav li a
{
text-decoration: none;
color: #858A6E;
}
#nav li a:hover
{
text-decoration: none;
color: #999966;
}
#content-pane
{
background-color: #ffffff;
Photoblog designbasic structureborder-bottom: 1px #858A6E solid;
text-align: center;
padding: 50px 50px 50px 50px;
}
#photo-pane img
{
border: 1px #858A6E solid;
padding: 3px 3px 3px 3px;
}
#footer
{
height: 20px;
background-color: #CED6AB;
}
</pre></div><p>Now, if you reload the page, you should see something like this:</p><div class="mediaobject"><img src="images/1848_07_03.jpg" alt="Basic Structure"/></div><p>We now have the main page of our photoblog application. The following configurations will make us understand how we will handle the other pages of our application:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>One<code class="literal"> Kid</code> template per page: In this configuration, each time a link is followed or a form is submitted to the application, a new page will be constructed on the server from its template and will be sent back to the browser.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Advantage: It is easy for the web designer who can now edit every page.</p></li><li class="listitem"><p>Drawback: It feels less dynamic from the end-user point of view. It feels as if the navigation is done<span class="emphasis"><em> per page</em></span>.</p></li></ul></div></li><li class="listitem"><p>One or two templates and a bunch of JavaScript files: In this case, only one page would be sent to the browser but it will contain enough information for the browser to generate and insert blocks of content depending on the context and end-user interaction.<a id="id219" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Advantage: It feels much more dynamic for the end-user. Less processing is done by the server, which sends data to be processed by the user agent.</p></li><li class="listitem"><p>Drawback: It is less intuitive for the web designer. It will not work on user agents that do not support JavaScript.</p></li></ul></div></li><li class="listitem"><p>One<code class="literal"> Kid</code> template per block of content to be displayed: This is a mix between the previous two solutions. One page will be sent to the user agent and upon user interaction, the browser will go and fetch extra blocks of content generated on the server from the<code class="literal"> Kid</code> templates that will be inserted directly within the web page. This technique is referred as AHAH (Asynchronous HTML and HTTP), as we will see in the next chapter.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Advantage: It is easy for the web developer who works on HTML code, as in the first solution.</p></li><li class="listitem"><p>Drawback: The rendering is done by the server, so more work on its part. It does not work for browsers that do not support JavaScript.</p></li></ul></div></li></ul></div><p>For the purpose of this application, we will be using mainly the second solution. We will see the application in the upcoming sections.</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec10"/>Mochikit<a id="id220" class="indexterm"/>
</h1></div></div></div><p>Mochikit, created and maintained by Bob Ippolito, is a JavaScript toolkit providing a set of functionalities to simplify the development of web applications from a client-side perspective. Mochikit provides the following components:<a id="id221" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
<span class="strong"><strong>Async:</strong></span> This allows HTTP requests from the browser that are handled either synchronously or asynchronously. We will explain this in more detail in the next chapter.<a id="id222" class="indexterm"/>
</p></li><li class="listitem"><p>
<span class="strong"><strong>Base:</strong></span> This is a set of functions for common programming tasks.</p></li><li class="listitem"><p>
<span class="strong"><strong>DOM:</strong></span> This is an API to ease the manipulation of the DOM tree and perform operations such as insertion or removal of nodes in the tree.</p></li><li class="listitem"><p>
<span class="strong"><strong>DragAndDrop:</strong></span> This is there to enable drag and drop handling in a web application.</p></li><li class="listitem"><p>
<span class="strong"><strong>Color:</strong></span> This provides color abstraction with support for CSS3 colors that are not supported natively by current browsers.</p></li><li class="listitem"><p>
<span class="strong"><strong>DateTime:</strong></span> These are helpers for date and time management.</p></li><li class="listitem"><p>
<span class="strong"><strong>Format:</strong></span> These are helpers for string manipulation.</p></li><li class="listitem"><p>
<span class="strong"><strong>Iter:</strong></span> This brings good support to JavaScript for the iterator pattern over a collection of data.</p></li><li class="listitem"><p>
<span class="strong"><strong>Logging</strong></span> and<span class="strong"><strong> LoggingPane:</strong></span> These are extended logger tools.</p></li><li class="listitem"><p>
<span class="strong"><strong>Signal:</strong></span> This is an API to handle events and their dispatching in a web application.</p></li><li class="listitem"><p>
<span class="strong"><strong>Style:</strong></span> This is a better support for CSS.</p></li><li class="listitem"><p>
<span class="strong"><strong>Sortable:</strong></span> This simplifies the way to sort collections of data.</p></li><li class="listitem"><p>
<span class="strong"><strong>Visual:</strong></span> These are effects to make a web application more attractive.</p></li></ul></div><p>Mochikit is not the only major player in the JavaScript toolkit field; there are others such Dojo, script.aculo.us, Rico, Yahoo UI Library, JQuery, mooh.fx, etc. All of them allow you to write rich client-side web applications and choosing one of these is a matter of taste as much as of functionalities.</p><p>We will use the Mochikit library extensively to provide a more dynamic feeling experience to the end user.<a id="id223" class="indexterm"/>
</p><p>For example, we could add a box displaying information about the film associated to the current photograph displayed. This box would be hidden by default and would show up when the user clicks on a link.</p></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec11"/>Developing the Photoblog Design</h1></div></div></div><p>We have now all the tools to develop a web application interface and we will now present step by step how our photoblog application will use those tools through specific examples, reflecting the application user-interface cases.<a id="id224" class="indexterm"/>
</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec09"/>HTML Code</h2></div></div></div><p>Let's start first by the insertion of an HTML box that will display film information.<a id="id225" class="indexterm"/>
</p><p>The HTML code of the box to be inserted into the<code class="literal"> index.kid</code> template:</p><div class="informalexample"><pre class="programlisting">&lt;div id="film-pane"&gt;
&lt;div id="film-infos-pane"&gt;
&lt;label class="infos-label"&gt;Title:&lt;/label&gt;
&lt;span class="infos-content"&gt;My last holiday&lt;/span&gt;
&lt;label class="infos-label"&gt;Created on:&lt;/label&gt;
&lt;span class="infos-content"&gt;18th August, 2006&lt;/span&gt;
&lt;label class="infos-label"&gt;Updated on:&lt;/label&gt;
&lt;span class="infos-content"&gt;27th August, 2006&lt;/span&gt;
&lt;label class="infos-label"&gt;Description:&lt;/label&gt;
&lt;span class="infos-content"&gt;Some text here...&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
</pre></div><p>As you can see, we define an inner box and an outer box because we may need to add more content sharing the same process as the inner box. Note also that we do provide some random data from the template itself for testing purpose while developing the interface. Indeed, even though the application is built step by step in this book, in real-life projects tasks are usually achieved in parallel, so the areas that are normally interdependent have to work on their side on mock-up objects or data. Those are hard-coded but provide realistic content to work against.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec10"/>Adding a Link<a id="id226" class="indexterm"/>
</h2></div></div></div><p>As this box will be hidden by default, we need to provide the end user with a link to toggle its visibility. To do so, we add the following HTML code to the<code class="literal"> index.kid</code> template:<a id="id227" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;span id="toggle-film-infos"&gt;Film information&lt;/span&gt;
</pre></div><p>Note that, although we call it a link, this is not an HTML<code class="literal">&lt;a /&gt;</code> element but instead a text label that will act as a link from the end-user point of view.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec11"/>Handling the End-User Actions</h2></div></div></div><p>Assuming we have a JavaScript file named<code class="literal"> utils.js</code>, we would define:<a id="id228" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">function toggleFilmVisibility(e)
{
toggle($('film-pane'), 'slide');
}
function initialize(e)
{
hideElement($('film-pane'));
connect('toggle-film-infos', 'onclick', toggleFilmVisibility);
};
connect(window, 'onload', initialize);
</pre></div><p>First, we create a simple JavaScript function that takes only one parameter, a DOM event object containing details of the current event, the caller, and the callee. This function performs solely two actions:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>It hides the DOM element with<code class="literal"> film-pane</code> as<code class="literal"> id</code>. Mochikit provides the<code class="literal"> $(name)</code> as a shortcut to retrieve a DOM node within the DOM tree.</p></li><li class="listitem"><p>It attaches the<code class="literal"> onclick</code> signal of the element with the<code class="literal"> id</code> named<code class="literal"> toggle-film-infos</code> to a function named<code class="literal"> toggleFilmVisibility</code>. That function only toggles the state of visibility of the film box.</p></li></ul></div><p>Then, we connect the<code class="literal"> onload</code> signal of the<code class="literal"> window</code> DOM object with the<code class="literal"> initialize</code> function. This means that<code class="literal"> initialize</code> will be called once the<code class="literal"> window</code> object has been loaded.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec12"/>Amending the Template<a id="id229" class="indexterm"/>
</h2></div></div></div><p>In the<code class="literal"> common.kid</code> template, we simply need to add the following lines to the<code class="literal">&lt;head /&gt;</code> element:<a id="id230" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;script type="application/javascript" src="/MochiKit/MochiKit.js" /&gt;
&lt;script type="application/javascript" src="/MochiKit/New.js" /&gt;
&lt;script type="application/javascript" src="/utils.js" /&gt;
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec13"/>Amending the CSS</h2></div></div></div><p>As we have seen in our example, our different HTML elements have either an<code class="literal"> id</code> attribute and/or a<code class="literal"> class</code> attribute. Both will allow us to apply a specific style to those elements, as we will see now:<a id="id231" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">/* will inform the end-user the text is clickable as link */
span#toggle-film-infos
{
cursor: pointer;
text-align: left;
}
span#toggle-film-infos:hover
{
text-decoration: underline;
}
#film-pane
{
border: 1px #663 solid;
padding: 3px 3px 3px 3px;
background-color: #fff;
}
#film-infos-pane
{
text-align: left;
}
/* the following rules allow the information to be
organized and displayed as in table */
infos-content, .infos-label
{
display: block;
width: 170px;
float: left;
margin-bottom: 2px;
}
infos-label
{
text-align: left;
width: 95px;
padding-right: 20px;
font-weight: bold;
}
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec14"/>Let's be More Flexible...<a id="id232" class="indexterm"/>
</h2></div></div></div><p>In the example we have been through, we started with the fact that the HTML box would be included directly within the main template. Mochikit comes with a handy DOM toolbox, with functions named after common HTML elements such as<code class="literal"> DIV, SPAN, INPUT, FORM</code>, etc. It provides an extremely easy way to generate HTML elements on the fly to insert them into the DOM tree held by the browser.</p><p>A typical use case of our application will be the presentation of existing albums. Since their number is going to change with time, it is required to generate the associated HTML code dynamically, as shown in the following example:</p><div class="informalexample"><pre class="programlisting">var albumInfoBlock = DIV({'class': 'albums-infos-pane', 'id':
'album-' + album['id']},
LABEL({'class': 'infos-label'}, 'Title:'),
SPAN({'class': 'infos-content'}, album['title']),
LABEL({'class': 'infos-label'}, 'Created on:'),
SPAN({'class': 'infos-content'}, album['created']),
LABEL({'class': 'infos-label'}, 'Updated on:'),
SPAN({'class': 'infos-content'}, album['updated']),
LABEL({'class': 'infos-label'}, 'Description:'),
SPAN({'class': 'infos-content'}, album['description']));
</pre></div><p>We first create the main block containing the information and then we associate a unique identifier using the pattern<code class="literal"> album-#id#</code>, where<code class="literal"> #id#</code> is the<code class="literal"> id</code> of the album to be displayed. Doing it that way, we provide a unique identifier for each block within the DOM tree. This is required as we will attach mouse events to the block itself for further processing. Then, we attach a series of inline elements, via the<code class="literal"> SPAN</code> element, and we insert the content of the linked attribute of the album.</p><p>Once the block is created, we connect the mouse events as follows:</p><div class="informalexample"><pre class="programlisting">connect(albumInfoBlock, 'onclick', selectAlbum);
</pre></div><p>When a user clicks on an album block<code class="literal"> selectAlbum</code> will be called and operations will be performed to display the selected album, as we will see in the next chapter.</p><p>Next, we attach the newly created element to an outer album box area and we display it:</p><div class="informalexample"><pre class="programlisting">appendChildNodes(albumsPane, albumInfoBlock);
toggle(albumsPane, 'blind');
</pre></div><p>The creation of the blocks containing the album information will take place in a loop through the albums retrieved from the server, as we will see in the next chapter.</p></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec12"/>Summary</h1></div></div></div><p>Through this chapter, we have introduced some of the technologies and tools that are available today to create web application interfaces with dynamic and attractive design.</p><p>These range from the good old HTML variants that are still widely used to structure the content, to the CSS, a web designer's best friend to style the interface, and the resourceful Mochikit that lets us step into the world of rich web application.</p><p>There is still a missing link to put everything together between the server and the client. This link is commonly referred today as Ajax. This is what we will explain in the next chapter.</p></div></div></div>
</body></html>