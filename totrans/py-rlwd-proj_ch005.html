<html xml:lang="en-US" xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
<head>
<meta charset="utf-8"/>
<meta content="pandoc" name="generator"/>
<title>ch005.xhtml</title>
<link href="../styles/stylesheet1.css" rel="stylesheet" type="text/css"/>
<!-- kobo-style -->
<style id="koboSpanStyle" type="text/css" xmlns="http://www.w3.org/1999/xhtml">.koboSpan { -webkit-text-combine: inherit; }</style>
</head>
<body epub:type="bodymatter">
<section class="level1" data-number="5" id="chapter-1-project-zero-a-template-for-other-projects">
<h1 data-number="5"><span class="titlemark"><span class="koboSpan" id="kobo.1.1" xmlns="http://www.w3.org/1999/xhtml">Chapter 1</span></span><br/>
<span id="x1-170001"/><span class="koboSpan" id="kobo.2.1" xmlns="http://www.w3.org/1999/xhtml">Project Zero: A Template for Other Projects</span></h1>
<p><span class="koboSpan" id="kobo.3.1" xmlns="http://www.w3.org/1999/xhtml">This is a book of projects. </span><span class="koboSpan" id="kobo.3.2" xmlns="http://www.w3.org/1999/xhtml">To make each project a good portfolio piece, we’ll treat each project as an enterprise software product. </span><span class="koboSpan" id="kobo.3.3" xmlns="http://www.w3.org/1999/xhtml">You can build something that could be posted to a company’s (or organization’s) internal repository.</span></p>
<p><span class="koboSpan" id="kobo.4.1" xmlns="http://www.w3.org/1999/xhtml">For this book, we’ll define some standards that will apply to all of these projects. </span><span class="koboSpan" id="kobo.4.2" xmlns="http://www.w3.org/1999/xhtml">The standards will identify deliverables as a combination of files, modules, applications, notebooks, and documentation files. </span><span class="koboSpan" id="kobo.4.3" xmlns="http://www.w3.org/1999/xhtml">While each enterprise is unique, the standards described here are consistent with my experience as a consultant with a variety of enterprises.</span></p>
<p><span class="koboSpan" id="kobo.5.1" xmlns="http://www.w3.org/1999/xhtml">We want to draw an informal boundary to avoid some of the steps required to post to the PyPI website. </span><span class="koboSpan" id="kobo.5.2" xmlns="http://www.w3.org/1999/xhtml">Our emphasis is on a product with test cases and enough documentation to explain what it does. </span><span class="koboSpan" id="kobo.5.3" xmlns="http://www.w3.org/1999/xhtml">We don’t want to go all the way to creating a project in PyPI. </span><span class="koboSpan" id="kobo.5.4" xmlns="http://www.w3.org/1999/xhtml">This allows us to avoid the complications of a build system and the associated </span><code><span class="koboSpan" id="kobo.6.1" xmlns="http://www.w3.org/1999/xhtml">pyproject.toml</span></code><span class="koboSpan" id="kobo.7.1" xmlns="http://www.w3.org/1999/xhtml"> file.</span></p>
<p><span class="koboSpan" id="kobo.8.1" xmlns="http://www.w3.org/1999/xhtml">These projects are not intended to produce generic, reusable modules. </span><span class="koboSpan" id="kobo.8.2" xmlns="http://www.w3.org/1999/xhtml">They’re applications specific to a problem domain and a dataset. </span><span class="koboSpan" id="kobo.8.3" xmlns="http://www.w3.org/1999/xhtml">While these are specific solutions, we don’t want to discourage anyone who feels motivated to generalize a project into something generic and reusable.</span></p>
<p><span class="koboSpan" id="kobo.9.1" xmlns="http://www.w3.org/1999/xhtml">This chapter will show the general outline of each project. </span><span class="koboSpan" id="kobo.9.2" xmlns="http://www.w3.org/1999/xhtml">Then we’ll look at the set of deliverables. </span><span class="koboSpan" id="kobo.9.3" xmlns="http://www.w3.org/1999/xhtml">This chapter ends with project zero – an initial project that will serve as a template for others. </span><span class="koboSpan" id="kobo.9.4" xmlns="http://www.w3.org/1999/xhtml">We’ll cover the following topics:</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.10.1" xmlns="http://www.w3.org/1999/xhtml">An overview of the software quality principles that we’ll try to emphasize.</span></p></li>
<li><p><span class="koboSpan" id="kobo.11.1" xmlns="http://www.w3.org/1999/xhtml">A suggested approach to completing the project as a sequence of project sprints.</span></p></li>
<li><p><span class="koboSpan" id="kobo.12.1" xmlns="http://www.w3.org/1999/xhtml">A general overview of the list of deliverables for each project.</span></p></li>
<li><p><span class="koboSpan" id="kobo.13.1" xmlns="http://www.w3.org/1999/xhtml">Some suggested tools. </span><span class="koboSpan" id="kobo.13.2" xmlns="http://www.w3.org/1999/xhtml">These aren’t required, and some readers may have other choices.</span></p></li>
<li><p><span class="koboSpan" id="kobo.14.1" xmlns="http://www.w3.org/1999/xhtml">A sample project to act as a template for subsequent projects.</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.15.1" xmlns="http://www.w3.org/1999/xhtml">We’ll start with an overview of some characteristics of high-quality software. </span><span class="koboSpan" id="kobo.15.2" xmlns="http://www.w3.org/1999/xhtml">The idea is to establish some standards for the deliverables of each project. </span><span id="x1-17001r1"/></p>
<section class="level2" data-number="5.1" id="on-quality">
<h2 data-number="5.1"><span class="titlemark"><span class="koboSpan" id="kobo.16.1" xmlns="http://www.w3.org/1999/xhtml">1.1 </span></span> <span id="x1-180001"/><span class="koboSpan" id="kobo.17.1" xmlns="http://www.w3.org/1999/xhtml">On quality</span></h2>
<p><span class="koboSpan" id="kobo.18.1" xmlns="http://www.w3.org/1999/xhtml">It helps to have a clear definition of expectations. </span><span class="koboSpan" id="kobo.18.2" xmlns="http://www.w3.org/1999/xhtml">For these expectations, we’ll rely on the ISO 25010 standard to define quality goals for each project. </span><span class="koboSpan" id="kobo.18.3" xmlns="http://www.w3.org/1999/xhtml">For more details, see </span><a class="url" href="https://iso25000.com/index.php/en/iso-25000-standards/iso-25010"><span class="koboSpan" id="kobo.19.1" xmlns="http://www.w3.org/1999/xhtml">https://iso25000.com/index.php/en/iso-25000-standards/iso-25010</span></a><span class="koboSpan" id="kobo.20.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
<p><span class="koboSpan" id="kobo.21.1" xmlns="http://www.w3.org/1999/xhtml">The ISO/IEC 25010:2011 standard describes </span><strong><span class="koboSpan" id="kobo.22.1" xmlns="http://www.w3.org/1999/xhtml">Systems and software</span></strong> <strong><span class="koboSpan" id="kobo.23.1" xmlns="http://www.w3.org/1999/xhtml">Quality Requirements and Evaluation </span></strong><span class="koboSpan" id="kobo.24.1" xmlns="http://www.w3.org/1999/xhtml">(</span><strong><span class="koboSpan" id="kobo.25.1" xmlns="http://www.w3.org/1999/xhtml">SQuaRE</span></strong><span class="koboSpan" id="kobo.26.1" xmlns="http://www.w3.org/1999/xhtml">). </span><span class="koboSpan" id="kobo.26.2" xmlns="http://www.w3.org/1999/xhtml">This standard provides eight characteristics of software. </span><span class="koboSpan" id="kobo.26.3" xmlns="http://www.w3.org/1999/xhtml">These characteristics are as follows:</span></p>
<ul>
<li><p><strong><span class="koboSpan" id="kobo.27.1" xmlns="http://www.w3.org/1999/xhtml">Functional suitability</span></strong><span class="koboSpan" id="kobo.28.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.28.2" xmlns="http://www.w3.org/1999/xhtml">Does it do what we need? </span><span class="koboSpan" id="kobo.28.3" xmlns="http://www.w3.org/1999/xhtml">It is complete, correct, and appropriate for the user’s expressed (and implied) needs? </span><span class="koboSpan" id="kobo.28.4" xmlns="http://www.w3.org/1999/xhtml">This is the focus of each project’s description.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.29.1" xmlns="http://www.w3.org/1999/xhtml">Performance efficiency</span></strong><span class="koboSpan" id="kobo.30.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.30.2" xmlns="http://www.w3.org/1999/xhtml">Does it work quickly? </span><span class="koboSpan" id="kobo.30.3" xmlns="http://www.w3.org/1999/xhtml">Does it use the minimum resources? </span><span class="koboSpan" id="kobo.30.4" xmlns="http://www.w3.org/1999/xhtml">Does it have </span><span id="dx1-18001"/><span class="koboSpan" id="kobo.31.1" xmlns="http://www.w3.org/1999/xhtml">enough capacity to meet the user’s needs? </span><span class="koboSpan" id="kobo.31.2" xmlns="http://www.w3.org/1999/xhtml">We won’t address this deeply in this book. </span><span class="koboSpan" id="kobo.31.3" xmlns="http://www.w3.org/1999/xhtml">We’ll talk </span><span id="dx1-18002"/><span class="koboSpan" id="kobo.32.1" xmlns="http://www.w3.org/1999/xhtml">about writing performance tests and ways to address performance concerns.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.33.1" xmlns="http://www.w3.org/1999/xhtml">Compatibility</span></strong><span class="koboSpan" id="kobo.34.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.34.2" xmlns="http://www.w3.org/1999/xhtml">Does it co-exist </span><span id="dx1-18003"/><span class="koboSpan" id="kobo.35.1" xmlns="http://www.w3.org/1999/xhtml">with other software? </span><span class="koboSpan" id="kobo.35.2" xmlns="http://www.w3.org/1999/xhtml">Does it properly interoperate with other applications? </span><span class="koboSpan" id="kobo.35.3" xmlns="http://www.w3.org/1999/xhtml">To an extent, Python can </span><span id="dx1-18004"/><span class="koboSpan" id="kobo.36.1" xmlns="http://www.w3.org/1999/xhtml">help assure an application interoperates politely with other applications. </span><span class="koboSpan" id="kobo.36.2" xmlns="http://www.w3.org/1999/xhtml">We’ll emphasize this compatibility issue in our choices of file formats and communication protocols.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.37.1" xmlns="http://www.w3.org/1999/xhtml">Usability</span></strong><span class="koboSpan" id="kobo.38.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.38.2" xmlns="http://www.w3.org/1999/xhtml">There are a </span><span id="dx1-18005"/><span class="koboSpan" id="kobo.39.1" xmlns="http://www.w3.org/1999/xhtml">number of sub-characteristics </span><span id="dx1-18006"/><span class="koboSpan" id="kobo.40.1" xmlns="http://www.w3.org/1999/xhtml">that help us understand usability. </span><span class="koboSpan" id="kobo.40.2" xmlns="http://www.w3.org/1999/xhtml">Many of the projects in this </span><span id="dx1-18007"/><span class="koboSpan" id="kobo.41.1" xmlns="http://www.w3.org/1999/xhtml">book focus on the </span><strong><span class="koboSpan" id="kobo.42.1" xmlns="http://www.w3.org/1999/xhtml">command-line interface </span></strong><span class="koboSpan" id="kobo.43.1" xmlns="http://www.w3.org/1999/xhtml">(</span><strong><span class="koboSpan" id="kobo.44.1" xmlns="http://www.w3.org/1999/xhtml">CLI</span></strong><span class="koboSpan" id="kobo.45.1" xmlns="http://www.w3.org/1999/xhtml">) to assure a bare minimum of learnability, operability, error protection, and accessibility. </span><span class="koboSpan" id="kobo.45.2" xmlns="http://www.w3.org/1999/xhtml">A few projects will include a web services API, and others will make use of the GUI interface of JupyterLab to provide interactive processing.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.46.1" xmlns="http://www.w3.org/1999/xhtml">Reliability</span></strong><span class="koboSpan" id="kobo.47.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.47.2" xmlns="http://www.w3.org/1999/xhtml">Is it available </span><span id="dx1-18008"/><span class="koboSpan" id="kobo.48.1" xmlns="http://www.w3.org/1999/xhtml">when the users want it? </span><span class="koboSpan" id="kobo.48.2" xmlns="http://www.w3.org/1999/xhtml">Can we detect and repair problems? </span><span class="koboSpan" id="kobo.48.3" xmlns="http://www.w3.org/1999/xhtml">We need to make sure we have all of the </span><span id="dx1-18009"/><span class="koboSpan" id="kobo.49.1" xmlns="http://www.w3.org/1999/xhtml">parts and pieces so we can use the software. </span><span class="koboSpan" id="kobo.49.2" xmlns="http://www.w3.org/1999/xhtml">We also need to make sure we have a complete set of tests to confirm that it will work.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.50.1" xmlns="http://www.w3.org/1999/xhtml">Security</span></strong><span class="koboSpan" id="kobo.51.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.51.2" xmlns="http://www.w3.org/1999/xhtml">As with usability, this is a </span><span id="dx1-18010"/><span class="koboSpan" id="kobo.52.1" xmlns="http://www.w3.org/1999/xhtml">deep topic. </span><span class="koboSpan" id="kobo.52.2" xmlns="http://www.w3.org/1999/xhtml">We’ll address </span><span id="dx1-18011"/><span class="koboSpan" id="kobo.53.1" xmlns="http://www.w3.org/1999/xhtml">some aspects of security in one of the projects. </span><span class="koboSpan" id="kobo.53.2" xmlns="http://www.w3.org/1999/xhtml">The remaining projects will use a CLI permitting us to rely on the operating system’s security model.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.54.1" xmlns="http://www.w3.org/1999/xhtml">Maintainability</span></strong><span class="koboSpan" id="kobo.55.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.55.2" xmlns="http://www.w3.org/1999/xhtml">Can we diagnose problems? </span><span class="koboSpan" id="kobo.55.3" xmlns="http://www.w3.org/1999/xhtml">Can we extend it? </span><span class="koboSpan" id="kobo.55.4" xmlns="http://www.w3.org/1999/xhtml">We’ll look at documentation and test </span><span id="dx1-18012"/><span class="koboSpan" id="kobo.56.1" xmlns="http://www.w3.org/1999/xhtml">cases as essential for maintainability. </span><span class="koboSpan" id="kobo.56.2" xmlns="http://www.w3.org/1999/xhtml">We’ll also leverage a few additional project files to make sure our project </span><span id="dx1-18013"/><span class="koboSpan" id="kobo.57.1" xmlns="http://www.w3.org/1999/xhtml">can be downloaded and extended by others.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.58.1" xmlns="http://www.w3.org/1999/xhtml">Portability</span></strong><span class="koboSpan" id="kobo.59.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.59.2" xmlns="http://www.w3.org/1999/xhtml">Can we move to a new Python version? </span><span class="koboSpan" id="kobo.59.3" xmlns="http://www.w3.org/1999/xhtml">New hardware? </span><span class="koboSpan" id="kobo.59.4" xmlns="http://www.w3.org/1999/xhtml">This is very important. </span><span class="koboSpan" id="kobo.59.5" xmlns="http://www.w3.org/1999/xhtml">The Python ecosystem is </span><span id="dx1-18014"/><span class="koboSpan" id="kobo.60.1" xmlns="http://www.w3.org/1999/xhtml">rapidly evolving. </span><span class="koboSpan" id="kobo.60.2" xmlns="http://www.w3.org/1999/xhtml">Since all of the libraries and packages are in a constant state of change, we need to be able to define precisely what packages our project depends on, and confirm that it works with a new candidate set of packages.</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.61.1" xmlns="http://www.w3.org/1999/xhtml">Two of these characteristics (Compatibility and Portability) are features of Python. </span><span class="koboSpan" id="kobo.61.2" xmlns="http://www.w3.org/1999/xhtml">A wise choice of interfaces assures that these characteristics are met. </span><span class="koboSpan" id="kobo.61.3" xmlns="http://www.w3.org/1999/xhtml">These are sometimes described as architectural decisions since they influence how multiple applications work together.</span></p>
<p><span class="koboSpan" id="kobo.62.1" xmlns="http://www.w3.org/1999/xhtml">For Security, we will rely on the operating system. </span><span class="koboSpan" id="kobo.62.2" xmlns="http://www.w3.org/1999/xhtml">Similarly, for Usability, we’ll limit ourselves to CLI applications, relying on long-standing design principles.</span></p>
<p><span class="koboSpan" id="kobo.63.1" xmlns="http://www.w3.org/1999/xhtml">The idea of Performance is something we won’t emphasize here. </span><span class="koboSpan" id="kobo.63.2" xmlns="http://www.w3.org/1999/xhtml">We will point out places where large data sets will </span><span id="dx1-18015"/><span class="koboSpan" id="kobo.64.1" xmlns="http://www.w3.org/1999/xhtml">require some careful design. </span><span class="koboSpan" id="kobo.64.2" xmlns="http://www.w3.org/1999/xhtml">The choice of data structure and algorithm is a separate subject area. </span><span class="koboSpan" id="kobo.64.3" xmlns="http://www.w3.org/1999/xhtml">Our objective in this book is to expose you to projects that can provide the stimulus for a deeper study of performance issues.</span></p>
<p><span class="koboSpan" id="kobo.65.1" xmlns="http://www.w3.org/1999/xhtml">Three of these quality characteristics — Functional suitability, Reliability, and Maintainability — are the real focus of these projects. </span><span class="koboSpan" id="kobo.65.2" xmlns="http://www.w3.org/1999/xhtml">These seem to be essential elements of good software design. </span><span class="koboSpan" id="kobo.65.3" xmlns="http://www.w3.org/1999/xhtml">These are the places where you can demonstrate your Python programming skills.</span></p>
<p><span class="koboSpan" id="kobo.66.1" xmlns="http://www.w3.org/1999/xhtml">Another </span><span id="dx1-18016"/><span class="koboSpan" id="kobo.67.1" xmlns="http://www.w3.org/1999/xhtml">view is available from </span><strong><span class="koboSpan" id="kobo.68.1" xmlns="http://www.w3.org/1999/xhtml">The Twelve-Factor App </span></strong><span class="koboSpan" id="kobo.69.1" xmlns="http://www.w3.org/1999/xhtml">( </span><a class="url" href="https://12factor.net"><span class="koboSpan" id="kobo.70.1" xmlns="http://www.w3.org/1999/xhtml">https://12factor.net</span></a><span class="koboSpan" id="kobo.71.1" xmlns="http://www.w3.org/1999/xhtml">). </span><span class="koboSpan" id="kobo.71.2" xmlns="http://www.w3.org/1999/xhtml">This is narrowly focused on web applications. </span><span class="koboSpan" id="kobo.71.3" xmlns="http://www.w3.org/1999/xhtml">The concepts provide deeper insights and more concrete technical guidance into the </span><span id="dx1-18017"/><span class="koboSpan" id="kobo.72.1" xmlns="http://www.w3.org/1999/xhtml">quality characteristics shown above:</span></p>
<ol>
<li><div id="x1-18019x1">
<p><span class="koboSpan" id="kobo.73.1" xmlns="http://www.w3.org/1999/xhtml">Codebase. </span><span class="koboSpan" id="kobo.73.2" xmlns="http://www.w3.org/1999/xhtml">”One codebase tracked in revision control, many deploys.” </span><span class="koboSpan" id="kobo.73.3" xmlns="http://www.w3.org/1999/xhtml">We’ll use </span><strong><span class="koboSpan" id="kobo.74.1" xmlns="http://www.w3.org/1999/xhtml">Git </span></strong><span class="koboSpan" id="kobo.75.1" xmlns="http://www.w3.org/1999/xhtml">and </span><strong><span class="koboSpan" id="kobo.76.1" xmlns="http://www.w3.org/1999/xhtml">GitHub </span></strong><span class="koboSpan" id="kobo.77.1" xmlns="http://www.w3.org/1999/xhtml">or perhaps one of the other version managers supported by </span><strong><span class="koboSpan" id="kobo.78.1" xmlns="http://www.w3.org/1999/xhtml">sourceforge</span></strong><span class="koboSpan" id="kobo.79.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
</div></li>
<li><div id="x1-18021x2">
<p><span class="koboSpan" id="kobo.80.1" xmlns="http://www.w3.org/1999/xhtml">Dependencies. </span><span class="koboSpan" id="kobo.80.2" xmlns="http://www.w3.org/1999/xhtml">”Explicitly declare and isolate dependencies.” </span><span class="koboSpan" id="kobo.80.3" xmlns="http://www.w3.org/1999/xhtml">Traditionally, a Python </span><code><span class="koboSpan" id="kobo.81.1" xmlns="http://www.w3.org/1999/xhtml">requirements.txt</span></code><span class="koboSpan" id="kobo.82.1" xmlns="http://www.w3.org/1999/xhtml"> file was used for this. </span><span class="koboSpan" id="kobo.82.2" xmlns="http://www.w3.org/1999/xhtml">In this book, we’ll move forward to using a </span><code><span class="koboSpan" id="kobo.83.1" xmlns="http://www.w3.org/1999/xhtml">pyproject.toml</span></code><span class="koboSpan" id="kobo.84.1" xmlns="http://www.w3.org/1999/xhtml"> file.</span></p>
</div></li>
<li><div id="x1-18023x3">
<p><span class="koboSpan" id="kobo.85.1" xmlns="http://www.w3.org/1999/xhtml">Config. </span><span class="koboSpan" id="kobo.85.2" xmlns="http://www.w3.org/1999/xhtml">”Store config in the environment.” </span><span class="koboSpan" id="kobo.85.3" xmlns="http://www.w3.org/1999/xhtml">We won’t emphasize this, but Python offers numerous ways to handle configuration files.</span></p>
</div></li>
<li><div id="x1-18025x4">
<p><span class="koboSpan" id="kobo.86.1" xmlns="http://www.w3.org/1999/xhtml">Backing services. </span><span class="koboSpan" id="kobo.86.2" xmlns="http://www.w3.org/1999/xhtml">”Treat backing services as attached resources.” </span><span class="koboSpan" id="kobo.86.3" xmlns="http://www.w3.org/1999/xhtml">We touch on this in a few places. </span><span class="koboSpan" id="kobo.86.4" xmlns="http://www.w3.org/1999/xhtml">How storage, messages, mail, or caching work isn’t something we’ll examine deeply.</span></p>
</div></li>
<li><div id="x1-18027x5">
<p><span class="koboSpan" id="kobo.87.1" xmlns="http://www.w3.org/1999/xhtml">Build, release, run. </span><span class="koboSpan" id="kobo.87.2" xmlns="http://www.w3.org/1999/xhtml">”Strictly separate build and run stages.” </span><span class="koboSpan" id="kobo.87.3" xmlns="http://www.w3.org/1999/xhtml">For command-line applications, this means we should deploy the application into a ”production” environment to use the high-value data and produce the results that the enterprise needs. </span><span class="koboSpan" id="kobo.87.4" xmlns="http://www.w3.org/1999/xhtml">We want to avoid running things in our desktop development environment.</span></p>
</div></li>
<li><div id="x1-18029x6">
<p><span class="koboSpan" id="kobo.88.1" xmlns="http://www.w3.org/1999/xhtml">Processes. </span><span class="koboSpan" id="kobo.88.2" xmlns="http://www.w3.org/1999/xhtml">”Execute the app as one or more stateless processes.” </span><span class="koboSpan" id="kobo.88.3" xmlns="http://www.w3.org/1999/xhtml">CLI applications tend to be structured this way without making any additional effort.</span></p>
</div></li>
<li><div id="x1-18031x7">
<p><span class="koboSpan" id="kobo.89.1" xmlns="http://www.w3.org/1999/xhtml">Port binding. </span><span class="koboSpan" id="kobo.89.2" xmlns="http://www.w3.org/1999/xhtml">”Export services via port binding.” </span><span class="koboSpan" id="kobo.89.3" xmlns="http://www.w3.org/1999/xhtml">We won’t emphasize this; it’s very specific to web services.</span></p>
</div></li>
<li><div id="x1-18033x8">
<p><span class="koboSpan" id="kobo.90.1" xmlns="http://www.w3.org/1999/xhtml">Concurrency. </span><span class="koboSpan" id="kobo.90.2" xmlns="http://www.w3.org/1999/xhtml">”Scale out via the process model.” </span><span class="koboSpan" id="kobo.90.3" xmlns="http://www.w3.org/1999/xhtml">This is a subject for the interested reader who wants to process </span><span id="dx1-18034"/><span class="koboSpan" id="kobo.91.1" xmlns="http://www.w3.org/1999/xhtml">very large data sets. </span><span class="koboSpan" id="kobo.91.2" xmlns="http://www.w3.org/1999/xhtml">We won’t emphasize it in the main text. </span><span class="koboSpan" id="kobo.91.3" xmlns="http://www.w3.org/1999/xhtml">We will suggest some of these topics in the ”Extras” section of some chapters.</span></p>
</div></li>
<li><div id="x1-18036x9">
<p><span class="koboSpan" id="kobo.92.1" xmlns="http://www.w3.org/1999/xhtml">Disposability. </span><span class="koboSpan" id="kobo.92.2" xmlns="http://www.w3.org/1999/xhtml">”Maximize robustness with fast startup and graceful shutdown.” </span><span class="koboSpan" id="kobo.92.3" xmlns="http://www.w3.org/1999/xhtml">CLI applications tend to be structured this way, also.</span></p>
</div></li>
<li><div id="x1-18038x10">
<p><span class="koboSpan" id="kobo.93.1" xmlns="http://www.w3.org/1999/xhtml">Dev/prod parity. </span><span class="koboSpan" id="kobo.93.2" xmlns="http://www.w3.org/1999/xhtml">”Keep development, staging, and production as similar as possible.” </span><span class="koboSpan" id="kobo.93.3" xmlns="http://www.w3.org/1999/xhtml">While we won’t emphasize this deeply, our intent with CLI applications is to expose the distinctions between development and production with command-line arguments, shell environment variables, and configuration files.</span></p>
</div></li>
<li><div id="x1-18040x11">
<p><span class="koboSpan" id="kobo.94.1" xmlns="http://www.w3.org/1999/xhtml">Logs. </span><span class="koboSpan" id="kobo.94.2" xmlns="http://www.w3.org/1999/xhtml">”Treat logs as event streams.” </span><span class="koboSpan" id="kobo.94.3" xmlns="http://www.w3.org/1999/xhtml">We will suggest applications write logs, but we won’t provide more detailed guidance in this book.</span></p>
</div></li>
<li><div id="x1-18042x12">
<p><span class="koboSpan" id="kobo.95.1" xmlns="http://www.w3.org/1999/xhtml">Admin processes. </span><span class="koboSpan" id="kobo.95.2" xmlns="http://www.w3.org/1999/xhtml">”Run admin/management tasks as one-off processes.” </span><span class="koboSpan" id="kobo.95.3" xmlns="http://www.w3.org/1999/xhtml">A few of the projects will require some additional administrative programming. </span><span class="koboSpan" id="kobo.95.4" xmlns="http://www.w3.org/1999/xhtml">These will be built as deliverable CLI applications, complete with an acceptance test suite.</span></p>
</div></li>
</ol>
<p><span class="koboSpan" id="kobo.96.1" xmlns="http://www.w3.org/1999/xhtml">Our objective is to provide project descriptions and lists of deliverables that try to conform to these quality standards. </span><span class="koboSpan" id="kobo.96.2" xmlns="http://www.w3.org/1999/xhtml">As we noted earlier, each enterprise is unique, and some organizations will fall short of these standards, while some will exceed them. </span><span id="x1-18043r1"/></p>
<section class="level3" data-number="5.1.1" id="more-reading-on-quality">
<h3 data-number="5.1.1"><span class="titlemark"><span class="koboSpan" id="kobo.97.1" xmlns="http://www.w3.org/1999/xhtml">1.1.1 </span></span> <span id="x1-190001"/><span class="koboSpan" id="kobo.98.1" xmlns="http://www.w3.org/1999/xhtml">More Reading on Quality</span></h3>
<p><span class="koboSpan" id="kobo.99.1" xmlns="http://www.w3.org/1999/xhtml">In addition to the ISO standard, the IEEE 1061 </span><span id="dx1-19001"/><span class="koboSpan" id="kobo.100.1" xmlns="http://www.w3.org/1999/xhtml">standard also covers software quality. </span><span class="koboSpan" id="kobo.100.2" xmlns="http://www.w3.org/1999/xhtml">While it has been inactive since 2020, it contains some good ideas. </span><span class="koboSpan" id="kobo.100.3" xmlns="http://www.w3.org/1999/xhtml">The standard is focused on quality </span><em><span class="koboSpan" id="kobo.101.1" xmlns="http://www.w3.org/1999/xhtml">metrics</span></em><span class="koboSpan" id="kobo.102.1" xmlns="http://www.w3.org/1999/xhtml">, which dives deeply into the idea of analyzing software for quality factors.</span></p>
<p><span class="koboSpan" id="kobo.103.1" xmlns="http://www.w3.org/1999/xhtml">It can also help to read </span><a class="url" href="https://en.wikipedia.org/wiki/ISO/IEC_9126"><span class="koboSpan" id="kobo.104.1" xmlns="http://www.w3.org/1999/xhtml">https://en.wikipedia.org/wiki/ISO/IEC_9126</span></a><span class="koboSpan" id="kobo.105.1" xmlns="http://www.w3.org/1999/xhtml"> for some background on the origins of the ISO standard.</span></p>
<p><span class="koboSpan" id="kobo.106.1" xmlns="http://www.w3.org/1999/xhtml">When doing more reading on this topic, it can help to recognize the following three terms:</span></p>
<ul>
<li><p><strong><span class="koboSpan" id="kobo.107.1" xmlns="http://www.w3.org/1999/xhtml">Factors </span></strong><span class="koboSpan" id="kobo.108.1" xmlns="http://www.w3.org/1999/xhtml">are an external view of the software. </span><span class="koboSpan" id="kobo.108.2" xmlns="http://www.w3.org/1999/xhtml">They reflect the user’s understanding. </span><span class="koboSpan" id="kobo.108.3" xmlns="http://www.w3.org/1999/xhtml">Some of the underlying quality characteristics are not directly visible to users. </span><span class="koboSpan" id="kobo.108.4" xmlns="http://www.w3.org/1999/xhtml">Maintainability, for example, may appear to users as a reliability or usability problem because the software is difficult to repair or extend.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.109.1" xmlns="http://www.w3.org/1999/xhtml">Criteria </span></strong><span class="koboSpan" id="kobo.110.1" xmlns="http://www.w3.org/1999/xhtml">come from an internal view of the software. </span><span class="koboSpan" id="kobo.110.2" xmlns="http://www.w3.org/1999/xhtml">Quality criteria are the focus of the project’s deliverables. </span><span class="koboSpan" id="kobo.110.3" xmlns="http://www.w3.org/1999/xhtml">Our project code should reflect the eight quality characteristics listed above.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.111.1" xmlns="http://www.w3.org/1999/xhtml">Metrics </span></strong><span class="koboSpan" id="kobo.112.1" xmlns="http://www.w3.org/1999/xhtml">are how we can control the factors that are seen by the user. </span><span class="koboSpan" id="kobo.112.2" xmlns="http://www.w3.org/1999/xhtml">We won’t emphasize quality metrics. </span><span class="koboSpan" id="kobo.112.3" xmlns="http://www.w3.org/1999/xhtml">In some cases, tools like </span><strong><span class="koboSpan" id="kobo.113.1" xmlns="http://www.w3.org/1999/xhtml">pylint</span></strong><span class="koboSpan" id="kobo.114.1" xmlns="http://www.w3.org/1999/xhtml"> provide </span><span id="dx1-19002"/><span class="koboSpan" id="kobo.115.1" xmlns="http://www.w3.org/1999/xhtml">tangible measurements of static code quality. </span><span class="koboSpan" id="kobo.115.2" xmlns="http://www.w3.org/1999/xhtml">This isn’t a comprehensive tool for software quality in general, but it provides an easy starting point for a few key metrics related to complexity and maintainability.</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.116.1" xmlns="http://www.w3.org/1999/xhtml">Given these standards for high-quality software, we can turn our attention to the sequence of steps for building these files. </span><span class="koboSpan" id="kobo.116.2" xmlns="http://www.w3.org/1999/xhtml">We’ll suggest a sequence of stages you can follow. </span><span id="x1-19003r18"/></p>
</section>
</section>
<section class="level2" data-number="5.2" id="suggested-project-sprints">
<h2 data-number="5.2"><span class="titlemark"><span class="koboSpan" id="kobo.117.1" xmlns="http://www.w3.org/1999/xhtml">1.2 </span></span> <span id="x1-200002"/><span class="koboSpan" id="kobo.118.1" xmlns="http://www.w3.org/1999/xhtml">Suggested project sprints</span></h2>
<p><span class="koboSpan" id="kobo.119.1" xmlns="http://www.w3.org/1999/xhtml">We hesitate to provide a detailed step-by-step process for building software. </span><span class="koboSpan" id="kobo.119.2" xmlns="http://www.w3.org/1999/xhtml">For more experienced developers, our sequence of </span><span id="dx1-20001"/><span class="koboSpan" id="kobo.120.1" xmlns="http://www.w3.org/1999/xhtml">steps may not match their current practices. </span><span class="koboSpan" id="kobo.120.2" xmlns="http://www.w3.org/1999/xhtml">For less experienced developers, the suggested process can help by providing a rational order in which the deliverables can be built.</span></p>
<p><span class="koboSpan" id="kobo.121.1" xmlns="http://www.w3.org/1999/xhtml">There was a time when a ”statement of work” with a detailed list of specific tasks was a central part of a software development effort. </span><span class="koboSpan" id="kobo.121.2" xmlns="http://www.w3.org/1999/xhtml">This was often part of a ”waterfall” methodology where requirements flowed to analysts who wrote specifications that flowed down to designers who wrote high-level designs that flowed down to coders. </span><span class="koboSpan" id="kobo.121.3" xmlns="http://www.w3.org/1999/xhtml">This wasn’t a great way to build software, and has been largely supplanted by Agile methods. </span><span class="koboSpan" id="kobo.121.4" xmlns="http://www.w3.org/1999/xhtml">For more information on Agility, see </span><a class="url" href="https://agilemanifesto.org"><span class="koboSpan" id="kobo.122.1" xmlns="http://www.w3.org/1999/xhtml">https://agilemanifesto.org</span></a><span class="koboSpan" id="kobo.123.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
<p><span class="koboSpan" id="kobo.124.1" xmlns="http://www.w3.org/1999/xhtml">The Agile approach lets us </span><span id="dx1-20002"/><span class="koboSpan" id="kobo.125.1" xmlns="http://www.w3.org/1999/xhtml">examine a project both as a series of steps to be completed, as well as a collection of deliverables that need to be created. </span><span class="koboSpan" id="kobo.125.2" xmlns="http://www.w3.org/1999/xhtml">We’ll describe the steps first, avoiding too much emphasis on details. </span><span class="koboSpan" id="kobo.125.3" xmlns="http://www.w3.org/1999/xhtml">We’ll revisit the deliverables, and in those sections, dive a little more deeply into what the final product needs to be.</span></p>
<p><span class="koboSpan" id="kobo.126.1" xmlns="http://www.w3.org/1999/xhtml">The suggested approach </span><span id="dx1-20003"/><span class="koboSpan" id="kobo.127.1" xmlns="http://www.w3.org/1999/xhtml">follows the ”Agile Unified Process” ( </span><a class="url" href="https://www.methodsandtools.com/archive/archive.php?id=21"><span class="koboSpan" id="kobo.128.1" xmlns="http://www.w3.org/1999/xhtml">https://www.methodsandtools.com/archive/archive.php?id=21</span></a><span class="koboSpan" id="kobo.129.1" xmlns="http://www.w3.org/1999/xhtml">), which has four general phases. </span><span class="koboSpan" id="kobo.129.2" xmlns="http://www.w3.org/1999/xhtml">We’ll subdivide one of the phases to distinguish two important kinds of deliverables.</span></p>
<p><span class="koboSpan" id="kobo.130.1" xmlns="http://www.w3.org/1999/xhtml">We suggest tackling each </span><span id="dx1-20004"/><span class="koboSpan" id="kobo.131.1" xmlns="http://www.w3.org/1999/xhtml">project in the following five phases:</span></p>
<ol>
<li><div id="x1-20006x1">
<p><span class="koboSpan" id="kobo.132.1" xmlns="http://www.w3.org/1999/xhtml">Inception. </span><span class="koboSpan" id="kobo.132.2" xmlns="http://www.w3.org/1999/xhtml">Ready the tools. </span><span class="koboSpan" id="kobo.132.3" xmlns="http://www.w3.org/1999/xhtml">Organize the project directory and virtual environment.</span></p>
</div></li>
<li><div id="x1-20008x2">
<p><span class="koboSpan" id="kobo.133.1" xmlns="http://www.w3.org/1999/xhtml">Elaboration, part 1: Define done. </span><span class="koboSpan" id="kobo.133.2" xmlns="http://www.w3.org/1999/xhtml">This is implemented as acceptance test cases.</span></p>
</div></li>
<li><div id="x1-20010x3">
<p><span class="koboSpan" id="kobo.134.1" xmlns="http://www.w3.org/1999/xhtml">Elaboration, part 2: Define components and some tests. </span><span class="koboSpan" id="kobo.134.2" xmlns="http://www.w3.org/1999/xhtml">This is implemented as unit test cases for components that need to be built.</span></p>
</div></li>
<li><div id="x1-20012x4">
<p><span class="koboSpan" id="kobo.135.1" xmlns="http://www.w3.org/1999/xhtml">Construction. </span><span class="koboSpan" id="kobo.135.2" xmlns="http://www.w3.org/1999/xhtml">Build the software.</span></p>
</div></li>
<li><div id="x1-20014x5">
<p><span class="koboSpan" id="kobo.136.1" xmlns="http://www.w3.org/1999/xhtml">Transition. </span><span class="koboSpan" id="kobo.136.2" xmlns="http://www.w3.org/1999/xhtml">Final cleanup: make sure all tests pass and the documentation is readable.</span></p>
</div></li>
</ol>
<p><span class="koboSpan" id="kobo.137.1" xmlns="http://www.w3.org/1999/xhtml">These efforts don’t proceed in a simple linear fashion. </span><span class="koboSpan" id="kobo.137.2" xmlns="http://www.w3.org/1999/xhtml">It’s often necessary to iterate between elaboration and construction to create features separately.</span></p>
<p><span class="koboSpan" id="kobo.138.1" xmlns="http://www.w3.org/1999/xhtml">It often works as shown in </span><a href="#1.1"><em><span class="koboSpan" id="kobo.139.1" xmlns="http://www.w3.org/1999/xhtml">Figure 1.1</span></em></a><span class="koboSpan" id="kobo.140.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
<figure class="IMG---Figure">
<span class="koboSpan" id="kobo.141.1" xmlns="http://www.w3.org/1999/xhtml"><img alt="Figure 1.1: Development Phases and Cycles " src="../media/file4.jpg"/></span>
<figcaption class="IMG---Caption"><span class="id" id="1.1"><span class="koboSpan" id="kobo.142.1" xmlns="http://www.w3.org/1999/xhtml">Figure 1.1: </span></span><span class="content"><span class="koboSpan" id="kobo.143.1" xmlns="http://www.w3.org/1999/xhtml">Development Phases and Cycles </span></span></figcaption>
</figure>
<p><span class="koboSpan" id="kobo.144.1" xmlns="http://www.w3.org/1999/xhtml">This figure provides a very coarse overview of the kinds of activities we’ll discuss below. </span><span class="koboSpan" id="kobo.144.2" xmlns="http://www.w3.org/1999/xhtml">The important concept is iterating between the elaboration and construction phases. </span><span class="koboSpan" id="kobo.144.3" xmlns="http://www.w3.org/1999/xhtml">It’s difficult to fully design a project before constructing all of the code. </span><span class="koboSpan" id="kobo.144.4" xmlns="http://www.w3.org/1999/xhtml">It’s easier to design a little, construct a little, and refactor as needed.</span></p>
<p><span class="koboSpan" id="kobo.145.1" xmlns="http://www.w3.org/1999/xhtml">For a complex project, there may be a series of transitions to production. </span><span class="koboSpan" id="kobo.145.2" xmlns="http://www.w3.org/1999/xhtml">Often a ”minimally viable product” will be created to demonstrate some of the concepts. </span><span class="koboSpan" id="kobo.145.3" xmlns="http://www.w3.org/1999/xhtml">This will be followed by products with more features or features better focused on the user. </span><span class="koboSpan" id="kobo.145.4" xmlns="http://www.w3.org/1999/xhtml">Ideally, it will have both kinds of enhancements: more features and a better focus on the user’s needs.</span></p>
<p><span class="koboSpan" id="kobo.146.1" xmlns="http://www.w3.org/1999/xhtml">We’ll look at each of these four phases in a little more detail, starting with the inception phases. </span><span id="x1-20017r19"/></p>
<section class="level3" data-number="5.2.1" id="inception">
<h3 data-number="5.2.1"><span class="titlemark"><span class="koboSpan" id="kobo.147.1" xmlns="http://www.w3.org/1999/xhtml">1.2.1 </span></span> <span id="x1-210001"/><span class="koboSpan" id="kobo.148.1" xmlns="http://www.w3.org/1999/xhtml">Inception</span></h3>
<p><span class="koboSpan" id="kobo.149.1" xmlns="http://www.w3.org/1999/xhtml">Start the inception phase by </span><span id="dx1-21001"/><span class="koboSpan" id="kobo.150.1" xmlns="http://www.w3.org/1999/xhtml">creating the parent directory for the project, then some commonly-used sub-directories (</span><code><span class="koboSpan" id="kobo.151.1" xmlns="http://www.w3.org/1999/xhtml">docs</span></code><span class="koboSpan" id="kobo.152.1" xmlns="http://www.w3.org/1999/xhtml">, </span><code><span class="koboSpan" id="kobo.153.1" xmlns="http://www.w3.org/1999/xhtml">notebooks</span></code><span class="koboSpan" id="kobo.154.1" xmlns="http://www.w3.org/1999/xhtml">, </span><code><span class="koboSpan" id="kobo.155.1" xmlns="http://www.w3.org/1999/xhtml">src</span></code><span class="koboSpan" id="kobo.156.1" xmlns="http://www.w3.org/1999/xhtml">, </span><code><span class="koboSpan" id="kobo.157.1" xmlns="http://www.w3.org/1999/xhtml">tests</span></code><span class="koboSpan" id="kobo.158.1" xmlns="http://www.w3.org/1999/xhtml">). </span><span class="koboSpan" id="kobo.158.2" xmlns="http://www.w3.org/1999/xhtml">There will be some top-level files (</span><code><span class="koboSpan" id="kobo.159.1" xmlns="http://www.w3.org/1999/xhtml">README.md</span></code><span class="koboSpan" id="kobo.160.1" xmlns="http://www.w3.org/1999/xhtml">, </span><code><span class="koboSpan" id="kobo.161.1" xmlns="http://www.w3.org/1999/xhtml">pyproject.toml</span></code><span class="koboSpan" id="kobo.162.1" xmlns="http://www.w3.org/1999/xhtml">, and </span><code><span class="koboSpan" id="kobo.163.1" xmlns="http://www.w3.org/1999/xhtml">tox.ini</span></code><span class="koboSpan" id="kobo.164.1" xmlns="http://www.w3.org/1999/xhtml">). </span><span class="koboSpan" id="kobo.164.2" xmlns="http://www.w3.org/1999/xhtml">The list of expected directories and files is described in more detail in </span><a href="#x1-260003"><em><span class="koboSpan" id="kobo.165.1" xmlns="http://www.w3.org/1999/xhtml">List of deliverables</span></em></a><span class="koboSpan" id="kobo.166.1" xmlns="http://www.w3.org/1999/xhtml">, later in this chapter. </span><span class="koboSpan" id="kobo.166.2" xmlns="http://www.w3.org/1999/xhtml">We’ll look at the contents of each of these files and directories in the </span><a href="#x1-310003"><em><span class="koboSpan" id="kobo.167.1" xmlns="http://www.w3.org/1999/xhtml">Deliverables</span></em></a><span class="koboSpan" id="kobo.168.1" xmlns="http://www.w3.org/1999/xhtml"> section.</span></p>
<p><span class="koboSpan" id="kobo.169.1" xmlns="http://www.w3.org/1999/xhtml">It helps to capture any initial ideas in the </span><code><span class="koboSpan" id="kobo.170.1" xmlns="http://www.w3.org/1999/xhtml">README.md</span></code><span class="koboSpan" id="kobo.171.1" xmlns="http://www.w3.org/1999/xhtml"> file. </span><span class="koboSpan" id="kobo.171.2" xmlns="http://www.w3.org/1999/xhtml">Later, this will be refactored into more formal documentation. </span><span class="koboSpan" id="kobo.171.3" xmlns="http://www.w3.org/1999/xhtml">Initially, it’s the perfect place to keep notes and reminders.</span></p>
<p><span class="koboSpan" id="kobo.172.1" xmlns="http://www.w3.org/1999/xhtml">Build a fresh, new virtual environment for the project. </span><span class="koboSpan" id="kobo.172.2" xmlns="http://www.w3.org/1999/xhtml">Each project should have its own virtual environment. </span><span class="koboSpan" id="kobo.172.3" xmlns="http://www.w3.org/1999/xhtml">Environments are essentially free: it’s best to build them to reflect any unique aspects of each project.</span></p>
<p><span class="koboSpan" id="kobo.173.1" xmlns="http://www.w3.org/1999/xhtml">Here’s a </span><strong><span class="koboSpan" id="kobo.174.1" xmlns="http://www.w3.org/1999/xhtml">conda </span></strong><span class="koboSpan" id="kobo.175.1" xmlns="http://www.w3.org/1999/xhtml">command that can be used to build an environment.</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-6">
<div class="tcolorbox-content">
<pre class="console"><span class="koboSpan" id="kobo.176.1" xmlns="http://www.w3.org/1999/xhtml">% conda create -n project0 --channel=conda-forge python=3.10</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.177.1" xmlns="http://www.w3.org/1999/xhtml">An important part of inception is to </span><span id="dx1-21003"/><span class="koboSpan" id="kobo.178.1" xmlns="http://www.w3.org/1999/xhtml">start the documentation for the project. </span><span class="koboSpan" id="kobo.178.2" xmlns="http://www.w3.org/1999/xhtml">This can be done using the Sphinx tool.</span></p>
<p><span class="koboSpan" id="kobo.179.1" xmlns="http://www.w3.org/1999/xhtml">While Sphinx is available from the </span><strong><span class="koboSpan" id="kobo.180.1" xmlns="http://www.w3.org/1999/xhtml">Conda Forge</span></strong><span class="koboSpan" id="kobo.181.1" xmlns="http://www.w3.org/1999/xhtml">, this version lags behind the version available from the </span><strong><span class="koboSpan" id="kobo.182.1" xmlns="http://www.w3.org/1999/xhtml">PyPI </span></strong><span class="koboSpan" id="kobo.183.1" xmlns="http://www.w3.org/1999/xhtml">repository. </span><span class="koboSpan" id="kobo.183.2" xmlns="http://www.w3.org/1999/xhtml">Because of this lag, it’s best to install Sphinx using </span><strong><span class="koboSpan" id="kobo.184.1" xmlns="http://www.w3.org/1999/xhtml">PIP</span></strong><span class="koboSpan" id="kobo.185.1" xmlns="http://www.w3.org/1999/xhtml">:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-7">
<div class="tcolorbox-content">
<pre class="console"><span class="koboSpan" id="kobo.186.1" xmlns="http://www.w3.org/1999/xhtml">% python -m pip install sphinx</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.187.1" xmlns="http://www.w3.org/1999/xhtml">After installing Sphinx, it helps to initialize and publish the documentation for the project. </span><span class="koboSpan" id="kobo.187.2" xmlns="http://www.w3.org/1999/xhtml">Starting this permits publishing and sharing the design ideas as the work progresses. </span><span class="koboSpan" id="kobo.187.3" xmlns="http://www.w3.org/1999/xhtml">In the </span><code><span class="koboSpan" id="kobo.188.1" xmlns="http://www.w3.org/1999/xhtml">docs</span></code><span class="koboSpan" id="kobo.189.1" xmlns="http://www.w3.org/1999/xhtml"> directory, do the following steps:</span></p>
<ol>
<li><div id="x1-21006x1">
<p><span class="koboSpan" id="kobo.190.1" xmlns="http://www.w3.org/1999/xhtml">Run the </span><code><span class="koboSpan" id="kobo.191.1" xmlns="http://www.w3.org/1999/xhtml">sphinx-quickstart</span></code><span class="koboSpan" id="kobo.192.1" xmlns="http://www.w3.org/1999/xhtml"> command to populate the documentation. </span><span class="koboSpan" id="kobo.192.2" xmlns="http://www.w3.org/1999/xhtml">See </span><a class="url" href="https://www.sphinx-doc.org/en/master/usage/quickstart.html#setting-up-the-documentation-sources"><span class="koboSpan" id="kobo.193.1" xmlns="http://www.w3.org/1999/xhtml">https://www.sphinx-doc.org/en/master/usage/quickstart.html#setting-up-the-documentation-sources</span></a><span class="koboSpan" id="kobo.194.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
</div></li>
<li><div id="x1-21008x2">
<p><span class="koboSpan" id="kobo.195.1" xmlns="http://www.w3.org/1999/xhtml">Update the </span><code><span class="koboSpan" id="kobo.196.1" xmlns="http://www.w3.org/1999/xhtml">index.rst</span></code><span class="koboSpan" id="kobo.197.1" xmlns="http://www.w3.org/1999/xhtml"> table of contents (TOC) with two entries: “overview” and “API”. </span><span class="koboSpan" id="kobo.197.2" xmlns="http://www.w3.org/1999/xhtml">These are sections that will be in separate files.</span></p>
</div></li>
<li><div id="x1-21010x3">
<p><span class="koboSpan" id="kobo.198.1" xmlns="http://www.w3.org/1999/xhtml">Write an </span><code><span class="koboSpan" id="kobo.199.1" xmlns="http://www.w3.org/1999/xhtml">overview.rst</span></code><span class="koboSpan" id="kobo.200.1" xmlns="http://www.w3.org/1999/xhtml"> document with the definition of done: what will be accomplished. </span><span class="koboSpan" id="kobo.200.2" xmlns="http://www.w3.org/1999/xhtml">This should cover the core ”Who-What-When-Where-Why” of the project.</span></p>
</div></li>
<li><div id="x1-21012x4">
<p><span class="koboSpan" id="kobo.201.1" xmlns="http://www.w3.org/1999/xhtml">Put a title in the API document, and a </span><code><span class="koboSpan" id="kobo.202.1" xmlns="http://www.w3.org/1999/xhtml">..</span></code><code><span class="koboSpan" id="kobo.203.1" xmlns="http://www.w3.org/1999/xhtml"> </span></code><code><span class="koboSpan" id="kobo.204.1" xmlns="http://www.w3.org/1999/xhtml"> todo::</span></code><span class="koboSpan" id="kobo.205.1" xmlns="http://www.w3.org/1999/xhtml"> note to yourself. </span><span class="koboSpan" id="kobo.205.2" xmlns="http://www.w3.org/1999/xhtml">You’ll add to this document as you add modules to your project.</span></p>
</div></li>
<li><div id="x1-21014x5">
<p><span class="koboSpan" id="kobo.206.1" xmlns="http://www.w3.org/1999/xhtml">During Elaboration, you’ll update the the </span><code><span class="koboSpan" id="kobo.207.1" xmlns="http://www.w3.org/1999/xhtml">index.rst</span></code><span class="koboSpan" id="kobo.208.1" xmlns="http://www.w3.org/1999/xhtml"> to add sections for architecture and design decisions.</span></p>
</div></li>
<li><div id="x1-21016x6">
<p><span class="koboSpan" id="kobo.209.1" xmlns="http://www.w3.org/1999/xhtml">During Construction, as you create code, you’ll add to the API section.</span></p>
</div></li>
<li><div id="x1-21018x7">
<p><span class="koboSpan" id="kobo.210.1" xmlns="http://www.w3.org/1999/xhtml">During Transition, you’ll add to the </span><code><span class="koboSpan" id="kobo.211.1" xmlns="http://www.w3.org/1999/xhtml">index.rst</span></code><span class="koboSpan" id="kobo.212.1" xmlns="http://www.w3.org/1999/xhtml"> with some ”How” sections: How to test it, and how to use it.</span></p>
</div></li>
</ol>
<p><span class="koboSpan" id="kobo.213.1" xmlns="http://www.w3.org/1999/xhtml">With this as the starting point, the </span><code><span class="koboSpan" id="kobo.214.1" xmlns="http://www.w3.org/1999/xhtml">make</span></code><code><span class="koboSpan" id="kobo.215.1" xmlns="http://www.w3.org/1999/xhtml"> html</span></code><span class="koboSpan" id="kobo.216.1" xmlns="http://www.w3.org/1999/xhtml"> command will build a documentation set in HTML. </span><span class="koboSpan" id="kobo.216.2" xmlns="http://www.w3.org/1999/xhtml">This can be shared </span><span id="dx1-21019"/><span class="koboSpan" id="kobo.217.1" xmlns="http://www.w3.org/1999/xhtml">with stakeholders to assure there’s a clear, common understanding of the project.</span></p>
<p><span class="koboSpan" id="kobo.218.1" xmlns="http://www.w3.org/1999/xhtml">With a skeleton directory and some initial places to record ideas and decisions, it makes sense to start elaborating on the initial goal to and decide what will be built, and how it will work. </span><span id="x1-21020r22"/></p>
</section>
<section class="level3" data-number="5.2.2" id="elaboration-part-1-define-done">
<h3 data-number="5.2.2"><span class="titlemark"><span class="koboSpan" id="kobo.219.1" xmlns="http://www.w3.org/1999/xhtml">1.2.2 </span></span> <span id="x1-220002"/><span class="koboSpan" id="kobo.220.1" xmlns="http://www.w3.org/1999/xhtml">Elaboration, part 1: define done</span></h3>
<p><span class="koboSpan" id="kobo.221.1" xmlns="http://www.w3.org/1999/xhtml">It helps to have a clear definition of ”done.” </span><span class="koboSpan" id="kobo.221.2" xmlns="http://www.w3.org/1999/xhtml">This guides the construction effort toward a well-defined goal. </span><span class="koboSpan" id="kobo.221.3" xmlns="http://www.w3.org/1999/xhtml">It </span><span id="dx1-22001"/><span class="koboSpan" id="kobo.222.1" xmlns="http://www.w3.org/1999/xhtml">helps to have the definition of done written out as a formal, automated test suite. </span><span class="koboSpan" id="kobo.222.2" xmlns="http://www.w3.org/1999/xhtml">For this, the Gherkin </span><span id="dx1-22002"/><span class="koboSpan" id="kobo.223.1" xmlns="http://www.w3.org/1999/xhtml">language is helpful. </span><span class="koboSpan" id="kobo.223.2" xmlns="http://www.w3.org/1999/xhtml">The </span><strong><span class="koboSpan" id="kobo.224.1" xmlns="http://www.w3.org/1999/xhtml">behave </span></strong><span class="koboSpan" id="kobo.225.1" xmlns="http://www.w3.org/1999/xhtml">tool can execute the Gherkin </span><span id="dx1-22003"/><span class="koboSpan" id="kobo.226.1" xmlns="http://www.w3.org/1999/xhtml">feature to evaluate the application software. </span><span class="koboSpan" id="kobo.226.2" xmlns="http://www.w3.org/1999/xhtml">An alternative to Gherkin is using the </span><strong><span class="koboSpan" id="kobo.227.1" xmlns="http://www.w3.org/1999/xhtml">pytest </span></strong><span class="koboSpan" id="kobo.228.1" xmlns="http://www.w3.org/1999/xhtml">tool with the </span><strong><span class="koboSpan" id="kobo.229.1" xmlns="http://www.w3.org/1999/xhtml">pytest-bdd </span></strong><span class="koboSpan" id="kobo.230.1" xmlns="http://www.w3.org/1999/xhtml">plug-in to run </span><span id="dx1-22004"/><span class="koboSpan" id="kobo.231.1" xmlns="http://www.w3.org/1999/xhtml">the acceptance tests.</span></p>
<p><span class="koboSpan" id="kobo.232.1" xmlns="http://www.w3.org/1999/xhtml">The two big advantages of Gherkin are the ability to structure the feature descriptions into scenarios and write the descriptions in English (or any other natural language). </span><span class="koboSpan" id="kobo.232.2" xmlns="http://www.w3.org/1999/xhtml">Framing the expected behavior into discrete operating scenarios forces us to think clearly about how the application or module is used. </span><span class="koboSpan" id="kobo.232.3" xmlns="http://www.w3.org/1999/xhtml">Writing in English (or other natural languages) makes it easier to share definitions with other people to confirm our understanding. </span><span class="koboSpan" id="kobo.232.4" xmlns="http://www.w3.org/1999/xhtml">It also helps to keep the definition of done focused on the problem domain without devolving into technical considerations and programming.</span></p>
<p><span class="koboSpan" id="kobo.233.1" xmlns="http://www.w3.org/1999/xhtml">Each scenario can have three steps: Given, When, and Then. </span><span class="koboSpan" id="kobo.233.2" xmlns="http://www.w3.org/1999/xhtml">The Given step defines a context. </span><span class="koboSpan" id="kobo.233.3" xmlns="http://www.w3.org/1999/xhtml">The When step defines an action or a request of the software. </span><span class="koboSpan" id="kobo.233.4" xmlns="http://www.w3.org/1999/xhtml">The Then step defines the expected results. </span><span class="koboSpan" id="kobo.233.5" xmlns="http://www.w3.org/1999/xhtml">These step definitions can be as complex as needed, often involving multiple clauses joined with </span><code><span class="koboSpan" id="kobo.234.1" xmlns="http://www.w3.org/1999/xhtml">And</span></code><span class="koboSpan" id="kobo.235.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.235.2" xmlns="http://www.w3.org/1999/xhtml">Examples can be provided in tables to avoid copying and pasting a scenario with a different set of values. </span><span class="koboSpan" id="kobo.235.3" xmlns="http://www.w3.org/1999/xhtml">A separate module provides Python implementations for the English-language step text.</span></p>
<p><span class="koboSpan" id="kobo.236.1" xmlns="http://www.w3.org/1999/xhtml">See </span><a class="url" href="https://behave.readthedocs.io/en/stable/gherkin.html#gherkin-feature-testing-language"><span class="koboSpan" id="kobo.237.1" xmlns="http://www.w3.org/1999/xhtml">https://behave.readthedocs.io/en/stable/gherkin.html#gherkin-feature-testing-language</span></a><span class="koboSpan" id="kobo.238.1" xmlns="http://www.w3.org/1999/xhtml"> for numerous </span><span id="dx1-22005"/><span class="koboSpan" id="kobo.239.1" xmlns="http://www.w3.org/1999/xhtml">examples of scenarios written in Gherkin.</span></p>
<p><span class="koboSpan" id="kobo.240.1" xmlns="http://www.w3.org/1999/xhtml">Start this part of elaboration by creating a </span><code><span class="koboSpan" id="kobo.241.1" xmlns="http://www.w3.org/1999/xhtml">tests/features/project.feature</span></code><span class="koboSpan" id="kobo.242.1" xmlns="http://www.w3.org/1999/xhtml"> file based on the overview description. </span><span class="koboSpan" id="kobo.242.2" xmlns="http://www.w3.org/1999/xhtml">Don’t use a boring name like </span><code><span class="koboSpan" id="kobo.243.1" xmlns="http://www.w3.org/1999/xhtml">project</span></code><span class="koboSpan" id="kobo.244.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.244.2" xmlns="http://www.w3.org/1999/xhtml">A complex project may have multiple features, so the feature file names should reflect the features.</span></p>
<p><span class="koboSpan" id="kobo.245.1" xmlns="http://www.w3.org/1999/xhtml">To use </span><strong><span class="koboSpan" id="kobo.246.1" xmlns="http://www.w3.org/1999/xhtml">pytest</span></strong><span class="koboSpan" id="kobo.247.1" xmlns="http://www.w3.org/1999/xhtml">, write one (or more) acceptance test scripts in the </span><code><span class="koboSpan" id="kobo.248.1" xmlns="http://www.w3.org/1999/xhtml">tests</span></code><span class="koboSpan" id="kobo.249.1" xmlns="http://www.w3.org/1999/xhtml"> directory.</span></p>
<p><span class="koboSpan" id="kobo.250.1" xmlns="http://www.w3.org/1999/xhtml">The features are supported by </span><strong><span class="koboSpan" id="kobo.251.1" xmlns="http://www.w3.org/1999/xhtml">steps</span></strong><span class="koboSpan" id="kobo.252.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.252.2" xmlns="http://www.w3.org/1999/xhtml">These steps are in modules in the </span><code><span class="koboSpan" id="kobo.253.1" xmlns="http://www.w3.org/1999/xhtml">tests/steps</span></code><span class="koboSpan" id="kobo.254.1" xmlns="http://www.w3.org/1999/xhtml"> directory. </span><span class="koboSpan" id="kobo.254.2" xmlns="http://www.w3.org/1999/xhtml">A </span><code><span class="koboSpan" id="kobo.255.1" xmlns="http://www.w3.org/1999/xhtml">tests/steps/hw_cli.py</span></code><span class="koboSpan" id="kobo.256.1" xmlns="http://www.w3.org/1999/xhtml"> module provides the necessary Python definitions for the steps in the feature file. </span><span class="koboSpan" id="kobo.256.2" xmlns="http://www.w3.org/1999/xhtml">The names of the modules don’t matter; we suggest something like </span><code><span class="koboSpan" id="kobo.257.1" xmlns="http://www.w3.org/1999/xhtml">hw_cli</span></code><span class="koboSpan" id="kobo.258.1" xmlns="http://www.w3.org/1999/xhtml"> because it implements the steps for a hello-world command-line interface.</span></p>
<p><span class="koboSpan" id="kobo.259.1" xmlns="http://www.w3.org/1999/xhtml">The underlying mechanism is used by the </span><strong><span class="koboSpan" id="kobo.260.1" xmlns="http://www.w3.org/1999/xhtml">Behave </span></strong><span class="koboSpan" id="kobo.261.1" xmlns="http://www.w3.org/1999/xhtml">tool are function decorators. </span><span class="koboSpan" id="kobo.261.2" xmlns="http://www.w3.org/1999/xhtml">These match text from the feature file to </span><span id="dx1-22006"/><span class="koboSpan" id="kobo.262.1" xmlns="http://www.w3.org/1999/xhtml">define the function that implements that step. </span><span class="koboSpan" id="kobo.262.2" xmlns="http://www.w3.org/1999/xhtml">These can have wildcard-matching to permit flexibility in wording. </span><span class="koboSpan" id="kobo.262.3" xmlns="http://www.w3.org/1999/xhtml">The decorator can also parse out parameter values from the text.</span></p>
<p><span class="koboSpan" id="kobo.263.1" xmlns="http://www.w3.org/1999/xhtml">A </span><code><span class="koboSpan" id="kobo.264.1" xmlns="http://www.w3.org/1999/xhtml">tests/environment.py</span></code><span class="koboSpan" id="kobo.265.1" xmlns="http://www.w3.org/1999/xhtml"> file is required, but it can be empty for simple tests. </span><span class="koboSpan" id="kobo.265.2" xmlns="http://www.w3.org/1999/xhtml">This file provides a testing context, and is where some functions used by the </span><strong><span class="koboSpan" id="kobo.266.1" xmlns="http://www.w3.org/1999/xhtml">Behave </span></strong><span class="koboSpan" id="kobo.267.1" xmlns="http://www.w3.org/1999/xhtml">tool to control test setup and teardown are defined.</span></p>
<p><span class="koboSpan" id="kobo.268.1" xmlns="http://www.w3.org/1999/xhtml">As soon as scenarios have been written, it makes sense to run the </span><strong><span class="koboSpan" id="kobo.269.1" xmlns="http://www.w3.org/1999/xhtml">Behave</span></strong><span class="koboSpan" id="kobo.270.1" xmlns="http://www.w3.org/1999/xhtml"> tool to see the acceptance test fail. </span><span class="koboSpan" id="kobo.270.2" xmlns="http://www.w3.org/1999/xhtml">Initially, this lets you debug the step definitions.</span></p>
<p><span class="koboSpan" id="kobo.271.1" xmlns="http://www.w3.org/1999/xhtml">For this application, the steps must properly execute the application program and capture the output file. </span><span class="koboSpan" id="kobo.271.2" xmlns="http://www.w3.org/1999/xhtml">Because the application doesn’t exist yet, a test failure at this point is expected.</span></p>
<p><span class="koboSpan" id="kobo.272.1" xmlns="http://www.w3.org/1999/xhtml">The feature files with the application scenarios are a working definition of done. </span><span class="koboSpan" id="kobo.272.2" xmlns="http://www.w3.org/1999/xhtml">When the test suite runs, it will show whether or not the software works. </span><span class="koboSpan" id="kobo.272.3" xmlns="http://www.w3.org/1999/xhtml">Starting with features that fail to work means the rest of the construction phase will be debugging the failures and fixing the software </span><span id="dx1-22007"/><span class="koboSpan" id="kobo.273.1" xmlns="http://www.w3.org/1999/xhtml">until the application passes the acceptance test suite.</span></p>
<p><span class="koboSpan" id="kobo.274.1" xmlns="http://www.w3.org/1999/xhtml">In </span><a href="#x1-280005"><em><span class="koboSpan" id="kobo.275.1" xmlns="http://www.w3.org/1999/xhtml">Project 0 – Hello World with test cases</span></em></a><span class="koboSpan" id="kobo.276.1" xmlns="http://www.w3.org/1999/xhtml"> we’ll look at an example of a Gherkin-language feature, the matching step definitions, and a </span><code><span class="koboSpan" id="kobo.277.1" xmlns="http://www.w3.org/1999/xhtml">tox.ini</span></code><span class="koboSpan" id="kobo.278.1" xmlns="http://www.w3.org/1999/xhtml"> to run the test suite. </span><span id="x1-22008r23"/></p>
</section>
<section class="level3" data-number="5.2.3" id="elaboration-part-2-define-components-and-tests">
<h3 data-number="5.2.3"><span class="titlemark"><span class="koboSpan" id="kobo.279.1" xmlns="http://www.w3.org/1999/xhtml">1.2.3 </span></span> <span id="x1-230003"/><span class="koboSpan" id="kobo.280.1" xmlns="http://www.w3.org/1999/xhtml">Elaboration, part 2: define components and tests</span></h3>
<p><span class="koboSpan" id="kobo.281.1" xmlns="http://www.w3.org/1999/xhtml">The acceptance test suite is often relatively ”coarse” – the tests exercise the application as a whole, and avoid internal error conditions or subtle edge cases. </span><span class="koboSpan" id="kobo.281.2" xmlns="http://www.w3.org/1999/xhtml">The acceptance test suite rarely exercises all of the </span><span id="dx1-23001"/><span class="koboSpan" id="kobo.282.1" xmlns="http://www.w3.org/1999/xhtml">individual software components. </span><span class="koboSpan" id="kobo.282.2" xmlns="http://www.w3.org/1999/xhtml">Because of this, it can be difficult to debug problems in complex applications without detailed unit tests for each unit — each package, module, class, and function.</span></p>
<p><span class="koboSpan" id="kobo.283.1" xmlns="http://www.w3.org/1999/xhtml">After writing the </span><span id="dx1-23002"/><span class="koboSpan" id="kobo.284.1" xmlns="http://www.w3.org/1999/xhtml">general acceptance test suite, it helps to do two things. </span><span class="koboSpan" id="kobo.284.2" xmlns="http://www.w3.org/1999/xhtml">First, start writing some skeleton code that’s likely to solve the problem. </span><span class="koboSpan" id="kobo.284.3" xmlns="http://www.w3.org/1999/xhtml">The class or function will contain a docstring explaining the idea. </span><span class="koboSpan" id="kobo.284.4" xmlns="http://www.w3.org/1999/xhtml">Optionally, it can have a body of the </span><code><span class="koboSpan" id="kobo.285.1" xmlns="http://www.w3.org/1999/xhtml">pass</span></code><span class="koboSpan" id="kobo.286.1" xmlns="http://www.w3.org/1999/xhtml"> statement. </span><span class="koboSpan" id="kobo.286.2" xmlns="http://www.w3.org/1999/xhtml">After writing this skeleton, the second step is to expand on the docstring ideas by writing unit tests for the components.</span></p>
<p><span class="koboSpan" id="kobo.287.1" xmlns="http://www.w3.org/1999/xhtml">Let’s assume we’ve written a scenario with a step that will execute an application named </span><code><span class="koboSpan" id="kobo.288.1" xmlns="http://www.w3.org/1999/xhtml">src/hello_world.py</span></code><span class="koboSpan" id="kobo.289.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.289.2" xmlns="http://www.w3.org/1999/xhtml">We can create this file and include a skeleton class definition like this:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-8">
<div class="tcolorbox-content">
<pre class="source-code"><span class="koboSpan" id="kobo.290.1" xmlns="http://www.w3.org/1999/xhtml">class Greeting:
    """
    Created with a greeting text.
    </span><span class="koboSpan" id="kobo.290.2" xmlns="http://www.w3.org/1999/xhtml">Writes the text to stdout.

    </span><span class="koboSpan" id="kobo.290.3" xmlns="http://www.w3.org/1999/xhtml">..  </span><span class="koboSpan" id="kobo.290.4" xmlns="http://www.w3.org/1999/xhtml">todo:: Finish this
    """
    pass</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.291.1" xmlns="http://www.w3.org/1999/xhtml">This example shows a class with a design idea. </span><span class="koboSpan" id="kobo.291.2" xmlns="http://www.w3.org/1999/xhtml">This needs to be expanded with a clear statement of expected behaviors. </span><span class="koboSpan" id="kobo.291.3" xmlns="http://www.w3.org/1999/xhtml">Those expectations should take the form of unit tests for this class.</span></p>
<p><span class="koboSpan" id="kobo.292.1" xmlns="http://www.w3.org/1999/xhtml">Once some skeletons and tests are written, the </span><strong><span class="koboSpan" id="kobo.293.1" xmlns="http://www.w3.org/1999/xhtml">pytest </span></strong><span class="koboSpan" id="kobo.294.1" xmlns="http://www.w3.org/1999/xhtml">tool can be </span><span id="dx1-23011"/><span class="koboSpan" id="kobo.295.1" xmlns="http://www.w3.org/1999/xhtml">used to execute those tests.</span></p>
<p><span class="koboSpan" id="kobo.296.1" xmlns="http://www.w3.org/1999/xhtml">The unit tests will likely fail because the skeleton code is incomplete or doesn’t work. </span><span class="koboSpan" id="kobo.296.2" xmlns="http://www.w3.org/1999/xhtml">In the cases where tests are complete, but classes don’t work, you’re ready to start the construction phase.</span></p>
<p><span class="koboSpan" id="kobo.297.1" xmlns="http://www.w3.org/1999/xhtml">In the cases where the design isn’t complete, or the tests are fragmentary, it makes sense to remain in the elaboration phase for those classes, modules, or functions. </span><span class="koboSpan" id="kobo.297.2" xmlns="http://www.w3.org/1999/xhtml">Once the tests are understood, construction has a clear and achievable goal.</span></p>
<p><span class="koboSpan" id="kobo.298.1" xmlns="http://www.w3.org/1999/xhtml">We don’t always get the test cases right the first time, we must change them as we learn. </span><span class="koboSpan" id="kobo.298.2" xmlns="http://www.w3.org/1999/xhtml">We rarely get the working code right the first time. </span><span class="koboSpan" id="kobo.298.3" xmlns="http://www.w3.org/1999/xhtml">If the test cases come first, they make sure we have a clear goal.</span></p>
<p><span class="koboSpan" id="kobo.299.1" xmlns="http://www.w3.org/1999/xhtml">In some cases, the design may not be easy to articulate without first writing some ”spike solution” to explore an alternative. </span><span class="koboSpan" id="kobo.299.2" xmlns="http://www.w3.org/1999/xhtml">Once the spike works, it makes sense to write tests to demonstrate the code works.</span></p>
<p><span class="koboSpan" id="kobo.300.1" xmlns="http://www.w3.org/1999/xhtml">See </span><a class="url" href="http://www.extremeprogramming.org/rules/spike.html"><span class="koboSpan" id="kobo.301.1" xmlns="http://www.w3.org/1999/xhtml">http://www.extremeprogramming.org/rules/spike.html</span></a><span class="koboSpan" id="kobo.302.1" xmlns="http://www.w3.org/1999/xhtml"> for </span><span id="dx1-23012"/><span class="koboSpan" id="kobo.303.1" xmlns="http://www.w3.org/1999/xhtml">more on creating spike solutions.</span></p>
<p><span class="koboSpan" id="kobo.304.1" xmlns="http://www.w3.org/1999/xhtml">At this point, you have an idea of how the software will be designed. </span><span class="koboSpan" id="kobo.304.2" xmlns="http://www.w3.org/1999/xhtml">The test cases are a way to formalize the design into a goal. </span><span class="koboSpan" id="kobo.304.3" xmlns="http://www.w3.org/1999/xhtml">It’s time to begin construction. </span><span id="x1-23013r24"/></p>
</section>
<section class="level3" data-number="5.2.4" id="construction">
<h3 data-number="5.2.4"><span class="titlemark"><span class="koboSpan" id="kobo.305.1" xmlns="http://www.w3.org/1999/xhtml">1.2.4 </span></span> <span id="x1-240004"/><span class="koboSpan" id="kobo.306.1" xmlns="http://www.w3.org/1999/xhtml">Construction</span></h3>
<p><span class="koboSpan" id="kobo.307.1" xmlns="http://www.w3.org/1999/xhtml">The construction phase finishes the </span><span id="dx1-24001"/><span class="koboSpan" id="kobo.308.1" xmlns="http://www.w3.org/1999/xhtml">class and function (and module and package) definitions started in the elaboration phase. </span><span class="koboSpan" id="kobo.308.2" xmlns="http://www.w3.org/1999/xhtml">In some cases, test cases will need to be added as the definitions expand.</span></p>
<p><span class="koboSpan" id="kobo.309.1" xmlns="http://www.w3.org/1999/xhtml">As we get closer to solving the problem, the number of tests passed will grow.</span></p>
<p><span class="koboSpan" id="kobo.310.1" xmlns="http://www.w3.org/1999/xhtml">The number of tests may also grow. </span><span class="koboSpan" id="kobo.310.2" xmlns="http://www.w3.org/1999/xhtml">It’s common to realize the sketch of a class definition is incomplete and requires additional </span><span id="dx1-24002"/><span class="koboSpan" id="kobo.311.1" xmlns="http://www.w3.org/1999/xhtml">classes to implement the </span><strong><span class="koboSpan" id="kobo.312.1" xmlns="http://www.w3.org/1999/xhtml">State </span></strong><span class="koboSpan" id="kobo.313.1" xmlns="http://www.w3.org/1999/xhtml">or </span><strong><span class="koboSpan" id="kobo.314.1" xmlns="http://www.w3.org/1999/xhtml">Strategy </span></strong><span class="koboSpan" id="kobo.315.1" xmlns="http://www.w3.org/1999/xhtml">design pattern. </span><span class="koboSpan" id="kobo.315.2" xmlns="http://www.w3.org/1999/xhtml">As another example, we may realize subclasses </span><span id="dx1-24003"/><span class="koboSpan" id="kobo.316.1" xmlns="http://www.w3.org/1999/xhtml">are required to handle special cases. </span><span class="koboSpan" id="kobo.316.2" xmlns="http://www.w3.org/1999/xhtml">This new understanding will change the test suite.</span></p>
<p><span class="koboSpan" id="kobo.317.1" xmlns="http://www.w3.org/1999/xhtml">When we look at our progress over several days, we should see that the number of tests pass approaches the total number of tests.</span></p>
<p><span class="koboSpan" id="kobo.318.1" xmlns="http://www.w3.org/1999/xhtml">How many tests do we need? </span><span class="koboSpan" id="kobo.318.2" xmlns="http://www.w3.org/1999/xhtml">There are strong opinions here. </span><span class="koboSpan" id="kobo.318.3" xmlns="http://www.w3.org/1999/xhtml">For the purposes of showing high-quality work, tests that exercise 100% of the code are a good starting point. </span><span class="koboSpan" id="kobo.318.4" xmlns="http://www.w3.org/1999/xhtml">For some industries, a more strict rule is to cover 100% of the logic paths through the code. </span><span class="koboSpan" id="kobo.318.5" xmlns="http://www.w3.org/1999/xhtml">This higher standard is often used for applications like robotics and health care where the consequences of a software failure may involve injury or death. </span><span id="x1-24004r25"/></p>
</section>
<section class="level3" data-number="5.2.5" id="transition">
<h3 data-number="5.2.5"><span class="titlemark"><span class="koboSpan" id="kobo.319.1" xmlns="http://www.w3.org/1999/xhtml">1.2.5 </span></span> <span id="x1-250005"/><span class="koboSpan" id="kobo.320.1" xmlns="http://www.w3.org/1999/xhtml">Transition</span></h3>
<p><span class="koboSpan" id="kobo.321.1" xmlns="http://www.w3.org/1999/xhtml">For enterprise applications, there is a </span><span id="dx1-25001"/><span class="koboSpan" id="kobo.322.1" xmlns="http://www.w3.org/1999/xhtml">transition from the development team to formal operations. </span><span class="koboSpan" id="kobo.322.2" xmlns="http://www.w3.org/1999/xhtml">This usually means a deployment into a production environment with the real user community and their data.</span></p>
<p><span class="koboSpan" id="kobo.323.1" xmlns="http://www.w3.org/1999/xhtml">In organizations with good Continuous Integration/Continuous Deployment (CI/CD) practices, there will be a formalized execution of the </span><code><span class="koboSpan" id="kobo.324.1" xmlns="http://www.w3.org/1999/xhtml">tox</span></code><span class="koboSpan" id="kobo.325.1" xmlns="http://www.w3.org/1999/xhtml"> command to make sure everything works: all the tests pass.</span></p>
<p><span class="koboSpan" id="kobo.326.1" xmlns="http://www.w3.org/1999/xhtml">In some enterprises, the </span><code><span class="koboSpan" id="kobo.327.1" xmlns="http://www.w3.org/1999/xhtml">make</span></code><code><span class="koboSpan" id="kobo.328.1" xmlns="http://www.w3.org/1999/xhtml"> html</span></code><span class="koboSpan" id="kobo.329.1" xmlns="http://www.w3.org/1999/xhtml"> command will also be run to create the documentation.</span></p>
<p><span class="koboSpan" id="kobo.330.1" xmlns="http://www.w3.org/1999/xhtml">Often, the technical operations team will need specific topics in the documentation and the </span><code><span class="koboSpan" id="kobo.331.1" xmlns="http://www.w3.org/1999/xhtml">README.md</span></code><span class="koboSpan" id="kobo.332.1" xmlns="http://www.w3.org/1999/xhtml"> file. </span><span class="koboSpan" id="kobo.332.2" xmlns="http://www.w3.org/1999/xhtml">Operations staff may have to diagnose and troubleshoot problems with hundreds of applications, and they will need very specific advice in places where they can find it immediately. </span><span class="koboSpan" id="kobo.332.3" xmlns="http://www.w3.org/1999/xhtml">We won’t emphasize this in this book, but as we complete our projects, it’s important to think that our colleagues will be using this software, and we want their work life to be pleasant and productive.</span></p>
<p><span class="koboSpan" id="kobo.333.1" xmlns="http://www.w3.org/1999/xhtml">The final step is to post your project to your public repository of choice.</span></p>
<p><span class="koboSpan" id="kobo.334.1" xmlns="http://www.w3.org/1999/xhtml">You have completed part of your portfolio. </span><span class="koboSpan" id="kobo.334.2" xmlns="http://www.w3.org/1999/xhtml">You’ll want potential business partners or hiring managers or investors to see this and recognize your level of skill.</span></p>
<p><span class="koboSpan" id="kobo.335.1" xmlns="http://www.w3.org/1999/xhtml">We can view a project as a sequence of steps. </span><span class="koboSpan" id="kobo.335.2" xmlns="http://www.w3.org/1999/xhtml">We can also view a project as a deliverable set of files created by those steps. </span><span class="koboSpan" id="kobo.335.3" xmlns="http://www.w3.org/1999/xhtml">In the next section, we’ll look over the deliverables in a little more detail. </span><span id="x1-25002r20"/></p>
</section>
</section>
<section class="level2" data-number="5.3" id="list-of-deliverables">
<h2 data-number="5.3"><span class="titlemark"><span class="koboSpan" id="kobo.336.1" xmlns="http://www.w3.org/1999/xhtml">1.3 </span></span> <span id="x1-260003"/><span class="koboSpan" id="kobo.337.1" xmlns="http://www.w3.org/1999/xhtml">List of deliverables</span></h2>
<p><span class="koboSpan" id="kobo.338.1" xmlns="http://www.w3.org/1999/xhtml">We’ll take another look at the project, this time from the view of what files will be created. </span><span class="koboSpan" id="kobo.338.2" xmlns="http://www.w3.org/1999/xhtml">This will parallel the </span><span id="dx1-26001"/><span class="koboSpan" id="kobo.339.1" xmlns="http://www.w3.org/1999/xhtml">outline of the activities shown in the previous section.</span></p>
<p><span class="koboSpan" id="kobo.340.1" xmlns="http://www.w3.org/1999/xhtml">The following outline shows many of the files in a completed project:</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.341.1" xmlns="http://www.w3.org/1999/xhtml">The documentation in the </span><code><span class="koboSpan" id="kobo.342.1" xmlns="http://www.w3.org/1999/xhtml">docs</span></code><span class="koboSpan" id="kobo.343.1" xmlns="http://www.w3.org/1999/xhtml"> directory. </span><span class="koboSpan" id="kobo.343.2" xmlns="http://www.w3.org/1999/xhtml">There will be other files in there, but you’ll be focused on the following files:</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.344.1" xmlns="http://www.w3.org/1999/xhtml">The Sphinx </span><code><span class="koboSpan" id="kobo.345.1" xmlns="http://www.w3.org/1999/xhtml">index.rst</span></code><span class="koboSpan" id="kobo.346.1" xmlns="http://www.w3.org/1999/xhtml"> starter file with references to overview and API sections.</span></p></li>
<li><p><span class="koboSpan" id="kobo.347.1" xmlns="http://www.w3.org/1999/xhtml">An </span><code><span class="koboSpan" id="kobo.348.1" xmlns="http://www.w3.org/1999/xhtml">overview.rst</span></code><span class="koboSpan" id="kobo.349.1" xmlns="http://www.w3.org/1999/xhtml"> section with a summary of the project.</span></p></li>
<li><p><span class="koboSpan" id="kobo.350.1" xmlns="http://www.w3.org/1999/xhtml">An </span><code><span class="koboSpan" id="kobo.351.1" xmlns="http://www.w3.org/1999/xhtml">api.rst</span></code><span class="koboSpan" id="kobo.352.1" xmlns="http://www.w3.org/1999/xhtml"> section with </span><code><span class="koboSpan" id="kobo.353.1" xmlns="http://www.w3.org/1999/xhtml">..</span></code><code><span class="koboSpan" id="kobo.354.1" xmlns="http://www.w3.org/1999/xhtml"> automodule::</span></code><span class="koboSpan" id="kobo.355.1" xmlns="http://www.w3.org/1999/xhtml"> commands to pull in documentation from the application.</span></p></li>
</ul></li>
<li><p><span class="koboSpan" id="kobo.356.1" xmlns="http://www.w3.org/1999/xhtml">A set of test cases in the </span><code><span class="koboSpan" id="kobo.357.1" xmlns="http://www.w3.org/1999/xhtml">tests</span></code><span class="koboSpan" id="kobo.358.1" xmlns="http://www.w3.org/1999/xhtml"> directory.</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.359.1" xmlns="http://www.w3.org/1999/xhtml">Acceptance tests aimed at Behave (or the </span><strong><span class="koboSpan" id="kobo.360.1" xmlns="http://www.w3.org/1999/xhtml">pytest-bdd </span></strong><span class="koboSpan" id="kobo.361.1" xmlns="http://www.w3.org/1999/xhtml">plug-in for Gherkin). </span><span class="koboSpan" id="kobo.361.2" xmlns="http://www.w3.org/1999/xhtml">When using Behave, there will be two sub-directories: a </span><code><span class="koboSpan" id="kobo.362.1" xmlns="http://www.w3.org/1999/xhtml">features</span></code><span class="koboSpan" id="kobo.363.1" xmlns="http://www.w3.org/1999/xhtml"> directory and a </span><code><span class="koboSpan" id="kobo.364.1" xmlns="http://www.w3.org/1999/xhtml">steps</span></code><span class="koboSpan" id="kobo.365.1" xmlns="http://www.w3.org/1999/xhtml"> directory. </span><span class="koboSpan" id="kobo.365.2" xmlns="http://www.w3.org/1999/xhtml">Additionally, there will be an </span><code><span class="koboSpan" id="kobo.366.1" xmlns="http://www.w3.org/1999/xhtml">environment.py</span></code><span class="koboSpan" id="kobo.367.1" xmlns="http://www.w3.org/1999/xhtml"> file.</span></p></li>
<li><p><span class="koboSpan" id="kobo.368.1" xmlns="http://www.w3.org/1999/xhtml">Unit test modules written with the </span><strong><span class="koboSpan" id="kobo.369.1" xmlns="http://www.w3.org/1999/xhtml">pytest </span></strong><span class="koboSpan" id="kobo.370.1" xmlns="http://www.w3.org/1999/xhtml">framework. </span><span class="koboSpan" id="kobo.370.2" xmlns="http://www.w3.org/1999/xhtml">These all have a name that starts with </span><code><span class="koboSpan" id="kobo.371.1" xmlns="http://www.w3.org/1999/xhtml">test_</span></code><span class="koboSpan" id="kobo.372.1" xmlns="http://www.w3.org/1999/xhtml"> to make them easy for </span><strong><span class="koboSpan" id="kobo.373.1" xmlns="http://www.w3.org/1999/xhtml">pytest</span></strong><span class="koboSpan" id="kobo.374.1" xmlns="http://www.w3.org/1999/xhtml"> to find. </span><span class="koboSpan" id="kobo.374.2" xmlns="http://www.w3.org/1999/xhtml">Ideally, the </span><strong><span class="koboSpan" id="kobo.375.1" xmlns="http://www.w3.org/1999/xhtml">Coverage </span></strong><span class="koboSpan" id="kobo.376.1" xmlns="http://www.w3.org/1999/xhtml">tool is used to assure 100% of the code is exercised.</span></p></li>
</ul></li>
<li><p><span class="koboSpan" id="kobo.377.1" xmlns="http://www.w3.org/1999/xhtml">The final code in the </span><code><span class="koboSpan" id="kobo.378.1" xmlns="http://www.w3.org/1999/xhtml">src</span></code><span class="koboSpan" id="kobo.379.1" xmlns="http://www.w3.org/1999/xhtml"> directory. </span><span class="koboSpan" id="kobo.379.2" xmlns="http://www.w3.org/1999/xhtml">For some of the projects, a single module will be sufficient. </span><span class="koboSpan" id="kobo.379.3" xmlns="http://www.w3.org/1999/xhtml">Other projects will involve a few modules. </span><span class="koboSpan" id="kobo.379.4" xmlns="http://www.w3.org/1999/xhtml">(Developers familiar with Java or C++ often create too many modules here. </span><span class="koboSpan" id="kobo.379.5" xmlns="http://www.w3.org/1999/xhtml">The Python concept of </span><em><span class="koboSpan" id="kobo.380.1" xmlns="http://www.w3.org/1999/xhtml">module </span></em><span class="koboSpan" id="kobo.381.1" xmlns="http://www.w3.org/1999/xhtml">is more akin to the Java concept of </span><em><span class="koboSpan" id="kobo.382.1" xmlns="http://www.w3.org/1999/xhtml">package</span></em><span class="koboSpan" id="kobo.383.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.383.2" xmlns="http://www.w3.org/1999/xhtml">It’s not common Python practice to put each class definition into a separate module file.)</span></p></li>
<li><p><span class="koboSpan" id="kobo.384.1" xmlns="http://www.w3.org/1999/xhtml">Any JupyterLab notebooks can be in the </span><code><span class="koboSpan" id="kobo.385.1" xmlns="http://www.w3.org/1999/xhtml">notebooks</span></code><span class="koboSpan" id="kobo.386.1" xmlns="http://www.w3.org/1999/xhtml"> folder. </span><span class="koboSpan" id="kobo.386.2" xmlns="http://www.w3.org/1999/xhtml">Not all projects use JupyterLab notebooks, so this folder can be omitted if there are no notebooks.</span></p></li>
<li><p><span class="koboSpan" id="kobo.387.1" xmlns="http://www.w3.org/1999/xhtml">A few other project files are in the top-level directory.</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.388.1" xmlns="http://www.w3.org/1999/xhtml">A </span><code><span class="koboSpan" id="kobo.389.1" xmlns="http://www.w3.org/1999/xhtml">tox.ini</span></code><span class="koboSpan" id="kobo.390.1" xmlns="http://www.w3.org/1999/xhtml"> file should be used to run the </span><strong><span class="koboSpan" id="kobo.391.1" xmlns="http://www.w3.org/1999/xhtml">pytest </span></strong><span class="koboSpan" id="kobo.392.1" xmlns="http://www.w3.org/1999/xhtml">and </span><strong><span class="koboSpan" id="kobo.393.1" xmlns="http://www.w3.org/1999/xhtml">behave</span></strong><span class="koboSpan" id="kobo.394.1" xmlns="http://www.w3.org/1999/xhtml"> test suites.</span></p></li>
<li><p><span class="koboSpan" id="kobo.395.1" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.396.1" xmlns="http://www.w3.org/1999/xhtml">pyproject.toml</span></code><span class="koboSpan" id="kobo.397.1" xmlns="http://www.w3.org/1999/xhtml"> provides a number of pieces of information about the project. </span><span class="koboSpan" id="kobo.397.2" xmlns="http://www.w3.org/1999/xhtml">This includes a detailed list of packages and version numbers to be installed to run the project, as well as the packages required for development and testing. </span><span class="koboSpan" id="kobo.397.3" xmlns="http://www.w3.org/1999/xhtml">With this in place, the </span><strong><span class="koboSpan" id="kobo.398.1" xmlns="http://www.w3.org/1999/xhtml">tox </span></strong><span class="koboSpan" id="kobo.399.1" xmlns="http://www.w3.org/1999/xhtml">tool can then build virtual environments using the </span><code><span class="koboSpan" id="kobo.400.1" xmlns="http://www.w3.org/1999/xhtml">requirements.txt</span></code><span class="koboSpan" id="kobo.401.1" xmlns="http://www.w3.org/1999/xhtml"> or the </span><strong><span class="koboSpan" id="kobo.402.1" xmlns="http://www.w3.org/1999/xhtml">pip-tools </span></strong><span class="koboSpan" id="kobo.403.1" xmlns="http://www.w3.org/1999/xhtml">tool to test the project. </span><span class="koboSpan" id="kobo.403.2" xmlns="http://www.w3.org/1999/xhtml">As a practical matter, this will also be used by other developers to create their working desktop environment.</span></p></li>
<li><p><span class="koboSpan" id="kobo.404.1" xmlns="http://www.w3.org/1999/xhtml">An </span><code><span class="koboSpan" id="kobo.405.1" xmlns="http://www.w3.org/1999/xhtml">environment.yml</span></code><span class="koboSpan" id="kobo.406.1" xmlns="http://www.w3.org/1999/xhtml"> can help other developers use </span><strong><span class="koboSpan" id="kobo.407.1" xmlns="http://www.w3.org/1999/xhtml">conda</span></strong><span class="koboSpan" id="kobo.408.1" xmlns="http://www.w3.org/1999/xhtml"> to create their environment. </span><span class="koboSpan" id="kobo.408.2" xmlns="http://www.w3.org/1999/xhtml">This will repeat the contents of </span><code><span class="koboSpan" id="kobo.409.1" xmlns="http://www.w3.org/1999/xhtml">requirements-dev.txt</span></code><span class="koboSpan" id="kobo.410.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.410.2" xmlns="http://www.w3.org/1999/xhtml">For a small team, it isn’t helpful. </span><span class="koboSpan" id="kobo.410.3" xmlns="http://www.w3.org/1999/xhtml">In larger enterprise work groups, however, this can help others join your project.</span></p></li>
<li><p><span class="koboSpan" id="kobo.411.1" xmlns="http://www.w3.org/1999/xhtml">Also, a </span><code><span class="koboSpan" id="kobo.412.1" xmlns="http://www.w3.org/1999/xhtml">README.md</span></code><span class="koboSpan" id="kobo.413.1" xmlns="http://www.w3.org/1999/xhtml"> (or </span><code><span class="koboSpan" id="kobo.414.1" xmlns="http://www.w3.org/1999/xhtml">README.rst</span></code><span class="koboSpan" id="kobo.415.1" xmlns="http://www.w3.org/1999/xhtml">) with a summary is essential. </span><span class="koboSpan" id="kobo.415.2" xmlns="http://www.w3.org/1999/xhtml">In many cases, this is the first thing people look at; it needs to provide an ”elevator pitch” for the project (see </span><a class="url" href="https://www.atlassian.com/team-playbook/plays/elevator-pitch"><span class="koboSpan" id="kobo.416.1" xmlns="http://www.w3.org/1999/xhtml">https://www.atlassian.com/team-playbook/plays/elevator-pitch</span></a><span class="koboSpan" id="kobo.417.1" xmlns="http://www.w3.org/1999/xhtml">).</span></p></li>
</ul></li>
</ul>
<p><span class="koboSpan" id="kobo.418.1" xmlns="http://www.w3.org/1999/xhtml">See </span><a class="url" href="https://github.com/cmawer/reproducible-model"><span class="koboSpan" id="kobo.419.1" xmlns="http://www.w3.org/1999/xhtml">https://github.com/cmawer/reproducible-model</span></a><span class="koboSpan" id="kobo.420.1" xmlns="http://www.w3.org/1999/xhtml"> for additional advice on structuring complex projects.</span></p>
<p><span class="koboSpan" id="kobo.421.1" xmlns="http://www.w3.org/1999/xhtml">We’ve presented the files in this order to encourage following an approach of writing documentation first. </span><span class="koboSpan" id="kobo.421.2" xmlns="http://www.w3.org/1999/xhtml">This is followed by creating test cases to assure the documentation will be satisfied by the programming.</span></p>
<p><span class="koboSpan" id="kobo.422.1" xmlns="http://www.w3.org/1999/xhtml">We’ve looked at the development activities and a review of the products to be created. </span><span class="koboSpan" id="kobo.422.2" xmlns="http://www.w3.org/1999/xhtml">In the next section, we’ll look at some suggested development tools. </span><span id="x1-26002r27"/></p>
</section>
<section class="level2" data-number="5.4" id="development-tool-installation">
<h2 data-number="5.4"><span class="titlemark"><span class="koboSpan" id="kobo.423.1" xmlns="http://www.w3.org/1999/xhtml">1.4 </span></span> <span id="x1-270004"/><span class="koboSpan" id="kobo.424.1" xmlns="http://www.w3.org/1999/xhtml">Development tool installation</span></h2>
<p><span class="koboSpan" id="kobo.425.1" xmlns="http://www.w3.org/1999/xhtml">Many of the projects in this book are focused on data analysis. </span><span class="koboSpan" id="kobo.425.2" xmlns="http://www.w3.org/1999/xhtml">The tooling for data analysis is often easiest to install with the </span><strong><span class="koboSpan" id="kobo.426.1" xmlns="http://www.w3.org/1999/xhtml">conda </span></strong><span class="koboSpan" id="kobo.427.1" xmlns="http://www.w3.org/1999/xhtml">tool. </span><span class="koboSpan" id="kobo.427.2" xmlns="http://www.w3.org/1999/xhtml">This isn’t a requirement, and readers familiar with the </span><strong><span class="koboSpan" id="kobo.428.1" xmlns="http://www.w3.org/1999/xhtml">PIP </span></strong><span class="koboSpan" id="kobo.429.1" xmlns="http://www.w3.org/1999/xhtml">tool will often be able to build their working environments without the help of the </span><strong><span class="koboSpan" id="kobo.430.1" xmlns="http://www.w3.org/1999/xhtml">conda</span></strong><span class="koboSpan" id="kobo.431.1" xmlns="http://www.w3.org/1999/xhtml"> tool.</span></p>
<p><span class="koboSpan" id="kobo.432.1" xmlns="http://www.w3.org/1999/xhtml">We suggest the following tools:</span></p>
<ul>
<li><p><strong><span class="koboSpan" id="kobo.433.1" xmlns="http://www.w3.org/1999/xhtml">Conda </span></strong><span class="koboSpan" id="kobo.434.1" xmlns="http://www.w3.org/1999/xhtml">for installing and configuring each project’s unique virtual environment.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.435.1" xmlns="http://www.w3.org/1999/xhtml">Sphinx </span></strong><span class="koboSpan" id="kobo.436.1" xmlns="http://www.w3.org/1999/xhtml">for writing documentation.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.437.1" xmlns="http://www.w3.org/1999/xhtml">Behave </span></strong><span class="koboSpan" id="kobo.438.1" xmlns="http://www.w3.org/1999/xhtml">for acceptance tests.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.439.1" xmlns="http://www.w3.org/1999/xhtml">Pytest </span></strong><span class="koboSpan" id="kobo.440.1" xmlns="http://www.w3.org/1999/xhtml">for unit tests. </span><span class="koboSpan" id="kobo.440.2" xmlns="http://www.w3.org/1999/xhtml">The </span><strong><span class="koboSpan" id="kobo.441.1" xmlns="http://www.w3.org/1999/xhtml">pytest-cov </span></strong><span class="koboSpan" id="kobo.442.1" xmlns="http://www.w3.org/1999/xhtml">plug-in can help to compute test coverage.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.443.1" xmlns="http://www.w3.org/1999/xhtml">Pip-Tool </span></strong><span class="koboSpan" id="kobo.444.1" xmlns="http://www.w3.org/1999/xhtml">for building a few working files from the </span><code><span class="koboSpan" id="kobo.445.1" xmlns="http://www.w3.org/1999/xhtml">pyproject.toml</span></code><span class="koboSpan" id="kobo.446.1" xmlns="http://www.w3.org/1999/xhtml"> project definition.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.447.1" xmlns="http://www.w3.org/1999/xhtml">Tox </span></strong><span class="koboSpan" id="kobo.448.1" xmlns="http://www.w3.org/1999/xhtml">for running the suite of tests.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.449.1" xmlns="http://www.w3.org/1999/xhtml">Mypy </span></strong><span class="koboSpan" id="kobo.450.1" xmlns="http://www.w3.org/1999/xhtml">for static analysis of the type annotations.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.451.1" xmlns="http://www.w3.org/1999/xhtml">Flake8 </span></strong><span class="koboSpan" id="kobo.452.1" xmlns="http://www.w3.org/1999/xhtml">for static analysis of code, in general, to make sure it follows a consistent style.</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.453.1" xmlns="http://www.w3.org/1999/xhtml">One of the deliverables is the </span><code><span class="koboSpan" id="kobo.454.1" xmlns="http://www.w3.org/1999/xhtml">pyproject.toml</span></code><span class="koboSpan" id="kobo.455.1" xmlns="http://www.w3.org/1999/xhtml"> file. </span><span class="koboSpan" id="kobo.455.2" xmlns="http://www.w3.org/1999/xhtml">This has all of the metadata about the project in a single place. </span><span class="koboSpan" id="kobo.455.3" xmlns="http://www.w3.org/1999/xhtml">It lists packages required by the application, as well as the tools used for development and testing. </span><span class="koboSpan" id="kobo.455.4" xmlns="http://www.w3.org/1999/xhtml">It helps to pin exact version numbers, making it easier for someone to rebuild the virtual environment.</span></p>
<p><span class="koboSpan" id="kobo.456.1" xmlns="http://www.w3.org/1999/xhtml">Some Python tools — like PIP — work with files derived from the </span><code><span class="koboSpan" id="kobo.457.1" xmlns="http://www.w3.org/1999/xhtml">pyproject.toml</span></code><span class="koboSpan" id="kobo.458.1" xmlns="http://www.w3.org/1999/xhtml"> file. </span><span class="koboSpan" id="kobo.458.2" xmlns="http://www.w3.org/1999/xhtml">The </span><strong><span class="koboSpan" id="kobo.459.1" xmlns="http://www.w3.org/1999/xhtml">pip-tools </span></strong><span class="koboSpan" id="kobo.460.1" xmlns="http://www.w3.org/1999/xhtml">creates these derived files from the source information in the TOML file.</span></p>
<p><span class="koboSpan" id="kobo.461.1" xmlns="http://www.w3.org/1999/xhtml">For example, we might use the following output to extract the development tools information from </span><code><span class="koboSpan" id="kobo.462.1" xmlns="http://www.w3.org/1999/xhtml">pyproject.toml</span></code><span class="koboSpan" id="kobo.463.1" xmlns="http://www.w3.org/1999/xhtml"> and write it to </span><code><span class="koboSpan" id="kobo.464.1" xmlns="http://www.w3.org/1999/xhtml">requirements-dev.txt</span></code><span class="koboSpan" id="kobo.465.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-9">
<div class="tcolorbox-content">
<pre class="console"><span class="koboSpan" id="kobo.466.1" xmlns="http://www.w3.org/1999/xhtml">% conda install -c conda-forge pip-tools
% pip-compile --extra=dev --output-file=requirements-dev.txt</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.467.1" xmlns="http://www.w3.org/1999/xhtml">It’s common practice to then use the </span><code><span class="koboSpan" id="kobo.468.1" xmlns="http://www.w3.org/1999/xhtml">requirements-dev.txt</span></code><span class="koboSpan" id="kobo.469.1" xmlns="http://www.w3.org/1999/xhtml"> to install packages like this:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-10">
<div class="tcolorbox-content">
<pre class="console"><span class="koboSpan" id="kobo.470.1" xmlns="http://www.w3.org/1999/xhtml">% conda install --file requirements-dev.txt --channel=conda-forge</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.471.1" xmlns="http://www.w3.org/1999/xhtml">This will try to install all of the named packages, pulled from the community </span><code><span class="koboSpan" id="kobo.472.1" xmlns="http://www.w3.org/1999/xhtml">conda-forge</span></code><span class="koboSpan" id="kobo.473.1" xmlns="http://www.w3.org/1999/xhtml"> channel.</span></p>
<p><span class="koboSpan" id="kobo.474.1" xmlns="http://www.w3.org/1999/xhtml">Another alternative is to use PIP like this:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-11">
<div class="tcolorbox-content">
<pre class="console"><span class="koboSpan" id="kobo.475.1" xmlns="http://www.w3.org/1999/xhtml">% python -m pip install --r requirements-dev.txt</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.476.1" xmlns="http://www.w3.org/1999/xhtml">This environment preparation is an essential ingredient in each project’s inception phase. </span><span class="koboSpan" id="kobo.476.2" xmlns="http://www.w3.org/1999/xhtml">This means the </span><code><span class="koboSpan" id="kobo.477.1" xmlns="http://www.w3.org/1999/xhtml">pyproject.toml</span></code><span class="koboSpan" id="kobo.478.1" xmlns="http://www.w3.org/1999/xhtml"> is often the first deliverable created. </span><span class="koboSpan" id="kobo.478.2" xmlns="http://www.w3.org/1999/xhtml">From this, the </span><code><span class="koboSpan" id="kobo.479.1" xmlns="http://www.w3.org/1999/xhtml">requirements-dev.txt</span></code><span class="koboSpan" id="kobo.480.1" xmlns="http://www.w3.org/1999/xhtml"> is extracted to build environments.</span></p>
<p><span class="koboSpan" id="kobo.481.1" xmlns="http://www.w3.org/1999/xhtml">To make the preceding steps and deliverables more specific, we’ll walk through an initial project. </span><span class="koboSpan" id="kobo.481.2" xmlns="http://www.w3.org/1999/xhtml">This project will help show how the remaining projects should be completed. </span><span id="x1-27005r28"/></p>
</section>
<section class="level2" data-number="5.5" id="project-0-hello-world-with-test-cases">
<h2 data-number="5.5"><span class="titlemark"><span class="koboSpan" id="kobo.482.1" xmlns="http://www.w3.org/1999/xhtml">1.5 </span></span> <span id="x1-280005"/><span class="koboSpan" id="kobo.483.1" xmlns="http://www.w3.org/1999/xhtml">Project 0 – Hello World with test cases</span></h2>
<p><span class="koboSpan" id="kobo.484.1" xmlns="http://www.w3.org/1999/xhtml">This is our first project. </span><span class="koboSpan" id="kobo.484.2" xmlns="http://www.w3.org/1999/xhtml">This project will demonstrate the pattern for all of the book’s projects. </span><span class="koboSpan" id="kobo.484.3" xmlns="http://www.w3.org/1999/xhtml">It will include these three elements.</span></p>
<ul>
<li><p><strong><span class="koboSpan" id="kobo.485.1" xmlns="http://www.w3.org/1999/xhtml">Description</span></strong><span class="koboSpan" id="kobo.486.1" xmlns="http://www.w3.org/1999/xhtml">: The description section will set out a problem, and why a user needs software to solve it. </span><span class="koboSpan" id="kobo.486.2" xmlns="http://www.w3.org/1999/xhtml">In some projects, the description will have very specific details. </span><span class="koboSpan" id="kobo.486.3" xmlns="http://www.w3.org/1999/xhtml">Other projects will require more imagination to create a solution.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.487.1" xmlns="http://www.w3.org/1999/xhtml">Approach</span></strong><span class="koboSpan" id="kobo.488.1" xmlns="http://www.w3.org/1999/xhtml">: The approach section will offer some guidance on architectural and design choices. </span><span class="koboSpan" id="kobo.488.2" xmlns="http://www.w3.org/1999/xhtml">For some projects there are trade-offs, and an </span><strong><span class="koboSpan" id="kobo.489.1" xmlns="http://www.w3.org/1999/xhtml">Extras </span></strong><span class="koboSpan" id="kobo.490.1" xmlns="http://www.w3.org/1999/xhtml">section will explore some of the other choices.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.491.1" xmlns="http://www.w3.org/1999/xhtml">Deliverables</span></strong><span class="koboSpan" id="kobo.492.1" xmlns="http://www.w3.org/1999/xhtml">: The deliverables section lists the expectations for the final application or module. </span><span class="koboSpan" id="kobo.492.2" xmlns="http://www.w3.org/1999/xhtml">It will often provide a few Gherkin feature definitions.</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.493.1" xmlns="http://www.w3.org/1999/xhtml">For this initial project, the description isn’t going to be very complicated. </span><span class="koboSpan" id="kobo.493.2" xmlns="http://www.w3.org/1999/xhtml">Similarly, the approach part of this first project will be brief. </span><span class="koboSpan" id="kobo.493.3" xmlns="http://www.w3.org/1999/xhtml">We’ll dwell on the deliverables with some additional technical discussion. </span><span id="x1-28001r26"/></p>
<section class="level3" data-number="5.5.1" id="description">
<h3 data-number="5.5.1"><span class="titlemark"><span class="koboSpan" id="kobo.494.1" xmlns="http://www.w3.org/1999/xhtml">1.5.1 </span></span> <span id="x1-290001"/><span class="koboSpan" id="kobo.495.1" xmlns="http://www.w3.org/1999/xhtml">Description</span></h3>
<p><span class="koboSpan" id="kobo.496.1" xmlns="http://www.w3.org/1999/xhtml">The problem the users need to solve is how best to bring new developers on board. </span><span class="koboSpan" id="kobo.496.2" xmlns="http://www.w3.org/1999/xhtml">A good onboarding process helps our users by making new members of the team as productive as quickly as possible. </span><span class="koboSpan" id="kobo.496.3" xmlns="http://www.w3.org/1999/xhtml">Additionally, a project like this can be used for experienced members to introduce them to new tools.</span></p>
<p><span class="koboSpan" id="kobo.497.1" xmlns="http://www.w3.org/1999/xhtml">We need to guide our team members in installing the core set of development tools, creating a working module, and then displaying their completed work at the end of a sprint. </span><span class="koboSpan" id="kobo.497.2" xmlns="http://www.w3.org/1999/xhtml">This first project will use the most important tools and assure that everyone has a common understanding of the tools and the deliverables.</span></p>
<p><span class="koboSpan" id="kobo.498.1" xmlns="http://www.w3.org/1999/xhtml">Each developer will build a project to create a small application. </span><span class="koboSpan" id="kobo.498.2" xmlns="http://www.w3.org/1999/xhtml">This application will have a command-line interface (CLI) to write a cheerful greeting.</span></p>
<p><span class="koboSpan" id="kobo.499.1" xmlns="http://www.w3.org/1999/xhtml">The expectations are shown in the following example:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-12">
<div class="tcolorbox-content">
<pre class="console"><span class="koboSpan" id="kobo.500.1" xmlns="http://www.w3.org/1999/xhtml">% python src/hello_world.py --who "World"
Hello, World!</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.501.1" xmlns="http://www.w3.org/1999/xhtml">This example shows how running the application with a command-line parameter of </span><code><span class="koboSpan" id="kobo.502.1" xmlns="http://www.w3.org/1999/xhtml">--who</span></code><code><span class="koboSpan" id="kobo.503.1" xmlns="http://www.w3.org/1999/xhtml"> "world"</span></code><span class="koboSpan" id="kobo.504.1" xmlns="http://www.w3.org/1999/xhtml"> produces a response on the console. </span><span id="x1-29003r30"/></p>
</section>
<section class="level3" data-number="5.5.2" id="approach">
<h3 data-number="5.5.2"><span class="titlemark"><span class="koboSpan" id="kobo.505.1" xmlns="http://www.w3.org/1999/xhtml">1.5.2 </span></span> <span id="x1-300002"/><span class="koboSpan" id="kobo.506.1" xmlns="http://www.w3.org/1999/xhtml">Approach</span></h3>
<p><span class="koboSpan" id="kobo.507.1" xmlns="http://www.w3.org/1999/xhtml">For this project, the objective is to create a Python application module. </span><span class="koboSpan" id="kobo.507.2" xmlns="http://www.w3.org/1999/xhtml">The module will need several internal functions. </span><span class="koboSpan" id="kobo.507.3" xmlns="http://www.w3.org/1999/xhtml">The functions can be combined into a class, if that seems more appropriate. </span><span class="koboSpan" id="kobo.507.4" xmlns="http://www.w3.org/1999/xhtml">The functions are these:</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.508.1" xmlns="http://www.w3.org/1999/xhtml">A function to parse the command-line options. </span><span class="koboSpan" id="kobo.508.2" xmlns="http://www.w3.org/1999/xhtml">This will use the </span><code><span class="koboSpan" id="kobo.509.1" xmlns="http://www.w3.org/1999/xhtml">argparse</span></code><span class="koboSpan" id="kobo.510.1" xmlns="http://www.w3.org/1999/xhtml"> module. </span><span class="koboSpan" id="kobo.510.2" xmlns="http://www.w3.org/1999/xhtml">The default command-line argument values are available in </span><code><span class="koboSpan" id="kobo.511.1" xmlns="http://www.w3.org/1999/xhtml">sys.argv</span></code><span class="koboSpan" id="kobo.512.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p></li>
<li><p><span class="koboSpan" id="kobo.513.1" xmlns="http://www.w3.org/1999/xhtml">A function to write a cheerful greeting. </span><span class="koboSpan" id="kobo.513.2" xmlns="http://www.w3.org/1999/xhtml">This is, perhaps, only a single line of code.</span></p></li>
<li><p><span class="koboSpan" id="kobo.514.1" xmlns="http://www.w3.org/1999/xhtml">An overall function with an obvious name like </span><code><span class="koboSpan" id="kobo.515.1" xmlns="http://www.w3.org/1999/xhtml">main()</span></code><span class="koboSpan" id="kobo.516.1" xmlns="http://www.w3.org/1999/xhtml"> to get the options and write the greeting.</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.517.1" xmlns="http://www.w3.org/1999/xhtml">The module, as a whole, will have the function (or class) definitions. </span><span class="koboSpan" id="kobo.517.2" xmlns="http://www.w3.org/1999/xhtml">It will also have an </span><code><span class="koboSpan" id="kobo.518.1" xmlns="http://www.w3.org/1999/xhtml">if</span></code><code><span class="koboSpan" id="kobo.519.1" xmlns="http://www.w3.org/1999/xhtml"> __name__</span></code><code><span class="koboSpan" id="kobo.520.1" xmlns="http://www.w3.org/1999/xhtml"> ==</span></code><code><span class="koboSpan" id="kobo.521.1" xmlns="http://www.w3.org/1999/xhtml"> "__main__":</span></code><span class="koboSpan" id="kobo.522.1" xmlns="http://www.w3.org/1999/xhtml"> block. </span><span class="koboSpan" id="kobo.522.2" xmlns="http://www.w3.org/1999/xhtml">This block will guard the evaluation of the expression </span><code><span class="koboSpan" id="kobo.523.1" xmlns="http://www.w3.org/1999/xhtml">main()</span></code><span class="koboSpan" id="kobo.524.1" xmlns="http://www.w3.org/1999/xhtml"> to make the module easier to unit test.</span></p>
<div class="tcolorbox tipbox" id="tcolobox-13">
<div class="tcolorbox-content">
<p><span class="koboSpan" id="kobo.525.1" xmlns="http://www.w3.org/1999/xhtml">This is quite a bit of engineering for a simple problem. </span><span class="koboSpan" id="kobo.525.2" xmlns="http://www.w3.org/1999/xhtml">Some might call it over-engineering. </span><span class="koboSpan" id="kobo.525.3" xmlns="http://www.w3.org/1999/xhtml">The idea is to create something with enough complexity that more than one unit test case is required.</span></p>
</div>
</div>
<p><span id="x1-30001r31"/></p>
</section>
<section class="level3" data-number="5.5.3" id="deliverables">
<h3 data-number="5.5.3"><span class="titlemark"><span class="koboSpan" id="kobo.526.1" xmlns="http://www.w3.org/1999/xhtml">1.5.3 </span></span> <span id="x1-310003"/><span class="koboSpan" id="kobo.527.1" xmlns="http://www.w3.org/1999/xhtml">Deliverables</span></h3>
<p><span class="koboSpan" id="kobo.528.1" xmlns="http://www.w3.org/1999/xhtml">As noted above in </span><a href="#x1-260003"><em><span class="koboSpan" id="kobo.529.1" xmlns="http://www.w3.org/1999/xhtml">List of deliverables</span></em></a><span class="koboSpan" id="kobo.530.1" xmlns="http://www.w3.org/1999/xhtml">, there are a number of deliverable files for projects in general. </span><span class="koboSpan" id="kobo.530.2" xmlns="http://www.w3.org/1999/xhtml">Here are the suggested files for this project:</span></p>
<ul>
<li><p><code><span class="koboSpan" id="kobo.531.1" xmlns="http://www.w3.org/1999/xhtml">README.md</span></code><span class="koboSpan" id="kobo.532.1" xmlns="http://www.w3.org/1999/xhtml"> summarizes the project.</span></p></li>
<li><p><code><span class="koboSpan" id="kobo.533.1" xmlns="http://www.w3.org/1999/xhtml">pyproject.toml</span></code><span class="koboSpan" id="kobo.534.1" xmlns="http://www.w3.org/1999/xhtml"> defines the project, including development tools, test tools, and other dependencies.</span></p></li>
<li><p><code><span class="koboSpan" id="kobo.535.1" xmlns="http://www.w3.org/1999/xhtml">docs</span></code><span class="koboSpan" id="kobo.536.1" xmlns="http://www.w3.org/1999/xhtml"> contains the documentation. </span><span class="koboSpan" id="kobo.536.2" xmlns="http://www.w3.org/1999/xhtml">As described above, this should be built by the </span><code><span class="koboSpan" id="kobo.537.1" xmlns="http://www.w3.org/1999/xhtml">sphinx-quickstart</span></code><span class="koboSpan" id="kobo.538.1" xmlns="http://www.w3.org/1999/xhtml"> tool and should contain at least an overview and an API section.</span></p></li>
<li><p><code><span class="koboSpan" id="kobo.539.1" xmlns="http://www.w3.org/1999/xhtml">tests</span></code><span class="koboSpan" id="kobo.540.1" xmlns="http://www.w3.org/1999/xhtml"> contains test cases; the files include the following:</span></p>
<ul>
<li><p><code><span class="koboSpan" id="kobo.541.1" xmlns="http://www.w3.org/1999/xhtml">test_hw.py</span></code><span class="koboSpan" id="kobo.542.1" xmlns="http://www.w3.org/1999/xhtml"> contains unit tests for the module’s functions or classes.</span></p></li>
<li><p><code><span class="koboSpan" id="kobo.543.1" xmlns="http://www.w3.org/1999/xhtml">features/hello_world.feature</span></code><span class="koboSpan" id="kobo.544.1" xmlns="http://www.w3.org/1999/xhtml"> has an overall acceptance test as a collection of scenarios.</span></p></li>
<li><p><code><span class="koboSpan" id="kobo.545.1" xmlns="http://www.w3.org/1999/xhtml">steps/hw_cli.py</span></code><span class="koboSpan" id="kobo.546.1" xmlns="http://www.w3.org/1999/xhtml"> has Python definitions for the steps in the scenarios.</span></p></li>
<li><p><code><span class="koboSpan" id="kobo.547.1" xmlns="http://www.w3.org/1999/xhtml">environment.py</span></code><span class="koboSpan" id="kobo.548.1" xmlns="http://www.w3.org/1999/xhtml"> contains functions to control </span><strong><span class="koboSpan" id="kobo.549.1" xmlns="http://www.w3.org/1999/xhtml">behave</span></strong><span class="koboSpan" id="kobo.550.1" xmlns="http://www.w3.org/1999/xhtml">’s test setup and teardown. </span><span class="koboSpan" id="kobo.550.2" xmlns="http://www.w3.org/1999/xhtml">For simple projects, it may be empty.</span></p></li>
</ul></li>
<li><p><code><span class="koboSpan" id="kobo.551.1" xmlns="http://www.w3.org/1999/xhtml">tox.ini</span></code><span class="koboSpan" id="kobo.552.1" xmlns="http://www.w3.org/1999/xhtml"> configuration for the </span><strong><span class="koboSpan" id="kobo.553.1" xmlns="http://www.w3.org/1999/xhtml">tox </span></strong><span class="koboSpan" id="kobo.554.1" xmlns="http://www.w3.org/1999/xhtml">tool to run the complete test suite.</span></p></li>
<li><p><code><span class="koboSpan" id="kobo.555.1" xmlns="http://www.w3.org/1999/xhtml">src</span></code><span class="koboSpan" id="kobo.556.1" xmlns="http://www.w3.org/1999/xhtml"> contains the </span><code><span class="koboSpan" id="kobo.557.1" xmlns="http://www.w3.org/1999/xhtml">hello_world.py</span></code><span class="koboSpan" id="kobo.558.1" xmlns="http://www.w3.org/1999/xhtml"> module.</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.559.1" xmlns="http://www.w3.org/1999/xhtml">We’ll look at a few of these files in detail in the following sub-sections.</span></p>
<section class="level4 likesubsubsectionHead" data-number="5.5.3.1" id="the-pyproject.toml-project-file">
<h4 class="likesubsubsectionHead" data-number="5.5.3.1"><span id="x1-320003"/><span class="koboSpan" id="kobo.560.1" xmlns="http://www.w3.org/1999/xhtml">The pyproject.toml project file</span></h4>
<p><span class="koboSpan" id="kobo.561.1" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.562.1" xmlns="http://www.w3.org/1999/xhtml">pyproject.toml</span></code><span class="koboSpan" id="kobo.563.1" xmlns="http://www.w3.org/1999/xhtml"> file contains a great deal of project metadata in a single location. </span><span class="koboSpan" id="kobo.563.2" xmlns="http://www.w3.org/1999/xhtml">The minimal content of this file is a description of the ”build-system” used to build and install the package.</span></p>
<p><span class="koboSpan" id="kobo.564.1" xmlns="http://www.w3.org/1999/xhtml">For the purposes of this book, we can use the following two lines to define the build system:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-14">
<div class="tcolorbox-content">
<pre class="source-code"><span class="koboSpan" id="kobo.565.1" xmlns="http://www.w3.org/1999/xhtml">[build-system]
requires = ["setuptools", "wheel"]  # PEP 508 specifications.</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.566.1" xmlns="http://www.w3.org/1999/xhtml">This specifies the use of the </span><code><span class="koboSpan" id="kobo.567.1" xmlns="http://www.w3.org/1999/xhtml">setuptools</span></code><span class="koboSpan" id="kobo.568.1" xmlns="http://www.w3.org/1999/xhtml"> module to create a “wheel” with the project’s code. </span><span class="koboSpan" id="kobo.568.2" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.569.1" xmlns="http://www.w3.org/1999/xhtml">pyproject.toml</span></code><span class="koboSpan" id="kobo.570.1" xmlns="http://www.w3.org/1999/xhtml"> doesn’t need to define the distribution package in any more detail. </span><span class="koboSpan" id="kobo.570.2" xmlns="http://www.w3.org/1999/xhtml">This book doesn’t emphasize the creation of a distribution package or the management of packages with the Python Package Index, PyPI.</span></p>
<p><span class="koboSpan" id="kobo.571.1" xmlns="http://www.w3.org/1999/xhtml">The rest of this file should have information about the project. </span><span class="koboSpan" id="kobo.571.2" xmlns="http://www.w3.org/1999/xhtml">You can include a section like the following:</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.572.1" xmlns="http://www.w3.org/1999/xhtml">[project]
name = "project_0"
version = "1.0.0"
authors = [
    {name = "Author", email = "author@email.com"},
]
description = "Real-World Python Projects -- Project 0."
</span><span class="koboSpan" id="kobo.572.2" xmlns="http://www.w3.org/1999/xhtml">readme = "README.md"
requires-python = "&gt;=3.10"</span></pre>
<p><span class="koboSpan" id="kobo.573.1" xmlns="http://www.w3.org/1999/xhtml">Clearly, you’ll want to update the </span><code><span class="koboSpan" id="kobo.574.1" xmlns="http://www.w3.org/1999/xhtml">authors</span></code><span class="koboSpan" id="kobo.575.1" xmlns="http://www.w3.org/1999/xhtml"> section with your information. </span><span class="koboSpan" id="kobo.575.2" xmlns="http://www.w3.org/1999/xhtml">You may be using a newer version of Python and may need to change the </span><code><span class="koboSpan" id="kobo.576.1" xmlns="http://www.w3.org/1999/xhtml">requires-python</span></code><span class="koboSpan" id="kobo.577.1" xmlns="http://www.w3.org/1999/xhtml"> string to specify the minimum version required for your unique solution.</span></p>
<p><span class="koboSpan" id="kobo.578.1" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.579.1" xmlns="http://www.w3.org/1999/xhtml">[project]</span></code><span class="koboSpan" id="kobo.580.1" xmlns="http://www.w3.org/1999/xhtml"> section needs three other pieces of information:</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.581.1" xmlns="http://www.w3.org/1999/xhtml">The packages required to execute your application.</span></p></li>
<li><p><span class="koboSpan" id="kobo.582.1" xmlns="http://www.w3.org/1999/xhtml">Any packages or tools required to test your application.</span></p></li>
<li><p><span class="koboSpan" id="kobo.583.1" xmlns="http://www.w3.org/1999/xhtml">Any packages or tools required to develop your application.</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.584.1" xmlns="http://www.w3.org/1999/xhtml">These three dependencies are organized as follows:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-15">
<div class="tcolorbox-content">
<pre class="source-code"><span class="koboSpan" id="kobo.585.1" xmlns="http://www.w3.org/1999/xhtml">dependencies = [
    # Packages required -- None for Project Zero.
</span><span class="koboSpan" id="kobo.585.2" xmlns="http://www.w3.org/1999/xhtml">]
[project.optional-dependencies]
dev = [
    # Development tools to work on this project
    "sphinx==7.0.1",
    "sphinxcontrib-plantuml==0.25",
    "pip-tools==6.13.0"
]
test = [
    # Testing tools to test this project
    "pytest==7.2.0",
    "tox==4.0.8",
    "behave==1.2.6"
]</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.586.1" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.587.1" xmlns="http://www.w3.org/1999/xhtml">dependencies</span></code><span class="koboSpan" id="kobo.588.1" xmlns="http://www.w3.org/1999/xhtml"> line lists the dependencies required to execute the application. </span><span class="koboSpan" id="kobo.588.2" xmlns="http://www.w3.org/1999/xhtml">Some projects — like this one — rely on the standard library, and nothing more needs to be added. </span><span class="koboSpan" id="kobo.588.3" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.589.1" xmlns="http://www.w3.org/1999/xhtml">[project.optional-dependencies]</span></code><span class="koboSpan" id="kobo.590.1" xmlns="http://www.w3.org/1999/xhtml"> section contains two lists of additional packages: those required for development, and those required for testing.</span></p>
<p><span class="koboSpan" id="kobo.591.1" xmlns="http://www.w3.org/1999/xhtml">Note that we’ve put specific version numbers in this file so that we can be absolutely certain what packages will be used. </span><span class="koboSpan" id="kobo.591.2" xmlns="http://www.w3.org/1999/xhtml">As these packages evolve, we’ll need to test newer versions and upgrade the dependencies.</span></p>
<p><span class="koboSpan" id="kobo.592.1" xmlns="http://www.w3.org/1999/xhtml">If you see the version numbers in this book are behind the current state of the art on PyPI or Conda-Forge, feel free to use up-to-date versions.</span></p>
<p><span class="koboSpan" id="kobo.593.1" xmlns="http://www.w3.org/1999/xhtml">It helps to use the </span><strong><span class="koboSpan" id="kobo.594.1" xmlns="http://www.w3.org/1999/xhtml">pip-compile </span></strong><span class="koboSpan" id="kobo.595.1" xmlns="http://www.w3.org/1999/xhtml">command. </span><span class="koboSpan" id="kobo.595.2" xmlns="http://www.w3.org/1999/xhtml">This is installed as part of </span><strong><span class="koboSpan" id="kobo.596.1" xmlns="http://www.w3.org/1999/xhtml">pip-tools</span></strong><span class="koboSpan" id="kobo.597.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.597.2" xmlns="http://www.w3.org/1999/xhtml">This command create extract files from the </span><code><span class="koboSpan" id="kobo.598.1" xmlns="http://www.w3.org/1999/xhtml">pyproject.toml</span></code><span class="koboSpan" id="kobo.599.1" xmlns="http://www.w3.org/1999/xhtml"> file for use by </span><strong><span class="koboSpan" id="kobo.600.1" xmlns="http://www.w3.org/1999/xhtml">pip</span></strong><span class="koboSpan" id="kobo.601.1" xmlns="http://www.w3.org/1999/xhtml"> or </span><strong><span class="koboSpan" id="kobo.602.1" xmlns="http://www.w3.org/1999/xhtml">conda</span></strong><span class="koboSpan" id="kobo.603.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
<p><span class="koboSpan" id="kobo.604.1" xmlns="http://www.w3.org/1999/xhtml">For developers, we often want to install all of the ”extras.” </span><span class="koboSpan" id="kobo.604.2" xmlns="http://www.w3.org/1999/xhtml">This usually means executing the following command to create a </span><code><span class="koboSpan" id="kobo.605.1" xmlns="http://www.w3.org/1999/xhtml">requirements-dev.txt</span></code><span class="koboSpan" id="kobo.606.1" xmlns="http://www.w3.org/1999/xhtml"> file that can be used to build a development environment.</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-16">
<div class="tcolorbox-content">
<pre class="console"><span class="koboSpan" id="kobo.607.1" xmlns="http://www.w3.org/1999/xhtml">% pip-compile --all-extras -o requirements-dev.txt</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.608.1" xmlns="http://www.w3.org/1999/xhtml">In order to run the </span><strong><span class="koboSpan" id="kobo.609.1" xmlns="http://www.w3.org/1999/xhtml">tox </span></strong><span class="koboSpan" id="kobo.610.1" xmlns="http://www.w3.org/1999/xhtml">tool, it’s common to also create a testing-only subset of the required packages and tools. </span><span class="koboSpan" id="kobo.610.2" xmlns="http://www.w3.org/1999/xhtml">Use the following command:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-17">
<div class="tcolorbox-content">
<pre class="console"><span class="koboSpan" id="kobo.611.1" xmlns="http://www.w3.org/1999/xhtml">% pip-compile --extra test -o requirements.txt</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.612.1" xmlns="http://www.w3.org/1999/xhtml">This creates the </span><code><span class="koboSpan" id="kobo.613.1" xmlns="http://www.w3.org/1999/xhtml">requirements.txt</span></code><span class="koboSpan" id="kobo.614.1" xmlns="http://www.w3.org/1999/xhtml"> to be used to detect manage virtual environments used by </span><strong><span class="koboSpan" id="kobo.615.1" xmlns="http://www.w3.org/1999/xhtml">tox </span></strong><span class="koboSpan" id="kobo.616.1" xmlns="http://www.w3.org/1999/xhtml">for testing.</span></p>
</section>
<section class="level4 likesubsubsectionHead" data-number="5.5.3.2" id="the-docs-directory">
<h4 class="likesubsubsectionHead" data-number="5.5.3.2"><span id="x1-330003"/><span class="koboSpan" id="kobo.617.1" xmlns="http://www.w3.org/1999/xhtml">The docs directory</span></h4>
<p><span class="koboSpan" id="kobo.618.1" xmlns="http://www.w3.org/1999/xhtml">As noted above in </span><a href="#x1-200002"><em><span class="koboSpan" id="kobo.619.1" xmlns="http://www.w3.org/1999/xhtml">Suggested project sprints</span></em></a><span class="koboSpan" id="kobo.620.1" xmlns="http://www.w3.org/1999/xhtml"> this directory should be built with </span><code><span class="koboSpan" id="kobo.621.1" xmlns="http://www.w3.org/1999/xhtml">sphinx-quickstart</span></code><span class="koboSpan" id="kobo.622.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.622.2" xmlns="http://www.w3.org/1999/xhtml">After the initial set of files is created, make the following changes:</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.623.1" xmlns="http://www.w3.org/1999/xhtml">Add a </span><code><span class="koboSpan" id="kobo.624.1" xmlns="http://www.w3.org/1999/xhtml">api.rst</span></code><span class="koboSpan" id="kobo.625.1" xmlns="http://www.w3.org/1999/xhtml"> file as a placeholder for the Sphinx-generated API documentation. </span><span class="koboSpan" id="kobo.625.2" xmlns="http://www.w3.org/1999/xhtml">This will use the </span><code><span class="koboSpan" id="kobo.626.1" xmlns="http://www.w3.org/1999/xhtml">..</span></code><code><span class="koboSpan" id="kobo.627.1" xmlns="http://www.w3.org/1999/xhtml"> </span></code><code><span class="koboSpan" id="kobo.628.1" xmlns="http://www.w3.org/1999/xhtml"> automodule::</span></code><span class="koboSpan" id="kobo.629.1" xmlns="http://www.w3.org/1999/xhtml"> directive to extract documentation from your application.</span></p></li>
<li><p><span class="koboSpan" id="kobo.630.1" xmlns="http://www.w3.org/1999/xhtml">Add a </span><code><span class="koboSpan" id="kobo.631.1" xmlns="http://www.w3.org/1999/xhtml">overview.rst</span></code><span class="koboSpan" id="kobo.632.1" xmlns="http://www.w3.org/1999/xhtml"> file with an overview of the project.</span></p></li>
<li><p><span class="koboSpan" id="kobo.633.1" xmlns="http://www.w3.org/1999/xhtml">Update the </span><code><span class="koboSpan" id="kobo.634.1" xmlns="http://www.w3.org/1999/xhtml">index.rst</span></code><span class="koboSpan" id="kobo.635.1" xmlns="http://www.w3.org/1999/xhtml"> to include these two new files in the table of contents.</span></p></li>
<li><p><span class="koboSpan" id="kobo.636.1" xmlns="http://www.w3.org/1999/xhtml">Update the </span><code><span class="koboSpan" id="kobo.637.1" xmlns="http://www.w3.org/1999/xhtml">conf.py</span></code><span class="koboSpan" id="kobo.638.1" xmlns="http://www.w3.org/1999/xhtml"> to append the </span><code><span class="koboSpan" id="kobo.639.1" xmlns="http://www.w3.org/1999/xhtml">src</span></code><span class="koboSpan" id="kobo.640.1" xmlns="http://www.w3.org/1999/xhtml"> directory to </span><code><span class="koboSpan" id="kobo.641.1" xmlns="http://www.w3.org/1999/xhtml">sys.path</span></code><span class="koboSpan" id="kobo.642.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.642.2" xmlns="http://www.w3.org/1999/xhtml">Also, the </span><code><span class="koboSpan" id="kobo.643.1" xmlns="http://www.w3.org/1999/xhtml">sphinx.ext.autodoc</span></code><span class="koboSpan" id="kobo.644.1" xmlns="http://www.w3.org/1999/xhtml"> extension needs to be added to the </span><code><span class="koboSpan" id="kobo.645.1" xmlns="http://www.w3.org/1999/xhtml">extensions</span></code><span class="koboSpan" id="kobo.646.1" xmlns="http://www.w3.org/1999/xhtml"> setting in this file.</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.647.1" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.648.1" xmlns="http://www.w3.org/1999/xhtml">make</span></code><code><span class="koboSpan" id="kobo.649.1" xmlns="http://www.w3.org/1999/xhtml"> html</span></code><span class="koboSpan" id="kobo.650.1" xmlns="http://www.w3.org/1999/xhtml"> command in the </span><code><span class="koboSpan" id="kobo.651.1" xmlns="http://www.w3.org/1999/xhtml">docs</span></code><span class="koboSpan" id="kobo.652.1" xmlns="http://www.w3.org/1999/xhtml"> directory can be used to build the documentation.</span></p>
</section>
<section class="level4 likesubsubsectionHead" data-number="5.5.3.3" id="the-testsfeatureshello_world.feature-file">
<h4 class="likesubsubsectionHead" data-number="5.5.3.3"><span id="x1-340003"/><span class="koboSpan" id="kobo.653.1" xmlns="http://www.w3.org/1999/xhtml">The tests/features/hello_world.feature file</span></h4>
<p><span class="koboSpan" id="kobo.654.1" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.655.1" xmlns="http://www.w3.org/1999/xhtml">features</span></code><span class="koboSpan" id="kobo.656.1" xmlns="http://www.w3.org/1999/xhtml"> directory will have Gherkin-language definitions of the features. </span><span class="koboSpan" id="kobo.656.2" xmlns="http://www.w3.org/1999/xhtml">Each feature file will contain one or more scenarios. </span><span class="koboSpan" id="kobo.656.3" xmlns="http://www.w3.org/1999/xhtml">For larger projects, these files often start with statements lifted from problem descriptions or architectural overviews that are later refined into more detailed steps to describe an application’s behavior.</span></p>
<p><span class="koboSpan" id="kobo.657.1" xmlns="http://www.w3.org/1999/xhtml">For this project, one of the feature files should be </span><code><span class="koboSpan" id="kobo.658.1" xmlns="http://www.w3.org/1999/xhtml">features/hello_world.feature</span></code><span class="koboSpan" id="kobo.659.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.659.2" xmlns="http://www.w3.org/1999/xhtml">The contents of this file should include a description of the feature and at least one scenario. </span><span class="koboSpan" id="kobo.659.3" xmlns="http://www.w3.org/1999/xhtml">It would look like the following example:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-18">
<div class="tcolorbox-content">
<pre class="source-code"><span class="koboSpan" id="kobo.660.1" xmlns="http://www.w3.org/1999/xhtml">Feature: The Cheerful Greeting CLI interface provides a greeting
    to a specific name.

</span><span class="koboSpan" id="kobo.660.2" xmlns="http://www.w3.org/1999/xhtml">Scenario: When requested, the application writes the greeting message.
  </span><span class="koboSpan" id="kobo.660.3" xmlns="http://www.w3.org/1999/xhtml">When we run command "python src/hello_world.py"
  Then output has "Hello, World!"</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.661.1" xmlns="http://www.w3.org/1999/xhtml">There’s no </span><code><span class="koboSpan" id="kobo.662.1" xmlns="http://www.w3.org/1999/xhtml">Given</span></code><span class="koboSpan" id="kobo.663.1" xmlns="http://www.w3.org/1999/xhtml"> step in this scenario; there’s no initialization or preparation required. </span><span class="koboSpan" id="kobo.663.2" xmlns="http://www.w3.org/1999/xhtml">Each of the steps has only a single clause, so there are no </span><code><span class="koboSpan" id="kobo.664.1" xmlns="http://www.w3.org/1999/xhtml">And</span></code><span class="koboSpan" id="kobo.665.1" xmlns="http://www.w3.org/1999/xhtml"> steps, either.</span></p>
<div class="tcolorbox tipbox" id="tcolobox-19">
<div class="tcolorbox-content">
<p><span class="koboSpan" id="kobo.666.1" xmlns="http://www.w3.org/1999/xhtml">This example doesn’t precisely match the example in the description. </span><span class="koboSpan" id="kobo.666.2" xmlns="http://www.w3.org/1999/xhtml">There are two possible reasons for this: one of the two examples is wrong, or, more charitably, this example hints at a second feature.</span></p>
<p><span class="koboSpan" id="kobo.667.1" xmlns="http://www.w3.org/1999/xhtml">The idea implied by this example is there’s a default behavior when no </span><code><span class="koboSpan" id="kobo.668.1" xmlns="http://www.w3.org/1999/xhtml">--who</span></code><span class="koboSpan" id="kobo.669.1" xmlns="http://www.w3.org/1999/xhtml"> command-line option is provided. </span><span class="koboSpan" id="kobo.669.2" xmlns="http://www.w3.org/1999/xhtml">This suggests that a second scenario — one with the </span><code><span class="koboSpan" id="kobo.670.1" xmlns="http://www.w3.org/1999/xhtml">--who</span></code><span class="koboSpan" id="kobo.671.1" xmlns="http://www.w3.org/1999/xhtml"> option should be added for this feature.</span></p>
</div>
</div>
</section>
<section class="level4 likesubsubsectionHead" data-number="5.5.3.4" id="the-testsstepshw_cli.py-module">
<h4 class="likesubsubsectionHead" data-number="5.5.3.4"><span id="x1-350003"/><span class="koboSpan" id="kobo.672.1" xmlns="http://www.w3.org/1999/xhtml">The tests/steps/hw_cli.py module</span></h4>
<p><span class="koboSpan" id="kobo.673.1" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.674.1" xmlns="http://www.w3.org/1999/xhtml">steps</span></code><span class="koboSpan" id="kobo.675.1" xmlns="http://www.w3.org/1999/xhtml"> directory contains modules that define the natural-language phrases in the feature files. </span><span class="koboSpan" id="kobo.675.2" xmlns="http://www.w3.org/1999/xhtml">In the </span><code><span class="koboSpan" id="kobo.676.1" xmlns="http://www.w3.org/1999/xhtml">hello_world.feature</span></code><span class="koboSpan" id="kobo.677.1" xmlns="http://www.w3.org/1999/xhtml"> file the </span><code><span class="koboSpan" id="kobo.678.1" xmlns="http://www.w3.org/1999/xhtml">When</span></code><span class="koboSpan" id="kobo.679.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><code><span class="koboSpan" id="kobo.680.1" xmlns="http://www.w3.org/1999/xhtml">Then</span></code><span class="koboSpan" id="kobo.681.1" xmlns="http://www.w3.org/1999/xhtml"> steps had phrases written out in plain English:</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.682.1" xmlns="http://www.w3.org/1999/xhtml">We run the command ”</span><code><span class="koboSpan" id="kobo.683.1" xmlns="http://www.w3.org/1999/xhtml">python</span></code><code><span class="koboSpan" id="kobo.684.1" xmlns="http://www.w3.org/1999/xhtml"> src/hello_world.py</span></code><span class="koboSpan" id="kobo.685.1" xmlns="http://www.w3.org/1999/xhtml">”</span></p></li>
<li><p><span class="koboSpan" id="kobo.686.1" xmlns="http://www.w3.org/1999/xhtml">Output has ”</span><code><span class="koboSpan" id="kobo.687.1" xmlns="http://www.w3.org/1999/xhtml">Hello,</span></code><code><span class="koboSpan" id="kobo.688.1" xmlns="http://www.w3.org/1999/xhtml"> World!</span></code><span class="koboSpan" id="kobo.689.1" xmlns="http://www.w3.org/1999/xhtml">”</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.690.1" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.691.1" xmlns="http://www.w3.org/1999/xhtml">steps/hw_cli.py</span></code><span class="koboSpan" id="kobo.692.1" xmlns="http://www.w3.org/1999/xhtml"> module will map the step’s phrases to Python functions. </span><span class="koboSpan" id="kobo.692.2" xmlns="http://www.w3.org/1999/xhtml">It works by using decorators and pattern-matching to specify the type of step (</span><code><span class="koboSpan" id="kobo.693.1" xmlns="http://www.w3.org/1999/xhtml">@given</span></code><span class="koboSpan" id="kobo.694.1" xmlns="http://www.w3.org/1999/xhtml">, </span><code><span class="koboSpan" id="kobo.695.1" xmlns="http://www.w3.org/1999/xhtml">@when</span></code><span class="koboSpan" id="kobo.696.1" xmlns="http://www.w3.org/1999/xhtml">, or </span><code><span class="koboSpan" id="kobo.697.1" xmlns="http://www.w3.org/1999/xhtml">@then</span></code><span class="koboSpan" id="kobo.698.1" xmlns="http://www.w3.org/1999/xhtml">) and the text to match. </span><span class="koboSpan" id="kobo.698.2" xmlns="http://www.w3.org/1999/xhtml">The presence of </span><code><span class="koboSpan" id="kobo.699.1" xmlns="http://www.w3.org/1999/xhtml">{parameter}</span></code><span class="koboSpan" id="kobo.700.1" xmlns="http://www.w3.org/1999/xhtml"> in the text will match the text and provide the value matched to the step function as an argument. </span><span class="koboSpan" id="kobo.700.2" xmlns="http://www.w3.org/1999/xhtml">The function names are irrelevant and are often </span><code><span class="koboSpan" id="kobo.701.1" xmlns="http://www.w3.org/1999/xhtml">step_impl()</span></code><span class="koboSpan" id="kobo.702.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
<p><span class="koboSpan" id="kobo.703.1" xmlns="http://www.w3.org/1999/xhtml">Generally, the </span><code><span class="koboSpan" id="kobo.704.1" xmlns="http://www.w3.org/1999/xhtml">@given</span></code><span class="koboSpan" id="kobo.705.1" xmlns="http://www.w3.org/1999/xhtml"> steps will accumulate parameter values in the test context object. </span><span class="koboSpan" id="kobo.705.2" xmlns="http://www.w3.org/1999/xhtml">Best practices suggest there should be only one </span><code><span class="koboSpan" id="kobo.706.1" xmlns="http://www.w3.org/1999/xhtml">@when</span></code><span class="koboSpan" id="kobo.707.1" xmlns="http://www.w3.org/1999/xhtml"> step; this will perform the required operation. </span><span class="koboSpan" id="kobo.707.2" xmlns="http://www.w3.org/1999/xhtml">For this project, it will run the application and gather the output files. </span><span class="koboSpan" id="kobo.707.3" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.708.1" xmlns="http://www.w3.org/1999/xhtml">@then</span></code><span class="koboSpan" id="kobo.709.1" xmlns="http://www.w3.org/1999/xhtml"> steps can use </span><code><span class="koboSpan" id="kobo.710.1" xmlns="http://www.w3.org/1999/xhtml">assert</span></code><span class="koboSpan" id="kobo.711.1" xmlns="http://www.w3.org/1999/xhtml"> statements to compare actual results against the expected results shown in the feature file.</span></p>
<p><span class="koboSpan" id="kobo.712.1" xmlns="http://www.w3.org/1999/xhtml">Here’s how the </span><code><span class="koboSpan" id="kobo.713.1" xmlns="http://www.w3.org/1999/xhtml">steps/hw_cli.py</span></code><span class="koboSpan" id="kobo.714.1" xmlns="http://www.w3.org/1999/xhtml"> module might look:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-20">
<div class="tcolorbox-content">
<pre class="source-code"><span class="koboSpan" id="kobo.715.1" xmlns="http://www.w3.org/1999/xhtml">import subprocess
import shlex
from pathlib import Path

@when(u’we run command "{command}"’)
def step_impl(context, command):
    output_path = Path("output.log")
    with output_path.open(’w’) as target:
        status = subprocess.run(
            shlex.split(command),
            check=True, text=True, stdout=target, stderr=subprocess.STDOUT)
    context.status = status
    context.output = output_path.read_text()
    output_path.unlink()

@then(u’output has "{expected_output}"’)
def step_impl(context, expected_output):
    assert context.status.returncode == 0
    assert expected_output in context.output</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.716.1" xmlns="http://www.w3.org/1999/xhtml">This assumes a relatively small output file that can be collected in memory. </span><span class="koboSpan" id="kobo.716.2" xmlns="http://www.w3.org/1999/xhtml">For a larger file, it would make sense for the </span><code><span class="koboSpan" id="kobo.717.1" xmlns="http://www.w3.org/1999/xhtml">@when</span></code><span class="koboSpan" id="kobo.718.1" xmlns="http://www.w3.org/1999/xhtml"> step to create a temporary file and save the file object in the context. </span><span class="koboSpan" id="kobo.718.2" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.719.1" xmlns="http://www.w3.org/1999/xhtml">@then</span></code><span class="koboSpan" id="kobo.720.1" xmlns="http://www.w3.org/1999/xhtml"> step can read and close this file. </span><span class="koboSpan" id="kobo.720.2" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.721.1" xmlns="http://www.w3.org/1999/xhtml">tempfile</span></code><span class="koboSpan" id="kobo.722.1" xmlns="http://www.w3.org/1999/xhtml"> module is handy for creating files that will be deleted when closed.</span></p>
<p><span class="koboSpan" id="kobo.723.1" xmlns="http://www.w3.org/1999/xhtml">An alternative is to create a </span><code><span class="koboSpan" id="kobo.724.1" xmlns="http://www.w3.org/1999/xhtml">Path</span></code><span class="koboSpan" id="kobo.725.1" xmlns="http://www.w3.org/1999/xhtml"> object and save this object in the context. </span><span class="koboSpan" id="kobo.725.2" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.726.1" xmlns="http://www.w3.org/1999/xhtml">@when</span></code><span class="koboSpan" id="kobo.727.1" xmlns="http://www.w3.org/1999/xhtml"> step can write output to this path. </span><span class="koboSpan" id="kobo.727.2" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.728.1" xmlns="http://www.w3.org/1999/xhtml">@then</span></code><span class="koboSpan" id="kobo.729.1" xmlns="http://www.w3.org/1999/xhtml"> step can read and examine the contents of the file named by the </span><code><span class="koboSpan" id="kobo.730.1" xmlns="http://www.w3.org/1999/xhtml">Path</span></code><span class="koboSpan" id="kobo.731.1" xmlns="http://www.w3.org/1999/xhtml"> object.</span></p>
<p><span class="koboSpan" id="kobo.732.1" xmlns="http://www.w3.org/1999/xhtml">When a test step detects a problem with an </span><code><span class="koboSpan" id="kobo.733.1" xmlns="http://www.w3.org/1999/xhtml">assert</span></code><span class="koboSpan" id="kobo.734.1" xmlns="http://www.w3.org/1999/xhtml"> statement, it may not finish completely. </span><span class="koboSpan" id="kobo.734.2" xmlns="http://www.w3.org/1999/xhtml">The approach of using a </span><code><span class="koboSpan" id="kobo.735.1" xmlns="http://www.w3.org/1999/xhtml">Path</span></code><span class="koboSpan" id="kobo.736.1" xmlns="http://www.w3.org/1999/xhtml"> object requires some care to be sure the temporary files are deleted. </span><span class="koboSpan" id="kobo.736.2" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.737.1" xmlns="http://www.w3.org/1999/xhtml">environment.py</span></code><span class="koboSpan" id="kobo.738.1" xmlns="http://www.w3.org/1999/xhtml"> module can define an </span><code><span class="koboSpan" id="kobo.739.1" xmlns="http://www.w3.org/1999/xhtml">after_scenario(context,</span></code><code><span class="koboSpan" id="kobo.740.1" xmlns="http://www.w3.org/1999/xhtml"> scenario)</span></code><span class="koboSpan" id="kobo.741.1" xmlns="http://www.w3.org/1999/xhtml"> function to remove temporary files.</span></p>
</section>
<section class="level4 likesubsubsectionHead" data-number="5.5.3.5" id="the-testsenvironment.py-file">
<h4 class="likesubsubsectionHead" data-number="5.5.3.5"><span id="x1-360003"/><span class="koboSpan" id="kobo.742.1" xmlns="http://www.w3.org/1999/xhtml">The tests/environment.py file</span></h4>
<p><span class="koboSpan" id="kobo.743.1" xmlns="http://www.w3.org/1999/xhtml">This module will contain some function definitions used by </span><strong><span class="koboSpan" id="kobo.744.1" xmlns="http://www.w3.org/1999/xhtml">behave</span></strong><span class="koboSpan" id="kobo.745.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.745.2" xmlns="http://www.w3.org/1999/xhtml">For this project, it will be empty. </span><span class="koboSpan" id="kobo.745.3" xmlns="http://www.w3.org/1999/xhtml">The module must be present; a module docstring is appropriate to explain that it’s empty.</span></p>
<p><span class="koboSpan" id="kobo.746.1" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.747.1" xmlns="http://www.w3.org/1999/xhtml">tests/steps</span></code><span class="koboSpan" id="kobo.748.1" xmlns="http://www.w3.org/1999/xhtml"> module for this example will have examples that can be refactored into two potentially reusable functions for executing an application and checking the output from an application for specific text. </span><span class="koboSpan" id="kobo.748.2" xmlns="http://www.w3.org/1999/xhtml">This additional design effort isn’t part of this project. </span><span class="koboSpan" id="kobo.748.3" xmlns="http://www.w3.org/1999/xhtml">You may find it helpful to do this refactoring after completing several of these projects.</span></p>
<p><span class="koboSpan" id="kobo.749.1" xmlns="http://www.w3.org/1999/xhtml">Once the features, steps, and environment are in place, the </span><strong><span class="koboSpan" id="kobo.750.1" xmlns="http://www.w3.org/1999/xhtml">behave </span></strong><span class="koboSpan" id="kobo.751.1" xmlns="http://www.w3.org/1999/xhtml">program can be used to test the application. </span><span class="koboSpan" id="kobo.751.2" xmlns="http://www.w3.org/1999/xhtml">If there’s no application module, the tests will fail. </span><span class="koboSpan" id="kobo.751.3" xmlns="http://www.w3.org/1999/xhtml">Creating a skeleton application module in the </span><code><span class="koboSpan" id="kobo.752.1" xmlns="http://www.w3.org/1999/xhtml">src</span></code><span class="koboSpan" id="kobo.753.1" xmlns="http://www.w3.org/1999/xhtml"> directory will allow the test case to execute and fail because the output isn’t what was expected.</span></p>
</section>
<section class="level4 likesubsubsectionHead" data-number="5.5.3.6" id="the-teststest_hw.py-unit-tests">
<h4 class="likesubsubsectionHead" data-number="5.5.3.6"><span id="x1-370003"/><span class="koboSpan" id="kobo.754.1" xmlns="http://www.w3.org/1999/xhtml">The tests/test_hw.py unit tests</span></h4>
<p><span class="koboSpan" id="kobo.755.1" xmlns="http://www.w3.org/1999/xhtml">A unit test can be implemented as a </span><strong><span class="koboSpan" id="kobo.756.1" xmlns="http://www.w3.org/1999/xhtml">pytest </span></strong><span class="koboSpan" id="kobo.757.1" xmlns="http://www.w3.org/1999/xhtml">function that uses a fixture, </span><code><span class="koboSpan" id="kobo.758.1" xmlns="http://www.w3.org/1999/xhtml">capsys</span></code><span class="koboSpan" id="kobo.759.1" xmlns="http://www.w3.org/1999/xhtml">, to capture the system output. </span><span class="koboSpan" id="kobo.759.2" xmlns="http://www.w3.org/1999/xhtml">The unit test case expects the application to have a </span><code><span class="koboSpan" id="kobo.760.1" xmlns="http://www.w3.org/1999/xhtml">main()</span></code><span class="koboSpan" id="kobo.761.1" xmlns="http://www.w3.org/1999/xhtml"> function that parses the command-line options.</span></p>
<p><span class="koboSpan" id="kobo.762.1" xmlns="http://www.w3.org/1999/xhtml">Here’s one suggested unit test function:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-21">
<div class="tcolorbox-content">
<pre class="source-code"><span class="koboSpan" id="kobo.763.1" xmlns="http://www.w3.org/1999/xhtml">import hello_world

def test_hw(capsys):
        hello_world.main([])
        out, err = capsys.readouterr()
        assert "Hello, World!" </span><span class="koboSpan" id="kobo.763.2" xmlns="http://www.w3.org/1999/xhtml">in out</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.764.1" xmlns="http://www.w3.org/1999/xhtml">Note the test for the </span><code><span class="koboSpan" id="kobo.765.1" xmlns="http://www.w3.org/1999/xhtml">main()</span></code><span class="koboSpan" id="kobo.766.1" xmlns="http://www.w3.org/1999/xhtml"> function provides an explicit empty list of argument values. </span><span class="koboSpan" id="kobo.766.2" xmlns="http://www.w3.org/1999/xhtml">It is essential to override any value for </span><code><span class="koboSpan" id="kobo.767.1" xmlns="http://www.w3.org/1999/xhtml">sys.argv</span></code><span class="koboSpan" id="kobo.768.1" xmlns="http://www.w3.org/1999/xhtml"> that might be present when </span><strong><span class="koboSpan" id="kobo.769.1" xmlns="http://www.w3.org/1999/xhtml">pytest </span></strong><span class="koboSpan" id="kobo.770.1" xmlns="http://www.w3.org/1999/xhtml">is running.</span></p>
<p><span class="koboSpan" id="kobo.771.1" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.772.1" xmlns="http://www.w3.org/1999/xhtml">hello_world</span></code><span class="koboSpan" id="kobo.773.1" xmlns="http://www.w3.org/1999/xhtml"> module is imported by this test. </span><span class="koboSpan" id="kobo.773.2" xmlns="http://www.w3.org/1999/xhtml">There are two important consequences of this import:</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.774.1" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.775.1" xmlns="http://www.w3.org/1999/xhtml">src/hello_world.py</span></code><span class="koboSpan" id="kobo.776.1" xmlns="http://www.w3.org/1999/xhtml"> module must have an </span><code><span class="koboSpan" id="kobo.777.1" xmlns="http://www.w3.org/1999/xhtml">if</span></code><code><span class="koboSpan" id="kobo.778.1" xmlns="http://www.w3.org/1999/xhtml"> __name__</span></code><code><span class="koboSpan" id="kobo.779.1" xmlns="http://www.w3.org/1999/xhtml"> ==</span></code><code><span class="koboSpan" id="kobo.780.1" xmlns="http://www.w3.org/1999/xhtml"> "__main__":</span></code><span class="koboSpan" id="kobo.781.1" xmlns="http://www.w3.org/1999/xhtml"> section. </span><span class="koboSpan" id="kobo.781.2" xmlns="http://www.w3.org/1999/xhtml">A simple Python script (without this section) will execute completely when imported. </span><span class="koboSpan" id="kobo.781.3" xmlns="http://www.w3.org/1999/xhtml">This can make testing difficult.</span></p></li>
<li><p><span class="koboSpan" id="kobo.782.1" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.783.1" xmlns="http://www.w3.org/1999/xhtml">src</span></code><span class="koboSpan" id="kobo.784.1" xmlns="http://www.w3.org/1999/xhtml"> directory must be part of the </span><code><span class="koboSpan" id="kobo.785.1" xmlns="http://www.w3.org/1999/xhtml">PYTHONPATH</span></code><span class="koboSpan" id="kobo.786.1" xmlns="http://www.w3.org/1999/xhtml"> environment variable. </span><span class="koboSpan" id="kobo.786.2" xmlns="http://www.w3.org/1999/xhtml">This is handled by the </span><code><span class="koboSpan" id="kobo.787.1" xmlns="http://www.w3.org/1999/xhtml">tox.ini</span></code><span class="koboSpan" id="kobo.788.1" xmlns="http://www.w3.org/1999/xhtml"> file.</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.789.1" xmlns="http://www.w3.org/1999/xhtml">This test will tolerate additional output in addition to the required cheerful greeting. </span><span class="koboSpan" id="kobo.789.2" xmlns="http://www.w3.org/1999/xhtml">It might make sense to use something like </span><code><span class="koboSpan" id="kobo.790.1" xmlns="http://www.w3.org/1999/xhtml">"Hello,</span></code><code><span class="koboSpan" id="kobo.791.1" xmlns="http://www.w3.org/1999/xhtml"> World!"</span></code><code><span class="koboSpan" id="kobo.792.1" xmlns="http://www.w3.org/1999/xhtml"> ==</span></code><code><span class="koboSpan" id="kobo.793.1" xmlns="http://www.w3.org/1999/xhtml"> out.strip()</span></code><span class="koboSpan" id="kobo.794.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
<p><span class="koboSpan" id="kobo.795.1" xmlns="http://www.w3.org/1999/xhtml">The implementation details of the </span><code><span class="koboSpan" id="kobo.796.1" xmlns="http://www.w3.org/1999/xhtml">main()</span></code><span class="koboSpan" id="kobo.797.1" xmlns="http://www.w3.org/1999/xhtml"> function are opaque to this test. </span><span class="koboSpan" id="kobo.797.2" xmlns="http://www.w3.org/1999/xhtml">This </span><code><span class="koboSpan" id="kobo.798.1" xmlns="http://www.w3.org/1999/xhtml">main()</span></code><span class="koboSpan" id="kobo.799.1" xmlns="http://www.w3.org/1999/xhtml"> function could create an instance of a class; it could use a static method of a class, also.</span></p>
</section>
<section class="level4 likesubsubsectionHead" data-number="5.5.3.7" id="the-srctox.ini-file">
<h4 class="likesubsubsectionHead" data-number="5.5.3.7"><span id="x1-380003"/><span class="koboSpan" id="kobo.800.1" xmlns="http://www.w3.org/1999/xhtml">The src/tox.ini file</span></h4>
<p><span class="koboSpan" id="kobo.801.1" xmlns="http://www.w3.org/1999/xhtml">Now that the tests exist, we can run them. </span><span class="koboSpan" id="kobo.801.2" xmlns="http://www.w3.org/1999/xhtml">The </span><strong><span class="koboSpan" id="kobo.802.1" xmlns="http://www.w3.org/1999/xhtml">tox </span></strong><span class="koboSpan" id="kobo.803.1" xmlns="http://www.w3.org/1999/xhtml">(and </span><strong><span class="koboSpan" id="kobo.804.1" xmlns="http://www.w3.org/1999/xhtml">nox</span></strong><span class="koboSpan" id="kobo.805.1" xmlns="http://www.w3.org/1999/xhtml">) tools are ideal for running a suite of tests.</span></p>
<p><span class="koboSpan" id="kobo.806.1" xmlns="http://www.w3.org/1999/xhtml">Here’s an example </span><code><span class="koboSpan" id="kobo.807.1" xmlns="http://www.w3.org/1999/xhtml">tox.ini</span></code><span class="koboSpan" id="kobo.808.1" xmlns="http://www.w3.org/1999/xhtml"> file:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-22">
<div class="tcolorbox-content">
<pre class="source-code"><span class="koboSpan" id="kobo.809.1" xmlns="http://www.w3.org/1999/xhtml">[tox]
min_version = 4.0
skipsdist = true

[testenv]
deps = pip-tools
    pytest
    behave
commands_pre = pip-sync requirements.txt
setenv =
    PYTHONPATH=src
commands =
    pytest tests
    behave tests</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.810.1" xmlns="http://www.w3.org/1999/xhtml">This file lists the tools used for testing: </span><strong><span class="koboSpan" id="kobo.811.1" xmlns="http://www.w3.org/1999/xhtml">pip-tools</span></strong><span class="koboSpan" id="kobo.812.1" xmlns="http://www.w3.org/1999/xhtml">, </span><strong><span class="koboSpan" id="kobo.813.1" xmlns="http://www.w3.org/1999/xhtml">pytest</span></strong><span class="koboSpan" id="kobo.814.1" xmlns="http://www.w3.org/1999/xhtml">, and </span><strong><span class="koboSpan" id="kobo.815.1" xmlns="http://www.w3.org/1999/xhtml">behave</span></strong><span class="koboSpan" id="kobo.816.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.816.2" xmlns="http://www.w3.org/1999/xhtml">It provides the setting for the </span><code><span class="koboSpan" id="kobo.817.1" xmlns="http://www.w3.org/1999/xhtml">PYTHONPATH</span></code><span class="koboSpan" id="kobo.818.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.818.2" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.819.1" xmlns="http://www.w3.org/1999/xhtml">commands_pre</span></code><span class="koboSpan" id="kobo.820.1" xmlns="http://www.w3.org/1999/xhtml"> will prepare the the virtual environment using the </span><strong><span class="koboSpan" id="kobo.821.1" xmlns="http://www.w3.org/1999/xhtml">pip-sync </span></strong><span class="koboSpan" id="kobo.822.1" xmlns="http://www.w3.org/1999/xhtml">command that is part of the </span><strong><span class="koboSpan" id="kobo.823.1" xmlns="http://www.w3.org/1999/xhtml">pip-tools </span></strong><span class="koboSpan" id="kobo.824.1" xmlns="http://www.w3.org/1999/xhtml">package. </span><span class="koboSpan" id="kobo.824.2" xmlns="http://www.w3.org/1999/xhtml">The given sequence of commands defines the test suite.</span></p>
</section>
<section class="level4 likesubsubsectionHead" data-number="5.5.3.8" id="the-srchello_world.py-file">
<h4 class="likesubsubsectionHead" data-number="5.5.3.8"><span id="x1-390003"/><span class="koboSpan" id="kobo.825.1" xmlns="http://www.w3.org/1999/xhtml">The src/hello_world.py file</span></h4>
<p><span class="koboSpan" id="kobo.826.1" xmlns="http://www.w3.org/1999/xhtml">This is the desired application module. </span><span class="koboSpan" id="kobo.826.2" xmlns="http://www.w3.org/1999/xhtml">The test framework is helpful to confirm that it really does work, and — more importantly — it meets the definition of done provided in the </span><code><span class="koboSpan" id="kobo.827.1" xmlns="http://www.w3.org/1999/xhtml">*.feature</span></code><span class="koboSpan" id="kobo.828.1" xmlns="http://www.w3.org/1999/xhtml"> files.</span></p>
<p><span class="koboSpan" id="kobo.829.1" xmlns="http://www.w3.org/1999/xhtml">As we noted above, the unit tests will import this app as a module. </span><span class="koboSpan" id="kobo.829.2" xmlns="http://www.w3.org/1999/xhtml">The acceptance test, in contrast, will run the app. </span><span class="koboSpan" id="kobo.829.3" xmlns="http://www.w3.org/1999/xhtml">This means the </span><code><span class="koboSpan" id="kobo.830.1" xmlns="http://www.w3.org/1999/xhtml">if</span></code><code><span class="koboSpan" id="kobo.831.1" xmlns="http://www.w3.org/1999/xhtml"> __name__</span></code><code><span class="koboSpan" id="kobo.832.1" xmlns="http://www.w3.org/1999/xhtml"> ==</span></code><code><span class="koboSpan" id="kobo.833.1" xmlns="http://www.w3.org/1999/xhtml"> "__main__":</span></code><span class="koboSpan" id="kobo.834.1" xmlns="http://www.w3.org/1999/xhtml"> section is essential.</span></p>
<p><span class="koboSpan" id="kobo.835.1" xmlns="http://www.w3.org/1999/xhtml">For a small application like this, the real work of the application should be encapsulated in a </span><code><span class="koboSpan" id="kobo.836.1" xmlns="http://www.w3.org/1999/xhtml">main()</span></code><span class="koboSpan" id="kobo.837.1" xmlns="http://www.w3.org/1999/xhtml"> function. </span><span class="koboSpan" id="kobo.837.2" xmlns="http://www.w3.org/1999/xhtml">This allows the main module to end with the following snippet:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-23">
<div class="tcolorbox-content">
<pre class="source-code"><span class="koboSpan" id="kobo.838.1" xmlns="http://www.w3.org/1999/xhtml">if __name__ == "__main__":
    main()</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.839.1" xmlns="http://www.w3.org/1999/xhtml">This assures that the module will not take off and start running when imported. </span><span class="koboSpan" id="kobo.839.2" xmlns="http://www.w3.org/1999/xhtml">It will only do useful work when invoked from the command line. </span><span id="x1-39003r32"/></p>
</section>
</section>
<section class="level3" data-number="5.5.4" id="definition-of-done">
<h3 data-number="5.5.4"><span class="titlemark"><span class="koboSpan" id="kobo.840.1" xmlns="http://www.w3.org/1999/xhtml">1.5.4 </span></span> <span id="x1-400004"/><span class="koboSpan" id="kobo.841.1" xmlns="http://www.w3.org/1999/xhtml">Definition of done</span></h3>
<p><span class="koboSpan" id="kobo.842.1" xmlns="http://www.w3.org/1999/xhtml">This project is tested by running the </span><code><span class="koboSpan" id="kobo.843.1" xmlns="http://www.w3.org/1999/xhtml">tox</span></code><span class="koboSpan" id="kobo.844.1" xmlns="http://www.w3.org/1999/xhtml"> command.</span></p>
<p><span class="koboSpan" id="kobo.845.1" xmlns="http://www.w3.org/1999/xhtml">When all of the tests execute, the output will look like this:</span></p>
<pre class="console"><span class="koboSpan" id="kobo.846.1" xmlns="http://www.w3.org/1999/xhtml">(projectbook) slott@MacBookPro-SLott project_0 % tox
py: commands[0]&gt; pytest tests
...
</span><span class="koboSpan" id="kobo.846.2" xmlns="http://www.w3.org/1999/xhtml">py: commands[1]&gt; behave tests
...
</span><span class="koboSpan" id="kobo.846.3" xmlns="http://www.w3.org/1999/xhtml">py: OK (0.96=setup[0.13]+cmd[0.53,0.30] seconds)
congratulations :) (1.55 seconds)</span></pre>
<p><span class="koboSpan" id="kobo.847.1" xmlns="http://www.w3.org/1999/xhtml">This output has elided the details from </span><strong><span class="koboSpan" id="kobo.848.1" xmlns="http://www.w3.org/1999/xhtml">pytest </span></strong><span class="koboSpan" id="kobo.849.1" xmlns="http://www.w3.org/1999/xhtml">and </span><strong><span class="koboSpan" id="kobo.850.1" xmlns="http://www.w3.org/1999/xhtml">behave</span></strong><span class="koboSpan" id="kobo.851.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.851.2" xmlns="http://www.w3.org/1999/xhtml">The output from the </span><strong><span class="koboSpan" id="kobo.852.1" xmlns="http://www.w3.org/1999/xhtml">tox </span></strong><span class="koboSpan" id="kobo.853.1" xmlns="http://www.w3.org/1999/xhtml">tool is the important summary </span><code><span class="koboSpan" id="kobo.854.1" xmlns="http://www.w3.org/1999/xhtml">py:</span></code><code><span class="koboSpan" id="kobo.855.1" xmlns="http://www.w3.org/1999/xhtml"> OK</span></code><span class="koboSpan" id="kobo.856.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.856.2" xmlns="http://www.w3.org/1999/xhtml">This tells us all the tests passed.</span></p>
<p><span class="koboSpan" id="kobo.857.1" xmlns="http://www.w3.org/1999/xhtml">Once this is complete, we can run the following to create the API documentation:</span></p>
<div class="tcolorbox tcolorbox" id="tcolobox-24">
<div class="tcolorbox-content">
<pre class="console"><span class="koboSpan" id="kobo.858.1" xmlns="http://www.w3.org/1999/xhtml">% (cd docs; make html)</span></pre>
</div>
</div>
<p><span class="koboSpan" id="kobo.859.1" xmlns="http://www.w3.org/1999/xhtml">It can help to wrap the two commands with </span><code><span class="koboSpan" id="kobo.860.1" xmlns="http://www.w3.org/1999/xhtml">()</span></code><span class="koboSpan" id="kobo.861.1" xmlns="http://www.w3.org/1999/xhtml"> so the </span><code><span class="koboSpan" id="kobo.862.1" xmlns="http://www.w3.org/1999/xhtml">cd</span></code><code><span class="koboSpan" id="kobo.863.1" xmlns="http://www.w3.org/1999/xhtml"> docs</span></code><span class="koboSpan" id="kobo.864.1" xmlns="http://www.w3.org/1999/xhtml"> command doesn’t leave the console session in the </span><code><span class="koboSpan" id="kobo.865.1" xmlns="http://www.w3.org/1999/xhtml">docs</span></code><span class="koboSpan" id="kobo.866.1" xmlns="http://www.w3.org/1999/xhtml"> directory. </span><span class="koboSpan" id="kobo.866.2" xmlns="http://www.w3.org/1999/xhtml">Some developers prefer to have two windows open: one in the top-level directory to run the </span><strong><span class="koboSpan" id="kobo.867.1" xmlns="http://www.w3.org/1999/xhtml">tox </span></strong><span class="koboSpan" id="kobo.868.1" xmlns="http://www.w3.org/1999/xhtml">tool and one in the </span><code><span class="koboSpan" id="kobo.869.1" xmlns="http://www.w3.org/1999/xhtml">docs</span></code><span class="koboSpan" id="kobo.870.1" xmlns="http://www.w3.org/1999/xhtml"> subdirectory to run the </span><strong><span class="koboSpan" id="kobo.871.1" xmlns="http://www.w3.org/1999/xhtml">make </span></strong><span class="koboSpan" id="kobo.872.1" xmlns="http://www.w3.org/1999/xhtml">commands for the </span><strong><span class="koboSpan" id="kobo.873.1" xmlns="http://www.w3.org/1999/xhtml">sphinx</span></strong><span class="koboSpan" id="kobo.874.1" xmlns="http://www.w3.org/1999/xhtml"> tool. </span><span id="x1-40002r29"/></p>
</section>
</section>
<section class="level2" data-number="5.6" id="summary">
<h2 data-number="5.6"><span class="titlemark"><span class="koboSpan" id="kobo.875.1" xmlns="http://www.w3.org/1999/xhtml">1.6 </span></span> <span id="x1-410006"/><span class="koboSpan" id="kobo.876.1" xmlns="http://www.w3.org/1999/xhtml">Summary</span></h2>
<p><span class="koboSpan" id="kobo.877.1" xmlns="http://www.w3.org/1999/xhtml">In this chapter, we’ve looked at the following topics:</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.878.1" xmlns="http://www.w3.org/1999/xhtml">An overview of the software quality principles that we’ll try to emphasize.</span></p></li>
<li><p><span class="koboSpan" id="kobo.879.1" xmlns="http://www.w3.org/1999/xhtml">A suggested approach to completing the project as a sequence of project sprints.</span></p></li>
<li><p><span class="koboSpan" id="kobo.880.1" xmlns="http://www.w3.org/1999/xhtml">A general overview of the list of deliverables for each project.</span></p></li>
<li><p><span class="koboSpan" id="kobo.881.1" xmlns="http://www.w3.org/1999/xhtml">The tools suggested for creating these examples.</span></p></li>
<li><p><span class="koboSpan" id="kobo.882.1" xmlns="http://www.w3.org/1999/xhtml">A sample project to act as a template for subsequent projects.</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.883.1" xmlns="http://www.w3.org/1999/xhtml">After creating this initial project, the next chapter will look at the general collection of projects. </span><span class="koboSpan" id="kobo.883.2" xmlns="http://www.w3.org/1999/xhtml">The idea is to create a complete data analysis tool set with a number of closely-related projects. </span><span id="x1-41001r42"/></p>
</section>
<section class="level2" data-number="5.7" id="extras">
<h2 data-number="5.7"><span class="titlemark"><span class="koboSpan" id="kobo.884.1" xmlns="http://www.w3.org/1999/xhtml">1.7 </span></span> <span id="x1-420007"/><span class="koboSpan" id="kobo.885.1" xmlns="http://www.w3.org/1999/xhtml">Extras</span></h2>
<p><span class="koboSpan" id="kobo.886.1" xmlns="http://www.w3.org/1999/xhtml">Here are some ideas for you to add to this project. </span><span id="x1-42001r41"/></p>
<section class="level3" data-number="5.7.1" id="static-analysis---mypy-flake8">
<h3 data-number="5.7.1"><span class="titlemark"><span class="koboSpan" id="kobo.887.1" xmlns="http://www.w3.org/1999/xhtml">1.7.1 </span></span> <span id="x1-430001"/><span class="koboSpan" id="kobo.888.1" xmlns="http://www.w3.org/1999/xhtml">Static analysis - mypy, flake8</span></h3>
<p><span class="koboSpan" id="kobo.889.1" xmlns="http://www.w3.org/1999/xhtml">There are several common static analysis tools that are as essential as automated testing:</span></p>
<ul>
<li><p><strong><span class="koboSpan" id="kobo.890.1" xmlns="http://www.w3.org/1999/xhtml">mypy </span></strong><span class="koboSpan" id="kobo.891.1" xmlns="http://www.w3.org/1999/xhtml">checks type annotations to be sure the functions and classes will interact properly.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.892.1" xmlns="http://www.w3.org/1999/xhtml">flake8 </span></strong><span class="koboSpan" id="kobo.893.1" xmlns="http://www.w3.org/1999/xhtml">does other syntax checks to make sure the code avoids some of the more common Python mistakes.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.894.1" xmlns="http://www.w3.org/1999/xhtml">black </span></strong><span class="koboSpan" id="kobo.895.1" xmlns="http://www.w3.org/1999/xhtml">can be used to check the formatting to make sure it follows the recommended style. </span><span class="koboSpan" id="kobo.895.2" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.896.1" xmlns="http://www.w3.org/1999/xhtml">black</span></code><span class="koboSpan" id="kobo.897.1" xmlns="http://www.w3.org/1999/xhtml"> application can also be used to reformat a new file.</span></p></li>
<li><p><strong><span class="koboSpan" id="kobo.898.1" xmlns="http://www.w3.org/1999/xhtml">isort </span></strong><span class="koboSpan" id="kobo.899.1" xmlns="http://www.w3.org/1999/xhtml">can be used to put a long collection of </span><code><span class="koboSpan" id="kobo.900.1" xmlns="http://www.w3.org/1999/xhtml">import</span></code><span class="koboSpan" id="kobo.901.1" xmlns="http://www.w3.org/1999/xhtml"> statements into a consistent order.</span></p></li>
</ul>
<p><span class="koboSpan" id="kobo.902.1" xmlns="http://www.w3.org/1999/xhtml">Once the application passes the functional tests in the </span><code><span class="koboSpan" id="kobo.903.1" xmlns="http://www.w3.org/1999/xhtml">*.feature</span></code><span class="koboSpan" id="kobo.904.1" xmlns="http://www.w3.org/1999/xhtml"> files, these additional non-functional tests can be applied. </span><span class="koboSpan" id="kobo.904.2" xmlns="http://www.w3.org/1999/xhtml">These additional tests are often helpful for spotting more nuanced problems that can make a program difficult to adapt or maintain. </span><span id="x1-43001r44"/></p>
</section>
<section class="level3" data-number="5.7.2" id="cli-features">
<h3 data-number="5.7.2"><span class="titlemark"><span class="koboSpan" id="kobo.905.1" xmlns="http://www.w3.org/1999/xhtml">1.7.2 </span></span> <span id="x1-440002"/><span class="koboSpan" id="kobo.906.1" xmlns="http://www.w3.org/1999/xhtml">CLI features</span></h3>
<p><span class="koboSpan" id="kobo.907.1" xmlns="http://www.w3.org/1999/xhtml">The command-language interface permits a single option, the </span><code><span class="koboSpan" id="kobo.908.1" xmlns="http://www.w3.org/1999/xhtml">--who</span></code><span class="koboSpan" id="kobo.909.1" xmlns="http://www.w3.org/1999/xhtml"> option, to provide a name.</span></p>
<p><span class="koboSpan" id="kobo.910.1" xmlns="http://www.w3.org/1999/xhtml">It makes sense to add a scenario to exercise this option.</span></p>
<p><span class="koboSpan" id="kobo.911.1" xmlns="http://www.w3.org/1999/xhtml">What should happen with the </span><code><span class="koboSpan" id="kobo.912.1" xmlns="http://www.w3.org/1999/xhtml">--who</span></code><span class="koboSpan" id="kobo.913.1" xmlns="http://www.w3.org/1999/xhtml"> is provided without a value? </span><span class="koboSpan" id="kobo.913.2" xmlns="http://www.w3.org/1999/xhtml">Is the following appropriate?</span></p>
<pre class="console"><span class="koboSpan" id="kobo.914.1" xmlns="http://www.w3.org/1999/xhtml">(projectbook) slott@MacBookPro-SLott project_0 % python src/hello_world.py
  --who

usage: hello_world.py [-h] [--who WHO]
hello_world.py: error: argument --who/-w: expected one argument</span></pre>
<p><span class="koboSpan" id="kobo.915.1" xmlns="http://www.w3.org/1999/xhtml">Should the help be extended to clarify what’s required?</span></p>
<p><span class="koboSpan" id="kobo.916.1" xmlns="http://www.w3.org/1999/xhtml">Consider adding the following scenarios (and the implementing code):</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.917.1" xmlns="http://www.w3.org/1999/xhtml">Add a scenario for the </span><code><span class="koboSpan" id="kobo.918.1" xmlns="http://www.w3.org/1999/xhtml">--help</span></code><span class="koboSpan" id="kobo.919.1" xmlns="http://www.w3.org/1999/xhtml"> option, which is provided automatically by the </span><code><span class="koboSpan" id="kobo.920.1" xmlns="http://www.w3.org/1999/xhtml">argparse</span></code><span class="koboSpan" id="kobo.921.1" xmlns="http://www.w3.org/1999/xhtml"> module.</span></p></li>
<li><p><span class="koboSpan" id="kobo.922.1" xmlns="http://www.w3.org/1999/xhtml">Add a scenario for the </span><code><span class="koboSpan" id="kobo.923.1" xmlns="http://www.w3.org/1999/xhtml">--who</span></code><span class="koboSpan" id="kobo.924.1" xmlns="http://www.w3.org/1999/xhtml"> with no value error.</span></p></li>
</ul>
<p><span id="x1-44001r45"/></p>
</section>
<section class="level3" data-number="5.7.3" id="logging">
<h3 data-number="5.7.3"><span class="titlemark"><span class="koboSpan" id="kobo.925.1" xmlns="http://www.w3.org/1999/xhtml">1.7.3 </span></span> <span id="x1-450003"/><span class="koboSpan" id="kobo.926.1" xmlns="http://www.w3.org/1999/xhtml">Logging</span></h3>
<p><span class="koboSpan" id="kobo.927.1" xmlns="http://www.w3.org/1999/xhtml">Consider a more complex application where additional debugging output might be helpful. </span><span class="koboSpan" id="kobo.927.2" xmlns="http://www.w3.org/1999/xhtml">For this, it’s common to add a </span><code><span class="koboSpan" id="kobo.928.1" xmlns="http://www.w3.org/1999/xhtml">--verbose</span></code><span class="koboSpan" id="kobo.929.1" xmlns="http://www.w3.org/1999/xhtml"> option to set the logging level to </span><code><span class="koboSpan" id="kobo.930.1" xmlns="http://www.w3.org/1999/xhtml">logging.DEBUG</span></code><span class="koboSpan" id="kobo.931.1" xmlns="http://www.w3.org/1999/xhtml"> instead of a default level of </span><code><span class="koboSpan" id="kobo.932.1" xmlns="http://www.w3.org/1999/xhtml">logging.INFO</span></code><span class="koboSpan" id="kobo.933.1" xmlns="http://www.w3.org/1999/xhtml">.</span></p>
<p><span class="koboSpan" id="kobo.934.1" xmlns="http://www.w3.org/1999/xhtml">Adding this option requires adding logging capabilities. </span><span class="koboSpan" id="kobo.934.2" xmlns="http://www.w3.org/1999/xhtml">Consider making the following changes to this module:</span></p>
<ul>
<li><p><span class="koboSpan" id="kobo.935.1" xmlns="http://www.w3.org/1999/xhtml">Import the </span><code><span class="koboSpan" id="kobo.936.1" xmlns="http://www.w3.org/1999/xhtml">logging</span></code><span class="koboSpan" id="kobo.937.1" xmlns="http://www.w3.org/1999/xhtml"> module and create a global logger for the application.</span></p></li>
<li><p><span class="koboSpan" id="kobo.938.1" xmlns="http://www.w3.org/1999/xhtml">Update the </span><code><span class="koboSpan" id="kobo.939.1" xmlns="http://www.w3.org/1999/xhtml">main()</span></code><span class="koboSpan" id="kobo.940.1" xmlns="http://www.w3.org/1999/xhtml"> function to set the logger’s level based on the options.</span></p></li>
<li><p><span class="koboSpan" id="kobo.941.1" xmlns="http://www.w3.org/1999/xhtml">Update the </span><code><span class="koboSpan" id="kobo.942.1" xmlns="http://www.w3.org/1999/xhtml">__name__</span></code><code><span class="koboSpan" id="kobo.943.1" xmlns="http://www.w3.org/1999/xhtml"> ==</span></code><code><span class="koboSpan" id="kobo.944.1" xmlns="http://www.w3.org/1999/xhtml"> "__main__":</span></code><span class="koboSpan" id="kobo.945.1" xmlns="http://www.w3.org/1999/xhtml"> block to have two lines: </span><code><span class="koboSpan" id="kobo.946.1" xmlns="http://www.w3.org/1999/xhtml">logging.basicConfig()</span></code><span class="koboSpan" id="kobo.947.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><code><span class="koboSpan" id="kobo.948.1" xmlns="http://www.w3.org/1999/xhtml">main()</span></code><span class="koboSpan" id="kobo.949.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.949.2" xmlns="http://www.w3.org/1999/xhtml">It’s best to keep logging configuration isolated from the rest of the application processing.</span></p></li>
</ul>
<p><span id="x1-45001r46"/></p>
</section>
<section class="level3" data-number="5.7.4" id="cookiecutter">
<h3 data-number="5.7.4"><span class="titlemark"><span class="koboSpan" id="kobo.950.1" xmlns="http://www.w3.org/1999/xhtml">1.7.4 </span></span> <span id="x1-460004"/><span class="koboSpan" id="kobo.951.1" xmlns="http://www.w3.org/1999/xhtml">Cookiecutter</span></h3>
<p><span class="koboSpan" id="kobo.952.1" xmlns="http://www.w3.org/1999/xhtml">The </span><code><span class="koboSpan" id="kobo.953.1" xmlns="http://www.w3.org/1999/xhtml">cookiecutter</span></code><span class="koboSpan" id="kobo.954.1" xmlns="http://www.w3.org/1999/xhtml"> project (see </span><a class="url" href="https://cookiecutter.readthedocs.io/en/stable/"><span class="koboSpan" id="kobo.955.1" xmlns="http://www.w3.org/1999/xhtml">https://cookiecutter.readthedocs.io/en/stable/</span></a><span class="koboSpan" id="kobo.956.1" xmlns="http://www.w3.org/1999/xhtml">) is a way to build a template project. </span><span class="koboSpan" id="kobo.956.2" xmlns="http://www.w3.org/1999/xhtml">This can help team members get started by sharing a single template. </span><span class="koboSpan" id="kobo.956.3" xmlns="http://www.w3.org/1999/xhtml">As tool versions or solution architectures change, additional cookie-cutter templates can be developed and used.</span></p>
<p><span class="koboSpan" id="kobo.957.1" xmlns="http://www.w3.org/1999/xhtml">There are thousands of cookie-cutter templates available. </span><span class="koboSpan" id="kobo.957.2" xmlns="http://www.w3.org/1999/xhtml">It can be difficult to locate one that’s suitably simple. </span><span class="koboSpan" id="kobo.957.3" xmlns="http://www.w3.org/1999/xhtml">It may be better to create your own and add to it as new concepts are introduced in later chapters.</span></p>
<p><span id="x1-46001r17"/></p>
</section>
</section>
</section>
</body>
</html>
