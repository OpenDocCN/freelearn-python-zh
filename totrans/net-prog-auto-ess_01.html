<html><head></head><body>
<div id="_idContainer017">
<h1 class="chapter-number" id="_idParaDest-16"><a id="_idTextAnchor015"/><span class="koboSpan" id="kobo.1.1">1</span></h1>
<h1 id="_idParaDest-17"><a id="_idTextAnchor016"/><span class="koboSpan" id="kobo.2.1">Network Basics for Development</span></h1>
<p><span class="koboSpan" id="kobo.3.1">This chapter is focused on explaining the basics and jargon used in </span><strong class="bold"><span class="koboSpan" id="kobo.4.1">computer networking</span></strong><span class="koboSpan" id="kobo.5.1">. </span><span class="koboSpan" id="kobo.5.2">The idea is to build a good foundation to be used throughout the book.</span></p>
<p><span class="koboSpan" id="kobo.6.1">If you are a </span><em class="italic"><span class="koboSpan" id="kobo.7.1">network engineer</span></em><span class="koboSpan" id="kobo.8.1"> or have experience in this field, you might want to skip it, or perhaps skim through it.</span></p>
<p><span class="koboSpan" id="kobo.9.1">If you are a </span><em class="italic"><span class="koboSpan" id="kobo.10.1">software developer</span></em><span class="koboSpan" id="kobo.11.1"> with little network experience, this chapter is for you. </span><span class="koboSpan" id="kobo.11.2">It will help you build a solid base on network jargon that will be useful when writing code for </span><strong class="bold"><span class="koboSpan" id="kobo.12.1">network automation</span></strong><span class="koboSpan" id="kobo.13.1">.</span></p>
<p><span class="koboSpan" id="kobo.14.1">The following are the topics that we will cover in this chapter:</span></p>
<ul>
<li><span class="koboSpan" id="kobo.15.1">Reviewing protocol layers, network device types, and network topologies</span></li>
<li><span class="koboSpan" id="kobo.16.1">Describing network architecture and its components</span></li>
<li><span class="koboSpan" id="kobo.17.1">Illustrating network management components, network bastions, and more</span></li>
</ul>
<h1 id="_idParaDest-18"><a id="_idTextAnchor017"/><span class="koboSpan" id="kobo.18.1">Reviewing protocol layers, network device types, and network topologies</span></h1>
<p><span class="koboSpan" id="kobo.19.1">We have lots to talk about here. </span><span class="koboSpan" id="kobo.19.2">But due to the size restraints of this book, I have organized a summary with the most important aspects of today’s network jargon and explained them briefly. </span><span class="koboSpan" id="kobo.19.3">I hope you can find some new information to help your automation work.</span></p>
<h2 id="_idParaDest-19"><a id="_idTextAnchor018"/><span class="koboSpan" id="kobo.20.1">Protocol layers</span></h2>
<p><span class="koboSpan" id="kobo.21.1">It’s important</span><a id="_idIndexMarker000"/><span class="koboSpan" id="kobo.22.1"> to note that there are several different standards for protocol layers, and the most academic one is the ISO organization called </span><strong class="bold"><span class="koboSpan" id="kobo.23.1">OSI model</span></strong><span class="koboSpan" id="kobo.24.1">, which</span><a id="_idIndexMarker001"/><span class="koboSpan" id="kobo.25.1"> defines seven layers. </span><span class="koboSpan" id="kobo.25.2">But we are going to consider only five defined in the TCP/IP protocol stack, which is used on the internet. </span><span class="koboSpan" id="kobo.25.3">Here is a short summary of each of the layers:</span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.26.1">Physical layer</span></strong><span class="koboSpan" id="kobo.27.1">: In </span><a id="_idIndexMarker002"/><span class="koboSpan" id="kobo.28.1">this layer are the technologies involved in the physical connection itself where the bits and bytes are transformed into the physical medium, such as the light in fiber optics, electricity in a cable, and radio waves in antennas. </span><span class="koboSpan" id="kobo.28.2">At this layer, physical checks can be implemented on the node input, such as power levels, collision, noise, and signal distortion, among other types of checks.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.29.1">Data link layer</span></strong><span class="koboSpan" id="kobo.30.1">: Here, the</span><a id="_idIndexMarker003"/><span class="koboSpan" id="kobo.31.1"> information is called a </span><strong class="bold"><span class="koboSpan" id="kobo.32.1">frame</span></strong><span class="koboSpan" id="kobo.33.1">, and</span><a id="_idIndexMarker004"/><span class="koboSpan" id="kobo.34.1"> it contains a delimited size, known as the </span><strong class="bold"><span class="koboSpan" id="kobo.35.1">maximum transmission unit</span></strong><span class="koboSpan" id="kobo.36.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.37.1">MTU</span></strong><span class="koboSpan" id="kobo.38.1">). </span><span class="koboSpan" id="kobo.38.2">The </span><a id="_idIndexMarker005"/><span class="koboSpan" id="kobo.39.1">reason is that a frame is a data representation in bytes that has to move from one node to another one and in a reliable manner without interruption. </span><span class="koboSpan" id="kobo.39.2">At this level, frame queues are present; the queues are used to place the frames on the physical layer in sequential order or in priority order. </span><span class="koboSpan" id="kobo.39.3">Some data link devices can prioritize certain types of frames, jumping to the front of the queue. </span><span class="koboSpan" id="kobo.39.4">At the data link layer, some checks are done, but within the frame itself, such as CRC or checksum. </span><span class="koboSpan" id="kobo.39.5">In addition, source and destination addresses can be added to the frame to differentiate destinations on a shared media. </span><span class="koboSpan" id="kobo.39.6">The information on the frame is normally used locally within the same organization. </span><span class="koboSpan" id="kobo.39.7">This layer is also known as</span><a id="_idIndexMarker006"/><span class="koboSpan" id="kobo.40.1"> the </span><strong class="bold"><span class="koboSpan" id="kobo.41.1">Ethernet layer</span></strong><span class="koboSpan" id="kobo.42.1">.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.43.1">Network layer</span></strong><span class="koboSpan" id="kobo.44.1">: This is</span><a id="_idIndexMarker007"/><span class="koboSpan" id="kobo.45.1"> also known as the </span><strong class="bold"><span class="koboSpan" id="kobo.46.1">IP layer</span></strong><span class="koboSpan" id="kobo.47.1">, or the</span><a id="_idIndexMarker008"/><span class="koboSpan" id="kobo.48.1"> router layer. </span><span class="koboSpan" id="kobo.48.2">Here, the information is called a </span><strong class="bold"><span class="koboSpan" id="kobo.49.1">packet</span></strong><span class="koboSpan" id="kobo.50.1">, and</span><a id="_idIndexMarker009"/><span class="koboSpan" id="kobo.51.1"> it contains the information that goes between nodes that are beyond the layer 2 domain (or the previous Ethernet layer). </span><span class="koboSpan" id="kobo.51.2">This level is where the routing protocols are used, the </span><strong class="bold"><span class="koboSpan" id="kobo.52.1">network address translation</span></strong><span class="koboSpan" id="kobo.53.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.54.1">NAT</span></strong><span class="koboSpan" id="kobo.55.1">) does</span><a id="_idIndexMarker010"/><span class="koboSpan" id="kobo.56.1"> its job, some </span><strong class="bold"><span class="koboSpan" id="kobo.57.1">access control lists</span></strong><span class="koboSpan" id="kobo.58.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.59.1">ACLs</span></strong><span class="koboSpan" id="kobo.60.1">) are </span><a id="_idIndexMarker011"/><span class="koboSpan" id="kobo.61.1">present, and the control packets are, among other functions. </span><span class="koboSpan" id="kobo.61.2">The packet on this level has enough information to know where it came from and where it has to go. </span><span class="koboSpan" id="kobo.61.3">This layer is also responsible for fragmenting the packet into multiple packets if the frame MTU is smaller than the IP packet. </span><span class="koboSpan" id="kobo.61.4">The main information carried in the packet is the </span><strong class="bold"><span class="koboSpan" id="kobo.62.1">IP address</span></strong><span class="koboSpan" id="kobo.63.1"> and</span><a id="_idIndexMarker012"/><span class="koboSpan" id="kobo.64.1"> has source and destination addresses.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.65.1">Transport layer</span></strong><span class="koboSpan" id="kobo.66.1">: The transport layer </span><a id="_idIndexMarker013"/><span class="koboSpan" id="kobo.67.1">deals with data information that is</span><a id="_idIndexMarker014"/><span class="koboSpan" id="kobo.68.1"> called a </span><strong class="bold"><span class="koboSpan" id="kobo.69.1">segment</span></strong><span class="koboSpan" id="kobo.70.1">. </span><span class="koboSpan" id="kobo.70.2">On today’s internet, only two types of protocols are used here, the </span><strong class="bold"><span class="koboSpan" id="kobo.71.1">User Data Protocol</span></strong><span class="koboSpan" id="kobo.72.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.73.1">UDP</span></strong><span class="koboSpan" id="kobo.74.1">) and </span><a id="_idIndexMarker015"/><span class="koboSpan" id="kobo.75.1">the </span><strong class="bold"><span class="koboSpan" id="kobo.76.1">Transmission Control Protocol</span></strong><span class="koboSpan" id="kobo.77.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.78.1">TCP</span></strong><span class="koboSpan" id="kobo.79.1">). </span><span class="koboSpan" id="kobo.79.2">The</span><a id="_idIndexMarker016"/><span class="koboSpan" id="kobo.80.1"> idea is one provides more confirmation and control than the other. </span><span class="koboSpan" id="kobo.80.2">TCP has traffic flow control, packet loss detection, and packet retransmission, among other functions. </span><span class="koboSpan" id="kobo.80.3">UDP, on the other hand, is just the IP packet plus a little more information. </span><span class="koboSpan" id="kobo.80.4">The idea behind having TCP is to enhance</span><a id="_idIndexMarker017"/><span class="koboSpan" id="kobo.81.1"> communication on the unreliable internet, so the application has a guaranteed transport method. </span><span class="koboSpan" id="kobo.81.2">TCP has more overhead, with an additional header field, and might be slower in some cases than UDP. </span><span class="koboSpan" id="kobo.81.3">The transport layer adds a </span><strong class="bold"><span class="koboSpan" id="kobo.82.1">port</span></strong><span class="koboSpan" id="kobo.83.1"> number </span><a id="_idIndexMarker018"/><span class="koboSpan" id="kobo.84.1">to the segment, which is carried inside every packet in the IP layer. </span><span class="koboSpan" id="kobo.84.2">The port number is used for two reasons: to designate which application is using the transport layer, such as port </span><strong class="source-inline"><span class="koboSpan" id="kobo.85.1">80</span></strong><span class="koboSpan" id="kobo.86.1"> for HTTP communication, and to associate it with a </span><a id="_idIndexMarker019"/><span class="koboSpan" id="kobo.87.1">communication </span><strong class="bold"><span class="koboSpan" id="kobo.88.1">socket</span></strong><span class="koboSpan" id="kobo.89.1"> in the host. </span><span class="koboSpan" id="kobo.89.2">The port number is required for the source and destination, which will be used to designate the correct socket to communicate with the host.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.90.1">Application layer</span></strong><span class="koboSpan" id="kobo.91.1">: This</span><a id="_idIndexMarker020"/><span class="koboSpan" id="kobo.92.1"> is the top of the layers, normally referred to by my professor as the </span><em class="italic"><span class="koboSpan" id="kobo.93.1">cherry on the cake</span></em><span class="koboSpan" id="kobo.94.1">. </span><span class="koboSpan" id="kobo.94.2">An application layer is used to associate a </span><strong class="bold"><span class="koboSpan" id="kobo.95.1">socket</span></strong><span class="koboSpan" id="kobo.96.1"> on the host where data will be sent and received. </span><span class="koboSpan" id="kobo.96.2">The application normally handles the content of the data, such as page requests on HTTP. </span><span class="koboSpan" id="kobo.96.3">The software that we are producing in this book uses this layer to automate the network.</span></li>
</ul>
<h2 id="_idParaDest-20"><a id="_idTextAnchor019"/><span class="koboSpan" id="kobo.97.1">LAN, WAN, internet, and intranet</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.98.1">LAN</span></strong><span class="koboSpan" id="kobo.99.1">, or </span><strong class="bold"><span class="koboSpan" id="kobo.100.1">local area network</span></strong><span class="koboSpan" id="kobo.101.1">, is used</span><a id="_idIndexMarker021"/><span class="koboSpan" id="kobo.102.1"> to refer to networks that are local. </span><span class="koboSpan" id="kobo.102.2">Nowadays, it means networks that use the data link layer as the main communication, such as </span><a id="_idIndexMarker022"/><span class="koboSpan" id="kobo.103.1">Ethernet. </span><span class="koboSpan" id="kobo.103.2">The reason why the name is more related to the communication layer than the geography is that technology has evolved, allowing Ethernet </span><a id="_idIndexMarker023"/><span class="koboSpan" id="kobo.104.1">switches to communicate over thousands of kilometers. </span><span class="koboSpan" id="kobo.104.2">So, a LAN normally designates a topology inside the same organization using Ethernet, but not necessarily geographically in the same location.</span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.105.1">WAN</span></strong><span class="koboSpan" id="kobo.106.1">, or </span><strong class="bold"><span class="koboSpan" id="kobo.107.1">wide area network</span></strong><span class="koboSpan" id="kobo.108.1">, is</span><a id="_idIndexMarker024"/><span class="koboSpan" id="kobo.109.1"> used to refer to networks that are remotely connected, or technologies that allow nodes to be far apart, such as extinct technologies such as X.25, Frame Relay, and </span><strong class="bold"><span class="koboSpan" id="kobo.110.1">Asynchronous Transfer Mode</span></strong><span class="koboSpan" id="kobo.111.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.112.1">ATM</span></strong><span class="koboSpan" id="kobo.113.1">). </span><span class="koboSpan" id="kobo.113.2">Now, the</span><a id="_idIndexMarker025"/><span class="koboSpan" id="kobo.114.1"> term WAN is normally used to designate interfaces or networks that are connected to different networks, or in other words, networks that are not in the same organization, data link layer, or Ethernet domain.</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.115.1">Information</span></p>
<p class="callout"><span class="koboSpan" id="kobo.116.1">For more information about ATM, please refer to the article </span><em class="italic"><span class="koboSpan" id="kobo.117.1">Technology and Applications</span></em><span class="koboSpan" id="kobo.118.1"> in SSRN Electronic Journal, June 1998, by Jeffrey Scott Ray.</span></p>
<p><span class="koboSpan" id="kobo.119.1">The</span><a id="_idIndexMarker026"/><span class="koboSpan" id="kobo.120.1"> internet is what you know, this gigantic network interconnecting everybody worldwide.</span></p>
<p><span class="koboSpan" id="kobo.121.1">The term intranet</span><a id="_idIndexMarker027"/><span class="koboSpan" id="kobo.122.1"> was used when corporations were using the internet protocols to communicate internally on their network. </span><span class="koboSpan" id="kobo.122.2">The reason is that other technologies were competing with the internet TCP/IP protocol at that time, such as SNA and IPX. </span><span class="koboSpan" id="kobo.122.3">So, when the term intranet was used, it was simply to state that the corporate network uses TCP/IP. </span><span class="koboSpan" id="kobo.122.4">Nowadays, intranet refers to a network that is within the same organization and not connected to external nodes. </span><span class="koboSpan" id="kobo.122.5">Therefore, the network is </span><em class="italic"><span class="koboSpan" id="kobo.123.1">safe</span></em><span class="koboSpan" id="kobo.124.1"> from external interference.</span></p>
<h3><span class="koboSpan" id="kobo.125.1">Point-to-point connections</span></h3>
<p><span class="koboSpan" id="kobo.126.1">A </span><strong class="bold"><span class="koboSpan" id="kobo.127.1">point-to-point</span></strong><span class="koboSpan" id="kobo.128.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.129.1">P2P</span></strong><span class="koboSpan" id="kobo.130.1">) connection</span><a id="_idIndexMarker028"/><span class="koboSpan" id="kobo.131.1"> is </span><a id="_idIndexMarker029"/><span class="koboSpan" id="kobo.132.1">used to interconnect two nodes. </span><span class="koboSpan" id="kobo.132.2">A link between two nodes is normally a P2P connection (as shown in </span><em class="italic"><span class="koboSpan" id="kobo.133.1">Figure 1.1</span></em><span class="koboSpan" id="kobo.134.1">), unless using media such as satellite or broadcast antennas. </span><span class="koboSpan" id="kobo.134.2">This connection can either be </span><em class="italic"><span class="koboSpan" id="kobo.135.1">back to back</span></em><span class="koboSpan" id="kobo.136.1"> or not. </span><span class="koboSpan" id="kobo.136.2">The term </span><em class="italic"><span class="koboSpan" id="kobo.137.1">back to back</span></em><span class="koboSpan" id="kobo.138.1"> is normally used to indicate that the nodes are connected directly without any other physical layer between them, such as repeaters. </span><span class="koboSpan" id="kobo.138.2">Therefore, back-to-back connections have limited distances due to the noise and distortion introduced in the connection </span><a id="_idIndexMarker030"/><span class="koboSpan" id="kobo.139.1">as </span><a id="_idIndexMarker031"/><span class="koboSpan" id="kobo.140.1">the wiring gets longer. </span><span class="koboSpan" id="kobo.140.2">Depending on the speed and the technology used, the distances are limited to within the same room or building.</span></p>
<div>
<div class="IMG---Figure" id="_idContainer008">
<span class="koboSpan" id="kobo.141.1"><img alt="Figure 1.1 – A P2P connection" src="image/B18165_01_001.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.142.1">Figure 1.1 – A P2P connection</span></p>
<h3><span class="koboSpan" id="kobo.143.1">Star or hub-spoke topologies</span></h3>
<p><span class="koboSpan" id="kobo.144.1">Star or hub-spoke topologies </span><a id="_idIndexMarker032"/><span class="koboSpan" id="kobo.145.1">are used </span><a id="_idIndexMarker033"/><span class="koboSpan" id="kobo.146.1">in small and medium companies, where one office is the main distributor and the other locations are consumers. </span><span class="koboSpan" id="kobo.146.2">The topology looks like a star, and network elements are smaller and simpler at the remote locations, while being larger and complex at the main distributor (see the example in </span><em class="italic"><span class="koboSpan" id="kobo.147.1">Figure 1.2</span></em><span class="koboSpan" id="kobo.148.1">).</span></p>
<p><span class="koboSpan" id="kobo.149.1">Normally, these types </span><a id="_idIndexMarker034"/><span class="koboSpan" id="kobo.150.1">of topologies can scale up to hundreds of nodes, but depending on the traffic, the requirements can scale to thousands. </span><span class="koboSpan" id="kobo.150.2">Let’s look at two examples that illustrate the scale of these topologies.</span></p>
<p><span class="koboSpan" id="kobo.151.1">For instance, in a bank, the </span><a id="_idIndexMarker035"/><span class="koboSpan" id="kobo.152.1">automated teller machines are distributed in remote locations, where the main computer is located in the main branch. </span><span class="koboSpan" id="kobo.152.2">This can scale to thousands of remote machines as the traffic requirements are small in terms of byte transfer on a teller machine.</span></p>
<p><span class="koboSpan" id="kobo.153.1">On the other hand, if you have a supermarket chain using a star topology, it won’t scale to thousands of remote machines, as each supermarket requires a large amount of data transfer to handle all transactions and employees.</span></p>
<p><span class="koboSpan" id="kobo.154.1">So, the use of star topologies is limited to the amount of traffic it can handle in the central node. </span><span class="koboSpan" id="kobo.154.2">In the star topology, we have two device functions, a device that will be either at the remote location or in the main office.</span></p>
<p><span class="koboSpan" id="kobo.155.1">Network capacity planning is trivial when dealing with star topologies, as the main office node is updated as it grows.</span></p>
<div>
<div class="IMG---Figure" id="_idContainer009">
<span class="koboSpan" id="kobo.156.1"><img alt="Figure 1.2 – A star topology" src="image/B18165_01_002.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.157.1">Figure 1.2 – A star topology</span></p>
<h3><span class="koboSpan" id="kobo.158.1">Hierarchical or tree topologies</span></h3>
<p><span class="koboSpan" id="kobo.159.1">Hierarchical topologies </span><a id="_idIndexMarker036"/><span class="koboSpan" id="kobo.160.1">are used to </span><a id="_idIndexMarker037"/><span class="koboSpan" id="kobo.161.1">optimize traffic, where larger nodes are used to aggregate traffic to smaller nodes in a hierarchical matter (see the example in </span><em class="italic"><span class="koboSpan" id="kobo.162.1">Figure 1.3</span></em><span class="koboSpan" id="kobo.163.1">). </span><span class="koboSpan" id="kobo.163.2">These topologies can scale to thousands of nodes; however, because of the number of nodes in the path, the topologies </span><a id="_idIndexMarker038"/><span class="koboSpan" id="kobo.164.1">can cause undesirable latency and extra node costs.</span></p>
<p><span class="koboSpan" id="kobo.165.1">An</span><a id="_idIndexMarker039"/><span class="koboSpan" id="kobo.166.1"> internet service provider normally uses a hierarchical topology to concentrate customer traffic in certain remote locations before aggregating even more in other locations.</span></p>
<p><span class="koboSpan" id="kobo.167.1">There is no limit on the number of nodes on this type of topology, and it’s one of the foundations of the internet global infrastructure.</span></p>
<p><span class="koboSpan" id="kobo.168.1">In the </span><a id="_idIndexMarker040"/><span class="koboSpan" id="kobo.169.1">hierarchical topologies, we have multiple device functions, the </span><strong class="bold"><span class="koboSpan" id="kobo.170.1">customer premises equipment</span></strong><span class="koboSpan" id="kobo.171.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.172.1">CPE</span></strong><span class="koboSpan" id="kobo.173.1">), aggregators, distributors, core, and peering, among others.</span></p>
<p><span class="koboSpan" id="kobo.174.1">Depending on the size of this topology, it can introduce a longer path, which will add significant latency. </span><span class="koboSpan" id="kobo.174.2">For instance, in </span><em class="italic"><span class="koboSpan" id="kobo.175.1">Figure 1.3</span></em><span class="koboSpan" id="kobo.176.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.177.1">A1</span></strong><span class="koboSpan" id="kobo.178.1"> has to cross five hosts to reach </span><strong class="bold"><span class="koboSpan" id="kobo.179.1">A7</span></strong><span class="koboSpan" id="kobo.180.1">.</span></p>
<p><span class="koboSpan" id="kobo.181.1">Network capacity planning is focused on the aggregation points, and augmenting the network is </span><a id="_idIndexMarker041"/><span class="koboSpan" id="kobo.182.1">not that </span><a id="_idIndexMarker042"/><span class="koboSpan" id="kobo.183.1">difficult.</span></p>
<div>
<div class="IMG---Figure" id="_idContainer010">
<span class="koboSpan" id="kobo.184.1"><img alt="Figure 1.3 – A hierarchical or tree topology" src="image/B18165_01_003.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.185.1">Figure 1.3 – A hierarchical or tree topology</span></p>
<h3><span class="koboSpan" id="kobo.186.1">Clos topologies</span></h3>
<p><span class="koboSpan" id="kobo.187.1">This </span><a id="_idIndexMarker043"/><span class="koboSpan" id="kobo.188.1">type </span><a id="_idIndexMarker044"/><span class="koboSpan" id="kobo.189.1">of topology is also known as a </span><strong class="bold"><span class="koboSpan" id="kobo.190.1">Clos network</span></strong><span class="koboSpan" id="kobo.191.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.192.1">fabric</span></strong><span class="koboSpan" id="kobo.193.1">. </span><span class="koboSpan" id="kobo.193.2">This </span><a id="_idIndexMarker045"/><span class="koboSpan" id="kobo.194.1">topology is used to increase the number of ports without compromising latency and throughput and is often used in data centers. </span><span class="koboSpan" id="kobo.194.2">This topology is composed of at least three stages. </span><span class="koboSpan" id="kobo.194.3">Note that there is no oversubscription or aggregation like in the hierarchical topologies. </span><span class="koboSpan" id="kobo.194.4">The Clos topology provides the same amount of available bandwidth on the input and output. </span><span class="koboSpan" id="kobo.194.5">The stage names are normally </span><strong class="bold"><span class="koboSpan" id="kobo.195.1">spines</span></strong><span class="koboSpan" id="kobo.196.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.197.1">leafs</span></strong><span class="koboSpan" id="kobo.198.1">. </span><span class="koboSpan" id="kobo.198.2">The spines</span><a id="_idIndexMarker046"/><span class="koboSpan" id="kobo.199.1"> are always in the center and only have connections to the Clos nodes. </span><span class="koboSpan" id="kobo.199.2">Leaves </span><a id="_idIndexMarker047"/><span class="koboSpan" id="kobo.200.1">are used to connect to external devices or networks.</span></p>
<p><em class="italic"><span class="koboSpan" id="kobo.201.1">Figure 1.4</span></em><span class="koboSpan" id="kobo.202.1"> shows an</span><a id="_idIndexMarker048"/><span class="koboSpan" id="kobo.203.1"> example of a 16-port Clos network. </span><span class="koboSpan" id="kobo.203.2">Note that normally, all connections between a spine node to a leaf node are </span><em class="italic"><span class="koboSpan" id="kobo.204.1">back to back</span></em><span class="koboSpan" id="kobo.205.1">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer011">
<span class="koboSpan" id="kobo.206.1"><img alt="Figure 1.4 – A Clos topology" src="image/B18165_01_004.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.207.1">Figure 1.4 – A Clos topology</span></p>
<p><span class="koboSpan" id="kobo.208.1">Why are</span><a id="_idIndexMarker049"/><span class="koboSpan" id="kobo.209.1"> these topologies used? </span><span class="koboSpan" id="kobo.209.2">To increase the number </span><a id="_idIndexMarker050"/><span class="koboSpan" id="kobo.210.1">of ports available without compromising throughput. </span><span class="koboSpan" id="kobo.210.2">This kind of topology is also used inside a router to provide connectivity between interface cards. </span><span class="koboSpan" id="kobo.210.3">Some companies use small devices to increase the number of ports that are offered without raising the cost as smaller devices are normally cheaper.</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.211.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.212.1">One additional characteristic of the Clos network is that it has the same distance between any two external ports (in terms of nodes in the path), therefore the latency in normal conditions is the same. </span><span class="koboSpan" id="kobo.212.2">For instance, in </span><em class="italic"><span class="koboSpan" id="kobo.213.1">Figure 1.4</span></em><span class="koboSpan" id="kobo.214.1">, the latency between an external port on node L1 to an external port on L4 or E1 is the same.</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.215.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.216.1">More information on Clos networks can be found in an interesting paper from Google called </span><em class="italic"><span class="koboSpan" id="kobo.217.1">Jupiter Rising: A Decade of Clos Topologies and Centralized Control in Google’s Datacenter Network</span></em><span class="koboSpan" id="kobo.218.1"> – ACM SIGCOMM Computer Communication Review, Volume 45, Issue 4, October 2015.</span></p>
<h3><span class="koboSpan" id="kobo.219.1">Mixed topologies</span></h3>
<p><span class="koboSpan" id="kobo.220.1">A mixed topology </span><a id="_idIndexMarker051"/><span class="koboSpan" id="kobo.221.1">is used in large corporations </span><a id="_idIndexMarker052"/><span class="koboSpan" id="kobo.222.1">where latency and traffic are both important to care of. </span><span class="koboSpan" id="kobo.222.2">Normally, star topologies and P2P are used to shorten paths and reduce latency, whereas hierarchical topologies are used to optimize and aggregate traffic, and finally, Clos networks to increase the number of ports.</span></p>
<p><span class="koboSpan" id="kobo.223.1">Modern cloud service providers are migrating to a more complex topology, where there are connections between elements where latency matters and aggregate device functions where traffic matters.</span></p>
<p><span class="koboSpan" id="kobo.224.1">Network capacity planning is normally harder because connections are not totally hierarchical and aggregation points are not necessarily part of all traffic paths. </span><span class="koboSpan" id="kobo.224.2">An example of this kind of mixed topology is shown in </span><em class="italic"><span class="koboSpan" id="kobo.225.1">Figure 1.5</span></em><span class="koboSpan" id="kobo.226.1">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer012">
<span class="koboSpan" id="kobo.227.1"><img alt="Figure 1.5 – A mixed topology" src="image/B18165_01_005.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.228.1">Figure 1.5 – A mixed topology</span></p>
<h3><span class="koboSpan" id="kobo.229.1">Interface speeds</span></h3>
<p><span class="koboSpan" id="kobo.230.1">A </span><a id="_idIndexMarker053"/><span class="koboSpan" id="kobo.231.1">very important point that some engineers get confused about is the</span><a id="_idIndexMarker054"/><span class="koboSpan" id="kobo.232.1"> interface speed representation. </span><span class="koboSpan" id="kobo.232.2">1 KB in memory representation is 2^10 or 1,024 bytes and 1 GB is 2^30, which is 1,073,741,824 bytes. </span><span class="koboSpan" id="kobo.232.3">For interface speeds, the same does not apply, and 1 Kbps is actually 1,000 bits/second, while 1 Gbps is 1,000,000,000 bits/second (more details can be found at </span><a href="https://en.wikipedia.org/wiki/Data-rate_units"><span class="koboSpan" id="kobo.233.1">https://en.wikipedia.org/wiki/Data-rate_units</span></a><span class="koboSpan" id="kobo.234.1">).</span></p>
<h3><span class="koboSpan" id="kobo.235.1">Device types and functions</span></h3>
<p><span class="koboSpan" id="kobo.236.1">Network devices</span><a id="_idIndexMarker055"/><span class="koboSpan" id="kobo.237.1"> used to have specific functions as CPU and memory were scarce and expensive. </span><span class="koboSpan" id="kobo.237.2">Nowadays, network devices can have multiple functions when required. </span><span class="koboSpan" id="kobo.237.3">In large networks, devices have fewer functions as they tend to get overloaded easier when traffic demands increase. </span><span class="koboSpan" id="kobo.237.4">Here are some </span><a id="_idIndexMarker056"/><span class="koboSpan" id="kobo.238.1">of the functions that a device can have:</span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.239.1">Hub</span></strong><span class="koboSpan" id="kobo.240.1">: This is a </span><a id="_idIndexMarker057"/><span class="koboSpan" id="kobo.241.1">very old term to designate a device that only</span><a id="_idIndexMarker058"/><span class="koboSpan" id="kobo.242.1"> repeats the physical signal.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.243.1">Switch</span></strong><span class="koboSpan" id="kobo.244.1">: A</span><a id="_idIndexMarker059"/><span class="koboSpan" id="kobo.245.1"> device that works only on the data link layer. </span><span class="koboSpan" id="kobo.245.2">It is </span><a id="_idIndexMarker060"/><span class="koboSpan" id="kobo.246.1">normally used in LANs, and it works by switching frames. </span><span class="koboSpan" id="kobo.246.2">The most common protocol used on these devices</span><a id="_idIndexMarker061"/><span class="koboSpan" id="kobo.247.1"> to control paths is the </span><strong class="bold"><span class="koboSpan" id="kobo.248.1">Spanning Tree Protocol</span></strong><span class="koboSpan" id="kobo.249.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.250.1">STP</span></strong><span class="koboSpan" id="kobo.251.1">).</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.252.1">Router</span></strong><span class="koboSpan" id="kobo.253.1">: A </span><a id="_idIndexMarker062"/><span class="koboSpan" id="kobo.254.1">device that works only on the network layer or IP Layer. </span><span class="koboSpan" id="kobo.254.2">It is used to interconnect multiple LANs or create long-haul </span><a id="_idIndexMarker063"/><span class="koboSpan" id="kobo.255.1">remote connections. </span><span class="koboSpan" id="kobo.255.2">Internally, a router routes packets using a routing protocol to exchange route information with other routers. </span><span class="koboSpan" id="kobo.255.3">Some routers can also switch frames or work as a switch.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.256.1">NAT</span></strong><span class="koboSpan" id="kobo.257.1">: NAT is </span><a id="_idIndexMarker064"/><span class="koboSpan" id="kobo.258.1">devices that replace source and destination</span><a id="_idIndexMarker065"/><span class="koboSpan" id="kobo.259.1"> IP addresses to allow the use of private IP addresses or to isolate internal traffic from external traffic.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.260.1">Firewall</span></strong><span class="koboSpan" id="kobo.261.1">: Normally, devices</span><a id="_idIndexMarker066"/><span class="koboSpan" id="kobo.262.1"> that control the traffic that </span><a id="_idIndexMarker067"/><span class="koboSpan" id="kobo.263.1">passes through it by looking into the content of the frame or the packet. </span><span class="koboSpan" id="kobo.263.2">There are several different types of firewalls, and some might be super complex, which includes encrypting and decrypting traffic.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.264.1">Load balancers</span></strong><span class="koboSpan" id="kobo.265.1">: When </span><a id="_idIndexMarker068"/><span class="koboSpan" id="kobo.266.1">servers can’t handle too many</span><a id="_idIndexMarker069"/><span class="koboSpan" id="kobo.267.1"> clients because of hardware limitations, load balancers can be used to deal with the client demands by sharing the client request between several servers. </span><span class="koboSpan" id="kobo.267.2">Those devices also look into the packet content to determine which server would get the traffic.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.268.1">Network server</span></strong><span class="koboSpan" id="kobo.269.1">: A </span><a id="_idIndexMarker070"/><span class="koboSpan" id="kobo.270.1">computer used to provide some sort of </span><em class="italic"><span class="koboSpan" id="kobo.271.1">service</span></em><span class="koboSpan" id="kobo.272.1"> to the </span><a id="_idIndexMarker071"/><span class="koboSpan" id="kobo.273.1">network, for instance, an authentication server, an NTP server, or a Syslog collector.</span></li>
</ul>
<h3><span class="koboSpan" id="kobo.274.1">Oversubscription</span></h3>
<p><span class="koboSpan" id="kobo.275.1">In network jargon, this </span><a id="_idIndexMarker072"/><span class="koboSpan" id="kobo.276.1">term is used to describe nodes or links in the network that aggregate traffic from other parts of the network and statistically use it to their advantage. </span><span class="koboSpan" id="kobo.276.2">For instance, they have a 1 Gbps interface to connect to the internet and 1,000 customers with 10 Mbps interfaces to use the service, which is an oversubscription of 1 to 10. </span><span class="koboSpan" id="kobo.276.3">This practice is quite normal and is only possible to use because of the characteristics of the client’s traffic that allow such aggregation without degradation. </span><span class="koboSpan" id="kobo.276.4">There are lots of mathematical models and papers on the internet describing this behavior and how to use it in your favor.</span></p>
<p><span class="koboSpan" id="kobo.277.1">But some traffic can’t be aggregated without being degraded. </span><span class="koboSpan" id="kobo.277.2">In a data center, the traffic that can’t be oversubscribed is the traffic between servers, such as remote disk, data transfers, and database replicas. </span><span class="koboSpan" id="kobo.277.3">In this scenario, the best solution is to interconnect them without oversubscription using a solution such as non-blocking Clos topologies.</span></p>
<p><span class="koboSpan" id="kobo.278.1">Browsing web pages, watching videos, and receiving messages from most of the traffic on the internet, which easily allows the aggregation technique without degradation.</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.279.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.280.1">More information on oversubscription can be found in the paper </span><em class="italic"><span class="koboSpan" id="kobo.281.1">Evaluating Impacts of Oversubscription on Future Internet Business Models</span></em><span class="koboSpan" id="kobo.282.1"> by A. </span><span class="koboSpan" id="kobo.282.2">Raju, V. </span><span class="koboSpan" id="kobo.282.3">Gonçalves, and P. </span><span class="koboSpan" id="kobo.282.4">Ballon – Published in Networking Workshops, 25 May 2012 – Computer Science.</span></p>
<p><span class="koboSpan" id="kobo.283.1">In this section, we went over the basic components of computer networks, including protocols, topology types, interface speeds, and device types. </span><span class="koboSpan" id="kobo.283.2">By now, you should be able to identify these terms more easily and will be familiar with their meanings, because we are going to use these terms throughout this book. </span><span class="koboSpan" id="kobo.283.3">Moving on, we are going to review more terms related to network architecture.</span></p>
<h1 id="_idParaDest-21"><a id="_idTextAnchor020"/><span class="koboSpan" id="kobo.284.1">Describing network architecture and its components</span></h1>
<p><span class="koboSpan" id="kobo.285.1">The term </span><a id="_idIndexMarker073"/><span class="koboSpan" id="kobo.286.1">network architecture was introduced in the early 2000s, mimicking roles in the construction industry, where architects design and civil engineers build. </span><span class="koboSpan" id="kobo.286.2">Different companies use the term differently, but in this book, network architecture will be used to refer to the design of the network and its functions.</span></p>
<p><span class="koboSpan" id="kobo.287.1">For a good network architecture, it is desirable to have a document describing in detail the first three layers of the network, from the physical layer to the routing layer. </span><span class="koboSpan" id="kobo.287.2">With this documentation, it is easy for the engineers to understand the physical connections, the Ethernet domains, and the routing protocols used.</span></p>
<h2 id="_idParaDest-22"><a id="_idTextAnchor021"/><span class="koboSpan" id="kobo.288.1">Diagrams</span></h2>
<p><span class="koboSpan" id="kobo.289.1">A </span><a id="_idIndexMarker074"/><span class="koboSpan" id="kobo.290.1">network diagram is mostly like a map, where the cities are the nodes and the roads are the links that connect them. </span><span class="koboSpan" id="kobo.290.2">For a network engineer, diagrams are crucial to describe how nodes are connected, and they also can group and demarcate important areas. </span><span class="koboSpan" id="kobo.290.3">A good diagram is easy to interpret and follow how data flows.</span></p>
<p><span class="koboSpan" id="kobo.291.1">There are up to three types of diagrams; they can be integrated on the same page and graph, or they can be separated onto different pages. </span><span class="koboSpan" id="kobo.291.2">The main diagrams are one to show the physical connections, which can include the technology involved in the data link layer, and the switching and routing diagrams.</span></p>
<p><span class="koboSpan" id="kobo.292.1">In </span><em class="italic"><span class="koboSpan" id="kobo.293.1">Figure 1.6</span></em><span class="koboSpan" id="kobo.294.1">, we can see an example of a network diagram:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer013">
<span class="koboSpan" id="kobo.295.1"><img alt="Figure 1.6 – Example of a network diagram" src="image/B18165_01_006.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.296.1">Figure 1.6 – Example of a network diagram</span></p>
<p><em class="italic"><span class="koboSpan" id="kobo.297.1">Figure 1.7</span></em><span class="koboSpan" id="kobo.298.1"> shows </span><a id="_idIndexMarker075"/><span class="koboSpan" id="kobo.299.1">examples of network diagram symbols:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer014">
<span class="koboSpan" id="kobo.300.1"><img alt="Figure 1.7 – Network diagram symbols" src="image/B18165_01_007.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.301.1">Figure 1.7 – Network diagram symbols</span></p>
<h2 id="_idParaDest-23"><a id="_idTextAnchor022"/><span class="koboSpan" id="kobo.302.1">Network node names</span></h2>
<p><span class="koboSpan" id="kobo.303.1">A network node</span><a id="_idIndexMarker076"/><span class="koboSpan" id="kobo.304.1"> is a device that is essentially used to interconnect and serve as a transport of the data in the network. </span><span class="koboSpan" id="kobo.304.2">It can be either a hub, a switch, or a router. </span><span class="koboSpan" id="kobo.304.3">To help network engineers identify the node function, names are used to describe their main function. </span><span class="koboSpan" id="kobo.304.4">Here are some of them:</span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.305.1">Transit router</span></strong><span class="koboSpan" id="kobo.306.1">: These</span><a id="_idIndexMarker077"/><span class="koboSpan" id="kobo.307.1"> are routers that have interfaces </span><a id="_idIndexMarker078"/><span class="koboSpan" id="kobo.308.1">with other service providers. </span><span class="koboSpan" id="kobo.308.2">These links are normally used as a service to access other networks, therefore they have a cost because they are normally connected to other big carriers.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.309.1">Peer router</span></strong><span class="koboSpan" id="kobo.310.1">: These</span><a id="_idIndexMarker079"/><span class="koboSpan" id="kobo.311.1"> routers have interfaces with other</span><a id="_idIndexMarker080"/><span class="koboSpan" id="kobo.312.1"> networks in a peer configuration, meaning none of the parts pay to use it. </span><span class="koboSpan" id="kobo.312.2">In these links, only the traffic between the peer companies is exchanged, and the traffic destinated to outside networks are not allowed. </span><span class="koboSpan" id="kobo.312.3">Accessing external networks would be the case when using transit routers.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.313.1">Core router</span></strong><span class="koboSpan" id="kobo.314.1">: These</span><a id="_idIndexMarker081"/><span class="koboSpan" id="kobo.315.1"> are nodes that are in the center of the</span><a id="_idIndexMarker082"/><span class="koboSpan" id="kobo.316.1"> network. </span><span class="koboSpan" id="kobo.316.2">They normally handle a large amount of traffic and have high-speed interfaces. </span><span class="koboSpan" id="kobo.316.3">Their throughput capacity is the highest in the network, but they have fewer interfaces as they concentrate the traffic of the network.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.317.1">Distribution router</span></strong><span class="koboSpan" id="kobo.318.1">: These</span><a id="_idIndexMarker083"/><span class="koboSpan" id="kobo.319.1"> are nodes </span><a id="_idIndexMarker084"/><span class="koboSpan" id="kobo.320.1">that normally connect to the core and aggregation routers. </span><span class="koboSpan" id="kobo.320.2">They normally interconnect different locations of the network. </span><span class="koboSpan" id="kobo.320.3">They don’t have many interfaces and their throughput capacity is high, but not as high as the core router.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.321.1">Aggregation router</span></strong><span class="koboSpan" id="kobo.322.1">: These</span><a id="_idIndexMarker085"/><span class="koboSpan" id="kobo.323.1"> routers normally aggregate the </span><a id="_idIndexMarker086"/><span class="koboSpan" id="kobo.324.1">traffic from the access routers. </span><span class="koboSpan" id="kobo.324.2">They are normally located in the same area or location as the access routers, and they have fewer interfaces compared to the access routers.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.325.1">Access router</span></strong><span class="koboSpan" id="kobo.326.1">: Some </span><a id="_idIndexMarker087"/><span class="koboSpan" id="kobo.327.1">architects add a node </span><a id="_idIndexMarker088"/><span class="koboSpan" id="kobo.328.1">that connects all last-mile networks or CPE nodes. </span><span class="koboSpan" id="kobo.328.2">These routers are located closer to the customer and have more interfaces than any other router.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.329.1">Top of the rack</span></strong><span class="koboSpan" id="kobo.330.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.331.1">TOR</span></strong><span class="koboSpan" id="kobo.332.1">): </span><strong class="bold"><span class="koboSpan" id="kobo.333.1">TOR</span></strong><span class="koboSpan" id="kobo.334.1"> refers to </span><a id="_idIndexMarker089"/><span class="koboSpan" id="kobo.335.1">nodes</span><a id="_idIndexMarker090"/><span class="koboSpan" id="kobo.336.1"> that can be either a switch or a router, depending on the architecture. </span><span class="koboSpan" id="kobo.336.2">They are responsible for connecting the servers in the rack to the rest of the network.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.337.1">Clos rack</span></strong><span class="koboSpan" id="kobo.338.1">: A </span><a id="_idIndexMarker091"/><span class="koboSpan" id="kobo.339.1">Clos network, as described before, is a</span><a id="_idIndexMarker092"/><span class="koboSpan" id="kobo.340.1"> technique to add connectivity to multiple servers using small devices. </span><span class="koboSpan" id="kobo.340.2">A Clos rack is seen by the rest of the network as a single unique block, and in terms of architecture, it acts as a single node, normally used as a single router with a large number of interfaces.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.341.1">CPE</span></strong><span class="koboSpan" id="kobo.342.1">: CPE is </span><a id="_idIndexMarker093"/><span class="koboSpan" id="kobo.343.1">the node that is installed at </span><a id="_idIndexMarker094"/><span class="koboSpan" id="kobo.344.1">the customer’s location. </span><span class="koboSpan" id="kobo.344.2">It normally has one interface</span><a id="_idIndexMarker095"/><span class="koboSpan" id="kobo.345.1"> connecting to the last-mile network and one local interface that can be an Ethernet or a wireless Ethernet. </span><span class="koboSpan" id="kobo.345.2">These devices can also implement NAT, firewall and, in some cases, they have multiple local interfaces, which can act as a switch and a router. </span><span class="koboSpan" id="kobo.345.3">These nodes are cheap and small with very low throughput capacity compared to the other nodes.</span></li>
</ul>
<h2 id="_idParaDest-24"><a id="_idTextAnchor023"/><span class="koboSpan" id="kobo.346.1">The last-mile network</span></h2>
<p><span class="koboSpan" id="kobo.347.1">This</span><a id="_idIndexMarker096"/><span class="koboSpan" id="kobo.348.1"> term is used</span><a id="_idIndexMarker097"/><span class="koboSpan" id="kobo.349.1"> to describe the architecture used to connect the customer to the network. </span><span class="koboSpan" id="kobo.349.2">Normally, this term is only used for ISPs, but some corporations also use it to interconnect their branches.</span></p>
<p><span class="koboSpan" id="kobo.350.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.351.1">last-mile network</span></strong><span class="koboSpan" id="kobo.352.1"> has a range of coverage and normally doesn’t cross the 1 km mark but depends on the type of technology used. </span><span class="koboSpan" id="kobo.352.2">Here are some of the most common last-mile networks:</span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.353.1">Cable TV</span></strong><span class="koboSpan" id="kobo.354.1">: There </span><a id="_idIndexMarker098"/><span class="koboSpan" id="kobo.355.1">are several technologies used here to provide data communication using the cable TV that the customer has installed. </span><span class="koboSpan" id="kobo.355.2">The most used one is DOCSIS, which in 2017 was upgraded to version 4. </span><span class="koboSpan" id="kobo.355.3">This solution uses a single cable that is shared to several premises.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.356.1">Digital subscriber line</span></strong><span class="koboSpan" id="kobo.357.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.358.1">DSL</span></strong><span class="koboSpan" id="kobo.359.1">): DSL </span><a id="_idIndexMarker099"/><span class="koboSpan" id="kobo.360.1">uses the old telephone line to pass data communication. </span><span class="koboSpan" id="kobo.360.2">For that, there are lots of standards, and the most common ones are VDSL and ADSL. </span><span class="koboSpan" id="kobo.360.3">The DSL solutions don’t share the same media as cable TV does, and there is one cable for each customer.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.361.1">Fiber to the premises</span></strong><span class="koboSpan" id="kobo.362.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.363.1">FTTP</span></strong><span class="koboSpan" id="kobo.364.1">): FTTP is </span><a id="_idIndexMarker100"/><span class="koboSpan" id="kobo.365.1">when an optical cable arrives at a customer’s premises. </span><span class="koboSpan" id="kobo.365.2">Like cable TV, the most common implementation is a single fiber that crosses several different customers in a sharable manner. </span><span class="koboSpan" id="kobo.365.3">The </span><a id="_idIndexMarker101"/><span class="koboSpan" id="kobo.366.1">most common technology is a </span><strong class="bold"><span class="koboSpan" id="kobo.367.1">passive optical network</span></strong><span class="koboSpan" id="kobo.368.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.369.1">PON</span></strong><span class="koboSpan" id="kobo.370.1">) or, more </span><a id="_idIndexMarker102"/><span class="koboSpan" id="kobo.371.1">specifically, the </span><strong class="bold"><span class="koboSpan" id="kobo.372.1">Gigabit Ethernet PON</span></strong><span class="koboSpan" id="kobo.373.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.374.1">GPON</span></strong><span class="koboSpan" id="kobo.375.1">) (or G.984).</span></li>
</ul>
<p class="callout-heading"><span class="koboSpan" id="kobo.376.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.377.1">Further details on GPON networks can be found in the paper </span><em class="italic"><span class="koboSpan" id="kobo.378.1">GPON in Telecommunication Network</span></em><span class="koboSpan" id="kobo.379.1"> – November 2010 – Paper from the International Congress on Ultra Modern Telecommunications and Control Systems (ICUMT) conference, 2010.</span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.380.1">Wi-Fi</span></strong><span class="koboSpan" id="kobo.381.1">: Normally, this</span><a id="_idIndexMarker103"/><span class="koboSpan" id="kobo.382.1"> technology is used </span><a id="_idIndexMarker104"/><span class="koboSpan" id="kobo.383.1">privately inside a company or a home, but some ISPs use the Wireless Ethernet standards (IEEE 802.11 family) to provide the last mile to customers using omnidirectional antennas. </span><span class="koboSpan" id="kobo.383.2">This particular use is different depending on each country and it depends on the government’s legislation. </span><span class="koboSpan" id="kobo.383.3">They are normally </span><a id="_idIndexMarker105"/><span class="koboSpan" id="kobo.384.1">advertised as </span><strong class="bold"><span class="koboSpan" id="kobo.385.1">Ethernet hotspots</span></strong><span class="koboSpan" id="kobo.386.1"> (</span><a href="https://en.wikipedia.org/wiki/Hotspot_(Wi-Fi)"><span class="koboSpan" id="kobo.387.1">https://en.wikipedia.org/wiki/Hotspot_(Wi-Fi)</span></a><span class="koboSpan" id="kobo.388.1">).</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.389.1">Satellite</span></strong><span class="koboSpan" id="kobo.390.1">: For data </span><a id="_idIndexMarker106"/><span class="koboSpan" id="kobo.391.1">communication using satellites, there are two methods: one using geostationary satellites and the other using constellation satellites. </span><span class="koboSpan" id="kobo.391.2">The difference between them is the latency, as geostationary orbits very far from earth. </span><span class="koboSpan" id="kobo.391.3">The constellation method has low latency but</span><a id="_idIndexMarker107"/><span class="koboSpan" id="kobo.392.1"> has handover challenges as the satellites keep moving, normally having very low data throughput. </span><span class="koboSpan" id="kobo.392.2">The most famous technology using geostationary is VSAT. </span><span class="koboSpan" id="kobo.392.3">Internet using VSAT adds around 250 ms every time it has to travel from earth to the satellite, therefore it is a 500 ms round trip. </span><span class="koboSpan" id="kobo.392.4">But the dark ages of high latency might be over as SpaceX has announced they have finally solved the handover problem using the constellation method. </span><span class="koboSpan" id="kobo.392.5">This new service is</span><a id="_idIndexMarker108"/><span class="koboSpan" id="kobo.393.1"> called </span><strong class="bold"><span class="koboSpan" id="kobo.394.1">Starlink</span></strong><span class="koboSpan" id="kobo.395.1"> and has promised to have high capacity, low latency, and high availability using low orbit satellites.</span></li>
</ul>
<p class="callout-heading"><span class="koboSpan" id="kobo.396.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.397.1">A good discussion on the Starlink network can be found in the paper </span><em class="italic"><span class="koboSpan" id="kobo.398.1">Starlink Analysis</span></em><span class="koboSpan" id="kobo.399.1"> – July 15, 2021 – Research group ROADMAP-5G at the Carinthia University of Applied Sciences.</span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.400.1">Power line communication</span></strong><span class="koboSpan" id="kobo.401.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.402.1">PLC</span></strong><span class="koboSpan" id="kobo.403.1">) </span><strong class="bold"><span class="koboSpan" id="kobo.404.1">or HomePlug</span></strong><span class="koboSpan" id="kobo.405.1">: PLC, or </span><strong class="bold"><span class="koboSpan" id="kobo.406.1">broadband over power lines</span></strong><span class="koboSpan" id="kobo.407.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.408.1">BoPL</span></strong><span class="koboSpan" id="kobo.409.1">), uses </span><a id="_idIndexMarker109"/><span class="koboSpan" id="kobo.410.1">the power cables to communicate data. </span><span class="koboSpan" id="kobo.410.2">This is achieved by </span><a id="_idIndexMarker110"/><span class="koboSpan" id="kobo.411.1">modulating high frequencies on the wire. </span><span class="koboSpan" id="kobo.411.2">Most transformers won’t be able to pass through</span><a id="_idIndexMarker111"/><span class="koboSpan" id="kobo.412.1"> the information as they act as a </span><a id="_idIndexMarker112"/><span class="koboSpan" id="kobo.413.1">low-frequency cut filter, so it has to be contained within a house or between posts without a transformer. </span><span class="koboSpan" id="kobo.413.2">The most common technologies here are the HomePlug AV2 and IEEE 1901-2010 (</span><a href="https://ieeexplore.ieee.org/document/5678772"><span class="koboSpan" id="kobo.414.1">https://ieeexplore.ieee.org/document/5678772</span></a><span class="koboSpan" id="kobo.415.1">).</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.416.1">Mobile</span></strong><span class="koboSpan" id="kobo.417.1">: Definitely</span><a id="_idIndexMarker113"/><span class="koboSpan" id="kobo.418.1"> the most popular network is the mobile last mile. </span><span class="koboSpan" id="kobo.418.2">Today, they use 5G technology, but other old networks are still in use, such as 4G (LTE), 3G, and GPRS.</span></li>
</ul>
<p class="callout-heading"><span class="koboSpan" id="kobo.419.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.420.1">More information on mobile technologies can be found at </span><em class="italic"><span class="koboSpan" id="kobo.421.1">Evolution of Mobile Communication Technology towards 5G Networks and Challenges</span></em><span class="koboSpan" id="kobo.422.1"> by A. </span><span class="koboSpan" id="kobo.422.2">Agarwal, K. </span><span class="koboSpan" id="kobo.422.3">Agarwal, S. </span><span class="koboSpan" id="kobo.422.4">Agarwal, and G. </span><span class="koboSpan" id="kobo.422.5">Misra – American Journal of Electrical and Electronic Engineering, 2019, Vol. </span><span class="koboSpan" id="kobo.422.6">7, No. </span><span class="koboSpan" id="kobo.422.7">2, pp. </span><span class="koboSpan" id="kobo.422.8">34-37.</span></p>
<h2 id="_idParaDest-25"><a id="_idTextAnchor024"/><span class="koboSpan" id="kobo.423.1">The physical architecture</span></h2>
<p><span class="koboSpan" id="kobo.424.1">The</span><a id="_idIndexMarker114"/><span class="koboSpan" id="kobo.425.1"> physical architecture is sometimes not </span><a id="_idIndexMarker115"/><span class="koboSpan" id="kobo.426.1">necessarily the description of the cables or the fibers that will connect the devices but the infrastructure used by the network as </span><a id="_idIndexMarker116"/><span class="koboSpan" id="kobo.427.1">a </span><strong class="bold"><span class="koboSpan" id="kobo.428.1">physical</span></strong><span class="koboSpan" id="kobo.429.1"> layer defined in the TCP/IP stack. </span><span class="koboSpan" id="kobo.429.2">This means we can reuse other foreign networks as a </span><strong class="bold"><span class="koboSpan" id="kobo.430.1">physical layer</span></strong><span class="koboSpan" id="kobo.431.1"> even though they have their own protocol stacks. </span><span class="koboSpan" id="kobo.431.2">Here are some of the possible physical technologies used in the architecture:</span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.432.1">Dark fiber</span></strong><span class="koboSpan" id="kobo.433.1">: When </span><a id="_idIndexMarker117"/><span class="koboSpan" id="kobo.434.1">connecting nodes, the term </span><strong class="bold"><span class="koboSpan" id="kobo.435.1">dark fiber</span></strong><span class="koboSpan" id="kobo.436.1"> means</span><a id="_idIndexMarker118"/><span class="koboSpan" id="kobo.437.1"> the nodes that are connected will be using a fiber that does not contain a repeater or underlying infrastructure. </span><span class="koboSpan" id="kobo.437.2">In the case of a connection between two nodes using dark fiber, if one node loses power, the other will not receive any light from the fiber. </span><span class="koboSpan" id="kobo.437.3">In this scenario, a fiber cut is perceived in both ends immediately, and interfaces go down instantaneously with a fiber cut. </span><span class="koboSpan" id="kobo.437.4">Only the packets in the output interface queue are discarded when a failure occurs.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.438.1">Synchronous Transport Module</span></strong><span class="koboSpan" id="kobo.439.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.440.1">STM</span></strong><span class="koboSpan" id="kobo.441.1">): STM</span><a id="_idIndexMarker119"/><span class="koboSpan" id="kobo.442.1"> was initially created to multiplex </span><a id="_idIndexMarker120"/><span class="koboSpan" id="kobo.443.1">digital phone lines, but later started to be used for data communication. </span><span class="koboSpan" id="kobo.443.2">The most common one was STM-1, which was 155 Mbps. </span><span class="koboSpan" id="kobo.443.3">Routers</span><a id="_idIndexMarker121"/><span class="koboSpan" id="kobo.444.1"> used to have an interface that could encapsulates STM frames toward an STM network. </span><span class="koboSpan" id="kobo.444.2">The STM network would just switch the</span><a id="_idIndexMarker122"/><span class="koboSpan" id="kobo.445.1"> frames from one end to the other. </span><span class="koboSpan" id="kobo.445.2">A cut in the fiber using this technology might not be perceived quickly enough, causing a huge amount of packet loss. </span><span class="koboSpan" id="kobo.445.3">As </span><a id="_idIndexMarker123"/><span class="koboSpan" id="kobo.446.1">we will describe later, </span><strong class="bold"><span class="koboSpan" id="kobo.447.1">bidirectional forwarding detection</span></strong><span class="koboSpan" id="kobo.448.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.449.1">BFD</span></strong><span class="koboSpan" id="kobo.450.1">) needs to be used here to avoid drastic problems.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.451.1">Dense wavelength-division multiplexing</span></strong><span class="koboSpan" id="kobo.452.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.453.1">DWDM</span></strong><span class="koboSpan" id="kobo.454.1">): DWDM is an evolution of STM. </span><span class="koboSpan" id="kobo.454.2">The</span><a id="_idIndexMarker124"/><span class="koboSpan" id="kobo.455.1"> DWDM network</span><a id="_idIndexMarker125"/><span class="koboSpan" id="kobo.456.1"> is a switch network that also has a frame and time and wave division for each of the packets of data carried, similar to STM but enhanced. </span><span class="koboSpan" id="kobo.456.2">Similarly, BFD is necessary because a cut in the fiber here would not be perceived quickly enough, causing a huge amount of packet loss.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.457.1">Back to back</span></strong><span class="koboSpan" id="kobo.458.1">: As</span><a id="_idIndexMarker126"/><span class="koboSpan" id="kobo.459.1"> explained before, the term </span><em class="italic"><span class="koboSpan" id="kobo.460.1">back to back</span></em><span class="koboSpan" id="kobo.461.1"> is normally used to designate the nodes that are connected directly without any other physical layer in between, such as repeaters.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.462.1">Network tunnels</span></strong><span class="koboSpan" id="kobo.463.1">: Network tunnels </span><a id="_idIndexMarker127"/><span class="koboSpan" id="kobo.464.1">are</span><a id="_idIndexMarker128"/><span class="koboSpan" id="kobo.465.1"> points of the network that are used to encapsulate the traffic and travel in a different network. </span><span class="koboSpan" id="kobo.465.2">Tunnels can be either Layer 2 or Layer 3 and are implemented to abstract the network that is being carried. </span><span class="koboSpan" id="kobo.465.3">In some network architectures, they are meant to reach a distant part of the network using a foreign infrastructure.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.466.1">VPN tunnels</span></strong><span class="koboSpan" id="kobo.467.1">: These </span><a id="_idIndexMarker129"/><span class="koboSpan" id="kobo.468.1">are like network tunnels. </span><span class="koboSpan" id="kobo.468.2">VPN tunnels</span><a id="_idIndexMarker130"/><span class="koboSpan" id="kobo.469.1"> normally add encryption.</span></li>
</ul>
<h2 id="_idParaDest-26"><a id="_idTextAnchor025"/><span class="koboSpan" id="kobo.470.1">The routing architecture</span></h2>
<p><span class="koboSpan" id="kobo.471.1">It’s </span><a id="_idIndexMarker131"/><span class="koboSpan" id="kobo.472.1">important to define how the traffic will flow in the</span><a id="_idIndexMarker132"/><span class="koboSpan" id="kobo.473.1"> network. </span><span class="koboSpan" id="kobo.473.2">For that, we need to have a proper design in terms of routing distribution. </span><span class="koboSpan" id="kobo.473.3">This is necessary so failure remediation, redundant paths, load balancing, routing policies, and traffic agreements can be implemented. </span><span class="koboSpan" id="kobo.473.4">The architecture would have to include an internal routing protocol and an external routing protocol if connected outside. </span><span class="koboSpan" id="kobo.473.5">Here is a summary:</span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.474.1">Interior gateway protocol</span></strong><span class="koboSpan" id="kobo.475.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.476.1">IGP</span></strong><span class="koboSpan" id="kobo.477.1">): IGP is a routing protocol that runs in a delimited </span><a id="_idIndexMarker133"/><span class="koboSpan" id="kobo.478.1">area or location, normally</span><a id="_idIndexMarker134"/><span class="koboSpan" id="kobo.479.1"> internally within the same organization, as the name says. </span><span class="koboSpan" id="kobo.479.2">In the IGP domain, routers exchange path information by announcing and receiving topology updates. </span><span class="koboSpan" id="kobo.479.3">The most common IGPs use link state information to build the routing path topology. </span><span class="koboSpan" id="kobo.479.4">If an interface goes down, the update has to be propagated to the entire IGP domain. </span><span class="koboSpan" id="kobo.479.5">Isolated areas are used to avoid having to update a too-large topology and cause instability. </span><span class="koboSpan" id="kobo.479.6">Historically, the popular IGPs were RIP and EIGRP, but today, only </span><strong class="bold"><span class="koboSpan" id="kobo.480.1">Open Shortest Path First</span></strong><span class="koboSpan" id="kobo.481.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.482.1">OSPF</span></strong><span class="koboSpan" id="kobo.483.1">) and </span><strong class="bold"><span class="koboSpan" id="kobo.484.1">Intermediate System-to-Intermediate System</span></strong><span class="koboSpan" id="kobo.485.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.486.1">IS-IS</span></strong><span class="koboSpan" id="kobo.487.1">) are used.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.488.1">Exterior gateway protocol</span></strong><span class="koboSpan" id="kobo.489.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.490.1">EGP</span></strong><span class="koboSpan" id="kobo.491.1">): EGP </span><a id="_idIndexMarker135"/><span class="koboSpan" id="kobo.492.1">is a </span><a id="_idIndexMarker136"/><span class="koboSpan" id="kobo.493.1">routing protocol used to exchange routing information between organizations. </span><span class="koboSpan" id="kobo.493.2">It normally does not contain link state information, only the path distance. </span><span class="koboSpan" id="kobo.493.3">The most common </span><a id="_idIndexMarker137"/><span class="koboSpan" id="kobo.494.1">EGP protocol is </span><strong class="bold"><span class="koboSpan" id="kobo.495.1">Border Gateway Protocol</span></strong><span class="koboSpan" id="kobo.496.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.497.1">BGP</span></strong><span class="koboSpan" id="kobo.498.1">).</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.499.1">IS-IS</span></strong><span class="koboSpan" id="kobo.500.1">: IS-IS is an</span><a id="_idIndexMarker138"/><span class="koboSpan" id="kobo.501.1"> IGP protocol designed by ISO, registered</span><a id="_idIndexMarker139"/><span class="koboSpan" id="kobo.502.1"> as ISO 10589. </span><span class="koboSpan" id="kobo.502.2">It is a link state protocol based on the shortest path algorithm called Dijkstra’s algorithm. </span><span class="koboSpan" id="kobo.502.3">It’s the second most used IGP.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.503.1">OSPF</span></strong><span class="koboSpan" id="kobo.504.1">: OSPF</span><a id="_idIndexMarker140"/><span class="koboSpan" id="kobo.505.1"> is </span><a id="_idIndexMarker141"/><span class="koboSpan" id="kobo.506.1">an IGP protocol designed by IETF, registered originally in 1989 by RFC1131 and updated a few times later. </span><span class="koboSpan" id="kobo.506.2">Version 3 is the last version described in RFC5340. </span><span class="koboSpan" id="kobo.506.3">OSPF also uses Dijkstra’s algorithm to calculate paths and is the most popular and used IGP. </span><span class="koboSpan" id="kobo.506.4">OSPF uses areas to scale and improve stability during routing database updates.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.507.1">BGP</span></strong><span class="koboSpan" id="kobo.508.1">: BGP </span><a id="_idIndexMarker142"/><span class="koboSpan" id="kobo.509.1">is a unique protocol used to exchange routing </span><a id="_idIndexMarker143"/><span class="koboSpan" id="kobo.510.1">information between organizations. </span><span class="koboSpan" id="kobo.510.2">It was first introduced in 1989 in RFC1105. </span><span class="koboSpan" id="kobo.510.3">It is also one of the protocols with more updates and extensions on the IETF and can be used for different purposes, such</span><a id="_idIndexMarker144"/><span class="koboSpan" id="kobo.511.1"> as </span><strong class="bold"><span class="koboSpan" id="kobo.512.1">internal BGP</span></strong><span class="koboSpan" id="kobo.513.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.514.1">iBGP</span></strong><span class="koboSpan" id="kobo.515.1">), </span><strong class="bold"><span class="koboSpan" id="kobo.516.1">Multiprotocol BGP</span></strong><span class="koboSpan" id="kobo.517.1">(</span><strong class="bold"><span class="koboSpan" id="kobo.518.1">MP-BGP</span></strong><span class="koboSpan" id="kobo.519.1">) defined</span><a id="_idIndexMarker145"/><span class="koboSpan" id="kobo.520.1"> in RFC4760, MPLS (MP-BGP), and </span><a id="_idIndexMarker146"/><span class="koboSpan" id="kobo.521.1">recently, BGPsec, defined in 2017 in RFC8205. </span><span class="koboSpan" id="kobo.521.2">BGP is a path vector-based protocol, also known as a distance vector protocol, and it does not use link information like OSPF.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.522.1">Autonomous system number</span></strong><span class="koboSpan" id="kobo.523.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.524.1">ASN</span></strong><span class="koboSpan" id="kobo.525.1">): Like</span><a id="_idIndexMarker147"/><span class="koboSpan" id="kobo.526.1"> the IP range, ASN is a unique number </span><a id="_idIndexMarker148"/><span class="koboSpan" id="kobo.527.1">that is</span><a id="_idIndexMarker149"/><span class="koboSpan" id="kobo.528.1"> associated with an organization when starting using BGP to exchange routing tables. </span><span class="koboSpan" id="kobo.528.2">It is controlled by the five regional internet </span><a id="_idIndexMarker150"/><span class="koboSpan" id="kobo.529.1">registries: </span><strong class="bold"><span class="koboSpan" id="kobo.530.1">ARIN</span></strong><span class="koboSpan" id="kobo.531.1"> in North America, </span><strong class="bold"><span class="koboSpan" id="kobo.532.1">LACNIC</span></strong><span class="koboSpan" id="kobo.533.1"> in Latin</span><a id="_idIndexMarker151"/><span class="koboSpan" id="kobo.534.1"> America, </span><strong class="bold"><span class="koboSpan" id="kobo.535.1">APNIC</span></strong><span class="koboSpan" id="kobo.536.1"> in </span><a id="_idIndexMarker152"/><span class="koboSpan" id="kobo.537.1">Asia-Pacific, </span><strong class="bold"><span class="koboSpan" id="kobo.538.1">RIPE</span></strong><span class="koboSpan" id="kobo.539.1"> in Europe, and </span><strong class="bold"><span class="koboSpan" id="kobo.540.1">AFRINIC</span></strong><span class="koboSpan" id="kobo.541.1"> in </span><a id="_idIndexMarker153"/><span class="koboSpan" id="kobo.542.1">Africa. </span><span class="koboSpan" id="kobo.542.2">When</span><a id="_idIndexMarker154"/><span class="koboSpan" id="kobo.543.1"> routing tables are exchanged using BGP, the ASN is carried on the path. </span><span class="koboSpan" id="kobo.543.2">For instance, Amazon.com uses ASN 16509 (</span><a href="https://whois.arin.net/rest/asn/AS16509"><span class="koboSpan" id="kobo.544.1">https://whois.arin.net/rest/asn/AS16509</span></a><span class="koboSpan" id="kobo.545.1">).</span></li>
</ul>
<p><span class="koboSpan" id="kobo.546.1">Let’s explore how a network works in terms of its state.</span></p>
<h2 id="_idParaDest-27"><a id="_idTextAnchor026"/><span class="koboSpan" id="kobo.547.1">Types of failure</span></h2>
<p><span class="koboSpan" id="kobo.548.1">In</span><a id="_idIndexMarker155"/><span class="koboSpan" id="kobo.549.1"> computer</span><a id="_idIndexMarker156"/><span class="koboSpan" id="kobo.550.1"> networks, a major problem is the </span><em class="italic"><span class="koboSpan" id="kobo.551.1">instability</span></em><span class="koboSpan" id="kobo.552.1"> caused by failures in routing tables, links, or nodes. </span><span class="koboSpan" id="kobo.552.2">If a node goes numb, for example, the CPU freezes, the other nodes have to detect it quickly so they can divert the traffic through a different path. </span><span class="koboSpan" id="kobo.552.3">But how can a failure be detected to reroute quickly enough? </span><span class="koboSpan" id="kobo.552.4">Let’s explore the types of failures first:</span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.553.1">Link failure</span></strong><span class="koboSpan" id="kobo.554.1">: A</span><a id="_idIndexMarker157"/><span class="koboSpan" id="kobo.555.1"> link failure is when a connection between two </span><a id="_idIndexMarker158"/><span class="koboSpan" id="kobo.556.1">nodes stops receiving or sending data because there is an interruption on the path. </span><span class="koboSpan" id="kobo.556.2">The failure can be caused by a physical problem, such as a fiber cut, environmental conditions, such as heavy rain, or because of middleware equipment failure. </span><span class="koboSpan" id="kobo.556.3">Nodes normally detect whether a link is down by the lack </span><a id="_idIndexMarker159"/><span class="koboSpan" id="kobo.557.1">of signal on the input, but in some cases, such as when using</span><a id="_idIndexMarker160"/><span class="koboSpan" id="kobo.558.1"> repeaters or underlying networks (such as DWDM), the signal is present on the input but data can’t be delivered. </span><span class="koboSpan" id="kobo.558.2">So, it requires a higher-level protocol to monitor and detect the communication breakdown instead of the interface input signal alone; otherwise, data will be discarded continuously until a node decides to reroute the traffic, which can take several seconds in some cases.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.559.1">Node failure</span></strong><span class="koboSpan" id="kobo.560.1">: A node </span><a id="_idIndexMarker161"/><span class="koboSpan" id="kobo.561.1">can fail in several</span><a id="_idIndexMarker162"/><span class="koboSpan" id="kobo.562.1"> different ways; the most common ones are power loss </span><a id="_idIndexMarker163"/><span class="koboSpan" id="kobo.563.1">and OS freeze. </span><span class="koboSpan" id="kobo.563.2">A software glitch can cause a router to freeze for minutes or even hours, causing packet loss or not, depending on where the freeze occurs, in either the forwarding plane or the control plane. </span><span class="koboSpan" id="kobo.563.3">Detecting this failure quickly is a bit harder because all interface signals are still present, and the forwarding plane might be still working.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.564.1">Flapping</span></strong><span class="koboSpan" id="kobo.565.1">: Interface</span><a id="_idIndexMarker164"/><span class="koboSpan" id="kobo.566.1"> flapping is when the interface keeps going down for short periods without being detected. </span><span class="koboSpan" id="kobo.566.2">Flapping causes data loss without detection and normally is hard to be discovered without specific equipment to measure the medium connected normally on both ends. </span><span class="koboSpan" id="kobo.566.3">The</span><a id="_idIndexMarker165"/><span class="koboSpan" id="kobo.567.1"> term </span><strong class="bold"><span class="koboSpan" id="kobo.568.1">flapping</span></strong><span class="koboSpan" id="kobo.569.1"> also is used when a route keeps appearing and disappearing on the</span><a id="_idIndexMarker166"/><span class="koboSpan" id="kobo.570.1"> routing table, called </span><strong class="bold"><span class="koboSpan" id="kobo.571.1">route flapping</span></strong><span class="koboSpan" id="kobo.572.1">.</span></li>
</ul>
<h2 id="_idParaDest-28"><a id="_idTextAnchor027"/><span class="koboSpan" id="kobo.573.1">Failure detection techniques</span></h2>
<p><span class="koboSpan" id="kobo.574.1">Here</span><a id="_idIndexMarker167"/><span class="koboSpan" id="kobo.575.1"> are</span><a id="_idIndexMarker168"/><span class="koboSpan" id="kobo.576.1"> some techniques to detect failure:</span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.577.1">Signal off</span></strong><span class="koboSpan" id="kobo.578.1">: Interfaces</span><a id="_idIndexMarker169"/><span class="koboSpan" id="kobo.579.1"> have a very simple way of detecting failure, by the absence of the main signal or light. </span><span class="koboSpan" id="kobo.579.2">In the case of fiber, if the intensity of the light received is too low, it would consider the interface down. </span><span class="koboSpan" id="kobo.579.3">Note that this detection is made on the input interface.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.580.1">Protocol keep alive and hello packets</span></strong><span class="koboSpan" id="kobo.581.1">: Some routing protocols have keep alive (or </span><em class="italic"><span class="koboSpan" id="kobo.582.1">hello</span></em><span class="koboSpan" id="kobo.583.1">) messages</span><a id="_idIndexMarker170"/><span class="koboSpan" id="kobo.584.1"> to check whether their neighbors are still alive. </span><span class="koboSpan" id="kobo.584.2">In OSPF, the default period for hello packets is 10 seconds for LAN interfaces, and 30 seconds for P2P connections. </span><span class="koboSpan" id="kobo.584.3">BGP has a default of 30 seconds. </span><span class="koboSpan" id="kobo.584.4">For today’s network speed, 30 seconds is a lot of data lost. </span><span class="koboSpan" id="kobo.584.5">A 10 Gbps interface would discard a total of 37 GB if fully loaded. </span><span class="koboSpan" id="kobo.584.6">In today’s protocol implementation, the period of sending these messages can’t be shorter than a few seconds, which is still a long period of data lost.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.585.1">Link BFD</span></strong><span class="koboSpan" id="kobo.586.1">: In 2010, IETF published RFC5880, which describes the BFD protocol, which </span><a id="_idIndexMarker171"/><span class="koboSpan" id="kobo.587.1">was intended to allow routers to detect failure on their interfaces in the order of microseconds. </span><span class="koboSpan" id="kobo.587.2">The BFD message supports a minimum of 1 ms interval. </span><span class="koboSpan" id="kobo.587.3">BFD is normally implemented on the interface hardware, which allows it to respond without interrupting the main CPU.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.588.1">The BFD routing protocol</span></strong><span class="koboSpan" id="kobo.589.1">: Link BFD is normally enabled in all interfaces of the</span><a id="_idIndexMarker172"/><span class="koboSpan" id="kobo.590.1"> network to detect failures quickly, but it would not help in the case of OS router freeze or control plane failure. </span><span class="koboSpan" id="kobo.590.2">To avoid packet loss in these cases, all major protocols have the BFD capability, including OSPF, IS-IS, and BGP. </span><span class="koboSpan" id="kobo.590.3">Although</span><a id="_idIndexMarker173"/><span class="koboSpan" id="kobo.591.1"> the BFD protocol message supports microsecond intervals, the implementation using routing protocols is normally in the order of milliseconds and limited to the number of points. </span><span class="koboSpan" id="kobo.591.2">The reason is that these messages need to be handled by the main CPU, and too many might cause performance degradation.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.592.1">Route flapping detection</span></strong><span class="koboSpan" id="kobo.593.1">: The</span><a id="_idIndexMarker174"/><span class="koboSpan" id="kobo.594.1"> routing protocol can detect persistent route flapping and suppress it for a period. </span><span class="koboSpan" id="kobo.594.2">This is useful to avoid recalculating paths when a route is not actually stable. </span><span class="koboSpan" id="kobo.594.3">When suppression is in place, normally, the default route is taken.</span></li>
</ul>
<h2 id="_idParaDest-29"><a id="_idTextAnchor028"/><span class="koboSpan" id="kobo.595.1">Control plane and forwarding plane</span></h2>
<p><span class="koboSpan" id="kobo.596.1">It is </span><a id="_idIndexMarker175"/><span class="koboSpan" id="kobo.597.1">very important to understand the difference between a forwarding plane and a control plane, especially if you are working on</span><a id="_idIndexMarker176"/><span class="koboSpan" id="kobo.598.1"> network automation. </span><span class="koboSpan" id="kobo.598.2">Let’s explore them in this section.</span></p>
<p><span class="koboSpan" id="kobo.599.1">The forwarding plane, or data plane, is an abstract concept where some processes, equipment, and hardware are used to forward traffic through the network. </span><span class="koboSpan" id="kobo.599.2">In other words, the forwarding plane defines all entities in the network responsible for receiving data, transporting it, and delivering it.</span></p>
<p><span class="koboSpan" id="kobo.600.1">The</span><a id="_idIndexMarker177"/><span class="koboSpan" id="kobo.601.1"> control plane is an abstract concept designated to all entities in the network responsible for constructing the data path, removing it, or updating it.</span></p>
<p><span class="koboSpan" id="kobo.602.1">A forwarding plane</span><a id="_idIndexMarker178"/><span class="koboSpan" id="kobo.603.1"> works when data is carried from one input point, </span><em class="italic"><span class="koboSpan" id="kobo.604.1">A</span></em><span class="koboSpan" id="kobo.605.1">, to another output point, </span><em class="italic"><span class="koboSpan" id="kobo.606.1">B</span></em><span class="koboSpan" id="kobo.607.1">, but does not need to have a control plane working. </span><span class="koboSpan" id="kobo.607.2">The control plane would only work if a path does not exist from </span><em class="italic"><span class="koboSpan" id="kobo.608.1">A</span></em><span class="koboSpan" id="kobo.609.1"> to </span><em class="italic"><span class="koboSpan" id="kobo.610.1">B</span></em><span class="koboSpan" id="kobo.611.1">. </span><span class="koboSpan" id="kobo.611.2">The control plane also works in case of a failure because the original path might be interrupted and needs to be constructed again.</span></p>
<p><span class="koboSpan" id="kobo.612.1">So, why is this important in network automation? </span><span class="koboSpan" id="kobo.612.2">Because the control plane has to update forwarding paths if there is a problem with the forwarding plane, which can cause packet drop, jitter, and delays. </span><span class="koboSpan" id="kobo.612.3">A stable network does not require any path updates and consequently minimum work for the control plane. </span><span class="koboSpan" id="kobo.612.4">Network automation needs to avoid any particular automation that might cause the control plane to update the network.</span></p>
<h2 id="_idParaDest-30"><a id="_idTextAnchor029"/><span class="koboSpan" id="kobo.613.1">Graceful restart</span></h2>
<p><span class="koboSpan" id="kobo.614.1">Usually, when</span><a id="_idIndexMarker179"/><span class="koboSpan" id="kobo.615.1"> a router restarts, all the routing</span><a id="_idIndexMarker180"/><span class="koboSpan" id="kobo.616.1"> peers detect that the session went down and then came up. </span><span class="koboSpan" id="kobo.616.2">This </span><em class="italic"><span class="koboSpan" id="kobo.617.1">down/up</span></em><span class="koboSpan" id="kobo.618.1"> transition results in the control plane working to recompute all the route paths, generating thousands of updates in the entire network and, consequently, causing a churn to the forwarding plane. </span><span class="koboSpan" id="kobo.618.2">This recomputation can also cause routing flaps, which may create transient forwarding black holes and transient forwarding loops. </span><span class="koboSpan" id="kobo.618.3">These transient problems also consume a lot of resources on the control plane of the routers affected.</span></p>
<p><span class="koboSpan" id="kobo.619.1">Therefore, a </span><strong class="bold"><span class="koboSpan" id="kobo.620.1">graceful restart</span></strong><span class="koboSpan" id="kobo.621.1"> was created to avoid such drastic changes if a restart is required.</span></p>
<p><span class="koboSpan" id="kobo.622.1">The</span><a id="_idIndexMarker181"/><span class="koboSpan" id="kobo.623.1"> idea </span><a id="_idIndexMarker182"/><span class="koboSpan" id="kobo.624.1">is we could restart all control plane processes in one router without affecting the forwarding plane and the control plane of the other neighbor routers. </span><span class="koboSpan" id="kobo.624.2">In practice, a graceful restart is a method to restart the routing processes without affecting the forwarding plane.</span></p>
<p><span class="koboSpan" id="kobo.625.1">In 2003, IETF published RFC3623 to define the implementation of the graceful restart for OSPF. </span><span class="koboSpan" id="kobo.625.2">Today, the main control plane protocols have some sort of graceful restart, including BGP, IS-IS, MPLS, RSVP, and LDP.</span></p>
<p><span class="koboSpan" id="kobo.626.1">When building network automation, this kind of method is preferred to update the software.</span></p>
<p><span class="koboSpan" id="kobo.627.1">In this section, we’ve reviewed network architecture and its components. </span><span class="koboSpan" id="kobo.627.2">We got more details on routing and physical architecture components. </span><span class="koboSpan" id="kobo.627.3">We also learned how important control and data plane separation is, along with the failure types. </span><span class="koboSpan" id="kobo.627.4">It is important to know these network terminologies to help with network automation. </span><span class="koboSpan" id="kobo.627.5">Next, we’re going to review network management and its components.</span></p>
<h1 id="_idParaDest-31"><a id="_idTextAnchor030"/><span class="koboSpan" id="kobo.628.1">Illustrating network management components, network bastions, and more</span></h1>
<p><span class="koboSpan" id="kobo.629.1">Before we finish this chapter, let’s touch on some of the terms used in network management and planning.</span></p>
<h2 id="_idParaDest-32"><a id="_idTextAnchor031"/><span class="koboSpan" id="kobo.630.1">ACL</span></h2>
<p><span class="koboSpan" id="kobo.631.1">An </span><strong class="bold"><span class="koboSpan" id="kobo.632.1">ACL</span></strong><span class="koboSpan" id="kobo.633.1"> is used almost </span><a id="_idIndexMarker183"/><span class="koboSpan" id="kobo.634.1">everywhere in the network to control access by filtering the IP packet based on the IP or port number.</span></p>
<p><span class="koboSpan" id="kobo.635.1">The ACL can be implemented on either the forwarding plane or the control plane. </span><span class="koboSpan" id="kobo.635.2">When implemented on the forwarding plane, they are used to limit the IP reachability to certain parts of the network and also avoid IP spoofing. </span><span class="koboSpan" id="kobo.635.3">When implemented on the control plane, they are protecting the routing protocol and management ports from malicious connections.</span></p>
<p><span class="koboSpan" id="kobo.636.1">ACLs are also used in the management interfaces to avoid undesirable traffic when using in-band management.</span></p>
<h2 id="_idParaDest-33"><a id="_idTextAnchor032"/><span class="koboSpan" id="kobo.637.1">Management system and managed elements</span></h2>
<p><span class="koboSpan" id="kobo.638.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.639.1">management system</span></strong><span class="koboSpan" id="kobo.640.1"> is the</span><a id="_idIndexMarker184"/><span class="koboSpan" id="kobo.641.1"> platform including the software and hardware responsible for managing the network. </span><span class="koboSpan" id="kobo.641.2">It can be centralized or distributed. </span><span class="koboSpan" id="kobo.641.3">The managed elements are the targets of the management system, including routers, switches, modems, repeaters, and intelligent racks, among others.</span></p>
<p><span class="koboSpan" id="kobo.642.1">Note that the </span><strong class="bold"><span class="koboSpan" id="kobo.643.1">managed element</span></strong><span class="koboSpan" id="kobo.644.1"> does </span><a id="_idIndexMarker185"/><span class="koboSpan" id="kobo.645.1">not need to be part of the network. </span><span class="koboSpan" id="kobo.645.2">It can be a support system, such as a rack with fans or an air conditioning unit. </span><span class="koboSpan" id="kobo.645.3">When writing code for network management, it is important to classify the elements appropriately so they can be managed accordingly.</span></p>
<h2 id="_idParaDest-34"><a id="_idTextAnchor033"/><span class="koboSpan" id="kobo.646.1">In-band and out-of-band management</span></h2>
<p><span class="koboSpan" id="kobo.647.1">In-band </span><a id="_idIndexMarker186"/><span class="koboSpan" id="kobo.648.1">and </span><strong class="bold"><span class="koboSpan" id="kobo.649.1">out-of-band</span></strong><span class="koboSpan" id="kobo.650.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.651.1">OOB</span></strong><span class="koboSpan" id="kobo.652.1">) management</span><a id="_idIndexMarker187"/><span class="koboSpan" id="kobo.653.1"> refer to how the management system traffic reaches the management elements.</span></p>
<p><span class="koboSpan" id="kobo.654.1">For OOB management, there is an isolated network infrastructure that carries only management traffic, which is not connected to the main network in any way and only to the management ports of every managed element. </span><span class="koboSpan" id="kobo.654.2">In other words, the forwarding plane does not carry any management traffic. </span><span class="koboSpan" id="kobo.654.3">In addition, the OOB network should be able to exist and deliver management traffic independently of the main network routing status, because, in the case of a catastrophic scenario, the OOB network should be enough to reach the managed element even if its network interfaces are down. </span><span class="koboSpan" id="kobo.654.4">It’s important to note that this network normally does not carry much traffic and the nodes and interfaces on it have low throughput. </span><span class="koboSpan" id="kobo.654.5">Some OOB networks are implemented using mobile networks.</span></p>
<p><span class="koboSpan" id="kobo.655.1">In in-band management, there is no physical network isolation between the forwarding plane and management traffic, so the interface that carries customer data also carries management traffic. </span><span class="koboSpan" id="kobo.655.2">In this scenario, ACLs are used extensively to avoid unwanted traffic toward the ports of the managed elements. </span><span class="koboSpan" id="kobo.655.3">In addition, some network architecture adds priority queues to interfaces to allow the management traffic to be delivered first and avoid discards on heavily loaded links.</span></p>
<p><span class="koboSpan" id="kobo.656.1">Some management systems use both to talk to the devices, some via in-band and some via OOB networks. </span><span class="koboSpan" id="kobo.656.2">Normally, heavy traffic, such as OS upgrades and event logging, goes via in-band and the element console access goes via the OOB network.</span></p>
<h2 id="_idParaDest-35"><a id="_idTextAnchor034"/><span class="koboSpan" id="kobo.657.1">Network telemetry</span></h2>
<p><span class="koboSpan" id="kobo.658.1">Telemetry is not</span><a id="_idIndexMarker188"/><span class="koboSpan" id="kobo.659.1"> a new term and refers to any type of equipment that can monitor field variables remotely, such as temperature or humidity. </span><span class="koboSpan" id="kobo.659.2">This term was then imported to computer networks to refer to a group of procedures used to collect network information remotely.</span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.660.1">Network telemetry</span></strong><span class="koboSpan" id="kobo.661.1"> refers </span><a id="_idIndexMarker189"/><span class="koboSpan" id="kobo.662.1">to an area in a computer network responsible for encompassing various procedures and systems to define, collect, and analyze network data. </span><span class="koboSpan" id="kobo.662.2">In some cases, it can mean a new method of obtaining network data by using streaming methods from the network devices.</span></p>
<h2 id="_idParaDest-36"><a id="_idTextAnchor035"/><span class="koboSpan" id="kobo.663.1">Management information base</span></h2>
<p><span class="koboSpan" id="kobo.664.1">A </span><strong class="bold"><span class="koboSpan" id="kobo.665.1">management information base</span></strong><span class="koboSpan" id="kobo.666.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.667.1">MIB</span></strong><span class="koboSpan" id="kobo.668.1">) is a </span><a id="_idIndexMarker190"/><span class="koboSpan" id="kobo.669.1">formal description of a set of objects that can be</span><a id="_idIndexMarker191"/><span class="koboSpan" id="kobo.670.1"> managed using the </span><strong class="bold"><span class="koboSpan" id="kobo.671.1">Simple Network Management Protocol</span></strong><span class="koboSpan" id="kobo.672.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.673.1">SNMP</span></strong><span class="koboSpan" id="kobo.674.1">).</span></p>
<p><span class="koboSpan" id="kobo.675.1">An MIB can be public or private. </span><span class="koboSpan" id="kobo.675.2">When public, its definitions are published by an RFC, such as the interface group MIB defined on RFC2863. </span><span class="koboSpan" id="kobo.675.3">When private, it has to be provided by the vendor who owns the MIB.</span></p>
<p><span class="koboSpan" id="kobo.676.1">The MIB is normally organized in a tree by numbers (</span><em class="italic"><span class="koboSpan" id="kobo.677.1">Figure 1.8</span></em><span class="koboSpan" id="kobo.678.1">). </span><span class="koboSpan" id="kobo.678.2">When describing an object in an MIB tree, it is normally referred</span><a id="_idIndexMarker192"/><span class="koboSpan" id="kobo.679.1"> to as an </span><strong class="bold"><span class="koboSpan" id="kobo.680.1">object identifier</span></strong><span class="koboSpan" id="kobo.681.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.682.1">OID</span></strong><span class="koboSpan" id="kobo.683.1">). </span><span class="koboSpan" id="kobo.683.2">For instance, the number of packets seen in an interface output is represented by an OID </span><a id="_idIndexMarker193"/><span class="koboSpan" id="kobo.684.1">called </span><strong class="bold"><span class="koboSpan" id="kobo.685.1">IfOutUcastPkts</span></strong><span class="koboSpan" id="kobo.686.1">, which has the sequence </span><em class="italic"><span class="koboSpan" id="kobo.687.1">.1.3.6.1.2.1.2.17</span></em><span class="koboSpan" id="kobo.688.1"> (</span><a href="http://www.net-snmp.org/docs/mibs/interfaces.html"><span class="koboSpan" id="kobo.689.1">http://www.net-snmp.org/docs/mibs/interfaces.html</span></a><span class="koboSpan" id="kobo.690.1">).</span></p>
<p><span class="koboSpan" id="kobo.691.1">The OID normally contains a value that is a variable that can have different types, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.692.1">COUNTER</span></strong><span class="koboSpan" id="kobo.693.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.694.1">GAUGE</span></strong><span class="koboSpan" id="kobo.695.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.696.1">INTEGER</span></strong><span class="koboSpan" id="kobo.697.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.698.1">OCTETSTR</span></strong><span class="koboSpan" id="kobo.699.1">, among others.</span></p>
<div>
<div class="IMG---Figure" id="_idContainer015">
<span class="koboSpan" id="kobo.700.1"><img alt="Figure 1.8 – The SNMP MIB tree" src="image/B18165_01_008.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.701.1">Figure 1.8 – The SNMP MIB tree</span></p>
<h2 id="_idParaDest-37"><a id="_idTextAnchor036"/><span class="koboSpan" id="kobo.702.1">Network bastions</span></h2>
<p><span class="koboSpan" id="kobo.703.1">The term </span><strong class="bold"><span class="koboSpan" id="kobo.704.1">bastion</span></strong><span class="koboSpan" id="kobo.705.1"> comes</span><a id="_idIndexMarker194"/><span class="koboSpan" id="kobo.706.1"> from fortifications that were used to protect cannons during medieval wars. </span><span class="koboSpan" id="kobo.706.2">At that time, a bastion was an angularly shaped part of an outer wall, usually placed around the corners of a fort to allow defensive fire in many directions.</span></p>
<p><span class="koboSpan" id="kobo.707.1">Like cannons in medieval times, network elements need layers </span><a id="_idIndexMarker195"/><span class="koboSpan" id="kobo.708.1">for protection. </span><strong class="bold"><span class="koboSpan" id="kobo.709.1">Network bastions</span></strong><span class="koboSpan" id="kobo.710.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.711.1">bastion hosts</span></strong><span class="koboSpan" id="kobo.712.1"> are </span><a id="_idIndexMarker196"/><span class="koboSpan" id="kobo.713.1">physical devices, normally computers, with defensive mechanisms built in that are connected to two or more networks.</span></p>
<p><span class="koboSpan" id="kobo.714.1">Bastion hosts are popularly designed using Linux installed on a computer with multiple Ethernet ports. </span><span class="koboSpan" id="kobo.714.2">Each Ethernet port connects to a different part of the network where isolation or protection is desired.</span></p>
<p><span class="koboSpan" id="kobo.715.1">To protect the networks, bastion hosts do not forward traffic, and normally, the IP forwarding capability is disabled like the following example applied in Linux:</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.716.1">
# sysctl net.ipv4.ip_forward
net.ipv4.ip_forward = 0</span></pre>
<p><span class="koboSpan" id="kobo.717.1">A Linux box </span><a id="_idIndexMarker197"/><span class="koboSpan" id="kobo.718.1">without IP forwarding means traffic can’t be routed between interfaces, so traffic has to be originated in the bastion host to reach an external interface, and no other traffic would go out of the Ethernet port that is not originated locally in the box. </span><span class="koboSpan" id="kobo.718.2">Therefore, bastion hosts need to have authentication, such as a username and password, to allow a </span><em class="italic"><span class="koboSpan" id="kobo.719.1">user</span></em><span class="koboSpan" id="kobo.720.1"> or </span><em class="italic"><span class="koboSpan" id="kobo.721.1">system</span></em><span class="koboSpan" id="kobo.722.1"> to log in and run a shell locally. </span><span class="koboSpan" id="kobo.722.2">From the host, the user might be able to generate IP packets toward the other Ethernet ports.</span></p>
<p><span class="koboSpan" id="kobo.723.1">Network automation will require an additional mechanism to allow accessing the network nodes for configuring them. </span><span class="koboSpan" id="kobo.723.2">We are going to cover these mechanisms later when writing some code to access the nodes.</span></p>
<p><span class="koboSpan" id="kobo.724.1">An example of a bastion host is shown in </span><em class="italic"><span class="koboSpan" id="kobo.725.1">Figure 1.9</span></em><span class="koboSpan" id="kobo.726.1">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer016">
<span class="koboSpan" id="kobo.727.1"><img alt="Figure 1.9 – Bastion host connecting production and corporate networks" src="image/B18165_01_009.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.728.1">Figure 1.9 – Bastion host connecting production and corporate networks</span></p>
<h2 id="_idParaDest-38"><a id="_idTextAnchor037"/><span class="koboSpan" id="kobo.729.1">FCAPS</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.730.1">FCAPS</span></strong><span class="koboSpan" id="kobo.731.1"> is a </span><a id="_idIndexMarker198"/><span class="koboSpan" id="kobo.732.1">management network model and framework defined by ISO for network management. </span><span class="koboSpan" id="kobo.732.2">Its acronym stands for </span><strong class="bold"><span class="koboSpan" id="kobo.733.1">fault, configuration, accounting, performance, and security</span></strong><span class="koboSpan" id="kobo.734.1">. </span><span class="koboSpan" id="kobo.734.2">Each of these is the management category into which the ISO model defines network management tasks. </span><span class="koboSpan" id="kobo.734.3">Let’s look at a very summarized description of each of these tasks:</span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.735.1">Fault</span></strong><span class="koboSpan" id="kobo.736.1">: The</span><a id="_idIndexMarker199"/><span class="koboSpan" id="kobo.737.1"> goal of fault management is to recognize, isolate, correct, and log faults that occur in the network.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.738.1">Configuration</span></strong><span class="koboSpan" id="kobo.739.1">: This</span><a id="_idIndexMarker200"/><span class="koboSpan" id="kobo.740.1"> refers to storing configurations from devices, tracking changes, and provisioning new configurations.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.741.1">Accounting</span></strong><span class="koboSpan" id="kobo.742.1">: This is </span><a id="_idIndexMarker201"/><span class="koboSpan" id="kobo.743.1">concerned with tracking network usage for data transported, per business, client, or user. </span><span class="koboSpan" id="kobo.743.2">The goal is to be able to appropriately be billed or charged for accounting purposes.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.744.1">Performance</span></strong><span class="koboSpan" id="kobo.745.1">: This</span><a id="_idIndexMarker202"/><span class="koboSpan" id="kobo.746.1"> is focused on ensuring that the network works at an acceptable level by monitoring network latency, packet loss, link utilization, packet discards, retransmissions, and error rates.</span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.747.1">Security</span></strong><span class="koboSpan" id="kobo.748.1">: This </span><a id="_idIndexMarker203"/><span class="koboSpan" id="kobo.749.1">refers to controlling access to assets and protocols in the network, which can include AAA systems, ACLs, and firewalls.</span></li>
</ul>
<p><span class="koboSpan" id="kobo.750.1">Why is FCAPS important for network automation? </span><span class="koboSpan" id="kobo.750.2">Because it’s better to write network automation code with tasks separated like in FCAPS, so we can place automation in different parts of the management system accordingly.</span></p>
<h2 id="_idParaDest-39"><a id="_idTextAnchor038"/><span class="koboSpan" id="kobo.751.1">Network planning</span></h2>
<p><span class="koboSpan" id="kobo.752.1">Growing the network</span><a id="_idIndexMarker204"/><span class="koboSpan" id="kobo.753.1"> is hard because if you buy too many resources, you could lose money. </span><span class="koboSpan" id="kobo.753.2">However, if you buy too little, you could lose customers. </span><span class="koboSpan" id="kobo.753.3">Network planning is used to ensure performance and costs are going in the right direction. </span><span class="koboSpan" id="kobo.753.4">In other words, it consists of several activities whose final target is to define an optimal cost-effective network design for the future. </span><span class="koboSpan" id="kobo.753.5">Network planning engineers work with prediction and statistical models to draw the most probable future network growth.</span></p>
<p><span class="koboSpan" id="kobo.754.1">Because of</span><a id="_idIndexMarker205"/><span class="koboSpan" id="kobo.755.1"> the nature of the predictions, the network planning team needs a lot of data from the network, and most of them are probably not easy to collect. </span><span class="koboSpan" id="kobo.755.2">You might be required to collect instantaneous data, which is not available on the current management systems, so you can use your network automation skills for that.</span></p>
<h2 id="_idParaDest-40"><a id="_idTextAnchor039"/><span class="koboSpan" id="kobo.756.1">Network security</span></h2>
<p><span class="koboSpan" id="kobo.757.1">One important </span><a id="_idIndexMarker206"/><span class="koboSpan" id="kobo.758.1">point to mention is the work that companies are doing to create a safe place for traffic to flow. </span><span class="koboSpan" id="kobo.758.2">Most companies today have invested in separate and specialized teams to deal with security, and those teams have engineers that only understand nuances of the network to delineate security rules to be taken when designing and operating computer networks.</span></p>
<p><span class="koboSpan" id="kobo.759.1">Your automation work will probably involve dealing with such security rules applied in the network, and will probably vary by company depending on the technology and level of security required. </span><span class="koboSpan" id="kobo.759.2">A good </span><a id="_idIndexMarker207"/><span class="koboSpan" id="kobo.760.1">overview of network security can be found at </span><a href="https://en.wikipedia.org/wiki/Network_security"><span class="koboSpan" id="kobo.761.1">https://en.wikipedia.org/wiki/Network_security</span></a><span class="koboSpan" id="kobo.762.1">.</span></p>
<h1 id="_idParaDest-41"><a id="_idTextAnchor040"/><span class="koboSpan" id="kobo.763.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.764.1">In this chapter, we reviewed the key points of networking. </span><span class="koboSpan" id="kobo.764.2">The intention was to highlight the main concepts and define some of the network jargon. </span><span class="koboSpan" id="kobo.764.3">At this point, you have enough network background to discuss automation work with any network engineer. </span><span class="koboSpan" id="kobo.764.4">I hope that any work done on network automation coding from now on will make more sense and you’re more familiar with the network terms.</span></p>
<p><span class="koboSpan" id="kobo.765.1">In the next chapter, we will learn about how networks are evolving to be programmable.</span></p>
</div>
<div>
<div id="_idContainer018">
</div>
</div>
</body></html>