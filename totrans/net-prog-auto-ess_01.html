<html><head></head><body>
<div><h1 class="chapter-number" id="_idParaDest-16"><a id="_idTextAnchor015"/>1</h1>
<h1 id="_idParaDest-17"><a id="_idTextAnchor016"/>Network Basics for Development</h1>
<p>This chapter is focused on explaining the basics and jargon used in <strong class="bold">computer networking</strong>. The idea is to build a good foundation to be used throughout the book.</p>
<p>If you are a <em class="italic">network engineer</em> or have experience in this field, you might want to skip it, or perhaps skim through it.</p>
<p>If you are a <em class="italic">software developer</em> with little network experience, this chapter is for you. It will help you build a solid base on network jargon that will be useful when writing code for <strong class="bold">network automation</strong>.</p>
<p>The following are the topics that we will cover in this chapter:</p>
<ul>
<li>Reviewing protocol layers, network device types, and network topologies</li>
<li>Describing network architecture and its components</li>
<li>Illustrating network management components, network bastions, and more</li>
</ul>
<h1 id="_idParaDest-18"><a id="_idTextAnchor017"/>Reviewing protocol layers, network device types, and network topologies</h1>
<p>We have lots to talk about here. But due to the size restraints of this book, I have organized a summary with the most important aspects of today’s network jargon and explained them briefly. I hope you can find some new information to help your automation work.</p>
<h2 id="_idParaDest-19"><a id="_idTextAnchor018"/>Protocol layers</h2>
<p>It’s important<a id="_idIndexMarker000"/> to note that there are several different standards for protocol layers, and the most academic one is the ISO organization called <strong class="bold">OSI model</strong>, which<a id="_idIndexMarker001"/> defines seven layers. But we are going to consider only five defined in the TCP/IP protocol stack, which is used on the internet. Here is a short summary of each of the layers:</p>
<ul>
<li><strong class="bold">Physical layer</strong>: In <a id="_idIndexMarker002"/>this layer are the technologies involved in the physical connection itself where the bits and bytes are transformed into the physical medium, such as the light in fiber optics, electricity in a cable, and radio waves in antennas. At this layer, physical checks can be implemented on the node input, such as power levels, collision, noise, and signal distortion, among other types of checks.</li>
<li><strong class="bold">Data link layer</strong>: Here, the<a id="_idIndexMarker003"/> information is called a <strong class="bold">frame</strong>, and<a id="_idIndexMarker004"/> it contains a delimited size, known as the <strong class="bold">maximum transmission unit</strong> (<strong class="bold">MTU</strong>). The <a id="_idIndexMarker005"/>reason is that a frame is a data representation in bytes that has to move from one node to another one and in a reliable manner without interruption. At this level, frame queues are present; the queues are used to place the frames on the physical layer in sequential order or in priority order. Some data link devices can prioritize certain types of frames, jumping to the front of the queue. At the data link layer, some checks are done, but within the frame itself, such as CRC or checksum. In addition, source and destination addresses can be added to the frame to differentiate destinations on a shared media. The information on the frame is normally used locally within the same organization. This layer is also known as<a id="_idIndexMarker006"/> the <strong class="bold">Ethernet layer</strong>.</li>
<li><strong class="bold">Network layer</strong>: This is<a id="_idIndexMarker007"/> also known as the <strong class="bold">IP layer</strong>, or the<a id="_idIndexMarker008"/> router layer. Here, the information is called a <strong class="bold">packet</strong>, and<a id="_idIndexMarker009"/> it contains the information that goes between nodes that are beyond the layer 2 domain (or the previous Ethernet layer). This level is where the routing protocols are used, the <strong class="bold">network address translation</strong> (<strong class="bold">NAT</strong>) does<a id="_idIndexMarker010"/> its job, some <strong class="bold">access control lists</strong> (<strong class="bold">ACLs</strong>) are <a id="_idIndexMarker011"/>present, and the control packets are, among other functions. The packet on this level has enough information to know where it came from and where it has to go. This layer is also responsible for fragmenting the packet into multiple packets if the frame MTU is smaller than the IP packet. The main information carried in the packet is the <strong class="bold">IP address</strong> and<a id="_idIndexMarker012"/> has source and destination addresses.</li>
<li><code>80</code> for HTTP communication, and to associate it with a <a id="_idIndexMarker019"/>communication <strong class="bold">socket</strong> in the host. The port number is required for the source and destination, which will be used to designate the correct socket to communicate with the host.</li>
<li><strong class="bold">Application layer</strong>: This<a id="_idIndexMarker020"/> is the top of the layers, normally referred to by my professor as the <em class="italic">cherry on the cake</em>. An application layer is used to associate a <strong class="bold">socket</strong> on the host where data will be sent and received. The application normally handles the content of the data, such as page requests on HTTP. The software that we are producing in this book uses this layer to automate the network.</li>
</ul>
<h2 id="_idParaDest-20"><a id="_idTextAnchor019"/>LAN, WAN, internet, and intranet</h2>
<p><strong class="bold">LAN</strong>, or <strong class="bold">local area network</strong>, is used<a id="_idIndexMarker021"/> to refer to networks that are local. Nowadays, it means networks that use the data link layer as the main communication, such as <a id="_idIndexMarker022"/>Ethernet. The reason why the name is more related to the communication layer than the geography is that technology has evolved, allowing Ethernet <a id="_idIndexMarker023"/>switches to communicate over thousands of kilometers. So, a LAN normally designates a topology inside the same organization using Ethernet, but not necessarily geographically in the same location.</p>
<p><strong class="bold">WAN</strong>, or <strong class="bold">wide area network</strong>, is<a id="_idIndexMarker024"/> used to refer to networks that are remotely connected, or technologies that allow nodes to be far apart, such as extinct technologies such as X.25, Frame Relay, and <strong class="bold">Asynchronous Transfer Mode</strong> (<strong class="bold">ATM</strong>). Now, the<a id="_idIndexMarker025"/> term WAN is normally used to designate interfaces or networks that are connected to different networks, or in other words, networks that are not in the same organization, data link layer, or Ethernet domain.</p>
<p class="callout-heading">Information</p>
<p class="callout">For more information about ATM, please refer to the article <em class="italic">Technology and Applications</em> in SSRN Electronic Journal, June 1998, by Jeffrey Scott Ray.</p>
<p>The<a id="_idIndexMarker026"/> internet is what you know, this gigantic network interconnecting everybody worldwide.</p>
<p>The term intranet<a id="_idIndexMarker027"/> was used when corporations were using the internet protocols to communicate internally on their network. The reason is that other technologies were competing with the internet TCP/IP protocol at that time, such as SNA and IPX. So, when the term intranet was used, it was simply to state that the corporate network uses TCP/IP. Nowadays, intranet refers to a network that is within the same organization and not connected to external nodes. Therefore, the network is <em class="italic">safe</em> from external interference.</p>
<h3>Point-to-point connections</h3>
<p>A <strong class="bold">point-to-point</strong> (<strong class="bold">P2P</strong>) connection<a id="_idIndexMarker028"/> is <a id="_idIndexMarker029"/>used to interconnect two nodes. A link between two nodes is normally a P2P connection (as shown in <em class="italic">Figure 1.1</em>), unless using media such as satellite or broadcast antennas. This connection can either be <em class="italic">back to back</em> or not. The term <em class="italic">back to back</em> is normally used to indicate that the nodes are connected directly without any other physical layer between them, such as repeaters. Therefore, back-to-back connections have limited distances due to the noise and distortion introduced in the connection <a id="_idIndexMarker030"/>as <a id="_idIndexMarker031"/>the wiring gets longer. Depending on the speed and the technology used, the distances are limited to within the same room or building.</p>
<div><div><img alt="Figure 1.1 – A P2P connection" src="img/B18165_01_001.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.1 – A P2P connection</p>
<h3>Star or hub-spoke topologies</h3>
<p>Star or hub-spoke topologies <a id="_idIndexMarker032"/>are used <a id="_idIndexMarker033"/>in small and medium companies, where one office is the main distributor and the other locations are consumers. The topology looks like a star, and network elements are smaller and simpler at the remote locations, while being larger and complex at the main distributor (see the example in <em class="italic">Figure 1.2</em>).</p>
<p>Normally, these types <a id="_idIndexMarker034"/>of topologies can scale up to hundreds of nodes, but depending on the traffic, the requirements can scale to thousands. Let’s look at two examples that illustrate the scale of these topologies.</p>
<p>For instance, in a bank, the <a id="_idIndexMarker035"/>automated teller machines are distributed in remote locations, where the main computer is located in the main branch. This can scale to thousands of remote machines as the traffic requirements are small in terms of byte transfer on a teller machine.</p>
<p>On the other hand, if you have a supermarket chain using a star topology, it won’t scale to thousands of remote machines, as each supermarket requires a large amount of data transfer to handle all transactions and employees.</p>
<p>So, the use of star topologies is limited to the amount of traffic it can handle in the central node. In the star topology, we have two device functions, a device that will be either at the remote location or in the main office.</p>
<p>Network capacity planning is trivial when dealing with star topologies, as the main office node is updated as it grows.</p>
<div><div><img alt="Figure 1.2 – A star topology" src="img/B18165_01_002.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.2 – A star topology</p>
<h3>Hierarchical or tree topologies</h3>
<p>Hierarchical topologies <a id="_idIndexMarker036"/>are used to <a id="_idIndexMarker037"/>optimize traffic, where larger nodes are used to aggregate traffic to smaller nodes in a hierarchical matter (see the example in <em class="italic">Figure 1.3</em>). These topologies can scale to thousands of nodes; however, because of the number of nodes in the path, the topologies <a id="_idIndexMarker038"/>can cause undesirable latency and extra node costs.</p>
<p>An<a id="_idIndexMarker039"/> internet service provider normally uses a hierarchical topology to concentrate customer traffic in certain remote locations before aggregating even more in other locations.</p>
<p>There is no limit on the number of nodes on this type of topology, and it’s one of the foundations of the internet global infrastructure.</p>
<p>In the <a id="_idIndexMarker040"/>hierarchical topologies, we have multiple device functions, the <strong class="bold">customer premises equipment</strong> (<strong class="bold">CPE</strong>), aggregators, distributors, core, and peering, among others.</p>
<p>Depending on the size of this topology, it can introduce a longer path, which will add significant latency. For instance, in <em class="italic">Figure 1.3</em>, <strong class="bold">A1</strong> has to cross five hosts to reach <strong class="bold">A7</strong>.</p>
<p>Network capacity planning is focused on the aggregation points, and augmenting the network is <a id="_idIndexMarker041"/>not that <a id="_idIndexMarker042"/>difficult.</p>
<div><div><img alt="Figure 1.3 – A hierarchical or tree topology" src="img/B18165_01_003.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.3 – A hierarchical or tree topology</p>
<h3>Clos topologies</h3>
<p>This <a id="_idIndexMarker043"/>type <a id="_idIndexMarker044"/>of topology is also known as a <strong class="bold">Clos network</strong> or <strong class="bold">fabric</strong>. This <a id="_idIndexMarker045"/>topology is used to increase the number of ports without compromising latency and throughput and is often used in data centers. This topology is composed of at least three stages. Note that there is no oversubscription or aggregation like in the hierarchical topologies. The Clos topology provides the same amount of available bandwidth on the input and output. The stage names are normally <strong class="bold">spines</strong> and <strong class="bold">leafs</strong>. The spines<a id="_idIndexMarker046"/> are always in the center and only have connections to the Clos nodes. Leaves <a id="_idIndexMarker047"/>are used to connect to external devices or networks.</p>
<p><em class="italic">Figure 1.4</em> shows an<a id="_idIndexMarker048"/> example of a 16-port Clos network. Note that normally, all connections between a spine node to a leaf node are <em class="italic">back to back</em>:</p>
<div><div><img alt="Figure 1.4 – A Clos topology" src="img/B18165_01_004.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.4 – A Clos topology</p>
<p>Why are<a id="_idIndexMarker049"/> these topologies used? To increase the number <a id="_idIndexMarker050"/>of ports available without compromising throughput. This kind of topology is also used inside a router to provide connectivity between interface cards. Some companies use small devices to increase the number of ports that are offered without raising the cost as smaller devices are normally cheaper.</p>
<p class="callout-heading">Important note</p>
<p class="callout">One additional characteristic of the Clos network is that it has the same distance between any two external ports (in terms of nodes in the path), therefore the latency in normal conditions is the same. For instance, in <em class="italic">Figure 1.4</em>, the latency between an external port on node L1 to an external port on L4 or E1 is the same.</p>
<p class="callout-heading">Important note</p>
<p class="callout">More information on Clos networks can be found in an interesting paper from Google called <em class="italic">Jupiter Rising: A Decade of Clos Topologies and Centralized Control in Google’s Datacenter Network</em> – ACM SIGCOMM Computer Communication Review, Volume 45, Issue 4, October 2015.</p>
<h3>Mixed topologies</h3>
<p>A mixed topology <a id="_idIndexMarker051"/>is used in large corporations <a id="_idIndexMarker052"/>where latency and traffic are both important to care of. Normally, star topologies and P2P are used to shorten paths and reduce latency, whereas hierarchical topologies are used to optimize and aggregate traffic, and finally, Clos networks to increase the number of ports.</p>
<p>Modern cloud service providers are migrating to a more complex topology, where there are connections between elements where latency matters and aggregate device functions where traffic matters.</p>
<p>Network capacity planning is normally harder because connections are not totally hierarchical and aggregation points are not necessarily part of all traffic paths. An example of this kind of mixed topology is shown in <em class="italic">Figure 1.5</em>:</p>
<div><div><img alt="Figure 1.5 – A mixed topology" src="img/B18165_01_005.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.5 – A mixed topology</p>
<h3>Interface speeds</h3>
<p>A <a id="_idIndexMarker053"/>very important point that some engineers get confused about is the<a id="_idIndexMarker054"/> interface speed representation. 1 KB in memory representation is 2^10 or 1,024 bytes and 1 GB is 2^30, which is 1,073,741,824 bytes. For interface speeds, the same does not apply, and 1 Kbps is actually 1,000 bits/second, while 1 Gbps is 1,000,000,000 bits/second (more details can be found at <a href="https://en.wikipedia.org/wiki/Data-rate_units">https://en.wikipedia.org/wiki/Data-rate_units</a>).</p>
<h3>Device types and functions</h3>
<p>Network devices<a id="_idIndexMarker055"/> used to have specific functions as CPU and memory were scarce and expensive. Nowadays, network devices can have multiple functions when required. In large networks, devices have fewer functions as they tend to get overloaded easier when traffic demands increase. Here are some <a id="_idIndexMarker056"/>of the functions that a device can have:</p>
<ul>
<li><strong class="bold">Hub</strong>: This is a <a id="_idIndexMarker057"/>very old term to designate a device that only<a id="_idIndexMarker058"/> repeats the physical signal.</li>
<li><strong class="bold">Switch</strong>: A<a id="_idIndexMarker059"/> device that works only on the data link layer. It is <a id="_idIndexMarker060"/>normally used in LANs, and it works by switching frames. The most common protocol used on these devices<a id="_idIndexMarker061"/> to control paths is the <strong class="bold">Spanning Tree Protocol</strong> (<strong class="bold">STP</strong>).</li>
<li><strong class="bold">Router</strong>: A <a id="_idIndexMarker062"/>device that works only on the network layer or IP Layer. It is used to interconnect multiple LANs or create long-haul <a id="_idIndexMarker063"/>remote connections. Internally, a router routes packets using a routing protocol to exchange route information with other routers. Some routers can also switch frames or work as a switch.</li>
<li><strong class="bold">NAT</strong>: NAT is <a id="_idIndexMarker064"/>devices that replace source and destination<a id="_idIndexMarker065"/> IP addresses to allow the use of private IP addresses or to isolate internal traffic from external traffic.</li>
<li><strong class="bold">Firewall</strong>: Normally, devices<a id="_idIndexMarker066"/> that control the traffic that <a id="_idIndexMarker067"/>passes through it by looking into the content of the frame or the packet. There are several different types of firewalls, and some might be super complex, which includes encrypting and decrypting traffic.</li>
<li><strong class="bold">Load balancers</strong>: When <a id="_idIndexMarker068"/>servers can’t handle too many<a id="_idIndexMarker069"/> clients because of hardware limitations, load balancers can be used to deal with the client demands by sharing the client request between several servers. Those devices also look into the packet content to determine which server would get the traffic.</li>
<li><strong class="bold">Network server</strong>: A <a id="_idIndexMarker070"/>computer used to provide some sort of <em class="italic">service</em> to the <a id="_idIndexMarker071"/>network, for instance, an authentication server, an NTP server, or a Syslog collector.</li>
</ul>
<h3>Oversubscription</h3>
<p>In network jargon, this <a id="_idIndexMarker072"/>term is used to describe nodes or links in the network that aggregate traffic from other parts of the network and statistically use it to their advantage. For instance, they have a 1 Gbps interface to connect to the internet and 1,000 customers with 10 Mbps interfaces to use the service, which is an oversubscription of 1 to 10. This practice is quite normal and is only possible to use because of the characteristics of the client’s traffic that allow such aggregation without degradation. There are lots of mathematical models and papers on the internet describing this behavior and how to use it in your favor.</p>
<p>But some traffic can’t be aggregated without being degraded. In a data center, the traffic that can’t be oversubscribed is the traffic between servers, such as remote disk, data transfers, and database replicas. In this scenario, the best solution is to interconnect them without oversubscription using a solution such as non-blocking Clos topologies.</p>
<p>Browsing web pages, watching videos, and receiving messages from most of the traffic on the internet, which easily allows the aggregation technique without degradation.</p>
<p class="callout-heading">Important note</p>
<p class="callout">More information on oversubscription can be found in the paper <em class="italic">Evaluating Impacts of Oversubscription on Future Internet Business Models</em> by A. Raju, V. Gonçalves, and P. Ballon – Published in Networking Workshops, 25 May 2012 – Computer Science.</p>
<p>In this section, we went over the basic components of computer networks, including protocols, topology types, interface speeds, and device types. By now, you should be able to identify these terms more easily and will be familiar with their meanings, because we are going to use these terms throughout this book. Moving on, we are going to review more terms related to network architecture.</p>
<h1 id="_idParaDest-21"><a id="_idTextAnchor020"/>Describing network architecture and its components</h1>
<p>The term <a id="_idIndexMarker073"/>network architecture was introduced in the early 2000s, mimicking roles in the construction industry, where architects design and civil engineers build. Different companies use the term differently, but in this book, network architecture will be used to refer to the design of the network and its functions.</p>
<p>For a good network architecture, it is desirable to have a document describing in detail the first three layers of the network, from the physical layer to the routing layer. With this documentation, it is easy for the engineers to understand the physical connections, the Ethernet domains, and the routing protocols used.</p>
<h2 id="_idParaDest-22"><a id="_idTextAnchor021"/>Diagrams</h2>
<p>A <a id="_idIndexMarker074"/>network diagram is mostly like a map, where the cities are the nodes and the roads are the links that connect them. For a network engineer, diagrams are crucial to describe how nodes are connected, and they also can group and demarcate important areas. A good diagram is easy to interpret and follow how data flows.</p>
<p>There are up to three types of diagrams; they can be integrated on the same page and graph, or they can be separated onto different pages. The main diagrams are one to show the physical connections, which can include the technology involved in the data link layer, and the switching and routing diagrams.</p>
<p>In <em class="italic">Figure 1.6</em>, we can see an example of a network diagram:</p>
<div><div><img alt="Figure 1.6 – Example of a network diagram" src="img/B18165_01_006.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.6 – Example of a network diagram</p>
<p><em class="italic">Figure 1.7</em> shows <a id="_idIndexMarker075"/>examples of network diagram symbols:</p>
<div><div><img alt="Figure 1.7 – Network diagram symbols" src="img/B18165_01_007.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.7 – Network diagram symbols</p>
<h2 id="_idParaDest-23"><a id="_idTextAnchor022"/>Network node names</h2>
<p>A network node<a id="_idIndexMarker076"/> is a device that is essentially used to interconnect and serve as a transport of the data in the network. It can be either a hub, a switch, or a router. To help network engineers identify the node function, names are used to describe their main function. Here are some of them:</p>
<ul>
<li><strong class="bold">Transit router</strong>: These<a id="_idIndexMarker077"/> are routers that have interfaces <a id="_idIndexMarker078"/>with other service providers. These links are normally used as a service to access other networks, therefore they have a cost because they are normally connected to other big carriers.</li>
<li><strong class="bold">Peer router</strong>: These<a id="_idIndexMarker079"/> routers have interfaces with other<a id="_idIndexMarker080"/> networks in a peer configuration, meaning none of the parts pay to use it. In these links, only the traffic between the peer companies is exchanged, and the traffic destinated to outside networks are not allowed. Accessing external networks would be the case when using transit routers.</li>
<li><strong class="bold">Core router</strong>: These<a id="_idIndexMarker081"/> are nodes that are in the center of the<a id="_idIndexMarker082"/> network. They normally handle a large amount of traffic and have high-speed interfaces. Their throughput capacity is the highest in the network, but they have fewer interfaces as they concentrate the traffic of the network.</li>
<li><strong class="bold">Distribution router</strong>: These<a id="_idIndexMarker083"/> are nodes <a id="_idIndexMarker084"/>that normally connect to the core and aggregation routers. They normally interconnect different locations of the network. They don’t have many interfaces and their throughput capacity is high, but not as high as the core router.</li>
<li><strong class="bold">Aggregation router</strong>: These<a id="_idIndexMarker085"/> routers normally aggregate the <a id="_idIndexMarker086"/>traffic from the access routers. They are normally located in the same area or location as the access routers, and they have fewer interfaces compared to the access routers.</li>
<li><strong class="bold">Access router</strong>: Some <a id="_idIndexMarker087"/>architects add a node <a id="_idIndexMarker088"/>that connects all last-mile networks or CPE nodes. These routers are located closer to the customer and have more interfaces than any other router.</li>
<li><strong class="bold">Top of the rack</strong> (<strong class="bold">TOR</strong>): <strong class="bold">TOR</strong> refers to <a id="_idIndexMarker089"/>nodes<a id="_idIndexMarker090"/> that can be either a switch or a router, depending on the architecture. They are responsible for connecting the servers in the rack to the rest of the network.</li>
<li><strong class="bold">Clos rack</strong>: A <a id="_idIndexMarker091"/>Clos network, as described before, is a<a id="_idIndexMarker092"/> technique to add connectivity to multiple servers using small devices. A Clos rack is seen by the rest of the network as a single unique block, and in terms of architecture, it acts as a single node, normally used as a single router with a large number of interfaces.</li>
<li><strong class="bold">CPE</strong>: CPE is <a id="_idIndexMarker093"/>the node that is installed at <a id="_idIndexMarker094"/>the customer’s location. It normally has one interface<a id="_idIndexMarker095"/> connecting to the last-mile network and one local interface that can be an Ethernet or a wireless Ethernet. These devices can also implement NAT, firewall and, in some cases, they have multiple local interfaces, which can act as a switch and a router. These nodes are cheap and small with very low throughput capacity compared to the other nodes.</li>
</ul>
<h2 id="_idParaDest-24"><a id="_idTextAnchor023"/>The last-mile network</h2>
<p>This<a id="_idIndexMarker096"/> term is used<a id="_idIndexMarker097"/> to describe the architecture used to connect the customer to the network. Normally, this term is only used for ISPs, but some corporations also use it to interconnect their branches.</p>
<p>The <strong class="bold">last-mile network</strong> has a range of coverage and normally doesn’t cross the 1 km mark but depends on the type of technology used. Here are some of the most common last-mile networks:</p>
<ul>
<li><strong class="bold">Cable TV</strong>: There <a id="_idIndexMarker098"/>are several technologies used here to provide data communication using the cable TV that the customer has installed. The most used one is DOCSIS, which in 2017 was upgraded to version 4. This solution uses a single cable that is shared to several premises.</li>
<li><strong class="bold">Digital subscriber line</strong> (<strong class="bold">DSL</strong>): DSL <a id="_idIndexMarker099"/>uses the old telephone line to pass data communication. For that, there are lots of standards, and the most common ones are VDSL and ADSL. The DSL solutions don’t share the same media as cable TV does, and there is one cable for each customer.</li>
<li><strong class="bold">Fiber to the premises</strong> (<strong class="bold">FTTP</strong>): FTTP is <a id="_idIndexMarker100"/>when an optical cable arrives at a customer’s premises. Like cable TV, the most common implementation is a single fiber that crosses several different customers in a sharable manner. The <a id="_idIndexMarker101"/>most common technology is a <strong class="bold">passive optical network</strong> (<strong class="bold">PON</strong>) or, more <a id="_idIndexMarker102"/>specifically, the <strong class="bold">Gigabit Ethernet PON</strong> (<strong class="bold">GPON</strong>) (or G.984).</li>
</ul>
<p class="callout-heading">Important note</p>
<p class="callout">Further details on GPON networks can be found in the paper <em class="italic">GPON in Telecommunication Network</em> – November 2010 – Paper from the International Congress on Ultra Modern Telecommunications and Control Systems (ICUMT) conference, 2010.</p>
<ul>
<li><strong class="bold">Wi-Fi</strong>: Normally, this<a id="_idIndexMarker103"/> technology is used <a id="_idIndexMarker104"/>privately inside a company or a home, but some ISPs use the Wireless Ethernet standards (IEEE 802.11 family) to provide the last mile to customers using omnidirectional antennas. This particular use is different depending on each country and it depends on the government’s legislation. They are normally <a id="_idIndexMarker105"/>advertised as <strong class="bold">Ethernet hotspots</strong> (<a href="https://en.wikipedia.org/wiki/Hotspot_(Wi-Fi)">https://en.wikipedia.org/wiki/Hotspot_(Wi-Fi)</a>).</li>
<li><strong class="bold">Satellite</strong>: For data <a id="_idIndexMarker106"/>communication using satellites, there are two methods: one using geostationary satellites and the other using constellation satellites. The difference between them is the latency, as geostationary orbits very far from earth. The constellation method has low latency but<a id="_idIndexMarker107"/> has handover challenges as the satellites keep moving, normally having very low data throughput. The most famous technology using geostationary is VSAT. Internet using VSAT adds around 250 ms every time it has to travel from earth to the satellite, therefore it is a 500 ms round trip. But the dark ages of high latency might be over as SpaceX has announced they have finally solved the handover problem using the constellation method. This new service is<a id="_idIndexMarker108"/> called <strong class="bold">Starlink</strong> and has promised to have high capacity, low latency, and high availability using low orbit satellites.</li>
</ul>
<p class="callout-heading">Important note</p>
<p class="callout">A good discussion on the Starlink network can be found in the paper <em class="italic">Starlink Analysis</em> – July 15, 2021 – Research group ROADMAP-5G at the Carinthia University of Applied Sciences.</p>
<ul>
<li><strong class="bold">Power line communication</strong> (<strong class="bold">PLC</strong>) <strong class="bold">or HomePlug</strong>: PLC, or <strong class="bold">broadband over power lines</strong> (<strong class="bold">BoPL</strong>), uses <a id="_idIndexMarker109"/>the power cables to communicate data. This is achieved by <a id="_idIndexMarker110"/>modulating high frequencies on the wire. Most transformers won’t be able to pass through<a id="_idIndexMarker111"/> the information as they act as a <a id="_idIndexMarker112"/>low-frequency cut filter, so it has to be contained within a house or between posts without a transformer. The most common technologies here are the HomePlug AV2 and IEEE 1901-2010 (<a href="https://ieeexplore.ieee.org/document/5678772">https://ieeexplore.ieee.org/document/5678772</a>).</li>
<li><strong class="bold">Mobile</strong>: Definitely<a id="_idIndexMarker113"/> the most popular network is the mobile last mile. Today, they use 5G technology, but other old networks are still in use, such as 4G (LTE), 3G, and GPRS.</li>
</ul>
<p class="callout-heading">Important note</p>
<p class="callout">More information on mobile technologies can be found at <em class="italic">Evolution of Mobile Communication Technology towards 5G Networks and Challenges</em> by A. Agarwal, K. Agarwal, S. Agarwal, and G. Misra – American Journal of Electrical and Electronic Engineering, 2019, Vol. 7, No. 2, pp. 34-37.</p>
<h2 id="_idParaDest-25"><a id="_idTextAnchor024"/>The physical architecture</h2>
<p>The<a id="_idIndexMarker114"/> physical architecture is sometimes not <a id="_idIndexMarker115"/>necessarily the description of the cables or the fibers that will connect the devices but the infrastructure used by the network as <a id="_idIndexMarker116"/>a <strong class="bold">physical</strong> layer defined in the TCP/IP stack. This means we can reuse other foreign networks as a <strong class="bold">physical layer</strong> even though they have their own protocol stacks. Here are some of the possible physical technologies used in the architecture:</p>
<ul>
<li><strong class="bold">Dark fiber</strong>: When <a id="_idIndexMarker117"/>connecting nodes, the term <strong class="bold">dark fiber</strong> means<a id="_idIndexMarker118"/> the nodes that are connected will be using a fiber that does not contain a repeater or underlying infrastructure. In the case of a connection between two nodes using dark fiber, if one node loses power, the other will not receive any light from the fiber. In this scenario, a fiber cut is perceived in both ends immediately, and interfaces go down instantaneously with a fiber cut. Only the packets in the output interface queue are discarded when a failure occurs.</li>
<li><strong class="bold">Synchronous Transport Module</strong> (<strong class="bold">STM</strong>): STM<a id="_idIndexMarker119"/> was initially created to multiplex <a id="_idIndexMarker120"/>digital phone lines, but later started to be used for data communication. The most common one was STM-1, which was 155 Mbps. Routers<a id="_idIndexMarker121"/> used to have an interface that could encapsulates STM frames toward an STM network. The STM network would just switch the<a id="_idIndexMarker122"/> frames from one end to the other. A cut in the fiber using this technology might not be perceived quickly enough, causing a huge amount of packet loss. As <a id="_idIndexMarker123"/>we will describe later, <strong class="bold">bidirectional forwarding detection</strong> (<strong class="bold">BFD</strong>) needs to be used here to avoid drastic problems.</li>
<li><strong class="bold">Dense wavelength-division multiplexing</strong> (<strong class="bold">DWDM</strong>): DWDM is an evolution of STM. The<a id="_idIndexMarker124"/> DWDM network<a id="_idIndexMarker125"/> is a switch network that also has a frame and time and wave division for each of the packets of data carried, similar to STM but enhanced. Similarly, BFD is necessary because a cut in the fiber here would not be perceived quickly enough, causing a huge amount of packet loss.</li>
<li><strong class="bold">Back to back</strong>: As<a id="_idIndexMarker126"/> explained before, the term <em class="italic">back to back</em> is normally used to designate the nodes that are connected directly without any other physical layer in between, such as repeaters.</li>
<li><strong class="bold">Network tunnels</strong>: Network tunnels <a id="_idIndexMarker127"/>are<a id="_idIndexMarker128"/> points of the network that are used to encapsulate the traffic and travel in a different network. Tunnels can be either Layer 2 or Layer 3 and are implemented to abstract the network that is being carried. In some network architectures, they are meant to reach a distant part of the network using a foreign infrastructure.</li>
<li><strong class="bold">VPN tunnels</strong>: These <a id="_idIndexMarker129"/>are like network tunnels. VPN tunnels<a id="_idIndexMarker130"/> normally add encryption.</li>
</ul>
<h2 id="_idParaDest-26"><a id="_idTextAnchor025"/>The routing architecture</h2>
<p>It’s <a id="_idIndexMarker131"/>important to define how the traffic will flow in the<a id="_idIndexMarker132"/> network. For that, we need to have a proper design in terms of routing distribution. This is necessary so failure remediation, redundant paths, load balancing, routing policies, and traffic agreements can be implemented. The architecture would have to include an internal routing protocol and an external routing protocol if connected outside. Here is a summary:</p>
<ul>
<li><strong class="bold">Interior gateway protocol</strong> (<strong class="bold">IGP</strong>): IGP is a routing protocol that runs in a delimited <a id="_idIndexMarker133"/>area or location, normally<a id="_idIndexMarker134"/> internally within the same organization, as the name says. In the IGP domain, routers exchange path information by announcing and receiving topology updates. The most common IGPs use link state information to build the routing path topology. If an interface goes down, the update has to be propagated to the entire IGP domain. Isolated areas are used to avoid having to update a too-large topology and cause instability. Historically, the popular IGPs were RIP and EIGRP, but today, only <strong class="bold">Open Shortest Path First</strong> (<strong class="bold">OSPF</strong>) and <strong class="bold">Intermediate System-to-Intermediate System</strong> (<strong class="bold">IS-IS</strong>) are used.</li>
<li><strong class="bold">Exterior gateway protocol</strong> (<strong class="bold">EGP</strong>): EGP <a id="_idIndexMarker135"/>is a <a id="_idIndexMarker136"/>routing protocol used to exchange routing information between organizations. It normally does not contain link state information, only the path distance. The most common <a id="_idIndexMarker137"/>EGP protocol is <strong class="bold">Border Gateway Protocol</strong> (<strong class="bold">BGP</strong>).</li>
<li><strong class="bold">IS-IS</strong>: IS-IS is an<a id="_idIndexMarker138"/> IGP protocol designed by ISO, registered<a id="_idIndexMarker139"/> as ISO 10589. It is a link state protocol based on the shortest path algorithm called Dijkstra’s algorithm. It’s the second most used IGP.</li>
<li><strong class="bold">OSPF</strong>: OSPF<a id="_idIndexMarker140"/> is <a id="_idIndexMarker141"/>an IGP protocol designed by IETF, registered originally in 1989 by RFC1131 and updated a few times later. Version 3 is the last version described in RFC5340. OSPF also uses Dijkstra’s algorithm to calculate paths and is the most popular and used IGP. OSPF uses areas to scale and improve stability during routing database updates.</li>
<li><strong class="bold">BGP</strong>: BGP <a id="_idIndexMarker142"/>is a unique protocol used to exchange routing <a id="_idIndexMarker143"/>information between organizations. It was first introduced in 1989 in RFC1105. It is also one of the protocols with more updates and extensions on the IETF and can be used for different purposes, such<a id="_idIndexMarker144"/> as <strong class="bold">internal BGP</strong> (<strong class="bold">iBGP</strong>), <strong class="bold">Multiprotocol BGP</strong>(<strong class="bold">MP-BGP</strong>) defined<a id="_idIndexMarker145"/> in RFC4760, MPLS (MP-BGP), and <a id="_idIndexMarker146"/>recently, BGPsec, defined in 2017 in RFC8205. BGP is a path vector-based protocol, also known as a distance vector protocol, and it does not use link information like OSPF.</li>
<li><strong class="bold">Autonomous system number</strong> (<strong class="bold">ASN</strong>): Like<a id="_idIndexMarker147"/> the IP range, ASN is a unique number <a id="_idIndexMarker148"/>that is<a id="_idIndexMarker149"/> associated with an organization when starting using BGP to exchange routing tables. It is controlled by the five regional internet <a id="_idIndexMarker150"/>registries: <strong class="bold">ARIN</strong> in North America, <strong class="bold">LACNIC</strong> in Latin<a id="_idIndexMarker151"/> America, <strong class="bold">APNIC</strong> in <a id="_idIndexMarker152"/>Asia-Pacific, <strong class="bold">RIPE</strong> in Europe, and <strong class="bold">AFRINIC</strong> in <a id="_idIndexMarker153"/>Africa. When<a id="_idIndexMarker154"/> routing tables are exchanged using BGP, the ASN is carried on the path. For instance, Amazon.com uses ASN 16509 (<a href="https://whois.arin.net/rest/asn/AS16509">https://whois.arin.net/rest/asn/AS16509</a>).</li>
</ul>
<p>Let’s explore how a network works in terms of its state.</p>
<h2 id="_idParaDest-27"><a id="_idTextAnchor026"/>Types of failure</h2>
<p>In<a id="_idIndexMarker155"/> computer<a id="_idIndexMarker156"/> networks, a major problem is the <em class="italic">instability</em> caused by failures in routing tables, links, or nodes. If a node goes numb, for example, the CPU freezes, the other nodes have to detect it quickly so they can divert the traffic through a different path. But how can a failure be detected to reroute quickly enough? Let’s explore the types of failures first:</p>
<ul>
<li><strong class="bold">Link failure</strong>: A<a id="_idIndexMarker157"/> link failure is when a connection between two <a id="_idIndexMarker158"/>nodes stops receiving or sending data because there is an interruption on the path. The failure can be caused by a physical problem, such as a fiber cut, environmental conditions, such as heavy rain, or because of middleware equipment failure. Nodes normally detect whether a link is down by the lack <a id="_idIndexMarker159"/>of signal on the input, but in some cases, such as when using<a id="_idIndexMarker160"/> repeaters or underlying networks (such as DWDM), the signal is present on the input but data can’t be delivered. So, it requires a higher-level protocol to monitor and detect the communication breakdown instead of the interface input signal alone; otherwise, data will be discarded continuously until a node decides to reroute the traffic, which can take several seconds in some cases.</li>
<li><strong class="bold">Node failure</strong>: A node <a id="_idIndexMarker161"/>can fail in several<a id="_idIndexMarker162"/> different ways; the most common ones are power loss <a id="_idIndexMarker163"/>and OS freeze. A software glitch can cause a router to freeze for minutes or even hours, causing packet loss or not, depending on where the freeze occurs, in either the forwarding plane or the control plane. Detecting this failure quickly is a bit harder because all interface signals are still present, and the forwarding plane might be still working.</li>
<li><strong class="bold">Flapping</strong>: Interface<a id="_idIndexMarker164"/> flapping is when the interface keeps going down for short periods without being detected. Flapping causes data loss without detection and normally is hard to be discovered without specific equipment to measure the medium connected normally on both ends. The<a id="_idIndexMarker165"/> term <strong class="bold">flapping</strong> also is used when a route keeps appearing and disappearing on the<a id="_idIndexMarker166"/> routing table, called <strong class="bold">route flapping</strong>.</li>
</ul>
<h2 id="_idParaDest-28"><a id="_idTextAnchor027"/>Failure detection techniques</h2>
<p>Here<a id="_idIndexMarker167"/> are<a id="_idIndexMarker168"/> some techniques to detect failure:</p>
<ul>
<li><strong class="bold">Signal off</strong>: Interfaces<a id="_idIndexMarker169"/> have a very simple way of detecting failure, by the absence of the main signal or light. In the case of fiber, if the intensity of the light received is too low, it would consider the interface down. Note that this detection is made on the input interface.</li>
<li><strong class="bold">Protocol keep alive and hello packets</strong>: Some routing protocols have keep alive (or <em class="italic">hello</em>) messages<a id="_idIndexMarker170"/> to check whether their neighbors are still alive. In OSPF, the default period for hello packets is 10 seconds for LAN interfaces, and 30 seconds for P2P connections. BGP has a default of 30 seconds. For today’s network speed, 30 seconds is a lot of data lost. A 10 Gbps interface would discard a total of 37 GB if fully loaded. In today’s protocol implementation, the period of sending these messages can’t be shorter than a few seconds, which is still a long period of data lost.</li>
<li><strong class="bold">Link BFD</strong>: In 2010, IETF published RFC5880, which describes the BFD protocol, which <a id="_idIndexMarker171"/>was intended to allow routers to detect failure on their interfaces in the order of microseconds. The BFD message supports a minimum of 1 ms interval. BFD is normally implemented on the interface hardware, which allows it to respond without interrupting the main CPU.</li>
<li><strong class="bold">The BFD routing protocol</strong>: Link BFD is normally enabled in all interfaces of the<a id="_idIndexMarker172"/> network to detect failures quickly, but it would not help in the case of OS router freeze or control plane failure. To avoid packet loss in these cases, all major protocols have the BFD capability, including OSPF, IS-IS, and BGP. Although<a id="_idIndexMarker173"/> the BFD protocol message supports microsecond intervals, the implementation using routing protocols is normally in the order of milliseconds and limited to the number of points. The reason is that these messages need to be handled by the main CPU, and too many might cause performance degradation.</li>
<li><strong class="bold">Route flapping detection</strong>: The<a id="_idIndexMarker174"/> routing protocol can detect persistent route flapping and suppress it for a period. This is useful to avoid recalculating paths when a route is not actually stable. When suppression is in place, normally, the default route is taken.</li>
</ul>
<h2 id="_idParaDest-29"><a id="_idTextAnchor028"/>Control plane and forwarding plane</h2>
<p>It is <a id="_idIndexMarker175"/>very important to understand the difference between a forwarding plane and a control plane, especially if you are working on<a id="_idIndexMarker176"/> network automation. Let’s explore them in this section.</p>
<p>The forwarding plane, or data plane, is an abstract concept where some processes, equipment, and hardware are used to forward traffic through the network. In other words, the forwarding plane defines all entities in the network responsible for receiving data, transporting it, and delivering it.</p>
<p>The<a id="_idIndexMarker177"/> control plane is an abstract concept designated to all entities in the network responsible for constructing the data path, removing it, or updating it.</p>
<p>A forwarding plane<a id="_idIndexMarker178"/> works when data is carried from one input point, <em class="italic">A</em>, to another output point, <em class="italic">B</em>, but does not need to have a control plane working. The control plane would only work if a path does not exist from <em class="italic">A</em> to <em class="italic">B</em>. The control plane also works in case of a failure because the original path might be interrupted and needs to be constructed again.</p>
<p>So, why is this important in network automation? Because the control plane has to update forwarding paths if there is a problem with the forwarding plane, which can cause packet drop, jitter, and delays. A stable network does not require any path updates and consequently minimum work for the control plane. Network automation needs to avoid any particular automation that might cause the control plane to update the network.</p>
<h2 id="_idParaDest-30"><a id="_idTextAnchor029"/>Graceful restart</h2>
<p>Usually, when<a id="_idIndexMarker179"/> a router restarts, all the routing<a id="_idIndexMarker180"/> peers detect that the session went down and then came up. This <em class="italic">down/up</em> transition results in the control plane working to recompute all the route paths, generating thousands of updates in the entire network and, consequently, causing a churn to the forwarding plane. This recomputation can also cause routing flaps, which may create transient forwarding black holes and transient forwarding loops. These transient problems also consume a lot of resources on the control plane of the routers affected.</p>
<p>Therefore, a <strong class="bold">graceful restart</strong> was created to avoid such drastic changes if a restart is required.</p>
<p>The<a id="_idIndexMarker181"/> idea <a id="_idIndexMarker182"/>is we could restart all control plane processes in one router without affecting the forwarding plane and the control plane of the other neighbor routers. In practice, a graceful restart is a method to restart the routing processes without affecting the forwarding plane.</p>
<p>In 2003, IETF published RFC3623 to define the implementation of the graceful restart for OSPF. Today, the main control plane protocols have some sort of graceful restart, including BGP, IS-IS, MPLS, RSVP, and LDP.</p>
<p>When building network automation, this kind of method is preferred to update the software.</p>
<p>In this section, we’ve reviewed network architecture and its components. We got more details on routing and physical architecture components. We also learned how important control and data plane separation is, along with the failure types. It is important to know these network terminologies to help with network automation. Next, we’re going to review network management and its components.</p>
<h1 id="_idParaDest-31"><a id="_idTextAnchor030"/>Illustrating network management components, network bastions, and more</h1>
<p>Before we finish this chapter, let’s touch on some of the terms used in network management and planning.</p>
<h2 id="_idParaDest-32"><a id="_idTextAnchor031"/>ACL</h2>
<p>An <strong class="bold">ACL</strong> is used almost <a id="_idIndexMarker183"/>everywhere in the network to control access by filtering the IP packet based on the IP or port number.</p>
<p>The ACL can be implemented on either the forwarding plane or the control plane. When implemented on the forwarding plane, they are used to limit the IP reachability to certain parts of the network and also avoid IP spoofing. When implemented on the control plane, they are protecting the routing protocol and management ports from malicious connections.</p>
<p>ACLs are also used in the management interfaces to avoid undesirable traffic when using in-band management.</p>
<h2 id="_idParaDest-33"><a id="_idTextAnchor032"/>Management system and managed elements</h2>
<p>The <strong class="bold">management system</strong> is the<a id="_idIndexMarker184"/> platform including the software and hardware responsible for managing the network. It can be centralized or distributed. The managed elements are the targets of the management system, including routers, switches, modems, repeaters, and intelligent racks, among others.</p>
<p>Note that the <strong class="bold">managed element</strong> does <a id="_idIndexMarker185"/>not need to be part of the network. It can be a support system, such as a rack with fans or an air conditioning unit. When writing code for network management, it is important to classify the elements appropriately so they can be managed accordingly.</p>
<h2 id="_idParaDest-34"><a id="_idTextAnchor033"/>In-band and out-of-band management</h2>
<p>In-band <a id="_idIndexMarker186"/>and <strong class="bold">out-of-band</strong> (<strong class="bold">OOB</strong>) management<a id="_idIndexMarker187"/> refer to how the management system traffic reaches the management elements.</p>
<p>For OOB management, there is an isolated network infrastructure that carries only management traffic, which is not connected to the main network in any way and only to the management ports of every managed element. In other words, the forwarding plane does not carry any management traffic. In addition, the OOB network should be able to exist and deliver management traffic independently of the main network routing status, because, in the case of a catastrophic scenario, the OOB network should be enough to reach the managed element even if its network interfaces are down. It’s important to note that this network normally does not carry much traffic and the nodes and interfaces on it have low throughput. Some OOB networks are implemented using mobile networks.</p>
<p>In in-band management, there is no physical network isolation between the forwarding plane and management traffic, so the interface that carries customer data also carries management traffic. In this scenario, ACLs are used extensively to avoid unwanted traffic toward the ports of the managed elements. In addition, some network architecture adds priority queues to interfaces to allow the management traffic to be delivered first and avoid discards on heavily loaded links.</p>
<p>Some management systems use both to talk to the devices, some via in-band and some via OOB networks. Normally, heavy traffic, such as OS upgrades and event logging, goes via in-band and the element console access goes via the OOB network.</p>
<h2 id="_idParaDest-35"><a id="_idTextAnchor034"/>Network telemetry</h2>
<p>Telemetry is not<a id="_idIndexMarker188"/> a new term and refers to any type of equipment that can monitor field variables remotely, such as temperature or humidity. This term was then imported to computer networks to refer to a group of procedures used to collect network information remotely.</p>
<p><strong class="bold">Network telemetry</strong> refers <a id="_idIndexMarker189"/>to an area in a computer network responsible for encompassing various procedures and systems to define, collect, and analyze network data. In some cases, it can mean a new method of obtaining network data by using streaming methods from the network devices.</p>
<h2 id="_idParaDest-36"><a id="_idTextAnchor035"/>Management information base</h2>
<p>A <strong class="bold">management information base</strong> (<strong class="bold">MIB</strong>) is a <a id="_idIndexMarker190"/>formal description of a set of objects that can be<a id="_idIndexMarker191"/> managed using the <strong class="bold">Simple Network Management Protocol</strong> (<strong class="bold">SNMP</strong>).</p>
<p>An MIB can be public or private. When public, its definitions are published by an RFC, such as the interface group MIB defined on RFC2863. When private, it has to be provided by the vendor who owns the MIB.</p>
<p>The MIB is normally organized in a tree by numbers (<em class="italic">Figure 1.8</em>). When describing an object in an MIB tree, it is normally referred<a id="_idIndexMarker192"/> to as an <strong class="bold">object identifier</strong> (<strong class="bold">OID</strong>). For instance, the number of packets seen in an interface output is represented by an OID <a id="_idIndexMarker193"/>called <strong class="bold">IfOutUcastPkts</strong>, which has the sequence <em class="italic">.1.3.6.1.2.1.2.17</em> (<a href="http://www.net-snmp.org/docs/mibs/interfaces.html">http://www.net-snmp.org/docs/mibs/interfaces.html</a>).</p>
<p>The OID normally contains a value that is a variable that can have different types, such as <code>COUNTER</code>, <code>GAUGE</code>, <code>INTEGER</code>, and <code>OCTETSTR</code>, among others.</p>
<div><div><img alt="Figure 1.8 – The SNMP MIB tree" src="img/B18165_01_008.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.8 – The SNMP MIB tree</p>
<h2 id="_idParaDest-37"><a id="_idTextAnchor036"/>Network bastions</h2>
<p>The term <strong class="bold">bastion</strong> comes<a id="_idIndexMarker194"/> from fortifications that were used to protect cannons during medieval wars. At that time, a bastion was an angularly shaped part of an outer wall, usually placed around the corners of a fort to allow defensive fire in many directions.</p>
<p>Like cannons in medieval times, network elements need layers <a id="_idIndexMarker195"/>for protection. <strong class="bold">Network bastions</strong> or <strong class="bold">bastion hosts</strong> are <a id="_idIndexMarker196"/>physical devices, normally computers, with defensive mechanisms built in that are connected to two or more networks.</p>
<p>Bastion hosts are popularly designed using Linux installed on a computer with multiple Ethernet ports. Each Ethernet port connects to a different part of the network where isolation or protection is desired.</p>
<p>To protect the networks, bastion hosts do not forward traffic, and normally, the IP forwarding capability is disabled like the following example applied in Linux:</p>
<pre class="source-code">
# sysctl net.ipv4.ip_forward
net.ipv4.ip_forward = 0</pre>
<p>A Linux box <a id="_idIndexMarker197"/>without IP forwarding means traffic can’t be routed between interfaces, so traffic has to be originated in the bastion host to reach an external interface, and no other traffic would go out of the Ethernet port that is not originated locally in the box. Therefore, bastion hosts need to have authentication, such as a username and password, to allow a <em class="italic">user</em> or <em class="italic">system</em> to log in and run a shell locally. From the host, the user might be able to generate IP packets toward the other Ethernet ports.</p>
<p>Network automation will require an additional mechanism to allow accessing the network nodes for configuring them. We are going to cover these mechanisms later when writing some code to access the nodes.</p>
<p>An example of a bastion host is shown in <em class="italic">Figure 1.9</em>:</p>
<div><div><img alt="Figure 1.9 – Bastion host connecting production and corporate networks" src="img/B18165_01_009.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.9 – Bastion host connecting production and corporate networks</p>
<h2 id="_idParaDest-38"><a id="_idTextAnchor037"/>FCAPS</h2>
<p><strong class="bold">FCAPS</strong> is a <a id="_idIndexMarker198"/>management network model and framework defined by ISO for network management. Its acronym stands for <strong class="bold">fault, configuration, accounting, performance, and security</strong>. Each of these is the management category into which the ISO model defines network management tasks. Let’s look at a very summarized description of each of these tasks:</p>
<ul>
<li><strong class="bold">Fault</strong>: The<a id="_idIndexMarker199"/> goal of fault management is to recognize, isolate, correct, and log faults that occur in the network.</li>
<li><strong class="bold">Configuration</strong>: This<a id="_idIndexMarker200"/> refers to storing configurations from devices, tracking changes, and provisioning new configurations.</li>
<li><strong class="bold">Accounting</strong>: This is <a id="_idIndexMarker201"/>concerned with tracking network usage for data transported, per business, client, or user. The goal is to be able to appropriately be billed or charged for accounting purposes.</li>
<li><strong class="bold">Performance</strong>: This<a id="_idIndexMarker202"/> is focused on ensuring that the network works at an acceptable level by monitoring network latency, packet loss, link utilization, packet discards, retransmissions, and error rates.</li>
<li><strong class="bold">Security</strong>: This <a id="_idIndexMarker203"/>refers to controlling access to assets and protocols in the network, which can include AAA systems, ACLs, and firewalls.</li>
</ul>
<p>Why is FCAPS important for network automation? Because it’s better to write network automation code with tasks separated like in FCAPS, so we can place automation in different parts of the management system accordingly.</p>
<h2 id="_idParaDest-39"><a id="_idTextAnchor038"/>Network planning</h2>
<p>Growing the network<a id="_idIndexMarker204"/> is hard because if you buy too many resources, you could lose money. However, if you buy too little, you could lose customers. Network planning is used to ensure performance and costs are going in the right direction. In other words, it consists of several activities whose final target is to define an optimal cost-effective network design for the future. Network planning engineers work with prediction and statistical models to draw the most probable future network growth.</p>
<p>Because of<a id="_idIndexMarker205"/> the nature of the predictions, the network planning team needs a lot of data from the network, and most of them are probably not easy to collect. You might be required to collect instantaneous data, which is not available on the current management systems, so you can use your network automation skills for that.</p>
<h2 id="_idParaDest-40"><a id="_idTextAnchor039"/>Network security</h2>
<p>One important <a id="_idIndexMarker206"/>point to mention is the work that companies are doing to create a safe place for traffic to flow. Most companies today have invested in separate and specialized teams to deal with security, and those teams have engineers that only understand nuances of the network to delineate security rules to be taken when designing and operating computer networks.</p>
<p>Your automation work will probably involve dealing with such security rules applied in the network, and will probably vary by company depending on the technology and level of security required. A good <a id="_idIndexMarker207"/>overview of network security can be found at <a href="https://en.wikipedia.org/wiki/Network_security">https://en.wikipedia.org/wiki/Network_security</a>.</p>
<h1 id="_idParaDest-41"><a id="_idTextAnchor040"/>Summary</h1>
<p>In this chapter, we reviewed the key points of networking. The intention was to highlight the main concepts and define some of the network jargon. At this point, you have enough network background to discuss automation work with any network engineer. I hope that any work done on network automation coding from now on will make more sense and you’re more familiar with the network terms.</p>
<p>In the next chapter, we will learn about how networks are evolving to be programmable.</p>
</div>
<div><div></div>
</div>
</body></html>