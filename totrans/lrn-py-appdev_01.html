<html><head></head><body><div class="chapter" title="Chapter&#xA0;1.&#xA0;Developing Simple Applications"><div class="titlepage"><div><div><h1 class="title"><a id="ch01"/>Chapter 1. Developing Simple Applications</h1></div></div></div><p>Python<a id="id0" class="indexterm"/> is one of the most widely used dynamic programming languages. It supports a rich set of packages, GUI libraries, and web frameworks that enable you to build efficient cross-platform applications. It is an ideal language for rapid application development. Such fast-paced development often comes with its own baggage that could bring down the overall quality, performance, and extensibility of the code. This book will show you ways to handle such situations and help you develop better Python applications. The key concepts will be explained with the help of command-line applications, which will be progressively improved in subsequent chapters.</p><p>This chapter will be an introductory one. It will serve as a refresher to Python programming. That being said, it is expected you have some knowledge of Python language, as well as <span class="strong"><strong>object-oriented programming</strong></span> (<span class="strong"><strong>OOP</strong></span>)<a id="id1" class="indexterm"/> concepts.</p><p>Here is how this chapter is organized:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">We will start with installation prerequisites and set up a proper environment for Python development.</li><li class="listitem" style="list-style-type: disc">To set the tone right for the rest of the book, the next section will be a brief introduction to the <span class="emphasis"><em>high fantasy theme</em></span> of the book.</li><li class="listitem" style="list-style-type: disc">What follows next is our first program. It is a simple text-based fantasy game, presented as a Python script.</li><li class="listitem" style="list-style-type: disc">We will add some complexity to this game and develop an incremental version of the game using simple functions.</li><li class="listitem" style="list-style-type: disc">Moving ahead, we will add more features to the game and redesign the code by applying OOP concepts.</li><li class="listitem" style="list-style-type: disc">The last topic will briefly cover <span class="strong"><strong>Abstract Base Classes</strong></span> (<span class="strong"><strong>ABCs</strong></span>)<a id="id2" class="indexterm"/> in Python.</li></ul></div><p>The code explanation will be a bit verbose. More experienced readers can breeze past the examples and go to the next chapter, but be sure to understand the theme of the book and review the code in the <code class="literal">ch01_ex03.py</code> file. In the next few chapters, you will learn techniques to progressively improve this code.</p><div class="section" title="Important housekeeping notes"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec09"/>Important housekeeping notes</h1></div></div></div><p>Before diving into the rest of the chapter, let's get some housekeeping out of the way. If you haven't already, you should read the <span class="emphasis"><em>Preface</em></span>, which documents most of the following things:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Every chapter will have its own set of Python source files. Although we will talk through most of the code, you should keep the relevant files at hand.</li><li class="listitem" style="list-style-type: disc">The source code can be downloaded from the Packt Publishing website. Follow the instructions mentioned in the <span class="emphasis"><em>Preface</em></span>.</li><li class="listitem" style="list-style-type: disc">The code illustrated in this book is compatible with Python version 3.5.1. The supporting code bundles also provide files compatible with version 2.7.9.</li><li class="listitem" style="list-style-type: disc">As noted before, it is assumed that you are familiar with basics of the Python language and know OOP concepts.</li><li class="listitem" style="list-style-type: disc">The book uses a fun, text-based game theme as a vehicle to explain various application development aspects. However, the book itself is not about developing game applications!</li><li class="listitem" style="list-style-type: disc">The solutions to the exercises (if any) are generally not provided.</li><li class="listitem" style="list-style-type: disc">The book provides several external links (URLs) for further reading. Over time, some of these links might end up being broken. If that ever happens, try searching the web with appropriate search terms.</li></ul></div></div></div>
<div class="section" title="Installation prerequisites"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec10"/>Installation prerequisites</h1></div></div></div><p>Let's make sure that we have installed the prerequisites. Here is a table that summarizes the basic tools we need for this chapter and beyond; more verbose installation instructions follow in the next section:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Tool</p>
</th><th style="text-align: left" valign="bottom">
<p>Notes</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Python 3.5</p>
</td><td style="text-align: left" valign="top">
<p>The code illustrated in this book is compatible with version 3.5. See the next table for available Python distributions. Supporting code bundles also provide 2.7.9 compatible files.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>pip</strong></span> (package manager for Python)</p>
</td><td style="text-align: left" valign="top">
<p>The pip is already available in the official distribution for versions 3.5 and 2.7.9.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>IPython</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Optional installation. IPython is an enhanced Python interpreter.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Integrated development environment</strong></span> (<span class="strong"><strong>IDE</strong></span>) </p>
</td><td style="text-align: left" valign="top">
<p>Use the Python editor or any IDE of your choice. Some good IDEs are listed in a table later in this chapter.</p>
</td></tr></tbody></table></div><p>In subsequent chapters, we will need to install some additional dependencies. The Python package manager (pip) will makes this a trivial task.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip02"/>Tip</h3><p>Have you already set up the required Python environment or know how to do it? Just skip the setup instructions that follow and move on to the <span class="emphasis"><em>The theme of the book</em></span> section, where the real action begins!</p></div></div><div class="section" title="Installing Python"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec09"/>Installing Python</h2></div></div></div><p>There are two <a id="id3" class="indexterm"/>options to install Python. You can either use the official Python version or one of the freely available bundled distributions.</p><div class="section" title="Option 1 – official distribution"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec01"/>Option 1 – official distribution</h3></div></div></div><p>For Linux or Mac<a id="id4" class="indexterm"/> users, Python is probably already installed on your system. If not, you can install it using the package manager of your operating system. Windows OS users can install Python 3.5 by downloading the Python installer from the official Python website:</p><div class="mediaobject"><img src="graphics/B05034_01_30.jpg" alt="Option 1 – official distribution"/></div><p>During the<a id="id5" class="indexterm"/> installation process, just make sure to select the option that adds Python 3.5 to the system environment variable, <code class="literal">PATH</code>, as shown in the preceding screenshot. You can also visit the official Python<a id="id6" class="indexterm"/> website, <a class="ulink" href="https://www.python.org/downloads">https://www.python.org/downloads</a>, to get the platform-specific distribution.</p></div><div class="section" title="Option 2 – bundled distribution"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec02"/>Option 2 – bundled distribution</h3></div></div></div><p>Alternatively, there are several<a id="id7" class="indexterm"/> freely available Python distributions that bundle together useful Python packages, including pip and IPython. The following table summarizes some of the most popular Python distributions, including the official one:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Distribution</p>
</th><th style="text-align: left" valign="bottom">
<p>Supported platforms</p>
</th><th style="text-align: left" valign="bottom">
<p>Notes</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>Official<a id="id8" class="indexterm"/> Python distribution</p>
<p>
<a class="ulink" href="https://www.python.org">https://www.python.org</a>
</p>
</td><td style="text-align: left" valign="top">
<p>Windows, <a id="id9" class="indexterm"/>Linux, Mac</p>
</td><td style="text-align: left" valign="top">
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Freely available</li><li class="listitem" style="list-style-type: disc">Versions 2.7.9 and 3.5 include pip by default</li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Anaconda</p>
<p>
<a class="ulink" href="http://continuum.io">http://continuum.io</a>
</p>
</td><td style="text-align: left" valign="top">
<p>Windows, <a id="id10" class="indexterm"/>Linux, Mac</p>
</td><td style="text-align: left" valign="top">
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Freely<a id="id11" class="indexterm"/> available</li><li class="listitem" style="list-style-type: disc">Includes pip, IPython and Spyder IDE</li><li class="listitem" style="list-style-type: disc">Bundles packages primarily for science, math, engineering, and data analysis</li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Enthought <a id="id12" class="indexterm"/>Canopy Express</p>
<p>
<a class="ulink" href="https://www.enthought.com/canopy-express/">https://www.enthought.com/canopy-express/</a>
</p>
</td><td style="text-align: left" valign="top">
<p>Windows, Linux, Mac</p>
</td><td style="text-align: left" valign="top">
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Freely available</li><li class="listitem" style="list-style-type: disc">Includes <a id="id13" class="indexterm"/>pip and IPython</li><li class="listitem" style="list-style-type: disc">Integrates a Python code editor and application development platform</li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Python(x, y)</p>
<p> <a class="ulink" href="https://python-xy.github.io/">https://python-xy.github.io/</a>
</p>
</td><td style="text-align: left" valign="top">
<p>Windows</p>
</td><td style="text-align: left" valign="top">
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Freely<a id="id14" class="indexterm"/> available</li><li class="listitem" style="list-style-type: disc">Includes<a id="id15" class="indexterm"/> pip, <a id="id16" class="indexterm"/>IPython, and Spyder IDE</li></ul></div>
</td></tr></tbody></table></div></div><div class="section" title="Python install location"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec03"/>Python install location</h3></div></div></div><p>Let's briefly talk about the<a id="id17" class="indexterm"/> path where Python is installed, and how to make sure <code class="literal">python</code> is available as a command in your terminal window. Of course, things will <a id="id18" class="indexterm"/>widely vary, depending on where you install it and which Python distribution you choose.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip03"/>Tip</h3><p>The official Python documentation page has comprehensive information on setting up the Python environment on different platforms. Here is a link, in case you need further help beyond what we have covered: <a class="ulink" href="https://docs.python.org/3/using/index.html">https://docs.python.org/3/using/index.html</a>.
</p></div></div><div class="section" title="Unix-like operating systems"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl4sec01"/>Unix-like operating systems</h4></div></div></div><p>On a Unix-like operating system such as Linux, the default location is typically <code class="literal">/usr/bin/python</code> or <code class="literal">/usr/local/bin/python</code>.</p><p>If you used your <a id="id19" class="indexterm"/>operating system's package manager to install Python, the command <code class="literal">python</code> or <code class="literal">python3</code> should be available in the terminal window. If it isn't, you need to update the <code class="literal">PATH</code> system environment variable to include the directory path to the Python executable. For example, if you have a <a id="id20" class="indexterm"/>
<span class="strong"><strong>Bash</strong></span> shell, add the following to the <code class="literal">.bashrc</code> file in your user home directory:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>export PATH=$PATH:/usr/bin/</strong></span>
</pre></div><p>Specify the actual path to your Python installation in place of <code class="literal">/usr/bin</code>.</p></div><div class="section" title="Windows OS"><div class="titlepage"><div><div><h4 class="title"><a id="ch01lvl4sec02"/>Windows OS</h4></div></div></div><p>On <a id="id21" class="indexterm"/>Windows OS, the default Python installation path is typically the following directory: <code class="literal">C:\Users\name\AppData\Local\Programs\Python\Python35-32\python.exe</code>. Replace <code class="literal">name</code> with your Windows username. Depending on your installer and system, the Python directory can also be <code class="literal">Python35-64</code>. As mentioned earlier, at the time of installation, you should select the option <span class="strong"><strong>Add Python 3.5 to PATH</strong></span> to make sure <code class="literal">python</code> or <code class="literal">python.exe</code> are automatically recognized as commands. Alternatively, you can rerun the installer with just this option checked.</p></div></div><div class="section" title="Verifying Python installation"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec04"/>Verifying Python installation</h3></div></div></div><p>Open a<a id="id22" class="indexterm"/> terminal window (or command prompt on Windows OS) and type the following command to verify the Python version. This command will work if Python is installed and is available as a command in the terminal window. Otherwise, specify the full path to the Python executable. For instance, on Linux you can specify it as <code class="literal">/usr/bin/python</code>, if Python is installed in <code class="literal">/usr/bin</code>:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ python -V </strong></span>
</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip04"/>Tip</h3><p>Note that the <code class="literal">$</code> sign in the previous command line belongs to the terminal window and is not part of the command itself! Put another way, the actual command is just <code class="literal">python -V</code>. The <code class="literal">$</code> or <code class="literal">%</code> sign in the terminal window is a prompt for a normal user on Linux. For a root (admin) user, the sign is <code class="literal">#</code>. Likewise, on Windows OS, the corresponding symbol is <code class="literal">&gt;</code>. You will type the actual command after this symbol.</p></div></div><p>The following is just a sample output, if we run the preceding command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[user@hostname ~]$ python -V</strong></span>
<span class="strong"><strong>Python 3.5.1 :: Anaconda 4.0.0 (64-bit)</strong></span>
</pre></div></div><div class="section" title="Installing pip"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec05"/>Installing pip</h3></div></div></div><p>The pip is a software <a id="id23" class="indexterm"/>package manager that makes it trivial to install Python packages from the official third party software repository, <a id="id24" class="indexterm"/>
<span class="strong"><strong>PyPI</strong></span>. The pip is already installed for Python-2 version 2.7.9 or higher and Python-3 version 3.4 or higher. If you are using a different Python version, check out <a class="ulink" href="https://pip.pypa.io/en/stable/installing">https://pip.pypa.io/en/stable/installing</a> for the installation instructions.</p><p>On Linux OS, the default location for the pip is same as that of the Python executable. For example, if you have <code class="literal">/usr/bin/python</code>, then pip should be available as <code class="literal">/usr/bin/pip</code>. On Windows OS, the default <code class="literal">pip.exe</code> is typically the following: <code class="literal">C:\Users\name\AppData\Local\Programs\Python\Python35-32\Scripts\pip.exe</code>. As mentioned earlier, replace <code class="literal">name</code> with your Windows username. Depending on your installer and the system, the Python directory can also be <code class="literal">Python35-64</code>.</p></div><div class="section" title="Installing IPython"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec06"/>Installing IPython</h3></div></div></div><p>This is an <a id="id25" class="indexterm"/>optional installation. IPython is an enhanced version of the Python interpreter. If it is not already bundled in your Python distribution, you can install it with:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ pip install ipython </strong></span>
</pre></div><p>After the installation, just type <code class="literal">ipython</code> in the terminal to start the IPython interactive shell. Here is a screenshot of the IPython shell using the Anaconda Python 3.5 distribution:</p><div class="mediaobject"><img src="graphics/B05034_01_01.jpg" alt="Installing IPython"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip05"/>Tip</h3><p>It is often very convenient to use the <span class="strong"><strong>Jupyter Notebook</strong></span>
<a id="id26" class="indexterm"/> to write and share interactive programs. It is a web application that enables an interactive environment for writing Python code alongside rich text, images, plots, and so on. For further <a id="id27" class="indexterm"/>details, check out the project homepage at <a class="ulink" href="http://jupyter.org/">http://jupyter.org/</a>. The Jupyter Notebook can be installed with:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ pip install "ipython[notebook]"</strong></span>
</pre></div></div></div></div><div class="section" title="Choosing an IDE"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec07"/>Choosing an IDE</h3></div></div></div><p>Using an IDE<a id="id28" class="indexterm"/> for development is a matter of personal preference. Simply put, an IDE is a tool intended to accelerate application development. It enables developers to write efficient code quickly by integrating the most common tools they need. The Python installation comes with a program called<a id="id29" class="indexterm"/> <span class="strong"><strong>IDLE</strong></span>. It is a basic IDE for Python, which should get you started. For advanced development, you can choose from a number of freely or commercially available tools. Any good Python IDE<a id="id30" class="indexterm"/> has the following minimum features:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">A source code editor with code completion and syntax highlighting features</li><li class="listitem" style="list-style-type: disc">A code browser to browse through files, projects, functions, and classes</li><li class="listitem" style="list-style-type: disc">A debugger to interactively identify problems</li><li class="listitem" style="list-style-type: disc">A version control system integration such as <span class="strong"><strong>Git</strong></span></li></ul></div><p>You can get started by trying out one of the freely available IDEs. Here is a partial list of popular IDEs. If you are just interested in a simple source code editor, you can check out <a class="ulink" href="https://wiki.python.org/moin/PythonEditors">https://wiki.python.org/moin/PythonEditors</a>, for a list of available choices.</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Python IDE</p>
</th><th style="text-align: left" valign="bottom">
<p>Notes</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>PyCharm Community Edition</p>
<p>
<a class="ulink" href="https://www.jetbrains.com/pycharm">https://www.jetbrains.com/pycharm</a>
</p>
</td><td style="text-align: left" valign="top">
<p>Has a<a id="id31" class="indexterm"/> free community edition. Excellent tool to begin Python development!</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Wing IDE 101</p>
<p>
<a class="ulink" href="http://wingware.com/downloads/wingide-101">http://wingware.com/downloads/wingide-101</a>
</p>
</td><td style="text-align: left" valign="top">
<p>Free<a id="id32" class="indexterm"/> for non-commercial purposes only. Commercial version available with additional features. Another excellent Python IDE. </p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Spyder <a class="ulink" href="https://pythonhosted.org/spyder">https://pythonhosted.org/spyder</a>
</p>
</td><td style="text-align: left" valign="top">
<p>Freely <a id="id33" class="indexterm"/>available, open source. Also provided in bundled Python distributions such as Python(x,y) and Anaconda.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Eclipse PyDev</p>
<p>
<a class="ulink" href="http://www.pydev.org">www.pydev.org</a>
</p>
</td><td style="text-align: left" valign="top">
<p>Freely <a id="id34" class="indexterm"/>available, open source.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Sublime Text 2 or Sublime Text 3 (beta)</p>
<p>
<a class="ulink" href="http://www.sublimetext.com/2">http://www.sublimetext.com/2</a>
</p>
</td><td style="text-align: left" valign="top">
<p>Free for <a id="id35" class="indexterm"/>evaluation purposes only. Highly configurable IDE.</p>
</td></tr></tbody></table></div></div></div></div>
<div class="section" title="The theme of the book"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec11"/>The theme of the book</h1></div></div></div><p>Have you read high fantasy novels, such as <span class="emphasis"><em>The Lord of the Rings</em></span> or <span class="emphasis"><em>The Hobbit</em></span> by J. R. R. Tolkien? Or watched the films based on these novels? Well, here is a high fantasy, "Tolkienesque" themed book on Python application development.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip06"/>Tip</h3><p>To find out more about J.R.R. Tolkien's work, see <a class="ulink" href="https://en.wikipedia.org/wiki/J._R._R._Tolkien">https://en.wikipedia.org/wiki/J._R._R._Tolkien</a>. The term <span class="emphasis"><em>high fantasy</em></span> is often used to represent a fantasy theme set in an alternate fictional world. Check out <a class="ulink" href="https://en.wikipedia.org/wiki/High_fantasy">https://en.wikipedia.org/wiki/High_fantasy</a> for more information.</p></div></div><p>This book takes you to an imaginary world where you will develop a text game based on the aforementioned theme. Yes, you can continue being a developer even in this imaginary world! During the course of the book, you will be accompanied by many fictional characters. While you learn different aspects of Python development, these characters will talk to you, ask questions, request new features, and even fight with the enemy.</p><p>It should be noted that this book is not about developing game applications. It uses a simple text-based game just as a medium to learn various development aspects.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip07"/>Tip</h3><p>Off topic, if you are interested in playing a high fantasy theme game, there are quite a few to choose from. Among the open source ones, <span class="emphasis"><em>Battle for Wesnoth</em></span> is one of the most highly rated, free, turn-based strategy games with a high fantasy theme. Check out <a class="ulink" href="https://www.wesnoth.org">https://www.wesnoth.org</a>, for more details.</p></div></div><div class="section" title="Meet the characters"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec10"/>Meet the characters</h2></div></div></div><p>Let's meet the imaginary characters who will accompany you in various chapters:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<div class="mediaobject"><img src="graphics/B05034_01_31.jpg" alt="Meet the characters"/></div>
</td><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Sir Foo</strong></span>
</p>
<p>A <a id="id36" class="indexterm"/>human knight who <a id="id37" class="indexterm"/>is portrayed as a grand knight guarding the southern plains. He is our main character and will be talking to us throughout the book.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<div class="mediaobject"><img src="graphics/B05034_01_32.jpg" alt="Meet the characters"/></div>
</td><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Orc Rider</strong></span>
</p>
<p>An <a id="id38" class="indexterm"/>Orc is a <a id="id39" class="indexterm"/>human-like imaginary creature. Here, it is portrayed as an enemy soldier. The Orc is seen riding a wild boar-like creature. You will see this creature in this chapter.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<div class="mediaobject"><img src="graphics/B05034_01_33.jpg" alt="Meet the characters"/></div>
</td><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Elf Rider</strong></span>
</p>
<p>An <a id="id40" class="indexterm"/>Elf is a supernatural mythical being. The Elf is mounted on <a id="id41" class="indexterm"/>an elvish horse. He is portrayed as a friendly. You will meet Mr. Elf in <a class="link" href="ch06.html" title="Chapter 6. Design Patterns">Chapter 6</a>, <span class="emphasis"><em>Design Patterns</em></span>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<div class="mediaobject"><img src="graphics/B05034_01_34.jpg" alt="Meet the characters"/></div>
</td><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Fairy</strong></span>
</p>
<p>An <a id="id42" class="indexterm"/>intelligent fairy with an inherent capability for magic. She <a id="id43" class="indexterm"/>will use her magic just once while finding her enchanted locket in <a class="link" href="ch07.html" title="Chapter 7. Performance – Identifying Bottlenecks">Chapter 7</a>, <span class="emphasis"><em>Performance Identifying Bottlenecks</em></span>, (See <span class="emphasis"><em>O(log n)</em></span>). You will first meet her in <a class="link" href="ch06.html" title="Chapter 6. Design Patterns">Chapter 6</a>, <span class="emphasis"><em>Design Patterns</em></span>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<div class="mediaobject"><img src="graphics/B05034_01_35.jpg" alt="Meet the characters"/></div>
</td><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Dwarf</strong></span>
</p>
<p>A Dwarf<a id="id44" class="indexterm"/> is a<a id="id45" class="indexterm"/> small human-like mythical being. He is portrayed as "The Great Dwarf" of the Foo mountains. He asks lots of questions. You will see him in the second half of the book, starting with <a class="link" href="ch06.html" title="Chapter 6. Design Patterns">Chapter 6</a>, <span class="emphasis"><em>Design Patterns</em></span>.</p>
</td></tr></tbody></table></div><p>With this fun theme as a vehicle, let's start our journey with a simple command-line application. It will be a text-based game. The complexities added in subsequent chapters will challenge you with interesting problems. The book will show you how to gracefully handle such situations.</p></div></div>
<div class="section" title="Simple script &#x2013; Attack of the Orcs v0.0.1"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec12"/>Simple script – Attack of the Orcs v0.0.1</h1></div></div></div><p>We have the required tools and the environment set up. It is now time to write our first Python program. It will be a simple game of chance, developed as a command-line application. As we advance further, we will add more complexity to the game and learn new techniques to develop <a id="id46" class="indexterm"/>efficient applications. So, get ready for action!</p><div class="section" title="The game – Attack of the Orcs v0.0.1"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec11"/>The game – Attack of the Orcs v0.0.1</h2></div></div></div><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>The war between humans and their arch enemies, the Orcs, was in the offing. A huge army of Orcs was heading toward the human establishments. They were virtually destroying everything in their way. The great kings of the human race joined hands to defeat their worst enemy for the great battle of their time. Men were summoned to join the rest of the army. Sir Foo, one of the brave knights guarding the southern plains, began a long journey toward the east, through an unknown dense forest. For two days and two nights, he moved cautiously through the thick woods. On his way, he spotted a small isolated settlement. Tired and hoping to replenish his food stock, he decided to take a detour. As he approached the village, he saw five huts. There was no one to be seen around. Hesitantly, he decided to enter a hut...</em></span>
</p>
</td></tr></tbody></table></div><div class="mediaobject"><img src="graphics/B05034_01_02.jpg" alt="The game – Attack of the Orcs v0.0.1"/></div></div><div class="section" title="Problem statement"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec12"/>Problem statement</h2></div></div></div><p>You are designing a simple game in <a id="id47" class="indexterm"/>which the player is required to choose a hut for Sir Foo. The huts are randomly occupied either by a friend or an enemy. It is also possible that some huts remain unoccupied. If the chosen one turns out to be an enemy hut, the player loses. In the other two scenarios, the player wins.</p></div><div class="section" title="Pseudo code – version 0.0.1"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec13"/>Pseudo code – version 0.0.1</h2></div></div></div><p>Now that the goal<a id="id48" class="indexterm"/> is clear, open your favorite editor and note down the main steps. This is sometimes referred to as a pseudo code.</p><p>While the user wishes to keep playing the game:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Print the game mission</li><li class="listitem" style="list-style-type: disc">Create a <code class="literal">huts</code> list</li><li class="listitem" style="list-style-type: disc">Randomly place <code class="literal">'enemy'</code> or <code class="literal">'friend'</code> or <code class="literal">'unoccupied'</code> in 5 huts</li><li class="listitem" style="list-style-type: disc">Prompt the player to select a hut number</li><li class="listitem" style="list-style-type: disc"><code class="literal">if enemy</code>: print <code class="literal">"you lose"</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">else</code>: print <code class="literal">"you win"</code></li></ul></div><p>As you will notice, the key piece of the code is to randomly occupy the five huts with either enemy or friend and keep the remaining ones unoccupied. How do we do this? Let's quickly work this out using the Python interpreter. If you have installed IPython, start the IPython interpreter. Otherwise, just use the default Python interpreter by typing the command <code class="literal">python</code> in a terminal window. First, we need a Python list to hold all the occupant types. Next, we will use <a id="id49" class="indexterm"/>the built-in <code class="literal">random</code> module and call <code class="literal">random.choice</code> to pick one element randomly from this list. This code is shown in the following screen capture:</p><div class="mediaobject"><img src="graphics/B05034_01_03.jpg" alt="Pseudo code – version 0.0.1"/></div><p>Now, we just need to write the surrounding code. Let's review it next.</p></div><div class="section" title="Reviewing the code"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec14"/>Reviewing the code</h2></div></div></div><p>Download the source<a id="id50" class="indexterm"/> code, <code class="literal">ch01_ex01.py</code>, from the supplementary code bundle provided for this chapter. The file extension, <code class="literal">.py</code>, indicates that it is a Python file. Open it in a Python editor or an IDE of your choice. It is recommended that you keep this file handy while reading the following discussion. It is often easier to glance at the full code to understand it better. Observe the following code snippet. It is just a small portion of the code inside the <code class="literal">if __name__ == '__main__'</code> condition block in the aforementioned file.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip08"/>Tip</h3><p>If you have Python 2.7.9 installed, there is a separate Python 2.7.9 compatible source provided in the supporting code bundle.</p></div></div><div class="mediaobject"><img src="graphics/B05034_01_04.jpg" alt="Reviewing the code"/></div><p>Let's review the code<a id="id51" class="indexterm"/> snippet in the preceding screenshot:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The first two lines import two built-in modules to gain access to the functionality provided within these modules. The <code class="literal">textwrap</code> module essentially provides features to nicely format the messages printed on the command line.</li><li class="listitem" style="list-style-type: disc">The <code class="literal">if</code> condition block, <code class="literal">if __name__ == '__main__'</code>, is invoked only when the file is run as a standalone script. In other words, the code inside this condition block won't be executed if you import this file in some other file.</li><li class="listitem" style="list-style-type: disc">Now, let's look at the code in this condition block. First, we will initialize a few variables. As demonstrated earlier, the list <code class="literal">occupants</code> stores the potential occupant types for the hut.</li><li class="listitem" style="list-style-type: disc">The last few lines are just to format the text printed in the terminal window. The <code class="literal">dotted_line</code> is a string that will show a 72-character long line with hyphen symbols.</li><li class="listitem" style="list-style-type: disc">The ASCII escape sequence is used to print the text in bold. The sequence <code class="literal">"\033[1m"</code> is to make bold text, and <code class="literal">"\033[0m"</code> is to go back to normal printing style.</li></ul></div><p>The next few lines essentially print further information about the game in the console:</p><div class="mediaobject"><img src="graphics/B05034_01_05.jpg" alt="Reviewing the code"/></div><p>Let's have a look at the<a id="id52" class="indexterm"/> code from the preceding screenshot:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The variable <code class="literal">msg</code> is a very long string. This is where the <code class="literal">textwrap</code> module is used.</li><li class="listitem" style="list-style-type: disc">The <code class="literal">textwrap.fill</code> function wraps the message in such a way that each line is 72 characters long, as specified by the <code class="literal">width</code> in our code.</li></ul></div><p>Now, let's review the following <code class="literal">while</code> loop.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip09"/>Tip</h3><p>For Python 2.7.9, the only change required in the first example is to replace all the calls to the built-in function <code class="literal">input</code> with <code class="literal">raw_input</code>:</p><div class="informalexample"><pre class="programlisting"># For Python 2.7 
user_choice = raw_input(msg)</pre></div></div></div><div class="mediaobject"><img src="graphics/B05034_01_06.jpg" alt="Reviewing the code"/></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">This top-level <a id="id53" class="indexterm"/>loop gives the player an option to play the game again.</li><li class="listitem" style="list-style-type: disc">Using <code class="literal">random.choice</code>, we randomly pick an occupant from the list of <code class="literal">occupants</code> and add it to the <code class="literal">huts</code> list. This was illustrated earlier.</li><li class="listitem" style="list-style-type: disc">The built-in <code class="literal">input</code> function accepts a hut number of the user's choice as an integer. The <code class="literal">idx</code> variable stores a number.</li></ul></div><p>Next, it reveals the occupants by printing related information. Finally, it determines the winner by checking the list item corresponding to the hut number. Note that the <code class="literal">huts</code> list index starts at 0. Therefore, to retrieve the list element for a given hut number, <code class="literal">idx</code>, we need to check the list index at <code class="literal">idx-1</code>.</p></div><div class="section" title="Running Attack of the Orcs v0.0.1"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec15"/>Running Attack of the Orcs v0.0.1</h2></div></div></div><p>Assuming <a id="id54" class="indexterm"/>you already have Python in your system environment variable, <code class="literal">PATH</code> (available as either <code class="literal">python</code> or <code class="literal">python3</code>), run the program from the command line as:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ python ch01_ex01.py</strong></span>
</pre></div><p>That's all! Just play the game and try to save Sir Foo by choosing the right hut! The following snapshot of a Linux terminal window shows our game in action:</p><div class="mediaobject"><img src="graphics/B05034_01_07.jpg" alt="Running Attack of the Orcs v0.0.1"/></div></div></div>
<div class="section" title="Using functions &#x2013; Attack of the Orcs v0.0.5"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec13"/>Using functions – Attack of the Orcs v0.0.5</h1></div></div></div><p>In the last section, you wrote<a id="id55" class="indexterm"/> a quick set of instructions to create a nice little command-line game. You asked your friends to try it out and they kind of liked it (perhaps they were just trying to be nice!). You received the first feature request for the game.</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>"I think this game has good potential to grow. How about including combat in the next version of the game? When Sir Foo encounters an enemy, he should not just give up that easily. Fight with the enemy! Let the combat decide the winner. "-your friend</em></span>
</p>
</td></tr></tbody></table></div><div class="mediaobject"><img src="graphics/B05034_01_08.jpg" alt="Using functions – Attack of the Orcs v0.0.5"/></div><p>You liked the idea and decided to add this capability to the code in the next version. Additionally, you also want to make it more interactive.</p><p>The script you wrote for the first program was small. However, as we go on adding new features, it will soon become a maintenance headache. As a step further, we will wrap the existing code into small functions so that the code is easier to manage. In functional programming, the focus is typically on function arrangement and their composition. For example, you can build complicated logic using a simple set of reusable functions.</p><div class="section" title="Revisiting the previous version"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec16"/>Revisiting the previous version</h2></div></div></div><p>Before adding any new features, let's revisit the script that you wrote in the previous version (version 0.0.1). We will identify the blocks of code that can be wrapped into functions. Such code chunks are marked in the two code snippets that follow:</p><div class="mediaobject"><img src="graphics/B05034_01_09.jpg" alt="Revisiting the previous version"/></div><p>We will wrap most of the highlighted code into individual functions, as follows:</p><div class="informalexample"><pre class="programlisting">1:  show_theme_message 
2:  show_game_mission 
3:  occupy_huts 
4:  process_user_choice 
5:  reveal_occupants
6:  enter_hut</pre></div><div class="mediaobject"><img src="graphics/B05034_01_10.jpg" alt="Revisiting the previous version"/></div><p>In addition to these six blocks of code, we can also create a few top-level functions to handle all this logic. In Python, the function is created using the <code class="literal">def</code> keyword, followed by the function name and arguments in parentheses. For example, the <code class="literal">reveal_occupants</code> function requires the information about the <code class="literal">huts</code> list. We also need to optionally pass the <code class="literal">dotted_line</code> string if we do not want to recreate it in the function. So, we will pass the hut number <code class="literal">idx</code>, the <code class="literal">huts</code> list, and the <code class="literal">dotted_line</code> string as function arguments. This function can be written as follows:</p><div class="mediaobject"><img src="graphics/B05034_01_11.jpg" alt="Revisiting the previous version"/></div><p>After this initial work, the original script can be rewritten as:</p><div class="mediaobject"><img src="graphics/B05034_01_12.jpg" alt="Revisiting the previous version"/></div><p>This is much easier to read now. What we just did is also referred to as<a id="id56" class="indexterm"/> <span class="strong"><strong>refactoring</strong></span>; more on various refactoring techniques in a later chapter. It makes it easier to do changes to the individual methods. For example, if you want to customize the mission statement or scenario description, you do not need to open the main function, <code class="literal">run_application</code>. Similarly, <code class="literal">occupy_huts</code> can be expanded further without any clutter in the main code.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip10"/>Tip</h3><p>The initial refactored version of the code is not perfect. There is plenty of room for improvement. Can you reduce the burden of passing the <code class="literal">dotted_line</code> parameter or think of some other way to handle the printing of bold text?</p></div></div></div><div class="section" title="Pseudo code with attack feature – Version 0.0.5"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec17"/>Pseudo code with attack feature – Version 0.0.5</h2></div></div></div><p>In the previous <a id="id57" class="indexterm"/>section, we wrapped the game logic into individual functions. This not only improved the code readability, but also made it easier to maintain. Let's move on and include the new <code class="literal">attack()</code> function in the game. The following steps show the logic of the game with the attack feature included.</p><p>While the user wishes to keep playing the game:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Print game mission</li><li class="listitem" style="list-style-type: disc">Create a <code class="literal">huts</code> list</li><li class="listitem" style="list-style-type: disc">Randomly place <code class="literal">'enemy'</code>, <code class="literal">'friend',</code> or <code class="literal">'unoccupied'</code> in 5 huts</li><li class="listitem" style="list-style-type: disc">Prompt the player to select a hut number</li><li class="listitem" style="list-style-type: disc"><code class="literal">if</code> the hut has an enemy, do the following:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">while</code> the user wishes to continue the attack, use the <code class="literal">attack()</code> method on the enemy<p>After each attack, update and show the health of Sir Foo, and of the enemy too; <code class="literal">if enemy health &lt;= 0:</code> print <code class="literal">"You Win".</code>
</p><p>But, <code class="literal">if Sir Foo health &lt;= 0: </code>print <code class="literal">"You Lose".</code>
</p></li></ul></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">else</code> (hut has a friend or is unoccupied) print <code class="literal">"you win"</code></li></ul></div><p>Initially, Sir Foo and the Orc will have full health. To quantify health, let's assign hit points to each of these characters (or the game units). So, when we say the character has full health, it means it has the maximum possible hit points. Depending on the character, the default number of hit points will vary. The following image shows Sir Foo and the Orc with the default number of hit points, indicated by the <span class="strong"><strong>Health</strong></span> label:</p><div class="mediaobject"><img src="graphics/B05034_01_36.jpg" alt="Pseudo code with attack feature – Version 0.0.5"/></div><p>The bar above the <a id="id58" class="indexterm"/>
<span class="strong"><strong>Health</strong></span> label in the image represents a health meter. Essentially, it keeps track of the <span class="emphasis"><em>hit points</em></span>. In the discussion that follows, we will use the terms hit points and health meter interchangeably. During the combat, either the player or the enemy will get injured. For now, neglect the third possibility where both escape unhurt. An injury will reduce the number of available hit points for the injured unit. In the game, we will assume that in a single attack turn only one of the characters is hit. The following image will help you imagine one such attack turn:</p><div class="mediaobject"><img src="graphics/B05034_01_37.jpg" alt="Pseudo code with attack feature – Version 0.0.5"/></div><p>Here, Sir Foo's health meter is shown as the maximum and the Orc has sustained injuries!</p><div class="mediaobject"><img src="graphics/B05034_01_39.jpg" alt="Pseudo code with attack feature – Version 0.0.5"/></div><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>Hmm, the Orc thinks he can defeat Sir Foo! This is interesting. Let's develop the game first and then see who has a better chance of winning!</em></span>
</p>
</td></tr></tbody></table></div><p>With this <a id="id59" class="indexterm"/>understanding of the problem, let's review the code that implements this feature.</p></div><div class="section" title="Reviewing the code"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec18"/>Reviewing the code</h2></div></div></div><p>Download the source <a id="id60" class="indexterm"/>file, <code class="literal">ch01_ex02.py</code>, from the chapter's code bundle and skim through the code. The key logic will be in the <code class="literal">attack()</code> function. We will also need a data structure to keep the health record of Sir Foo and the enemy. Let's start by introducing the following utility functions that take care of some print business:</p><div class="mediaobject"><img src="graphics/B05034_01_13.jpg" alt="Reviewing the code"/></div><p>Now, look at the main function, <code class="literal">run_application</code>, and the supporting function, <code class="literal">reset_health_meter</code>. In addition to introducing the dictionary <code class="literal">health_meter</code>, we have also encapsulated the game logic in <code class="literal">play_game</code>:</p><div class="mediaobject"><img src="graphics/B05034_01_14.jpg" alt="Reviewing the code"/></div><p>At the start of a new game, the values of the <code class="literal">health_meter</code> dictionary are set back to the initial ones by calling <code class="literal">reset_health_meter</code>:</p><div class="mediaobject"><img src="graphics/B05034_01_15.jpg" alt="Reviewing the code"/></div><p>Next, let's review <a id="id61" class="indexterm"/>the <code class="literal">play_game</code> function. If the hut has the enemy, the player will be asked if the attack should be continued (the start of the <code class="literal">while</code> loop). Based on the user input, the code calls the <code class="literal">attack</code> function or exits the current game:</p><div class="mediaobject"><img src="graphics/B05034_01_16.jpg" alt="Reviewing the code"/></div><p>The enemy is<a id="id62" class="indexterm"/> attacked repetitively using the interactive <code class="literal">while</code> loop, which accepts user input. Execution of the <code class="literal">attack</code> function may result in injury to Sir Foo, or the enemy, or both. It is also possible that no one gets hurt. For simplicity, we will only consider two possibilities: a single attack that will injure either the enemy or Sir Foo. In the previous section, we used the built-in random number generator to randomly determine the occupants of the huts. We can use the same technique to determine who gets hurt:</p><div class="informalexample"><pre class="programlisting">injured_unit = random.choice(['player', 'enemy'])</pre></div><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>But hold on a minute. Sir Foo has something to say:</em></span>
</p>
</td></tr></tbody></table></div><div class="mediaobject"><img src="graphics/B05034_01_17.jpg" alt="Reviewing the code"/></div><p>We should take<a id="id63" class="indexterm"/> into account the chance of an injury to the player and to the enemy. In the <code class="literal">attack</code> function shown next, we will assume that for about <span class="emphasis"><em>60% </em></span>of the time, the enemy will get hit and for the remaining <span class="emphasis"><em>40%</em></span>, it is Sir Foo who is on the receiving end.</p><p>The simplest way is to create a list with 10 elements. This list should have six entries of <code class="literal">'enemy'</code> and four entries of <code class="literal">'player'</code>. Then, let <code class="literal">random.choice</code> select an element from this list. You can always introduce a difficulty level in the game and change this distribution:</p><div class="mediaobject"><img src="graphics/B05034_01_18.jpg" alt="Reviewing the code"/></div><p>Once the <code class="literal">injured_unit</code> is selected randomly, the <code class="literal">injury</code> is determined by picking a random number between <code class="literal">10</code> and <code class="literal">15</code>, inclusive. Here, we use the <code class="literal">random.randint</code> function. The final important step is to update the <code class="literal">health_meter</code> dictionary for the injured unit by <a id="id64" class="indexterm"/>reducing its number of hit points.</p></div><div class="section" title="Running Attack of the Orcs v0.0.5"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec19"/>Running Attack of the Orcs v0.0.5</h2></div></div></div><p>We have discussed<a id="id65" class="indexterm"/> the most important functions in this game. Review the other supporting functions from the downloaded file. The following screenshot shows the game in action:</p><div class="mediaobject"><img src="graphics/B05034_01_19.jpg" alt="Running Attack of the Orcs v0.0.5"/></div></div></div>
<div class="section" title="Using OOP &#x2013; Attack of the Orcs v1.0.0"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec14"/>Using OOP – Attack of the Orcs v1.0.0</h1></div></div></div><p>The attack feature that you<a id="id66" class="indexterm"/> added in the previous game has made it a lot more interesting. You can see some friends coming back again and again to play the game. The new feature requests have started pouring in.</p><p>Here is a partial list of the requested features:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">New mission to acquire all the huts and defeat all the enemies. This also means the hut occupants should be revealed right at the beginning of the game.</li><li class="listitem">Ability to get healed in a friendly or unoccupied hut.</li><li class="listitem">Ability to abandon combat (or run away from the enemy). This is a strategic move to run away, get healed in a friendly hut, and resume combat.</li><li class="listitem">Introduce one or more horse riders to assist Sir Foo. They can take turns to acquire huts. Ideally, a user-configurable option.</li><li class="listitem">Ability to configure the maximum hit points for each enemy unit and each of the horse riders.</li><li class="listitem">Configurable total number of huts; for example, increase it to 10.</li><li class="listitem">Each hut can have either some gold or a weapon inside that Sir Foo and his friends can pick up.</li><li class="listitem">Have an elf rider join Sir Foo. His abilities give him a very high chance of winning<a id="id67" class="indexterm"/> with fewer attacks.</li></ol></div><p>This is quite a long list. You are preparing a plan. Here is a partial list of things you will need to add to the existing code to implement some of these features:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Keeping track of the hit points of multiple enemy units occupying various huts</li><li class="listitem" style="list-style-type: disc">Maintaining the health record of Sir Foo and all accompanying horse riders</li><li class="listitem" style="list-style-type: disc">Monitoring how many huts are acquired by Sir Foo's army</li><li class="listitem" style="list-style-type: disc">Another dictionary or list to keep track of the gold in each hut, and another one for weapons; additionally, what if someone wants to put armor in the hut?</li><li class="listitem" style="list-style-type: disc">Not to forget, yet another list of dictionary for each unit that accepts any of these goodies</li><li class="listitem" style="list-style-type: disc">Ah! So they want an elf rider with its own traits and abilities...nice...thanks for the additional trouble!</li></ul></div><p>That is already a long list. While you could still continue to use the functional programming approach, in such scenarios it will get tougher as the game evolves and new features get added.</p><p>Thankfully, object-oriented programming comes to the rescue. How about making Sir Foo an instance of a <code class="literal">Knight</code> <code class="literal">class</code>? With this, it should be easy to manage parameters relevant to Sir Foo. For example, an attribute, <code class="literal">hitpoints</code>, can be used to keep track of Sir Foo's health instead of using the <code class="literal">health_meter</code> dictionary in the earlier example. Similarly, the other attributes in the class can keep track of the amount of gold or weapons collected while acquiring the huts (another requested feature).</p><p>There is a lot more beyond this bookkeeping. The various methods of the class would enable a specific implementation of behaviors, such as attack, run, heal, and so on. The horse riders accompanying Sir Foo can also be instances of the class <code class="literal">Knight</code>. Alternatively, you<a id="id68" class="indexterm"/> can create a new class called <code class="literal">HorseRider</code> for all these units that accept commands from Sir Foo.</p><div class="section" title="Prioritize the feature requests"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec20"/>Prioritize the feature requests</h2></div></div></div><p>For this new <a id="id69" class="indexterm"/>version, let's hand pick a few requested features from the earlier list. In fact, Sir Foo should be the one who makes this call:</p><div class="mediaobject"><img src="graphics/B05034_01_20.jpg" alt="Prioritize the feature requests"/></div><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>As you wish, Sir Foo...we will only add the new heal feature in this version.</em></span>
</p>
</td></tr></tbody></table></div></div><div class="section" title="Problem statement"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec21"/>Problem statement</h2></div></div></div><p>It is now time to clearly define the targets for this release. You are not just adding new features to your application, but also making some fundamental changes to the code to accommodate future requests.</p><p>In this version, the <a id="id70" class="indexterm"/>mission is to acquire all of the five huts. Here, you will implement a new <code class="literal">heal</code> feature to regain all the hit points for Sir Foo. You will also implement some strategic controls, such as running away from combat, getting healed in a friendly hut, and then returning rejuvenated to defeat the enemy.</p></div><div class="section" title="Redesigning the code"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec22"/>Redesigning the code</h2></div></div></div><p>We already discussed how <a id="id71" class="indexterm"/>creating a <code class="literal">Knight</code> class will help simplify the handling of data and all other things related to Sir Foo, be it the hit points or the way he attacks enemies.</p><p>What other classes can be carved out? How about having the enemy as an object? The enemy could occupy multiple huts. Remember that we need to defeat all the enemies. Imagine the following scenario: Sir Foo injures an enemy in hut number 2, thereby reducing its hit points. Then, he moves on to another hut occupied by another enemy. Now, we need to maintain two separate hit point counters for each of these enemy units.</p><p>In a future version, you can expect users to ask for different enemy types with the ability to attack or heal, just like how we have it for Sir Foo. So, at this point, it makes sense to have a separate class, instances of which represent the enemy units. We will name this class <code class="literal">OrcRider</code>. It will have similar attributes to the <code class="literal">Knight</code> class. However, for simplicity, we will not give the enemy capabilities such as healing, changing huts, and so on.</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>
<span class="emphasis"><em>Sir Foo says he is delighted to read that the enemy has been denied some important capabilities. (But you can't see his happy face behind the helm.)</em></span>
</p>
</td></tr></tbody></table></div><p>There is something else we should consider. So far, <code class="literal">huts</code> was just a simple Python <code class="literal">list</code> object holding information about the occupant types as strings.</p><p>Looking at the requested features list, we also need bookkeeping for the amount of gold and armor in the hut and to update its occupant, depending on the result of the fight. In a future version, you may also want to show some statistics, such as a historic record of the occupants, changes in the amount of gold, and so on. For all this and more, we will create a class, <code class="literal">Hut</code>.</p></div><div class="section" title="Painting the big picture"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec23"/>Painting the big picture</h2></div></div></div><p>Take a pen and paper and write down the important attributes we need for each class discussed so far. At this point, do not worry about classifying whether it is an instance variable or a class method that encapsulates instructions to perform specific tasks. Just write down what you think belongs to each class.</p><p>The following <a id="id72" class="indexterm"/>schematic shows a list of potential attributes for the <code class="literal">Knight</code>, <code class="literal">Hut</code>, and <code class="literal">OrcRider</code> classes. The attribute names in strikethrough text indicate the potential attributes that won't be implemented in this illustration. But, it is always good to think ahead and keep it at the back of your mind during the design phase of the application:</p><div class="mediaobject"><img src="graphics/B05034_01_21.jpg" alt="Painting the big picture"/></div><p>This is not a complete specification, but we have a good starting point now. When Sir Foo enters an enemy hut, we have a choice to call the <code class="literal">attack</code> method of the <code class="literal">Knight</code> class. As before, the <code class="literal">attack</code> method will randomly pick who gets injured and deduct the hit points for that character. In the <code class="literal">Knight</code> class, it is convenient to have a new attribute, <code class="literal">enemy,</code> that will represent the active opponent. In this example, <code class="literal">enemy</code> will be an instance of the <code class="literal">OrcRider</code> class.</p><p>Let's develop this design further. Did you notice that the <code class="literal">Knight</code> and <code class="literal">OrcRider</code> classes have several things in common? We will use the <span class="strong"><strong>inheritance</strong></span> principle<a id="id73" class="indexterm"/> to create a superclass for these <a id="id74" class="indexterm"/>classes, and call it <code class="literal">GameUnit</code>. We will move the common code to the superclass, and let the subclasses override the things they want to implement differently. In the next section, we will represent these classes with a <span class="strong"><strong>Unified Modeling Language</strong></span> (<span class="strong"><strong>UML</strong></span>)<a id="id75" class="indexterm"/>-like diagram.</p><div class="section" title="Pseudo UML representation"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec08"/>Pseudo UML representation</h3></div></div></div><p>The following diagram will help <a id="id76" class="indexterm"/>develop a basic understanding of how the various components talk to each other:</p><div class="mediaobject"><img src="graphics/B05034_01_22.jpg" alt="Pseudo UML representation"/></div><p>The preceding diagram is similar to a UML representation. It helps create a visual representation of a software design. In this book, we will loosely follow the UML representations. Let's call the diagrams used here pseudo UML diagrams (or UML-like diagrams).</p></div><div class="section" title="Understanding the pseudo UML diagram"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec09"/>Understanding the pseudo UML diagram</h3></div></div></div><p>An explanation<a id="id77" class="indexterm"/> is in order for the UML-like convention used here. We will represent each class in the schematics as a rounded rectangle. It shows the class name followed by its attributes. The plus sign (<span class="strong"><strong>+</strong></span>) before the attribute indicates that it is public. A protected or private method is generally represented with a negative sign (<span class="strong"><strong>-</strong></span>). All the attributes shown in this diagram are public attributes. So, optionally, you could add a plus sign next to each attribute. In later chapters, we will follow this convention. For ease of illustration, only a few relevant public attributes will be listed. Observe that we are using different types of connectors in this diagram:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The arrowhead with an empty triangle symbol represents inheritance; for example, the <code class="literal">Knight</code> class inherits from the <code class="literal">GameUnit</code> class</li><li class="listitem" style="list-style-type: disc">The arrowhead with a filled diamond symbol represents<a id="id78" class="indexterm"/> <span class="strong"><strong>object composition</strong></span>, for example, a <code class="literal">Hut</code> instance has an object of the <code class="literal">GameUnit </code>class (or its subclasses)</li><li class="listitem" style="list-style-type: disc">The arrowhead with an empty diamond symbol represents <a id="id79" class="indexterm"/><span class="strong"><strong>object aggregation</strong></span></li></ul></div><p>Now, let's talk about the individual components of the diagram presented earlier.</p><p>The <code class="literal">Knight</code> and <code class="literal">OrcRider</code> classes inherit from <code class="literal">GameUnit</code>. The <code class="literal">Knight</code> class, in this case, will override default methods, such as <code class="literal">attack</code>, <code class="literal">heal</code>, and <code class="literal">run_away</code>. The <code class="literal">OrcRider</code> class will not have such overridden methods, as we will not give these capabilities to the enemy.</p><p>The <code class="literal">Hut</code> class will have an occupant. The occupant can either be an instance of the <code class="literal">Knight</code> or the <code class="literal">OrcRider</code>, or the <code class="literal">None</code> type if the hut is unoccupied. The filled diamond connector in the diagram indicates composition.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip11"/>Tip</h3><p>
<span class="strong"><strong>Object composition</strong></span>
</p><p>It is an important <a id="id80" class="indexterm"/>OOP principle. It implies a has-a relationship. In this case, <code class="literal">Hut</code> contains, or is composed of, some other object that is to be used to perform specific tasks. Just say it out loud; a <code class="literal">Hut</code> has-a <code class="literal">Knight</code>, a <code class="literal">Hut</code> has-an <code class="literal">OrcRider</code>, and so on.</p></div></div><p>In addition to the four classes discussed, we will introduce another one to encapsulate the top-level code. Let's call it <code class="literal">AttackOfTheOrcs</code>. As there are five huts, a class method in <code class="literal">AttackOfTheOrcs</code> creates that number of <code class="literal">Hut</code> instances. This is object aggregation, shown by the empty diamond shaped arrow in the preceding diagram.</p><p>Have you noticed another has-a relationship in <code class="literal">AttackOfTheOrcs</code>? The <code class="literal">player</code> attribute in this class is an instance of the <code class="literal">Knight</code> class, but in the future, this could change. This relationship is indicated by the filled diamond-head connector joining the <code class="literal">Knight</code> and <code class="literal">AttackOfTheOrcs</code> boxes.</p></div></div><div class="section" title="Reviewing the code"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec24"/>Reviewing the code</h2></div></div></div><p>With this high-level <a id="id81" class="indexterm"/>understanding, let's begin developing the code. Download the Python source file, <code class="literal">ch01_ex03.py</code>. We will review only a few important methods in the code. Refer to this source file for the complete code.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip12"/>Tip</h3><p>The code for this example, <code class="literal">ch01_ex03.py</code>, is all squished inside a single file. Is it good practice? Certainly not! As we go along, you will learn about best practices. Later in the book, we will discuss some important building blocks of application development, namely refactoring, coding standards, and design patterns. As an exercise, try to split the code into smaller modules and add code documentation.</p></div></div><p>The main execution code is shown here, along with some details of the <code class="literal">AttackOfTheOrcs</code> class. In the <code class="literal">__init__</code> method, we will initialize some instance variables and later update the values they hold. For example, <code class="literal">self.player</code> represents the instance of the <code class="literal">Knight</code> class when the game begins:</p><div class="mediaobject"><img src="graphics/B05034_01_23.jpg" alt="Reviewing the code"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip13"/>Tip</h3><p>Just as a refresher, the <code class="literal">__init__</code> method is somewhat similar to a constructor in languages such as C++; however, keep in mind some differences. For example, you cannot overload <code class="literal">__init__</code> as you might do in these languages. Instead, you can easily accomplish this using optional arguments or the <code class="literal">classmethod</code> decorator. We will cover some aspects later in the book.</p></div></div><p>Let's quickly <a id="id82" class="indexterm"/>review the <code class="literal">play</code> and <code class="literal">_occupy_huts</code> methods:</p><div class="mediaobject"><img src="graphics/B05034_01_24.jpg" alt="Reviewing the code"/></div><p>The <code class="literal">self.player</code> is an instance of the <code class="literal">Knight</code> class. We will call the <code class="literal">acquire_hut</code> method of this instance where most of the high-level action happens. After this, the program simply looks for the health parameters of the player and the enemy. It also queries the <code class="literal">Hut</code> instance to see if it is acquired.</p><p>Moving ahead, in the <code class="literal">_occupy_hut</code> method, the objects of <code class="literal">Hut</code> are created and appended to the <code class="literal">self.huts</code> list. This method is shown in the following figure:</p><div class="mediaobject"><img src="graphics/B05034_01_25.jpg" alt="Reviewing the code"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note02"/>Note</h3><p>
<span class="strong"><strong>Public, protected, and private in Python</strong></span>
</p><p>You will notice that some methods of the <code class="literal">AttackOfTheOrcs</code> class start with an underscore, for example, <code class="literal">_process_user_choice()</code>. That is a way to say that this method is not meant for public use. It is intended to be used from within the class. Languages such as C++ define class access specifiers, namely, <code class="literal">private</code>, <code class="literal">protected</code>, and <code class="literal">public</code>. These are used to put restrictions on the access of class attributes.</p><p>There is no<a id="id83" class="indexterm"/> such thing in Python. It allows outside access to the attributes with a single underscore as <code class="literal">game._process_user_choice()</code>. If the attribute name starts with double underscores, you can't call it directly. For example, you can't directly call <code class="literal">game.__process_user_choice()</code>. That being said, there is another way to access such attributes from outside. But let's not talk about it. Although Python allows you to access such attributes, it is is not good practice to do so!</p></div></div><p>Observe the <code class="literal">acquire_hut</code> method of the Knight class:</p><div class="mediaobject"><img src="graphics/B05034_01_26.jpg" alt="Reviewing the code"/></div><p>Let's talk through this method next:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">First, we need to check whether the hut's occupant is a friend or an enemy. This is determined by the variable <code class="literal">is_enemy</code>, as shown in the preceding figure.</li><li class="listitem" style="list-style-type: disc">The hut's occupant can be of the following types: an instance of the <code class="literal">Knight</code> class, an instance of the <code class="literal">OrcRider</code> class, or set to <code class="literal">None</code>.</li><li class="listitem" style="list-style-type: disc">The <code class="literal">GameUnit</code> class, and its subclasses <code class="literal">Knight</code> and <code class="literal">OrcRider</code>, define a <code class="literal">unit_type</code> attribute. This is just a string that is set as either <code class="literal">'friend'</code> or <code class="literal">'enemy'</code>.</li><li class="listitem" style="list-style-type: disc">Thus, to determine whether there is an enemy hiding in the hut, we will first check whether the <code class="literal">hut.occupant</code> is an instance of the superclass <code class="literal">GameUnit</code>. If true, we will know it has a <code class="literal">unit_type</code> parameter. So, we will check whether <code class="literal">hut.occupant.unit_type</code> is equal to <code class="literal">'enemy'</code>. For the <code class="literal">OrcRider</code> class, <code class="literal">unit_type</code> is set to <code class="literal">'enemy'</code> by default.</li><li class="listitem" style="list-style-type: disc">The rest of the logic is simple. If the occupant is an enemy, it asks the user what to do next: attack or run away.</li><li class="listitem" style="list-style-type: disc">The <code class="literal">Knight.attack</code> method is similar to the one discussed earlier. One change here is that we can access the <code class="literal">health_meter</code> attribute of the injured unit and update it.</li><li class="listitem" style="list-style-type: disc">If <code class="literal">hut.occupant</code> happens to be <code class="literal">'friend'</code> or <code class="literal">None</code>, it calls <code class="literal">hut.acquire()</code>.</li></ul></div><p>What happens <a id="id84" class="indexterm"/>when the <code class="literal">Hut.acquire()</code> method is called? Here is the code snippet for the <code class="literal">Hut</code> class:</p><div class="mediaobject"><img src="graphics/B05034_01_27.jpg" alt="Reviewing the code"/></div><p>The <code class="literal">acquire</code> method simply updates the <code class="literal">occupant</code> attribute with the object passed as an argument to this method.</p></div><div class="section" title="Running Attack of the Orcs v1.0.0"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec25"/>Running Attack of the Orcs v1.0.0</h2></div></div></div><p>It's play time! We <a id="id85" class="indexterm"/>have reviewed the most important methods of the new classes. You can review the rest of the code from the <code class="literal">ch01_ex03.py</code> file, or better try to write these methods on your own. Run the application from the command line, like we did earlier. The following screenshot shows the game in action:</p><div class="mediaobject"><img src="graphics/B05034_01_28.jpg" alt="Running Attack of the Orcs v1.0.0"/></div></div></div>
<div class="section" title="Abstract base classes in Python"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec15"/>Abstract base classes in Python</h1></div></div></div><p>In the previous section, we <a id="id86" class="indexterm"/>redesigned the code using the OOP approach. We also demonstrated the use of inheritance by defining a superclass <code class="literal">GameUnit</code>, and inheriting from it to create the <code class="literal">Knight</code> and <code class="literal">OrcRider</code> subclasses. As the last topic in this chapter, let's talk about using abstract base classes in Python.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip14"/>Tip</h3><p>This section is intended to provide a basic understanding of ABCs in Python. The discussion here is far from being comprehensive but will be just enough to implement an ABC in our application code. For further reading, check out the Python documentation at <a class="ulink" href="https://docs.python.org/3/library/abc.html">https://docs.python.org/3/library/abc.html</a>.</p></div></div><p>If you are familiar with OOP languages such as Java or C++, you probably already know the concept of an ABC.</p><p>A base class is a parent <a id="id87" class="indexterm"/>class from which other classes can be derived. Similarly, you can have an abstract base class and create other classes that inherit this class. So, where is the difference? One of the major differences is that an ABC can't be instantiated. But that is not the only difference. An ABC forces the derived classes to implement specific methods defined within that class. This much knowledge about an ABC should be good enough to work through the examples in this book. For more details, see the aforementioned Python documentation link. Let's review a simple example that shows how to implement an abstract base class in Python and how it differs from an ordinary base class. The <code class="literal">abc</code> module provides the necessary infrastructure. The following code snippet compares the implementation of an ABC to an ordinary base class:</p><div class="mediaobject"><img src="graphics/B05034_01_38.jpg" alt="Abstract base classes in Python"/></div><p>The class on the left, <code class="literal">AbstractGameUnit</code>,<code class="literal"> </code>is the abstract base class, whereas the <code class="literal">GameUnit</code> class on the right is an ordinary base class. The three differences in the ABC implementation are <a id="id88" class="indexterm"/>marked with numbers, as shown in the preceding screenshot.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The argument <code class="literal">metaclass=ABCMeta</code> is used to define <code class="literal">AbstractGameUnit</code> as an ABC.</li><li class="listitem" style="list-style-type: disc">The <code class="literal">ABCMeta</code> is a <span class="strong"><strong>metaclass</strong></span><a id="id89" class="indexterm"/> to define the abstract base class. It is a broad discussion topic, but the simplified meaning of a metaclass is as follows: to create an object, we use a class. Likewise, imagine a metaclass as one used to create a class.</li><li class="listitem" style="list-style-type: disc">A Python <span class="strong"><strong>decorator</strong></span><a id="id90" class="indexterm"/> provides a simple way to dynamically alter the functionality of a method, a class, or a function. This is a special Python syntax that starts with an @ symbol followed by the decorator name. A decorator is placed directly above the method definition.</li><li class="listitem" style="list-style-type: disc">The <code class="literal">@abstractmethod</code> is a decorator that makes the method defined on the next line an abstract method.</li><li class="listitem" style="list-style-type: disc">The abstract method is the one that the ABC requires all the subclasses to implement. In this case, <code class="literal">AbstractGameUnit</code> requires its <code class="literal">Knight</code> subclass to implement the <code class="literal">info()</code> method. If the subclass does not implement this method, Python simply doesn't instantiate that subclass and will throw <code class="literal">TypeError</code>. You can try this by removing the <code class="literal">Knight.info</code> method and running the code.</li><li class="listitem" style="list-style-type: disc">There is no such restriction if the <code class="literal">Knight</code> class inherits from an ordinary base class, such as <code class="literal">GameUnit</code>.</li></ul></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip15"/>Tip</h3><p>The code illustrated here is for Python version 3.5. For version 2.7, the syntax is different. Refer to the <code class="literal">ch01_ex03_AbstractBaseClass.py </code>file in the Python2 directory of the supporting material for an equivalent example.</p></div></div><div class="section" title="Exercise"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec26"/>Exercise</h2></div></div></div><p>In the <code class="literal">ch01_ex03.py</code> file, you will see some comments. These are intentionally kept to give you an opportunity to improve portions of the code. There is plenty of room for improvement in this code. See if you can rewrite portions of the code to make it more robust. If you prefer a well-defined problem, here is one:</p><p>The <code class="literal">Knight</code> and <code class="literal">OrcRider</code> classes inherit from the <code class="literal">GameUnit</code> superclass. This exercise is about converting <code class="literal">GameUnit</code> to <code class="literal">AbstractGameUnit</code>, an abstract base class. Here is a cheat sheet for you; the skeleton code shown in the following figure is with the Python 3.5 syntax. </p><p>Refer to the <code class="literal">ch01_ex03_AbstractBaseClass.py</code> file:</p><div class="mediaobject"><img src="graphics/B05034_01_29.jpg" alt="Exercise"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip16"/>Tip</h3><p>Note that for Python 2.7, there is a separate version of this code. Refer to the <code class="literal">src_ch1_Python2</code> directory in the supporting code bundle.</p></div></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec16"/>Summary</h1></div></div></div><p>In this chapter, we touched upon some introductory concepts in Python to develop a simple command-line application. We first equipped ourselves by setting up a Python development environment.</p><p>The first program we wrote was a simple Python script. We soon realized that a simple script would be hard to maintain if more features are added. As a next step, we did a bit of refactoring and wrapped the code inside functions. This improved the code readability and also made it easier to manage. The proposed introduction of more features to the application made us rethink the design. We learned how to transform the code into an object-oriented design and implemented a few of these new features.</p><p>And how can we forget Sir Foo! He will accompany us throughout this book.</p><p>Is the code developed free from bugs? You might have already noticed some problems while playing the game! In the next chapter, we will see how to make the application more robust by handling exceptions.</p><div class="section" title="Very important note for e-book readers"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec27"/>Very important note for e-book readers</h2></div></div></div><p>The code illustrations that you see in this book are actually image files or code snapshots.</p><p>The rendering quality of these images will vary depending on your PDF reader's page display resolution and the zoom level.</p><p>If you have trouble clearly reading this code, you may try the following in your PDF or e-book reader:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Set the zoom level to 100%</li><li class="listitem" style="list-style-type: disc">Use the page display resolution of 96 pixels/inch or similar</li></ul></div><p>If the problem still persists, you can try with a different resolution.</p><p>How do you set this resolution? It will depend on your e-book reader. For example, if you are using Adobe Reader, go to <span class="strong"><strong>Edit</strong></span> | <span class="strong"><strong>Preferences</strong></span> and then select <span class="strong"><strong>Page Display</strong></span> from the left panel. You will see <span class="strong"><strong>Resolution</strong></span> as an option in the right panel. Select <span class="strong"><strong>96 pixels/inch</strong></span> or similar and see if that helps render the images better.</p></div></div></body></html>