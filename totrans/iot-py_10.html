<html><head></head><body>
  <div id="sbo-rt-content"><div class="chapter" title="Chapter 10. Analyzing Huge Amounts of Data with Cloud-based IoT Analytics"><div class="titlepage"><div><div><h1 class="title"><a id="ch10"/>Chapter 10. Analyzing Huge Amounts of Data with Cloud-based IoT Analytics</h1></div></div></div><p>In this chapter, we will work with Intel IoT Analytics to analyze huge amounts of data with this powerful cloud-based service. We will:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Understand the relationship between Internet of Things and Big Data</li><li class="listitem" style="list-style-type: disc">Learn the Intel IoT Analytics structure</li><li class="listitem" style="list-style-type: disc">Set up devices in Intel IoT Analytics</li><li class="listitem" style="list-style-type: disc">Configure components in Intel IoT Analytics</li><li class="listitem" style="list-style-type: disc">Collect sensor data with Intel IoT Analytics</li><li class="listitem" style="list-style-type: disc">Analyze sensor data with Intel IoT Analytics</li><li class="listitem" style="list-style-type: disc">Trigger alerts with rules in Intel IoT Analytics</li></ul></div><div class="section" title="Understanding the relationship between Internet of Things and Big Data"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec94"/>Understanding the relationship between Internet of Things and Big Data</h1></div></div></div><p>Big Data is<a id="id531" class="indexterm"/> watching us. We are generating valuable data each time we perform an action without even knowing that. Every time we tap, click, tweet, stop on a<a id="id532" class="indexterm"/> red light signal, hop on a bus, or perform an action caught by the millions of real-time sensors in any city around the world, we are generating valuable data. We interact with IoT devices that have sensors, collect data, and publish it to the Cloud. In order to analyze and process Big Data, managers, architects, developers, and system administrators require many skills that were not necessary for applications that worked with smaller data sets.</p><p>We have been working with examples that collected data from the real world through sensors and published it to the Cloud. We also published messages that include data from sensors and commands that have to be processed by code running on an IoT device. Sometimes, we<a id="id533" class="indexterm"/> are retrieving data from the sensors every second. Thus, it is very easy to realize that we generate huge amounts of data, and therefore, it is very important to learn many things related to Big Data. Internet of Things <a id="id534" class="indexterm"/>comprises Big Data.</p><p>Imagine we write Python code that runs on an Intel Galileo Gen 2 board and performs the following actions every second:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Read the measured ambient temperature from a temperature and humidity sensor</li><li class="listitem" style="list-style-type: disc">Read the measured ambient humidity level from a temperature and humidity sensor</li><li class="listitem" style="list-style-type: disc">Read the measured volumetric water content in soil from ten soil moisture sensor that measure the values in different locations</li><li class="listitem" style="list-style-type: disc">Publish a message with the ambient temperature, ambient humidity, and the ten volumetric water contents</li></ul></div><p>The first things that might come to our mind are the number of sensors we have to connect to our board. Let's consider that all the sensors are digital sensors and we have to connect them to the I<sup>2</sup>C bus. We can connect the digital temperature and humidity sensor plus then ten soil-moisture sensors to the I<sup>2</sup>C bus as long as all the sensors have different I<sup>2</sup>C bus addresses. We just need to make sure that we can configure the I<sup>2</sup>C bus address for the soil moisture sensors and we can assign a different I<sup>2</sup>C address to each of these sensors.</p><p>Catnip Electronics designed a digital soil moisture sensor that provides an I<sup>2</sup>C interface and one of its features is that it allows an I<sup>2</sup>C address change. The default I<sup>2</sup>C address for this sensor is 0x20 (hexadecimal 20) but we can easily change it. We just need to connect each sensor to the I<sup>2</sup>C bus, write the new address to register one and the new address will take effect after we reset the sensor. We just need to write a 6 to the sensor's I<sup>2</sup>C address to reset the sensor. We can follow the same procedure for all the sensors and assign different I<sup>2</sup>C addresses to them. You can read more about the digital soil moisture sensor in the following webpage: <a class="ulink" href="http://www.tindie.com/products/miceuz/i2c-soil-moisture-sensor">http://www.tindie.com/products/miceuz/i2c-soil-moisture-sensor</a>.</p><p>We want to analyze hourly, daily, monthly, quarterly, and yearly data. However, we do need to measure every second and not every single day because it is very important to analyze how data changes per second. We are going to collect the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">60 measurements for all the variables per minute</li><li class="listitem" style="list-style-type: disc">3,600 (60 * 60) measurements per hour</li><li class="listitem" style="list-style-type: disc">86,400 (3,600 x 24) measurements per day</li><li class="listitem" style="list-style-type: disc">31,536,000 (86,400 * 365) measurements per year (considering that we aren't talking about a leap year)</li></ul></div><p>We won't have just <a id="id535" class="indexterm"/>one IoT device collecting data and publishing it. We will have 3,000 IoT devices running the same code and they will generate 94,608,000,000 (31,356,300 * 3,000), that is, ninety-four billion six hundred eight million, measurements per year. In addition, we have other data sources that we have to analyze: all the tweets about weather related issues in the locations in which the sensors are capturing data. Thus, we have huge volumes of both structured and unstructured data that we want to analyze computationally, to reveal patterns and associations. We are definitely talking about Big Data practices.</p><p>The sample numbers are useful to understand the relationship between Big Data and IoT. We won't deploy 3,000 boards for our next example and we won't cover all the topics related to IoT analytics and Big Data because it would be out of the scope of this book. However, we will work with the cloud-based analytics system that works with a component included in the Intel IoT Development Kit image that we have been using to boot the board with the Yocto Linux meta distribution in <a class="link" href="ch02.html" title="Chapter 2. Working with Python on Intel Galileo Gen 2">Chapter 2</a>, <span class="emphasis"><em>Working with Python on Intel Galileo Gen 2</em></span>.</p></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Understanding the Intel IoT Analytics structure"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec95"/>Understanding the Intel IoT Analytics structure</h1></div></div></div><p>Imagine that <a id="id536" class="indexterm"/>we have to collect and analyze sensor data for 3,000 IoT devices, that is, 3,000 Intel Galileo Gen 2 boards running the Python code that interacts with sensors. We would need to invest in the storage and processing capacity to perform IoT analytics with such a huge amount of data. Whenever we have a similar requirement, we can take advantage of a cloud-based solution. Intel IoT Analytics is one of them and it works very well with the Intel Galileo Gen 2 board and Python.</p><p>Intel IoT Analytics requires us to sign up, create an account with a valid e-mail and a password, and click on the activation link of a confirmation e-mail before we can publish the sensor data using their free services. We aren't required to enter any credit card or payment information. If you already have an account at Intel IoT Analytics, you can skip this step. You can also use your existing Facebook, Google+, or GitHub account to log in. The following is the main web page for the Intel IoT Analytics site: <a class="ulink" href="https://dashboard.us.enableiot.com">https://dashboard.us.enableiot.com</a>. Make sure to review the terms and conditions before you use this cloud-based service with sensitive data.</p><p>Once you <a id="id537" class="indexterm"/>create your account and log in for the first time to Intel IoT Analytics, the site will display the <span class="strong"><strong>Create new Account</strong></span> page. Enter the desired name to identity the account, that is, your analytics project in <span class="strong"><strong>Account Name</strong></span>. Enter <code class="literal">Temperature and humidity</code> for our example and leave the default option for <span class="strong"><strong>Sensor health report</strong></span>. Then, click <span class="strong"><strong>Create</strong></span> and the site will display the <span class="strong"><strong>My Dashboard</strong></span> page for the recently created account. Each account represents a separate workspace with its own set of sensors and related data. The site allows us to create more than one account and easily switch between them. The following screenshot shows the initial view for the <span class="strong"><strong>My Dashboard</strong></span> page after we created a new account:</p><div class="mediaobject"><img src="images/B05042_10_01.jpg" alt="Understanding the Intel IoT Analytics structure"/></div><p>The <span class="strong"><strong>My Dashboard</strong></span> page indicates that we still don't have registered devices, and therefore, we don't have either transmitting devices or observations. Each time we publish data from a registered device to Intel IoT Analytics, we create an observation for the device. Thus, the <span class="strong"><strong>My Dashboard</strong></span> page provides the number of last observations in a specific period. By default, the page displays the sum of the last hour observations for all the registered devices. Keep the web site opened in your web browser because we will continue working with it later.</p><p>As a user, we<a id="id538" class="indexterm"/> can work with many accounts. Each account can contain many devices, has a name and an identifier known as <code class="literal">accountId</code>. Each device has a globally unique identifier known as <code class="literal">deviceId</code>. So, each Intel Galileo Gen 2 board that includes sensors will become one device for the account we have created. In our case, we will just work with a single Intel Galileo Gen 2 board. However, remember that our goal is to demonstrate how we can work with 3,000 IoT devices handled by a single account.</p><p>We can think of each device as an endpoint that contains one or more components that can provide one of the following in Intel IoT Analytics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Actuator</strong></span>: A setting <a id="id539" class="indexterm"/>that can be modified on a device. For example, rotate the angle of a servo's shaft or turn on an LED.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Time series</strong></span>: A <a id="id540" class="indexterm"/>series of values captured from a sensor, that is, a collection of observations. For example, a collection of observations with ambient temperature values retrieved with a temperature and humidity sensor, expressed in degrees Fahrenheit and including timestamps.</li></ul></div><p>In our case, we need a device to use the following components that will retrieve the values from the digital temperature and humidity sensor connected to our board:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">A time series with ambient temperature observations expressed in degrees Fahrenheit (ºF)</li><li class="listitem" style="list-style-type: disc">A time series with ambient temperature observations expressed in degrees Celsius (ºC)</li><li class="listitem" style="list-style-type: disc">A time series with ambient humidity level observations expressed in percentage</li></ul></div><p>First, we will work with the UI provided by the Intel IoT Analytics web site in combination with the <code class="literal">iotkit-admin</code> utility to set up the device, activate it and register the three components included in the previous list. This way, we will learn to work with the structure required by Intel IoT Analytics. Then, we will write Python code that uses the REST API to create observations for the defined components that belong to an activated device included in our recently created account.</p><p>We can also the<a id="id541" class="indexterm"/> REST API to perform the previously explained setup tasks by writing a Python code. In case we have to work with more than a dozen devices, we won't want to perform the setup tasks by working with the UI provided by the Intel IoT Analytics web site, we would definitely want to write code that automates the setup tasks.</p></div></div>


  <div id="sbo-rt-content"><div class="section" title="Setting up devices in Intel IoT Analytics"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec96"/>Setting up devices in Intel IoT Analytics</h1></div></div></div><p>The<a id="id542" class="indexterm"/> image that <a id="id543" class="indexterm"/>we have been using to boot our Intel Galileo Gen 2 board includes a local agent for Intel IoT Analytics preinstalled. Unless we have made specific changes to the Yocto Linux meta distribution to disable specific components, we will have the agent running as a daemon on the device. The agent includes the <code class="literal">iotkit-admin</code> command-line utility that allows us to perform specific interactions with Intel IoT Analytics. We will use this command-line utility to perform the following tasks:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Test the proper communication with Intel IoT Analytics</li><li class="listitem" style="list-style-type: disc">Obtain the device id</li><li class="listitem" style="list-style-type: disc">Activate a device</li><li class="listitem" style="list-style-type: disc">Register three time series components for the device.</li><li class="listitem" style="list-style-type: disc">Send test observations</li></ul></div><p>First, we will check whether the <code class="literal">iotkit-admin</code> command-line utility can establish proper communication with Intel IoT Analytics. We just need to run the following command in the SSH terminal:</p><div class="informalexample"><pre class="programlisting">iotkit-admin test</pre></div><p>If the connection is successful, we will see lines similar to the following ones. The last line provides information about the build, that is, the version.</p><div class="informalexample"><pre class="programlisting">2016-04-05T02:17:49.573Z - info: Trying to connect to host ...
2016-04-05T02:17:56.780Z - info: Connected to dashboard.us.enableiot.com
2016-04-05T02:17:56.799Z - info: Environment: prod
2016-04-05T02:17:56.807Z - info: Build: 0.14.5</pre></div><p>Now, run the following command in the SSH terminal to obtain the device ID, also known as <code class="literal">deviceId</code>:</p><div class="informalexample"><pre class="programlisting">iotkit-admin device-id</pre></div><p>The previous command will generate an output line such as the following one with the device ID. By default, the device ID is equal to the MAC address of the network interface card.</p><div class="informalexample"><pre class="programlisting">2016-04-05T02:23:23.170Z - info: Device ID: 98-4F-EE-01-75-72</pre></div><p>You can use<a id="id544" class="indexterm"/> the following command to change the device ID to a different one: <code class="literal">iotkit-admin set-device-id new-device-id</code>. You just need to replace <code class="literal">new-device-id</code> with the new device id you want to set up for your device. However, bear in mind the new device ID must be a globally unique identifier.</p><p>In this case, we<a id="id545" class="indexterm"/> will use <code class="literal">kansas-temperature-humidity-01</code> as our device ID for all our samples. You must replace it in all the commands, then include this name with the device name you retrieved or the new device ID you assign to the device.</p><p>The following command in the SSH terminal will rename the device:</p><div class="informalexample"><pre class="programlisting">iotkit-admin set-device-id kansas-temperature-humidity-01</pre></div><p>The following lines show the output for the previous command:</p><div class="informalexample"><pre class="programlisting">2016-04-08T17:56:15.355Z - info: Device ID set to: kansas-temperature-humidity</pre></div><p>Go to the web browser in which you are working with the Intel IoT Analytics dashboard, click on the menu icon (a button with three horizontal lines located at the upper-left corner). Select <span class="strong"><strong>Account</strong></span> and the site will display the <span class="strong"><strong>My Account</strong></span> page with detailed information about the account we previously created.</p><p>The initial view will display the <span class="strong"><strong>Details</strong></span> tab. In case the <span class="strong"><strong>Activation Code</strong></span> includes the <span class="strong"><strong>(Code Expired)</strong></span> text, it means that the activation code is not valid anymore and it is necessary to click on the refresh icon located on the right-hand side of the <span class="strong"><strong>Activation Code</strong></span> textbox (the second icon with the two arrows). We have to make sure that the activation code hasn't expired in order to activate the device successfully. The following screenshot gives the initial view for the <span class="strong"><strong>My Account</strong></span> page for the <span class="strong"><strong>Temperature and humidity</strong></span> account with the activation code expired:</p><div class="mediaobject"><img src="images/B05042_10_02.jpg" alt="Setting up devices in Intel IoT Analytics"/></div><p>Once you<a id="id546" class="indexterm"/> refresh the activation code by clicking on the<a id="id547" class="indexterm"/> refresh button, a countdown stopwatch will indicate the time left for the activation code until it expires. You will have one hour after you click on the refresh button. Click on the eye icon to view the hidden activation code and copy it. We will use <code class="literal">01aCti0e</code> as our sample activation code and you will have to replace it with your activation code.</p><p>Now, run the following command in the SSH terminal to activate the device with the previously generated activation code. Replace <code class="literal">01aCti0e</code> with your activation code.</p><div class="informalexample"><pre class="programlisting">iotkit-admin activate 01aCti0e</pre></div><p>The<a id="id548" class="indexterm"/> previous <a id="id549" class="indexterm"/>command will generate an output similar to the following lines:</p><div class="informalexample"><pre class="programlisting">2016-04-05T02:24:46.449Z - info: Activating ...
2016-04-05T02:24:49.817Z - info: Saving device token...
2016-04-05T02:24:50.646Z - info: Updating metadata...
2016-04-05T02:24:50.691Z - info: Metadata updated.</pre></div><p>Our Intel Galileo Gen 2 board, that is, the device, is now associated with the <span class="strong"><strong>Temperature and humidity</strong></span> account that provided us with the activation code and the command generated the necessary security credentials, that is, the device token. </p><p>Go to the web browser in which you are working with the Intel IoT Analytics dashboard, click on the menu icon (a button with three horizontal lines located at the upper-left corner). Select <span class="strong"><strong>Devices</strong></span> and the site will display the <span class="strong"><strong>My Devices</strong></span> page with the list of all the devices that we have activated for the current account. The previously activated <code class="literal">kansas-temperature-humidity-01</code> device will appear in the list with <span class="strong"><strong>Kansas-temperature-humidity-01-NAME</strong></span> in its <span class="strong"><strong>Name</strong></span> column and <span class="strong"><strong>active</strong></span> in the <span class="strong"><strong>Status</strong></span> column. The following screenshot shows the device listed in the <span class="strong"><strong>My Devices</strong></span> page:</p><div class="mediaobject"><img src="images/B05042_10_03.jpg" alt="Setting up devices in Intel IoT Analytics"/></div><p>Click on the device <span class="strong"><strong>Id</strong></span> in the previous list (<span class="strong"><strong>kansas-temperature-humidity-01</strong></span>) to see and edit the device details. You can add tags and attributes to make it easier to filter the devices in the <a id="id550" class="indexterm"/>previous list. These possibilities are extremely useful when we have to work with more than a dozen devices as they make it easy for us to filter the devices in the list.</p></div></div>


  <div id="sbo-rt-content"><div class="section" title="Setting up components in Intel IoT Analytics"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec97"/>Setting up components in Intel IoT Analytics</h1></div></div></div><p>Go to<a id="id551" class="indexterm"/> the web browser in which you are working <a id="id552" class="indexterm"/>with the Intel IoT Analytics dashboard, click on the menu icon, select <span class="strong"><strong>Account</strong></span> and the site will display the <span class="strong"><strong>My Account</strong></span> page. Then, click on the <span class="strong"><strong>Catalog</strong></span> tab and the site will display the components registered in the catalog grouped in the following three categories:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Humidity</li><li class="listitem" style="list-style-type: disc">Powerswitch</li><li class="listitem" style="list-style-type: disc">Temperature</li></ul></div><p>Make sure that the <span class="strong"><strong>Humidity</strong></span> components panel is expanded and click on <span class="strong"><strong>humidity.v1.0</strong></span>. The site will display the <span class="strong"><strong>Component definition</strong></span> dialog box for the <span class="strong"><strong>humidity.v1.0</strong></span> component, that is, the component named <span class="strong"><strong>humidity</strong></span> whose version is <code class="literal">1.0</code>. The following screenshot shows the values for the different fields in the component definition:</p><div class="mediaobject"><img src="images/B05042_10_04.jpg" alt="Setting up components in Intel IoT Analytics"/></div><p>The<a id="id553" class="indexterm"/> <code class="literal">humidity</code> component <a id="id554" class="indexterm"/>version <code class="literal">1.0</code> represents a time series with ambient humidity level expressed in percentage. The <span class="strong"><strong>Data type</strong></span> is <span class="strong"><strong>Number</strong></span>, the <span class="strong"><strong>Unit of measure</strong></span> is <span class="strong"><strong>Percent (%)</strong></span>, the <span class="strong"><strong>Format</strong></span> is <span class="strong"><strong>Float</strong></span> and the <span class="strong"><strong>Display</strong></span> is <span class="strong"><strong>Time Series</strong></span>. We can use this component for our ambient humidity level observations.</p><p>Click on <span class="strong"><strong>Close</strong></span>, make sure that the <span class="strong"><strong>Temperature</strong></span> components panel is expanded and click on <span class="strong"><strong>temperature.v1.0</strong></span>. The site will display the <span class="strong"><strong>Component definition</strong></span> dialog box for the <span class="strong"><strong>temperature.v1.0</strong></span> component, that is, the component named <span class="strong"><strong>temperature</strong></span> whose version is <code class="literal">1.0</code>. The following screenshot shows the values for the different fields in the component definition:</p><div class="mediaobject"><img src="images/B05042_10_05.jpg" alt="Setting up components in Intel IoT Analytics"/></div><p>The <code class="literal">temperature</code> component<a id="id555" class="indexterm"/> version <span class="strong"><strong>1.0</strong></span> represents a time series with temperature expressed in degrees Celsius. The <span class="strong"><strong>Data type</strong></span> is <span class="strong"><strong>Number</strong></span>, the <span class="strong"><strong>Unit of measure</strong></span> is <span class="strong"><strong>Degrees Celsius</strong></span>, the <span class="strong"><strong>Format</strong></span> is <span class="strong"><strong>Float</strong></span> and the <span class="strong"><strong>Display</strong></span> is <span class="strong"><strong>Time Series</strong></span>. We can use this component for our ambient temperature observations expressed in degrees Celsius.</p><p>Click <a id="id556" class="indexterm"/>on <span class="strong"><strong>Close</strong></span> and make sure that the <span class="strong"><strong>Temperature</strong></span> components panel is expanded. There is no other temperature component, and therefore, we will have to create a new component for our ambient temperature observations expressed in degrees Fahrenheit.</p><p>Click on <span class="strong"><strong>Add new Catalog Item</strong></span> at the bottom of the page and the site will display the <span class="strong"><strong>Component definition</strong></span> dialog box with all the fields empty except from the version that will have a fixed <code class="literal">1.0</code> value. We are creating the first version of a new catalog item. Enter and select the following values:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Enter <span class="strong"><strong>temperaturef</strong></span> in <span class="strong"><strong>Component Name</strong></span></li><li class="listitem" style="list-style-type: disc">Select <span class="strong"><strong>Sensor</strong></span> in <span class="strong"><strong>Type</strong></span></li><li class="listitem" style="list-style-type: disc">Select <span class="strong"><strong>Number</strong></span> in <span class="strong"><strong>Data type</strong></span></li><li class="listitem" style="list-style-type: disc">Enter <span class="strong"><strong>Degrees Fahrenheit</strong></span> in <span class="strong"><strong>Unit of measure</strong></span></li><li class="listitem" style="list-style-type: disc">Select <span class="strong"><strong>Float</strong></span> in <span class="strong"><strong>Format</strong></span></li><li class="listitem" style="list-style-type: disc">Select <span class="strong"><strong>Time Series</strong></span> in <span class="strong"><strong>Display</strong></span></li></ul></div><p>Finally, click<a id="id557" class="indexterm"/> on <span class="strong"><strong>Save</strong></span> and the site will add the new component definition at the bottom of the list with the <code class="literal">temperaturef.v.1.0</code> name.</p><p>Now that <a id="id558" class="indexterm"/>we are sure that we have all the required component definitions in the catalog, we have to register the components that our device will use to create observations. We must give a name or alias of each component we register, and we must specify the component type and version from the previous catalog. The following table summarizes the components that we will register for our device:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Component name or alias</p>
</th><th style="text-align: left" valign="bottom">
<p>Component type</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">temperaturec</code>
</p>
</td><td style="text-align: left" valign="top">
<p>temperature.v1.0</p>
</td><td style="text-align: left" valign="top">
<p>A time series with ambient temperature observations expressed in degrees Celsius (ºC)</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">temperaturef</code>
</p>
</td><td style="text-align: left" valign="top">
<p>temperaturef.v1.0</p>
</td><td style="text-align: left" valign="top">
<p>A time series with ambient temperature observations expressed in degrees Fahrenheit (ºF)</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">humidity</code>
</p>
</td><td style="text-align: left" valign="top">
<p>humidity.v1.0</p>
</td><td style="text-align: left" valign="top">
<p>A time series with ambient humidity level observations expressed in percentage</p>
</td></tr></tbody></table></div><p>We can use the following command to register each component: <code class="literal">iotkit-admin register component-name component-type</code>. We just need to replace <code class="literal">component-name</code> with the name that will identify the component and component-type with the name that identifies the component type in the catalog, including the version number.</p><p>The following command in the SSH terminal will register the <code class="literal">temperaturec</code> component from the previous table:</p><div class="informalexample"><pre class="programlisting">iotkit-admin register temperaturec temperature.v1.0</pre></div><p>The following lines show the output for the previous command.</p><div class="informalexample"><pre class="programlisting">2016-04-08T22:40:04.581Z - info: Starting registration ...
2016-04-08T22:40:04.711Z - info: Device has already been activated. Updating ...
2016-04-08T22:40:04.739Z - info: Updating metadata...
2016-04-08T22:40:04.920Z - info: Metadata updated.
Attributes sent
<span class="strong"><strong>2016-04-08T22:40:10.167Z - info: Component registered name=temperaturec, type=temperature.v1.0, cid=c37cb57d-002c-4a66-866e-ce66bc3b2340, d_id=kansas-temperature-humidity-01</strong></span>
</pre></div><p>The last line <a id="id559" class="indexterm"/>provides us with the component id, that is, the value after <code class="literal">cid=</code> and before the next comma (<code class="literal">,</code>). In the previous<a id="id560" class="indexterm"/> output, the component id is <code class="literal">c37cb57d-002c-4a66-866e-ce66bc3b2340</code>. We have to save each component id because we will need it later to write code that creates observations using the REST API.</p><p>The following command in the SSH terminal will register the <code class="literal">temperaturef</code> component from the previous table:</p><div class="informalexample"><pre class="programlisting">iotkit-admin register temperaturef temperaturef.v1.0</pre></div><p>The following lines show the output for the previous command:</p><div class="informalexample"><pre class="programlisting">2016-04-08T22:40:20.510Z - info: Starting registration ...
2016-04-08T22:40:20.641Z - info: Device has already been activated. Updating ...
2016-04-08T22:40:20.669Z - info: Updating metadata...
2016-04-08T22:40:20.849Z - info: Metadata updated.
Attributes sent
<span class="strong"><strong>2016-04-08T22:40:26.156Z - info: Component registered name=temperaturef, type=temperaturef.v1.0, cid=0f3b3aae-ce40-4fb4-a939-e7c705915f0c, d_id=kansas-temperature-humidity-01</strong></span>
</pre></div><p>As happened with the other command, the last line provides us with the component id, that is, the value after <code class="literal">cid=</code> and before the next comma (<code class="literal">,</code>). In the previous output, the component id is <code class="literal">0f3b3aae-ce40-4fb4-a939-e7c705915f0c</code>. We have to save this one for its later usage in our code.</p><p>The following command in the SSH terminal will register the <code class="literal">humidity</code> component from the previous table:</p><div class="informalexample"><pre class="programlisting">iotkit-admin register humidity humidity.v1.0</pre></div><p>The following lines show the output for the previous command and the last line includes the component id.</p><div class="informalexample"><pre class="programlisting">2016-04-08T22:40:36.512Z - info: Starting registration ...
2016-04-08T22:40:36.643Z - info: Device has already been activated. Updating ...
2016-04-08T22:40:36.670Z - info: Updating metadata...
2016-04-08T22:40:36.849Z - info: Metadata updated.
Attributes sent
<span class="strong"><strong>2016-04-08T22:40:43.003Z - info: Component registered name=humidity, type=humidity.v1.0, cid=71aba984-c485-4ced-bf19-c0f32649bcee, d_id=kansas-temperature-humidity-01</strong></span>
</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip74"/>Tip</h3><p>The component ids will be different from the values indicated in the previous outputs and you will have to take note of each of the component ids that have been generated with the previous commands.</p></div></div><p>Go to the <a id="id561" class="indexterm"/>web browser in which you are working with <a id="id562" class="indexterm"/>the Intel IoT Analytics dashboard, click on the menu icon. Select <span class="strong"><strong>Devices</strong></span> and the site will display the <span class="strong"><strong>My Devices</strong></span> page. Click on the device <span class="strong"><strong>Id</strong></span> in the previous list (<span class="strong"><strong>kansas-temperature-humidity-01</strong></span>) to see and edit the device details. Click on <span class="strong"><strong>+Components</strong></span> to expand the components registered for the device and you will see a list with the following three components:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>temperaturec</strong></span></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>temperaturef</strong></span></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>humidity</strong></span></li></ul></div><p>The following screenshot shows the three components registered for the selected device:</p><div class="mediaobject"><img src="images/B05042_10_06.jpg" alt="Setting up components in Intel IoT Analytics"/></div><p>We can<a id="id563" class="indexterm"/> click on any of the three components and check the details for the registered component. In case we lose the component id, we can retrieve it by clicking on the component and the <span class="strong"><strong>Component Definition</strong></span> dialog box will display the component id just below the component type description. The <a id="id564" class="indexterm"/>following screenshot shows the component definition for the <code class="literal">temperaturef</code> component. The component id <span class="strong"><strong>0f3b3aae-ce40-4fb4-a939-e7c705915f0c</strong></span> appears below the <span class="strong"><strong>Custom Component</strong></span> label on the right-hand side.</p><div class="mediaobject"><img src="images/B05042_10_07.jpg" alt="Setting up components in Intel IoT Analytics"/></div><p>Unluckily, there <a id="id565" class="indexterm"/>is no way to retrieve the device token that was generated when we activated the device with the features included in the site. We need the device token to create observations for the registered components. The <a id="id566" class="indexterm"/>agent for Intel IoT Analytics saves the device token with other configuration values for the device in the <code class="literal">device.json</code> file and its default path is <code class="literal">/usr/lib/node_modules/iotkit-agent/data/device.json</code>. As the file name suggests, the file contains JSON code. We just need to run the following command in the SSH terminal to display the text content from the previous file and allow us to retrieve the device token:</p><div class="informalexample"><pre class="programlisting">cat /usr/lib/node_modules/iotkit-agent/data/device.json</pre></div><p>The following lines show the output for the previous command that includes all the configurations we have made so far for our device. The line that defines the value for the device token is highlighted.</p><div class="informalexample"><pre class="programlisting">{
    "activation_retries": 10,
    "activation_code": null,
    "device_id": "kansas-temperature-humidity-01",
    "device_name": false,
    "device_loc": [
        88.34,
        64.22047,
        0
    ],
    "gateway_id": false,
<span class="strong"><strong>    "device_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJqdGkiOiJjOTNmMTJhMy05MWZlLTQ3MWYtODM4OS02OGM1NDYxNDIxMDUiLCJpc3MiOiJodHRwOi8vZW5hYmxlaW90LmNvbSIsInN1YiI6ImthbnNhcy10ZW1wZXJhdHVyZS1odW1pZGl0eS0wMSIsImV4cCI6IjIwMjYtMDQtMDZUMTk6MDA6MTkuNzA0WiJ9.PH5yQas2FiQvUSR9V2pa3n3kIYZvmSe_xXY7QkFjlXUVUcyy9Sk_eVF4AL6qpZlBC9vjtd0L-VMZiULC9YXxAVl9s5Cl8ZqpQs36E1ssv_1H9CBFXKiiPArplzaWXVzvIRBVVzwfQrGrMoD_l4DcHlH2zgn5UGxhZ3RMPUvqgeneG3P-hSbPScPQL1pW85VT2IHT3seWyW1c637I_MDpHbJJCbkytPVpJpwKBxrCiKlGhvsh5pl4eLUXYUPlQAzB9QzC_ohujG23b-ApfHZugYD7zJa-05u0lkt93EEnuCk39o5SmPmIiuBup-k_mLn_VMde5fUvbxDt_SMI0XY3_Q",</strong></span>
    "account_id": "22612154-0f71-4f64-a68e-e116771115d5",
    "sensor_list": [
        {
            "name": "temperaturec",
            "type": "temperature.v1.0",
            "cid": "c37cb57d-002c-4a66-866e-ce66bc3b2340",
            "d_id": "kansas-temperature-humidity-01"
        },
        {
            "name": "temperaturef",
            "type": "temperaturef.v1.0",
            "cid": "0f3b3aae-ce40-4fb4-a939-e7c705915f0c",
            "d_id": "kansas-temperature-humidity-01"
        },
        {
            "name": "humidity",
            "type": "humidity.v1.0",
            "cid": "71aba984-c485-4ced-bf19-c0f32649bcee",
            "d_id": "kansas-temperature-humidity-01"
        }
    ]
}</pre></div><p>The previous lines also show the component id for each of the components that we have registered. Thus, we<a id="id567" class="indexterm"/> have all the necessary <a id="id568" class="indexterm"/>configuration values that we will have to use in our code in just one place. In this case, the device token is the following, that is, the string value for the <code class="literal">"device_token"</code> key. However, the value that you will retrieve will be different.</p><div class="informalexample"><pre class="programlisting">"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJqdGkiOiJjOTNmMTJhMy05MWZlLTQ3MWYtODM4OS02OGM1NDYxNDIxMDUiLCJpc3MiOiJodHRwOi8vZW5hYmxlaW90LmNvbSIsInN1YiI6ImthbnNhcy10ZW1wZXJhdHVyZS1odW1pZGl0eS0wMSIsImV4cCI6IjIwMjYtMDQtMDZUMTk6MDA6MTkuNzA0WiJ9.PH5yQas2FiQvUSR9V2pa3n3kIYZvmSe_xXY7QkFjlXUVUcyy9Sk_eVF4AL6qpZlBC9vjtd0L-VMZiULC9YXxAVl9s5Cl8ZqpQs36E1ssv_1H9CBFXKiiPArplzaWXVzvIRBVVzwfQrGrMoD_l4DcHlH2zgn5UGxhZ3RMPUvqgeneG3P-hSbPScPQL1pW85VT2IHT3seWyW1c637I_MDpHbJJCbkytPVpJpwKBxrCiKlGhvsh5pl4eLUXYUPlQAzB9QzC_ohujG23b-ApfHZugYD7zJa-05u0lkt93EEnuCk39o5SmPmIiuBup-k_mLn_VMde5fUvbxDt_SMI0XY3_Q"</pre></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Collecting sensor data with Intel IoT Analytics"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec98"/>Collecting sensor data with Intel IoT Analytics</h1></div></div></div><p>We will take<a id="id569" class="indexterm"/> the code we wrote in <a class="link" href="ch08.html" title="Chapter 8. Displaying Information and Performing Actions">Chapter 8</a>, <span class="emphasis"><em>Displaying Information and Performing Actions</em></span>, when we read temperature and humidity values <a id="id570" class="indexterm"/>from the sensor, we printed the values in an OLED matrix and rotated a servo's shaft to display the measured temperature expressed in degrees Fahrenheit with the shaft. The code file for the sample was <code class="literal">iot_python_chapter_08_03.py</code>. We will use this code as a baseline to add new features that will allow us to create observations for the three components we registered for our activated device.</p><p>In <a class="link" href="ch02.html" title="Chapter 2. Working with Python on Intel Galileo Gen 2">Chapter 2</a>, <span class="emphasis"><em>Working with Python on Intel Galileo Gen 2</em></span>, we made sure that the <code class="literal">pip</code> installer was available to install additional Python 2.7.3 packages in the Yocto Linux that we are running on the board. Now, we will use <code class="literal">pip</code> installer to make sure that the <code class="literal">requests</code> package is installed. This package is a very popular HTTP library for Python that allows us to easily build and send HTTP requests with an extremely easy to understand syntax.</p><p>If you have worked with examples from the previous chapter, you will have this package already installed. However, in case you just jumped into this chapter, it might be necessary to install it. We just need to run the following command in the SSH terminal to install the package. Notice that it can take a few minutes to complete the installation.</p><div class="informalexample"><pre class="programlisting">pip install requests</pre></div><p>In case you see the following output, it means that the requests package was already installed and you can move on to the next step.</p><div class="informalexample"><pre class="programlisting">Requirement already satisfied (use --upgrade to upgrade): requests in /usr/lib/python2.7/site-packages</pre></div><p>We will <a id="id571" class="indexterm"/>create an <code class="literal">IntelIotAnalytics</code> class to represent the interface to Intel IoT Analytics and make it easy for us to publish observations for the three components. However, before we code the class, we have to<a id="id572" class="indexterm"/> make sure that we can replace the content for many class attributes that define important values related to our account, the components, and the device. You will have to replace the strings <a id="id573" class="indexterm"/>specified for the following class attributes with the appropriate values:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">account_name</code>: The <a id="id574" class="indexterm"/>value of the <span class="strong"><strong>Account name</strong></span> field in the <span class="strong"><strong>My Account</strong></span> page. In our example, we used <code class="literal">"Temperature and humidity"</code> for our account name.</li><li class="listitem" style="list-style-type: disc"><code class="literal">account_id</code>: The<a id="id575" class="indexterm"/> value of the <span class="strong"><strong>Account ID</strong></span> field in the <span class="strong"><strong>My Account</strong></span> page. In our example, we use <code class="literal">"22612154-0f71-4f64-a68e-e116771115d5"</code> for our account id. We can also retrieve the account id value by reading the string value specified for the <code class="literal">"account_id"</code> key in the <code class="literal">device.json</code> file.</li><li class="listitem" style="list-style-type: disc"><code class="literal">device_id</code>: The<a id="id576" class="indexterm"/> value of the <span class="strong"><strong>ID</strong></span> field in the <span class="strong"><strong>Add / Edit a Device</strong></span> page that the site shows when we click on a device name in the list displayed in the <span class="strong"><strong>My Devices</strong></span> page. In our example, we use <code class="literal">"kansas-temperature-humidity-01"</code> for our device id. We can also retrieve the device_id by running the following command in an SSH terminal: <code class="literal">iotkit-admin device-id</code> or by reading the string value specified for the <code class="literal">"device_id"</code> key in the <code class="literal">device.json</code> file.</li><li class="listitem" style="list-style-type: disc"><code class="literal">device_token</code>: The<a id="id577" class="indexterm"/> value of the device token that was generated when we activated the device. As previously explained, we can retrieve the device token by reading the string value specified for the <code class="literal">"device_token"</code> key in the <code class="literal">device.json</code> file.</li><li class="listitem" style="list-style-type: disc"><code class="literal">component_id_temperature_fahrenheit</code>: The value of the component id that <a id="id578" class="indexterm"/>was generated when we registered the <code class="literal">temperaturef</code> component. The component id is displayed below the component type in the <span class="strong"><strong>Component Definition</strong></span> dialog box. In our example, we use <code class="literal">"0f3b3aae-ce40-4fb4-a939-e7c705915f0c"</code> for this value. We can also retrieve the component id value by reading the string value specified for the <code class="literal">"cid"</code> key in the same block that declares the <code class="literal">"name": "temperaturef"</code> key-value pair, in the <code class="literal">device.json</code> file.</li><li class="listitem" style="list-style-type: disc"><code class="literal">component_id_temperature_celsius</code>: The<a id="id579" class="indexterm"/> value of the component id that was generated when we registered the <code class="literal">temperaturec</code> component. In our example, we use <code class="literal">"c37cb57d-002c-4a66-866e-ce66bc3b2340"</code> for this value.</li><li class="listitem" style="list-style-type: disc"><code class="literal">component_id_humidity_level_percentage</code>: The value of the component id<a id="id580" class="indexterm"/> that was generated when we registered the <code class="literal">humidity</code> component. In our example, we use <code class="literal">"71aba984-c485-4ced-bf19-c0f32649bcee"</code> for this value.</li></ul></div><p>The code<a id="id581" class="indexterm"/> file for the sample is <code class="literal">iot_python_chapter_10_01.py</code>. Remember that we use the code file <code class="literal">iot_python_chapter_08_03.py</code> as a baseline, and therefore, we will add the <code class="literal">IntelIotAnalytics</code> class to the existing code in this file and we will create a new Python file. The<a id="id582" class="indexterm"/> following lines show the code for the <code class="literal">IntelIotAnalytics</code> class that allows us to publish observations for the <code class="literal">temperaturef</code>, <code class="literal">temperaturec</code> and <code class="literal">humidity</code> components through the REST API.</p><div class="informalexample"><pre class="programlisting">import time
import json
import requests

class IntelIotAnalytics:
    base_url = "https://dashboard.us.enableiot.com/v1/api"
    # You can retrieve the following information from the My Account page
    account_name = "Temperature and humidity"
    account_id = "22612154-0f71-4f64-a68e-e116771115d5"
    # You can retrieve the device token with the following command:
    # cat /usr/lib/node_modules/iotkit-agent/data/device.json
    device_token = "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJqdGkiOiJjOTNmMTJhMy05MWZlLTQ3MWYtODM4OS02OGM1NDYxNDIxMDUiLCJpc3MiOiJodHRwOi8vZW5hYmxlaW90LmNvbSIsInN1YiI6ImthbnNhcy10ZW1wZXJhdHVyZS1odW1pZGl0eS0wMSIsImV4cCI6IjIwMjYtMDQtMDZUMTk6MDA6MTkuNzA0WiJ9.PH5yQas2FiQvUSR9V2pa3n3kIYZvmSe_xXY7QkFjlXUVUcyy9Sk_eVF4AL6qpZlBC9vjtd0L-VMZiULC9YXxAVl9s5Cl8ZqpQs36E1ssv_1H9CBFXKiiPArplzaWXVzvIRBVVzwfQrGrMoD_l4DcHlH2zgn5UGxhZ3RMPUvqgeneG3P-hSbPScPQL1pW85VT2IHT3seWyW1c637I_MDpHbJJCbkytPVpJpwKBxrCiKlGhvsh5pl4eLUXYUPlQAzB9QzC_ohujG23b-ApfHZugYD7zJa-05u0lkt93EEnuCk39o5SmPmIiuBup-k_mLn_VMde5fUvbxDt_SMI0XY3_Q"
    device_id = "kansas-temperature-humidity-01"
    component_id_temperature_fahrenheit = "0f3b3aae-ce40-4fb4-a939-e7c705915f0c"
    component_id_temperature_celsius = "c37cb57d-002c-4a66-866e-ce66bc3b2340"
    component_id_humidity_level_percentage = "71aba984-c485-4ced-bf19-c0f32649bcee"

    def publish_observation(self,
                            temperature_fahrenheit,
                            temperature_celsius,
                            humidity_level):
        url = "{0}/data/{1}".\
            format(self.__class__.base_url, self.__class__.device_id)
        now = int(time.time()) * 1000
        body = {
            "on": now,
            "accountId": self.__class__.account_id,
            "data": []
        }
        temperature_celsius_data = {
            "componentId": self.__class__.component_id_temperature_celsius,
            "on": now,
            "value": str(temperature_celsius)
        }
        temperature_fahrenheit_data = {
            "componentId": self.__class__.component_id_temperature_fahrenheit,
            "on": now,
            "value": str(temperature_fahrenheit)
        }
        humidity_level_percentage_data = {
            "componentId": self.__class__.component_id_humidity_level_percentage,
            "on": now,
            "value": str(humidity_level)
        }
        body["data"].append(temperature_celsius_data)
        body["data"].append(temperature_fahrenheit_data)
        body["data"].append(humidity_level_percentage_data)
        data = json.dumps(body)
        headers = {
            'Authorization': 'Bearer ' + self.__class__.device_token,
            'content-type': 'application/json'
        }
        response = requests.post(url, data=data, headers=headers, proxies={}, verify=True)
        if response.status_code != 201:
            print "The request failed. Status code: {0}. Response text: {1}.".\
                format(response.status_code, response.text)</pre></div><p>The <code class="literal">IntelIotAnalytics</code> class declares many class attributes that we explained before and <a id="id583" class="indexterm"/>that you need to replace with your own string values: <code class="literal">account_name</code>, <code class="literal">account_id</code>, <code class="literal">device_token</code>, <code class="literal">device_id</code>, <code class="literal">component_id_temperature_fahrenheit</code>, <code class="literal">component_id_temperature_celsius</code> and <code class="literal">component_id_humidity_level_percentage</code>. The <code class="literal">base_url</code> class attribute defines the base URL to access the REST API: <code class="literal">https://dashboard.us.enableiot.com/v1/api</code>. We will use this value in combination with a <code class="literal">data</code> path and the <code class="literal">device_id</code> class attribute to build the URL to which we will send the HTTP request to publish an observation.</p><p>The class <a id="id584" class="indexterm"/>declares the <code class="literal">publish_observation</code> method that receives the temperature expressed in degrees Fahrenheit, the temperature expressed in degrees Celsius and the humidity level percentage in the <code class="literal">temperature_fahrenheit</code>, <code class="literal">temperature_celsius</code> and <code class="literal">humidity_level</code> arguments. The method builds the URL to which we will send the HTTP request to create an observation for the device and the three components. The URL is composed of the <code class="literal">base_url</code> class attribute, <code class="literal">/data/</code> and the <code class="literal">device_id</code> class attribute. As happens with many REST APIs, the <code class="literal">base_url</code> class attribute specifies the version number for the API. This way, we make sure that we are always working with a specific version and that our requests are compatible with this version. The code saves the value for the build URL in the <code class="literal">url</code> local variable.</p><p>Then, the code saves the board's current time in seconds multiplied by 1000 in the <code class="literal">now</code> local variable. The code creates a <code class="literal">body</code> dictionary that represents the request's body with the following key-value pairs:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">"on"</code>: The value stored in the <code class="literal">now</code> local variable, that is, the board's current time. It is the time for the observations.</li><li class="listitem" style="list-style-type: disc"><code class="literal">"accountId"</code>: The value stored in the <code class="literal">accountId</code> class attribute, that is, the Intel IoT Analytics account to which we will publish the observation.</li><li class="listitem" style="list-style-type: disc"><code class="literal">"data"</code>: An empty array that we will fill later with one observation for each component.</li></ul></div><p>Then, the<a id="id585" class="indexterm"/> code creates three dictionaries with the following key-value pairs that represent an observation for a specific component:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">"componentId"</code>: The value stored in the class attribute that specifies the component id to which we will publish the observation.</li><li class="listitem" style="list-style-type: disc"><code class="literal">"on"</code>: The value stored in the <code class="literal">now</code> local variable, that is, the board's current time. It is the time for the observation. We use the same variable for all the observations, and therefore, they are registered with the same time.</li><li class="listitem" style="list-style-type: disc"><code class="literal">"value"</code>: The string representation of the value received as an argument in the method.</li></ul></div><p>Then, the <a id="id586" class="indexterm"/>code calls the <code class="literal">append</code> method to add the three dictionaries to the <code class="literal">data</code> key in the <code class="literal">body</code> dictionary. This way, the <code class="literal">data</code> key will have an array with three dictionaries as its value. The code calls the <code class="literal">json.dumps</code> function to serialize the <code class="literal">body</code> dictionary to a JSON formatted string and saves it in the <code class="literal">data</code> local variable.</p><p>The next line creates a <code class="literal">headers</code> dictionary with the following key-value pairs that represent the headers for the HTTP request:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">"Authorization"</code>: The authorization string composed of the concatenation of <code class="literal">"Bearer"</code> and the device token saved in the <code class="literal">device_token</code> class attribute</li><li class="listitem" style="list-style-type: disc"><code class="literal">"content-type"</code>: Declares the content type as JSON: <code class="literal">"application/json"</code></li></ul></div><p>At this point, the code has built the headers and the body for the HTTP request that will publish the observations to Intel IoT Analytics. The next line calls the <code class="literal">requests.post</code> function to send an HTTP POST request to the URL specified by the <code class="literal">url</code> local variable, with the <code class="literal">data</code> dictionary as the JSON body data and the <code class="literal">headers</code> dictionary as the headers.</p><p>The <code class="literal">requests.post</code> method returns a response saved in the <code class="literal">response</code> local variable and the code evaluates whether the code attribute for response is not equal to 201. In case the code is different than <code class="literal">201</code>, it means that the observations weren't successfully published, that is, something went wrong. In this case, the code prints the values for the <code class="literal">status_code</code> and <code class="literal">text</code> attributes for the response to the console output to allow us to understand what went wrong. In case we use a wrong device token or a wrong id for the account, the device or the components, we will receive errors.</p><p>Now, we<a id="id587" class="indexterm"/> will <a id="id588" class="indexterm"/>use the previously coded <code class="literal">IntelIoTAnalytics</code> class to create a new version of the <code class="literal">__main__</code> method that publishes observations to Intel IoT Analytics every 5 seconds. The following lines show the new version of the <code class="literal">__main__</code> method. The code file for the sample is <code class="literal">iot_python_chapter_10_01.py</code>.</p><div class="informalexample"><pre class="programlisting">if __name__ == "__main__":
    temperature_and_humidity_sensor = \
        TemperatureAndHumiditySensor(0)
    oled = TemperatureAndHumidityOled(0)
<span class="strong"><strong>    intel_iot_analytics = IntelIotAnalytics()</strong></span>
    while True:
        temperature_and_humidity_sensor.\
            measure_temperature_and_humidity()
        oled.print_temperature(
            temperature_and_humidity_sensor.temperature_fahrenheit,
            temperature_and_humidity_sensor.temperature_celsius)
        oled.print_humidity(
            temperature_and_humidity_sensor.humidity)
        print("Ambient temperature in degrees Celsius: {0}".
              format(temperature_and_humidity_sensor.temperature_celsius))
        print("Ambient temperature in degrees Fahrenheit: {0}".
              format(temperature_and_humidity_sensor.temperature_fahrenheit))
        print("Ambient humidity: {0}".
              format(temperature_and_humidity_sensor.humidity))
<span class="strong"><strong>        intel_iot_analytics.publish_observation(</strong></span>
<span class="strong"><strong>            temperature_and_humidity_sensor.temperature_fahrenheit,</strong></span>
<span class="strong"><strong>            temperature_and_humidity_sensor.temperature_celsius,</strong></span>
<span class="strong"><strong>            temperature_and_humidity_sensor.humidity</strong></span>
<span class="strong"><strong>        )</strong></span>
<span class="strong"><strong>        # Sleep 5 seconds (5000 milliseconds)</strong></span>
<span class="strong"><strong>        time.sleep(5)</strong></span>
</pre></div><p>The highlighted lines show the code that creates an instance of the previously created <code class="literal">IntelIoTAnalytics</code> class and saves its reference in the <code class="literal">intel_iot_analytics</code> local variable. Then, the code within the loop that runs every 5 seconds calls the <code class="literal">publish_observation</code> method with the temperature and humidity values retrieved from the temperature and humidity sensor as arguments.</p><p>The following line will start the example:</p><div class="informalexample"><pre class="programlisting">python iot_python_chapter_10_01.py</pre></div><p>After you run the<a id="id589" class="indexterm"/> example, turn on an air conditioner or a heating system, to generate a change in the ambient temperature and humidity. This way, we will notice changes in the data that is being published every 5 seconds. Keep the code running while we explore different features included in Intel IoT Analytics.</p><p>Go to the <a id="id590" class="indexterm"/>web browser in which you are working with the Intel IoT Analytics dashboard, click on the menu icon and select <span class="strong"><strong>Dashboard</strong></span>. The site will display the <span class="strong"><strong>My Dashboard</strong></span> page that will indicate you have one active device and it will update the number of observations published in the last hour as it receives observations from the board. The following pictures show the dashboard with the active device and the counter that includes <code class="literal">945</code> observations published in the last hour:</p><div class="mediaobject"><img src="images/B05042_10_08.jpg" alt="Collecting sensor data with Intel IoT Analytics"/></div><p>Keep the<a id="id591" class="indexterm"/> browser open with the dashboard view and you will notice that observations value increases in the last hour, as the code continues <a id="id592" class="indexterm"/>running on the board. You can click on the configuration icon located at the upper-right corner of the panel that displays the number of observations and a context-menu will allow you to configure the observations period you want to see in this panel. For example, you can change from <span class="strong"><strong>Last hour</strong></span> to <span class="strong"><strong>Last week</strong></span> to display the number of observations the device has registered during the last week.</p></div></div>


  <div id="sbo-rt-content"><div class="section" title="Analyzing sensor data with Intel IoT Analytics"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec99"/>Analyzing sensor data with Intel IoT Analytics</h1></div></div></div><p>Intel IoT Analytics <a id="id593" class="indexterm"/>allows us to generate <a id="id594" class="indexterm"/>charts with the data generated for each component that has observations for a specific device. First, we have to select the device and then we have to choose one or more component to generate the chart with historic time series or the time series that are being generated with the code running on the board, that is, live data for the component.</p><p>Go to the web browser in which you are working with the Intel IoT Analytics dashboard, click on the menu icon and select <span class="strong"><strong>Charts</strong></span>. The site will display the <span class="strong"><strong>My Charts</strong></span> page that will allow you to search for devices using many search criteria, such as the device name, the associated tags, and its properties.</p><p>In this case, we just have one activated device, and therefore, we can select the device from the list of devices that the site shows us below the <span class="strong"><strong>Select Device</strong></span> section. This section displays the first characters for the device name at the right-hand side of a checkbox and the number of components that have been registered for this device at the right-hand side of the text. The following picture shows the <span class="strong"><strong>Select Device</strong></span> section with <span class="strong"><strong>kansas-temp…</strong></span> representing the <code class="literal">kansas-temperature-humidity-01</code> device. If you hover the mouse over the checkbox or tap on the text, the site will display a popup with the complete name for the device and the types of the registered components. The following screenshot show the popup with this information displayed for the <span class="strong"><strong>kansas-temp…</strong></span> checkbox.</p><div class="mediaobject"><img src="images/B05042_10_09.jpg" alt="Analyzing sensor data with Intel IoT Analytics"/></div><p>Check <a id="id595" class="indexterm"/>the <span class="strong"><strong>kansas-temp…</strong></span> checkbox and the site will display the three registered components for the selected device. In this case, the site displays<a id="id596" class="indexterm"/> the component names (<code class="literal">temperaturec</code>, <code class="literal">temperaturef</code>, and <code class="literal">humidity</code>) while in the previously explained popup the site showed the component types (<code class="literal">temperature.v1.0</code>, <code class="literal">temperaturef.v1.0</code>, and <code class="literal">humidity.v1.0</code>).</p><p>Check the <code class="literal">temperaturef</code> checkbox and the site will display a chart with the ambient temperature measured in degrees Fahrenheit for the past hour. By default, the chart uses a line and generates a graph with the time series values registered in the past hour. By default, the refresh rate for the graph is set to 30 seconds, and therefore, the chart will be updated every 30 seconds and will display all the new observations that were published by the board<a id="id597" class="indexterm"/> through the REST API in this period.</p><div class="mediaobject"><img src="images/B05042_10_10.jpg" alt="Analyzing sensor data with Intel IoT Analytics"/></div><p>We can use the <a id="id598" class="indexterm"/>different buttons at the top of the chart to change the chart type and to select the time range we want to view displayed in the graph. We can also change the refresh rate to as low as five seconds or as high as 60 seconds. If we save the graph as favorite, the site will display it as part of the dashboard in <span class="strong"><strong>My Dashboard</strong></span>.</p><p>Click on <a id="id599" class="indexterm"/>the <span class="strong"><strong>Raw data</strong></span> button (A bullets icon) located at the right-hand side of the <span class="strong"><strong>Chart</strong></span> button (A picture icon with mountains). The site <a id="id600" class="indexterm"/>will display a list with the raw data that has been sent to build the time series, that is, all the observations received for the selected component. The following screenshot shows an example of the first page of the raw data view for the <code class="literal">temperaturef</code> component in the past hour.</p><div class="mediaobject"><img src="images/B05042_10_11.jpg" alt="Analyzing sensor data with Intel IoT Analytics"/></div><p>In this example, it is extremely useful to generate a chart with the temperature and the humidity level. Go back to the Chart view by clicking on the <span class="strong"><strong>Chart</strong></span> button (A picture icon with mountains) and<a id="id601" class="indexterm"/> check the checkbox for humidity. This way, the site will generate a graph that combines the temperature expressed in degrees Fahrenheit and the humidity<a id="id602" class="indexterm"/> level expressed in percentage. The following screenshot shows the generated chart when <span class="strong"><strong>temperaturef</strong></span> and <span class="strong"><strong>humidity</strong></span> are both checked:</p><div class="mediaobject"><img src="images/B05042_10_12.jpg" alt="Analyzing sensor data with Intel IoT Analytics"/></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Triggering alerts with rules in Intel IoT Analytics"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec100"/>Triggering alerts with rules in Intel IoT Analytics</h1></div></div></div><p>Intel IoT Analytics <a id="id603" class="indexterm"/>allows us to define the rules that can trigger any of the following notification types:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Email</li><li class="listitem" style="list-style-type: disc">HTTP Endpoint</li><li class="listitem" style="list-style-type: disc">Actuation</li></ul></div><p>Go to the web browser in which you are working with the Intel IoT Analytics dashboard, click on the menu icon and select <span class="strong"><strong>Rules</strong></span>. The site will display the <span class="strong"><strong>My Rules</strong></span> page that will allow you to define rules for the activated devices. In this case, we will define a rule that will send us an e-mail when the humidity level is lower than 10%.</p><p>Click on <span class="strong"><strong>Add a rule</strong></span> and the site will display us a form that will allow us to enter the details for the new rule. Enter <code class="literal">Very low humidity level</code> in <span class="strong"><strong>Rule Name</strong></span>, select <code class="literal">Low</code> in <span class="strong"><strong>Priority</strong></span> and <code class="literal">Email</code> in <span class="strong"><strong>Notifications type</strong></span>. Select the e-mail address to which you want to receive the notifications in the dropdown in the <span class="strong"><strong>Notifications To</strong></span> panel.</p><p>Click <span class="strong"><strong>Next</strong></span> and the site will ask us to select the devices to which the new rule has to be applied. In this case, we just have one activated device, and therefore, we can select the device from the list of devices that the site shows us below the <span class="strong"><strong>Select Device</strong></span> section. As seen in previous device selection pages, this section displays the first characters for the device name at the right-hand side of a checkbox and the number of components that have been registered for this device at the right-hand side of the text. Check the <span class="strong"><strong>kansas-temp…</strong></span> checkbox and the name will appear in the <span class="strong"><strong>Selected Devices</strong></span> list.</p><p>Click <span class="strong"><strong>Next</strong></span> and the site will ask us to specify the conditions for the new rule. Leave the <span class="strong"><strong>Enable Automatic Reset</strong></span> checkbox unchecked because we want the rule to become inactive after every alert until it is acknowledged. This way, after we receive an alert, we will only receive additional alerts when we acknowledge the first alert that was generated.</p><p>Select <code class="literal">humidity (Number)</code> in <span class="strong"><strong>Monitored Measure</strong></span> and <code class="literal">Basic Condition</code> in <span class="strong"><strong>Trigger When</strong></span>. Then, select <code class="literal">&lt;</code> in the additional dropdown that appears and enter <code class="literal">10</code> in the <span class="strong"><strong>Enter a value</strong></span> textbox. This way, we are creating a rule that will trigger when the value in a humidity observation is lower than 10 (<code class="literal">humidity &lt; 10</code>). The following screenshot shows the defined condition:</p><div class="mediaobject"><img src="images/B05042_10_13.jpg" alt="Triggering alerts with rules in Intel IoT Analytics"/></div><p>Click <span class="strong"><strong>Done</strong></span> and<a id="id604" class="indexterm"/> the rule will be added to the list shown in <span class="strong"><strong>My Rules</strong></span>. The following screenshot shows the rule definition included in this list after we define it:</p><div class="mediaobject"><img src="images/B05042_10_14.jpg" alt="Triggering alerts with rules in Intel IoT Analytics"/></div><p>After the<a id="id605" class="indexterm"/> humidity level is lower than 10%, an alert will be triggered and we will see a number 1 in the alerts icon (the bell). After we click on the icon, the site will display all the unread alerts we have. The following screenshot shows the My Dashboard page with one unread alert:</p><div class="mediaobject"><img src="images/B05042_10_15.jpg" alt="Triggering alerts with rules in Intel IoT Analytics"/></div><p>If we click on the alert, the site will display the details of the situation that triggered the alert. We can also go <span class="strong"><strong>Alerts</strong></span> in the menu and see the list of the received alerts. The following screenshot show the alert included in the list of received alerts:</p><div class="mediaobject"><img src="images/B05042_10_16.jpg" alt="Triggering alerts with rules in Intel IoT Analytics"/></div><p>If we click<a id="id606" class="indexterm"/> on the <span class="strong"><strong>Alert</strong></span> number, the site will display the details for the alert including the condition defined in the rule that triggered the alert and the measured value. In this case, the measured value was <code class="literal">7.99</code>. It is possible to add comments to an alert. The following screenshot shows the details for the alert:</p><div class="mediaobject"><img src="images/B05042_10_17.jpg" alt="Triggering alerts with rules in Intel IoT Analytics"/></div><p>In addition, we <a id="id607" class="indexterm"/>receive an e-mail that includes the following text:</p><div class="informalexample"><pre class="programlisting">Alert Monitor has received an alert. Alert data: 

- Alert Id: 1 
- Device: kansas-temperature-humidity-01 
- Reason: humidity &lt; 10 
- Priority: Low 

Alert Data
Component Name	Values
humidity	7.99; 


You can go here to check it on Dashboard 
Regards</pre></div><p>In this case, we defined a very simple condition in our rule. However, we can define a more complex condition that can include any of the following conditions:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Time-based condition</li><li class="listitem" style="list-style-type: disc">Statistics based condition</li><li class="listitem" style="list-style-type: disc">Single-sensor change detection</li><li class="listitem" style="list-style-type: disc">Multisensory change detection</li></ul></div><p>We can <a id="id608" class="indexterm"/>play with the different options to trigger alerts for a large number of devices with multiple sensors and huge amounts of data. One of the most interesting features of Intel IoT Analytics is that we can easily work with huge amounts of data with the charts, the rules and the alerts. </p></div></div>


  <div id="sbo-rt-content"><div class="section" title="Test your knowledge"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec101"/>Test your knowledge</h1></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">The components for each device in Intel IoT Analytics can be either:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Actuator or time series.</li><li class="listitem">Account, actuator or time series.</li><li class="listitem">Proxy, account, actuator or time series.</li></ol></div></li><li class="listitem">Each time we publish data from a registered device to Intel IoT Analytics, we create:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">An actuator.</li><li class="listitem">An account.</li><li class="listitem">An observation.</li></ol></div></li><li class="listitem">A time series is:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">A series of actions performed by an actuator, that is, a collection of actions.</li><li class="listitem">A series of values captured from a sensor, that is, a collection of observations.</li><li class="listitem">A series of triggered alarms, that is, a collection of alarms. </li></ol></div></li><li class="listitem">We can use the following command-line utility to activate our board as a device in an Intel IoT Analytics account:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">iotkit-admin</li><li class="listitem">iotkit-configure</li><li class="listitem">iotkit-setup</li></ol></div></li><li class="listitem">In order to send observations from a device with the REST API provided by Intel IoT Analytics, we need the following token:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">The sensor token.</li><li class="listitem">The observation token.</li><li class="listitem">The device token.</li></ol></div></li></ol></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec102"/>Summary</h1></div></div></div><p>In this chapter, we understood the close relationship between Internet of Things and Big Data. We worked with a cloud-based service that allowed us to organize huge amounts of data collected by multiple devices and their sensors. We took advantage of the <code class="literal">requests</code> package to write a few lines of Python code that could interact with the Intel IoT Analytics REST API.</p><p>We used the Intel IoT Analytics web site to set up a device and its components. Then, we made changes to one of our examples to collect data from the sensors and publish observations to Intel IoT Analytics. Then, we learned about the different options that Intel IoT Analytics offers us to analyze huge amounts of data. Finally, we defined rules that triggered alerts. Now that we are able to take advantage of Intel IoT Analytics to analyze huge amounts of data, we are ready to deploy thousands of IoT devices that collect data from multiple sensors.</p><p>We learned to use Python and the Intel Galileo Gen 2 board to create low cost devices that collect huge amounts of data, interact with each other and take advantage of cloud-services and cloud-based storage. We can develop IoT prototypes from the hardware selection to all the necessary stacks with Python 2.7.3, its libraries and tools. In case we need a smaller board or a different alternative, we can switch to any of the compatible Intel Edison boards, and therefore, we can switch to this board in case we need to.</p><p>We are able to leverage our existing Python knowledge to capture data from the real world, interact with physical objects, develop APIs and use different IoT protocols. We learned to use specific libraries to work with low-level hardware, sensors, actuators, buses, and displays. We are ready to become makers and to be part of the exciting IoT world.</p><p>We can start working on fascinating projects that can transform everyday objects into smart devices with sensors and actuators. We are ready to start building ecosystems composed of thousands of IoT devices, with Python as our main programming language.</p></div></div>


  <div id="sbo-rt-content"><div class="appendix" title="Appendix A. Exercise Answers"><div class="titlepage"><div><div><h1 class="title"><a id="appA"/>Appendix A. Exercise Answers</h1></div></div></div><div class="section" title="Chapter 1, Understanding and Setting up the Base IoT Hardware"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec103"/>Chapter 1, Understanding and Setting up the Base IoT Hardware</h1></div></div></div><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>Q1</p>
</td><td style="text-align: left" valign="top">
<p>2</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q2</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q3</p>
</td><td style="text-align: left" valign="top">
<p>2</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q4</p>
</td><td style="text-align: left" valign="top">
<p>3</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q5</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr></tbody></table></div></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Chapter 2, Working with Python on Intel Galileo Gen 2"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec104"/>Chapter 2, Working with Python on Intel Galileo Gen 2</h1></div></div></div><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>Q1</p>
</td><td style="text-align: left" valign="top">
<p>2</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q2</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q3</p>
</td><td style="text-align: left" valign="top">
<p>2</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q4</p>
</td><td style="text-align: left" valign="top">
<p>3</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q5</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr></tbody></table></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Chapter 3, Interacting with Digital Outputs with Python"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec105"/>Chapter 3, Interacting with Digital Outputs with Python</h1></div></div></div><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>Q1</p>
</td><td style="text-align: left" valign="top">
<p>3</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q2</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q3</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q4</p>
</td><td style="text-align: left" valign="top">
<p>2</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q5</p>
</td><td style="text-align: left" valign="top">
<p>2</p>
</td></tr></tbody></table></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Chapter 4, Working with a RESTful API and Pulse Width Modulation"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec106"/>Chapter 4, Working with a RESTful API and Pulse Width Modulation</h1></div></div></div><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>Q1</p>
</td><td style="text-align: left" valign="top">
<p>3</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q2</p>
</td><td style="text-align: left" valign="top">
<p>3</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q3</p>
</td><td style="text-align: left" valign="top">
<p>2</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q4</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q5</p>
</td><td style="text-align: left" valign="top">
<p>2</p>
</td></tr></tbody></table></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Chapter 5, Working with Digital Inputs, Polling and Interrupts"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec107"/>Chapter 5, Working with Digital Inputs, Polling and Interrupts </h1></div></div></div><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>Q1</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q2</p>
</td><td style="text-align: left" valign="top">
<p>2</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q3</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q4</p>
</td><td style="text-align: left" valign="top">
<p>2</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q5</p>
</td><td style="text-align: left" valign="top">
<p>3</p>
</td></tr></tbody></table></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Chapter 6, Working with Analog Inputs and Local Storage"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec108"/>Chapter 6, Working with Analog Inputs and Local Storage</h1></div></div></div><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>Q1</p>
</td><td style="text-align: left" valign="top">
<p>3</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q2</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q3</p>
</td><td style="text-align: left" valign="top">
<p>2</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q4</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q5</p>
</td><td style="text-align: left" valign="top">
<p>3</p>
</td></tr></tbody></table></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Chapter 7, Retrieving Data from the Real World with Sensors"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec109"/>Chapter 7, Retrieving Data from the Real World with Sensors</h1></div></div></div><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>Q1</p>
</td><td style="text-align: left" valign="top">
<p>2</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q2</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q3</p>
</td><td style="text-align: left" valign="top">
<p>2</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q4</p>
</td><td style="text-align: left" valign="top">
<p>3</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q5</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr></tbody></table></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Chapter 8, Displaying Information and Performing Actions"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec110"/>Chapter 8, Displaying Information and Performing Actions</h1></div></div></div><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>Q1</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q2</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q3</p>
</td><td style="text-align: left" valign="top">
<p>3</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q4</p>
</td><td style="text-align: left" valign="top">
<p>3</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q5</p>
</td><td style="text-align: left" valign="top">
<p>2</p>
</td></tr></tbody></table></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Chapter 9, Working with the Cloud"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec111"/>Chapter 9, Working with the Cloud</h1></div></div></div><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>Q1</p>
</td><td style="text-align: left" valign="top">
<p>2</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q2</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q3</p>
</td><td style="text-align: left" valign="top">
<p>3</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q4</p>
</td><td style="text-align: left" valign="top">
<p>2</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q5</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr></tbody></table></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Chapter 10, Analyzing Huge Amounts of Data with Cloud-based IoT Analytics"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec112"/>Chapter 10, Analyzing Huge Amounts of Data with Cloud-based IoT Analytics</h1></div></div></div><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>Q1</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q2</p>
</td><td style="text-align: left" valign="top">
<p>3</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q3</p>
</td><td style="text-align: left" valign="top">
<p>2</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q4</p>
</td><td style="text-align: left" valign="top">
<p>1</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Q5</p>
</td><td style="text-align: left" valign="top">
<p>3</p>
</td></tr></tbody></table></div></div></div>
</body></html>