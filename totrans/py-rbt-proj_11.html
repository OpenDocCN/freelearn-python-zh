<html><head></head><body><div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Basic Switching</h1>
                </header>
            
            <article>
                
<p>It must have been an epic journey so far! Recollect the time when you would have started reading this book, did you ever imagine that things could be this simple? It is worth noting that everything starts off very simple and, slowly and steadily, with the need for more sophisticated systems, the complexity of the technology also increases. Go back to the time when personal computing was not really a thing. It was only used in business and companies such as IBM were only servicing business clients. At that time, people who wanted a personal computer had only one option. They needed to build it from scratch, and to be honest, a lot of people used to do that. It really wasn't that hard either at least from my perspective. But, in contrast to that time, think about what they have become right now. Ever thought of building a computer at home? By building, I mean designing everything and not just assembly of the CPU. It is not very easy.</p>
<p>What I am trying to tell you here is that there was a time when computers were exotic; they were not very common, and they had very limited functionalities. However, with time and the brains of people, such as Steve Jobs, Bill Gates, and Hewlett and Packard, computers became more user-friendly, more easily available, and a desirable commodity. Think of the same thing with robots. They are expensive; for most people, there is not much they can do with them and also they are rare in the public space. But, as you have learned, it is not very hard to build a robot for our personal use, and with some tweaking here and there and with inventive minds such as yours, things can be taken in an altogether different direction. You could be the next Steve Jobs or Bill Gates. All we need is zeal, passion, and out-of-the-box thinking. You may be ridiculed for your vision. But do remember every inventor has been called mad at some point in time. So the next time someone calls you mad, you can be very sure that you are progressing!</p>
<p>Well, I'm quite sure that, if you are a robotic enthusiast, then you must have seen the movie <em>Iron Man</em>. If you haven't seen it yet, then take a break from reading this book and go ahead and open Netflix and see that movie.</p>
<p>Once I saw that movie, there were two main things that I wanted to build: one, the suit of Iron Man and other his personal assistant Jarvis, who takes care of all his needs. Though suits seem to be something that I may have to work on for a while, but, by that time, you can go ahead and build the personal assistant for yourself.</p>
<p>Imagine your home doing things for itself. How cool would it be? It knows what you like, what time you wake up, when you come back home, and, based on that, it automatically does things for you. Best of all, it would not be something you buy off the shelf, rather you would be making it with your own hands.</p>
<div class="packt_tip"><br/>
Before you do any of this, I must tell you that you will be dealing with high voltages and considerable currents. Electricity is no joke, and you must take care at all times and wear all the safety equipment. If you are not sure of it, then it would be a good idea to get an electrician to help you. Before you touch or open any of the electrical boards, make sure that you are wearing non-conductive shoes; also inspect whether the tools such as screwdrivers, pliers, nose pliers, cutters, and other tools are well insulated and in good condition. It is a good idea to wear gloves for added safety. If you are under 18, then you must have an adult with you all times to help you.</div>
<p>Now that that's said, let's get started and see what we have got here.</p>


            </article>

            
        </section>
    </div>
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Making Jarvis wake you up </h1>
                </header>
            
            <article>
                
<p>Now, this one is very interesting, as you all know our human body is programmed in a certain way. Hence, we react to different stimuli in a very known way. Like when it gets dark, our brain produces hormones that trigger sleep. Once the sunlight falls on our eyes, we tend to wake up. Well, at least this should be the case! In recent times, our lifestyle has changed enormously, which has started to defy this cycle. That's why, we are seeing more and more cases of insomnia. Waking up by an alarm is certainly not natural. Hence, you are never happy listening to an alarm in the morning, even if it has your favorite song as its tone. Our sleep cycle is supposed to be synchronized with the sunlight, but nowadays hardly anyone wakes up by this method. So, in this chapter, let's first make a smart alarm that will replicate the natural way we wake up.</p>


            </article>

            
        </section>
    </div>
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Working with relay and PIR sensor</h1>
                </header>
            
            <article>
                
<p>As we are dealing with high voltage and higher currents, we would be using a relay. To do this, connect the wires as follows:</p>
<div class="CDPAlignCenter CDPAlign"><img src="Images/36131dfd-1664-4c69-a41c-d24fcd7961bf.png" style="width:44.00em;height:47.42em;"/></div>
<p>Once you are done connecting it, upload the following code and let's see what happens:</p>
<pre><span>import RPi.GPIO as GPIO<br/></span><span>import time<br/> <br/></span><span>LIGHT = 23<br/><br/></span><span>GPIO.setmode(GPIO.BCM)<br/></span><span>GPIO.setwarnings(False)<br/></span><span>GPIO.setup(LIGHT,GPIO.OUT)<br/> <br/></span><span>import datetime<br/><br/></span><span>H = datetime.datetime.now().strftime('%H')<br/></span><span>M = datetime.datetime.now().strftime('%M') <br/></span><br/><span>   <br/>while True:<br/></span><span><br/>       if H = '06'and M &lt; 20 :<br/></span><span>           GPIO.output(LIGHT,GPIO.HIGH)<br/></span><span><br/>       else:<br/></span><span>           GPIO.output(LIGHT,GPIO.LOW)</span></pre>
<p>OK, then it is a fairly simple code with not much explanation needed. We have done a very similar code before as well. Do you remember when? It was in the first few chapters when we were making a gardening robot where we had to fetch water to the plants at a certain time. All it is doing at this time is to check the time and whether the time is <kbd>06</kbd> hours and the minute is less than <kbd>20</kbd>. That is, the light would be switched on between 07:00 hours to 07:19 hours. Thereafter, it would switch off.</p>


            </article>

            
        </section>
    </div>
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Making the alarm irritating</h1>
                </header>
            
            <article>
                
<p>But there is a problem. The problem is that the lights will be switched on and, no matter whether you get up, the light would automatically switch itself off within 20 minutes. That is a bit of problem because not every time will you wake up in just 20 minutes. So, in that case, what should we do? The first thing we need to do is to detect whether you have woken up. This is very simple and not much needs to be told here. If you wake up in the morning, it is very certain that you will move out of the bed. Once you do, we can detect the motion that can tell our automated system whether you have really woken up.</p>
<p>Now, what we can do here is something very simple. We can detect your motion, and based on that detection, we can be decisive on whether you have really woken up. This doesn't seem much of a task. All we need to do is to add a motion detection sensor. For this purpose, we can use a PIR sensor, which can tell us whether the motion has been detected. So, let's go ahead, add another layer of sensor on top of our system, and see what happens. </p>
<p>So, first, connect the circuit as follows. While mounting the PIR sensor, do make sure that it is facing the bed and detecting any motion on and around it. Once the PIR is set up, wire the sensors as shown in the following diagram and see what happens:</p>
<div class="mce-root CDPAlignCenter CDPAlign"><img src="Images/4bb15b13-8f6e-4d8e-80b2-748bb3a86720.png" style="width:44.42em;height:40.42em;"/></div>
<p>Once done, then go ahead and write the following code:</p>
<pre class="mce-root"><span>import RPi.GPIO as GPIO<br/></span><span>import time <br/><br/></span><span>LIGHT = 23<br/></span><span>PIR = 24<br/></span><span>Irritation_flag = 3</span><span><br/><br/></span><span>GPIO.setmode(GPIO.BCM)<br/></span><span>GPIO.setwarnings(False)<br/><br/></span><span>GPIO.setup(LIGHT,GPIO.OUT) <br/></span><span>GPIO.setup(PIR, GPIO.IN)<br/><br/></span><span>import datetime<br/><br/></span><span>H = datetime.datetime.now().strftime('%H') <br/></span><span>M = datetime.datetime.now().strftime('%M')</span><span><br/></span><span><br/></span><span><br/></span><span> </span><span>   </span><span>while True:<br/><br/></span><span> </span><span>       if H = '07' and M &lt;= '15' and Iriitation_Flag &gt; 0 and GPIO.input(PIR) == 0:<br/><br/></span><span>       </span><span><span class="x_ydpd6fb5efdApple-tab-span">     </span></span><span>GPIO.output(LIGHT,GPIO.HIGH)<br/><br/></span><span><br/>       </span><span><span class="x_ydpd6fb5efdApple-tab-span"> </span></span><span>if H = '07'and GPIO.input(PIR)==1:<br/><br/></span><span>            GPIO.output(LIGHT,GPIO.LOW)<br/>            time.sleep(10)</span><span><br/>            Irritation_Flag = Irritation_Flag - 1<br/><br/><br/></span><span>       </span><span><span class="x_ydpd6fb5efdApple-tab-span"> for</span></span><span> H = '07'and M &gt; '15' and Irritation_Flag &gt; 0 and GPIO.input(PIR) = 0:<br/><br/></span><span>            GPIO.output(LIGHT,GPIO.HIGH)<br/>            time.sleep(5)<br/>            </span><span>GPIO.output(LIGHT,GPIO.LOW)<br/>            time.sleep(5)</span><span><br/></span><span>            <br/><br/>        if H != '07':<br/>            <br/>            Irritation_flag = 3<br/>            GPIOP.output(LIGHT, GPIO.LOW) </span><span><br/></span></pre>
<p>OK, let's see what we have done. The code is extremely simple, but we had a small twist in it, that is,  <kbd>Irritation_Flag</kbd>:</p>
<pre class="mce-root"><span>Irritation_flag = 3</span></pre>
<p>Now this variable works something like a snooze button. As we know, when we wake up sometimes, or in fact, most of the time, we again go back to sleep only to wake up much later to realize that we are late. To prevent this, we have this <kbd>Irritation_flag</kbd>, and what this basically would be used for is to detect the number of times you have performed the action to stop the alarm. How it would be used we will see later: </p>
<pre class="mce-root"><span> </span><span>       if H = '07' and M &lt;= '15' and Irritation_Flag &gt; 0 and GPIO.input(PIR) == 0:<br/><br/></span><span>       </span><span><span class="x_ydpd6fb5efdApple-tab-span">     </span></span><span>GPIO.output(LIGHT,GPIO.HIGH)</span></pre>
<p>In this line, we are simply comparing time values by hours and minutes. If the hours is <kbd>07</kbd> and minutes are fewer than or equal to <kbd>15</kbd>, then the lights would be switched off. There is also a condition that says <kbd>Irritation_Flag &gt; 0</kbd> as we have already declared in the beginning that the value of <kbd>Irritation_flag = 3</kbd>; hence, initially this condition will always be true. The last condition is <kbd>GPIO.input(PIR) == 0</kbd>; which means that the condition will only be satisfied when the PIR has not detected any motion. In very simple words, the alarm will go off every time between 07:00 and 07:15 if the PIR does not detect any motion: </p>
<pre class="mce-root"><span>       </span><span><span class="x_ydpd6fb5efdApple-tab-span"> </span></span><span>if H = '07'and GPIO.input(PIR)==1:<br/><br/></span><span>            GPIO.output(LIGHT,GPIO.LOW)<br/>            time.sleep(10)</span><span><br/>            Irritation_Flag = Irritation_Flag - 1</span></pre>
<p>In this part of the program, the condition will only be true if the hours or <kbd>H</kbd> is equal to <kbd>7</kbd> and when the PIR is detecting some motion. Hence, every time when the time is between 07:00 and 07:59 and whenever the motion is detected, the condition will be true. Once true, the program will first switch off the light using the line <kbd>GPIO.output*LIGHT,GPIO.LOW</kbd>. Once it is turned off, it waits for <kbd>10</kbd> seconds using <kbd>time.sleep(10)</kbd>. Once the time is over, it will implement the following operation: <kbd>Irritation_Flag - Irritation_Flag - 1</kbd>. Now what it does is that it decrements the value of <kbd>Irritation_Flag</kbd> by <kbd>1</kbd> every time it detects a motion. So the first time a motion happens, the value of <kbd>Irritation_Flag</kbd> would be <kbd>2</kbd>; thereafter, it would be <kbd>1</kbd>, and finally, it would be <kbd>0</kbd>. </p>
<p>If you look at the previous part of the code, you will be able to make out that the light would be switched on if the value of <kbd>Irritation_Flag</kbd> was greater than <kbd>0</kbd>. So if you want to turn off the light, you would have to move at least three times. Why three times? Because then the code <kbd>Irritation_Flag = Irritation - 1</kbd> would be executed three times so as to make the value get down to <kbd>0</kbd>, which obviously makes the condition <kbd>GPIO.input(PIR) &gt; 0</kbd> false:</p>
<pre class="mce-root"><span>       </span><span><span class="x_ydpd6fb5efdApple-tab-span"> for</span></span><span> H = '07'and M &gt; '15' and Irritation_Flag &gt; 0 and GPIO.input(PIR) = 0:<br/><br/></span><span>            GPIO.output(LIGHT,GPIO.HIGH)<br/>            time.sleep(5)<br/>            </span><span>GPIO.output(LIGHT,GPIO.LOW)<br/>            time.sleep(5)<br/></span></pre>
<p>Now, let's say even after of all this, you still do not wake up. Then what should happen? We have something special for you here. Now, instead of an <kbd>if</kbd> condition, we have a <kbd>for</kbd> loop. What this will check for is that the time should be <kbd>07</kbd> hours, and minutes should be greater than <kbd>15</kbd>, <kbd>Irritation_Flag &gt; 0</kbd>, and obviously no motion is being detected. Till the time all of these are true, the light would be switched on thereafter for <kbd>5</kbd> seconds, it would be kept switched on using the <kbd>time.sleep(5)</kbd>. The lights would be again switched on. Now this will keep on happening till the time the conditions are true or in other words, till the time is between 07:15 and 07:59. <kbd>Irritation)_Flag &gt; 0</kbd>, that is, the motion is not detected for three times and there is no motion detected. Till that time, the for loop would keep on the switch on and off of the light in action. <span>Due to frequent biking of light, there is a very higher chance of you waking up. This may be very effective, but surely not the most convenient. Well, however inconvenient it is, it will still be better than the conventional alarm:</span></p>
<pre class="mce-root"><span>        if H != '07':<br/>            <br/>            Irritation_flag = 3</span></pre>
<p>We have the entire light-based alarm ready for us to wake us up every morning. However, there is a problem. Once it is turned off, the value of <kbd>Irritation_Flag</kbd> will be <kbd>0</kbd>. Once it is turned to <kbd>0</kbd>, then no matter what the time is, the light would never start up. Hence, to make sure that the alarm is always operational at the same time every single day, we would need to set the value of the flag to any number more than <kbd>0</kbd>.</p>
<p>Now in the preceding line, if <kbd>H != '07'</kbd>, then the <kbd>Irritation_flag</kbd> would be <kbd>3</kbd>. That is whenever the time is anything other than <kbd>07</kbd> hours, then the value of <kbd>Irritation_Flag</kbd> would be <kbd>3</kbd>. </p>
<p>It was simple, wasn't it? But I'm sure that it would do a good job to make sure you wake up on time.</p>


            </article>

            
        </section>
    </div>
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Making it even more irritating</h1>
                </header>
            
            <article>
                
<p>Can you completely rely on the preceding system? If you really have control over your morning emotions of not getting out of the bed, then, yes, sure you can. But for those who just love to be in bed and sleep again after hitting the snooze button, then I am sure you would be able to find a way to switch off the light without properly waking up. So as in the code, the light would switch off whenever the motion was detected three times. But the motion can be anything. You can simply wave your hand while still being in the bed, and the system would detect it as a motion, which would defy the whole purpose. So what should we do now? </p>
<p>We have a solution for it! We can use a way by which we can be sure that you have to get out of bed. For this very purpose, we will be using our IR proximity sensor, which we have used earlier in our projects, and based on the distance reading of the sensor, we can detect whether you have gone past any specific area. This can be really interesting as you can fit this sensor pointing away from the bed or maybe on the gate of the bathroom, and till the time, you do not cross that specific line. The system would not switch off the alarm. So let's see how we would do it. First, connect the hardware, as shown in the following diagram:</p>
<div class="CDPAlignCenter CDPAlign"><img src="Images/c11c43ee-bf9a-4804-85d7-b468c85fb178.png" style="width:46.17em;height:45.08em;"/></div>
<p class="mce-root CDPAlignLeft CDPAlign">Once you are done with the diagram, go ahead and upload the following code:</p>
<pre class="mce-root"><span>import RPi.GPIO as GPIO<br/></span><span>import time <br/><br/></span><span>import Adafruit_ADS1x15<br/></span><span>adc0 = Adafruit_ADS1x15.ADS1115()<br/><br/></span><span>GAIN = 1<br/></span><span><br/>adc0.start_adc(0, gain=GAIN)</span><span><br/><br/></span><span>LIGHT = 23<br/></span><span>PIR = 24<br/></span><span>Irritation_flag = 1<br/></span><span>IR = 2<br/><br/></span><span>GPIO.setmode(GPIO.BCM)<br/></span><span>GPIO.setwarnings(False)<br/><br/></span><span>GPIO.setup(LIGHT,GPIO.OUT) <br/></span><span>GPIO.setup(PIR, GPIO.IN)<br/>GPIO.setup(IR. GPIO.IN)<br/><br/></span><span>import datetime<br/><br/></span><span>H = datetime.datetime.now().strftime('%H') <br/></span><span>M = datetime.datetime.now().strftime('%M')</span><span><br/></span><span><br/></span><span><br/></span><span> </span><span> while True:<br/><br/></span><span> </span><span> if H = '07' and M &lt;= '15' and Iriitation_Flag &gt; 0 and GPIO.input(PIR) == 0:<br/><br/></span><span>     </span><span><span class="x_ydpd6fb5efdApple-tab-span"> </span></span><span>GPIO.output(LIGHT,GPIO.HIGH)<br/><br/></span><span><br/> </span><span><span class="x_ydpd6fb5efdApple-tab-span"> </span></span><span>if H = '07'and GPIO.input(PIR)==1:<br/>    <br/>   </span><span>M_snooze = datetime.datetime.now().strftime('%M')<br/>   M_snooze = M_snooze + 5<br/></span><span>  <br/>   for M &lt;= M_snooze <br/></span><span>    <br/>     GPIO.output(LIGHT,GPIO.LOW)<br/><br/>     </span><span>F_value = adc0.get_last_result()</span><span><br/></span><span>     F1 =    </span><span>(</span><span>1.0</span><span> </span><span>/</span><span> (F_value </span><span>/</span><span> </span><span>13.15</span><span>)) </span><span>-</span><span> </span><span>0.35<br/><br/>     time.sleep(0.1)<br/>   <br/>    </span><span> F_value = adc0.get_last_result()</span><span><br/></span><span>     F2 =    </span><span>(</span><span>1.0</span><span> </span><span>/</span><span> (F_value </span><span>/</span><span> </span><span>13.15</span><span>)) </span><span>-</span><span> </span><span>0.35<br/><br/>     F_final = F1-F2<br/><br/>     </span><span>M = datetime.datetime.now().strftime('%M')</span><span><br/><br/>     if F_final &gt; 25<br/> <br/>         Irritation_flag = 0</span><span><br/><br/></span><span><br/><br/></span><span> </span><span><span class="x_ydpd6fb5efdApple-tab-span"> for</span></span><span> H = '07'and M &gt; '15' and Irritation_Flag &gt; 0 and GPIO.input(PIR) = 0:<br/><br/></span><span> GPIO.output(LIGHT,GPIO.HIGH)<br/> time.sleep(5)<br/> </span><span>GPIO.output(LIGHT,GPIO.LOW)<br/> time.sleep(5)</span><span><br/></span><span> <br/> if H != '07':<br/> <br/> Irritation_flag = 1 </span></pre>
<p>Mind blown? This code seems quite complex, having conditions inside conditions and again some more conditions. Say hello to robotics! These conditions make up a lot of robot's programming. A robot has to see continuously what is happening around and make decisions according to it. It's also the way humans work, don't we? </p>
<p>So, that being said, let's see what we are actually doing here. Most of the code is pretty much the same as the last one. The main difference comes somewhere around the middle of the programming section:</p>
<pre class="mce-root"><span> </span><span> if H = '07' and M &lt;= '15' and Iriitation_Flag &gt; 0 and GPIO.input(PIR) == 0:<br/><br/></span><span>     </span><span><span class="x_ydpd6fb5efdApple-tab-span"> </span></span><span>GPIO.output(LIGHT,GPIO.HIGH)</span></pre>
<p>We are switching on the lights as soon as the time is between 07:00 and 07:15:</p>
<pre class="mce-root"><span> </span><span><span class="x_ydpd6fb5efdApple-tab-span"> </span></span><span>if H = '07'and GPIO.input(PIR)==1:<br/>    <br/>   </span><span>M_snooze = datetime.datetime.now().strftime('%M')<br/>   M_snooze = M_snooze + 5</span></pre>
<p>In the hour of <kbd>07</kbd> whenever the PIR sensor is triggered or in other words, the PIR sensor detects any motion, then it will do a set of activities inside the <kbd>if</kbd> condition, which includes noting down the time by the function <kbd>datetime.datetime.now().strftime('%M')</kbd> and then storing it down in a variable named <kbd>M_snooze</kbd>.</p>
<p>In the next line, we are taking the value of that minute stored in <kbd>M_snooze</kbd> and adding another <kbd>5</kbd> minutes to it. So the value of <kbd>M_snooze</kbd> is now incremented by <kbd>5</kbd>:</p>
<pre class="mce-root"><span>   for M &lt;= M_snooze </span></pre>
<p>Now, in the same <kbd>if</kbd> condition that we used previously, we have placed a <kbd>for</kbd> loop, which looks like this: <kbd>for M &lt;= M_snooze</kbd>. But what does this mean? Here, what we are doing is pretty simple. The program inside the <kbd>for</kbd> loop will keep on running and will stay in the loop till the time the condition that we have stated is true. Now, the condition here states that till the time <kbd>M</kbd> is smaller or equal to <kbd>M_snooze</kbd>, the condition will stay true. As you have learned earlier, <kbd>M</kbd> is the current minute value and <kbd>M_snooze</kbd> is the value of <kbd>M</kbd> at the time of starting of this loop, which is incremented by <kbd>5</kbd>. Hence, the loop would be true for <kbd>5</kbd> minutes from the time of starting: </p>
<pre class="mce-root"><span>     GPIO.output(LIGHT,GPIO.LOW)<br/><br/>     </span><span>F_value = adc0.get_last_result()</span><span><br/></span><span>     F1 =    </span><span>(</span><span>1.0</span><span> </span><span>/</span><span> (F_value </span><span>/</span><span> </span><span>13.15</span><span>)) </span><span>-</span><span> </span><span>0.35<br/><br/>     time.sleep(0.1)<br/>   <br/>    </span><span> F_value = adc0.get_last_result()</span><span><br/></span><span>     F2 =    </span><span>(</span><span>1.0</span><span> </span><span>/</span><span> (F_value </span><span>/</span><span> </span><span>13.15</span><span>)) </span><span>-</span><span> </span><span>0.35<br/><br/>     F_final = F1-F2</span></pre>
<p>Now, this is the most interesting part of the program. Till the time, the <kbd>for</kbd> loop <kbd>for M &lt;= M_snooze</kbd> is true, the preceding lines of code will run. Let's see what it is doing. In the line, <kbd>F-value = adc0.get_last_result()</kbd>, it is taking the value of the IR proximity sensor and storing it in <kbd>F_value</kbd>. Thereafter, in the line <kbd>F1 = (1.0/(F_value/13.15))-0.35</kbd>, we are simply calculating the distance in centimeters. We have already studied how this is happening, so not much explanation needs to be done here. The value of distance is stored in a variable named <kbd>F1</kbd>. Thereafter, using the function <kbd>time.sleep(0.1)</kbd>, we are pausing the program for <kbd>0.1</kbd> seconds. Thereafter, we are again repeating the same task again; that is, we are again taking the value of distance. But this time, the distance value calculated is stored in an another variable named <kbd>F2</kbd>. Finally, after all of this is done, we are calculating <kbd>F_final</kbd>, which is <kbd>F_final = F1 - F2</kbd>. So we are simply calculating the difference in distance between the first and the second reading. But, you must be asking why are we doing this. What good does it do?</p>
<p>Well, as you remember, we have placed the IR proximity sensor in front of our bathroom gate. Now, if no one is passing in front of it, the value will remain fairly constant. But whenever a person passes through it, there will be a change in distance. So if there is a change in the overall distance from first to last reading, then we can say that someone has passed through the IR sensor. </p>
<p>That is pretty cool, but why don't we simply keep a threshold value like we have done previously? The answer to this is simple. That is because if you need to change the position of the sensor, then you again need to recalibrate the sensor according to the position. So this is a simple yet robust solution that can be used anywhere:</p>
<pre class="mce-root"><span>     if F_final &gt; 10<br/>        <br/>        Irritation_flag = 1</span></pre>
<p>Now we have got the reading, which can tell us whether a person has passed in front of it. But this data will not be useful until we put it somewhere. </p>
<p>So, here in the condition <kbd>if F_final &gt; 10</kbd>, whenever the distance change is more than <kbd>10</kbd> cm, then the condition would be true and the line <kbd>Irritation_flag</kbd> would be set to <kbd>1</kbd>.</p>
<p>If you go back to the previous lines, then you will be able to make out that the lights will only be on when the time is between 07:00 and 07:15 and the <kbd>Irritation_flag</kbd> must be <kbd>0</kbd>. As with this condition, we have set a part of the condition false by making the <kbd>Irritation_flag = 1</kbd>; hence, the program to switch on the lights will not work. </p>
<p>Now, let's look back and see what we have done so far: </p>
<ul>
<li>Whenever the time is 07:00–07:15, the lights would be switched on</li>
<li>If a movement is detected, then the lights would be switched off</li>
<li>A condition will be true for another five minutes, which will wait for detection of human motion through the IR proximity sensor</li>
<li>If a person crosses that within five minutes, then the alarm would be deactivated or else the alarm will again start to switch on the light</li>
</ul>
<p>Pretty cool, huh? That being said, let's add another added functionality from the previous program:</p>
<pre class="mce-root"><span> </span><span><span class="x_ydpd6fb5efdApple-tab-span"> for</span></span><span> H = '07'and M &gt; '15' and Irritation_Flag = 0 and GPIO.input(PIR) = 0:<br/><br/></span><span>    GPIO.output(LIGHT,GPIO.HIGH)<br/>    time.sleep(5)<br/>    </span><span>GPIO.output(LIGHT,GPIO.LOW)<br/>    time.sleep(5)</span></pre>
<p>You know what this does. If you do not move around in the first <kbd>15</kbd> minutes, that is from 07:00 to 07:15, then it will start blinking the lights every five seconds, forcing you to wake up:</p>
<pre class="mce-root"><span>        if H != '07':<br/>            <br/>            Irritation_flag = 0 </span></pre>
<p>Finally, we use the condition <kbd>if H != '07':</kbd>. So, whenever the value of <kbd>H</kbd> is anything other than <kbd>07</kbd>, then the condition would be true, and this will reset the <kbd>Irritation_flag</kbd> to <kbd>0</kbd>. By now, you know what turning  <kbd>Irritation_flag</kbd> to <kbd>0</kbd> does. </p>


            </article>

            
        </section>
    </div>
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p><span>So, finally, we have made our first mini Jarvis, which wakes you up in the morning and even irritates you if you don't wake up on time. </span>I hope you have really enjoyed this chapter by learning about two-motion sensors and their application in automating the electrical appliance. So, go ahead and try one at home, modify the code according to your needs, and bring out some really cool stuff. Next up, we will make our Jarvis do some more cool stuff, and we will cover some more exciting stuff on human detection.</p>
<p> </p>


            </article>

            
        </section>
    </div></body></html>