<html><head></head><body>
  <div id="sbo-rt-content"><div class="chapter" title="Chapter 10. Creating Amazing 3D GUIs with PyOpenGL and PyGLet"><div class="titlepage"><div><div><h1 class="title"><a id="ch10"/>Chapter 10. Creating Amazing 3D GUIs with PyOpenGL and PyGLet</h1></div></div></div><p>In this chapter we will create amazing Python GUIs that display true 3-Dimensional images that can be rotated around themselves so that we can look at them from all sides.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">PyOpenGL transforms our GUI</li><li class="listitem" style="list-style-type: disc">Our GUI in 3D!</li><li class="listitem" style="list-style-type: disc">Using bitmaps to make our GUI pretty</li><li class="listitem" style="list-style-type: disc">PyGLet transforms our GUI more easily than PyOpenGL</li><li class="listitem" style="list-style-type: disc">Our GUI in amazing colors</li><li class="listitem" style="list-style-type: disc">Creating a slide show using tkinter</li></ul></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec90"/>Introduction</h1></div></div></div><p>In this chapter, we will transform our GUI by giving it true 3-dimensional capabilities. We will use two Python third-party packages. PyOpenGL is a Python binding to the OpenGL standard, which is a graphics library that comes built-in with all major operating systems. This gives the resulting widgets a native look and feel.</p><p>Pyglet is another Python binding to the OpenGL library, but it can also create GUI applications, which can make coding using Pyglet easier than using PyOpenGL.</p></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="PyOpenGL transforms our GUI"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec91"/>PyOpenGL transforms our GUI</h1></div></div></div><p>In this <a id="id461" class="indexterm"/>recipe, we will successfully create a Python GUI that imports PyOpenGL modules and does actually work!</p><p>In order to do so, we need to overcome some initial challenges.</p><p>This recipe will show one proven way that does work. If you experiment on your own and get stuck, remember the famous words from Thomas A. Edison.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note141"/>Note</h3><p>Thomas Edison, inventor of the light bulb, answered a question from a reporter who talked about Edison's failures. Edison replied:</p><p>
<span class="emphasis"><em>"I have not failed. I've just found 10,000 ways that won't work."</em></span>
</p></div></div><p>First, we<a id="id462" class="indexterm"/> have to install the PyOpenGL extension module.</p><p>After successfully installing the PyOpenGL modules that match our OS architecture, we will create some example code.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec236"/>Getting ready</h2></div></div></div><p>We will install the PyOpenGL package. In this book, we are using Windows 7 64-bit OS and Python 3.4. The screenshot of downloads that follows is for this configuration.</p><p>We will also be using wxPython. If you do not have wxPython installed, you can read some recipes from the previous chapter about how to install wxPython and how to use this GUI framework.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note142"/>Note</h3><p>We are using the wxPython Phoenix release, which is the newest release and is intended to replace the original Classic wxPython release in the future.</p></div></div></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec237"/>How to do it...</h2></div></div></div><p>In order to use PyOpenGL, we have to first install it. The following URL is the official Python <a id="id463" class="indexterm"/>package installer website:</p><p>
<a class="ulink" href="https://pypi.python.org/pypi/PyOpenGL/3.0.2#downloads">https://pypi.python.org/pypi/PyOpenGL/3.0.2#downloads</a>
</p><div class="mediaobject"><img src="images/B04829_10_01.jpg" alt="How to do it..."/></div><p>This <a id="id464" class="indexterm"/>seems to be the correct installation but, as it turns out, it doesn't work with Windows 7 64-bit OS with Python 3.4.3 64-bit.</p><p>A better place to look for Python installation packages was mentioned in a recipe in a previous chapter. You are probably already familiar with it. We download the package that matches both our OS and our Python version. It comes with the new <code class="literal">.whl</code> format, so we have to install the Python wheel package first.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note143"/>Note</h3><p>How to install the Python wheel package is described in a previous recipe.</p></div></div><p>Installing PyOpenGL via the <code class="literal">PyOpenGL-3.1.1a1-cp34-none-win_amd64.whl</code> file using the <code class="literal">pip</code> command is both successful and installs all of the 64-bit modules we require.</p><p>Replace <code class="literal">&lt;your full path&gt;</code> with the full path you downloaded the wheel installer to.</p><div class="informalexample"><pre class="programlisting">pip install &lt;your full path&gt; PyOpenGL-3.1.1a1-cp34-none-win_amd64.whl</pre></div><p>When we now try to import some PyOpenGL modules, it works, as can be seen in this code example:</p><div class="informalexample"><pre class="programlisting"># Ch10_import_OpenGL.py
import wx                  
from wx import glcanvas
from OpenGL.GL import *
from OpenGL.GLUT import *</pre></div><p>All this code is doing is importing several of the OpenGL Python modules. It does not do anything else but, when we run our Python module, we do not get any errors.</p><p>This proves that we have successfully installed the OpenGL bindings to Python.</p><p>Now our<a id="id465" class="indexterm"/> development environment has been successfully set up and we can try it out using wxPython.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note144"/>Note</h3><p>Many online examples are restricted to using Python 2.x, as well as using the Classic version of wxPython. We are using Python 3 and Phoenix.</p></div></div><p>Using the code based on the wxPython demo examples creates a working 3D cube. In comparison, running the cone example did not work, but this example got us started on the right track.</p><p>Here is <a id="id466" class="indexterm"/>the URL:</p><p>
<a class="ulink" href="http://wiki.wxpython.org/GLCanvas%20update">http://wiki.wxpython.org/GLCanvas%20update</a>
</p><p>Here are some modifications to the code: </p><div class="informalexample"><pre class="programlisting">import wx
from wx import glcanvas
from OpenGL.GL import *
from OpenGL.GLUT import *

class MyCanvasBase(glcanvas.GLCanvas):
    def __init__(self, parent):
        glcanvas.GLCanvas.__init__(self, parent, -1)
        
# This context was missing from the code
        self.context = glcanvas.GLContext(self)  # &lt;- added

    def OnPaint(self, event):
        dc = wx.PaintDC(self)
# We have to pass in a context ------
#         self.SetCurrent()                      # commented out
        self.SetCurrent(self.context)            # &lt;- changed</pre></div><p>We now can create the following GUI:</p><div class="mediaobject"><img src="images/B04829_10_02.jpg" alt="How to do it..."/></div><p>In the <a id="id467" class="indexterm"/>Classic version of wxPython <code class="literal">SetCurrent()</code> did not require a context. Here is some code we might find when searching online.</p><div class="informalexample"><pre class="programlisting">    def OnPaint(self, event):

        dc = wx.PaintDC(self)
        self.SetCurrent()
        if not self.init:
            self.InitGL()
            self.init = True
        self.OnDraw()</pre></div><p>The preceding code does not work when using wxPython Phoenix. We can look up the correct syntax for Phoenix online.</p><div class="mediaobject"><img src="images/B04829_10_03.jpg" alt="How to do it..."/></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec238"/>How it works...</h2></div></div></div><p>In this recipe, we had our first experiences of OpenGL with PyOpenGL Python bindings. While<a id="id468" class="indexterm"/> OpenGL can create truly amazing images in true 3D, we ran into some challenges along the way and then found solutions to these challenges that made it work.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note145"/>Note</h3><p>We are coding in Python, creating 3D images!</p></div></div></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Our GUI in 3D!"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec92"/>Our GUI in 3D!</h1></div></div></div><p>In this<a id="id469" class="indexterm"/> recipe we will create our own GUI using wxPython. We are reusing some code from the wxPython demo examples, which we have reduced to the minimum code required to display OpenGL in 3D.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note146"/>Note</h3><p>OpenGL is a very large library. We will not go into detailed explanations of this library. There are a lot of books and online documentation available if you want to study OpenGL further. It has its own shading language.</p></div></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec239"/>Getting ready</h2></div></div></div><p>Reading the previous recipe is probably good preparation for this recipe.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec240"/>How to do it...</h2></div></div></div><p>As the entire Python code is a little bit long here, we will show just a little bit of the code.</p><p>The entire code is available online and this Python module is called:</p><div class="informalexample"><pre class="programlisting"># Ch10_wxPython_OpenGL_GUI
import wx                  
from wx import glcanvas
from OpenGL.GL import *
from OpenGL.GLUT import *

#---------------------------------------------------
class CanvasBase(glcanvas.GLCanvas):
    def __init__(self, parent):
        glcanvas.GLCanvas.__init__(self, parent, -1)
        self.context = glcanvas.GLContext(self)
        self.init = False

        # Cube 3D start rotation
        self.last_X = self.x = 30
        self.last_Y = self.y = 30
        
        self.Bind(wx.EVT_SIZE, self.sizeCallback)
        self.Bind(wx.EVT_PAINT, self.paintCallback)
        self.Bind(wx.EVT_LEFT_DOWN, self.mouseDownCallback)
        self.Bind(wx.EVT_LEFT_UP, self.mouseUpCallback)
        self.Bind(wx.EVT_MOTION, self.mouseMotionCallback)

    def sizeCallback(self, event):
        wx.CallAfter(self.setViewport)
        event.Skip()

    def setViewport(self):
        self.size = self.GetClientSize()
        self.SetCurrent(self.context)
        glViewport(0, 0, self.size.width, self.size.height)
        
    def paintCallback(self, event):
        wx.PaintDC(self)
        self.SetCurrent(self.context)
        if not self.init:
            self.initGL()
            self.init = True
        self.onDraw()

    def mouseDownCallback(self, event):
        self.CaptureMouse()
        self.x, self.y = self.last_X, self.last_Y = event.GetPosition()

    def mouseUpCallback(self, evt):
        self.ReleaseMouse()

    def mouseMotionCallback(self, evt):
        if evt.Dragging() and evt.LeftIsDown():
            self.last_X, self.last_Y = self.x, self.y
            self.x, self.y = evt.GetPosition()
            self.Refresh(False)

#-----------------------------------------------------
class CubeCanvas(CanvasBase):
    def initGL(self):
        # set viewing projection
        glMatrixMode(GL_PROJECTION)
        glFrustum(-0.5, 0.5, -0.5, 0.5, 1.0, 3.0)

        # position viewer
        glMatrixMode(GL_MODELVIEW)
        glTranslatef(0.0, 0.0, -2.0)

        # position object
        glRotatef(self.y, 1.0, 0.0, 0.0)
        glRotatef(self.x, 0.0, 1.0, 0.0)

        glEnable(GL_DEPTH_TEST)
        glEnable(GL_LIGHTING)
        glEnable(GL_LIGHT0)

    def onDraw(self):
        # clear color and depth buffers
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)

        # draw six faces of a cube
        glBegin(GL_QUADS)
        glNormal3f( 0.0, 0.0, 1.0)
        glVertex3f( 0.5, 0.5, 0.5)
        glVertex3f(-0.5, 0.5, 0.5)
        glVertex3f(-0.5,-0.5, 0.5)
        glVertex3f( 0.5,-0.5, 0.5)

        glNormal3f( 0.0, 0.0,-1.0)
        glVertex3f(-0.5,-0.5,-0.5)
 
                    
#===========================================================
app = wx.App()
frame = wx.Frame(None, title="Python GUI using wxPython", size=(300,230))
GUI(frame)
frame.Show()        
app.MainLoop()      </pre></div><div class="mediaobject"><img src="images/B04829_10_04.jpg" alt="How to do it..."/></div><p>The preceding screenshot shows our wxPython GUI. When we click the button widget, the following second window appears.</p><div class="mediaobject"><img src="images/B04829_10_05.jpg" alt="How to do it..."/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note147"/>Note</h3><p>We can now use the mouse to turn the cube around to see all of its six sides.</p></div></div><div class="mediaobject"><img src="images/B04829_10_06.jpg" alt="How to do it..."/></div><p>We<a id="id470" class="indexterm"/> can also maximize this window and the coordinates will scale and we can spin this cube around in this much larger window!</p><div class="mediaobject"><img src="images/B04829_10_07.jpg" alt="How to do it..."/></div><p>The cube could also be a Star Trek space ship!</p><p>We just <a id="id471" class="indexterm"/>have to become an advanced programmer in this technology if this is what we want to develop.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note148"/>Note</h3><p>Many video games are being developed using OpenGL.</p></div></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec241"/>How it works...</h2></div></div></div><p>We first created a regular wxPython GUI and placed a button widget onto it. Clicking this button invokes the imported OpenGL 3D libraries. The code used is part of the wxPython demo examples, which we slightly modified to make it work with Phoenix.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note149"/>Note</h3><p>This recipe glued our own GUI to this library.</p></div></div><p>OpenGL is such a huge and impressive library. This recipe gave a taste of how to create a working example in Python.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note150"/>Note</h3><p>Often a working example is all we need to get started on our journey.</p></div></div></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Using bitmaps to make our GUI pretty"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec93"/>Using bitmaps to make our GUI pretty</h1></div></div></div><p>This recipe<a id="id472" class="indexterm"/> was inspired by a wxPython IDE builder framework that, at some point in time, used to work.</p><p>It does not work with Python 3 and wxPython Phoenix, but the code is very cool.</p><p>We will reuse a bitmap image from the large amount of code this project supplies.</p><p>Before time runs out, you can fork the Google code on GitHub.</p><div class="mediaobject"><img src="images/B04829_10_08.jpg" alt="Using bitmaps to make our GUI pretty"/></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec242"/>Getting ready</h2></div></div></div><p>We will <a id="id473" class="indexterm"/>continue to use wxPython in this recipe, so reading at least parts of the previous chapter might be useful as a preparation for this recipe.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec243"/>How to do it...</h2></div></div></div><p>After reverse-engineering the gui2py code and making other changes to this code, we might achieve the following window widget, which displays a nice, tiled background.</p><div class="mediaobject"><img src="images/B04829_10_09.jpg" alt="How to do it..."/></div><p>Of course, <a id="id474" class="indexterm"/>we lost a lot of widgets refactoring the code from the website mentioned previously, yet it does give us a cool background, and clicking the <span class="strong"><strong>Quit</strong></span> button still works.</p><p>The next step is to figure out how to integrate the interesting part of the code into our own GUI.</p><p>We do this by adding the following code to the GUI of the previous recipe.</p><div class="informalexample"><pre class="programlisting">#----------------------------------------------------------
class GUI(wx.Panel):              # Subclass wxPython Panel
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        
        imageFile = 'Tile.bmp'
        self.bmp = wx.Bitmap(imageFile)
        # react to a resize event and redraw image
        parent.Bind(wx.EVT_SIZE, self.canvasCallback)

    def canvasCallback(self, event=None):
        # create the device context
        dc = wx.ClientDC(self)
        brushBMP = wx.Brush(self.bmp)
        dc.SetBrush(brushBMP)
        width, height = self.GetClientSize()
        dc.DrawRectangle(0, 0, width, height)</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note151"/>Note</h3><p>We have to bind to parent, not self, otherwise our bitmap will not show up.</p></div></div><p>Running <a id="id475" class="indexterm"/>our improved code now tiles a bitmap as the background of our GUI.</p><div class="mediaobject"><img src="images/B04829_10_10.jpg" alt="How to do it..."/></div><p>Clicking the button still invokes our OpenGL 3D drawing, so we did not lose any functionality.</p><div class="mediaobject"><img src="images/B04829_10_11.jpg" alt="How to do it..."/></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec244"/>How it works...</h2></div></div></div><p>In this<a id="id476" class="indexterm"/> recipe, we enhanced our GUI by using a bitmap as a background. We tiled the bitmap image and when we resized the GUI window, the bitmap automatically adjusted itself to fill in the entire area of the Canvas we were painting on using the device context.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note152"/>Note</h3><p>The preceding wxPython code can load different image file formats.</p></div></div></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="PyGLet transforms our GUI more easily than PyOpenGL"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec94"/>PyGLet transforms our GUI more easily than PyOpenGL</h1></div></div></div><p>In this<a id="id477" class="indexterm"/> recipe, we will use the PyGLet GUI development framework to create our GUIs.</p><p>PyGLet is easier to use than PyOpenGL as it comes with its own GUI event loop, so we do not need to use tkinter or wxPython to create our GUI.</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec245"/>How to do it...</h2></div></div></div><p>In order to use Pyglet, we first have to install this third-party Python plugin.</p><p>Using the <code class="literal">pip</code> command, we can easily install the library and a successful installation looks like this in our <code class="literal">site-packages</code> Python folder:</p><div class="mediaobject"><img src="images/B04829_10_12.jpg" alt="How to do it..."/></div><p>The <a id="id478" class="indexterm"/>online documentation <a id="id479" class="indexterm"/>is located at this website for the current release:</p><p>
<a class="ulink" href="https://pyglet.readthedocs.org/en/pyglet-1.2-maintenance/">https://pyglet.readthedocs.org/en/pyglet-1.2-maintenance/</a>
</p><div class="mediaobject"><img src="images/B04829_10_13.jpg" alt="How to do it..."/></div><p>A first <a id="id480" class="indexterm"/>experience using the Pyglet library may look like this:</p><div class="informalexample"><pre class="programlisting">import pyglet

window = pyglet.window.Window()
label = pyglet.text.Label('PyGLet GUI', 
                          font_size=42,
                          x=window.width//2, y=window.height//2,
                          anchor_x='center', anchor_y='center')

@window.event
def on_draw():
    window.clear()
    label.draw()

pyglet.app.run()</pre></div><p>The preceding code is from the official pyglet.org website and results in the following fully functional GUI:</p><div class="mediaobject"><img src="images/B04829_10_14.jpg" alt="How to do it..."/></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec246"/>How it works...</h2></div></div></div><p>In<a id="id481" class="indexterm"/> this recipe, we used another third-party Python module that wraps the OpenGL library.</p><p>This library comes with its own event loop processing power, which enables us to avoid having to rely on yet another library to create a running Python GUI.</p><p>We have explored the official website that shows us how to install and use this fantastic GUI library.</p></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Our GUI in amazing colors"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec95"/>Our GUI in amazing colors</h1></div></div></div><p>In this <a id="id482" class="indexterm"/>recipe, we will extend our GUI written using Pyglet from the previous recipe, by turning it into true 3D.</p><p>We will also add some fancy colors to it. This recipe was inspired by some sample code from the <span class="emphasis"><em>OpenGL SuperBible</em></span> book series. It creates a very colorful cube, which we can turn around in 3-dimensional space using the keyboard up, down, left, and right buttons.</p><p>We have <a id="id483" class="indexterm"/>slightly improved the sample code by making the image turn when holding down one of the keys instead of having to press and release the key.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec247"/>Getting ready</h2></div></div></div><p>The previous recipe explains how to install PyGLet and gives you an introduction to this library. If you have not done so, it is probably a good idea to browse through that chapter.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note153"/>Note</h3><p>In the online documentation, PyGLet is usually spelled in all lower-case. While this might be a Pythonic way, we capitalize the first letter of a class and we use lower case for variable, method, and function names to start each name.</p><p>We do not use underscores in this book unless necessary to clarify code.</p></div></div></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec248"/>How to do it...</h2></div></div></div><p>The following code creates the 3-dimensional colored cube shown below it. This time, we will use the keyboard arrow keys to rotate the image, instead of the mouse.</p><div class="informalexample"><pre class="programlisting">import pyglet
from pyglet.gl import *
from pyglet.window import key
from OpenGL.GLUT import *

WINDOW    = 400
INCREMENT = 5

class Window(pyglet.window.Window):

    # Cube 3D start rotation
    xRotation = yRotation = 30    

    def __init__(self, width, height, title=''):
        super(Window, self).__init__(width, height, title)
        glClearColor(0, 0, 0, 1)
        glEnable(GL_DEPTH_TEST)    

    def on_draw(self):
        # Clear the current GL Window
        self.clear()
        
        # Push Matrix onto stack
        glPushMatrix()

        glRotatef(self.xRotation, 1, 0, 0)
        glRotatef(self.yRotation, 0, 1, 0)

        # Draw the six sides of the cube
        glBegin(GL_QUADS)
        
        # White
        glColor3ub(255, 255, 255)
        glVertex3f(50,50,50)

        # Yellow
        glColor3ub(255, 255, 0)
        glVertex3f(50,-50,50)

        # Red
        glColor3ub(255, 0, 0)
        glVertex3f(-50,-50,50)
        glVertex3f(-50,50,50)

        # Blue
        glColor3f(0, 0, 1)
        glVertex3f(-50,50,-50)

        # &lt;… more color defines for cube faces&gt;
        
        glEnd()

        # Pop Matrix off stack
        glPopMatrix()


    def on_resize(self, width, height):
        # set the Viewport
        glViewport(0, 0, width, height)

        # using Projection mode
        glMatrixMode(GL_PROJECTION)
        glLoadIdentity()

        aspectRatio = width / height
        gluPerspective(35, aspectRatio, 1, 1000)
         
        glMatrixMode(GL_MODELVIEW)
        glLoadIdentity()
        glTranslatef(0, 0, -400)
    

    def on_text_motion(self, motion): 
        if motion == key.UP:
            self.xRotation -= INCREMENT
        elif motion == key.DOWN:
            self.xRotation += INCREMENT
        elif motion == key.LEFT:
            self.yRotation -= INCREMENT
        elif motion == key.RIGHT:
            self.yRotation += INCREMENT
            

if __name__ == '__main__':
    Window(WINDOW, WINDOW, 'Pyglet Colored Cube')
    pyglet.app.run()</pre></div><div class="mediaobject"><img src="images/B04829_10_15.jpg" alt="How to do it..."/></div><p>Using <a id="id484" class="indexterm"/>the keyboard arrow keys, we can spin the 3D cube around.</p><div class="mediaobject"><img src="images/B04829_10_16.jpg" alt="How to do it..."/></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec249"/>How it works...</h2></div></div></div><p>In this recipe, <a id="id485" class="indexterm"/>we have used pyglet to create a colorful cube, which we can rotate in 3-dimensional space using the keyboard arrow keys.</p><p>We have defined several colors for the six faces of our cube and we have used pyglet to create our main window frame.</p><p>The code is similar to a previous recipe in this chapter, in which we used the wxPython library to create a cube. The reason for this is that underneath the hood, both wxPython and pyglet use the OpenGL library.</p></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Creating a slideshow using tkinter"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec96"/>Creating a slideshow using tkinter</h1></div></div></div><p>In this recipe, <a id="id486" class="indexterm"/>we will create a nice working slideshow <a id="id487" class="indexterm"/>GUI using pure Python.</p><p>We will see the limitations the core Python built-ins have, and then we will explore another third-party module available called Pillow, which extends tkinter's built-in functionality in regards to image processing.</p><p>While the name Pillow might sound a little bit strange at first, it actually comes with a lot of history behind it.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note154"/>Note</h3><p>We are only using Python 3.4 and above in this book.</p><p>We are not going back to Python 2.</p><p>Guido has expressed his decision to intentionally break backwards compatibility and has decided that Python 3 is the future of Python programming.</p></div></div><p>For GUIs <a id="id488" class="indexterm"/>and images, the older line of Python 2 has this <a id="id489" class="indexterm"/>very powerful module named PIL, which stands for Python Image Library. This library comes with a very large amount of functionality, which several years after the very successful creation of Python 3 has not been translated for Python 3.</p><p>Many developers still choose to use Python 2 instead of the future, as designed by the Benevolent Dictator of Python, because Python 2 still has more libraries available.</p><p>That is a little bit sad.</p><p>Fortunately, another imaging library has been created to work with Python 3 and it is named PIL plus something. </p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note155"/>Note</h3><p>Pillow is not compatible with the Python 2 PIL library.</p></div></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec250"/>Getting ready</h2></div></div></div><p>In the first part of this recipe, we will use pure Python. In order to improve the code, we will install another Python module using pip functionality. So, while you are most likely familiar with pip, a little knowledge of how to use it might be useful.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec251"/>How to do it...</h2></div></div></div><p>First, we will create a working GUI that shuffles slides within a window frame using pure Python.</p><p>Here is the working code and following it are some screenshots of the results of running this code:</p><div class="informalexample"><pre class="programlisting">from tkinter import Tk, PhotoImage, Label
from itertools import cycle
from os import listdir
 
class SlideShow(Tk):
    # inherit GUI framework extending tkinter
    def __init__(self, msShowTimeBetweenSlides=1500):
        # initialize tkinter super class
        Tk.__init__(self)
        
        # time each slide will be shown
        self.showTime = msShowTimeBetweenSlides
        
        # look for images in current working directory 
        listOfSlides = [slide for slide in listdir() if slide.endswith('gif')]

        # cycle slides to show on the tkinter Label 
        self.iterableCycle = cycle((PhotoImage(file=slide), slide) for slide in listOfSlides)
        
        # create tkinter Label widget which can display images
        self.slidesLabel = Label(self)
        
        # create the Frame widget
        self.slidesLabel.pack()
 
 
    def slidesCallback(self):
        # get next slide from iterable cycle
        currentInstance, nameOfSlide = next(self.iterableCycle)
        
        # assign next slide to Label widget
        self.slidesLabel.config(image=currentInstance)
        
        # update Window title with current slide
        self.title(nameOfSlide)
        
        # recursively repeat the Show
        self.after(self.showTime, self.slidesCallback)

 
#=================================
# Start GUI
#=================================
win = SlideShow()
win.after(0, win.slidesCallback())
win.mainloop()</pre></div><div class="mediaobject"><img src="images/B04829_10_21.jpg" alt="How to do it..."/></div><p>Here<a id="id490" class="indexterm"/> is another<a id="id491" class="indexterm"/> moment in time in the unfolding slideshow.</p><div class="mediaobject"><img src="images/B04829_10_22.jpg" alt="How to do it..."/></div><p>While the slides sliding are truly impressive, the built-in capabilities of pure Python tkinter GUIs do not support the very popular <code class="literal">.jpg</code> format, so we have to reach out to another Python library.</p><p>In order to use Pillow, we first have to install it using the <code class="literal">pip</code> command.</p><p>A successful installation looks like this:</p><div class="mediaobject"><img src="images/B04829_10_23.jpg" alt="How to do it..."/></div><p>Pillow <a id="id492" class="indexterm"/>supports <code class="literal">.jpg</code> formats and, in order to use it, we <a id="id493" class="indexterm"/>to have to slightly change our syntax.</p><p>Using Pillow is an advanced topic that will not be covered in this edition of the book.</p></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec252"/>How it works...</h2></div></div></div><p>Python is a very wonderful tool, and in this recipe, we have explored several ways to use and extend it.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note156"/>Note</h3><p>When a finger points at the moon, it is not the moon itself, just a pointer.</p></div></div></div></div></div>
</body></html>