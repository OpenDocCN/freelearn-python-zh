<html><head></head><body>
		<div id="_idContainer036">
			<h1 id="_idParaDest-83" class="chapter-number"><a id="_idTextAnchor083"/>3</h1>
			<h1 id="_idParaDest-84"><a id="_idTextAnchor084"/>Creating Odoo Add-On Modules</h1>
			<p>Now that we have a development environment and know how to manage Odoo server instances and databases, we will learn how to create Odoo <span class="No-Break">add-on modules.</span></p>
			<p>Our main goal in this chapter is to understand how an add-on module is structured and the typical incremental workflow to add components to it. The various components mentioned in this chapter’s recipe names will be covered extensively in <span class="No-Break">subsequent chapters.</span></p>
			<p>An Odoo module can contain <span class="No-Break">several elements:</span></p>
			<ul>
				<li><span class="No-Break"><strong class="bold">Business objects</strong></span><span class="No-Break">:</span><ul><li>Declared as Python classes, these resources are automatically persisted by Odoo based on <span class="No-Break">their configuration</span></li></ul></li>
				<li><span class="No-Break"><strong class="bold">Object views</strong></span><span class="No-Break">:</span><ul><li>A definition of business objects’ <span class="No-Break">UI display</span></li></ul></li>
				<li><strong class="bold">Data files (XML or CSV files declaring the </strong><span class="No-Break"><strong class="bold">model metadata)</strong></span><span class="No-Break">:</span><ul><li>Views <span class="No-Break">or reports</span></li><li>Configuration data (module parametrization and <span class="No-Break">security rules)</span></li><li>Demonstration data <span class="No-Break">and more</span></li></ul></li>
				<li><span class="No-Break"><strong class="bold">Web controllers</strong></span><span class="No-Break">:</span><ul><li>Handle requests from web browsers, static web data images, or CSS or JavaScript files used by the web interface <span class="No-Break">or website</span></li></ul></li>
			</ul>
			<p>In this chapter, we will cover the <span class="No-Break">following recipes:</span></p>
			<ul>
				<li>Creating and installing a new <span class="No-Break">add-on module</span></li>
				<li>Completing the add-on <span class="No-Break">module manifest</span></li>
				<li>Organizing the add-on module <span class="No-Break">file structure</span></li>
				<li><span class="No-Break">Adding models</span></li>
				<li>Adding menu items <span class="No-Break">and views</span></li>
				<li>Adding <span class="No-Break">access security</span></li>
				<li>Using the <strong class="source-inline">scaffold</strong> command to create <span class="No-Break">a module</span></li>
			</ul>
			<h1 id="_idParaDest-85"><a id="_idTextAnchor085"/>Technical requirements</h1>
			<p>For this chapter, you are expected to have Odoo installed, and you are also expected to have followed the recipes in <a href="B20997_01.xhtml#_idTextAnchor020"><span class="No-Break"><em class="italic">Chapter 1</em></span></a>, <em class="italic">Installing the Odoo Development Environment</em>. You are also expected to be comfortable in discovering and installing extra add-on modules, as described in <a href="B20997_02.xhtml#_idTextAnchor051"><span class="No-Break"><em class="italic">Chapter 2</em></span></a>, <em class="italic">Managing Odoo </em><span class="No-Break"><em class="italic">Server Instances</em></span><span class="No-Break">.</span></p>
			<p>All the code used in this chapter can be downloaded from the GitHub repository <span class="No-Break">at </span><a href="https://github.com/PacktPublishing/Odoo-17-Development-Cookbook-Fifth-Edition/tree/main/Chapter03"><span class="No-Break">https://github.com/PacktPublishing/Odoo-17-Development-Cookbook-Fifth-Edition/tree/main/Chapter03</span></a><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-86"><a id="_idTextAnchor086"/>What is an Odoo add-on module?</h1>
			<p>Except for the framework code, all of the code bases of Odoo are packed in the form of modules. These modules can be installed or uninstalled at any time from the database. There are two <a id="_idIndexMarker126"/>main purposes for these modules. You can either add new apps/business logic, or you can modify an existing application. Put simply, in Odoo, everything starts and ends <span class="No-Break">with modules.</span></p>
			<p>Odoo offers various business solutions such as Sales, Purchase, POS, Accounting, Manufacturing, Project, and Inventory. Creating a new module involves adding new features to a business or upgrading the <span class="No-Break">existing ones.</span></p>
			<p>The latest version of Odoo introduces numerous new modules in both the Community and Enterprise editions. These include Meeting Rooms, To-Do, and several WhatsApp-related <span class="No-Break">integration modules.</span></p>
			<p>In addition, this version comes packed with exciting new features such as a redesigned user interface, improved search functionality, and new features for CRM, manufacturing, and e-commerce. The new version also includes several other improvements, such as enhanced performance, improved security, and <span class="No-Break">more integrations.</span></p>
			<p>Odoo is used by companies of all sizes; each company has a different business flow and requirements. To deal with this issue, Odoo splits the features of the application into different modules. These modules can be loaded into the database on demand. Basically, the administrator can enable/disable these features at any time. Consequently, the same software can be adjusted for different requirements. Check out the following <a id="_idIndexMarker127"/>screenshot of Odoo modules; the first module in the column is the main application, and others are designed to add extra features to that app. To get a modules list grouped by the application’s category, go to the <strong class="bold">Apps</strong> menu and apply grouping <span class="No-Break">by category:</span></p>
			<div>
				<div id="_idContainer031" class="IMG---Figure">
					<img src="image/B20997_03_1.jpg" alt="Figure 3.1 – Grouping apps by category"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.1 – Grouping apps by category</p>
			<p>If you plan on developing a new application in Odoo, you should create boundaries for various features. This will be very helpful to divide your application into different add-on modules. Now that you know the purpose of the add-on module in Odoo, we can start building our <span class="No-Break">own one.</span></p>
			<h1 id="_idParaDest-87"><a id="_idTextAnchor087"/>Creating and installing a new add-on module</h1>
			<p>In this recipe, we will create <a id="_idIndexMarker128"/>a new module, make it available in <a id="_idIndexMarker129"/>our Odoo instance, and <span class="No-Break">install it.</span></p>
			<h2 id="_idParaDest-88"><a id="_idTextAnchor088"/>Getting ready</h2>
			<p>To begin, we will need an Odoo instance that’s ready <span class="No-Break">to use.</span></p>
			<p>If you followed the <em class="italic">Easy installation of Odoo from the source</em> recipe in <a href="B20997_01.xhtml#_idTextAnchor020"><span class="No-Break"><em class="italic">Chapter 1</em></span></a>, <em class="italic">Installing the Odoo Development Environment</em>, Odoo should be available at <strong class="source-inline">~/odoo-dev/odoo</strong>. For explanation purposes, we will assume this location for Odoo, although you can use any other location of <span class="No-Break">your preference.</span></p>
			<p>We will also need a location to add our own Odoo modules. For the purpose of this recipe, we will use a <strong class="source-inline">local-addons</strong> directory alongside the <strong class="source-inline">odoo</strong> directory, <span class="No-Break">at </span><span class="No-Break"><strong class="source-inline">~/odoo-dev/local-addons</strong></span><span class="No-Break">.</span></p>
			<p>You can upload your own Odoo modules on GitHub and clone them on your local system for <span class="No-Break">development purposes.</span></p>
			<h2 id="_idParaDest-89"><a id="_idTextAnchor089"/>How to do it...</h2>
			<p>As an example, for this chapter, we will create a small add-on module to manage <span class="No-Break">a hostel.</span></p>
			<p>The following steps will create and install a new <span class="No-Break">add-on module:</span></p>
			<ol>
				<li>Change the working directory in which we will work and create the add-ons directory where our custom module will <span class="No-Break">be placed:</span><pre class="source-code">
<strong class="bold">$ cd ~/odoo-dev</strong>
<strong class="bold">$ mkdir local-addons</strong></pre></li>				<li>Choose a technical name for the new module and create a directory with that name for the module. For our example, we will <span class="No-Break">use </span><span class="No-Break"><strong class="source-inline">my_hostel</strong></span><span class="No-Break">:</span><pre class="source-code">
<strong class="bold">$ mkdir local-addons/my_hostel</strong></pre><p class="list-inset">A module’s <em class="italic">technical name</em> must be a valid Python identifier. It must begin with a letter, and only contain letters, numbers, and underscore characters. It is preferable that you only use lowercase letters in the <span class="No-Break">module name.</span></p></li>				<li>Make the Python module importable by adding an <span class="No-Break"><strong class="source-inline">__init__.py</strong></span><span class="No-Break"> file:</span><pre class="source-code">
<strong class="bold">$ touch local-addons/my_hostel/__init__.py</strong></pre></li>				<li>Add a minimal module manifest for Odoo to detect it as an add-on module. Inside the <strong class="source-inline">my_hostel</strong> folder, create an <strong class="source-inline">__manifest__.py</strong> file with <span class="No-Break">this line:</span><pre class="source-code">
{'name': 'Hostel Management'}</pre></li>				<li>Start your <a id="_idIndexMarker130"/>Odoo instance, including the module directory, in the <span class="No-Break">add-on path:</span><pre class="source-code">
<strong class="bold">$ odoo/odoo-bin --addons-path=odoo/addons/,local-addons/</strong></pre><p class="list-inset">If the <strong class="source-inline">--save</strong> option is added to the Odoo command, the add-ons path will be saved in the <a id="_idIndexMarker131"/>configuration file. The next time you start the server, if no add-on path option is provided, this will <span class="No-Break">be used.</span></p></li>				<li>Make the new module available in your Odoo instance. Log in to Odoo using <strong class="bold">admin</strong>, enable <strong class="bold">Developer Mode</strong> in the <strong class="bold">About</strong> box, and in the <strong class="bold">Apps</strong> top menu, select <strong class="bold">Update Apps List</strong>. Now, Odoo should know about our <span class="No-Break">Odoo module:</span></li>
			</ol>
			<div>
				<div id="_idContainer032" class="IMG---Figure">
					<img src="image/B20997_03_2.jpg" alt="Figure 3.2 – The dialog to update the app list"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.2 – The dialog to update the app list</p>
			<ol>
				<li value="7">Select the <strong class="bold">Apps</strong> menu at the top, and in the search bar in the top-right corner, delete the default Apps filter and search for <strong class="source-inline">my_hostel</strong>. Click on the <strong class="bold">Activate</strong> button, and the installation <span class="No-Break">will finish.</span></li>
			</ol>
			<h2 id="_idParaDest-90"><a id="_idTextAnchor090"/>How it works...</h2>
			<p>An Odoo module is a directory that contains code files and other assets. The directory name that’s used <a id="_idIndexMarker132"/>is the module’s technical name. The <strong class="source-inline">name</strong> key in the module manifest is <span class="No-Break">its title.</span></p>
			<p>The <strong class="source-inline">__manifest__.py</strong> file is the module manifest. This contains a Python dictionary with module metadata, including category, version, the modules it depends on, and a list of the data <a id="_idIndexMarker133"/>files that it will load. It contains important metadata about the add-on module and declares the data files that should <span class="No-Break">be loaded.</span></p>
			<p>In this recipe, we used a minimal manifest file, but in real modules, we will need other important keys. These are discussed in the next recipe, <em class="italic">Completing the add-on </em><span class="No-Break"><em class="italic">module manifest</em></span><span class="No-Break">.</span></p>
			<p>The module directory must be Python-importable, so it also needs to have an <strong class="source-inline">__init__.py</strong> file, even if it’s empty. To load a module, the Odoo server will import it. This will cause the code in the <strong class="source-inline">__init__.py</strong> file to be executed, so it works as an entry point to run the module Python code. Due to this, it will usually contain import statements to load the module Python files <span class="No-Break">and submodules.</span></p>
			<p>Known modules can be installed directly from the command line using the <strong class="source-inline">--init</strong> or <strong class="bold">-i</strong> option. For example, if you want to install the <strong class="source-inline">my_hostel</strong> app, you can use <strong class="bold">-i </strong><strong class="source-inline">my_hostel</strong>. This list is initially set when you create a new database from the modules found on the add-on path provided at that time. It can be updated in an existing database with the <strong class="bold">Update Module </strong><span class="No-Break"><strong class="bold">List</strong></span><span class="No-Break"> menu.</span></p>
			<h1 id="_idParaDest-91"><a id="_idTextAnchor091"/>Completing the add-on module manifest</h1>
			<p>The manifest is <a id="_idIndexMarker134"/>an important piece for <span class="No-Break">Odoo modules.</span></p>
			<h2 id="_idParaDest-92"><a id="_idTextAnchor092"/>Getting ready</h2>
			<p>We should have a module to work with, already containing a <strong class="source-inline">__manifest__.py</strong> manifest file. You may want to follow the previous recipe to provide such a module to <span class="No-Break">work with.</span></p>
			<h2 id="_idParaDest-93"><a id="_idTextAnchor093"/>How to do it...</h2>
			<p>We will add <a id="_idIndexMarker135"/>a manifest file and an icon to our <span class="No-Break">add-on module:</span></p>
			<ol>
				<li>To create a manifest file with the most relevant keys, edit the module’s <strong class="source-inline">__manifest__.py</strong> file so that it looks <span class="No-Break">like this:</span><pre class="source-code">
{
    'name': "Hostel Management",
    'summary': "Manage Hostel easily",
    'description': "Efficiently manage the entire residential facility in the school.", # Supports reStructuredText(RST) format (description is Deprecated),
    'author': "Your name",
    'website': "http://www.example.com",
    'category': 'Uncategorized',
    'version': '17.0.1.0.0',
    'depends': ['base'],
    'data': ['views/hostel.xml'],
    'assets': {
    'web.assets_backend': [
        'web/static/src/xml/**/*',
    ],
           },
     'demo': ['demo.xml'],
}</pre></li>				<li>To add an icon for the module, choose a PNG image to use and copy it <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">static/description/icon.png</strong></span><span class="No-Break">.</span></li>
			</ol>
			<h2 id="_idParaDest-94"><a id="_idTextAnchor094"/>How it works...</h2>
			<p>The content in <a id="_idIndexMarker136"/>the manifest file is a regular Python dictionary, with keys and values. The example manifest we used contains the most <span class="No-Break">relevant keys:</span></p>
			<ul>
				<li><strong class="source-inline">name</strong>: This is the title of <span class="No-Break">the module.</span></li>
				<li><strong class="source-inline">summary</strong>: This is the subtitle with a <span class="No-Break">one-line description.</span></li>
				<li><strong class="source-inline">description</strong>: This is a <a id="_idIndexMarker137"/>long description written in plaintext or <strong class="bold">ReStructuredText (RST)</strong> format. It is usually surrounded by triple quotes and is used in Python to delimit multiline texts. For an RST quick-start reference, <span class="No-Break">visit </span><a href="http://docutils.sourceforge.net/docs/user/rst/quickstart.html"><span class="No-Break">http://docutils.sourceforge.net/docs/user/rst/quickstart.html</span></a><span class="No-Break">.</span></li>
				<li><strong class="source-inline">author</strong>: This is a string with the name of the authors. When there is more than one, it is common practice to use a comma to separate their names, but note that it should still be a string, not a <span class="No-Break">Python list.</span></li>
				<li><strong class="source-inline">website</strong>: This is a URL people should visit to learn more about the module or <span class="No-Break">the authors.</span></li>
				<li><strong class="source-inline">category</strong>: This is used to organize modules by areas of interest. The list of the standard category names available can be seen at <a href="https://github.com/odoo/odoo/blob/17.0/odoo/addons/base/data/ir_module_category_data.xml">https://github.com/odoo/odoo/blob/17.0/odoo/addons/base/data/ir_module_category_data.xml</a>. However, it’s also possible to define other new category <span class="No-Break">names here.</span></li>
				<li><strong class="source-inline">version</strong>: This is the module’s version number. It can be used by the Odoo app store to detect newer versions of installed modules. If the version number does not begin with the Odoo target version (for example, <strong class="source-inline">17.0</strong>), it will be automatically added. Nevertheless, it will be more informative if you explicitly state the Odoo target version – for example, by using <strong class="source-inline">17.0.1.0.0</strong> or <strong class="source-inline">17.0.1.0</strong>, instead of <strong class="source-inline">1.0.0</strong> or <span class="No-Break"><strong class="source-inline">1.0</strong></span><span class="No-Break">, respectively.</span></li>
				<li><strong class="source-inline">depends</strong>: This is a list with the technical names of the modules it directly depends on. If your module does not depend on any other add-on module, then you should at least add a <strong class="source-inline">base</strong> module. Don’t forget to include any module defining XML IDs, views, or models that are referenced by this module. That will ensure that they all load in the correct order, avoiding <span class="No-Break">hard-to-debug errors.</span></li>
				<li><strong class="source-inline">data</strong>: This is a list of relative paths for the data files to load during module installation or upgrade. The paths are relative to the module <strong class="source-inline">root</strong> directory. Usually, these are XML and CSV files, but it’s also possible to have YAML data files. These are discussed in depth in <a href="B20997_06.xhtml#_idTextAnchor319"><span class="No-Break"><em class="italic">Chapter 6</em></span></a>, <em class="italic">Managing </em><span class="No-Break"><em class="italic">Module Data</em></span><span class="No-Break">.</span></li>
				<li><strong class="source-inline">demo</strong>: This is the list of relative paths to the files with demonstration data to load. These will only be loaded if the database was created with the <strong class="source-inline">Demo Data</strong> <span class="No-Break">flag enabled.</span></li>
			</ul>
			<p>The image that is used as the module icon is the PNG file <span class="No-Break">at </span><span class="No-Break"><strong class="source-inline">static/description/icon.png</strong></span><span class="No-Break">.</span></p>
			<p>Odoo is expected to have significant changes between major versions, so modules that have been <a id="_idIndexMarker138"/>built for one major version are not likely to be compatible with the next version without conversion and migration work. For this reason, it’s important to be sure about a module’s Odoo target version before <span class="No-Break">installing it.</span></p>
			<p>To ensure compatibility, we need to follow <span class="No-Break">these steps:</span></p>
			<ul>
				<li>Firstly, check whether the installation is successful. If it is, then proceed to check whether the module’s functionality <span class="No-Break">works properly.</span></li>
				<li>However, if the installation is not successful, you will then need to adjust the code and functional logic based on the errors you <span class="No-Break">are receiving.</span></li>
			</ul>
			<h2 id="_idParaDest-95"><a id="_idTextAnchor095"/>There’s more…</h2>
			<p>Instead of having a long description in the module manifest, it’s possible to have a separate <a id="_idIndexMarker139"/>description file. Since version 8.0, it can be replaced by a <strong class="source-inline">README</strong> file, with either a <strong class="source-inline">.txt</strong>, <strong class="source-inline">.rst</strong>, or a <strong class="source-inline">.md</strong> (markdown) extension. Otherwise, include a <strong class="source-inline">description/index.html</strong> file in <span class="No-Break">the module.</span></p>
			<p>This HTML description will override the description that’s defined in the <span class="No-Break">manifest file.</span></p>
			<p>There are a few more keys that are <span class="No-Break">frequently used:</span></p>
			<ul>
				<li><strong class="source-inline">licence</strong>: The default value is <strong class="source-inline">LGPL-3</strong>. This identifier is used for a license under the module that is made available. Other license possibilities include <strong class="source-inline">AGPL-3</strong>, <strong class="source-inline">Odoo Proprietary License v1.0</strong> (mostly used in paid apps), and <strong class="source-inline">Other OSI </strong><span class="No-Break"><strong class="source-inline">Approved Licence</strong></span><span class="No-Break">.</span></li>
				<li><strong class="source-inline">application</strong>: If this is <strong class="source-inline">True</strong>, the module is listed as an application. Usually, this is used for the central module of a <span class="No-Break">functional area.</span></li>
				<li><strong class="source-inline">auto_install</strong>: If this is <strong class="source-inline">True</strong>, it indicates that this is a <em class="italic">glue</em> module, which is automatically installed when all of its dependencies <span class="No-Break">are installed.</span></li>
				<li><strong class="source-inline">installable</strong>: If this is <strong class="source-inline">True</strong> (the default value), it indicates that the module is available <span class="No-Break">for installation.</span></li>
				<li><strong class="source-inline">external_dependencies</strong>: Some Odoo modules internally use <strong class="source-inline">Python/bin</strong> libraries. If your modules are using such libraries, you need to put them here. This will stop users from installing the module if the listed modules are not installed on the <span class="No-Break">host machine.</span></li>
				<li><strong class="source-inline">{pre_init, post_init, uninstall}_hook</strong>: This is a Python function hook that’s called during installation/uninstallation. For a more detailed example, refer to <a href="B20997_08.xhtml#_idTextAnchor388"><span class="No-Break"><em class="italic">Chapter 8</em></span></a>, <em class="italic">Advanced Server-Side </em><span class="No-Break"><em class="italic">Development Techniques.</em></span></li>
				<li><strong class="source-inline">Assets</strong>: A definition of how all static files are loaded in various asset bundles. Odoo assets are grouped by bundles. Each bundle (a list of file paths of specific types – <strong class="source-inline">xml</strong>, <strong class="source-inline">js</strong>, <strong class="source-inline">css</strong>, or <strong class="source-inline">scss</strong>) is listed in the <span class="No-Break">module manifest.</span></li>
			</ul>
			<p>There <a id="_idIndexMarker140"/>are a number of special keys that are used for app <span class="No-Break">store listing:</span></p>
			<ul>
				<li><strong class="source-inline">price</strong>: This key is used to set the price for your add-on module. The value of this key should be an integer value. If a price is not set, this means your app <span class="No-Break">is free.</span></li>
				<li><strong class="source-inline">currency</strong>: This is the currency for the price. Possible values are <strong class="source-inline">USD</strong> and <strong class="source-inline">EUR</strong>. The default value for this key <span class="No-Break">is </span><span class="No-Break"><strong class="source-inline">EUR</strong></span><span class="No-Break">.</span></li>
				<li><strong class="source-inline">live_test_url</strong>: If you want to provide a live test URL for your app, you can use this key to show the <strong class="source-inline">Live Preview</strong> button on the <span class="No-Break">app store.</span></li>
				<li><strong class="source-inline">iap</strong>: Set your IAP developer key if the module is used to provide an <span class="No-Break">IAP service.</span></li>
				<li><strong class="source-inline">images</strong>: This gives the path of images. This image will be used as a cover image in Odoo’s <span class="No-Break">app store.</span></li>
			</ul>
			<h1 id="_idParaDest-96"><a id="_idTextAnchor096"/>Organizing the add-on module file structure</h1>
			<p>An add-on module contains code files and other assets, such as XML files and images. For most <a id="_idIndexMarker141"/>of these files, we are free to choose where to place them inside the <span class="No-Break">module directory.</span></p>
			<p>However, Odoo uses some conventions on the module structure, so it is advisable to follow them. Proper code improves readability, eases maintenance, helps debugging, lowers complexity, and promotes reliability. These apply to every new module and all <span class="No-Break">new developments.</span></p>
			<h2 id="_idParaDest-97"><a id="_idTextAnchor097"/>Getting ready</h2>
			<p>We are expected to have an add-on module directory with only the <strong class="source-inline">__init__.py</strong> and <strong class="source-inline">__manifest__.py</strong> files. In this recipe, we assume this <span class="No-Break">is </span><span class="No-Break"><strong class="source-inline">local-addons/my_hostel</strong></span><span class="No-Break">.</span></p>
			<h2 id="_idParaDest-98"><a id="_idTextAnchor098"/>How to do it...</h2>
			<p>To create a basic skeleton for the add-on module, perform the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>Create directories for the <span class="No-Break">code files:</span><pre class="source-code">
<strong class="bold">$ cd local-addons/my_hostel</strong>
<strong class="bold">$ mkdir models</strong>
<strong class="bold">$ touch models/__init__.py</strong>
<strong class="bold">$ mkdir controllers</strong>
<strong class="bold">$ touch controllers/__init__.py</strong>
<strong class="bold">$ mkdir views</strong>
<strong class="bold">$ touch views/views.xml</strong>
<strong class="bold">$ mkdir security</strong>
<strong class="bold">$ mkdir wizards</strong>
<strong class="bold">$ touch wizards/__init__.py</strong>
<strong class="bold">$ mkdir reports</strong>
<strong class="bold">$ mkdir data</strong>
<strong class="bold">$ mkdir demo</strong>
<strong class="bold">$ mkdir i18n</strong></pre></li>				<li>Edit the <a id="_idIndexMarker142"/>module’s top <strong class="source-inline">__init__.py</strong> file so that the code in the subdirectories <span class="No-Break">is loaded:</span><pre class="source-code">
from . import models
from . import controllers
from . import wizards</pre></li>			</ol>
			<p>This should get us started with a structure containing the most frequently used directories, similar to <span class="No-Break">this one:</span></p>
			<pre class="console">
my_hostel
├── __init__.py
├── __manifest__.py
├── controllers
│   └── __init__.py
├── data
├── demo
├── i18n
├── models
│   └── __init__.py
├── security
├── static
│   ├── description
│   └── src
│       ├─ js
│       ├─ scss
│       ├─ css
│       └ xml
├── reports
├── wizards
│   └── __init__.py
└──views
   └── __init__.py</pre>			<h2 id="_idParaDest-99"><a id="_idTextAnchor099"/>How it works...</h2>
			<p>To provide <a id="_idIndexMarker143"/>some context, an Odoo add-on module can have three types <span class="No-Break">of files:</span></p>
			<ul>
				<li>The <em class="italic">Python code</em> is loaded by the <strong class="source-inline">__init__.py</strong> files, where the <strong class="source-inline">.py</strong> files and code s<a id="_idIndexMarker144"/>ubdirectories are imported. Subdirectories containing Python code, in turn, need their own <span class="No-Break"><strong class="source-inline">__init__.py </strong></span><span class="No-Break">file.</span></li>
				<li><em class="italic">Data files</em> that are to <a id="_idIndexMarker145"/>be declared in the <strong class="source-inline">data</strong> and <strong class="source-inline">demo</strong> keys of the <strong class="source-inline">__manifest__.py</strong> module manifest in order to be loaded are usually XML and CSV files for the user interface, fixture data, and demonstration data. There may also be YAML files, which can include some procedural instructions that are run when the module is loaded – for instance, to generate or update records programmatically rather than statically in an <span class="No-Break">XML file.</span></li>
				<li><em class="italic">Web assets</em>, such as JavaScript code and libraries, CSS, SASS, and QWeb/HTML templates, are files <a id="_idIndexMarker146"/>that are used to build UI parts and manage user actions in those UI elements. These are declared through a manifest on assets key that includes new files with existing files, which adds these assets to the web client, widgets, or <span class="No-Break">website pages.</span></li>
			</ul>
			<p>The add-on <a id="_idIndexMarker147"/>files are organized into the <span class="No-Break">following directories:</span></p>
			<ul>
				<li><strong class="source-inline">models/</strong> contains the backend code files, thus creating the models and their business logic. One file per model is recommended with the same name as the model – for example, <strong class="source-inline">hostel.py</strong> for the <strong class="source-inline">hostel.hostel</strong> model. These are addressed in depth in <a href="B20997_04.xhtml#_idTextAnchor118"><span class="No-Break"><em class="italic">Chapter 4</em></span></a>, <span class="No-Break"><em class="italic">Application Models</em></span><span class="No-Break">.</span></li>
				<li><strong class="source-inline">views/</strong> contains the XML files for the user interface, with the actions, forms, lists, and so on. Like models, it is advised to have one file per model. Filenames for website templates are expected to end with the <strong class="source-inline">_template</strong> suffix. Backend views are explained in <a href="B20997_09.xhtml#_idTextAnchor446"><span class="No-Break"><em class="italic">Chapter 9</em></span></a>, <em class="italic">Backend Views</em>, and website views are addressed in <a href="B20997_14.xhtml#_idTextAnchor734"><span class="No-Break"><em class="italic">Chapter 14</em></span></a>, <em class="italic">CMS </em><span class="No-Break"><em class="italic">Website Development</em></span><span class="No-Break">.</span></li>
				<li><strong class="source-inline">data/</strong> contains other data files with the module’s initial data. Data files are explained in <a href="B20997_06.xhtml#_idTextAnchor319"><span class="No-Break"><em class="italic">Chapter 6</em></span></a>, <em class="italic">Managing </em><span class="No-Break"><em class="italic">Module Data</em></span><span class="No-Break">.</span></li>
				<li><strong class="source-inline">demo/</strong> contains data files with demonstration data, which is useful for tests, training, or <span class="No-Break">module evaluation.</span></li>
				<li><strong class="source-inline">i18n/</strong> is where Odoo will look for the translation <strong class="source-inline">.pot</strong> and <strong class="source-inline">.po</strong> files. Refer to <a href="B20997_11.xhtml#_idTextAnchor595"><span class="No-Break"><em class="italic">Chapter 11</em></span></a>, <em class="italic">Internationalization</em>, for further details. These files don’t need to be mentioned in the <span class="No-Break">manifest file.</span></li>
				<li><strong class="source-inline">security/</strong> contains the data files that define access control lists, which is usually an <strong class="source-inline">ir.model.access.csv</strong> file and, possibly, an XML file to define access <em class="italic">groups and record rules</em> for row-level security. Take a look at <a href="B20997_10.xhtml#_idTextAnchor549"><span class="No-Break"><em class="italic">Chapter 10</em></span></a>, <em class="italic">Security Access</em>, for more details <span class="No-Break">on this.</span></li>
				<li><strong class="source-inline">controllers/</strong> contains the code files for the website controllers and for modules providing that kind of feature. Web controllers are covered in <a href="B20997_13.xhtml#_idTextAnchor697"><span class="No-Break"><em class="italic">Chapter 13</em></span></a>, <em class="italic">Web </em><span class="No-Break"><em class="italic">Server Development</em></span><span class="No-Break">.</span></li>
				<li><strong class="source-inline">static/</strong> is where all web assets are expected to be placed. Unlike other directories, this directory name is not just a convention. The files inside this directory are <a id="_idIndexMarker148"/>public and can be accessed without a user login. This directory mostly contains files such as JavaScript, style sheets, and images. They don’t need to be mentioned in the module manifest but will have to be referred to in the web template. This is discussed in detail in <a href="B20997_14.xhtml#_idTextAnchor734"><span class="No-Break"><em class="italic">Chapter 14</em></span></a>, <em class="italic">CMS </em><span class="No-Break"><em class="italic">Website Development</em></span><span class="No-Break">.</span></li>
				<li><strong class="source-inline">wizards/</strong> contains all of the files related to wizards. In Odoo, wizards are used to hold intermediate data. We learn more about wizards in <a href="B20997_08.xhtml#_idTextAnchor388"><span class="No-Break"><em class="italic">Chapter 8</em></span></a>, <em class="italic">Advanced Server-Side </em><span class="No-Break"><em class="italic">Development Techniques</em></span><span class="No-Break">.</span></li>
				<li><strong class="source-inline">reports/</strong>: Odoo provides a feature to generate PDF documents such as sales orders and invoices. This directory holds all the files related to PDF reports. We will learn more about PDF reports in <a href="B20997_12.xhtml#_idTextAnchor628"><span class="No-Break"><em class="italic">Chapter 12</em></span></a>, <em class="italic">Automation, Workflows, Emails, </em><span class="No-Break"><em class="italic">and Printing</em></span><span class="No-Break">.</span></li>
			</ul>
			<p>When adding new files to a module, don’t forget to declare them either in the <strong class="source-inline">__manifest__.py</strong> file (for data files) or <strong class="source-inline">__init__.py</strong> file (for code files); otherwise, those files will be ignored and won’t <span class="No-Break">be loaded.</span></p>
			<h1 id="_idParaDest-100"><a id="_idTextAnchor100"/>Adding models</h1>
			<p>Models define the data structures that will be used by our business applications. This recipe shows <a id="_idIndexMarker149"/>you how to add a basic model to a module. Models determine the logical structure of a database and how data is stored, organized, and manipulated. In other words, a model is a table of information that can be linked with other tables. A model usually represents a business concept, such as a sales order, contact, <span class="No-Break">or product.</span></p>
			<p>Modules contain various elements, such as models, views, data files, web controllers, and static <span class="No-Break">web data.</span></p>
			<p>To create a hostel module, we need to develop a model that represents <span class="No-Break">the hostel.</span></p>
			<h2 id="_idParaDest-101"><a id="_idTextAnchor101"/>Getting ready</h2>
			<p>We should have a module to work with. If you followed the first recipe in this chapter, <em class="italic">Creating and installing a new add-on module</em>, you will have an empty module called <strong class="source-inline">my_hostel</strong>. We will use that for <span class="No-Break">our explanation.</span></p>
			<h2 id="_idParaDest-102"><a id="_idTextAnchor102"/>How to do it...</h2>
			<p>To add a new <strong class="source-inline">Model</strong>, we need to add a Python file describing it and then upgrade the add-on module (or install it, if this has not already been done). The paths that are used are relative to our add-on module’s location (for <span class="No-Break">example, </span><span class="No-Break"><strong class="source-inline">~/odoo-dev/local-addons/my_hostel/</strong></span><span class="No-Break">):</span></p>
			<ol>
				<li>Add a Python file to the <strong class="source-inline">models/hostel.py</strong> module with the <span class="No-Break">following code:</span><pre class="source-code">
from odoo import fields, models
class Hostel(models.Model):
    _name = 'hostel.hostel'
    _description = "Information about hostel"
    name = fields.Char(string="Hostel Name", required=True)
    hostel_code = fields.Char(string="Code", required=True)
    street = fields.Char('Street')
    street2 = fields.Char('Street2')
    state_id = fields.Many2one("res.country.state", string="State")</pre></li>				<li>Add a Python initialization file with code files to be loaded by the <strong class="source-inline">models/__init__.py</strong> module with the <span class="No-Break">following code:</span><pre class="source-code">
from . import hostel</pre></li>				<li>Edit the <a id="_idIndexMarker150"/>module’s Python initialization file to have the module load the <span class="No-Break"><strong class="source-inline">models/</strong></span><span class="No-Break"> directory:</span><pre class="source-code">
from . import models</pre></li>				<li>Upgrade the Odoo module from the command line or the <strong class="bold">Apps</strong> menu in the user interface. If you look closely at the server log while upgrading the module, you should see the <span class="No-Break">following line:</span><pre class="source-code">
<strong class="bold">odoo.modules.registry: module my_hostel: creating or updating database table</strong></pre></li>			</ol>
			<p>After this, the new <strong class="source-inline">hostel.hostel</strong> model should be available in our Odoo instance. There are two ways to check whether our model has been added to <span class="No-Break">the database.</span></p>
			<p>First, you can check it in the Odoo user interface. Activate the developer tools and open the menu at <strong class="bold">Settings</strong> | <strong class="bold">Technical</strong> | <strong class="bold">Database Structure</strong> | <strong class="bold">Models</strong>. Search for the <strong class="source-inline">hostel.hostel</strong> <span class="No-Break">model here.</span></p>
			<p>The second way is to check the table entry in your PostgreSQL database. You can search for the <strong class="source-inline">hostel_hostel</strong> table in the database. In the following code example, we used <strong class="source-inline">test-17.0</strong> as our database. However, you can replace your database name with the <span class="No-Break">following command:</span></p>
			<pre class="console">
$ psql test-17.0
test-17.0# \d hostel_hostel;</pre>			<h2 id="_idParaDest-103"><a id="_idTextAnchor103"/>How it works...</h2>
			<p>Our first step was to create a Python file where our new module <span class="No-Break">was created.</span></p>
			<p>The Odoo <a id="_idIndexMarker151"/>framework has its own <strong class="bold">Object Relational Mapping</strong> (<strong class="bold">ORM</strong>) framework. This <strong class="source-inline">ORM</strong> framework provides an abstraction over the PostgreSQL database. By inheriting the Odoo Python <strong class="source-inline">Model</strong> class, we can create our own model (table). When a new model is defined, it is also added to a central model registry. This makes it easier for other modules to make modifications to <span class="No-Break">it later.</span></p>
			<p>Models have a few <a id="_idIndexMarker152"/>generic attributes prefixed with an underscore. The most important one is <strong class="source-inline">_name</strong>, which provides a unique internal identifier that will be used throughout the Odoo instance. The ORM framework will generate the database table based on this attribute. In our recipe, we used <strong class="source-inline">_name = 'hostel.hostel'</strong>. Based on this attribute, the ORM framework will create a new table called <strong class="source-inline">hostel_hostel</strong>. Note that the ORM framework will create a table name by replacing it. with <strong class="source-inline">_</strong> in the value of the <strong class="source-inline">_name</strong> attribute. <strong class="source-inline">_description</strong> which provides a model’s informal name, we used <strong class="source-inline">_name = 'hostel.hostel'</strong> and <strong class="source-inline">_description='Information about hostel'</strong>, and <strong class="source-inline">_description='Information about hostel'</strong> only starts with an alphabetical character we can’t start with a number or special <span class="No-Break">symbol character.</span></p>
			<p>The <strong class="source-inline">model</strong> fields are defined as class attributes. We began by defining the <strong class="source-inline">name</strong> field of the <strong class="source-inline">Char</strong> type. It is convenient for models to have this field because, by default, it is used as the record description when referenced by <span class="No-Break">other models.</span></p>
			<p>We also used an example of a relational field – <strong class="source-inline">state_id</strong>. This defines a many-to-one relationship between <strong class="source-inline">Hostel</strong> <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">State</strong></span><span class="No-Break">.</span></p>
			<p>There’s much more to say about models, and they will be covered in depth in <a href="B20997_04.xhtml#_idTextAnchor118"><span class="No-Break"><em class="italic">Chapter 4</em></span></a>, <span class="No-Break"><em class="italic">Application Models</em></span><span class="No-Break">.</span></p>
			<p>Next, we must make our module aware of this new Python file. This is done by the <strong class="source-inline">__init__.py</strong> files. Since we placed the code inside the <strong class="source-inline">models/</strong> subdirectory, we need the previous <strong class="source-inline">__init__</strong> file to import that directory, which should, in turn, contain another <strong class="source-inline">__init__</strong> file, importing each of the code files there (just one, in <span class="No-Break">our case).</span></p>
			<p>Changes to Odoo models are activated by upgrading the module. The Odoo server will handle the translation of the <strong class="source-inline">model</strong> class into database <span class="No-Break">structure changes.</span></p>
			<p>Although no example <a id="_idIndexMarker153"/>is provided here, business logic can also be added to these Python files, either by adding new methods to the model’s class or by extending the existing methods, such as <strong class="source-inline">create()</strong> or <strong class="source-inline">write()</strong>. This is addressed in <a href="B20997_05.xhtml#_idTextAnchor238"><span class="No-Break"><em class="italic">Chapter 5</em></span></a>, <em class="italic">Basic </em><span class="No-Break"><em class="italic">Server-Side Development</em></span><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-104"><a id="_idTextAnchor104"/>Adding access security</h1>
			<p>When adding a new data model, you need to define who can create, read, update, and delete records. When creating a totally new application, this can involve defining new user groups. Consequently, if a user doesn’t have these access rights, then Odoo will not display your <a id="_idIndexMarker154"/>menus and views. In the previous recipe, we accessed our menu by converting an <strong class="source-inline">admin</strong> user into a superuser. After completing this recipe, you will be able to access menus and views for the <strong class="source-inline">Hostel</strong> module directly as an <span class="No-Break"><strong class="source-inline">admin</strong></span><span class="No-Break"> user.</span></p>
			<p>This recipe builds on the <strong class="source-inline">Hostel</strong> model from the previous recipes and defines a new security group of users to control who can access or modify the records <span class="No-Break">of </span><span class="No-Break"><strong class="source-inline">Hostel</strong></span><span class="No-Break">.</span></p>
			<h2 id="_idParaDest-105"><a id="_idTextAnchor105"/>Getting ready</h2>
			<p>The add-on module that implements the <strong class="source-inline">hostel.hostel</strong> model, which was provided in the previous recipe, is needed because, in this recipe, we will add the security rules for it. The paths that are used are relative to our add-on module location (for <span class="No-Break">example, </span><span class="No-Break"><strong class="source-inline">~/odoo-dev/local-addons/my_hostel/</strong></span><span class="No-Break">).</span></p>
			<h2 id="_idParaDest-106"><a id="_idTextAnchor106"/>How to do it...</h2>
			<p>The security rules we want to add to this recipe are <span class="No-Break">as follows:</span></p>
			<ul>
				<li>Everyone will be able to read <span class="No-Break">hostel records.</span></li>
				<li>A new group <a id="_idIndexMarker155"/>of users called <strong class="bold">Hostel Manager</strong> will have the right to create, read, update, and delete <span class="No-Break">hostel records.</span></li>
			</ul>
			<p>To implement this, you need to perform the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>Create a <a id="_idIndexMarker156"/>file called <strong class="source-inline">security/hostel_security.xml</strong> with the <span class="No-Break">following content:</span><pre class="source-code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;odoo&gt;
&lt;record id="module_category_hostel" model="ir.module.category"&gt;
    &lt;field name="name"&gt;Hostel Management&lt;/field&gt;
    &lt;field name="sequence"&gt;31&lt;/field&gt;
&lt;/record&gt;
&lt;record id="group_hostel_manager" model="res.groups"&gt;
    &lt;field name="name"&gt;Hostel Manager&lt;/field&gt;
    &lt;field name="category_id" ref="module_category_hostel"/&gt;
    &lt;field name="users" eval="[(4, ref('base.user_root')),(4, ref('base.user_admin'))]"/&gt;
&lt;/record&gt;
&lt;record id="group_hostel_user" model="res.groups"&gt;
    &lt;field name="name"&gt;Hostel User&lt;/field&gt;
    &lt;field name="category_id" ref="module_category_hostel"/&gt;
&lt;/record&gt;
&lt;/odoo&gt;</pre></li>				<li>Add a file called <strong class="source-inline">security/ir.model.access.csv</strong> with the <span class="No-Break">following content:</span><pre class="source-code">
id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink
access_hostel_manager_id,access.hostel.manager,my_hostel.model_hostel_hostel,my_hostel.group_hostel_manager,1,1,1,1
access_hostel_user_id,access.hostel.user,my_hostel.model_hostel_hostel,my_hostel.group_hostel_user,1,0,0,0</pre></li>				<li>Add both <a id="_idIndexMarker157"/>files to the <strong class="source-inline">data</strong> entry <span class="No-Break">of </span><span class="No-Break"><strong class="source-inline">__manifest__.py</strong></span><span class="No-Break">:</span><pre class="source-code">
# ...
"data": [
    "security/hostel_security.xml",
    "security/ir.model.access.csv",
    "views/hostel.xml",
],
# ...</pre></li>			</ol>
			<p>The newly defined security rules will be in place once you update the add-on in <span class="No-Break">your instance.</span></p>
			<h2 id="_idParaDest-107"><a id="_idTextAnchor107"/>How it works…</h2>
			<p>We provide two new data files that we add to the add-on module’s manifest so that installing or updating the module will load them in <span class="No-Break">the database:</span></p>
			<ul>
				<li>The <strong class="source-inline">security/hostel_security.xml</strong> file defines a new security group by creating a <strong class="source-inline">res.groups</strong> record. We also gave Hostel Manager rights to the <strong class="source-inline">admin</strong> user by using its reference ID, <strong class="source-inline">base.user_admin</strong>, so that the admin user will have rights to the <span class="No-Break"><strong class="source-inline">hostel.hostel</strong></span><span class="No-Break"> model.</span></li>
				<li>The <strong class="source-inline">ir.model.access.csv</strong> file associates permissions on models with groups. The first line has an empty <strong class="source-inline">group_id:id</strong> column, which means that the rule applies to everyone. The last line gives all privileges to members of the group we <span class="No-Break">just created.</span></li>
			</ul>
			<p>The order of the files in the data section of the manifest is important. The file for creating the security groups must be loaded before the file listing the access rights, as the access rights <a id="_idIndexMarker158"/>definition depends on the existence of the groups. Since the views can be specific to a security group, we recommend putting the group’s definition file in the list to be o<a id="_idTextAnchor108"/>n the <span class="No-Break">safe side.</span></p>
			<h2 id="_idParaDest-108"><a id="_idTextAnchor109"/>See also</h2>
			<p>This book has a chapter dedicated to security. For more information on security, refer to <span class="No-Break"><em class="italic">Chapter 10</em></span>, <span class="No-Break"><em class="italic">Security Access</em></span><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-109"><a id="_idTextAnchor110"/>Adding menu items and views</h1>
			<p>Once we have models for our data structure needs, we want a user interface so that our users can interact with them. Menus and views play a crucial role in structuring and enhancing the <a id="_idIndexMarker159"/>user experience. Menus, from a technical perspective, are dynamic user interface components that present a structured set of options or links, typically <a id="_idIndexMarker160"/>allowing users to access various features, functions, or content areas within an application. This recipe builds on the <strong class="source-inline">Hostel</strong> model from the previous recipe and adds a menu item to display a user interface, featuring list and <span class="No-Break">form views.</span></p>
			<h2 id="_idParaDest-110"><a id="_idTextAnchor111"/>Getting ready</h2>
			<p>The add-on module to implement the <strong class="source-inline">hostel.hostel</strong> model, which was provided in the previous recipe, is needed. The paths that will be used are relative to our add-on module location (for <span class="No-Break">example, </span><span class="No-Break"><strong class="source-inline">~/odoo-dev/local-addons/my_hostel/</strong></span><span class="No-Break">).</span></p>
			<h2 id="_idParaDest-111"><a id="_idTextAnchor112"/>How to do it...</h2>
			<p>To add a view, we will add an XML file with its definition to the module. Since it is a new model, we must also add a menu option for the user to be able to <span class="No-Break">access it.</span></p>
			<p>For models, XML files adding views folder to create a view, action, and <span class="No-Break">menu item.</span></p>
			<p>Be aware that the sequence of the following steps is relevant, since some of them use references to IDs that were defined in the <span class="No-Break">preceding steps:</span></p>
			<ol>
				<li>Create the XML file to add the data records describing the user <span class="No-Break">interface, </span><span class="No-Break"><strong class="source-inline">views/hostel.xml</strong></span><span class="No-Break">:</span><pre class="source-code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;odoo&gt;
&lt;!-- Data records go here --&gt;
&lt;/odoo&gt;</pre></li>				<li>Add the new <a id="_idIndexMarker161"/>data file to the add-on module manifest, <strong class="source-inline">__manifest__.py</strong>, by adding it <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">views/hostel.xml</strong></span><span class="No-Break">:</span><pre class="source-code">
{
    "name": "Hostel Management",
    "summary": "Manage Hostel easily",
    "depends": ["base"],
    "data": ["views/hostel.xml"],
}</pre></li>				<li>Add the <a id="_idIndexMarker162"/>action that opens the views in the <span class="No-Break"><strong class="source-inline">hostel.xml</strong></span><span class="No-Break"> file:</span><pre class="source-code">
&lt;record id="action_hostel" model="ir.actions.act_window"&gt;
        &lt;field name="name"&gt;Hostel&lt;/field&gt;
        &lt;field name="type"&gt;ir.actions.act_window&lt;/field&gt;
        &lt;field name="res_model"&gt;hostel.hostel&lt;/field&gt;
        &lt;field name="view_mode"&gt;tree,form&lt;/field&gt;
        &lt;field name="help" type="html"&gt;
            &lt;p class="oe_view_nocontent_create"&gt;
                Create Hostel.
            &lt;/p&gt;
        &lt;/field&gt;
    &lt;/record&gt;</pre></li>				<li>Add the menu items to the <strong class="source-inline">hostel.xml</strong> file, making it visible <span class="No-Break">to users:</span><pre class="source-code">
&lt;menuitem id="hostel_main_menu" name="Hostel" sequence="1"/&gt;
&lt;menuitem id="hostel_type_menu" name="Hostel" parent="hostel_main_menu" action="my_hostel.action_hostel" groups="my_hostel.group_hostel_manager" sequence="1"/&gt;</pre></li>				<li>Add a <a id="_idIndexMarker163"/>custom <a id="_idIndexMarker164"/>form view to the <span class="No-Break">hostel.xml file:</span><pre class="source-code">
&lt;record id="view_hostel_form_view" model="ir.ui.view"&gt;
        &lt;field name="name"&gt;hostel.hostel.form.view&lt;/field&gt;
        &lt;field name="model"&gt;hostel.hostel&lt;/field&gt;
        &lt;field name="arch" type="xml"&gt;
            &lt;form string="Hostel"&gt;
                &lt;sheet&gt;
                    &lt;div class="oe_title"&gt;
                        &lt;h3&gt;
                            &lt;table&gt;
                                &lt;tr&gt;
                                    &lt;td style="padding-
                                    right:10px;"&gt;
                                    &lt;field name="name" 
                                    required="1" 
                                    placeholder="Name" /&gt;
                                  &lt;/td&gt;
                                    &lt;td style="padding-
                                    right:10px;"&gt;
                                    &lt;field name="hostel_code" 
                                    placeholder="Code" /&gt;
                                        &lt;/td&gt;
                                &lt;/tr&gt;
                            &lt;/table&gt;
                        &lt;/h3&gt;
                    &lt;/div&gt;
                    &lt;group&gt;
                        &lt;group&gt;
                            &lt;label for="street" 
                            string="Address"/&gt;
                            &lt;div class="o_address_format"&gt;
                                &lt;field name="street" 
                                placeholder="Street..." 
                                class="o_address_street"/&gt;
                                &lt;field name="street2" 
                                placeholder="Street 2..." 
                                class="o_address_street"/&gt;
                            &lt;/div&gt;
                        &lt;/group&gt;
                    &lt;/group&gt;
                &lt;/sheet&gt;
            &lt;/form&gt;
        &lt;/field&gt;
    &lt;/record&gt;</pre></li>				<li>Add a custom <a id="_idIndexMarker165"/>tree (list) view to the <span class="No-Break"><strong class="source-inline">hostel.xml</strong></span><span class="No-Break"> file:</span><pre class="source-code">
&lt;record id="view_hostel_tree_view" model="ir.ui.view"&gt;
        &lt;field    name="name"&gt;hostel.hostel.tree.view&lt;/field&gt;
        &lt;field name="model"&gt;hostel.hostel&lt;/field&gt;
        &lt;field name="arch" type="xml"&gt;
            &lt;tree&gt;
                &lt;field name="name"/&gt;
                &lt;field name="hostel_code"/&gt;
            &lt;/tree&gt;
        &lt;/field&gt;
&lt;/record&gt;</pre></li>				<li>Add custom <strong class="bold">Search</strong> options to <a id="_idIndexMarker166"/>the <span class="No-Break"><strong class="source-inline">hostel.xml</strong></span><span class="No-Break"> file:</span><pre class="source-code">
&lt;record id="view_hostel_search_view" model="ir.ui.view"&gt;
    &lt;field name="name"&gt;Hostel Search&lt;/field&gt;
    &lt;field name="model"&gt;hostel.hostel&lt;/field&gt;
    &lt;field name="arch" type="xml"&gt;
        &lt;search&gt;
            &lt;field name="name"/&gt;
            &lt;field name="hostel_code"/&gt;
        &lt;/search&gt;
    &lt;/field&gt;
&lt;/record&gt;</pre></li>			</ol>
			<p>When a new model is added in Odoo, the user doesn’t have any access rights by default. We must define access rights for the new model in order to get access. In our example, we haven’t defined <a id="_idIndexMarker167"/>any access rights, so the user doesn’t have access <a id="_idIndexMarker168"/>to our new model. Without access, our menus and views are not visible either. Luckily, there is one shortcut! By switching to superuser mode, you can see menus for our app without having <span class="No-Break">access rights.</span></p>
			<h3>Accessing Odoo as a superuser</h3>
			<p>By converting the <strong class="source-inline">admin</strong> user into a <strong class="source-inline">superuser</strong> type, you can bypass the access rights and, therefore, access <a id="_idIndexMarker169"/>menus and views without giving default access rights. To convert the <strong class="source-inline">admin</strong> user into a superuser, activate <strong class="bold">Developer Mode</strong>. After doing this, from the developer tool options, click on the <strong class="bold">Become </strong><span class="No-Break"><strong class="bold">Superuser</strong></span><span class="No-Break"> option.</span></p>
			<p>As a developer preference, try everything without becoming a superuser; it will be very helpful to learn Odoo in depth. By becoming a Superuser, all security access and record rule checks will <span class="No-Break">be bypassed.</span></p>
			<p>The following screenshot has been provided as <span class="No-Break">a reference:</span></p>
			<div>
				<div id="_idContainer033" class="IMG---Figure">
					<img src="image/B20997_03_3.jpg" alt="Figure 3.3 – The option to activate superuser mode"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.3 – The option to activate superuser mode</p>
			<p>After becoming a superuser, your menu will have a striped background, as shown in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer034" class="IMG---Figure">
					<img src="image/B20997_03_4.jpg" alt="Figure 3.4 – Superuser mode activated"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.4 – Superuser mode activated</p>
			<p>If you try and upgrade <a id="_idIndexMarker170"/>the module now, you should be able to see a new menu option (you might need to refresh your web browser). Clicking on the <strong class="bold">Hostel</strong> menu will open a list view for hostel models, as shown in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer035" class="IMG---Figure">
					<img src="image/B20997_03_5.jpg" alt="Figure 3.5 – The menu to access Hostel"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.5 – The menu to access Hostel</p>
			<h2 id="_idParaDest-112"><a id="_idTextAnchor113"/>How it works...</h2>
			<p>At a low level, the user <a id="_idIndexMarker171"/>interface is defined by records stored in special <a id="_idIndexMarker172"/>models. The first two steps create an empty XML file to define the records to be loaded, and then we add them to the module’s list of data files to <span class="No-Break">be installed.</span></p>
			<p>Data files can be placed anywhere inside the module directory, but the convention is for the user interface to be defined inside a <strong class="source-inline">views/</strong> subdirectory. Usually, the name of these files is based on the name of the model. In our case, we create the user interface for the <strong class="source-inline">hostel.hostel</strong> model, so we created the <span class="No-Break"><strong class="source-inline">views/hostel.xml</strong></span><span class="No-Break"> file.</span></p>
			<p>The next step is to define a window action to display the user interface in the main area of the web client. The action has a target model defined by <strong class="source-inline">res_model</strong>, and the <strong class="source-inline">name</strong> attribute is used to display the title to the user when the user opens the action. These are just the basic attributes. The window action supports additional attributes, giving much <a id="_idIndexMarker173"/>more control over how the views are rendered, such as <a id="_idIndexMarker174"/>what views are to be displayed, adding filters on the records that are available, or setting default values. These are discussed in detail in <a href="B20997_09.xhtml#_idTextAnchor446"><span class="No-Break"><em class="italic">Chapter 9</em></span></a>, <span class="No-Break"><em class="italic">Backend Views</em></span><span class="No-Break">.</span></p>
			<p>In general, data records are defined using a <strong class="source-inline">&lt;record&gt;</strong> tag, and we created a record for the <strong class="source-inline">ir.actions.act_window</strong> model in our example. This will create the <span class="No-Break">window actions.</span></p>
			<p>Similarly, menu items are stored in the <strong class="source-inline">ir.ui.menu</strong> model, and we can create these with the <strong class="source-inline">&lt;record&gt;</strong> tag. However, there is a shortcut tag called <strong class="source-inline">&lt;menuitem&gt;</strong> available in Odoo, so we used this in <span class="No-Break">our example.</span></p>
			<p>These are <a id="_idIndexMarker175"/>the menu item’s <span class="No-Break">main attributes:</span></p>
			<ul>
				<li><strong class="source-inline">name</strong>: This is the menu item text to <span class="No-Break">be displayed.</span></li>
				<li><strong class="source-inline">action</strong>: This is the identifier of the action to be executed. We use the ID of the window action we created in the <span class="No-Break">previous step.</span></li>
				<li><strong class="source-inline">sequence</strong>: This is used to set the order in which the menu items of the same level <span class="No-Break">are presented.</span></li>
				<li><strong class="source-inline">parent</strong>: This is the identifier for the parent menu item. Our example menu item had no parent, meaning that it would be displayed at the top of <span class="No-Break">the menu.</span></li>
				<li><strong class="source-inline">web_icon</strong>: This attribute is used to show the icon for the menu. This icon is only displayed in the Odoo <span class="No-Break">Enterprise edition.</span></li>
			</ul>
			<p>At this point, we haven’t defined any of the views in our module. However, if you upgrade your module at this stage, Odoo will automatically create them on the fly. Nevertheless, we will surely want to control how our views look, so in the next two steps, a form and a tree view <span class="No-Break">are created.</span></p>
			<p>Both views <a id="_idIndexMarker176"/>are defined with a record on the <strong class="source-inline">ir.ui.view</strong> model. The attributes we used are <span class="No-Break">as follows:</span></p>
			<ul>
				<li><strong class="source-inline">name</strong>: This is a title identifying the view. In the source code of Odoo, you will find the XML ID repeated here, but if you want, you can add a more human-readable title as <span class="No-Break">a name.</span></li>
				<li>If the <strong class="source-inline">name</strong> field is omitted, Odoo will generate one using the model name and the type of view. This is perfectly fine for the standard view of a new model. It is recommended to have a more explicit name when you extend a view, as this will make your life easier when you look for a specific view in the user interface <span class="No-Break">of Odoo.</span></li>
				<li><strong class="source-inline">model</strong>: This is the internal identifier of the target model, as defined in its <span class="No-Break"><strong class="source-inline">_name</strong></span><span class="No-Break"> attribute.</span></li>
				<li><strong class="source-inline">arch</strong>: This is the view architecture, where its structure is actually defined. This is where different types of views differ from <span class="No-Break">each other.</span></li>
			</ul>
			<p>Form views are defined with a top <strong class="source-inline">&lt;form&gt;</strong> element, and its canvas is a two-column grid. Inside the form, <strong class="source-inline">&lt;group&gt;</strong> elements are used to vertically compose fields. Two groups result in two columns with fields, which are added using the <strong class="source-inline">&lt;field&gt;</strong> element. Fields use a default widget according to their data type, but a specific widget can be used with the help of the <span class="No-Break"><strong class="source-inline">widget</strong></span><span class="No-Break"> attribute.</span></p>
			<p>Tree views are simpler; they are defined with a top <strong class="source-inline">&lt;tree&gt;</strong> element that contains <strong class="source-inline">&lt;field&gt;</strong> elements for the columns to <span class="No-Break">be displayed.</span></p>
			<p>Finally, we added a <strong class="bold">Search</strong> view to expand the search option in the box at the top-right. Inside the <strong class="source-inline">&lt;search&gt;</strong> top-level tag, we can have  the <strong class="source-inline">&lt;field&gt;</strong> and <strong class="source-inline">&lt;filter&gt;</strong> elements. Field elements are additional fields that can be searched from the input given in the search view. Filter elements are predefined filter conditions that can be activated with a click. These subjects are discussed in detail in <a href="B20997_09.xhtml#_idTextAnchor446"><span class="No-Break"><em class="italic">Chapter 9</em></span></a>, <span class="No-Break"><em class="italic">Backend Views</em></span><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-113"><a id="_idTextAnchor114"/>Using the scaffold command to create a module</h1>
			<p>When creating a new Odoo module, there is some boilerplate code that needs to be set up. To help <a id="_idIndexMarker177"/>quick-start new modules, Odoo provides the <span class="No-Break"><strong class="source-inline">scaffold</strong></span><span class="No-Break"> command.</span></p>
			<p>This recipe shows you how to create a new module using the <strong class="source-inline">scaffold</strong> command, which will put in place a skeleton of the file for directories <span class="No-Break">to use.</span></p>
			<h2 id="_idParaDest-114"><a id="_idTextAnchor115"/>Getting ready</h2>
			<p>We will create the new add-on module in a custom module directory, so we need Odoo installed and a directory for our custom modules. We will assume that Odoo is installed at <strong class="source-inline">~/odoo-dev/odoo</strong> and that our custom modules will be placed in the <strong class="source-inline">~/</strong><span class="No-Break"><strong class="source-inline">odoo-dev/local-addons</strong></span><span class="No-Break"> directory.</span></p>
			<h2 id="_idParaDest-115"><a id="_idTextAnchor116"/>How to do it...</h2>
			<p>We will use the <strong class="source-inline">scaffold</strong> command to create boilerplate code. Perform the following steps to create new a module using the <span class="No-Break"><strong class="source-inline">scaffold</strong></span><span class="No-Break"> command:</span></p>
			<ol>
				<li>Change the working directory to where we will want our module to be. This can be whatever directory you choose, but it needs to be within an add-on path to be useful. Following the directory choices that we used in the previous recipe, this should be <span class="No-Break">as follows:</span><pre class="source-code">
<strong class="bold">$ cd ~/odoo-dev/local-addons</strong></pre></li>				<li>Choose a technical name for the new module, and use the <strong class="source-inline">scaffold</strong> command to create it. For our example, we will <span class="No-Break">choose </span><span class="No-Break"><strong class="source-inline">my_module</strong></span><span class="No-Break">:</span><pre class="source-code">
<strong class="bold">$ ~/odoo-dev/odoo/odoo-bin scaffold my_module</strong></pre></li>				<li>Edit the <strong class="source-inline">__manifest__.py</strong> default module manifest provided and change the relevant values. You will surely want to at least change the module title in the <span class="No-Break"><strong class="source-inline">name</strong></span><span class="No-Break"> key.</span></li>
			</ol>
			<p>This is what the generated add-on module should <span class="No-Break">look like:</span></p>
			<pre class="console">
$ tree my_module
my_module/
├── __init__.py
├── __manifest__.py
├── controllers
│   ├── __init__.py
│   └── controllers.py
├── demo
│   └── demo.xml
├── models
│   ├── __init__.py
│   └── models.py
├── security
│   └── ir.model.access.csv
└── views
    ├── templates.xml
    └── views.xml
5 directories, 10 files</pre>			<p>You should now <a id="_idIndexMarker178"/>edit the various generated files and adapt them to the purpose of your <span class="No-Break">new module.</span></p>
			<h2 id="_idParaDest-116"><a id="_idTextAnchor117"/>How it works...</h2>
			<p>The <strong class="source-inline">scaffold</strong> command creates the skeleton for a new module based on <span class="No-Break">a template.</span></p>
			<p>By default, the new module is created in the current working directory, but we can provide a specific directory to create the module, passing it as an <span class="No-Break">additional parameter.</span></p>
			<p>Consider the <span class="No-Break">following example:</span></p>
			<pre class="console">
$ ~/odoo-dev/odoo/odoo-bin scaffold my_module ~/odoo-dev/local-addons</pre>			<p>A <strong class="source-inline">default</strong> template is used, but a <strong class="source-inline">theme</strong> template is also available for website theme authoring. To choose a specific template, the <strong class="source-inline">-t</strong> option can be used. We are also allowed to use a path for a directory with <span class="No-Break">a template.</span></p>
			<p>This means <a id="_idIndexMarker179"/>that we can use our own templates with the <strong class="source-inline">scaffold</strong> command. The built-in templates can be found in the <strong class="source-inline">/odoo/cli/templates</strong> Odoo subdirectory. To use our own template, we can use something like the <span class="No-Break">following command:</span></p>
			<pre class="console">
$ ~/odoo-dev/odoo/odoo-bin scaffold -t path/to/template my_module</pre>			<p>By default, Odoo has two templates in the <strong class="source-inline">/odoo/cli/templates</strong> directory. One is the <strong class="source-inline">default</strong> template, and the second is the <strong class="source-inline">theme</strong> template. However, you can create your own templates or use them with <strong class="source-inline">-t</strong>, as shown in the <span class="No-Break">preceding command.</span></p>
		</div>
	</body></html>