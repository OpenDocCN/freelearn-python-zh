- en: '1'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '1'
- en: Installing the Odoo Development Environment
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 Odoo 开发环境
- en: To begin our Odoo development journey, we must set up our development environment
    by installing Odoo using source code that we can use to enhance, debug, and improve
    our development skills. There are several ways to set up an Odoo development environment,
    but this chapter proposes the best of them. You will find several other tutorials
    on the web explaining the other approaches. Keep in mind that this chapter is
    about setting up a development environment that has different requirements from
    a production environment; production has different parameters we must set in the
    config file, as per the volume of data and number of users in the system. We will
    cover configuration file parameters and their usage in this chapter.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始我们的 Odoo 开发之旅，我们必须通过安装源代码来设置我们的开发环境，这些源代码可以帮助我们增强、调试和改进我们的开发技能。设置 Odoo 开发环境有几种方法，但本章提出了其中最好的方法。你可以在网上找到解释其他方法的几个教程。请记住，本章是关于设置一个与生产环境有不同的要求的开发环境；生产环境需要根据系统中的数据量和用户数量设置不同的参数。我们将在本章中介绍配置文件参数及其用法。
- en: If you are new to Odoo development, you must know about certain aspects of the
    Odoo ecosystem. The first recipe will give you a brief introduction to the Odoo
    ecosystem, after which we will install Odoo for development purposes.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你刚开始接触 Odoo 开发，你必须了解 Odoo 生态系统的某些方面。第一个食谱将为你简要介绍 Odoo 生态系统，之后我们将为开发目的安装 Odoo。
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下食谱：
- en: Understanding the Odoo ecosystem
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解 Odoo 生态系统
- en: Installing Odoo from the source
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从源代码安装 Odoo
- en: Managing Odoo server databases
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理 Odoo 服务器数据库
- en: Storing the instance configuration in a file
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将实例配置存储在文件中
- en: Activating Odoo developer tools
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 激活 Odoo 开发者工具
- en: Updating the add-on modules list
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新附加模块列表
- en: Technical requirements
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: All the code that’s used in this chapter can be downloaded from this book’s
    GitHub repository at [https://github.com/PacktPublishing/Odoo-17-Development-Cookbook-Fifth-Edition/tree/main/Chapter01](https://github.com/PacktPublishing/Odoo-17-Development-Cookbook-Fifth-Edition/tree/main/Chapter01).
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中使用的所有代码都可以从本书的 GitHub 仓库下载，网址为 [https://github.com/PacktPublishing/Odoo-17-Development-Cookbook-Fifth-Edition/tree/main/Chapter01](https://github.com/PacktPublishing/Odoo-17-Development-Cookbook-Fifth-Edition/tree/main/Chapter01)。
- en: Understanding the Odoo ecosystem
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解 Odoo 生态系统
- en: Odoo provides developers with out-of-the-box modularity and its powerful framework
    helps them build projects quickly. There are various characters in the Odoo ecosystem
    that you should be familiar with before embarking on your journey of becoming
    a successful Odoo developer.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: Odoo 为开发者提供了开箱即用的模块化和其强大的框架帮助他们快速构建项目。在开始成为成功的 Odoo 开发者的旅程之前，你应该熟悉 Odoo 生态系统中的各种角色。
- en: Let’s assume you have a system with 4 CPU cores, 8 GB of RAM, and 30 concurrent
    Odoo users.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你有一个具有 4 个 CPU 核心、8 GB RAM 和 30 个并发 Odoo 用户的系统。
- en: To determine the number of workers needed, divide the number of users by 6\.
    In this case, 30 users divided by 6 equals 5, which is the theoretical number
    of workers required.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 要确定所需的工作进程数，将用户数除以 6。在这种情况下，30 个用户除以 6 等于 5，这是理论上的所需工作进程数。
- en: To calculate the theoretical maximum number of workers, multiply the number
    of CPU cores by 2 and add 1\. For 4 CPU cores, (4 * 2) + 1 equals 9, which is
    the theoretical maximum number of workers.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 要计算理论上的最大工作进程数，将 CPU 核心数乘以 2 并加 1。对于 4 个 CPU 核心，(4 * 2) + 1 等于 9，这是理论上的最大工作进程数。
- en: Based on these calculations, you can use 5 workers for the Odoo users and an
    additional worker for the cron worker, making a total of 6 workers.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 根据这些计算，你可以为 Odoo 用户使用 5 个工作进程，并为 cron 工作进程额外使用一个工作进程，总共 6 个工作进程。
- en: 'To estimate the RAM consumption, use the following formula:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 要估计 RAM 消耗，使用以下公式：
- en: '`RAM = Number of workers * ((0.8 * 150) + (0.2 *` `1024))`'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '`RAM = 工作进程数 * ((0.8 * 150) + (0.2 * 1024))`'
- en: In this case, 6 workers multiplied by `((0.8 * 150) + (0.2 * 1024))` equals
    approximately 2 GB of RAM.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，6 个工作进程乘以 `((0.8 * 150) + (0.2 * 1024))` 大约等于 2 GB 的 RAM。
- en: Therefore, based on these calculations, the Odoo installation will require around
    2 GB of RAM.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，根据这些计算，Odoo 安装将需要大约 2 GB 的 RAM。
- en: Odoo editions
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Odoo 版本
- en: 'Odoo comes in two different editions. The first one is **Community Edition**,
    which is open source, while the second one is **Enterprise Edition**, which has
    licensing fees. Unlike other software vendors, Odoo Enterprise Edition is just
    a pack of extra applications that adds extra features or new apps to the Community
    Edition. The Enterprise Edition runs on top of the Community Edition. The Community
    Edition comes under the **Lesser General Public License v3.0** (**LGPLv3**) and
    comes with all of the basic **enterprise resource planning** (**ERP**) applications,
    such as sales, **customer relationship management** (**CRM**), invoicing, purchases,
    and a website builder. Alternatively, the Enterprise Edition comes with the Odoo
    Enterprise Edition license, which is a proprietary license. Odoo Enterprise Edition
    has several advanced features, such as full accounting, studio, **Voice over Internet
    Protocol** (**VoIP**), mobile responsive design, e-sign, marketing automation,
    delivery and banking integrations, **Internet of Things** (**IoT**), and more.
    The Enterprise Edition also provides you with unlimited *bugfix support*. The
    following diagram shows that the Enterprise Edition depends on the Community Edition,
    which is why you need the latter to use the former:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: Odoo 有两个不同的版本。第一个是**社区版**，它是开源的，而第二个是**企业版**，它需要付费许可。与其他软件供应商不同，Odoo 企业版只是一个包含额外功能或新应用程序的额外应用程序包，这些应用程序添加到社区版中。企业版运行在社区版之上。社区版受**通用公共许可证
    v3.0**（**LGPLv3**）的约束，并包含所有基本的**企业资源规划**（**ERP**）应用程序，如销售、**客户关系管理**（**CRM**）、发票、采购和网站构建器。或者，企业版附带
    Odoo 企业版许可证，这是一个专有许可证。Odoo 企业版具有几个高级功能，如全面会计、工作室、**互联网协议语音**（**VoIP**）、移动响应式设计、电子签名、营销自动化、交付和银行集成、**物联网**（**IoT**）等。企业版还为您提供无限的**错误修复支持**。以下图表显示企业版依赖于社区版，这也是为什么您需要后者才能使用前者：
- en: '![Figure 1.1 – Differences between the Community Edition and Enterprise Edition](img/B20997_01_1.jpg)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.1 – 社区版和企业版之间的差异](img/B20997_01_1.jpg)'
- en: Figure 1.1 – Differences between the Community Edition and Enterprise Edition
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.1 – 社区版和企业版之间的差异
- en: 'You can find a full comparison of both editions here: [https://www.odoo.com/page/editions](https://www.odoo.com/page/editions).'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在此处找到两个版本的完整比较：[https://www.odoo.com/page/editions](https://www.odoo.com/page/editions)。
- en: Note
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Odoo has the largest number of community developers among all open source ERPs
    on the market with 20K+ forks on GitHub, hence why you will find a large number
    of third-party apps (modules) on the app store. Some of the free apps use an **Affero
    General Public License version 3** (**AGPLv3**). You cannot use the proprietary
    license on your app if your application has dependencies on such apps. Apps with
    an Odoo proprietary license can only be developed on modules that have LGPL or
    other proprietary licenses.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: Odoo 在市场上所有开源 ERP 中拥有最多的社区开发者，GitHub 上有 20K+ 的分支，因此您会在应用商店中找到大量的第三方应用程序（模块）。其中一些免费应用程序使用**Affero
    通用公共许可证版本 3**（**AGPLv3**）。如果您的应用程序依赖于此类应用程序，则不能在您的应用程序中使用专有许可证。具有 Odoo 专有许可证的应用程序只能在具有
    LGPL 或其他专有许可证的模块上开发。
- en: Git repositories
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Git 仓库
- en: 'The entire code base of Odoo is hosted on GitHub. You can post bugs/issues
    for stable versions here. You can also propose a new feature by submitting a **pull
    request** (**PR**). There are several repositories in Odoo. See the following
    table for more information:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: Odoo 的整个代码库托管在 GitHub 上。您可以在这里发布稳定版本的错误/问题。您也可以通过提交**拉取请求**（**PR**）来提议一个新功能。Odoo
    有多个仓库。以下表格提供了更多信息：
- en: '| **Repositories** | **Purpose** |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
  zh: '| **仓库** | **用途** |'
- en: '| [https://github.com/odoo/odoo](https://github.com/odoo/odoo) | This is the
    Community Edition of Odoo. It’s available publicly. |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
  zh: '| [https://github.com/odoo/odoo](https://github.com/odoo/odoo) | 这是 Odoo 的社区版。它对公众开放。|'
- en: '| [https://github.com/odoo/enterprise](https://github.com/odoo/enterprise)
    | This is the Enterprise Edition of Odoo. It’s available to official Odoo partners
    only. |'
  id: totrans-34
  prefs: []
  type: TYPE_TB
  zh: '| [https://github.com/odoo/enterprise](https://github.com/odoo/enterprise)
    | 这是 Odoo 的企业版。它仅对官方 Odoo 合作伙伴开放。|'
- en: '| [https://github.com/odoo-dev/odoo](https://github.com/odoo-dev/odoo) | This
    is an ongoing development repository. It’s available publicly. |'
  id: totrans-35
  prefs: []
  type: TYPE_TB
  zh: '| [https://github.com/odoo-dev/odoo](https://github.com/odoo-dev/odoo) | 这是一个持续开发的仓库。它对公众开放。|'
- en: Table 1.1 – Odoo git repositories
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 表 1.1 – Odoo git 仓库
- en: Every year, Odoo releases a major release, which is a long-term support version
    that will last for 3 years, and a few minor versions. Minor versions are mostly
    used in Odoo’s online `master` branch is under development and is unstable, so
    it is advisable not to use this for production since it might break your database.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 每年，Odoo 发布一个主要版本，这是一个为期 3 年的长期支持版本，以及几个小版本。小版本主要用于 Odoo 的在线 `master` 分支正在开发中且不稳定，因此建议不要用于生产，因为它可能会破坏您的数据库。
- en: Runbot
  id: totrans-38
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Runbot
- en: Runbot is Odoo’s automated testing environment. Whenever there is a new commit
    in Odoo’s GitHub branch, Runbot pulls those latest changes and creates the builds
    for the last four commits. Here, you can test all stable and in-development branches.
    You can even play with the Enterprise Edition and its development branches.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: Runbot 是 Odoo 的自动化测试环境。每当 Odoo 的 GitHub 分支有新的提交时，Runbot 会拉取这些最新的更改，并为最后四个提交创建构建。在这里，您可以测试所有稳定和开发中的分支。您甚至可以尝试企业版及其开发分支。
- en: Every build has a different background color, which indicates the status of
    the test cases. A green background color means that all of the test cases run
    successfully and you can test that branch, while a red background color means
    that some test cases have failed on this branch and some features might be broken
    on that build. You can view the logs for all test cases, which show exactly what
    happens during installation. Every build has two databases. The `all` database
    has all of the modules installed on it, while the `base` database only has base
    Odoo modules installed. Every build is installed with basic demo data, so you
    can test it quickly without extra configurations.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 每个构建都有一个不同的背景颜色，这表示测试用例的状态。绿色背景颜色表示所有测试用例都成功运行，您可以测试该分支，而红色背景颜色表示该分支上某些测试用例失败，某些功能可能在构建中损坏。您可以查看所有测试用例的日志，这些日志显示了安装过程中确切发生的事情。每个构建都有两个数据库。`all`
    数据库安装了所有模块，而 `base` 数据库只安装了基础 Odoo 模块。每个构建都安装了基本的演示数据，因此您可以快速测试它，无需额外配置。
- en: Note
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 备注
- en: You can access Runbot at [http://runbot.odoo.com/runbo](http://runbot.odoo.com/runbo)t.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过访问 [http://runbot.odoo.com/runbo](http://runbot.odoo.com/runbo)t 来访问 Runbot。
- en: 'The following credentials can be used to access any Runbot build:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 以下凭证可用于访问任何 Runbot 构建：
- en: '**Login ID**: admin **Password**: admin'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**登录 ID**：admin **密码**：admin'
- en: '**Login ID**: demo **Password**: demo'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**登录 ID**：demo **密码**：demo'
- en: '**Login ID**: portal **Password**: portal'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**登录 ID**：portal **密码**：portal'
- en: Note
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 备注
- en: This is a public testing environment, so other users might be using/testing
    the same branch that you are testing.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个公共测试环境，因此其他用户可能会使用/测试您正在测试的相同分支。
- en: Odoo app store
  id: totrans-49
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Odoo 应用商店
- en: Odoo launched the app store a few years back, and it was an instant hit. At
    the time of writing, over 39,000+ different apps are hosted there. You will find
    lots of free and paid applications for different versions here. This includes
    specific solutions for different business verticals, such as education, food industries,
    and medicine. It also includes apps that extend or add new features to existing
    Odoo applications. The app store also provides numerous beautiful themes for the
    Odoo website builder. In [*Chapter 3*](B20997_03.xhtml#_idTextAnchor083), *Creating
    Odoo Add-On Modules*, you will learn how to set pricing and currency for your
    custom module.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: Odoo 几年前推出了应用商店，并立即受到欢迎。在撰写本文时，已有超过 39,000+ 个不同的应用程序托管在那里。您将在这里找到许多免费和付费应用程序，适用于不同版本，包括针对不同商业领域的特定解决方案，如教育、食品工业和医药。还包括扩展或为现有
    Odoo 应用程序添加新功能的程序。应用商店还提供了许多美观的主题，适用于 Odoo 网站构建器。在 [*第 3 章*](B20997_03.xhtml#_idTextAnchor083)，“创建
    Odoo 扩展模块”，您将学习如何为您的自定义模块设置定价和货币。
- en: You can access the Odoo app store by going to [https://www.odoo.com/apps](https://www.odoo.com/apps).
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过访问 [https://www.odoo.com/apps](https://www.odoo.com/apps) 来访问 Odoo 应用商店。
- en: You can access Odoo’s themes by going to [https://www.odoo.com/apps/themes](https://www.odoo.com/apps/themes).
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过访问 [https://www.odoo.com/apps/themes](https://www.odoo.com/apps/themes)
    来访问 Odoo 的主题。
- en: Note
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 备注
- en: Odoo has open sourced several themes after version 13 and now works with an
    advanced JavaScript called *OWL*. We will cover this in [*Chapter 16*](B20997_16.xhtml#_idTextAnchor929).
    Note that these were paid themes in previous versions. This means that, in Odoo
    versions 15 and 16, you can download and use those beautiful themes at no extra
    cost.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: Odoo 在 13 版本之后开源了几个主题，现在使用了一个高级 JavaScript 脚本 *OWL*。我们将在 [*第 16 章*](B20997_16.xhtml#_idTextAnchor929)
    中介绍这一点。请注意，这些在之前的版本中是付费主题。这意味着在 Odoo 的 15 和 16 版本中，您可以免费下载和使用这些美观的主题。
- en: Odoo Community Association
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Odoo 社区协会
- en: '**Odoo Community Association** (**OCA**) is a non-profit organization that
    develops/manages community-based Odoo modules. All OCA modules are open source
    and maintained by Odoo community members. OCA’s GitHub account contains multiple
    repositories for different Odoo applications. Apart from Odoo modules, it also
    contains various tools, a migration library, accounting localizations, and so
    on.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '**Odoo社区协会**（**OCA**）是一个非营利组织，负责开发和维护基于社区的Odoo模块。所有OCA模块都是开源的，并由Odoo社区成员维护。OCA的GitHub账户包含多个用于不同Odoo应用的仓库。除了Odoo模块外，它还包含各种工具、迁移库、会计本地化等。'
- en: 'Here is the URL for OCA’s official GitHub account: [https://github.com/OCA](https://github.com/OCA).'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是OCA官方GitHub账户的URL：[https://github.com/OCA](https://github.com/OCA).
- en: Official Odoo help forum
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 官方Odoo帮助论坛
- en: Odoo has a very powerful framework, and tons of things can be achieved just
    by using/activating options or by following specific patterns. Consequently, if
    you run into some technical issues or if you are not sure about some complex cases,
    then you can post your query on Odoo’s official help forum. Lots of developers
    are active on this forum, including some official Odoo employees.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: Odoo拥有一个非常强大的框架，只需通过使用/激活选项或遵循特定模式，就能实现许多事情。因此，如果您遇到一些技术问题或者对某些复杂案例不确定，您可以在Odoo官方帮助论坛上发布您的疑问。许多开发者活跃在这个论坛上，包括一些官方Odoo员工。
- en: You can search for questions or post your new questions by going to [https://www.odoo.com/forum/help-1](https://www.odoo.com/forum/help-1).
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过访问[https://www.odoo.com/forum/help-1](https://www.odoo.com/forum/help-1)来搜索问题或发布您的新问题。
- en: Odoo’s eLearning platform
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Odoo电子学习平台
- en: Recently, Odoo has launched a new eLearning platform. This platform provides
    lots of videos that explain how to use different Odoo applications. At the time
    of writing, this platform does not have technical videos, just functional ones.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 最近，Odoo推出了一款新的电子学习平台。该平台提供了许多视频，解释如何使用不同的Odoo应用。在撰写本文时，该平台没有技术视频，只有功能视频。
- en: 'Here is the URL for Odoo’s eLearning platform: [https://www.odoo.com/slides](https://www.odoo.com/slides).'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是Odoo电子学习平台的URL：[https://www.odoo.com/slides](https://www.odoo.com/slides).
- en: Installing Odoo from the source
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从源代码安装Odoo
- en: It is highly recommended that you use the **Linux Ubuntu** operating system
    to install Odoo since this is the operating system that Odoo uses for all its
    tests, debugging, and installations of Odoo Enterprise. Additionally, most Odoo
    developers use GNU/Linux distributions, so they are much more likely to get support
    from the Odoo community for operating system-level issues that occur in **GNU/Linux**
    than *Windows* or *macOS*.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 强烈建议您使用**Linux Ubuntu**操作系统来安装Odoo，因为这是Odoo用于所有测试、调试和Odoo企业安装的操作系统。此外，大多数Odoo开发者使用GNU/Linux发行版，因此他们更有可能从Odoo社区获得对在**GNU/Linux**上发生的操作系统级别问题的支持，而不是*Windows*或*macOS*。
- en: It is also recommended to develop Odoo add-on modules using the same environment
    (the same distribution and the same version) as the one that will be used in production.
    This will avoid nasty surprises, such as discovering on the day of deployment
    that a library has a different version than expected, with a slightly different
    and incompatible behavior. If your workstation is using a different operating
    system, a good approach is to set up a **virtual machine** (**VM**) on your workstation
    and install a GNU/Linux distribution in the VM.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 还建议使用与生产环境中将使用的相同环境（相同的发行版和相同的版本）来开发Odoo附加模块。这将避免一些令人不快的惊喜，例如在部署当天发现库的版本与预期不同，具有略微不同且不兼容的行为。如果您的工作站使用的是不同的操作系统，一个很好的方法是在工作站上设置一个**虚拟机**（**VM**），并在虚拟机中安装GNU/Linux发行版。
- en: Note
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Ubuntu is available as an app in the **Microsoft Store**, so you can use that
    if you don’t want to switch to Ubuntu.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: Ubuntu可以作为应用程序在**Microsoft Store**中获取，所以如果您不想切换到Ubuntu，可以使用它。
- en: For this book, we will be using Ubuntu Server 22.04 LTS, but you can use any
    other Debian GNU/Linux operating system. Whatever Linux distribution you choose,
    you should have some notion of how to use it from the command line, and knowing
    about system administration will certainly not do any harm.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这本书，我们将使用Ubuntu Server 22.04 LTS，但您可以使用任何其他Debian GNU/Linux操作系统。无论您选择哪个Linux发行版，您都应该对如何从命令行使用它有所了解，并且了解系统管理肯定不会有害。
- en: Getting ready
  id: totrans-70
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: We are assuming that you have Ubuntu 22.04 up and running and that you have
    an account with root access or that `sudo` has been configured. In the following
    sections, we will install Odoo’s dependencies and download Odoo’s source code
    from GitHub.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 我们假设您已经安装并运行了 Ubuntu 22.04，并且您有一个具有 root 访问权限的账户或已配置 `sudo`。在以下部分中，我们将安装 Odoo
    的依赖项并从 GitHub 下载 Odoo 的源代码。
- en: Note
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Some of the configurations require a system login username, so we will use `$(whoami)`
    whenever a login username is required in a command line. This is a shell command
    that will substitute your login in the command you are typing.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 一些配置需要系统登录用户名，因此当命令行中需要登录用户名时，我们将使用 `$(whoami)`。这是一个 shell 命令，它将在您输入的命令中替换您的登录名。
- en: Some operations will be easier if you have a GitHub account. If you don’t have
    one already, go to [https://github.com](https://github.com) and create one.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您拥有 GitHub 账户，某些操作将更容易。如果您还没有，请访问 [https://github.com](https://github.com)
    并创建一个。
- en: How to do it...
  id: totrans-75
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To install Odoo from the source, perform the following steps:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 要从源安装 Odoo，请执行以下步骤：
- en: 'Run the following commands to install the main dependencies:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令以安装主要依赖项：
- en: '[PRE0]'
  id: totrans-78
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Download and install **wkhtmltopdf**:'
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载并安装 **wkhtmltopdf**：
- en: '[PRE1]'
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'If you encounter any errors after running the previous command, force install
    the dependencies with the following command:'
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果在运行上一条命令后遇到任何错误，请使用以下命令强制安装依赖项：
- en: '[PRE2]'
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Now, install the PostgreSQL database:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，安装 PostgreSQL 数据库：
- en: '[PRE3]'
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Configure PostgreSQL:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置 PostgreSQL：
- en: '[PRE4]'
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: $ git config --global user.name "Your Name"
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: $ git config --global user.name "Your Name"
- en: $ git config --global user.email youremail@example.com
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: $ git config --global user.email youremail@example.com
- en: '[PRE5]'
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Clone the Odoo code base:'
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 克隆 Odoo 代码库：
- en: '[PRE6]'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: $ python3 -m venv ~/venv-odoo-17.0
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: $ python3 -m venv ~/venv-odoo-17.0
- en: 'venv:'
  id: totrans-93
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 'venv:'
- en: '[PRE7]'
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '[PRE8]'
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Create and start your first Odoo instances:'
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建并启动您的第一个 Odoo 实例：
- en: '[PRE9]'
  id: totrans-97
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Note
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: If you need RTL support, please install `node` and `rtlcss` by running `sudo
    apt-get install nodejs npm -y sudo npm install -``g rtlcss`.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您需要 RTL 支持，请运行以下命令安装 `node` 和 `rtlcss`：`sudo apt-get install nodejs npm -y
    sudo npm install -``g rtlcss`。
- en: How it works...
  id: totrans-100
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: In *step 1*, we installed several core dependencies. These dependencies include
    various tools, such as **git**, **pip3**, **wget**, Python setup tools, and more.
    These core tools will help us install other Odoo dependencies using simple commands.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 在 *步骤 1* 中，我们安装了几个核心依赖项。这些依赖项包括各种工具，如 **git**、**pip3**、**wget**、Python 安装工具等。这些核心工具将帮助我们使用简单命令安装其他
    Odoo 依赖项。
- en: In *step 2*, we downloaded and installed the `wkhtmltopdf` package, which is
    used in Odoo to print PDF documents such as sale orders, invoices, and other reports.
    Odoo 17.0 needs version 0.12.6.1 of `wkhtmltopdf`, and that exact version might
    be not included in the current Linux distributions. Fortunately for us, the maintainers
    of `wkhtmltopdf` provide pre-built packages for various distributions at [http://wkhtmltopdf.org/downloads.html](http://wkhtmltopdf.org/downloads.html)
    and we have downloaded and installed it from that URL.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 在 *步骤 2* 中，我们下载并安装了 `wkhtmltopdf` 包，该包用于 Odoo 打印 PDF 文档，如销售订单、发票和其他报告。Odoo 17.0
    需要 `wkhtmltopdf` 的 0.12.6.1 版本，而这个确切版本可能不包括在当前的 Linux 发行版中。幸运的是，`wkhtmltopdf`
    的维护者为各种发行版提供了预构建的包，在 [http://wkhtmltopdf.org/downloads.html](http://wkhtmltopdf.org/downloads.html)
    上，我们已经从该 URL 下载并安装了它。
- en: After this, we configured PostgreSQL, which is used for Odoo’s database management.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 此后，我们配置了用于 Odoo 数据库管理的 PostgreSQL。
- en: PostgreSQL configuration
  id: totrans-104
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: PostgreSQL 配置
- en: In *step 3*, we installed the PostgreSQL database.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在 *步骤 3* 中，我们安装了 PostgreSQL 数据库。
- en: In *step 4*, we created a new database user with the login name of our system.
    `$(whoami)` is used to fetch your login name, and the `-s` option is used to give
    superuser rights. Let’s see why we need these configurations.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在 *步骤 4* 中，我们创建了一个新的数据库用户，登录名为我们的系统用户名。`$(whoami)` 用于获取您的登录名，`-s` 选项用于赋予超级用户权限。让我们看看为什么需要这些配置。
- en: 'Odoo uses the `psycopg2` Python library to connect with a PostgreSQL database.
    To access a PostgreSQL database with the `psycopg2` library, Odoo uses the following
    values by default:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: Odoo 使用 `psycopg2` Python 库与 PostgreSQL 数据库连接。要使用 `psycopg2` 库访问 PostgreSQL
    数据库，Odoo 默认使用以下值：
- en: By default, `psycopg2` tries to connect to a database with the same username
    as the current user on local connections, which enables password-less authentication
    (this is good for the development environment)
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 默认情况下，`psycopg2` 尝试连接到与本地连接上当前用户名相同的数据库，这实现了无密码认证（这对于开发环境来说很好）
- en: The local connection uses Unix domain sockets
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本地连接使用 Unix 域套接字
- en: The database server listens on port `5432`
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据库服务器监听端口`5432`
- en: That’s it! Your PostgreSQL database is now ready to be connected with Odoo.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 就这样！你的PostgreSQL数据库现在已准备好与Odoo连接。
- en: As this is a development server, we have given `--superuser` rights to the user.
    It is OK to give the PostgreSQL user more rights as this will be your development
    instance. For a production instance, you can use the `--createdb` command line
    instead of `--superuser` to restrict rights. The `–superuser` rights in a production
    server will give additional leverage to an attacker exploiting a vulnerability
    in some part of the deployed code.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这是一个开发服务器，我们已经给用户赋予了`--superuser`权限。在开发实例中，给PostgreSQL用户更多权限是可以的，因为这将是你开发实例。对于生产实例，你可以使用`--createdb`命令行代替`--superuser`来限制权限。在生产服务器上，`--superuser`权限将给攻击者利用已部署代码中某些部分的漏洞提供额外的优势。
- en: If you want to use a database user with a different login, you will need to
    provide a password for the user. This is done by passing the `--pwprompt` flag
    on the command line when creating the user, in which case the command will prompt
    you for the password.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想要使用不同登录的用户数据库用户，你需要为该用户提供密码。这是通过在创建用户时在命令行上传递`--pwprompt`标志来完成的，在这种情况下，命令将提示你输入密码。
- en: 'If the user has already been created and you want to set a password (or modify
    a forgotten password), you can use the following command:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 如果用户已经创建，并且你想设置密码（或修改忘记的密码），你可以使用以下命令：
- en: '[PRE10]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: If this command fails with an error message saying that the database does not
    exist, it is because you did not create a database named after your login name
    in *step 4* of this recipe. That’s fine; just add the `--dbname` option with an
    existing database name, such as `--``dbname template1`.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这个命令失败，并显示错误信息说数据库不存在，那是因为你没有在食谱的*第4步*中创建一个以你的登录名命名的数据库。没关系；只需添加`--dbname`选项并指定一个现有数据库的名称，例如`--dbname
    template1`。
- en: Git configuration
  id: totrans-117
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Git配置
- en: For the development environment, we are using Odoo sourced from GitHub. With
    `git`, you can easily switch between different Odoo versions. Note that you can
    fetch the latest changes with the `git` `pull` command.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 对于开发环境，我们使用GitHub上的Odoo。使用`git`，你可以轻松地在不同的Odoo版本之间切换。请注意，你可以使用`git`的`pull`命令获取最新的更改。
- en: In *step 5*, we configured our `git` user.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 在*第5步*中，我们配置了我们的`git`用户。
- en: In *step 6*, we downloaded the source code from Odoo’s official GitHub repository.
    We used the `git clone` command to download Odoo’s source code. We used a single
    branch as we only wanted a branch for the 17.0 version. We also used `--depth
    1` to avoid downloading the full commit history of the branch. These options will
    download the source code very quickly, but if you want, you can omit those options.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 在*第6步*中，我们从Odoo的官方GitHub仓库下载了源代码。我们使用`git clone`命令下载Odoo的源代码。我们使用单个分支，因为我们只想为17.0版本创建一个分支。我们还使用了`--depth
    1`来避免下载分支的完整提交历史。这些选项将非常快速地下载源代码，但如果你愿意，可以省略这些选项。
- en: Odoo developers also propose nightly builds, which are available as tarballs
    and distribution packages. The main advantage of using `git clone` is that you
    will be able to update your repository when new bug fixes are committed in the
    source tree. You will also be able to easily test any proposed fixes and track
    regressions so that you can make your bug reports more precise and helpful for
    developers.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: Odoo开发者还提出了夜间构建，这些构建作为tar包和分发包提供。使用`git clone`的主要优势是，你将能够在源树中提交新的错误修复时更新你的仓库。你还可以轻松测试任何提议的修复，并跟踪回归，以便你可以使你的错误报告更加精确和有助于开发者。
- en: Note
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: If you have access to the Enterprise Edition source code, you can download that
    in a separate folder under the `~/``odoo-dev` directory.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你可以访问企业版源代码，你可以在`~/odoo-dev`目录下的单独文件夹中下载它。
- en: Virtual environments
  id: totrans-124
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 虚拟环境
- en: Python **virtual environments**, or **venvs** for short, are isolated Python
    workspaces. These are very useful to Python developers because they allow different
    workspaces with different versions of various Python libraries to be installed,
    possibly on different Python interpreter versions.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: Python **虚拟环境**，或简称为**venvs**，是隔离的Python工作空间。这对于Python开发者非常有用，因为它们允许安装不同版本的Python库的不同工作空间，可能是在不同的Python解释器版本上。
- en: You can create as many environments as you wish using the `python3 -m venv ~/newvenv`
    command. This will create a `newvenv` directory in the specified location, containing
    a `bin/` subdirectory and a `lib/python3.10` subdirectory.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用`python3 -m venv ~/newvenv`命令创建任意数量的环境。这将创建一个`newvenv`目录在指定位置，包含一个`bin/`子目录和一个`lib/python3.10`子目录。
- en: In *step 7*, we created a new virtual environment in the `~/venv-odoo-17.0`
    directory. This will be our isolated Python environment for Odoo, and all of Odoo’s
    Python dependencies will be installed in this environment.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 在*第7步*中，我们在`~/venv-odoo-17.0`目录中创建了一个新的虚拟环境。这将是我们Odoo的独立Python环境，Odoo的所有Python依赖都将安装在这个环境中。
- en: To activate the virtual environment, we need to use the `source` command. We
    used the `source ~/venv-odoo-17.0/bin/activate` command to activate the virtual
    environment.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 要激活虚拟环境，我们需要使用`source`命令。我们使用了`source ~/venv-odoo-17.0/bin/activate`命令来激活虚拟环境。
- en: Installing Python packages
  id: totrans-129
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装Python包
- en: Odoo’s source code has a list of Python dependencies in `requirements.txt`.
    In *step 8*, we installed all those requirements via the `pip3` `install` command.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: Odoo的源代码在`requirements.txt`中有一个Python依赖列表。在*第8步*中，我们通过`pip3 install`命令安装了所有这些依赖项。
- en: That’s it. Now, you can run the Odoo instance.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 就这些了。现在，你可以运行Odoo实例。
- en: Starting the instance
  id: totrans-132
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 启动实例
- en: 'Now comes the moment you’ve been waiting for. To start our first instance,
    in *step 9*, we created a new empty database, used the `odoo-bin` script, and
    then started the Odoo instance with the following command:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是你一直等待的时刻。为了启动我们的第一个实例，在*第9步*中，我们创建了一个新的空数据库，使用了`odoo-bin`脚本，然后使用以下命令启动了Odoo实例：
- en: '[PRE11]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'You can also omit `python3` by using `./` before `odoo-bin` as it is an executable
    Python script:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以在`odoo-bin`之前使用`./`来省略`python3`，因为它是可执行的Python脚本：
- en: '[PRE12]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'With `odoo-bin`, a script with the following command-line arguments is used:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`odoo-bin`，使用以下命令行参数的脚本：
- en: '`-d database_name`: Use this database by default.'
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-d database_name`: 默认使用此数据库。'
- en: '`--db-filter=database_name$`: Only try to connect to databases that match the
    supplied regular expression. One Odoo installation can serve multiple instances
    that live in separate databases, and this argument limits the available databases.
    The trailing `$` is important as the regular expression is used in match mode.
    This enables you to avoid selecting names starting with the specified string.'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--db-filter=database_name$`: 只尝试连接与提供的正则表达式匹配的数据库。一个Odoo安装可以服务于多个实例，这些实例位于不同的数据库中，此参数限制了可用的数据库。尾随的`$`很重要，因为正则表达式用于匹配模式。这使你能够避免选择以指定字符串开头的名称。'
- en: '`--addons-path=directory1,directory2,...`: This is a comma-separated list of
    directories in which Odoo will look for add-ons. This list is scanned at instance
    creation time to populate the list of available add-on modules in the instance.
    If you want to use Odoo’s Enterprise Edition, then add its directory with this
    option.'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--addons-path=directory1,directory2,...`: 这是一个逗号分隔的目录列表，Odoo将在此目录中查找附加组件。在实例创建时扫描此列表以填充实例中可用的附加模块列表。如果你想使用Odoo的企业版，则可以使用此选项添加其目录。'
- en: '`-i base`: This is used to install a base module. This is required when you
    have created a database via the command line.'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-i base`: 这用于安装基本模块。当你通过命令行创建数据库时，这是必需的。'
- en: 'If you are using a database user with a database login that is different from
    your Linux login, you need to pass the following additional arguments:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用的是与Linux登录不同的数据库用户，你需要传递以下附加参数：
- en: '`--db_host=localhost`: Use a TCP connection to the database server'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--db_host=localhost`: 使用数据库服务器的TCP连接'
- en: '`--db_user=database_username`: Use the specified database login'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--db_user=database_username`: 使用指定的数据库登录'
- en: '`--db_password=database_password`: This is the password for authenticating
    against the PostgreSQL server'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--db_password=database_password`: 这是用于验证PostgreSQL服务器的密码'
- en: To get an overview of all available options, use the `--help` argument. We will
    see more of the `odoo-bin` script later in this chapter.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 要获取所有可用选项的概述，请使用`--help`参数。我们将在本章后面看到更多关于`odoo-bin`脚本的内容。
- en: When Odoo is started on an empty database, it will create the database structure
    that’s needed to support its operations. It will also scan the add-on path to
    find the available add-on modules and insert some into the initial records in
    the database. This includes the `admin` user with the default `admin` password,
    which you will use for authentication.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 当Odoo在一个空数据库上启动时，它将创建支持其操作所需的数据库结构。它还会扫描附加路径以查找可用的附加模块，并将一些模块插入到数据库中的初始记录中。这包括具有默认`admin`密码的`admin`用户，您将使用它进行身份验证。
- en: 'Pointing your web browser to `http://localhost:8069/` leads you to the login
    page of your newly created instance, as shown in the following screenshot:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 将您的网络浏览器指向`http://localhost:8069/`将带您到您新创建实例的登录页面，如下截图所示：
- en: '![Figure 1.2 – Login screen of the Odoo instance](img/B20997_01_2.jpg)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![图1.2 – Odoo实例的登录屏幕](img/B20997_01_2.jpg)'
- en: Figure 1.2 – Login screen of the Odoo instance
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.2 – Odoo实例的登录屏幕
- en: This is because Odoo includes an HTTP server. By default, it listens on all
    local network interfaces on TCP port `8069`.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 这是因为Odoo包含一个HTTP服务器。默认情况下，它监听TCP端口`8069`上的所有本地网络接口。
- en: Managing Odoo server databases
  id: totrans-152
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 管理Odoo服务器数据库
- en: When working with Odoo, all the data in your instance is stored in a PostgreSQL
    database. All the standard database management tools you are used to are available,
    but Odoo also proposes a web interface for some common operations.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用Odoo时，您实例中的所有数据都存储在PostgreSQL数据库中。所有您熟悉的标准化数据库管理工具都可用，但Odoo还提供了一些常见操作的Web界面。
- en: Getting ready
  id: totrans-154
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备中
- en: We are assuming that your work environment is set up and that you have an instance
    running.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 我们假设您的工作环境已经设置好，并且您有一个正在运行的实例。
- en: How to do it...
  id: totrans-156
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: The Odoo database management interface provides tools to create, duplicate,
    remove, back up, and restore a database. There is also a way to change the master
    password, which is used to protect access to the database management interface.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: Odoo数据库管理界面提供了创建、复制、删除、备份和恢复数据库的工具。还有更改主密码的方法，该密码用于保护对数据库管理界面的访问。
- en: Accessing the database management interface
  id: totrans-158
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 访问数据库管理界面
- en: 'To access the database, perform the following steps:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问数据库，请执行以下步骤：
- en: Go to the login screen of your instance (if you are authenticated, log out).
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往您实例的登录屏幕（如果您已认证，请注销）。
- en: 'Click on **Manage Databases**. This will navigate you to [http://localhost:8069/web/database/manager](http://localhost:8069/web/database/manager)
    (you can also point your browser directly to that URL):'
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**管理数据库**。这将带您导航到[http://localhost:8069/web/database/manager](http://localhost:8069/web/database/manager)（您也可以直接将浏览器指向该URL）：
- en: '![Figure 1.3 – Database manager](img/B20997_01_3.jpg)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![图1.3 – 数据库管理器](img/B20997_01_3.jpg)'
- en: Figure 1.3 – Database manager
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.3 – 数据库管理器
- en: Setting or changing the master password
  id: totrans-164
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置或更改主密码
- en: 'If you’ve set up your instance with default values and haven’t modified it
    yet, as we will explain in the following section, the database management screen
    will display a warning, telling you that the `master password` instance hasn’t
    been set and will advise you to set one with a direct link:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用默认值设置了实例并且尚未对其进行修改，正如我们将在下一节中解释的，数据库管理屏幕将显示一个警告，告诉您`master password`实例尚未设置，并建议您通过直接链接设置一个：
- en: '![Figure 1.4 – Master password warning](img/B20997_01_4.jpg)'
  id: totrans-166
  prefs: []
  type: TYPE_IMG
  zh: '![图1.4 – 主密码警告](img/B20997_01_4.jpg)'
- en: Figure 1.4 – Master password warning
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.4 – 主密码警告
- en: 'To set the master password, perform the following steps:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 要设置主密码，请执行以下步骤：
- en: 'Click on the **Set Master Password** button. You will get a dialog box asking
    you to fill in the **New Master** **Password** field:'
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**设置主密码**按钮。您将得到一个对话框，要求您填写**新主密码**字段：
- en: '![Figure 1.5 – Setting a new master password](img/B20997_01_5.jpg)'
  id: totrans-170
  prefs: []
  type: TYPE_IMG
  zh: '![图1.5 – 设置新的主密码](img/B20997_01_5.jpg)'
- en: Figure 1.5 – Setting a new master password
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.5 – 设置新的主密码
- en: Type in a complex new password and click **Continue**.
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入一个复杂的新的密码，然后点击**继续**。
- en: 'If the master password is already set, click on the **Set Master Password**
    button at the bottom of the screen to change it. In the dialog box that opens,
    type the previous master password and the new one, and then click **Continue**:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 如果主密码已经设置，请点击屏幕底部的**设置主密码**按钮来更改它。在打开的对话框中，输入旧的主密码和新密码，然后点击**继续**：
- en: '![Figure 1.6 – Changing the master password](img/B20997_01_6.0.jpg)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![图1.6 – 修改主密码](img/B20997_01_6.0.jpg)'
- en: Figure 1.6 – Changing the master password
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.6 – 修改主密码
- en: Note
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: The master password is the server configuration file under the `admin_passwd`
    key. If the server is started without a configuration file being specified, a
    new one will be generated in `~/.odoorc`. Refer to the next recipe for more information
    about the configuration file.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 主密码是服务器配置文件中的`admin_passwd`键。如果服务器在没有指定配置文件的情况下启动，将在`~/.odoorc`中生成一个新的配置文件。有关配置文件的更多信息，请参考下一道菜谱。
- en: Creating a new database
  id: totrans-178
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建新数据库
- en: 'This dialog box can be used to create a new database instance that will be
    handled by the current Odoo server. Follow these steps:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 此对话框可用于创建由当前Odoo服务器处理的新数据库实例。按照以下步骤操作：
- en: 'On the database management screen, click on the **Create Database** button,
    which can be found at the bottom of the screen. This will bring up the following
    dialog:'
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在数据库管理屏幕上，点击屏幕底部的**创建数据库**按钮。这将弹出一个以下对话框：
- en: '![Figure 1.7 – The Create Database dialog](img/B20997_01_7.0.jpg)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![图1.7 – 创建数据库对话框](img/B20997_01_7.0.jpg)'
- en: Figure 1.7 – The Create Database dialog
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.7 – 创建数据库对话框
- en: 'Fill in the form, as follows:'
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照以下方式填写表格：
- en: '**Master Password**: This is the master password for this instance.'
  id: totrans-184
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主密码**：这是此实例的主密码。'
- en: '**Database Name**: Input the name of the database you wish to create.'
  id: totrans-185
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据库名称**：输入您希望创建的数据库名称。'
- en: '**Email**: Add your email address here; this will be your username later.'
  id: totrans-186
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**电子邮件**：在此处添加您的电子邮件地址；这将是您稍后的用户名。'
- en: '**Password**: Type in the password you want to set for the admin user of the
    new instance.'
  id: totrans-187
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**密码**：输入您想为新实例管理员用户设置的密码。'
- en: '**Phone Number**: Set your phone number (optional).'
  id: totrans-188
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**电话号码**：设置您的电话号码（可选）。'
- en: '**Language**: Select the language that you wish to be installed by default
    in the new database in the drop-down list. Odoo will automatically load the translations
    for the selected language.'
  id: totrans-189
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**语言**：在下拉列表中选择您希望在新数据库中默认安装的语言。Odoo将自动加载所选语言的翻译。'
- en: '**Country**: Select the country of the main company in the drop-down list.
    Selecting this will automatically configure a few things, including the company’s
    currency.'
  id: totrans-190
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**国家**：在下拉列表中选择主要公司的国家。选择此选项将自动配置一些事情，包括公司的货币。'
- en: '**Demo data**: Check this box to obtain demonstration data. This is useful
    for running interactive tests or setting up a demonstration for a customer, but
    it should not be checked for a database that is designed to contain production
    data.'
  id: totrans-191
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**演示数据**：勾选此框以获取演示数据。这对于运行交互式测试或为客户设置演示很有用，但不应用于设计用于包含生产数据的数据库。'
- en: Note
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: If you wish to use the database to run automated tests for the modules (refer
    to [*Chapter 7*](B20997_07.xhtml#_idTextAnchor363), *Debugging Modules*), you
    need to have the demonstration data since the vast majority of the automated tests
    in Odoo depend on these records to run successfully.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您希望使用数据库来运行模块的自动化测试（参考[*第7章*](B20997_07.xhtml#_idTextAnchor363)，*调试模块*），您需要演示数据，因为Odoo中的绝大多数自动化测试都依赖于这些记录才能成功运行。
- en: Click **Continue** and wait until the new database is initialized. After, you
    will be redirected to the instance and connected as the administrator.
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**继续**并等待新数据库初始化。之后，您将被重定向到实例，并以管理员身份连接。
- en: Troubleshooting
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 故障排除
- en: If you are redirected to a login screen, this is probably because the `filter`
    option. Note that the `odoo-bin start` command does this silently, making only
    the current database available. To work around this, simply restart Odoo without
    the `start` command, as shown in the *Installing Odoo from the source* recipe.
    If you have a configuration file (refer to the *Storing the instance configuration
    in a file* recipe later in this chapter), check that the `db_filter` option is
    unset or set to a value matching the new database name.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您被重定向到登录屏幕，这可能是由于`filter`选项。请注意，`odoo-bin start`命令会静默执行，只提供当前数据库。为了解决这个问题，只需像在*从源安装Odoo*菜谱中所示的那样重新启动Odoo而不使用`start`命令。如果您有一个配置文件（请参阅本章后面的*将实例配置存储在文件中*菜谱），请检查`db_filter`选项是否未设置或设置为与新数据库名称匹配的值。
- en: Duplicating a database
  id: totrans-197
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 复制数据库
- en: 'Often, you will have an existing database, and you will want to experiment
    with it to try a procedure or run a test, but without modifying the existing data.
    The solution here is simple: duplicate the database and run the test on the copy.
    Repeat this as many times as required:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，您将有一个现有的数据库，并且您可能想对其进行实验以尝试一个程序或运行一个测试，但又不希望修改现有数据。这里的解决方案很简单：复制数据库并在副本上运行测试。根据需要重复此操作：
- en: 'On the database management screen, click on the **Duplicate Database** link
    next to the name of the database you wish to clone:'
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在数据库管理屏幕上，点击你想要克隆的数据库旁边的**重复数据库**链接：
- en: '![Figure 1.8 – The Duplicate Database dialog](img/B20997_01_8.0.jpg)'
  id: totrans-200
  prefs: []
  type: TYPE_IMG
  zh: '![图1.8 – 重复数据库对话框](img/B20997_01_8.0.jpg)'
- en: Figure 1.8 – The Duplicate Database dialog
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.8 – 重复数据库对话框
- en: 'Fill in the form, as follows:'
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照以下方式填写表格：
- en: '**Master Password**: This is the master password of the Odoo server'
  id: totrans-203
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主密码**：这是Odoo服务器的主密码'
- en: '**New Name**: The name you want to give to the copy'
  id: totrans-204
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**新名称**：你想要给副本的名称'
- en: Click **Continue**.
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**继续**。
- en: You can then click on the name of the newly created database on the database
    management screen to access the login screen for that database.
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以点击数据库管理屏幕上新创建的数据库的名称，以访问该数据库的登录屏幕。
- en: Removing a database
  id: totrans-207
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 删除数据库
- en: 'When you have finished your tests, you will want to clean up the duplicated
    databases. To do this, perform the following steps:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 当你完成测试后，你将想要清理重复的数据库。为此，执行以下步骤：
- en: 'On the database management screen, you will find the **Delete** button next
    to the name of the database. Clicking on it will bring up the following dialog:'
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在数据库管理屏幕上，你将在数据库名称旁边找到**删除**按钮。点击它将弹出以下对话框：
- en: '![Figure 1.9 – The Delete Database dialog](img/B20997_01_9.0.jpg)'
  id: totrans-210
  prefs: []
  type: TYPE_IMG
  zh: '![图1.9 – 删除数据库对话框](img/B20997_01_9.0.jpg)'
- en: Figure 1.9 – The Delete Database dialog
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.9 – 删除数据库对话框
- en: Fill in the form, as well as the **Master Password** field, which is the master
    password of the Odoo server.
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 填写表格，以及**主密码**字段，这是Odoo服务器的主密码。
- en: Click **Delete**.
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**删除**。
- en: Caution! Potential data loss!
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 警告！可能数据丢失！
- en: If you selected the wrong database and have no backup, there is no way to recover
    the lost data.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你选择了错误的数据库并且没有备份，将无法恢复丢失的数据。
- en: Backing up a database
  id: totrans-216
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 备份数据库
- en: 'To create a backup, perform the following steps:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建备份，执行以下步骤：
- en: 'On the database management screen, you will find the **Backup** button next
    to the database’s name. Clicking on it will bring up the following dialog:'
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在数据库管理屏幕上，你将在数据库名称旁边找到**备份**按钮。点击它将弹出以下对话框：
- en: '![Figure 1.10 – The Backup Database dialog](img/B20997_01_10.jpg)'
  id: totrans-219
  prefs: []
  type: TYPE_IMG
  zh: '![图1.10 – 备份数据库对话框](img/B20997_01_10.jpg)'
- en: Figure 1.10 – The Backup Database dialog
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.10 – 备份数据库对话框
- en: 'Fill in the form, as follows:'
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照以下方式填写表格：
- en: '`zip` for a production database since this is the only real full backup format.
    Only use the `pg_dump` format for a development database when you don’t care about
    the file store.'
  id: totrans-222
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`zip`用于生产数据库，因为这是唯一的真实完整备份格式。只有在你不关心文件存储的情况下，才使用`pg_dump`格式进行开发数据库备份。'
- en: Click **Backup**. The backup file will be downloaded to your browser.
  id: totrans-223
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**备份**。备份文件将被下载到你的浏览器。
- en: Restoring a database backup
  id: totrans-224
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 还原数据库备份
- en: 'If you need to restore a backup, this is what you need to do:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要恢复备份，你需要这样做：
- en: 'On the database management screen, you will find a **Restore Database** button
    at the bottom of the screen. Clicking on it will bring up the following dialog:'
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在数据库管理屏幕上，你将在屏幕底部找到**还原数据库**按钮。点击它将弹出以下对话框：
- en: '![Figure 1.11 – The Restore Database dialog](img/B20997_01_11.jpg)'
  id: totrans-227
  prefs: []
  type: TYPE_IMG
  zh: '![图1.11 – 还原数据库对话框](img/B20997_01_11.jpg)'
- en: Figure 1.11 – The Restore Database dialog
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.11 – 还原数据库对话框
- en: 'Fill in the form, as follows:'
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照以下方式填写表格：
- en: '**Master Password**: This is the master password of the Odoo server.'
  id: totrans-230
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主密码**：这是Odoo服务器的主密码。'
- en: '**File**: This is a previously downloaded Odoo backup.'
  id: totrans-231
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文件**：这是一个之前下载的Odoo备份。'
- en: '**Database Name**: Provide the name of the database in which the backup will
    be restored. The database must not exist on the server.'
  id: totrans-232
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据库名称**：提供要恢复备份的数据库的名称。该数据库必须在服务器上不存在。'
- en: '**This database might have been moved or copied**: Choose **This database was
    moved** if the original database was on another server or if it has been deleted
    from the current server. Otherwise, choose **This database is a copy**, which
    is the safe default option.'
  id: totrans-233
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**此数据库可能已被移动或复制**：如果原始数据库在另一台服务器上或已被从当前服务器删除，请选择**此数据库已移动**。否则，选择**此数据库是副本**，这是安全的默认选项。'
- en: Click **Continue**.
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**继续**。
- en: Note
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: 'It isn’t possible to restore a database on top of itself. If you try to do
    this, you will get an error message (**Database restore error: Database already
    exists**). You need to remove the database first.'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 无法在数据库之上还原数据库。如果你尝试这样做，你会得到一个错误消息（**数据库还原错误：数据库已存在**）。你需要先删除数据库。
- en: How it works...
  id: totrans-237
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: These features, apart from the **Change master password** screen, run PostgreSQL
    administration commands on the server and report back through the web interface.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 除了**更改主密码**屏幕外，这些功能在服务器上运行PostgreSQL管理命令并通过Web界面返回报告。
- en: The master password is a very important piece of information that only lives
    in the Odoo server configuration file and is never stored in the database. There
    used to be a default value of `admin`, but using this value is a security liability.
    In Odoo v9 and later, this is identified as an *unset* master password, and you
    are urged to change it when accessing the database administration interface. Even
    if it is stored in the configuration file under the `admin_passwd` entry, this
    is not the same as the password of the `admin` user; these are two independent
    passwords. The master password is set for an Odoo server process, which itself
    can handle multiple database instances, each of which has an independent `admin`
    user with their own password.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 主密码是仅存在于Odoo服务器配置文件中的一条非常重要的信息，永远不会存储在数据库中。曾经有一个默认值是`admin`，但使用此值是一个安全风险。在Odoo
    v9及以后的版本中，这被标识为*未设置*的主密码，并且当您访问数据库管理界面时，强烈建议您更改它。即使它存储在配置文件下的`admin_passwd`条目中，这也不等同于`admin`用户的密码；这两个密码是独立的。主密码是为Odoo服务器进程设置的，它可以处理多个数据库实例，每个实例都有一个独立的`admin`用户及其自己的密码。
- en: Security considerations
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 安全考虑
- en: Remember that we are considering a development environment in this chapter.
    The Odoo database management interface is something that needs to be secured when
    you are working on a production server as it gives access to a lot of sensitive
    information, especially if the server hosts Odoo instances for several different
    clients.
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 记住，在本章中，我们考虑的是开发环境。当您在生产服务器上工作时，Odoo数据库管理界面是需要被保护的东西，因为它可以访问大量敏感信息，尤其是如果服务器托管了多个不同客户的Odoo实例。
- en: To create a new database, Odoo uses the PostgreSQL `createdb` utility and calls
    the internal Odoo function to initialize the new database in the same way as when
    you start Odoo on an empty database.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建一个新的数据库，Odoo使用PostgreSQL的`createdb`工具，并调用内部Odoo函数以与您在空数据库上启动Odoo时相同的方式初始化新数据库。
- en: To duplicate a database, Odoo uses the `--template` option of `createdb`, passing
    the original database as an argument. This duplicates the structure of the template
    database in the new database using internal and optimized PostgreSQL routines,
    which is much faster than creating a backup and restoring it (especially when
    using the web interface, which requires you to download the backup file and upload
    it again).
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 要复制数据库，Odoo使用`createdb`的`--template`选项，将原始数据库作为参数传递。这使用内部和优化的PostgreSQL例程在新数据库中复制模板数据库的结构，这比创建备份然后恢复要快得多（尤其是在使用需要您下载备份文件并再次上传的Web界面时）。
- en: Backup and restore operations use the `pg_dump` and `pg_restore` utilities,
    respectively. When using the `zip` format, the backup will also include a copy
    of the file store that contains a copy of the documents when you configure Odoo
    so that it doesn’t keep these in the database; this is the default option in 14.0\.
    Unless you change it, these files reside in `~/.local/share/Odoo/filestore`.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 备份和恢复操作分别使用`pg_dump`和`pg_restore`工具。当使用`zip`格式时，备份还将包括一个文件存储的副本，其中包含当您配置Odoo使其不将这些文件保存在数据库中时的文档副本；这是14.0版本中的默认选项。除非您更改它，否则这些文件将驻留在`~/.local/share/Odoo/filestore`。
- en: If the backup becomes too large, downloading it may fail. This will be either
    because the Odoo server itself is unable to handle the large file in memory or
    because the server is running behind a reverse proxy because there is a limit
    to the size of HTTP responses that were set in the proxy. Conversely, for the
    same reasons, you will likely experience issues with the database restore operation.
    When you start running into these issues, it’s time to invest in a more robust
    external backup solution.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 如果备份变得过大，下载它可能会失败。这可能是由于Odoo服务器本身无法在内存中处理大文件，或者因为服务器运行在反向代理后面，因为代理中设置了HTTP响应大小的限制。相反，由于相同的原因，您可能会在数据库恢复操作中遇到问题。当您开始遇到这些问题时，是时候投资一个更健壮的外部备份解决方案了。
- en: There’s more...
  id: totrans-246
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'Experienced Odoo developers generally don’t use the database management interface
    and perform operations from the command line. To initialize a new database with
    demo data, for instance, the following single-line command can be used:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 经验丰富的Odoo开发者通常不使用数据库管理界面，而是从命令行执行操作。例如，要使用演示数据初始化新数据库，可以使用以下单行命令：
- en: '[PRE13]'
  id: totrans-248
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: The bonus of using this command line is that you can request add-ons to be installed
    while you are using it – for instance, `-``i sale,purchase,stock`.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 使用此命令行的优点是，您可以在使用它时请求安装附加组件 – 例如，`-i sale,purchase,stock`。
- en: 'To duplicate a database, stop the server and run the following commands:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 要复制数据库，停止服务器并运行以下命令：
- en: '[PRE14]'
  id: totrans-251
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Note that, in the context of development, the file store is often omitted.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，在开发环境中，通常省略文件存储。
- en: Note
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: The use of `createdb -T` only works if there are no active sessions on the database,
    which means that you have to shut down your Odoo server before duplicating the
    database from the command line.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`createdb -T`仅在数据库上没有活动会话时才有效，这意味着在从命令行复制数据库之前，您必须关闭您的Odoo服务器。
- en: 'To remove an instance, run the following command:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 要删除实例，请运行以下命令：
- en: '[PRE15]'
  id: totrans-256
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'To create a backup (assuming that the PostgreSQL server is running locally),
    use the following command:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建备份（假设PostgreSQL服务器在本地运行），请使用以下命令：
- en: '[PRE16]'
  id: totrans-258
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'To restore the backup, run the following command:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 要恢复备份，请运行以下命令：
- en: '[PRE17]'
  id: totrans-260
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Caution!
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 警告！
- en: If your Odoo instance uses a different user to connect to the database, you
    need to pass `-U username` so that the correct user is the owner of the restored
    database.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的Odoo实例使用不同的用户连接到数据库，您需要传递`-U username`以确保正确的用户是恢复的数据库的所有者。
- en: Storing the instance configuration in a file
  id: totrans-263
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将实例配置存储在文件中
- en: The `odoo-bin` script has dozens of options, and it is tedious to remember them
    all, as well as how to remember to set them properly when starting the server.
    Fortunately, it is possible to store them all in a configuration file and only
    specify the ones you want to alter for development, for example.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: '`odoo-bin`脚本有数十个选项，记住它们所有以及如何在启动服务器时正确设置它们是很繁琐的。幸运的是，可以将它们全部存储在配置文件中，并且只需指定您想要在开发中更改的选项。'
- en: How to do it...
  id: totrans-265
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何完成...
- en: 'For this recipe, perform the following steps:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 对于此配方，请执行以下步骤：
- en: 'To generate a configuration file for your Odoo instance, run the following
    command:'
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要为您的Odoo实例生成配置文件，请运行以下命令：
- en: '[PRE18]'
  id: totrans-268
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'You can add additional options, and their values will be saved in the generated
    file. All the unset options will be saved with their default value set. To get
    a list of possible options, use the following command:'
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以添加额外的选项，它们的值将保存在生成的文件中。所有未设置选项都将使用默认值保存。要获取可能的选项列表，请使用以下命令：
- en: '[PRE19]'
  id: totrans-270
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Edit the `myodoo.cfg` file (use the table in the following section for some
    parameters you may want to change). Then, to start the server with the saved options,
    run the following command:'
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编辑`myodoo.cfg`文件（使用以下章节中的表格来更改您可能想要更改的一些参数）。然后，要使用保存的选项启动服务器，请运行以下命令：
- en: '[PRE20]'
  id: totrans-272
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Note
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: The `--config` option is commonly abbreviated as `-c`.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: '`--config`选项通常缩写为`-c`。'
- en: How it works...
  id: totrans-275
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: At startup, Odoo loads its configuration in three passes. First, a set of default
    values for all options is initialized from the source code. After, the configuration
    is parsed, and then any value that’s defined in the file overrides the defaults.
    Finally, the command-line options are analyzed, and their values override the
    configuration that was obtained from the previous pass.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 启动时，Odoo通过三次遍历加载其配置。首先，从源代码初始化所有选项的默认值集。然后解析配置，然后任何在文件中定义的值将覆盖默认值。最后，分析命令行选项，它们的值将覆盖之前遍历中获得的配置。
- en: 'As we mentioned earlier, the names of the configuration variables can be found
    by looking at the names of the command-line options by removing the leading dashes
    and converting the middle dashes into underscores. There are a few exceptions
    to this, notably the following:'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们之前提到的，可以通过查看命令行选项的名称来找到配置变量的名称，方法是去除前导破折号并将中间破折号转换为下划线。这里有几个例外，特别是以下这些：
- en: '![Table 1.1 – Difference in Odoo parameters regarding the command line and
    the configuration file](img/Table_01.jpg)'
  id: totrans-278
  prefs: []
  type: TYPE_IMG
  zh: '![表1.1 – Odoo参数在命令行和配置文件中的差异](img/Table_01.jpg)'
- en: Table 1.1 – Difference in Odoo parameters regarding the command line and the
    configuration file
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 表1.1 – Odoo参数在命令行和配置文件中的差异
- en: 'Here’s a list of options that are commonly set through the configuration file:'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是一个通常通过配置文件设置的选项列表：
- en: '![Table 1.2 – Odoo parameters and their usage](img/Table_02.jpg)'
  id: totrans-281
  prefs: []
  type: TYPE_IMG
  zh: '![表 1.2 – Odoo 参数及其用法](img/Table_02.jpg)'
- en: Table 1.2 – Odoo parameters and their usage
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 表 1.2 – Odoo 参数及其用法
- en: 'Here’s a list of configuration options related to the database:'
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是一个与数据库相关的配置选项列表：
- en: '![Table 1.3 – Odoo parameters and their usage](img/Table_03.jpg)'
  id: totrans-284
  prefs: []
  type: TYPE_IMG
  zh: '![表 1.3 – Odoo 参数及其用法](img/Table_03.jpg)'
- en: Table 1.3 – Odoo parameters and their usage
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 表 1.3 – Odoo 参数及其用法
- en: The configuration file is parsed by Odoo using the Python `ConfigParser` module.
    However, the implementation in Odoo 11.0 has changed, and it is no longer possible
    to use variable interpolation. So, if you are used to defining values for variables
    from the values of other variables using the `%(section.variable)s` notation,
    you will need to change your habits and revert to explicit values.
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: Odoo 使用 Python 的 `ConfigParser` 模块解析配置文件。然而，Odoo 11.0 中的实现已经改变，不再可能使用变量插值。所以，如果你习惯于使用
    `%(section.variable)s` 语法从其他变量的值定义变量的值，你需要改变你的习惯，并回到显式值。
- en: 'Some options are not used in config files, but they are widely used during
    development:'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 一些选项在配置文件中未使用，但在开发过程中广泛使用：
- en: '![Table 1.4 – Odoo parameters and their usage](img/Table_04.jpg)'
  id: totrans-288
  prefs: []
  type: TYPE_IMG
  zh: '![表 1.4 – Odoo 参数及其用法](img/Table_04.jpg)'
- en: Table 1.4 – Odoo parameters and their usage
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 表 1.4 – Odoo 参数及其用法
- en: Activating Odoo developer tools
  id: totrans-290
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 激活 Odoo 开发者工具
- en: When using Odoo as a developer, you need to know how to activate **developer
    mode** in the web interface so that you can access the technical settings menu
    and developer information. Enabling debug mode will expose several advanced configuration
    options and fields. These options and fields are hidden in Odoo for better usability
    because they are not used daily.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 当作为开发者使用 Odoo 时，你需要知道如何在网页界面中激活**开发者模式**，以便你可以访问技术设置菜单和开发者信息。启用调试模式将暴露几个高级配置选项和字段。这些选项和字段在
    Odoo 中被隐藏，以提供更好的可用性，因为它们不是每天都会使用。
- en: How to do it...
  id: totrans-292
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: 'To activate developer mode in the web interface, perform the following steps:'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 在网页界面中激活开发者模式，请执行以下步骤：
- en: Connect to your instance and authenticate as `admin`.
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 连接到你的实例并以 `admin` 身份进行认证。
- en: Go to the **Settings** menu.
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往**设置**菜单。
- en: 'Scroll to the bottom and locate the **Developer** **Tools** section:'
  id: totrans-296
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 滚动到页面底部并找到**开发者工具**部分：
- en: '![Figure 1.12 – Links to activate different developer modes](img/B20997_01_12.jpg)'
  id: totrans-297
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.12 – 激活不同开发者模式的链接](img/B20997_01_12.jpg)'
- en: Figure 1.12 – Links to activate different developer modes
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.12 – 激活不同开发者模式的链接
- en: Click **Activate the** **developer mode**.
  id: totrans-299
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**激活** **开发者模式**。
- en: Wait for the UI to reload.
  id: totrans-300
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 等待用户界面重新加载。
- en: Alternative way
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 替代方法
- en: It is also possible to activate developer mode by editing the URL. Before the
    `#` sign, insert `?debug=1`. For example, if your current URL is `http://localhost:8069/web#menu_id=102&action=94`
    and you want to enable developer mode, then you need to change that URL to `http://localhost:8069/web?debug=1#menu_id=102&action=94`.
    Furthermore, if you want to use debug mode with assets, then change the URL to
    `http://localhost:8069/web?debug=assets#menu_id=102&action=94`.
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 也可以通过编辑 URL 来激活开发者模式。在 `#` 符号之前插入 `?debug=1`。例如，如果你的当前 URL 是 `http://localhost:8069/web#menu_id=102&action=94`
    并且你想启用开发者模式，那么你需要将那个 URL 更改为 `http://localhost:8069/web?debug=1#menu_id=102&action=94`。此外，如果你想要使用带有资源的调试模式，那么将
    URL 更改为 `http://localhost:8069/web?debug=assets#menu_id=102&action=94`。
- en: 'To exit developer mode, you can perform any one of the following operations:'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 要退出开发者模式，你可以执行以下任何一个操作：
- en: Edit the URL and write `?debug=0` in the query string
  id: totrans-304
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 编辑 URL 并在查询字符串中写入 `?debug=0`。
- en: Use **Deactivate the developer mode** from the same place in the **Settings**
    menu
  id: totrans-305
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从**设置**菜单中的相同位置使用**停用开发者模式**。
- en: Click on the bug icon in the top menu and click on the **Leave Developer** **Tools**
    option
  id: totrans-306
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在顶部菜单中点击虫子图标，然后点击**离开开发者工具**选项。
- en: 'Lots of developers are using browser extensions to toggle debug mode. By doing
    this, you can toggle debug mode quickly without accessing the **Settings** menu.
    These extensions are available for Firefox and Chrome. The following screenshot
    shows one such plugin you can use and find in the Chrome store:'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 许多开发者都在使用浏览器扩展来切换调试模式。通过这样做，你可以快速切换调试模式，而无需访问**设置**菜单。这些扩展适用于 Firefox 和 Chrome。以下截图显示了你可以使用并从
    Chrome 商店找到的一个插件：
- en: '![Figure 1.13 – Browser extension for debug mode](img/B20997_01_13.jpg)'
  id: totrans-308
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.13 – 调试模式的浏览器扩展](img/B20997_01_13.jpg)'
- en: Figure 1.13 – Browser extension for debug mode
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.13 – 调试模式的浏览器扩展
- en: Note
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: The behavior of the debug mode has changed since Odoo v13\. Since v13, the status
    of debug mode is stored in the session, implying that even if you have removed
    `?debug` from the URL, debug mode will still be active.
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 自Odoo v13以来，调试模式的行为已发生变化。从v13开始，调试模式的状态存储在会话中，这意味着即使你从URL中移除了`?debug`，调试模式仍然会保持激活状态。
- en: How it works...
  id: totrans-312
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'In developer mode, two things happen:'
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 在开发模式下，会发生两件事：
- en: You get tooltips when hovering over a field in a form view or over a column
    in a list view. These provide technical information about the field (internal
    name, type, and so on).
  id: totrans-314
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当你在表单视图中的一个字段上或列表视图中的一个列上悬停时，你会得到工具提示。这些提供了有关字段的技术信息（内部名称、类型等）。
- en: A drop-down menu with a bug icon is displayed next to the user’s menu in the
    top-right corner, giving you access to technical information about the model being
    displayed, the various related view definitions, the workflow, custom filter management,
    and so on.
  id: totrans-315
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在右上角用户菜单旁边显示一个带有虫子图标的下拉菜单，让你可以访问显示的模型的技术信息、各种相关视图定义、工作流程、自定义过滤器管理等等。
- en: There is a variant of developer mode called **Developer mode (with assets)**.
    This mode behaves like the normal developer mode, but the JavaScript and CSS code
    that’s sent to the browser is not minified, which means that the web development
    tools of your browser can easily be used to debug the JavaScript code (more on
    this in [*Chapter 15*](B20997_15.xhtml#_idTextAnchor861), *Web* *Client Development*).
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 存在一种名为**开发模式（带资产）**的开发模式变体。这种模式的行为类似于正常的开发模式，但发送到浏览器的JavaScript和CSS代码没有被压缩，这意味着你可以轻松地使用浏览器中的Web开发工具来调试JavaScript代码（更多内容请参阅[*第15章*](B20997_15.xhtml#_idTextAnchor861)，*Web*
    *客户端开发*）。
- en: Caution!
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 谨慎！
- en: Test your add-ons both with and without developer mode since the unminified
    versions of the JavaScript libraries can hide bugs that only bite you in the minified
    version.
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 在开发模式下和不带开发模式的情况下测试你的附加组件，因为JavaScript库的非压缩版本可能会隐藏只有在你压缩版本中才会出现的错误。
- en: Updating the add-on modules list
  id: totrans-319
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更新附加模块列表
- en: When a new add-on module is added, you need to run the **Update Module List**
    wizard to get your new application in the app list. In this recipe, you will learn
    how to update the app list.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 当添加新的附加模块时，你需要运行**更新模块列表**向导，以便将你的新应用程序添加到应用程序列表中。在这个配方中，你将学习如何更新应用程序列表。
- en: Getting ready
  id: totrans-321
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Start your instance and connect to it using your **Administrator** account.
    After doing this, activate developer mode (if you don’t know how to activate developer
    mode, refer to the *Activating Odoo developer* *tools* recipe).
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 使用你的**管理员**账户启动你的实例并连接到它。完成此操作后，激活开发模式（如果你不知道如何激活开发模式，请参阅*激活Odoo开发* *工具*配方）。
- en: How to do it…
  id: totrans-323
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'To update the list of available add-on modules in your instance, you need to
    perform the following steps:'
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: 要更新你的实例中可用的附加模块列表，你需要执行以下步骤：
- en: Open the **Apps** menu.
  id: totrans-325
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开**应用程序**菜单。
- en: 'Click **Update** **Apps List**:'
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**更新** **应用程序列表**：
- en: '![Figure 1.14 – Update Apps List](img/B20997_01_14.jpg)'
  id: totrans-327
  prefs: []
  type: TYPE_IMG
  zh: '![图1.14 – 更新应用程序列表](img/B20997_01_14.jpg)'
- en: Figure 1.14 – Update Apps List
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.14 – 更新应用程序列表
- en: 'In the dialog that appears, click **Update**:'
  id: totrans-329
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在出现的对话框中，点击**更新**：
- en: '![Figure 1.15 – Dialog to update the apps list](img/B20997_01_15.jpg)'
  id: totrans-330
  prefs: []
  type: TYPE_IMG
  zh: '![图1.15 – 更新应用程序列表的对话框](img/B20997_01_15.jpg)'
- en: Figure 1.15 – Dialog to update the apps list
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.15 – 更新应用程序列表的对话框
- en: At the end of the update, you can click on the **Apps** entry to see the updated
    list of available add-on modules. You will need to remove the default filter on
    **Apps** in the search box to see all of them.
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更新完成后，你可以点击**应用程序**条目来查看可用的附加模块的更新列表。你需要在搜索框中移除**应用程序**上的默认过滤器才能看到所有这些。
- en: How it works…
  id: totrans-333
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: When the `__manifest__.py` that’s stored in the add-on module directory. Odoo
    reads the manifest, expecting to find a Python dictionary. Unless the manifest
    contains a key `installable` instance set to `False`, the add-on module metadata
    is recorded in the database. If the module is already present, the information
    is updated. If not, a new record is created. If a previously available add-on
    module is not found, the record is not deleted from the list.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 当Odoo读取存储在附加模块目录中的`__manifest__.py`时。它期望找到一个Python字典。除非清单中包含一个设置为`False`的`installable`键，否则附加模块元数据将被记录在数据库中。如果模块已经存在，信息将被更新。如果没有，将创建一个新的记录。如果之前可用的附加模块未找到，则记录不会被从列表中删除。
- en: Note
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: An updated apps list is only required if you add the new add-on path after initializing
    the database. If you add the new add-on path to the configuration file before
    initializing the database, then there will be no need to update the module list
    manually.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 只有在你初始化数据库后添加新的附加路径时，才需要更新应用程序列表。如果你在初始化数据库之前将新的附加路径添加到配置文件中，那么就无需手动更新模块列表。
- en: 'To summarize what we have learned so far, after installing, you can start the
    Odoo server by using the following command line (if you are using a virtual environment,
    then you need to activate it first):'
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 总结到目前为止我们所学的，安装完成后，你可以通过以下命令行启动 Odoo 服务器（如果你使用的是虚拟环境，那么你首先需要激活它）：
- en: '[PRE21]'
  id: totrans-338
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: Once you’ve run the module, you can access Odoo from http://localhost:8069.
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦运行了模块，你就可以通过 http://localhost:8069 访问 Odoo。
- en: 'You can also use a configuration file to run Odoo, as follows:'
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以使用配置文件来运行 Odoo，如下所示：
- en: '[PRE22]'
  id: totrans-341
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Once you start the Odoo server, you can install/update modules from the **App**
    menu.
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦启动了 Odoo 服务器，你就可以从 **应用** 菜单中安装/更新模块。
