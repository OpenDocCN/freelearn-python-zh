<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Preface" id="8IL21-d9976ffc65994572ad672a3ef48f1135"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="pref06" class="calibre1"/>Preface</h1></div></div></div><p class="calibre8">You hold in your hands (or in your e-reader) the first book dedicated to writing code to be used with the SaltStack framework of tools. </p><div class="book" title="What this book covers"><div class="book"><div class="book"><div class="book"><div class="calibre17" id="calibre_pb_1"/>
</div></div></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Preface" id="8IL21-d9976ffc65994572ad672a3ef48f1135">
<div class="book" title="What this book covers">
<div class="book">
<div class="book">
<div class="book">
<h1 class="title" id="calibre_pb_2"><a id="ch00lvl1sec02" class="calibre1"/>What this book covers</h1></div></div></div><p class="calibre8">
<a class="calibre1" title="Chapter 1. Starting with the Basics" href="part0015_split_000.html#E9OE1-d9976ffc65994572ad672a3ef48f1135">Chapter 1</a>, <span class="strong"><em class="calibre9">Starting with the Basics</em></span>, starts with a discussion of the two core principles that this book focuses on: how Salt uses Python and how the Loader system works. These form the foundation of extending Salt.</p><p class="calibre8">
<a class="calibre1" title="Chapter 2. Writing Execution Modules" href="part0019_split_000.html#I3QM2-d9976ffc65994572ad672a3ef48f1135">Chapter 2</a>, <span class="strong"><em class="calibre9">Writing Execution Modules</em></span>, explains that the heavy lifting in most of Salt is performed by execution modules, which are often wrapped by other modules. A solid understanding of execution modules will also be key to understanding how other module types work.</p><p class="calibre8">
<a class="calibre1" title="Chapter 3. Extending Salt Configuration" href="part0023_split_000.html#LTSU2-d9976ffc65994572ad672a3ef48f1135">Chapter 3</a>, <span class="strong"><em class="calibre9">Extending Salt Configuration</em></span>, explains that the ability to dynamically manage configuration can make some modules far more useful. Some modules won't even work without dynamic configuration. Here, we explore different ways to provide that.</p><p class="calibre8">
<a class="calibre1" title="Chapter 4. Wrapping States Around Execution Modules" href="part0030_split_000.html#SJGS2-d9976ffc65994572ad672a3ef48f1135">Chapter 4</a>, <span class="strong"><em class="calibre9">Wrapping States Around Modules</em></span>, supports the fact that execution modules make things work, but state modules make that work persist. In this chapter, you will see how to manage execution modules using state modules.</p><p class="calibre8">
<a class="calibre1" title="Chapter 5. Rendering Data" href="part0033_split_000.html#VF2I1-d9976ffc65994572ad672a3ef48f1135">Chapter 5</a>, <span class="strong"><em class="calibre9">Rendering Data</em></span>, shows that the renderer system allows you to add your own templating systems, increasing the power of states. Jinja and YAML are all well and good, but sometimes, you need something more. </p><p class="calibre8">
<a class="calibre1" title="Chapter 6. Handling Return Data" href="part0038_split_000.html#147LC1-d9976ffc65994572ad672a3ef48f1135">Chapter 6</a>, <span class="strong"><em class="calibre9">Handling Return Data</em></span>, answers the query what happens to the data when a job finishes. There are many places it can go, and you can write modules to send it there.</p><p class="calibre8">
<a class="calibre1" title="Chapter 7. Scripting with Runners" href="part0047_split_000.html#1CQAE2-d9976ffc65994572ad672a3ef48f1135">Chapter 7</a>, <span class="strong"><em class="calibre9">Scripting with Runners</em></span>, shows that SaltStack knows that system administrators have used scripting languages for years, and they have provided a scripting environment that combines Python with the raw power of Salt.</p><p class="calibre8">
<a class="calibre1" title="Chapter 8. Adding External File Servers" href="part0051_split_000.html#1GKCM1-d9976ffc65994572ad672a3ef48f1135">Chapter 8</a>, <span class="strong"><em class="calibre9">Adding External File Servers</em></span>, advises not to just serve files from Salt Master. You can serve files from wherever you want with your own external file server module.</p><p class="calibre8">
<a class="calibre1" title="Chapter 9. Connecting to the Cloud" href="part0056_split_000.html#1LCVG1-d9976ffc65994572ad672a3ef48f1135">Chapter 9</a>, <span class="strong"><em class="calibre9">Connecting to the Cloud</em></span>, helps you find out how you can update existing cloud modules or add your own. Everyone uses the cloud now, and Salt Cloud connects it to Salt.</p><p class="calibre8">
<a class="calibre1" title="Chapter 10. Monitoring with Beacons" href="part0061_split_000.html#1Q5IA2-d9976ffc65994572ad672a3ef48f1135">Chapter 10</a>, <span class="strong"><em class="calibre9">Monitoring with Beacons</em></span>, helps us to solve the problem that Salt isn't normally associated with monitoring, which is a shame. Beacons are one way to integrate Salt into your monitoring framework.</p><p class="calibre8">
<a class="calibre1" title="Chapter 11. Extending the Master" href="part0065_split_000.html#1TVKI1-d9976ffc65994572ad672a3ef48f1135">Chapter 11</a>, <span class="strong"><em class="calibre9">Extending the Master</em></span>, explains that Salt provides a way for you to serve the administrative needs of the Master programmatically. Bonus points for tying in your own authentication system to Salt.</p><p class="calibre8">
<a class="calibre1" title="Appendix A. Connecting Different Modules" href="part0070_split_000.html#22O7C1-d9976ffc65994572ad672a3ef48f1135">Appendix A</a>, <span class="strong"><em class="calibre9">Connecting Different Modules</em></span>, gives solutions to how to fit the different components even if it is known that Salt modules are designed to play together. This appendix lays out how the different parts connect together.</p><p class="calibre8">
<a class="calibre1" title="Appendix B. Contributing Code Upstream" href="part0074_split_000.html#26I9K1-d9976ffc65994572ad672a3ef48f1135">Appendix B</a>, <span class="strong"><em class="calibre9">Contributing Code Upstream</em></span>, gives you tips to know where the project is screwed up or what features are missing. It doesn't have to be that way with Salt but going back to the community.</p></div></div>
<div class="book" title="What you need for this book" id="9H5K1-d9976ffc65994572ad672a3ef48f1135"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch00lvl1sec03" class="calibre1"/>What you need for this book</h1></div></div></div><p class="calibre8">This book assumes a reasonable amount of knowledge of both Salt and the Python programming language. While you may be able to slam out some code without much experience (indeed, that is how the author got started with both), you will find it much easier with these tools already under your belt.</p><p class="calibre8">While the examples in this book are tested and functional, they may not be applicable to your needs. They are designed to be simple and easily understood by one who is comfortable with both Python and Salt, while still showcasing a reasonably amount of functionality.</p><p class="calibre8">Salt currently has a baseline of Python 2.6, which means that many older Linux distributions are still supported. As of the first edition of this book, Salt does not currently run on the Python 3.x branch. Minion-side examples are expected to work in Windows as well, except when the dependencies that they rely on aren't available.</p><p class="calibre8">Because both the Master and the Minion can be run on the same machine, you only need one computer to perform the examples in this book. Many of the examples do refer to software that may not be preinstalled with your operating system. In those cases, the software should still be available for download.</p></div>
<div class="book" title="Who this book is for" id="AFM61-d9976ffc65994572ad672a3ef48f1135"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch00lvl1sec04" class="calibre1"/>Who this book is for</h1></div></div></div><p class="calibre8">This book is for both new and existing Salt developers who are looking to build and write new Salt modules. Some prior Python development experience is expected.</p></div>
<div class="book" title="Conventions" id="BE6O1-d9976ffc65994572ad672a3ef48f1135"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch00lvl1sec05" class="calibre1"/>Conventions</h1></div></div></div><p class="calibre8">In this book, you will find a number of text styles that distinguish between different kinds of information. Here are some examples of these styles and an explanation of their meaning.</p><p class="calibre8">Code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles are shown as follows: "If there is no <code class="email">__virtual__()</code> function, then the module will always be available on every system."</p><p class="calibre8">A block of code is set as follows:</p><div class="informalexample"><pre class="programlisting">'''
This module should be saved as salt/modules/mysqltest.py
'''
__virtualname__ = 'mysqltest'


def __virtual__():
    '''
    For now, just return the __virtualname__
    '''
    return __virtualname__


def ping():
    '''
    Returns True

    CLI Example:
        salt '*' mysqltest.ping
    '''
    return True</pre></div><p class="calibre8">Any command-line input or output is written as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">#salt-call mymodule.test</strong></span>
</pre></div><p class="calibre8">
<span class="strong"><strong class="calibre2">New terms</strong></span> and <span class="strong"><strong class="calibre2">important words</strong></span> are shown in bold. Words that you see on the screen, for example, in menus or dialog boxes, appear in the text like this: "When you visit your fork on GitHub again, you will see a link that says <span class="strong"><strong class="calibre2">New Pull Request</strong></span>."</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note01" class="calibre1"/>Note</h3><p class="calibre8">Warnings or important notes appear in a box like this.</p></div><div class="informalexample" title="Note"><h3 class="title2"><a id="tip01" class="calibre1"/>Tip</h3><p class="calibre8">Tips and tricks appear like this.</p></div></div>
<div class="book" title="Reader feedback" id="CCNA1-d9976ffc65994572ad672a3ef48f1135"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch00lvl1sec06" class="calibre1"/>Reader feedback</h1></div></div></div><p class="calibre8">Feedback from our readers is always welcome. Let us know what you think about this book—what you liked or disliked. Reader feedback is important for us as it helps us develop titles that you will really get the most out of.</p><p class="calibre8">To send us general feedback, simply e-mail <code class="email">&lt;<a class="calibre1" href="mailto:feedback@packtpub.com">feedback@packtpub.com</a>&gt;</code>, and mention the book's title in the subject of your message.</p><p class="calibre8">If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, see our author guide at <a class="calibre1" href="http://www.packtpub.com/authors">www.packtpub.com/authors</a>.</p></div>

<div id="page" style="height:0pt"/><div class="book" title="Customer support" id="DB7S1-d9976ffc65994572ad672a3ef48f1135"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch00lvl1sec07" class="calibre1"/>Customer support</h1></div></div></div><p class="calibre8">Now that you are the proud owner of a Packt book, we have a number of things to help you to get the most from your purchase.</p></div>

<div class="book" title="Customer support" id="DB7S1-d9976ffc65994572ad672a3ef48f1135">
<div class="book" title="Downloading the example code"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch00lvl2sec02" class="calibre1"/>Downloading the example code</h2></div></div></div><p class="calibre8">You can download the example code files for this book from your account at <a class="calibre1" href="http://www.packtpub.com">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="calibre1" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p><p class="calibre8">You can download the code files by following these steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Log in or register to our website using your e-mail address and password.</li><li class="listitem" value="2">Hover the mouse pointer on the <span class="strong"><strong class="calibre2">SUPPORT</strong></span> tab at the top.</li><li class="listitem" value="3">Click on <span class="strong"><strong class="calibre2">Code Downloads &amp; Errata</strong></span>.</li><li class="listitem" value="4">Enter the name of the book in the <span class="strong"><strong class="calibre2">Search</strong></span> box.</li><li class="listitem" value="5">Select the book for which you're looking to download the code files.</li><li class="listitem" value="6">Choose from the drop-down menu where you purchased this book from.</li><li class="listitem" value="7">Click on <span class="strong"><strong class="calibre2">Code Download</strong></span>.</li></ol><div class="calibre18"/></div><p class="calibre8">Once the file is downloaded, please make sure that you unzip or extract the folder using the latest version of:</p><div class="book"><ul class="itemizedlist"><li class="listitem">WinRAR / 7-Zip for Windows</li><li class="listitem">Zipeg / iZip / UnRarX for Mac</li><li class="listitem">7-Zip / PeaZip for Linux</li></ul></div></div></div>

<div class="book" title="Customer support" id="DB7S1-d9976ffc65994572ad672a3ef48f1135">
<div class="book" title="Downloading the color images of this book"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch00lvl2sec03" class="calibre1"/>Downloading the color images of this book</h2></div></div></div><p class="calibre8">We also provide you with a PDF file that has color images of the screenshots/diagrams used in this book. The color images will help you better understand the changes in the output. You can download this file from <a class="calibre1" href="https://www.packtpub.com/sites/default/files/downloads/ExtendingSaltStack_ColorImages.pdf">https://www.packtpub.com/sites/default/files/downloads/ExtendingSaltStack_ColorImages.pdf</a>.</p></div></div>

<div class="book" title="Customer support" id="DB7S1-d9976ffc65994572ad672a3ef48f1135">
<div class="book" title="Errata"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch00lvl2sec04" class="calibre1"/>Errata</h2></div></div></div><p class="calibre8">Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you find a mistake in one of our books—maybe a mistake in the text or the code—we would be grateful if you could report this to us. By doing so, you can save other readers from frustration and help us improve subsequent versions of this book. If you find any errata, please report them by visiting <a class="calibre1" href="http://www.packtpub.com/submit-errata">http://www.packtpub.com/submit-errata</a>, selecting your book, clicking on the <span class="strong"><strong class="calibre2">Errata Submission Form</strong></span> link, and entering the details of your errata. Once your errata are verified, your submission will be accepted and the errata will be uploaded to our website or added to any list of existing errata under the Errata section of that title.</p><p class="calibre8">To view the previously submitted errata, go to <a class="calibre1" href="https://www.packtpub.com/books/content/support">https://www.packtpub.com/books/content/support</a> and enter the name of the book in the search field. The required information will appear under the <span class="strong"><strong class="calibre2">Errata</strong></span> section.</p></div></div>

<div class="book" title="Customer support" id="DB7S1-d9976ffc65994572ad672a3ef48f1135">
<div class="book" title="Piracy"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch00lvl2sec05" class="calibre1"/>Piracy</h2></div></div></div><p class="calibre8">Piracy of copyrighted material on the Internet is an ongoing problem across all media. At Packt, we take the protection of our copyright and licenses very seriously. If you come across any illegal copies of our works in any form on the Internet, please provide us with the location address or website name immediately so that we can pursue a remedy.</p><p class="calibre8">Please contact us at <code class="email">&lt;<a class="calibre1" href="mailto:copyright@packtpub.com">copyright@packtpub.com</a>&gt;</code> with a link to the suspected pirated material.</p><p class="calibre8">We appreciate your help in protecting our authors and our ability to bring you valuable content.</p></div></div>

<div class="book" title="Customer support" id="DB7S1-d9976ffc65994572ad672a3ef48f1135">
<div class="book" title="Questions"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch00lvl2sec06" class="calibre1"/>Questions</h2></div></div></div><p class="calibre8">If you have a problem with any aspect of this book, you can contact us at <code class="email">&lt;<a class="calibre1" href="mailto:questions@packtpub.com">questions@packtpub.com</a>&gt;</code>, and we will do our best to address the problem.</p></div></div></body></html>