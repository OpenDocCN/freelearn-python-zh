<html><head></head><body>
<div id="_idContainer152">
<h1 class="chapter-number" id="_idParaDest-78"><a id="_idTextAnchor077"/><span class="koboSpan" id="kobo.1.1">4</span></h1>
<h1 id="_idParaDest-79"><a id="_idTextAnchor078"/><span class="koboSpan" id="kobo.2.1">Editing and Formatting with Ease in PyCharm</span></h1>
<p><span class="koboSpan" id="kobo.3.1">Leonardo Da Vinci, the great painter and sculptor, mused that his sculptures were fully formed in the blocks of stone from the quarry before he even saw the marble. </span><span class="koboSpan" id="kobo.3.2">Da Vinci explained that all he did was remove the pieces of marble that were not required for the form. </span><span class="koboSpan" id="kobo.3.3">In other words, his masterpieces were completed in his mind before a chisel touched the crude stone. </span><span class="koboSpan" id="kobo.3.4">In many ways, you are Da Vinci. </span><span class="koboSpan" id="kobo.3.5">You have a project in your head, fully formed, and you are eager to show the world your masterpiece. </span><span class="koboSpan" id="kobo.3.6">Instead of using a hammer and chisel to write your code, you are using PyCharm. </span><span class="koboSpan" id="kobo.3.7">In the previous chapters, we worked through the installation process and configuration of PyCharm. </span><span class="koboSpan" id="kobo.3.8">We also set up an interpreter for your project. </span><span class="koboSpan" id="kobo.3.9">Next up: the exploration of the main tools that you will use to craft your masterpiece, which mainly reside in </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">the editor.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">By now, you have discovered many of the obvious features of the editor. </span><span class="koboSpan" id="kobo.5.2">We know it handles a lot of the PEP-8 syntax rules automatically. </span><span class="koboSpan" id="kobo.5.3">We know we get the color-coded syntax. </span><span class="koboSpan" id="kobo.5.4">We also have observed that the </span><strong class="bold"><span class="koboSpan" id="kobo.6.1">integrated development environment</span></strong><span class="koboSpan" id="kobo.7.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.8.1">IDE</span></strong><span class="koboSpan" id="kobo.9.1">) will make suggestions on several different areas of coding, ranging from linting style rules </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">to auto-completion.</span></span></p>
<p><span class="koboSpan" id="kobo.11.1">This chapter will focus on the features of the editor that are less obvious. </span><span class="koboSpan" id="kobo.11.2">The product’s documentation provides keyboard shortcuts and editor basics that will not be discussed in this chapter. </span><span class="koboSpan" id="kobo.11.3">Instead, the following topics will </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">be covered:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.13.1">Real-time code inspection with automated fixes, which allows you to focus on development goals rather than on the rules of </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">Python coding.</span></span></li>
<li><span class="koboSpan" id="kobo.15.1">Various code-completion support features in PyCharm and how to leverage them. </span><span class="koboSpan" id="kobo.15.2">By using these, you’ll be able to code more quickly and more accurately. </span><span class="koboSpan" id="kobo.15.3">We will only focus on those tools that ship with PyCharm versus third-party </span><strong class="bold"><span class="koboSpan" id="kobo.16.1">artificial intelligence</span></strong><span class="koboSpan" id="kobo.17.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.18.1">AI</span></strong><span class="koboSpan" id="kobo.19.1">) enhancements that require plugins such as Kite or GitHub Copilot. </span><span class="koboSpan" id="kobo.19.2">These will be covered in </span><a href="B19644_15.xhtml#_idTextAnchor379"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.20.1">Chapter 15</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.21.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.22.1">Refactoring tools that allow you to polish and refine your code into the masterpiece that it can become through patience, discipline, and </span><span class="No-Break"><span class="koboSpan" id="kobo.23.1">good tooling.</span></span></li>
<li><span class="koboSpan" id="kobo.24.1">Documentation tools that will take you from the level of “good developer” to the level of “master developer.” </span><span class="koboSpan" id="kobo.24.2">It’s one thing to invent an amazing work of code. </span><span class="koboSpan" id="kobo.24.3">Documenting it so others can benefit from it takes your work to </span><span class="No-Break"><span class="koboSpan" id="kobo.25.1">another level.</span></span></li>
</ul>
<h1 id="_idParaDest-80"><a id="_idTextAnchor079"/><span class="koboSpan" id="kobo.26.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.27.1">In order to proceed through this chapter and the rest of the book, you will need </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.29.1">An installed and working Python interpreter. </span><span class="koboSpan" id="kobo.29.2">I’ll be using the latest </span><span class="No-Break"><span class="koboSpan" id="kobo.30.1">from </span></span><a href="https://python.org"><span class="No-Break"><span class="koboSpan" id="kobo.31.1">https://python.org</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.32.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.33.1">Installed copies of </span><strong class="source-inline"><span class="koboSpan" id="kobo.34.1">pip</span></strong><span class="koboSpan" id="kobo.35.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.36.1">virtualenv</span></strong><span class="koboSpan" id="kobo.37.1">. </span><span class="koboSpan" id="kobo.37.2">You get these automatically when you install Python on Windows, and MacOS has them included on every system. </span><span class="koboSpan" id="kobo.37.3">If you are using Linux, you need to install the package managers, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.38.1">pip</span></strong><span class="koboSpan" id="kobo.39.1">, and virtual environment tools, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.40.1">virtualenv</span></strong><span class="koboSpan" id="kobo.41.1">, separately. </span><span class="koboSpan" id="kobo.41.2">Our examples will use </span><strong class="source-inline"><span class="koboSpan" id="kobo.42.1">pip</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.43.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.44.1">virtualenv</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.46.1">An installed and working copy of PyCharm. </span><span class="koboSpan" id="kobo.46.2">Installation was covered in </span><a href="B19644_02.xhtml#_idTextAnchor028"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.47.1">Chapter 2</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.48.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.49.1">This book’s sample source code from GitHub can be found at </span><a href="https://github.com/PacktPublishing/Hands-On-Application-Development-with-PyCharm---Second-Edition/tree/main/chapter-04"><span class="koboSpan" id="kobo.50.1">https://github.com/PacktPublishing/Hands-On-Application-Development-with-PyCharm---Second-Edition/tree/main/chapter-04</span></a><span class="koboSpan" id="kobo.51.1">. </span><span class="koboSpan" id="kobo.51.2">We covered cloning the code in </span><a href="B19644_02.xhtml#_idTextAnchor028"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.52.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.53.1">, </span><em class="italic"><span class="koboSpan" id="kobo.54.1">Installation </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.55.1">and Configuration</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.56.1">.</span></span></li>
</ul>
<h1 id="_idParaDest-81"><a id="_idTextAnchor080"/><span class="koboSpan" id="kobo.57.1">Code analysis, inspection, and suggestion</span></h1>
<p><span class="koboSpan" id="kobo.58.1">Intelligent </span><a id="_idIndexMarker278"/><span class="koboSpan" id="kobo.59.1">code completion is essential to any programming tool’s adoption. </span><span class="koboSpan" id="kobo.59.2">The definition of a good code completion engine is one that is aware of high-level aspects of programming, including specifics of language syntax. </span><span class="koboSpan" id="kobo.59.3">The engine also must be aware of the lower-level specifics of the program you write. </span><span class="koboSpan" id="kobo.59.4">Many enhanced text editors support code completion but lack this level of sophistication. </span><span class="koboSpan" id="kobo.59.5">PyCharm stands out as an exceptionally sophisticated code editor, encompassing both the historical and modern aspects of code editors and offering a level of sophistication that surpasses many other enhanced text editors in terms of intelligent </span><span class="No-Break"><span class="koboSpan" id="kobo.60.1">code completion.</span></span></p>
<p><span class="koboSpan" id="kobo.61.1">The most common form of code completion is a large picklist of words that are matched as you type. </span><span class="koboSpan" id="kobo.61.2">The list of possibilities narrows as more letters are typed. </span><span class="koboSpan" id="kobo.61.3">Notepad++ is an enhanced text editor widely used by developers. </span><span class="koboSpan" id="kobo.61.4">I consider it a must-have tool for quick and easy edits when I am too impatient to wait on an IDE to fully load. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.62.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.63.1">.1</span></em><span class="koboSpan" id="kobo.64.1"> shows a session where I began typing some </span><span class="No-Break"><span class="koboSpan" id="kobo.65.1">Python code:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer117">
<span class="koboSpan" id="kobo.66.1"><img alt="Figure 4.1: Notepad++ uses a very simple mechanism for code highlighting and completion" src="image/B19644_04_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.67.1">Figure 4.1: Notepad++ uses a very simple mechanism for code highlighting and completion</span></p>
<p><span class="koboSpan" id="kobo.68.1">The tool does not intuitively know what is being typed; therefore, I must tell it that I am coding in Python. </span><span class="koboSpan" id="kobo.68.2">After the language is set, it will attempt to autocomplete everything, even though such an exercise is clearly futile. </span><span class="koboSpan" id="kobo.68.3">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.69.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.70.1">.1</span></em><span class="koboSpan" id="kobo.71.1">, I was going to type </span><span class="No-Break"><span class="koboSpan" id="kobo.72.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.73.1">
import time
def test_code():
  pass</span></pre> <p><span class="koboSpan" id="kobo.74.1">This clearly</span><a id="_idIndexMarker279"/><span class="koboSpan" id="kobo.75.1"> isn’t going to win me any Jolt awards. </span><span class="koboSpan" id="kobo.75.2">You see in the screenshot that the list is filtering a known list of words. </span><span class="koboSpan" id="kobo.75.3">Its only contextual point of reference is knowing that the file is a Python file. </span><span class="koboSpan" id="kobo.75.4">This isn’t very effective, but it is better </span><span class="No-Break"><span class="koboSpan" id="kobo.76.1">than nothing.</span></span></p>
<p><span class="koboSpan" id="kobo.77.1">Systems like these are little more than spell checkers. </span><span class="koboSpan" id="kobo.77.2">While a seasoned pro might scoff at the usefulness of such a simple system, the earliest IDEs that displayed this level of wizardry pioneered a feature we are now unwilling to live without: </span><span class="No-Break"><span class="koboSpan" id="kobo.78.1">code completion.</span></span></p>
<p><span class="koboSpan" id="kobo.79.1">PyCharm lies at the opposite end of the spectrum with respect to sophistication. </span><span class="koboSpan" id="kobo.79.2">Like Notepad++, PyCharm is aware of the keywords that comprise PyCharm. </span><span class="koboSpan" id="kobo.79.3">PyCharm, though, is able to glean insight into the structure of the objects that make up the standard library. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.80.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.81.1">.2</span></em><span class="koboSpan" id="kobo.82.1"> shows me typing some code into PyCharm, having created a simple file for </span><span class="No-Break"><span class="koboSpan" id="kobo.83.1">this example:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer118">
<span class="koboSpan" id="kobo.84.1"><img alt="Figure 4.2: PyCharm auto-completes based on its understanding of the time library" src="image/B19644_04_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.85.1">Figure 4.2: PyCharm auto-completes based on its understanding of the time library</span></p>
<p><span class="koboSpan" id="kobo.86.1">In this</span><a id="_idIndexMarker280"/><span class="koboSpan" id="kobo.87.1"> case, I have imported the </span><strong class="source-inline"><span class="koboSpan" id="kobo.88.1">time</span></strong><span class="koboSpan" id="kobo.89.1"> library just as I did in the Notepad++ example from </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.90.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.91.1">.1</span></em><span class="koboSpan" id="kobo.92.1">. </span><span class="koboSpan" id="kobo.92.2">I’m a little further along here. </span><span class="koboSpan" id="kobo.92.3">I have my function defined, and I’m going to simply print the current local time using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.93.1">time</span></strong><span class="koboSpan" id="kobo.94.1"> library I had already imported. </span><span class="koboSpan" id="kobo.94.2">As you can see in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.95.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.96.1">.2</span></em><span class="koboSpan" id="kobo.97.1">, PyCharm is offering completion against the contents of the </span><span class="No-Break"><span class="koboSpan" id="kobo.98.1">time library.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.99.1">Completing the auto-completion</span></p>
<p class="callout"><span class="koboSpan" id="kobo.100.1">Once the auto-completion list appears, you can press </span><em class="italic"><span class="koboSpan" id="kobo.101.1">Tab</span></em><span class="koboSpan" id="kobo.102.1"> or </span><em class="italic"><span class="koboSpan" id="kobo.103.1">Enter</span></em><span class="koboSpan" id="kobo.104.1"> to select the highlighted option. </span><span class="koboSpan" id="kobo.104.2">You can use the up and down arrow keys to move through the list, or you can click any of the list items with your mouse. </span><span class="koboSpan" id="kobo.104.3">You’ll work fastest, though, if you keep your fingers on </span><span class="No-Break"><span class="koboSpan" id="kobo.105.1">the keyboard.</span></span></p>
<p><span class="koboSpan" id="kobo.106.1">By now, you are starting to appreciate the code completion system offered by PyCharm. </span><span class="koboSpan" id="kobo.106.2">Let us further explore the capabilities of this </span><span class="No-Break"><span class="koboSpan" id="kobo.107.1">important tool.</span></span></p>
<h2 id="_idParaDest-82"><a id="_idTextAnchor081"/><span class="koboSpan" id="kobo.108.1">It duzunt assewm yew cna spel</span></h2>
<p><span class="koboSpan" id="kobo.109.1">Our simplistic word-list example from Notepad++ earlier already stands in sharp contrast to the more sophisticated</span><a id="_idIndexMarker281"/><span class="koboSpan" id="kobo.110.1"> features of PyCharm’s </span><a id="_idIndexMarker282"/><span class="koboSpan" id="kobo.111.1">auto-completion engine. </span><span class="koboSpan" id="kobo.111.2">Let’s dig a little deeper. </span><span class="koboSpan" id="kobo.111.3">If your tool relies on a word list, then the second your spelling steps out of line, your suggestion list dries up. </span><span class="koboSpan" id="kobo.111.4">In effect, the word-list method requires you to know what it is you are looking for while requiring it to be </span><span class="No-Break"><span class="koboSpan" id="kobo.112.1">spelled correctly.</span></span></p>
<p><span class="koboSpan" id="kobo.113.1">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.114.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.115.1">.3</span></em><span class="koboSpan" id="kobo.116.1">, you will see something a </span><span class="No-Break"><span class="koboSpan" id="kobo.117.1">little different:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer119">
<span class="koboSpan" id="kobo.118.1"><img alt="Figure 4.3: PyCharm finds all possibilities containing the text you’ve typed" src="image/B19644_04_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.119.1">Figure 4.3: PyCharm finds all possibilities containing the text you’ve typed</span></p>
<p><span class="koboSpan" id="kobo.120.1">PyCharm is designed to offer suggestions based on the letters that are typed. </span><span class="koboSpan" id="kobo.120.2">In other words, as you type </span><strong class="source-inline"><span class="koboSpan" id="kobo.121.1">cl</span></strong><span class="koboSpan" id="kobo.122.1">, the word </span><em class="italic"><span class="koboSpan" id="kobo.123.1">clock</span></em><span class="koboSpan" id="kobo.124.1"> might appear. </span><span class="koboSpan" id="kobo.124.2">The word </span><em class="italic"><span class="koboSpan" id="kobo.125.1">clock</span></em><span class="koboSpan" id="kobo.126.1"> will also appear if you type </span><strong class="source-inline"><span class="koboSpan" id="kobo.127.1">lo</span></strong><span class="koboSpan" id="kobo.128.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.129.1">ck</span></strong><span class="koboSpan" id="kobo.130.1">, or any consecutive letters contained in the list of keywords matched. </span><span class="koboSpan" id="kobo.130.2">Perfectly spelled words are not necessary. </span><span class="koboSpan" id="kobo.130.3">Just get in the ballpark, and the word you are searching for will likely </span><span class="No-Break"><span class="koboSpan" id="kobo.131.1">pop up.</span></span></p>
<h2 id="_idParaDest-83"><a id="_idTextAnchor082"/><span class="koboSpan" id="kobo.132.1">It understands your code</span></h2>
<p><span class="koboSpan" id="kobo.133.1">Good code completion</span><a id="_idIndexMarker283"/><span class="koboSpan" id="kobo.134.1"> is able to understand and autocomplete based on the language and the libraries in use. </span><span class="koboSpan" id="kobo.134.2">In our case, that’s Python, which has an enormous standard library compared to other languages. </span><span class="koboSpan" id="kobo.134.3">Python is designed around a “batteries included” philosophy. </span><span class="koboSpan" id="kobo.134.4">Contrast that with JavaScript as implemented in Node.js, where the only libraries you get are file and HTTP libraries. </span><span class="koboSpan" id="kobo.134.5">The .NET languages give you a small core. </span><span class="koboSpan" id="kobo.134.6">You can say the same about Golang. </span><span class="koboSpan" id="kobo.134.7">Most languages require you to use the package manager. </span><span class="koboSpan" id="kobo.134.8">The fact that PyCharm can do this is spectacular </span><span class="No-Break"><span class="koboSpan" id="kobo.135.1">by itself.</span></span></p>
<p><span class="koboSpan" id="kobo.136.1">PyCharm, being a great IDE, can also understand the code you’ve written. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.137.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.138.1">.4</span></em><span class="koboSpan" id="kobo.139.1"> shows the </span><strong class="source-inline"><span class="koboSpan" id="kobo.140.1">autocomplete_demo.py</span></strong><span class="koboSpan" id="kobo.141.1"> file, where I have added an import to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.142.1">no_problemo.py</span></strong><span class="koboSpan" id="kobo.143.1"> file. </span><span class="koboSpan" id="kobo.143.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.144.1">no_problemo.py</span></strong><span class="koboSpan" id="kobo.145.1"> file has one function in it called </span><strong class="source-inline"><span class="koboSpan" id="kobo.146.1">perfection()</span></strong><span class="koboSpan" id="kobo.147.1">. </span><span class="koboSpan" id="kobo.147.2">As you can see, PyCharm is able to see inside the file and provide autocompletion on the code I have written versus simply doing auto-complete from a language-based </span><span class="No-Break"><span class="koboSpan" id="kobo.148.1">word list:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer120">
<span class="koboSpan" id="kobo.149.1"><img alt="Figure 4.4: PyCharm provides autocompletion suggestions on the code you’ve written, as well as standard Python language and the standard library" src="image/B19644_04_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.150.1">Figure 4.4: PyCharm provides autocompletion suggestions on the code you’ve written, as well as standard Python language and the standard library</span></p>
<p><span class="koboSpan" id="kobo.151.1">I am offered auto-completion on the function name, as well as hints</span><a id="_idIndexMarker284"/><span class="koboSpan" id="kobo.152.1"> on the </span><strong class="bold"><span class="koboSpan" id="kobo.153.1">method signature</span></strong><span class="koboSpan" id="kobo.154.1">. </span><span class="koboSpan" id="kobo.154.2">If you’re unfamiliar with the term </span><em class="italic"><span class="koboSpan" id="kobo.155.1">method signature</span></em><span class="koboSpan" id="kobo.156.1">, it simply refers to the name, argument list, and </span><a id="_idIndexMarker285"/><span class="koboSpan" id="kobo.157.1">return values for a function or method. </span><span class="koboSpan" id="kobo.157.2">If you’ve included type hints, PyCharm will remind you of the argument names and types the function or method requires. </span><span class="koboSpan" id="kobo.157.3">This works with modules as well as classes if you’re </span><a id="_idIndexMarker286"/><span class="koboSpan" id="kobo.158.1">using </span><strong class="bold"><span class="koboSpan" id="kobo.159.1">object-oriented </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.160.1">programming</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.161.1"> (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.162.1">OOP</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.163.1">).</span></span></p>
<h2 id="_idParaDest-84"><a id="_idTextAnchor083"/><span class="koboSpan" id="kobo.164.1">Postfix code completion</span></h2>
<p><span class="koboSpan" id="kobo.165.1">Traditional</span><a id="_idIndexMarker287"/><span class="koboSpan" id="kobo.166.1"> code completion has been taken to the next level in PyCharm, but we are far from finished. </span><span class="koboSpan" id="kobo.166.2">Usually, hitting the period (</span><em class="italic"><span class="koboSpan" id="kobo.167.1">.</span></em><span class="koboSpan" id="kobo.168.1">) key on your keyboard triggers a list to appear. </span><span class="koboSpan" id="kobo.168.2">We are now used to that list containing what might come after the dot. </span><span class="koboSpan" id="kobo.168.3">However, what if PyCharm could give you suggestions on what might come </span><em class="italic"><span class="koboSpan" id="kobo.169.1">before</span></em><span class="koboSpan" id="kobo.170.1"> the dot? </span><span class="koboSpan" id="kobo.170.2">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.171.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.172.1">.5</span></em><span class="koboSpan" id="kobo.173.1">, we see an example of postfix code completion, which you will find in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.174.1">postfix_example.py</span></strong><span class="koboSpan" id="kobo.175.1"> file in the </span><a href="B19644_04.xhtml#_idTextAnchor077"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.176.1">Chapter 4</span></em></span></a> <span class="No-Break"><span class="koboSpan" id="kobo.177.1">sample code:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer121">
<span class="koboSpan" id="kobo.178.1"><img alt="Figure 4.5: Postfix completion in PyCharm can suggest what might come before the dot rather than simply what might come after" src="image/B19644_04_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.179.1">Figure 4.5: Postfix completion in PyCharm can suggest what might come before the dot rather than simply what might come after</span></p>
<p><span class="koboSpan" id="kobo.180.1">I can’t blame you if you are confused by seeing </span><strong class="source-inline"><span class="koboSpan" id="kobo.181.1">.if</span></strong><span class="koboSpan" id="kobo.182.1"> (if expr) as a possibility following what is clearly a string-typed variable. </span><span class="koboSpan" id="kobo.182.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.183.1">.if</span></strong><span class="koboSpan" id="kobo.184.1"> suggestion is not part of Python. </span><span class="koboSpan" id="kobo.184.2">It is a </span><strong class="bold"><span class="koboSpan" id="kobo.185.1">postfix suggestion</span></strong><span class="koboSpan" id="kobo.186.1">. </span><span class="koboSpan" id="kobo.186.2">If you</span><a id="_idIndexMarker288"/><span class="koboSpan" id="kobo.187.1"> complete this suggestion your code is transformed. </span><span class="koboSpan" id="kobo.187.2">The following code isn’t viable </span><span class="No-Break"><span class="koboSpan" id="kobo.188.1">Python syntax:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.189.1">
b.if</span></pre> <p><span class="koboSpan" id="kobo.190.1">Therefore, it is converted to </span><span class="No-Break"><span class="koboSpan" id="kobo.191.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.192.1">
if b:</span></pre> <p><span class="koboSpan" id="kobo.193.1">Just imagine </span><a id="_idIndexMarker289"/><span class="koboSpan" id="kobo.194.1">the possibilities! </span><span class="koboSpan" id="kobo.194.2">However, if you’re not the imaginative type, check out </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.195.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.196.1">.6</span></em><span class="koboSpan" id="kobo.197.1">, which shows PyCharm’s </span><strong class="bold"><span class="koboSpan" id="kobo.198.1">Postfix Completion</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.199.1">configuration options:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer122">
<span class="koboSpan" id="kobo.200.1"><img alt="Figure 4.6: PyCharm’s Postfix Completion configuration options" src="image/B19644_04_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.201.1">Figure 4.6: PyCharm’s Postfix Completion configuration options</span></p>
<p><span class="koboSpan" id="kobo.202.1">Naturally, these options are fully configurable. </span><span class="koboSpan" id="kobo.202.2">You can even add your own! </span><span class="koboSpan" id="kobo.202.3">The templates are not limited to Python. </span><span class="koboSpan" id="kobo.202.4">You</span><a id="_idIndexMarker290"/><span class="koboSpan" id="kobo.203.1"> can see in the list that there are configurations for TypeScript, JavaScript, and </span><strong class="bold"><span class="koboSpan" id="kobo.204.1">Structured Query Language</span></strong><span class="koboSpan" id="kobo.205.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.206.1">SQL</span></strong><span class="koboSpan" id="kobo.207.1">). </span><span class="koboSpan" id="kobo.207.2">This is important because application development is rarely limited to the scope of just the </span><span class="No-Break"><span class="koboSpan" id="kobo.208.1">Python language.</span></span></p>
<h2 id="_idParaDest-85"><a id="_idTextAnchor084"/><span class="koboSpan" id="kobo.209.1">Hippie completion</span></h2>
<p><span class="koboSpan" id="kobo.210.1">Hey, man! </span><span class="koboSpan" id="kobo.210.2">You wanna see something </span><a id="_idIndexMarker291"/><span class="koboSpan" id="kobo.211.1">that is like totally far out? </span><span class="koboSpan" id="kobo.211.2">It’s called </span><strong class="bold"><span class="koboSpan" id="kobo.212.1">cyclic word expansion</span></strong><span class="koboSpan" id="kobo.213.1">. </span><span class="koboSpan" id="kobo.213.2">Only total squares call it that, though. </span><span class="koboSpan" id="kobo.213.3">If you wanna be </span><em class="italic"><span class="koboSpan" id="kobo.214.1">hip</span></em><span class="koboSpan" id="kobo.215.1">, you’ll</span><a id="_idIndexMarker292"/><span class="koboSpan" id="kobo.216.1"> call it </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.217.1">hippie completion</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.218.1">!</span></span></p>
<p><span class="koboSpan" id="kobo.219.1">Hippie completion </span><a id="_idIndexMarker293"/><span class="koboSpan" id="kobo.220.1">is invoked by pressing </span><em class="italic"><span class="koboSpan" id="kobo.221.1">Alt</span></em><span class="koboSpan" id="kobo.222.1"> + </span><em class="italic"><span class="koboSpan" id="kobo.223.1">/</span></em><span class="koboSpan" id="kobo.224.1"> (Windows and Linux) or </span><em class="italic"><span class="koboSpan" id="kobo.225.1">⌥</span></em><span class="koboSpan" id="kobo.226.1"> + </span><em class="italic"><span class="koboSpan" id="kobo.227.1">/</span></em><span class="koboSpan" id="kobo.228.1"> on macOS. </span><span class="koboSpan" id="kobo.228.2">Once triggered, PyCharm will index all the files you currently have open and provide auto-completion suggestions based on words within that context. </span><span class="koboSpan" id="kobo.228.3">In effect, you are using the simplest form of auto-complete; a word list. </span><span class="koboSpan" id="kobo.228.4">The word list is generated on the fly from the words in the files you have open. </span><span class="koboSpan" id="kobo.228.5">They don’t have to be code. </span><span class="koboSpan" id="kobo.228.6">Plain text files, markup, markdown, or really any text will show up in the suggestions list based on a simple forward match. </span><span class="koboSpan" id="kobo.228.7">As you type, the list narrows. </span><span class="koboSpan" id="kobo.228.8">You can see an example in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.229.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.230.1">.7</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.231.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer123">
<span class="koboSpan" id="kobo.232.1"><img alt="Figure 4.7: Hippie completion is totally far-out!" src="image/B19644_04_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.233.1">Figure 4.7: Hippie completion is totally far-out!</span></p>
<p><span class="koboSpan" id="kobo.234.1">The text file on the right contains a list of words</span><a id="_idIndexMarker294"/><span class="koboSpan" id="kobo.235.1"> I generated at </span><a href="https://fungenerators.com/lorem-ipsum/hippie/"><span class="koboSpan" id="kobo.236.1">https://fungenerators.com/lorem-ipsum/hippie/</span></a><span class="koboSpan" id="kobo.237.1">. </span><span class="koboSpan" id="kobo.237.2">Unfortunately, it turns out, a lot of the iconic words from the hippie generation in the United States cannot be printed in a book of this caliber. </span><span class="koboSpan" id="kobo.237.3">We have the highest standards! </span><span class="koboSpan" id="kobo.237.4">So, I edited the list, and this was all that was left. </span><span class="koboSpan" id="kobo.237.5">These words are random, so please don’t try to construe any meaning from them, despite all the allegations about there being secret backward messages on albums by The Beatles. </span><span class="koboSpan" id="kobo.237.6">The code on the right can expand from that list using hippie completion. </span><span class="koboSpan" id="kobo.237.7">To </span><a id="_idIndexMarker295"/><span class="koboSpan" id="kobo.238.1">make this work, I typed </span><strong class="source-inline"><span class="koboSpan" id="kobo.239.1">print("pat</span></strong><span class="koboSpan" id="kobo.240.1"> then pressed </span><em class="italic"><span class="koboSpan" id="kobo.241.1">Alt</span></em><span class="koboSpan" id="kobo.242.1"> + </span><em class="italic"><span class="koboSpan" id="kobo.243.1">/</span></em><span class="koboSpan" id="kobo.244.1">. </span><span class="koboSpan" id="kobo.244.2">The word </span><em class="italic"><span class="koboSpan" id="kobo.245.1">patchouli</span></em><span class="koboSpan" id="kobo.246.1"> magically</span><a id="_idIndexMarker296"/><span class="koboSpan" id="kobo.247.1"> appeared! </span><span class="koboSpan" id="kobo.247.2">I hope this example was worth it for you. </span><span class="koboSpan" id="kobo.247.3">I may never get that smell out of </span><span class="No-Break"><span class="koboSpan" id="kobo.248.1">my keyboard!</span></span></p>
<p><span class="koboSpan" id="kobo.249.1">You can use </span><em class="italic"><span class="koboSpan" id="kobo.250.1">Alt</span></em><span class="koboSpan" id="kobo.251.1"> + </span><em class="italic"><span class="koboSpan" id="kobo.252.1">Shift</span></em><span class="koboSpan" id="kobo.253.1"> + </span><em class="italic"><span class="koboSpan" id="kobo.254.1">/</span></em><span class="koboSpan" id="kobo.255.1"> or </span><em class="italic"><span class="koboSpan" id="kobo.256.1">⌥</span></em><span class="koboSpan" id="kobo.257.1"> + </span><em class="italic"><span class="koboSpan" id="kobo.258.1">Shift</span></em><span class="koboSpan" id="kobo.259.1"> + </span><em class="italic"><span class="koboSpan" id="kobo.260.1">/</span></em><span class="koboSpan" id="kobo.261.1"> to enable backward cyclic word expansion, which matches from the end of the words backward to the beginning. </span><span class="koboSpan" id="kobo.261.2">If the powers that be had asked me (and they didn’t, because they never do) I’d have called this </span><strong class="bold"><span class="koboSpan" id="kobo.262.1">Ginger Rogers Completion</span></strong><span class="koboSpan" id="kobo.263.1">. </span><span class="koboSpan" id="kobo.263.2">Everyone</span><a id="_idIndexMarker297"/><span class="koboSpan" id="kobo.264.1"> thinks Fred Astaire was an amazing dancer in all the great Hollywood movies of the 1940s. </span><span class="koboSpan" id="kobo.264.2">Never forget, though, that his dance partner, Ginger Rogers, had to do everything Fred did, except she did it backward and in heels. </span><span class="koboSpan" id="kobo.264.3">That’s my suggestion. </span><span class="koboSpan" id="kobo.264.4">Who knows? </span><span class="koboSpan" id="kobo.264.5">If enough of you tweet </span><strong class="source-inline"><span class="koboSpan" id="kobo.265.1">#GingerRogersCompletion</span></strong><span class="koboSpan" id="kobo.266.1"> and reference this book, it might </span><span class="No-Break"><span class="koboSpan" id="kobo.267.1">catch on!</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.268.1">Pro hippie tip</span></p>
<p class="callout"><span class="koboSpan" id="kobo.269.1">Repeatedly pressing </span><em class="italic"><span class="koboSpan" id="kobo.270.1">Alt</span></em><span class="koboSpan" id="kobo.271.1"> + </span><em class="italic"><span class="koboSpan" id="kobo.272.1">/</span></em><span class="koboSpan" id="kobo.273.1"> (Windows and Linux) or </span><em class="italic"><span class="koboSpan" id="kobo.274.1">⌥</span></em><span class="koboSpan" id="kobo.275.1"> + </span><em class="italic"><span class="koboSpan" id="kobo.276.1">/</span></em><span class="koboSpan" id="kobo.277.1"> on macOS cycles through the list. </span><span class="koboSpan" id="kobo.277.2">You can just keep hitting the key combination until the word you are looking </span><span class="No-Break"><span class="koboSpan" id="kobo.278.1">for appears.</span></span></p>
<h2 id="_idParaDest-86"><a id="_idTextAnchor085"/><span class="koboSpan" id="kobo.279.1">Indexing</span></h2>
<p><span class="koboSpan" id="kobo.280.1">There are </span><a id="_idIndexMarker298"/><span class="koboSpan" id="kobo.281.1">various engines at work in powering PyCharm’s various code completion techniques. </span><span class="koboSpan" id="kobo.281.2">You might be wondering how it works. </span><span class="koboSpan" id="kobo.281.3">It isn’t dark sorcery, I assure you. </span><span class="koboSpan" id="kobo.281.4">The key to understanding it is to pay attention when PyCharm loads a project. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.282.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.283.1">.8</span></em><span class="koboSpan" id="kobo.284.1"> calls your attention to the bottom of the PyCharm application window. </span><span class="koboSpan" id="kobo.284.2">PyCharm kicks off several background processes that comb through your code and index every character. </span><span class="koboSpan" id="kobo.284.3">The index is then converted into an in-memory database that is used by the various engines </span><span class="No-Break"><span class="koboSpan" id="kobo.285.1">at play:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer124">
<span class="koboSpan" id="kobo.286.1"><img alt="Figure 4.8: Keep an eye on the bottom of the PyCharm window to know when background processes such as indexing are running" src="image/B19644_04_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.287.1">Figure 4.8: Keep an eye on the bottom of the PyCharm window to know when background processes such as indexing are running</span></p>
<p><span class="koboSpan" id="kobo.288.1">Normally, I </span><a id="_idIndexMarker299"/><span class="koboSpan" id="kobo.289.1">don’t really care how the magic works, but it is worth bringing up because there will be times when PyCharm seems slow or unresponsive. </span><span class="koboSpan" id="kobo.289.2">When PyCharm seems slow or if auto-completion isn’t working, check the area of the screen indicated in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.290.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.291.1">.8</span></em><span class="koboSpan" id="kobo.292.1"> and see whether there are indexing processes running. </span><span class="koboSpan" id="kobo.292.2">You’ll probably notice your CPU spike as well if you monitor such things. </span><span class="koboSpan" id="kobo.292.3">This is temporary. </span><span class="koboSpan" id="kobo.292.4">Once the indexing process completes, PyCharm will become </span><span class="No-Break"><span class="koboSpan" id="kobo.293.1">responsive again.</span></span></p>
<h2 id="_idParaDest-87"><a id="_idTextAnchor086"/><span class="koboSpan" id="kobo.294.1">Power Save Mode</span></h2>
<p><span class="koboSpan" id="kobo.295.1">One of the</span><a id="_idIndexMarker300"/><span class="koboSpan" id="kobo.296.1"> more cryptic entries in the PyCharm menu, shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.297.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.298.1">.9</span></em><span class="koboSpan" id="kobo.299.1">, is </span><strong class="bold"><span class="koboSpan" id="kobo.300.1">Power </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.301.1">Save Mode</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.302.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer125">
<span class="koboSpan" id="kobo.303.1"><img alt="Figure 4.9: The Power Save Mode menu option can be found under the File menu" src="image/B19644_04_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.304.1">Figure 4.9: The Power Save Mode menu option can be found under the File menu</span></p>
<p><span class="koboSpan" id="kobo.305.1">I remember</span><a id="_idIndexMarker301"/><span class="koboSpan" id="kobo.306.1"> the first time I clicked it. </span><span class="koboSpan" id="kobo.306.2">The streetlights throughout the city block where I live instantly got brighter. </span><span class="koboSpan" id="kobo.306.3">My electric meter that was spinning like a buzzsaw mere minutes ago was now lazily spinning slower than an abandoned top. </span><span class="koboSpan" id="kobo.306.4">Once, a guy at the power company even called and thanked me for doing my part in saving </span><span class="No-Break"><span class="koboSpan" id="kobo.307.1">the planet.</span></span></p>
<p><span class="koboSpan" id="kobo.308.1">OK, I’m making all that up, except for the part about the guy from the power company. </span><span class="koboSpan" id="kobo.308.2">That totally happened. </span><span class="koboSpan" id="kobo.308.3">The </span><strong class="bold"><span class="koboSpan" id="kobo.309.1">Power Save Mode</span></strong><span class="koboSpan" id="kobo.310.1"> option is designed to limit PyCharm’s power consumption by turning off all those background processes, including the indexing used to generate code completion suggestions. </span><span class="koboSpan" id="kobo.310.2">PyCharm will remind you of this using a message, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.311.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.312.1">.10</span></em><span class="koboSpan" id="kobo.313.1">. </span><span class="koboSpan" id="kobo.313.2">Not only can you see the warning message, but you can also see I don’t get any completion on line 5. </span><span class="koboSpan" id="kobo.313.3">I would have at least expected </span><strong class="source-inline"><span class="koboSpan" id="kobo.314.1">b.if</span></strong><span class="koboSpan" id="kobo.315.1"> from the </span><span class="No-Break"><span class="koboSpan" id="kobo.316.1">earlier example:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer126">
<span class="koboSpan" id="kobo.317.1"><img alt="Figure 4.10: A message reminds you that power save mode is on and that you will not be receiving the usual level of assistance from PyCharm" src="image/B19644_04_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.318.1">Figure 4.10: A message reminds you that power save mode is on and that you will not be receiving the usual level of assistance from PyCharm</span></p>
<p><span class="koboSpan" id="kobo.319.1">Personally, I consider</span><a id="_idIndexMarker302"/><span class="koboSpan" id="kobo.320.1"> this utterly barbaric! </span><span class="koboSpan" id="kobo.320.2">How are we supposed to work like this? </span><span class="koboSpan" id="kobo.320.3">Next, you’ll be telling me I don’t have access to the internet, Kite, GitHub Copilot, ChatGPT, or Stack Overflow! </span><span class="koboSpan" id="kobo.320.4">You’ll strip me of my very reasonably priced subscription to </span><a href="http://packtpub.com"><span class="koboSpan" id="kobo.321.1">packtpub.com</span></a><span class="koboSpan" id="kobo.322.1">, where I can get all the e-books I can read for one low price. </span><span class="koboSpan" id="kobo.322.2">Then you’ll take away my Herman Miller Aeron Chair and limit me to only one $14 mezzo-Grande half-fat triple foam double shot latte with rainbow jasmine-infused sprinkles per day! </span><span class="koboSpan" id="kobo.322.3">Why don’t you enact a dress code while you’re at it? </span><span class="koboSpan" id="kobo.322.4">Strike! </span><span class="No-Break"><span class="koboSpan" id="kobo.323.1">Strike! </span><span class="koboSpan" id="kobo.323.2">Strike!</span></span></p>
<p><span class="koboSpan" id="kobo.324.1">Sorry. </span><span class="koboSpan" id="kobo.324.2">I got a little carried away. </span><span class="koboSpan" id="kobo.324.3">Needless to say, this is probably the least favorite feature of the IDE. </span><span class="koboSpan" id="kobo.324.4">Maybe it is useful if you chewed up your laptop’s battery playing </span><em class="italic"><span class="koboSpan" id="kobo.325.1">Ghost Recon: Breakpoint</span></em><span class="koboSpan" id="kobo.326.1"> on an overseas flight, and upon landing, you suddenly get a call from the boss who needs something fixed right away. </span><span class="koboSpan" id="kobo.326.2">Suddenly, you need to squeeze every second out of that 5% battery level you have left. </span><span class="koboSpan" id="kobo.326.3">I hate it when </span><span class="No-Break"><span class="koboSpan" id="kobo.327.1">that happens.</span></span></p>
<h1 id="_idParaDest-88"><a id="_idTextAnchor087"/><span class="koboSpan" id="kobo.328.1">Customizing code completion</span></h1>
<p><span class="koboSpan" id="kobo.329.1">Customization </span><a id="_idIndexMarker303"/><span class="koboSpan" id="kobo.330.1">within PyCharm is an ongoing theme. </span><span class="koboSpan" id="kobo.330.2">It might have been easier to show you what you can’t customize, except that I haven’t actually found anything yet. </span><span class="koboSpan" id="kobo.330.3">Code completion is no different. </span><span class="koboSpan" id="kobo.330.4">Whether you prefer a very lightweight experience with little to no help or you want your handheld on every line of code, there is a way to make PyCharm into the editor you want to use </span><span class="No-Break"><span class="koboSpan" id="kobo.331.1">every day.</span></span></p>
<p><span class="koboSpan" id="kobo.332.1">To open the settings for code completion, venture back to the settings dialog we explored in </span><a href="B19644_02.xhtml#_idTextAnchor028"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.333.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.334.1">, </span><em class="italic"><span class="koboSpan" id="kobo.335.1">Installation and Configuration</span></em><span class="koboSpan" id="kobo.336.1">. </span><span class="koboSpan" id="kobo.336.2">You can reach it easily by clicking the </span><strong class="bold"><span class="koboSpan" id="kobo.337.1">File</span></strong><span class="koboSpan" id="kobo.338.1"> menu item and selecting </span><strong class="bold"><span class="koboSpan" id="kobo.339.1">Settings</span></strong><span class="koboSpan" id="kobo.340.1">. </span><span class="koboSpan" id="kobo.340.2">That brings up the settings dialog. </span><span class="koboSpan" id="kobo.340.3">If you recall from </span><a href="B19644_02.xhtml#_idTextAnchor028"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.341.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.342.1">, </span><em class="italic"><span class="koboSpan" id="kobo.343.1">Installation and Configuration</span></em><span class="koboSpan" id="kobo.344.1">, this dialog is massive! </span><span class="koboSpan" id="kobo.344.2">We’re looking for </span><strong class="bold"><span class="koboSpan" id="kobo.345.1">Editor</span></strong><span class="koboSpan" id="kobo.346.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.347.1">General</span></strong><span class="koboSpan" id="kobo.348.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.349.1">Code Completion</span></strong><span class="koboSpan" id="kobo.350.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.351.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.352.1">.11</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.353.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer127">
<span class="koboSpan" id="kobo.354.1"><img alt="Figure 4.11: The Code Completion settings allow you to customize the behavior of PyCharm’s Code Completion engine" src="image/B19644_04_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.355.1">Figure 4.11: The Code Completion settings allow you to customize the behavior of PyCharm’s Code Completion engine</span></p>
<p><span class="koboSpan" id="kobo.356.1">You should spend a moment going through everything you can do on this screen. </span><span class="koboSpan" id="kobo.356.2">PyCharm gives you a great deal of control! </span><span class="koboSpan" id="kobo.356.3">I promised this wouldn’t be a tedious accounting of</span><a id="_idIndexMarker304"/><span class="koboSpan" id="kobo.357.1"> every option. </span><span class="koboSpan" id="kobo.357.2">Instead, draw your attention to the most popular and potentially most useful </span><span class="No-Break"><span class="koboSpan" id="kobo.358.1">sett</span><a id="_idTextAnchor088"/><span class="koboSpan" id="kobo.359.1">ings available.</span></span></p>
<h2 id="_idParaDest-89"><a id="_idTextAnchor089"/><span class="koboSpan" id="kobo.360.1">Match case</span></h2>
<p><span class="koboSpan" id="kobo.361.1">Located at the</span><a id="_idIndexMarker305"/><span class="koboSpan" id="kobo.362.1"> top of the window, this option specifies whether items in the suggestion list should match the case of whatever you are typing. </span><span class="koboSpan" id="kobo.362.2">For example, if I wanted to type in an exception expression for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.363.1">KeyboardInterrupt</span></strong><span class="koboSpan" id="kobo.364.1"> exception in Python and the </span><strong class="bold"><span class="koboSpan" id="kobo.365.1">Match case</span></strong><span class="koboSpan" id="kobo.366.1"> option is enabled, I would have to type a capital letter </span><strong class="source-inline"><span class="koboSpan" id="kobo.367.1">K</span></strong><span class="koboSpan" id="kobo.368.1"> for the correct class name to be included in the suggestion list. </span><span class="koboSpan" id="kobo.368.2">Next to the </span><strong class="bold"><span class="koboSpan" id="kobo.369.1">Match case</span></strong><span class="koboSpan" id="kobo.370.1"> checkbox, you can also choose only the first letter’s case should be matched or whether this should apply to all </span><span class="No-Break"><span class="koboSpan" id="kobo.371.1">the letters.</span></span></p>
<p><span class="koboSpan" id="kobo.372.1">I personally always disable this checkbox so that I only have to type in, for example, a lowercase </span><strong class="source-inline"><span class="koboSpan" id="kobo.373.1">k</span></strong><span class="koboSpan" id="kobo.374.1"> to take advantage of code completion. </span><span class="koboSpan" id="kobo.374.2">When I am learning a new language or API, this setting can help me with a practice I call </span><em class="italic"><span class="koboSpan" id="kobo.375.1">property shopping</span></em><span class="koboSpan" id="kobo.376.1">. </span><span class="koboSpan" id="kobo.376.2">I don’t know what properties and methods are available, so an alphabetized list can be helpful. </span><span class="koboSpan" id="kobo.376.3">For example, every programming language has some sort of string-handling class or library. </span><span class="koboSpan" id="kobo.376.4">It is a very safe bet that the said library will have functions for trimming, which is to remove extra spaces from the front, end, or both ends of a string. </span><span class="koboSpan" id="kobo.376.5">There is always some sort of </span><strong class="source-inline"><span class="koboSpan" id="kobo.377.1">toUpper</span></strong><span class="koboSpan" id="kobo.378.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.379.1">toLower</span></strong><span class="koboSpan" id="kobo.380.1"> methods. </span><span class="koboSpan" id="kobo.380.2">These are all vital parts of defensive programming. </span><span class="koboSpan" id="kobo.380.3">A password input where a user accidentally includes a space at the beginning or end of the password makes for a frustrating user experience. </span><span class="koboSpan" id="kobo.380.4">Any conditional logic you use involving user input is easier to handle if you make everything upper or lowercase. </span><span class="koboSpan" id="kobo.380.5">Given these are so fundamental to our work, we know they will be on the list, but every language calls them something different. </span><span class="koboSpan" id="kobo.380.6">I work on projects that require switching between two or three languages, and it is very easy to type in the wrong function name. </span><span class="koboSpan" id="kobo.380.7">Take the method that converts a string to uppercase. </span><span class="koboSpan" id="kobo.380.8">In JavaScript, such a function looks </span><span class="No-Break"><span class="koboSpan" id="kobo.381.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.382.1">
let foo = "some user option";
if(foo.toUpperCase() === "SOME USER OPTION"){
 console.log("It matched!");
}</span></pre> <p><span class="koboSpan" id="kobo.383.1">The same code in PyCharm, which I might be creating only minutes later, would look </span><span class="No-Break"><span class="koboSpan" id="kobo.384.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.385.1">
foo = "some user option"
if foo.upper() == "SOME USER OPTION":
  print("It matched")</span></pre> <p><span class="koboSpan" id="kobo.386.1">In order to</span><a id="_idIndexMarker306"/><span class="koboSpan" id="kobo.387.1"> be effective, I need the word upper to be a match regardless of whether it is uppercase </span><span class="No-Break"><span class="koboSpan" id="kobo.388.1">or lowercase.</span></span></p>
<p><span class="koboSpan" id="kobo.389.1">Like everything we have seen in code completion, and for that matter, like everything in programming, there is a trade-off to this practice. </span><span class="koboSpan" id="kobo.389.2">Specifically, if </span><strong class="bold"><span class="koboSpan" id="kobo.390.1">Match case</span></strong><span class="koboSpan" id="kobo.391.1"> is disabled, sometimes the suggestion list might be populated by many more irrelevant options, which makes finding the correct API more difficult. </span><span class="koboSpan" id="kobo.391.2">At the same time, though, you will see a full list of what is possible, which can help you learn your way around and sometimes discover features in an API you had not imagined</span><a id="_idTextAnchor090"/> <span class="No-Break"><span class="koboSpan" id="kobo.392.1">were available.</span></span></p>
<h2 id="_idParaDest-90"><a id="_idTextAnchor091"/><span class="koboSpan" id="kobo.393.1">Sorting suggestions alphabetically</span></h2>
<p><span class="koboSpan" id="kobo.394.1">As its</span><a id="_idIndexMarker307"/><span class="koboSpan" id="kobo.395.1"> name suggests, this option allows you to sort the items in the suggestion list in alphabetical order. </span><span class="koboSpan" id="kobo.395.2">This feature is useful for long suggestion lists that require the developer to scroll through them carefully to find what they are looking for if they were not </span><span class="No-Break"><span class="koboSpan" id="kobo.396.1">ordered alphabetically.</span></span></p>
<p><span class="koboSpan" id="kobo.397.1">On multiple occasions, we have seen the dynamic nature of PyCharm, and it is once again demonstrated in this feature. </span><span class="koboSpan" id="kobo.397.2">Specifically, while interacting with a suggestion list in the editor, you can change the order of the items in the list at any time by clicking on the icon located in the bottom-right corner of the suggestion window, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.398.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.399.1">.12</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.400.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer128">
<span class="koboSpan" id="kobo.401.1"><img alt="Figure 4.12: You can change the way suggestions are sorted within the list itself" src="image/B19644_04_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.402.1">Figure 4.12: You can change the way suggestions are sorted within the list itself</span></p>
<p><span class="koboSpan" id="kobo.403.1">Clicking </span><a id="_idIndexMarker308"/><span class="koboSpan" id="kobo.404.1">the </span><strong class="bold"><span class="koboSpan" id="kobo.405.1">…</span></strong><span class="koboSpan" id="kobo.406.1"> (ellipsis) element allows you to change how the suggestions are sorted: by relevance or alphabetically </span><span class="No-Break"><span class="koboSpan" id="kobo.407.1">by name.</span></span></p>
<h2 id="_idParaDest-91"><a id="_idTextAnchor092"/><span class="koboSpan" id="kobo.408.1">Machine learning assisted completions</span></h2>
<p><span class="koboSpan" id="kobo.409.1">This</span><a id="_idIndexMarker309"/><span class="koboSpan" id="kobo.410.1"> newer option is simultaneously magical and scary. </span><span class="koboSpan" id="kobo.410.2">Enabled by default, PyCharm will train a machine learning model based on your code. </span><span class="koboSpan" id="kobo.410.3">This allows PyCharm to make suggestions based not only on your code but also that of thousands of other developers. </span><span class="koboSpan" id="kobo.410.4">Traditional code completion usually gives you suggestions for the next keyword, property, method name, or parameter you are about to type. </span><span class="koboSpan" id="kobo.410.5">Do not be surprised if PyCharm offers complete entire functions or blocks of code for you with machine learning assisted completions. </span><span class="koboSpan" id="kobo.410.6">You will see this for common tasks such as connecting to databases, working with pandas data frames, or validating </span><span class="No-Break"><span class="koboSpan" id="kobo.411.1">user input.</span></span></p>
<p><span class="koboSpan" id="kobo.412.1">The settings merely allow you to turn on various languages supported by PyCharm. </span><span class="koboSpan" id="kobo.412.2">Python, JavaScript, and TypeScript are enabled by default. </span><span class="koboSpan" id="kobo.412.3">Only SQL, a special-purpose language used for working with relational databases, is not enabled by default. </span><span class="koboSpan" id="kobo.412.4">I suspect this is because there are additional settings around your preferred SQL dialect both at the global and project level that contribute to suggestions. </span><span class="koboSpan" id="kobo.412.5">It would be awkward to expect a </span><a id="_idIndexMarker310"/><span class="koboSpan" id="kobo.413.1">tight list of suggestions given the number of databases PyCharm supports and the differences in their implementation of language elements not defined by standardized SQL. </span><span class="koboSpan" id="kobo.413.2">We’ll look at SQL and relational databases later in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.414.1">Chapter 11</span></em></span><span class="koboSpan" id="kobo.415.1">, </span><em class="italic"><span class="koboSpan" id="kobo.416.1">Understanding Database Management with PyCharm</span></em><span class="koboSpan" id="kobo.417.1">. </span><span class="koboSpan" id="kobo.417.2">I promise the experience will not</span><a id="_idTextAnchor093"/><span class="koboSpan" id="kobo.418.1"> leave </span><span class="No-Break"><span class="koboSpan" id="kobo.419.1">you bankrupt.</span></span></p>
<h2 id="_idParaDest-92"><a id="_idTextAnchor094"/><span class="koboSpan" id="kobo.420.1">Showing the documentation popup in [...] ms</span></h2>
<p><span class="koboSpan" id="kobo.421.1">When you </span><a id="_idIndexMarker311"/><span class="koboSpan" id="kobo.422.1">enable this feature, you will see the documentation in addition to the suggestion code. </span><span class="koboSpan" id="kobo.422.2">You will be able to understand what the code you are typing does rather than blindly accepting the suggestions. </span><span class="koboSpan" id="kobo.422.3">This is great for new developers, whether they are totally new to coding or just new to Python. </span><span class="koboSpan" id="kobo.422.4">The advantage of this feature is that you can go through the documentation of all the suggested items dynamically as you simply move the cursor down </span><span class="No-Break"><span class="koboSpan" id="kobo.423.1">the items.</span></span></p>
<p><span class="koboSpan" id="kobo.424.1">This is especially beneficial when working with classes and methods that have similar APIs. </span><span class="koboSpan" id="kobo.424.2">We will discuss this feature, along with other documentation-related functionalities, in the last section of </span><span class="No-Break"><span class="koboSpan" id="kobo.425.1">this chapter.</span></span></p>
<h2 id="_idParaDest-93"><a id="_idTextAnchor095"/><span class="koboSpan" id="kobo.426.1">Parameter info</span></h2>
<p><span class="koboSpan" id="kobo.427.1">Scroll down </span><a id="_idIndexMarker312"/><span class="koboSpan" id="kobo.428.1">past the JavaScript section, as seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.429.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.430.1">.13</span></em><span class="koboSpan" id="kobo.431.1">, and you’ll find an option for suggesting </span><span class="No-Break"><span class="koboSpan" id="kobo.432.1">parameter information:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer129">
<span class="koboSpan" id="kobo.433.1"><img alt="Figure 4.13: Scroll down past JavaScript to find options for showing parameter information" src="image/B19644_04_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.434.1">Figure 4.13: Scroll down past JavaScript to find options for showing parameter information</span></p>
<p><span class="koboSpan" id="kobo.435.1">The</span><a id="_idIndexMarker313"/><span class="koboSpan" id="kobo.436.1"> first option is straightforward. </span><span class="koboSpan" id="kobo.436.2">It controls the amount of time that must elapse before a suggestion appears. </span><span class="koboSpan" id="kobo.436.3">In general, suggestions are great unless you are teaching, doing a code review, or doing some sort of demo, in which case they can clutter up your screen. </span><span class="koboSpan" id="kobo.436.4">Sometimes it’s a good idea to raise the time limit so the suggestions or documentation are shown only if you linger for a </span><span class="No-Break"><span class="koboSpan" id="kobo.437.1">few seconds.</span></span></p>
<p><span class="koboSpan" id="kobo.438.1">The second option allows you to toggle, showing the full method signature. </span><span class="koboSpan" id="kobo.438.2">I love this feature. </span><span class="koboSpan" id="kobo.438.3">The code hint will show you the whole method signature so you can see all the arguments </span><span class="No-Break"><span class="koboSpan" id="kobo.439.1">at once.</span></span></p>
<p><span class="koboSpan" id="kobo.440.1">A method signature uniquely defines a function or method within the scope where it is declared. </span><span class="koboSpan" id="kobo.440.2">It consists of a name for the function. </span><span class="koboSpan" id="kobo.440.3">Along with the names, and preferably hints, for the type of the function’s arguments with some hints about the return type. </span><span class="koboSpan" id="kobo.440.4">These are not unique to Python. </span><span class="koboSpan" id="kobo.440.5">In fact, they are a little bit fuzzy in Python. </span><span class="koboSpan" id="kobo.440.6">Now compare it with a static language such as C#, which uses more strict programming structures. </span><span class="koboSpan" id="kobo.440.7">In Python, you can use type hints, which help developers to remember the expected types of the arguments being passed. </span><span class="koboSpan" id="kobo.440.8">Let’s look at an example of a method signature </span><span class="No-Break"><span class="koboSpan" id="kobo.441.1">without hints:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.442.1">
a = 5
b = 6
def add_two_ints(first, second):
  return a + b</span></pre> <p><span class="koboSpan" id="kobo.443.1">This is OK. </span><span class="koboSpan" id="kobo.443.2">This</span><a id="_idIndexMarker314"/><span class="koboSpan" id="kobo.444.1"> code will work as intended, and the intention of the developer is clear. </span><span class="koboSpan" id="kobo.444.2">Let’s look at the same function </span><span class="No-Break"><span class="koboSpan" id="kobo.445.1">with hints:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.446.1">
a = 5
b = 6
def add_two_ints(first: int, second: int) -&gt; int:
  return a + b</span></pre> <p><span class="koboSpan" id="kobo.447.1">This is much better! </span><span class="koboSpan" id="kobo.447.2">Now we know for certain the types that are expected as input parameters, and we know the type that is going to be returned. </span><span class="koboSpan" id="kobo.447.3">I said earlier that method signatures are “fuzzy” in Python. </span><span class="koboSpan" id="kobo.447.4">I said this because both code samples will work. </span><span class="koboSpan" id="kobo.447.5">Python ignores the hints entirely during compilation. </span><span class="koboSpan" id="kobo.447.6">The hints are just used by the tooling and make your Python code easier to read and understand. </span><span class="koboSpan" id="kobo.447.7">Adding hints to your code whenever possible will enhance the way you, and your teammates, see your method signatures if you turn on the </span><strong class="bold"><span class="koboSpan" id="kobo.448.1">Show full method </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.449.1">signatures</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.450.1"> option.</span></span></p>
<h1 id="_idParaDest-94"><a id="_idTextAnchor096"/><span class="koboSpan" id="kobo.451.1">Code analysis and automated fixes</span></h1>
<p><span class="koboSpan" id="kobo.452.1">Code completion is a standard feature of most code editors and IDEs. </span><span class="koboSpan" id="kobo.452.2">As we’ve seen, not all completion </span><a id="_idIndexMarker315"/><span class="koboSpan" id="kobo.453.1">engines are created equally. </span><span class="koboSpan" id="kobo.453.2">The same can be true for analysis engines. </span><span class="koboSpan" id="kobo.453.3">A code analysis engine is an extension of code completion in concept, if not in implementation. </span><span class="koboSpan" id="kobo.453.4">Code completion tries to predict the code you are writing and helps you finish more quickly. </span><span class="koboSpan" id="kobo.453.5">Code analysis examines the code you’ve written</span><a id="_idIndexMarker316"/><span class="koboSpan" id="kobo.454.1"> and attempts to determine whether or not the code will work when you run it. </span><span class="koboSpan" id="kobo.454.2">Just as with code completion, there are differing levels of complexity at play here and different processes examining </span><span class="No-Break"><span class="koboSpan" id="kobo.455.1">different things.</span></span></p>
<p><span class="koboSpan" id="kobo.456.1">The simplest form of analysis is</span><a id="_idIndexMarker317"/><span class="koboSpan" id="kobo.457.1"> called </span><em class="italic"><span class="koboSpan" id="kobo.458.1">linting</span></em><span class="koboSpan" id="kobo.459.1">. </span><span class="koboSpan" id="kobo.459.2">Pretty much every programming language has a linting tool, and Python is no exception. </span><span class="koboSpan" id="kobo.459.3">While there are many to choose from, PyCharm uses the popular </span><strong class="source-inline"><span class="koboSpan" id="kobo.460.1">pylint</span></strong><span class="koboSpan" id="kobo.461.1"> library </span><span class="No-Break"><span class="koboSpan" id="kobo.462.1">by default.</span></span></p>
<p><span class="koboSpan" id="kobo.463.1">A linter runs a tacit analysis of your code through a process of pattern matching. </span><span class="koboSpan" id="kobo.463.2">There are two</span><a id="_idIndexMarker318"/><span class="koboSpan" id="kobo.464.1"> linting operations: </span><strong class="bold"><span class="koboSpan" id="kobo.465.1">logical lint</span></strong><span class="koboSpan" id="kobo.466.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.467.1">stylistic lint</span></strong><span class="koboSpan" id="kobo.468.1">. </span><span class="koboSpan" id="kobo.468.2">A</span><a id="_idIndexMarker319"/><span class="koboSpan" id="kobo.469.1"> logical lint </span><a id="_idIndexMarker320"/><span class="koboSpan" id="kobo.470.1">looks for code errors, code with potentially unintentional results or side effects, and dangerous code patterns. </span><span class="koboSpan" id="kobo.470.2">A stylistic lint</span><a id="_idIndexMarker321"/><span class="koboSpan" id="kobo.471.1"> looks for code that doesn’t conform to common conventions. </span><span class="koboSpan" id="kobo.471.2">This is less of a problem with Python since the language already has a strict set of code formatting rules called </span><strong class="bold"><span class="koboSpan" id="kobo.472.1">Python Enhancement Proposal #8</span></strong><span class="koboSpan" id="kobo.473.1">. </span><span class="koboSpan" id="kobo.473.2">Nobody calls it that. </span><span class="koboSpan" id="kobo.473.3">Those in the </span><a id="_idIndexMarker322"/><span class="koboSpan" id="kobo.474.1">know simply call </span><span class="No-Break"><span class="koboSpan" id="kobo.475.1">it </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.476.1">PEP-8</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.477.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.478.1">Combined, you can think of </span><strong class="source-inline"><span class="koboSpan" id="kobo.479.1">pylint</span></strong><span class="koboSpan" id="kobo.480.1"> and, by extension, all linters, much like a spelling and grammar checker for regular text. </span><span class="koboSpan" id="kobo.480.2">The linter looks for misspelled keywords, malformed code, and obvious syntax errors. </span><span class="koboSpan" id="kobo.480.3">A linter can also enforce style guidelines, though really Python is already designed to enforce rules to make your code as human-readable </span><span class="No-Break"><span class="koboSpan" id="kobo.481.1">as possible.</span></span></p>
<p><span class="koboSpan" id="kobo.482.1">While it’s one thing to point out problems in your code, it is entirely more useful if the tool also suggests and even implements fixes to those problems. </span><span class="koboSpan" id="kobo.482.2">The same is true of humans. </span><span class="koboSpan" id="kobo.482.3">It is easy to point out flaws. </span><span class="koboSpan" id="kobo.482.4">Anybody can do that. </span><span class="koboSpan" id="kobo.482.5">Good advice on how to fix your flaws is more useful than criticism. </span><span class="koboSpan" id="kobo.482.6">So, in addition to linting, PyCharm offers a system that will offer to help you fix the problems exposed by </span><span class="No-Break"><span class="koboSpan" id="kobo.483.1">the linter.</span></span></p>
<h2 id="_idParaDest-95"><a id="_idTextAnchor097"/><span class="koboSpan" id="kobo.484.1">Problem detection</span></h2>
<p><span class="koboSpan" id="kobo.485.1">Problem detection</span><a id="_idIndexMarker323"/><span class="koboSpan" id="kobo.486.1"> is performed by PyCharm in real time as you type your code. </span><span class="koboSpan" id="kobo.486.2">The indexing process we’ve mentioned before plays a role here, but we’ll come back to that. </span><span class="koboSpan" id="kobo.486.3">First, let’s focus on the visible interface in the editor that shows you where your problems lie. </span><span class="koboSpan" id="kobo.486.4">There are four places to look, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.487.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.488.1">.14</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.489.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer130">
<span class="koboSpan" id="kobo.490.1"><img alt="Figure 4.14: Four places in the user interface tell you that you have problems" src="image/B19644_04_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.491.1">Figure 4.14: Four places in the user interface tell you that you have problems</span></p>
<p><span class="koboSpan" id="kobo.492.1">The </span><a id="_idIndexMarker324"/><span class="koboSpan" id="kobo.493.1">right gutter of the editor (1) will show you where all the problematic lines lie in the currently open file. </span><span class="koboSpan" id="kobo.493.2">This gutter is a compressed, miniature representation of your file. </span><span class="koboSpan" id="kobo.493.3">It is pretty common for a file to have hundreds or maybe even thousands of lines. </span><span class="koboSpan" id="kobo.493.4">You can click on the area in the gutter where you see the colored marks, and the editor will scroll to </span><span class="No-Break"><span class="koboSpan" id="kobo.494.1">that location.</span></span></p>
<p><span class="koboSpan" id="kobo.495.1">PyCharm will classify the problems into three basic categories: errors (red), warnings (yellow), and weak warnings (gray). </span><span class="koboSpan" id="kobo.495.2">This is reported for the whole file at the top of the gutter column with counts of each problem type (2). </span><span class="koboSpan" id="kobo.495.3">In addition to colors, this area gives you different shapes. </span><span class="koboSpan" id="kobo.495.4">The error icon is a round red circle with an exclamation point within it. </span><span class="koboSpan" id="kobo.495.5">Warnings are a triangle with an exclamation point. </span><span class="koboSpan" id="kobo.495.6">Weak warnings are also depicted using a triangle with an exclamation, but they appear considerably dimmer. </span><span class="koboSpan" id="kobo.495.7">If no problems are detected, you are rewarded with a green check mark. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.496.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.497.1">.15</span></em><span class="koboSpan" id="kobo.498.1"> shows two files. </span><span class="koboSpan" id="kobo.498.2">One has no problems (1), while the other has a number of issues in different </span><span class="No-Break"><span class="koboSpan" id="kobo.499.1">categories (2):</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer131">
<span class="koboSpan" id="kobo.500.1"><img alt="Figure 4.15: The file on the bottom is devoid of any problems, while the one on top isn’t quite as lucky" src="image/B19644_04_15.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.501.1">Figure 4.15: The file on the bottom is devoid of any problems, while the one on top isn’t quite as lucky</span></p>
<p><span class="koboSpan" id="kobo.502.1">Anything </span><a id="_idIndexMarker325"/><span class="koboSpan" id="kobo.503.1">marked in red is an error that will probably prevent your program from running correctly or at all. </span><span class="koboSpan" id="kobo.503.2">A warning means your code will probably run, but there are some obvious cases where it won’t perform as expected. </span><span class="koboSpan" id="kobo.503.3">A weak warning is usually a minor flaw, such as a variable name that doesn’t conform to an English dictionary word. </span><span class="koboSpan" id="kobo.503.4">If your locale is set to a language other than English, PyCharm will flag words from your </span><span class="No-Break"><span class="koboSpan" id="kobo.504.1">local language.</span></span></p>
<p><span class="koboSpan" id="kobo.505.1">The second place to look for problems is within the editor window itself. </span><span class="koboSpan" id="kobo.505.2">Look back at </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.506.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.507.1">.15</span></em><span class="koboSpan" id="kobo.508.1"> at line 13. </span><span class="koboSpan" id="kobo.508.2">You’ll see a squiggly red (trust me) underline beneath the word </span><strong class="source-inline"><span class="koboSpan" id="kobo.509.1">math</span></strong><span class="koboSpan" id="kobo.510.1">. </span><span class="koboSpan" id="kobo.510.2">The colors of the lines correspond with the severity of the problem. </span><span class="koboSpan" id="kobo.510.3">The right-hand gutter shows you where the problem is located, while the underlines show you the problem directly on the offending line. </span><span class="koboSpan" id="kobo.510.4">If you hover your mouse over whatever is underlined, you’ll get a description of the problem. </span><span class="koboSpan" id="kobo.510.5">I’ll go into more depth on this later in this chapter when we talk</span><a id="_idIndexMarker326"/><span class="koboSpan" id="kobo.511.1"> about </span><strong class="bold"><span class="koboSpan" id="kobo.512.1">intentions</span></strong><span class="koboSpan" id="kobo.513.1">, which are suggestions about how to fix problems in </span><span class="No-Break"><span class="koboSpan" id="kobo.514.1">your code.</span></span></p>
<p><span class="koboSpan" id="kobo.515.1">The third place you’ll find indicators of problems is the project explorer. </span><span class="koboSpan" id="kobo.515.2">Refer back to </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.516.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.517.1">.15</span></em><span class="koboSpan" id="kobo.518.1">, area 3. </span><span class="koboSpan" id="kobo.518.2">There is a Python package called </span><strong class="source-inline"><span class="koboSpan" id="kobo.519.1">bad_actor</span></strong><span class="koboSpan" id="kobo.520.1">. </span><span class="koboSpan" id="kobo.520.2">That file isn’t open in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.521.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.522.1">.15</span></em><span class="koboSpan" id="kobo.523.1">, but I opened it when I created it, typed in some incomplete code, then closed the file. </span><span class="koboSpan" id="kobo.523.2">You can see the file open in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.524.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.525.1">.16</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.526.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer132">
<span class="koboSpan" id="kobo.527.1"><img alt="Figure 4.16: Silly me! I started typing in the file but never finished" src="image/B19644_04_16.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.528.1">Figure 4.16: Silly me! </span><span class="koboSpan" id="kobo.528.2">I started typing in the file but never finished</span></p>
<p><span class="koboSpan" id="kobo.529.1">If there is </span><a id="_idIndexMarker327"/><span class="koboSpan" id="kobo.530.1">an error in the file you aren’t currently working on, you’ll find it flagged in the file list. </span><span class="koboSpan" id="kobo.530.2">The warning will bubble up through the directory system. </span><span class="koboSpan" id="kobo.530.3">There’s a red squiggly line at the top project folder, another in the folder for the package, and still another underline beneath the file where the problem lies. </span><span class="koboSpan" id="kobo.530.4">PyCharm doesn’t examine closed files. </span><span class="koboSpan" id="kobo.530.5">It only examines files you open, but once it finds the problem, it will remember where it is and continue to warn you until you fix </span><span class="No-Break"><span class="koboSpan" id="kobo.531.1">the problem.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.532.1">Bad actor</span></p>
<p class="callout"><span class="koboSpan" id="kobo.533.1">I needed an exemplary bad actor for the previous visual pun. </span><span class="koboSpan" id="kobo.533.2">Kevin Costner is a bad American actor. </span><span class="koboSpan" id="kobo.533.3">He certainly isn’t the worst, but he’s easily in the top 10. </span><span class="koboSpan" id="kobo.533.4">If you don’t believe me, watch the movie </span><em class="italic"><span class="koboSpan" id="kobo.534.1">Dances with Wolves</span></em><span class="koboSpan" id="kobo.535.1">. </span><span class="koboSpan" id="kobo.535.2">If you still don’t believe me, watch </span><em class="italic"><span class="koboSpan" id="kobo.536.1">The Bodyguard</span></em><span class="koboSpan" id="kobo.537.1">. </span><span class="koboSpan" id="kobo.537.2">If you still think he’s great, watch </span><em class="italic"><span class="koboSpan" id="kobo.538.1">Waterworld</span></em><span class="koboSpan" id="kobo.539.1"> and realize he financed that movie out of his own pocket because he was convinced it would be </span><span class="No-Break"><span class="koboSpan" id="kobo.540.1">a mega-hit.</span></span></p>
<p><span class="koboSpan" id="kobo.541.1">The fourth place is the problems window. </span><span class="koboSpan" id="kobo.541.2">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.542.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.543.1">.17</span></em><span class="koboSpan" id="kobo.544.1">, you can see a red dot over an icon in area 4 in </span><a id="_idIndexMarker328"/><span class="koboSpan" id="kobo.545.1">the screenshot. </span><span class="koboSpan" id="kobo.545.2">Click the icon, and the problems window will open and show you a list of faults, as seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.546.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.547.1">.17</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.548.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer133">
<span class="koboSpan" id="kobo.549.1"><img alt="Figure 4.17: Open the problem window to see a list of all your problems. Only your code problems are displayed. Life problems are not shown" src="image/B19644_04_17.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.550.1">Figure 4.17: Open the problem window to see a list of all your problems. </span><span class="koboSpan" id="kobo.550.2">Only your code problems are displayed. </span><span class="koboSpan" id="kobo.550.3">Life problems are not shown</span></p>
<h2 id="_idParaDest-96"><a id="_idTextAnchor098"/><span class="koboSpan" id="kobo.551.1">Syntax errors</span></h2>
<p><span class="koboSpan" id="kobo.552.1">Syntax errors</span><a id="_idIndexMarker329"/><span class="koboSpan" id="kobo.553.1"> are usually the shallowest errors exposed by an IDE. </span><span class="koboSpan" id="kobo.553.2">We’ve seen a few already. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.554.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.555.1">.17</span></em><span class="koboSpan" id="kobo.556.1"> shows an incomplete function definition, so it is flagged in red as a syntax error. </span><span class="koboSpan" id="kobo.556.2">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.557.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.558.1">.14</span></em><span class="koboSpan" id="kobo.559.1">, line 13 has a red underline beneath the word </span><strong class="source-inline"><span class="koboSpan" id="kobo.560.1">math</span></strong><span class="koboSpan" id="kobo.561.1">. </span><span class="koboSpan" id="kobo.561.2">PyCharm recognizes this as a reference to the Python </span><strong class="source-inline"><span class="koboSpan" id="kobo.562.1">math</span></strong><span class="koboSpan" id="kobo.563.1"> library, which I have neglected to import. </span><span class="koboSpan" id="kobo.563.2">This throws an unresolved reference error. </span><span class="koboSpan" id="kobo.563.3">These kinds of errors are always marked in red as severe errors because they will prevent the program </span><span class="No-Break"><span class="koboSpan" id="kobo.564.1">from running.</span></span></p>
<h2 id="_idParaDest-97"><a id="_idTextAnchor099"/><span class="koboSpan" id="kobo.565.1">Duplicated code</span></h2>
<p><span class="koboSpan" id="kobo.566.1">If you </span><a id="_idIndexMarker330"/><span class="koboSpan" id="kobo.567.1">make a habit of copying and pasting code within your project or even between different projects, you can expect a warning from PyCharm. </span><span class="koboSpan" id="kobo.567.2">Duplicated code is a sign your project is </span><span class="No-Break"><span class="koboSpan" id="kobo.568.1">in trouble.</span></span></p>
<p><span class="koboSpan" id="kobo.569.1">The best practice is to follow the </span><a id="_idIndexMarker331"/><span class="koboSpan" id="kobo.570.1">concept called </span><strong class="bold"><span class="koboSpan" id="kobo.571.1">Don’t Repeat Yourself</span></strong><span class="koboSpan" id="kobo.572.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.573.1">DRY</span></strong><span class="koboSpan" id="kobo.574.1">). </span><span class="koboSpan" id="kobo.574.2">I’ll say it again. </span><span class="koboSpan" id="kobo.574.3">You want your code to always be DRY. </span><span class="koboSpan" id="kobo.574.4">Never repeat your code by copying and pasting. </span><span class="koboSpan" id="kobo.574.5">Make sure it’s DRY. </span><span class="koboSpan" id="kobo.574.6">OK, I’ll stop if you promise to heed PyCharm’s warnings about code not </span><span class="No-Break"><span class="koboSpan" id="kobo.575.1">being DRY.</span></span></p>
<p><span class="koboSpan" id="kobo.576.1">When you find this problem within a single project, you can usually fix it by hoisting the duplicated code into a function and calling the function from the parts of your code where the </span><span class="No-Break"><span class="koboSpan" id="kobo.577.1">duplicates lie.</span></span></p>
<p><span class="koboSpan" id="kobo.578.1">If you get flagged for copying and pasting between projects, you should turn the duplicated code into a Python package that can be shared </span><span class="No-Break"><span class="koboSpan" id="kobo.579.1">between projects.</span></span></p>
<h2 id="_idParaDest-98"><a id="_idTextAnchor100"/><span class="koboSpan" id="kobo.580.1">PEP-8 problems</span></h2>
<p><span class="koboSpan" id="kobo.581.1">PyCharm’s</span><a id="_idIndexMarker332"/><span class="koboSpan" id="kobo.582.1"> linter alerts you to styling problems in your code that violate PEP-8. </span><span class="koboSpan" id="kobo.582.2">The biggest problem for developers new to Python is dealing with the rules around white space. </span><span class="koboSpan" id="kobo.582.3">Indentions and empty lines between functions are all part of the PEP-8 rules designed to keep your code very readable. </span><span class="koboSpan" id="kobo.582.4">Most PEP-8 problems are flagged </span><span class="No-Break"><span class="koboSpan" id="kobo.583.1">as warnings.</span></span></p>
<h2 id="_idParaDest-99"><a id="_idTextAnchor101"/><span class="koboSpan" id="kobo.584.1">Dead code</span></h2>
<p><span class="koboSpan" id="kobo.585.1">This is</span><a id="_idIndexMarker333"/><span class="koboSpan" id="kobo.586.1"> my personal pet peeve. </span><span class="koboSpan" id="kobo.586.2">Someone writes some code, which ultimately gets replaced with a different function. </span><span class="koboSpan" id="kobo.586.3">Both the old and the unused function are sitting in the code file, along with the new one. </span><span class="koboSpan" id="kobo.586.4">They might have similar names. </span><span class="koboSpan" id="kobo.586.5">They might even be in different files. </span><span class="koboSpan" id="kobo.586.6">When I was a kid, I had a poster on my wall titled Murphy’s Laws of Technology. </span><span class="koboSpan" id="kobo.586.7">The poster espoused a pessimistic but, in my experience (and probably yours if you’ve been doing this for a while), totally accurate worldview. </span><span class="koboSpan" id="kobo.586.8">Here’s a sampling of Murphy’s Laws with respect </span><span class="No-Break"><span class="koboSpan" id="kobo.587.1">to technology:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.588.1">You can never tell which direction the train traveled by looking at </span><span class="No-Break"><span class="koboSpan" id="kobo.589.1">the track</span></span></li>
<li><span class="koboSpan" id="kobo.590.1">Logic is a systematic method of coming to the wrong conclusion </span><span class="No-Break"><span class="koboSpan" id="kobo.591.1">with confidence</span></span></li>
<li><span class="koboSpan" id="kobo.592.1">Whenever a system becomes completely defined, some fool discovers something which either abolishes the system or expands it </span><span class="No-Break"><span class="koboSpan" id="kobo.593.1">beyond recognition</span></span></li>
<li><span class="koboSpan" id="kobo.594.1">Technology is dominated by those who manage what they don’t understand: if builders built buildings the way programmers wrote programs, then the first woodpecker that came along would </span><span class="No-Break"><span class="koboSpan" id="kobo.595.1">destroy civilization</span></span></li>
<li><span class="koboSpan" id="kobo.596.1">The attention span of a computer is only as long as its </span><span class="No-Break"><span class="koboSpan" id="kobo.597.1">electrical cord</span></span></li>
<li><span class="koboSpan" id="kobo.598.1">An expert is one who knows more and more about less and less until he knows absolutely everything </span><span class="No-Break"><span class="koboSpan" id="kobo.599.1">about nothing</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.600.1">This</span><a id="_idIndexMarker334"/><span class="koboSpan" id="kobo.601.1"> is relevant because, at least for me, the likelihood that I will find and attempt to modify dead code (thinking it to be very much alive and the obvious source of all my problems) in a software system asymptotically approaches 100%. </span><span class="koboSpan" id="kobo.601.2">The tiny degree of variance somewhere between 99% and 100% seems to be affected by my present level of caffeination and whether I skipped breakfast. </span><span class="koboSpan" id="kobo.601.3">These effects appear to be </span><span class="No-Break"><span class="koboSpan" id="kobo.602.1">inversely proportional.</span></span></p>
<p><span class="koboSpan" id="kobo.603.1">I thank goodness for a system that warns me that I’m looking at dead code. </span><span class="koboSpan" id="kobo.603.2">My usual rant is that you should take dead code out. </span><span class="koboSpan" id="kobo.603.3">You won’t need it, and if you do, that’s what revision control systems </span><span class="No-Break"><span class="koboSpan" id="kobo.604.1">are for.</span></span></p>
<h2 id="_idParaDest-100"><a id="_idTextAnchor102"/><span class="koboSpan" id="kobo.605.1">Method signature mismatches</span></h2>
<p><span class="koboSpan" id="kobo.606.1">A </span><a id="_idIndexMarker335"/><span class="koboSpan" id="kobo.607.1">method signature mismatch happens when a function requires more or fewer arguments than the number you supplied. </span><span class="koboSpan" id="kobo.607.2">PyCharm will warn you when </span><span class="No-Break"><span class="koboSpan" id="kobo.608.1">this happens.</span></span></p>
<h2 id="_idParaDest-101"><a id="_idTextAnchor103"/><span class="koboSpan" id="kobo.609.1">The road to good code is paved with PyCharm’s intentions</span></h2>
<p><span class="koboSpan" id="kobo.610.1">Now that</span><a id="_idIndexMarker336"/><span class="koboSpan" id="kobo.611.1"> we’ve spent time learning about our flaws, let’s </span><a id="_idIndexMarker337"/><span class="koboSpan" id="kobo.612.1">look at some tools that help us fix them. </span><span class="koboSpan" id="kobo.612.2">PyCharm features a mechanism called intentions designed to</span><a id="_idIndexMarker338"/><span class="koboSpan" id="kobo.613.1"> automate fixing and improving your code. </span><span class="koboSpan" id="kobo.613.2">Take a look at </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.614.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.615.1">.18</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.616.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer134">
<span class="koboSpan" id="kobo.617.1"><img alt="Figure 4.18: Hover your mouse over any underlined code to see why it is underlined, along with possible fixes" src="image/B19644_04_18.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.618.1">Figure 4.18: Hover your mouse over any underlined code to see why it is underlined, along with possible fixes</span></p>
<p><span class="koboSpan" id="kobo.619.1">In the</span><a id="_idIndexMarker339"/><span class="koboSpan" id="kobo.620.1"> case </span><a id="_idIndexMarker340"/><span class="koboSpan" id="kobo.621.1">of the</span><a id="_idIndexMarker341"/><span class="koboSpan" id="kobo.622.1"> code shown, the problem is I invoked the </span><strong class="source-inline"><span class="koboSpan" id="kobo.623.1">sqrt()</span></strong><span class="koboSpan" id="kobo.624.1"> method, which finds the square root. </span><span class="koboSpan" id="kobo.624.2">The method is a static method in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.625.1">math</span></strong><span class="koboSpan" id="kobo.626.1"> class. </span><span class="koboSpan" id="kobo.626.2">The problem is I failed to import that class. </span><span class="koboSpan" id="kobo.626.3">The description of the problem appears just below the underline when I hover. </span><span class="koboSpan" id="kobo.626.4">Below the problem description is the most likely fix. </span><span class="koboSpan" id="kobo.626.5">Pressing </span><em class="italic"><span class="koboSpan" id="kobo.627.1">Alt</span></em><span class="koboSpan" id="kobo.628.1"> + </span><em class="italic"><span class="koboSpan" id="kobo.629.1">Shift</span></em><span class="koboSpan" id="kobo.630.1"> + </span><em class="italic"><span class="koboSpan" id="kobo.631.1">Enter</span></em><span class="koboSpan" id="kobo.632.1"> will automatically fix the problem by adding </span><strong class="source-inline"><span class="koboSpan" id="kobo.633.1">import math</span></strong><span class="koboSpan" id="kobo.634.1"> to the top of </span><span class="No-Break"><span class="koboSpan" id="kobo.635.1">the file.</span></span></p>
<p><span class="koboSpan" id="kobo.636.1">If you’d like to try this out, you can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.637.1">inspection</span></strong><span class="koboSpan" id="kobo.638.1"> project in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.639.1">chapter-04</span></strong><span class="koboSpan" id="kobo.640.1"> folder of the sample code we cloned in </span><a href="B19644_02.xhtml#_idTextAnchor028"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.641.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.642.1">, </span><em class="italic"><span class="koboSpan" id="kobo.643.1">Installation </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.644.1">and Configuration</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.645.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.646.1">Note this might not be the only possible fix. </span><span class="koboSpan" id="kobo.646.2">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.647.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.648.1">.18</span></em><span class="koboSpan" id="kobo.649.1">, we can also see </span><strong class="bold"><span class="koboSpan" id="kobo.650.1">More actions…</span></strong><span class="koboSpan" id="kobo.651.1"> prompting us to either click the link or press </span><em class="italic"><span class="koboSpan" id="kobo.652.1">Alt</span></em><span class="koboSpan" id="kobo.653.1"> + </span><em class="italic"><span class="koboSpan" id="kobo.654.1">Enter</span></em><span class="koboSpan" id="kobo.655.1"> to see </span><span class="No-Break"><span class="koboSpan" id="kobo.656.1">more possibilities.</span></span></p>
<p><span class="koboSpan" id="kobo.657.1">Truly astute readers might have noticed the lightbulb. </span><span class="koboSpan" id="kobo.657.2">This is an alternate vector to the same feature. </span><span class="koboSpan" id="kobo.657.3">Check out </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.658.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.659.1">.19</span></em><span class="koboSpan" id="kobo.660.1"> to see the lightbulb </span><span class="No-Break"><span class="koboSpan" id="kobo.661.1">in action:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer135">
<span class="koboSpan" id="kobo.662.1"><img alt="Figure 4.19: The lightbulb is another way to get the intentions" src="image/B19644_04_19.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.663.1">Figure 4.19: The lightbulb is another way to get the intentions</span></p>
<p><span class="koboSpan" id="kobo.664.1">Clicking the lightbulb shows a list of possible intentions. </span><span class="koboSpan" id="kobo.664.2">This time, we see a preview. </span><span class="koboSpan" id="kobo.664.3">The intention is going to add </span><strong class="source-inline"><span class="koboSpan" id="kobo.665.1">import math</span></strong><span class="koboSpan" id="kobo.666.1"> at line 1 of </span><span class="No-Break"><span class="koboSpan" id="kobo.667.1">the file.</span></span></p>
<p><span class="koboSpan" id="kobo.668.1">The</span><a id="_idIndexMarker342"/><span class="koboSpan" id="kobo.669.1"> lightbulbs </span><a id="_idIndexMarker343"/><span class="koboSpan" id="kobo.670.1">can be tricky </span><a id="_idIndexMarker344"/><span class="koboSpan" id="kobo.671.1">sometimes because they have a tendency to disappear if you move off the line </span><a id="_idIndexMarker345"/><span class="koboSpan" id="kobo.672.1">where they originally appeared. </span><span class="koboSpan" id="kobo.672.2">If you’d like to use the lightbulb, just click anywhere within the underline and wait for a tick. </span><span class="koboSpan" id="kobo.672.3">It will appear at the beginning of the line where the </span><span class="No-Break"><span class="koboSpan" id="kobo.673.1">problem lies.</span></span></p>
<p><span class="koboSpan" id="kobo.674.1">In the case we’re exploring, the problem is a legitimate error. </span><span class="koboSpan" id="kobo.674.2">The program won’t run until we fix the problem. </span><span class="koboSpan" id="kobo.674.3">You can’t see it in the previous two figures, but the lightbulb is red. </span><span class="koboSpan" id="kobo.674.4">You’ll also see yellow lightbulbs for less </span><span class="No-Break"><span class="koboSpan" id="kobo.675.1">egregious problems.</span></span></p>
<p><span class="koboSpan" id="kobo.676.1">Now if you’re like me, you want to see a clean file with a green check and no underlines. </span><span class="koboSpan" id="kobo.676.2">Let me tell you, that will probably never happen. </span><span class="koboSpan" id="kobo.676.3">PyCharm will almost always find something to change. </span><span class="koboSpan" id="kobo.676.4">Sometimes the suggested changes are not very useful. </span><span class="koboSpan" id="kobo.676.5">You might heed a suggestion that changes your code in some minor way. </span><span class="koboSpan" id="kobo.676.6">Right after you do this, the lightbulb comes back, and PyCharm offers to change the code back to the way it was. </span><span class="koboSpan" id="kobo.676.7">Yellow light bulbs are not your enemy unless they have an exclamation point </span><span class="No-Break"><span class="koboSpan" id="kobo.677.1">in them.</span></span></p>
<h1 id="_idParaDest-102"><a id="_idTextAnchor104"/><span class="koboSpan" id="kobo.678.1">Refactoring</span></h1>
<p><span class="koboSpan" id="kobo.679.1">Most </span><a id="_idIndexMarker346"/><span class="koboSpan" id="kobo.680.1">good IDEs, and development-focused text editors, for that matter, feature some level of tooling for refactoring. </span><span class="koboSpan" id="kobo.680.2">Refactoring is a very important practice that is often neglected. </span><span class="koboSpan" id="kobo.680.3">In my book, which is available on Amazon (or wherever the finest technical books are sold), </span><em class="italic"><span class="koboSpan" id="kobo.681.1">Real-World Implementation of C# Design Patterns</span></em><span class="koboSpan" id="kobo.682.1">, I cover some of the entropic forces that lead a well-intended coding project to ruin. </span><span class="koboSpan" id="kobo.682.2">Your code starts off pristine, and the whole team commits to maintaining zero technical debt. </span><span class="koboSpan" id="kobo.682.3">But it never lasts. </span><span class="koboSpan" id="kobo.682.4">Factors such as time pressure, developer skill level, inevitable change, visibility, and complexity cause a process of devolution. </span><span class="koboSpan" id="kobo.682.5">Your code goes from a well-constructed, perfectly architected masterpiece to a big ball of mud on a plate </span><span class="No-Break"><span class="koboSpan" id="kobo.683.1">of spaghetti!</span></span></p>
<p><span class="koboSpan" id="kobo.684.1">I realize that I am pointing to a C# book here, but if you have a Packt subscription, I urge you to read the first two chapters of the book. </span><span class="koboSpan" id="kobo.684.2">The chapters discuss the common problems and preventions of work degradation. </span><span class="koboSpan" id="kobo.684.3">One thing you can do is to be vigilant and never dismiss the value of refactoring your code as a regular part of the </span><span class="No-Break"><span class="koboSpan" id="kobo.685.1">development practice.</span></span></p>
<h2 id="_idParaDest-103"><a id="_idTextAnchor105"/><span class="koboSpan" id="kobo.686.1">What is refactoring?</span></h2>
<p><span class="koboSpan" id="kobo.687.1">Simply put, refactoring is improving code without changing its functionality. </span><span class="koboSpan" id="kobo.687.2">If you have unit tests (you do, RIGHT!?!??!), they should pass before and after refactoring without any changes to the tests themselves. </span><span class="koboSpan" id="kobo.687.3">You are looking for ways to optimize your code in terms of readability and performance. </span><span class="koboSpan" id="kobo.687.4">Maybe you skipped some code niceties, such as adding </span><strong class="bold"><span class="koboSpan" id="kobo.688.1">docstrings</span></strong><span class="koboSpan" id="kobo.689.1">, which </span><a id="_idIndexMarker347"/><span class="koboSpan" id="kobo.690.1">we’ll cover later in this chapter. </span><span class="koboSpan" id="kobo.690.2">Maybe you didn’t add type hints to your method signatures. </span><span class="koboSpan" id="kobo.690.3">Perhaps there are opportunities to leverage design patterns or SOLID principles to make your code </span><span class="No-Break"><span class="koboSpan" id="kobo.691.1">more flexible.</span></span></p>
<p><span class="koboSpan" id="kobo.692.1">The idea behind refactoring is that you are taking a second look at your code, preferably after a little time has passed. </span><span class="koboSpan" id="kobo.692.2">Have you ever looked at code you wrote a month or even a year ago and wondered what possessed you to type that horrible function body? </span><span class="koboSpan" id="kobo.692.3">Why in the world did you _________? </span><span class="koboSpan" id="kobo.692.4">(Fill in the blank with something silly you did.) You can’t believe that was you. </span><span class="koboSpan" id="kobo.692.5">You are smarter than that. </span><span class="koboSpan" id="kobo.692.6">Consider having regular peer reviews of your code. </span><span class="koboSpan" id="kobo.692.7">This can happen at any time during the writing process. </span><span class="koboSpan" id="kobo.692.8">Also, having someone less invested in your work will be able to spot unrealized opportunities for improvement. </span><span class="koboSpan" id="kobo.692.9">Almost always, this will involve refactoring. </span><span class="koboSpan" id="kobo.692.10">Flip things around. </span><span class="koboSpan" id="kobo.692.11">How many times have you been handed some code written by another developer? </span><span class="koboSpan" id="kobo.692.12">Maybe the person that </span><a id="_idIndexMarker348"/><span class="koboSpan" id="kobo.693.1">has left the company? </span><span class="koboSpan" id="kobo.693.2">You look it over and conclude that whoever wrote the code was clearly a recent escapee from the local asylum. </span><span class="koboSpan" id="kobo.693.3">It must be totally rewritten. </span><span class="koboSpan" id="kobo.693.4">This is you refactoring someone </span><span class="No-Break"><span class="koboSpan" id="kobo.694.1">else’s code.</span></span></p>
<h2 id="_idParaDest-104"><a id="_idTextAnchor106"/><span class="koboSpan" id="kobo.695.1">Refactoring tools in PyCharm</span></h2>
<p><span class="koboSpan" id="kobo.696.1">PyCharm </span><a id="_idIndexMarker349"/><span class="koboSpan" id="kobo.697.1">has a set of menu options dedicated to refactoring. </span><span class="koboSpan" id="kobo.697.2">There are a few that are not explicitly called out as </span><span class="No-Break"><span class="koboSpan" id="kobo.698.1">refactoring tools.</span></span></p>
<h3><span class="koboSpan" id="kobo.699.1">Cleaning up your code</span></h3>
<p><span class="koboSpan" id="kobo.700.1">PyCharm </span><a id="_idIndexMarker350"/><span class="koboSpan" id="kobo.701.1">has a very thorough </span><strong class="bold"><span class="koboSpan" id="kobo.702.1">Code Cleanup</span></strong><span class="koboSpan" id="kobo.703.1"> tool. </span><span class="koboSpan" id="kobo.703.2">This</span><a id="_idIndexMarker351"/><span class="koboSpan" id="kobo.704.1"> tool, in effect, runs the same inspections you have seen so far, but it does them in bulk. </span><span class="koboSpan" id="kobo.704.2">You can have PyCharm try to fix all the problems as well. </span><span class="koboSpan" id="kobo.704.3">This feature is useful when you import a project created outside of PyCharm, say with a tool that doesn’t offer the kind of assistance you have seen </span><span class="No-Break"><span class="koboSpan" id="kobo.705.1">in PyCharm.</span></span></p>
<p><span class="koboSpan" id="kobo.706.1">You can clean up an open file or all files in your project. </span><span class="koboSpan" id="kobo.706.2">To be honest, I don’t recommend you do this at the project level since you can’t really predict what the engine will do to a large set of files you haven’t even opened. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.707.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.708.1">.20</span></em><span class="koboSpan" id="kobo.709.1"> shows the menu location for </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.710.1">Code Cleanup</span></strong></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.711.1">…</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.712.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer136">
<span class="koboSpan" id="kobo.713.1"><img alt="Figure 4.20: The Code Cleanup tools can be found in the Code menu" src="image/B19644_04_20.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.714.1">Figure 4.20: The Code Cleanup tools can be found in the Code menu</span></p>
<p><span class="koboSpan" id="kobo.715.1">Once</span><a id="_idIndexMarker352"/><span class="koboSpan" id="kobo.716.1"> you click the menu option, you’ll see a dialog asking </span><a id="_idIndexMarker353"/><span class="koboSpan" id="kobo.717.1">about the scope of the clean-up, as seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.718.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.719.1">.21</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.720.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer137">
<span class="koboSpan" id="kobo.721.1"><img alt="Figure 4.21: Specify the scope of the code cleanup" src="image/B19644_04_21.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.722.1">Figure 4.21: Specify the scope of the code cleanup</span></p>
<p><span class="koboSpan" id="kobo.723.1">You can clean up the whole project, uncommitted files, the current file (which for me is </span><strong class="source-inline"><span class="koboSpan" id="kobo.724.1">main.py</span></strong><span class="koboSpan" id="kobo.725.1"> from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.726.1">inspection</span></strong><span class="koboSpan" id="kobo.727.1"> project in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.728.1">chapter-04</span></strong><span class="koboSpan" id="kobo.729.1"> folder of the sample source code), or a </span><a id="_idIndexMarker354"/><span class="koboSpan" id="kobo.730.1">custom scope. </span><span class="koboSpan" id="kobo.730.2">My recommendation is not to try to boil the ocean. </span><span class="koboSpan" id="kobo.730.3">Do not do a </span><a id="_idIndexMarker355"/><span class="koboSpan" id="kobo.731.1">whole project cleanup on a massive project. </span><span class="koboSpan" id="kobo.731.2">It is usually smarter to let PyCharm work its magic on small batches of files. </span><span class="koboSpan" id="kobo.731.3">The </span><strong class="bold"><span class="koboSpan" id="kobo.732.1">Uncommitted files</span></strong><span class="koboSpan" id="kobo.733.1"> option is a nice step you can take before you commit changes to your version </span><span class="No-Break"><span class="koboSpan" id="kobo.734.1">control system.</span></span></p>
<h3><span class="koboSpan" id="kobo.735.1">Renaming</span></h3>
<p><span class="koboSpan" id="kobo.736.1">Donald Knuth, one </span><a id="_idIndexMarker356"/><span class="koboSpan" id="kobo.737.1">of the most respected software developers of all time, wrote in his book </span><em class="italic"><span class="koboSpan" id="kobo.738.1">The Art of Computer Programming</span></em><span class="koboSpan" id="kobo.739.1">, that there are two things in programming that are hard: naming things (e.g., variables, functions, classes, files, and so on) well, and invalidating your caches. </span><span class="koboSpan" id="kobo.739.2">How true this is! </span><span class="koboSpan" id="kobo.739.3">It is an art form to write meaningful variable definitions that are self-documenting while making your intentions clear. </span><span class="koboSpan" id="kobo.739.4">It usually takes several tries to get it right. </span><span class="koboSpan" id="kobo.739.5">PyCharm has a tool that easily allows a name change. </span><span class="koboSpan" id="kobo.739.6">You can right-click on anything you’ve named and select </span><strong class="bold"><span class="koboSpan" id="kobo.740.1">Rename</span></strong><span class="koboSpan" id="kobo.741.1">. </span><span class="koboSpan" id="kobo.741.2">Type the new name of the thing that is to be renamed. </span><span class="koboSpan" id="kobo.741.3">PyCharm will affect the change everywhere the named thing is referenced. </span><span class="koboSpan" id="kobo.741.4">It will even find and change references in comments </span><span class="No-Break"><span class="koboSpan" id="kobo.742.1">and docstrings.</span></span></p>
<p><span class="koboSpan" id="kobo.743.1">If the scope of the change is small, for example, you are renaming something scoped to a local function, the rename operation happens immediately. </span><span class="koboSpan" id="kobo.743.2">If you are attempting a rename with a broader scope, such as one that entails multiple files, PyCharm will preview the change for you by showing you all the files that will be affected. </span><span class="koboSpan" id="kobo.743.3">You can inspect all the changes before they are made to make sure the changes are appropriate. </span><span class="koboSpan" id="kobo.743.4">After you are satisfied, you can apply </span><span class="No-Break"><span class="koboSpan" id="kobo.744.1">those changes.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.745.1">There is no rename menu option for files!</span></p>
<p class="callout"><span class="koboSpan" id="kobo.746.1">This is confusing if you come from another tool such as Visual Studio Code, where renaming files is a simple matter of picking the file from the explorer view and clicking twice or pressing </span><em class="italic"><span class="koboSpan" id="kobo.747.1">F2</span></em><span class="koboSpan" id="kobo.748.1">. </span><span class="koboSpan" id="kobo.748.2">You’ll hunt for the rename option for files, and you will not find one. </span><span class="koboSpan" id="kobo.748.3">That’s because it is in the </span><strong class="bold"><span class="koboSpan" id="kobo.749.1">Refactor</span></strong><span class="koboSpan" id="kobo.750.1"> menu. </span><span class="koboSpan" id="kobo.750.2">PyCharm considers renaming a file a refactor. </span><span class="koboSpan" id="kobo.750.3">Unlike other tools, PyCharm will make sure renaming the file doesn’t affect </span><span class="No-Break"><span class="koboSpan" id="kobo.751.1">your code.</span></span></p>
<h3><span class="koboSpan" id="kobo.752.1">Inlining variables</span></h3>
<p><span class="koboSpan" id="kobo.753.1">PyCharm </span><a id="_idIndexMarker357"/><span class="koboSpan" id="kobo.754.1">gives you the ability to automatically inline your variables. </span><span class="koboSpan" id="kobo.754.2">In fact, this is among the more common suggestions PyCharm provides. </span><span class="koboSpan" id="kobo.754.3">Consider </span><span class="No-Break"><span class="koboSpan" id="kobo.755.1">this code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.756.1">
a = 5
b = 6
def add_two(num1: int, num2: int) -&gt; int:
  sum = num1 + num2
  return sum
add_two(a, b)</span></pre> <p><span class="koboSpan" id="kobo.757.1">The sum variable isn’t really needed. </span><span class="koboSpan" id="kobo.757.2">If you inline the variable, the code becomes </span><span class="No-Break"><span class="koboSpan" id="kobo.758.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.759.1">
a = 5
b = 6
def add_two(num1: int, num2: int) -&gt; int:
  return num1 + num2
add_two(a, b)</span></pre> <p><span class="koboSpan" id="kobo.760.1">We’ve removed the line that declared the </span><strong class="source-inline"><span class="koboSpan" id="kobo.761.1">sum</span></strong><span class="koboSpan" id="kobo.762.1"> variable and assigned it the value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.763.1">num1 + </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.764.1">num2</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.765.1">.</span></span></p>
<h3><span class="koboSpan" id="kobo.766.1">Extracting methods</span></h3>
<p><span class="koboSpan" id="kobo.767.1">Earlier, I mentioned </span><a id="_idIndexMarker358"/><span class="koboSpan" id="kobo.768.1">a concept called DRY, or Don’t Repeat Yourself. </span><span class="koboSpan" id="kobo.768.2">Yes, I realize that by mentioning it again, I am breaking the rule. </span><span class="koboSpan" id="kobo.768.3">I am doing so with a purpose. </span><span class="koboSpan" id="kobo.768.4">Remember, the IDE points out errors and then provides advice and tools to fix the problem. </span><span class="koboSpan" id="kobo.768.5">I’d like to present a very useful feature. </span><span class="koboSpan" id="kobo.768.6">PyCharm gives you a tool to easily extract code into a separate function. </span><span class="koboSpan" id="kobo.768.7">You will want to do this under a couple of circumstances. </span><span class="koboSpan" id="kobo.768.8">First, if you find yourself copying and pasting code within your project. </span><span class="koboSpan" id="kobo.768.9">You probably need to make that code a function and then call it from the places where you are pasting the copied code. </span><span class="koboSpan" id="kobo.768.10">Secondly, when you find a function that breaks the single responsibility principle. </span><span class="koboSpan" id="kobo.768.11">If you’ve never heard of this, you can guess what it means. </span><span class="koboSpan" id="kobo.768.12">A well-written program should contain functions that do only one thing. </span><span class="koboSpan" id="kobo.768.13">Written code that contains functions or methods that perform multiple responsibilities could be broken into </span><span class="No-Break"><span class="koboSpan" id="kobo.769.1">separate functions.</span></span></p>
<p><span class="koboSpan" id="kobo.770.1">Take a look at an easy example of such an opportunity. </span><span class="koboSpan" id="kobo.770.2">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.771.1">chapter-04/not_dry.py</span></strong><span class="koboSpan" id="kobo.772.1"> file in the sample code. </span><span class="koboSpan" id="kobo.772.2">The code within is truly egregious! </span><span class="koboSpan" id="kobo.772.3">Sensitive viewers might want to sit down before opening the file. </span><span class="koboSpan" id="kobo.772.4">Behold! </span><span class="koboSpan" id="kobo.772.5">Something everybody has done at least once before they learned it was a </span><span class="No-Break"><span class="koboSpan" id="kobo.773.1">bad idea:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.774.1">
computer_science_grades = {
  "Guido van Rossum": 100,
  "Ewa Jodlwska": 99,
  "Fabrizio Romano": 88,
  "Henrich Kruger": 87,
  "Rick van Hattem": 83,
  "Steven Lott": 72,
  "Dusty Phillips": 72,
  "Quan Nguyen": 92
}</span></pre> <p><span class="koboSpan" id="kobo.775.1">OK, so far, it is fine. </span><span class="koboSpan" id="kobo.775.2">We’ve got a dictionary of people who took a computer science class along with their grades. </span><span class="koboSpan" id="kobo.775.3">By the way, those aren’t random names. </span><span class="koboSpan" id="kobo.775.4">After you finish this chapter, see whether you can figure out who these illustrious individuals might be. </span><span class="koboSpan" id="kobo.775.5">I apologize to some of the illustrious individuals for the numbers themselves. </span><span class="koboSpan" id="kobo.775.6">They are meant to be more or less random keys except for Mr. </span><span class="koboSpan" id="kobo.775.7">van Rossum, who would obviously have gotten a perfect grade. </span><span class="koboSpan" id="kobo.775.8">I’m sure they all did very well in real life. </span><span class="koboSpan" id="kobo.775.9">Following that, we have another set of </span><span class="No-Break"><span class="koboSpan" id="kobo.776.1">class grades:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.777.1">
advanced_theoretical_and_applied_recess_grades = {
  "Bruce Van Horn": 100,
  "Prajakta Naik": 92,
  "Kinnari Chohan": 88,
  "Pooja Yadiv": 86
}</span></pre> <p><span class="koboSpan" id="kobo.778.1">While it </span><a id="_idIndexMarker359"/><span class="koboSpan" id="kobo.779.1">is a different subject and a different group of people, it’s the same idea. </span><span class="koboSpan" id="kobo.779.2">Now suppose we need to figure out the class average for each class. </span><span class="koboSpan" id="kobo.779.3">I can make a function for computing the average in the computer </span><span class="No-Break"><span class="koboSpan" id="kobo.780.1">science class:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.781.1">
def computer_science_average(grades: dict) -&gt; float:
  raw_total = 0
  for grade in grades.values():
    raw_total += grade
  average = (raw_total / len(grades))
  return average</span></pre> <p><span class="koboSpan" id="kobo.782.1">Our method signature gives lots of good hints. </span><span class="koboSpan" id="kobo.782.2">We have a descriptive function name. </span><span class="koboSpan" id="kobo.782.3">The function takes one parameter, and our hint tells us we’re expecting a dictionary. </span><span class="koboSpan" id="kobo.782.4">The function is expected to return </span><span class="No-Break"><span class="koboSpan" id="kobo.783.1">a float.</span></span></p>
<p><span class="koboSpan" id="kobo.784.1">The function body creates a variable called </span><strong class="source-inline"><span class="koboSpan" id="kobo.785.1">raw_total</span></strong><span class="koboSpan" id="kobo.786.1"> and sets it to </span><strong class="source-inline"><span class="koboSpan" id="kobo.787.1">0</span></strong><span class="koboSpan" id="kobo.788.1">. </span><span class="koboSpan" id="kobo.788.2">Next, we loop through the values of </span><strong class="source-inline"><span class="koboSpan" id="kobo.789.1">dict</span></strong><span class="koboSpan" id="kobo.790.1"> and, on each iteration, add </span><strong class="source-inline"><span class="koboSpan" id="kobo.791.1">value</span></strong><span class="koboSpan" id="kobo.792.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.793.1">raw_total</span></strong><span class="koboSpan" id="kobo.794.1">. </span><span class="koboSpan" id="kobo.794.2">Once we have the total, we divide it by the number of keys (</span><strong class="source-inline"><span class="koboSpan" id="kobo.795.1">len</span></strong><span class="koboSpan" id="kobo.796.1">) in </span><strong class="source-inline"><span class="koboSpan" id="kobo.797.1">dict</span></strong><span class="koboSpan" id="kobo.798.1">, and voila! </span><span class="koboSpan" id="kobo.798.2">We have the class average. </span><span class="koboSpan" id="kobo.798.3">Towards the bottom of the file, we can see where this function </span><span class="No-Break"><span class="koboSpan" id="kobo.799.1">is called:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.800.1">
boring_class_average = computer_science_average(computer_science_grades)
print(f"Boring average is {boring_class_average}")</span></pre> <p><span class="koboSpan" id="kobo.801.1">Wonderful! </span><span class="koboSpan" id="kobo.801.2">We have a call to our </span><strong class="source-inline"><span class="koboSpan" id="kobo.802.1">computer_science_average</span></strong><span class="koboSpan" id="kobo.803.1"> function along with a highly judgmental (and probably inaccurate since it might have been your favorite class) variable assignment. </span><span class="koboSpan" id="kobo.803.2">So, what’s wrong with any of this? </span><span class="koboSpan" id="kobo.803.3">Nothing. </span><span class="koboSpan" id="kobo.803.4">It’s what comes next that presents a problem and an opportunity to extract a method. </span><span class="koboSpan" id="kobo.803.5">The next function</span><a id="_idIndexMarker360"/><span class="koboSpan" id="kobo.804.1"> computes a different class: advanced theoretical and applied recess. </span><span class="koboSpan" id="kobo.804.2">This is a field that I personally pioneered, and within this field, I have no rival. </span><span class="koboSpan" id="kobo.804.3">Unfortunately, since I spent more time on the playground perfecting my art and less time in computer science class, I have all but duplicated the function we </span><span class="No-Break"><span class="koboSpan" id="kobo.805.1">wrote earlier:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.806.1">
def advanced_recess_average(grades: dict) -&gt; float:
  raw_total = 0
  for grade in grades.values():
    raw_total += grade
  average = (raw_total / len(grades))
  return average</span></pre> <p><span class="koboSpan" id="kobo.807.1">It’s the same function with a different name! </span><span class="koboSpan" id="kobo.807.2">We need to consolidate! </span><span class="koboSpan" id="kobo.807.3">To do this, you need to highlight everything between the colon that ends the method signature and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.808.1">return</span></strong><span class="koboSpan" id="kobo.809.1"> statement. </span><span class="koboSpan" id="kobo.809.2">Refer to </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.810.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.811.1">.22</span></em><span class="koboSpan" id="kobo.812.1">. </span><span class="koboSpan" id="kobo.812.2">Don’t include the </span><strong class="source-inline"><span class="koboSpan" id="kobo.813.1">return</span></strong><span class="koboSpan" id="kobo.814.1"> statement, or PyCharm won’t generate a </span><strong class="source-inline"><span class="koboSpan" id="kobo.815.1">return</span></strong><span class="koboSpan" id="kobo.816.1"> statement in your </span><span class="No-Break"><span class="koboSpan" id="kobo.817.1">extracted function:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer138">
<span class="koboSpan" id="kobo.818.1"><img alt="Figure 4.22: Select the code to extract into a new function or method" src="image/B19644_04_22.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.819.1">Figure 4.22: Select the code to extract into a new function or method</span></p>
<p><span class="koboSpan" id="kobo.820.1">Next, right-click</span><a id="_idIndexMarker361"/><span class="koboSpan" id="kobo.821.1"> the selected code and click </span><strong class="bold"><span class="koboSpan" id="kobo.822.1">Refactor</span></strong><span class="koboSpan" id="kobo.823.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.824.1">Extract Method</span></strong><span class="koboSpan" id="kobo.825.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.826.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.827.1">.23</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.828.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer139">
<span class="koboSpan" id="kobo.829.1"><img alt="Figure 4.23: Right-click the selected code, then click Refactor, then Extract Method" src="image/B19644_04_23.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.830.1">Figure 4.23: Right-click the selected code, then click Refactor, then Extract Method</span></p>
<p><span class="koboSpan" id="kobo.831.1">This brings up a user interface that allows you to define the new method, as seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.832.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.833.1">.24</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.834.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer140">
<span class="koboSpan" id="kobo.835.1"><img alt="Figure 4.24: The ﻿Extract ﻿Method dialog in PyCharm" src="image/B19644_04_24.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.836.1">Figure 4.24: The Extract Method dialog in PyCharm</span></p>
<p><span class="koboSpan" id="kobo.837.1">Set the </span><a id="_idIndexMarker362"/><span class="koboSpan" id="kobo.838.1">name of the extract method. </span><span class="koboSpan" id="kobo.838.2">I set mine to </span><strong class="source-inline"><span class="koboSpan" id="kobo.839.1">compute_average</span></strong><span class="koboSpan" id="kobo.840.1">. </span><span class="koboSpan" id="kobo.840.2">PyCharm has filled in the rest automatically. </span><span class="koboSpan" id="kobo.840.3">Click </span><strong class="bold"><span class="koboSpan" id="kobo.841.1">OK</span></strong><span class="koboSpan" id="kobo.842.1">, and your code will change. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.843.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.844.1">.25</span></em><span class="koboSpan" id="kobo.845.1"> shows the result of </span><span class="No-Break"><span class="koboSpan" id="kobo.846.1">my refactoring:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer141">
<span class="koboSpan" id="kobo.847.1"><img alt="Figure 4.25: The result of the refactoring. Note the compute_average function was generated automatically from the selected code" src="image/B19644_04_25.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.848.1">Figure 4.25: The result of the refactoring. </span><span class="koboSpan" id="kobo.848.2">Note the compute_average function was generated automatically from the selected code</span></p>
<p><span class="koboSpan" id="kobo.849.1">Let’s look at</span><a id="_idIndexMarker363"/><span class="koboSpan" id="kobo.850.1"> the resulting code PyCharm generated from the refactor. </span><span class="koboSpan" id="kobo.850.2">First, </span><strong class="source-inline"><span class="koboSpan" id="kobo.851.1">computer_science_average</span></strong><span class="koboSpan" id="kobo.852.1"> has changed </span><span class="No-Break"><span class="koboSpan" id="kobo.853.1">to this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.854.1">
def computer_science_average(grades: dict) -&gt; float:
  average = compute_average(grades)
  return average</span></pre> <p><span class="koboSpan" id="kobo.855.1">This function is now calling the extracted function. </span><span class="koboSpan" id="kobo.855.2">The extracted function looks </span><span class="No-Break"><span class="koboSpan" id="kobo.856.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.857.1">
def compute_average(grades):
  raw_total = 0
  for grade in grades.values():
    raw_total += grade
  total_number_grades = len(grades)
  average = (raw_total / total_number_grades)
  return average</span></pre> <p><span class="koboSpan" id="kobo.858.1">This is the code we selected for extraction. </span><span class="koboSpan" id="kobo.858.2">PyCharm generated the function for me. </span><span class="koboSpan" id="kobo.858.3">I must tell you, at this point, that I’m usually wary of generated code. </span><span class="koboSpan" id="kobo.858.4">It is rarely perfect. </span><span class="koboSpan" id="kobo.858.5">Here, I would have preferred a type hint on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.859.1">grades</span></strong><span class="koboSpan" id="kobo.860.1"> parameter and a hint on the return type. </span><span class="koboSpan" id="kobo.860.2">Those are minor issues, though, and the result saved me </span><span class="No-Break"><span class="koboSpan" id="kobo.861.1">some typing.</span></span></p>
<p><span class="koboSpan" id="kobo.862.1">One lingering</span><a id="_idIndexMarker364"/><span class="koboSpan" id="kobo.863.1"> question might remain. </span><span class="koboSpan" id="kobo.863.2">Why didn’t PyCharm detect and flag the duplicated code? </span><span class="koboSpan" id="kobo.863.3">The quick answer: our sample code is too short. </span><span class="koboSpan" id="kobo.863.4">If I were to add a few more lines to the duplicated functions, it would appear as a duplicate. </span><span class="koboSpan" id="kobo.863.5">Let’s try it out. </span><span class="koboSpan" id="kobo.863.6">Modify the code in both functions so it looks </span><span class="No-Break"><span class="koboSpan" id="kobo.864.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.865.1">
def computer_science_average(grades: dict) -&gt; float:
  raw_total = 0
  fake_var_1 = 1
  fake_var_2 = 2
  fake_var_3 = 3
  fake_var_4 = 4
  fake_var_5 = 5
  fake_var_6 = 6
  fake_var_7 = 7
  print(f"{fake_var_1}{fake_var_2}{fake_var_3}{fake_var_4}")
  print(f"{fake_var_5}{fake_var_6}{fake_var_7}")
  for grade in grades.values():
    raw_total += grade
  average = (raw_total / len(grades))
  return average</span></pre> <p><span class="koboSpan" id="kobo.866.1">All I did was add a bunch of fake variable declarations. </span><span class="koboSpan" id="kobo.866.2">They don’t do anything important except make the duplicate code fragment longer. </span><span class="koboSpan" id="kobo.866.3">By default, PyCharm only looks for duplicated fragments that are 10 lines or longer. </span><span class="koboSpan" id="kobo.866.4">Short duplications don’t make the cut. </span><span class="koboSpan" id="kobo.866.5">I bring this up because the magic of method extraction handles duplicates automatically. </span><span class="koboSpan" id="kobo.866.6">Let’s do </span><a id="_idIndexMarker365"/><span class="koboSpan" id="kobo.867.1">the same exercise. </span><span class="koboSpan" id="kobo.867.2">First, look at PyCharm with the changes in place. </span><span class="koboSpan" id="kobo.867.3">You should see some indicators that we have problems, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.868.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.869.1">.26</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.870.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer142">
<span class="koboSpan" id="kobo.871.1"><img alt="Figure 4.26: Now that our duplicated code is longer, it gets detected and flagged" src="image/B19644_04_26.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.872.1">Figure 4.26: Now that our duplicated code is longer, it gets detected and flagged</span></p>
<p><span class="koboSpan" id="kobo.873.1">We can see that PyCharm has noticed our duplicated code. </span><span class="koboSpan" id="kobo.873.2">Highlight the code for extraction, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.874.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.875.1">.27</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.876.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer143">
<span class="koboSpan" id="kobo.877.1"><img alt="Figure 4.27: Mark the code for extraction" src="image/B19644_04_27.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.878.1">Figure 4.27: Mark the code for extraction</span></p>
<p><span class="koboSpan" id="kobo.879.1">Right-click the</span><a id="_idIndexMarker366"/><span class="koboSpan" id="kobo.880.1"> highlighted code and click </span><strong class="bold"><span class="koboSpan" id="kobo.881.1">Refactor</span></strong><span class="koboSpan" id="kobo.882.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.883.1">Extract Method</span></strong><span class="koboSpan" id="kobo.884.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.885.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.886.1">.28</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.887.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer144">
<span class="koboSpan" id="kobo.888.1"><img alt="Figure 4.28: Extract the method by right-clicking, clicking Refactor, then Extract Method" src="image/B19644_04_28.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.889.1">Figure 4.28: Extract the method by right-clicking, clicking Refactor, then Extract Method</span></p>
<p><span class="koboSpan" id="kobo.890.1">Name the </span><a id="_idIndexMarker367"/><span class="koboSpan" id="kobo.891.1">extracted function </span><strong class="source-inline"><span class="koboSpan" id="kobo.892.1">compute_average</span></strong><span class="koboSpan" id="kobo.893.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.894.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.895.1">.29</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.896.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer145">
<span class="koboSpan" id="kobo.897.1"><img alt="Figure 4.29: Name the extracted function compute_average" src="image/B19644_04_29.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.898.1">Figure 4.29: Name the extracted function compute_average</span></p>
<p><span class="koboSpan" id="kobo.899.1">Click </span><strong class="bold"><span class="koboSpan" id="kobo.900.1">OK</span></strong><span class="koboSpan" id="kobo.901.1">. </span><span class="koboSpan" id="kobo.901.2">This</span><a id="_idIndexMarker368"/><span class="koboSpan" id="kobo.902.1"> time things are a little different. </span><span class="koboSpan" id="kobo.902.2">You’ll find that PyCharm creates the function extraction as before, but this time you are prompted to replace the duplicate code as well, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.903.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.904.1">.30</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.905.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer146">
<span class="koboSpan" id="kobo.906.1"><img alt="Figure 4.30: PyCharm asks whether you’d like to replace the duplicated fragment with a reference to the extracted function" src="image/B19644_04_30.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.907.1">Figure 4.30: PyCharm asks whether you’d like to replace the duplicated fragment with a reference to the extracted function</span></p>
<h3><span class="koboSpan" id="kobo.908.1">Exporting a function to another file</span></h3>
<p><span class="koboSpan" id="kobo.909.1">How </span><a id="_idIndexMarker369"/><span class="koboSpan" id="kobo.910.1">often have you written a nifty utility function in the wrong place? </span><span class="koboSpan" id="kobo.910.2">Maybe you put it in a module or class that is designed to do something specific, but your utility function turns out to be generally used in lots of places. </span><span class="koboSpan" id="kobo.910.3">The single responsibility principle that applies to functions also applies to modules and classes. </span><span class="koboSpan" id="kobo.910.4">Having a function that connects to a database is a great example. </span><span class="koboSpan" id="kobo.910.5">Let’s say you just got a job working for Billy Blanca’s Candy Factory. </span><span class="koboSpan" id="kobo.910.6">They need you to write some scripts that will import lists of candies they make from several different text formats and store them in a database. </span><span class="koboSpan" id="kobo.910.7">The first requirement comes in, and you need to read from a plain text file and write to an </span><span class="No-Break"><span class="koboSpan" id="kobo.911.1">SQLite database.</span></span></p>
<p><span class="koboSpan" id="kobo.912.1">Open the project in </span><strong class="source-inline"><span class="koboSpan" id="kobo.913.1">chapter-04/move_function/read_input_file_a.py</span></strong><span class="koboSpan" id="kobo.914.1">. </span><span class="koboSpan" id="kobo.914.2">Let’s review </span><span class="No-Break"><span class="koboSpan" id="kobo.915.1">the contents:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.916.1">
import sqlite3
CANDY_DB = "candy.db"</span></pre> <p><span class="koboSpan" id="kobo.917.1">These first two lines import the </span><strong class="source-inline"><span class="koboSpan" id="kobo.918.1">sqlite3</span></strong><span class="koboSpan" id="kobo.919.1"> library from the standard library. </span><span class="koboSpan" id="kobo.919.2">If you haven’t worked with </span><strong class="source-inline"><span class="koboSpan" id="kobo.920.1">sqlite3</span></strong><span class="koboSpan" id="kobo.921.1"> before, here’s all you need to know for now: it is a file-based relational database. </span><span class="koboSpan" id="kobo.921.2">By this, we mean you don’t need to install a server as you would with databases such as Postgres or MariaDB. </span><span class="koboSpan" id="kobo.921.3">This makes it a good database to use for teaching and prototype work. </span><span class="koboSpan" id="kobo.921.4">We’ll cover databases in detail in </span><a href="B19644_11.xhtml#_idTextAnchor266"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.922.1">Chapter 11</span></em></span></a><span class="koboSpan" id="kobo.923.1">, </span><em class="italic"><span class="koboSpan" id="kobo.924.1">Understanding Database Management in PyCharm</span></em><span class="koboSpan" id="kobo.925.1">. </span><span class="koboSpan" id="kobo.925.2">Let’s continue with the definition for the function that will open the file, read the contents, and insert them into </span><span class="No-Break"><span class="koboSpan" id="kobo.926.1">the database:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.927.1">
def read_input_file_type_a(file_path: str) -&gt; None:
  with open(file_path, "r") as data:
    for line in data:
      cleaned = line.strip("\n")
      write_to_database(cleaned)
  print("Processing Complete!")</span></pre> <p><span class="koboSpan" id="kobo.928.1">We’ve </span><a id="_idIndexMarker370"/><span class="koboSpan" id="kobo.929.1">opened the file. </span><span class="koboSpan" id="kobo.929.2">For each line in the file, we are reading it in as text and removing the newline character. </span><span class="koboSpan" id="kobo.929.3">This is necessary for the database insert to work properly. </span><span class="koboSpan" id="kobo.929.4">Once the string is cleaned, we are calling a function that writes to </span><span class="No-Break"><span class="koboSpan" id="kobo.930.1">the database:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.931.1">
def write_to_database(datum: str) -&gt; None:
  connection = sqlite3.connect(CANDY_DB)
  cursor = connection.cursor()
  sql = f"INSERT INTO candy(name) VALUES ('{datum}')"
  print(sql)
  cursor.execute(sql)
  cursor.close()
  connection.close()</span></pre> <p><span class="koboSpan" id="kobo.932.1">I’ve included the database file in the code repository, so there is no code needed to create the database. </span><span class="koboSpan" id="kobo.932.2">This function just opens the database, then creates a cursor. </span><span class="koboSpan" id="kobo.932.3">A cursor is used to execute commands against the database using SQL. </span><span class="koboSpan" id="kobo.932.4">Even if you don’t know SQL, I’m sure you can figure out what is happening. </span><span class="koboSpan" id="kobo.932.5">There is a table in the database called </span><strong class="source-inline"><span class="koboSpan" id="kobo.933.1">candy</span></strong><span class="koboSpan" id="kobo.934.1">. </span><span class="koboSpan" id="kobo.934.2">The table has only one field: </span><strong class="source-inline"><span class="koboSpan" id="kobo.935.1">name</span></strong><span class="koboSpan" id="kobo.936.1">. </span><span class="koboSpan" id="kobo.936.2">We’re keeping it very simple here. </span><span class="koboSpan" id="kobo.936.3">I have neglected to create a primary key because, for now, the database doesn’t really matter. </span><span class="koboSpan" id="kobo.936.4">We should be focused on the function more than how </span><span class="No-Break"><span class="koboSpan" id="kobo.937.1">it works.</span></span></p>
<p><span class="koboSpan" id="kobo.938.1">Having generated a SQL statement to insert the </span><strong class="source-inline"><span class="koboSpan" id="kobo.939.1">candy</span></strong><span class="koboSpan" id="kobo.940.1"> name from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.941.1">candy</span></strong><span class="koboSpan" id="kobo.942.1"> name in the current line of the text file, I execute the SQL statement, which will insert one row into the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.943.1">candy</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.944.1"> table.</span></span></p>
<p><span class="koboSpan" id="kobo.945.1">As a </span><a id="_idIndexMarker371"/><span class="koboSpan" id="kobo.946.1">general rule in programming, whatever you create, you should destroy, and whatever you open, you should always close. </span><span class="koboSpan" id="kobo.946.2">So, I close my cursor and my database connection to avoid any resource locks later down the road. </span><span class="koboSpan" id="kobo.946.3">Finally, I use the common dunder-name convention to run the file </span><span class="No-Break"><span class="koboSpan" id="kobo.947.1">for testing:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.948.1">
if __name__ == "__main__":
  read_input_file_type_a("../input_file_a.txt")</span></pre> <p><span class="koboSpan" id="kobo.949.1">In PyCharm, I can execute this by setting my run configuration to </span><strong class="bold"><span class="koboSpan" id="kobo.950.1">Current File</span></strong><span class="koboSpan" id="kobo.951.1"> and clicking the </span><strong class="bold"><span class="koboSpan" id="kobo.952.1">Run</span></strong><span class="koboSpan" id="kobo.953.1"> button. </span><span class="koboSpan" id="kobo.953.2">It works! </span><span class="koboSpan" id="kobo.953.3">The file is read, and we get </span><span class="No-Break"><span class="koboSpan" id="kobo.954.1">no errors.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.955.1">Dunderscores</span></p>
<p class="callout"><span class="koboSpan" id="kobo.956.1">A </span><strong class="bold"><span class="koboSpan" id="kobo.957.1">double underscore</span></strong><span class="koboSpan" id="kobo.958.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.959.1">dunderscore</span></strong><span class="koboSpan" id="kobo.960.1">) refers</span><a id="_idIndexMarker372"/><span class="koboSpan" id="kobo.961.1"> to an element in Python code preceded and proceeded by two underscore characters. </span><span class="koboSpan" id="kobo.961.2">This solves a pronunciation problem when talking about code. </span><span class="koboSpan" id="kobo.961.3">How would you talk about a method called </span><strong class="source-inline"><span class="koboSpan" id="kobo.962.1">__init__</span></strong><span class="koboSpan" id="kobo.963.1">? </span><span class="koboSpan" id="kobo.963.2">You could say, “</span><em class="italic"><span class="koboSpan" id="kobo.964.1">underscore underscore init underscore underscore.</span></em><span class="koboSpan" id="kobo.965.1">” But that is cumbersome. </span><span class="koboSpan" id="kobo.965.2">If you just say, “init” you’re not being specific enough since there could be another function or method called </span><strong class="source-inline"><span class="koboSpan" id="kobo.966.1">init</span></strong><span class="koboSpan" id="kobo.967.1"> without the underscores. </span><span class="koboSpan" id="kobo.967.2">So, you say “</span><em class="italic"><span class="koboSpan" id="kobo.968.1">dunderscore init</span></em><span class="koboSpan" id="kobo.969.1">” or even just “</span><em class="italic"><span class="koboSpan" id="kobo.970.1">dunder init</span></em><span class="koboSpan" id="kobo.971.1">”, and everybody knows what you’re </span><span class="No-Break"><span class="koboSpan" id="kobo.972.1">talking about.</span></span></p>
<p><span class="koboSpan" id="kobo.973.1">The next day we come to work and learn of a new requirement. </span><span class="koboSpan" id="kobo.973.2">We need another script that reads </span><a id="_idIndexMarker373"/><span class="koboSpan" id="kobo.974.1">data from a </span><strong class="bold"><span class="koboSpan" id="kobo.975.1">JavaScript Object Notation</span></strong><span class="koboSpan" id="kobo.976.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.977.1">JSON</span></strong><span class="koboSpan" id="kobo.978.1">) file. </span><span class="koboSpan" id="kobo.978.2">The JSON file just contains an array </span><span class="No-Break"><span class="koboSpan" id="kobo.979.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.980.1">
{
 "data": [
  "truffles",
  "turtles",
  "dark chocolate bark"
 ]
}</span></pre> <p><span class="koboSpan" id="kobo.981.1">It’s still just a list of candy, but we need to process it differently. </span><span class="koboSpan" id="kobo.981.2">Open up </span><strong class="source-inline"><span class="koboSpan" id="kobo.982.1">chapter-04/move_function/input/read_input_file_b.py</span></strong><span class="koboSpan" id="kobo.983.1">. </span><span class="koboSpan" id="kobo.983.2">You’ll find its code is similar to the </span><span class="No-Break"><span class="koboSpan" id="kobo.984.1">other code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.985.1">
import json
from read_input_file_a import write_to_database</span></pre> <p><span class="koboSpan" id="kobo.986.1">We</span><a id="_idIndexMarker374"/><span class="koboSpan" id="kobo.987.1"> know we need to work with JSON, so I’ve imported the </span><strong class="source-inline"><span class="koboSpan" id="kobo.988.1">json</span></strong><span class="koboSpan" id="kobo.989.1"> package. </span><span class="koboSpan" id="kobo.989.2">I also know I’ll need to write to the same database as before. </span><span class="koboSpan" id="kobo.989.3">I know code reuse is a good thing, so I import the function from the other script. </span><span class="koboSpan" id="kobo.989.4">Then I set to creating a version of the code that reads </span><span class="No-Break"><span class="koboSpan" id="kobo.990.1">JSON files:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.991.1">
def read_input_file_type_b(file_path: str) -&gt; None:
  with open(file_path, "r") as json_data:
    data = json.load(json_data)
    candies = data["data"]
    for candy in candies:
      write_to_database(candy)
  print("Processing Complete!")
if __name__ == "__main__":
  read_input_file_type_b("../input_file_b.json")</span></pre> <p><span class="koboSpan" id="kobo.992.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.993.1">json.load</span></strong><span class="koboSpan" id="kobo.994.1"> method takes the raw text and converts it into a regular Python 3 </span><strong class="source-inline"><span class="koboSpan" id="kobo.995.1">dict</span></strong><span class="koboSpan" id="kobo.996.1">. </span><span class="koboSpan" id="kobo.996.2">As you can see from the preceding file listing, </span><strong class="source-inline"><span class="koboSpan" id="kobo.997.1">dict</span></strong><span class="koboSpan" id="kobo.998.1"> will have one thing in it: an array of candy with the key of data. </span><span class="koboSpan" id="kobo.998.2">So, I grab that and put it in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.999.1">candies</span></strong><span class="koboSpan" id="kobo.1000.1"> variable, then I loop over that array and call the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1001.1">write_to_database</span></strong><span class="koboSpan" id="kobo.1002.1"> function for each </span><strong class="source-inline"><span class="koboSpan" id="kobo.1003.1">candy</span></strong><span class="koboSpan" id="kobo.1004.1"> in the array. </span><span class="koboSpan" id="kobo.1004.2">Wow! </span><span class="koboSpan" id="kobo.1004.3">It’s not even lunchtime! </span><span class="koboSpan" id="kobo.1004.4">Maybe I can walk around the factory? </span><span class="koboSpan" id="kobo.1004.5">I hear they’ve got some little girl testing some gum that turns people into </span><span class="No-Break"><span class="koboSpan" id="kobo.1005.1">a raspberry.</span></span></p>
<p><span class="koboSpan" id="kobo.1006.1">Not so fast! </span><span class="koboSpan" id="kobo.1006.2">This </span><a id="_idIndexMarker375"/><span class="koboSpan" id="kobo.1007.1">code could be improved. </span><span class="koboSpan" id="kobo.1007.2">Our input scripts are really designed to read data from text. </span><span class="koboSpan" id="kobo.1007.3">It doesn’t make sense to have one of the scripts contain the database function because it simply doesn’t belong inside the script that reads text input files. </span><span class="koboSpan" id="kobo.1007.4">It really should be in its own package. </span><span class="koboSpan" id="kobo.1007.5">Let’s extract it to its </span><span class="No-Break"><span class="koboSpan" id="kobo.1008.1">own file.</span></span></p>
<p><span class="koboSpan" id="kobo.1009.1">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.1010.1">chapter-04/move_function/input/read_input_file_a.py</span></strong><span class="koboSpan" id="kobo.1011.1">. </span><span class="koboSpan" id="kobo.1011.2">Right-click on the name of the function we’re going to move, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1012.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1013.1">.31</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1014.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer147">
<span class="koboSpan" id="kobo.1015.1"><img alt="Figure 4.31: Right-click the function you want to move, then click Refactor, then Move" src="image/B19644_04_31.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1016.1">Figure 4.31: Right-click the function you want to move, then click Refactor, then Move</span></p>
<p><span class="koboSpan" id="kobo.1017.1">In the </span><a id="_idIndexMarker376"/><span class="koboSpan" id="kobo.1018.1">context menu, click </span><strong class="bold"><span class="koboSpan" id="kobo.1019.1">Refactor</span></strong><span class="koboSpan" id="kobo.1020.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1021.1">Move</span></strong><span class="koboSpan" id="kobo.1022.1">. </span><span class="koboSpan" id="kobo.1022.2">You’ll see a dialog asking for the target file name. </span><span class="koboSpan" id="kobo.1022.3">I’ve entered a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1023.1">database_helper.py</span></strong><span class="koboSpan" id="kobo.1024.1"> filename. </span><span class="koboSpan" id="kobo.1024.2">Click </span><strong class="bold"><span class="koboSpan" id="kobo.1025.1">OK</span></strong><span class="koboSpan" id="kobo.1026.1">. </span><span class="koboSpan" id="kobo.1026.2">Watch carefully because a lot is about </span><span class="No-Break"><span class="koboSpan" id="kobo.1027.1">to happen.</span></span></p>
<p><span class="koboSpan" id="kobo.1028.1">I get a new file </span><span class="No-Break"><span class="koboSpan" id="kobo.1029.1">called </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1030.1">database_helper.py</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1031.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1032.1">
import sqlite3
from input.read_input_file_a import CANDY_DB
def write_to_database(datum: str) -&gt; None:
  connection = sqlite3.connect(CANDY_DB)
  cursor = connection.cursor()
  sql = f"INSERT INTO candy(name) VALUES ('{datum}')"
  print(sql)
  cursor.execute(sql)
  cursor.close()
  connection.close()</span></pre> <p><span class="koboSpan" id="kobo.1033.1">This is</span><a id="_idIndexMarker377"/><span class="koboSpan" id="kobo.1034.1"> the extracted function moved to its own file. </span><span class="koboSpan" id="kobo.1034.2">PyCharm discovered the relevant import statement and moved that here as well. </span><span class="koboSpan" id="kobo.1034.3">I had a constant for the file name called </span><strong class="source-inline"><span class="koboSpan" id="kobo.1035.1">CANDY_DB</span></strong><span class="koboSpan" id="kobo.1036.1">. </span><span class="koboSpan" id="kobo.1036.2">It didn’t move that, which would be my preference. </span><span class="koboSpan" id="kobo.1036.3">Unfortunately, the current release of PyCharm is not psychic. </span><span class="koboSpan" id="kobo.1036.4">I’ll just have to move that myself. </span><span class="koboSpan" id="kobo.1036.5">Other than that, this file </span><span class="No-Break"><span class="koboSpan" id="kobo.1037.1">looks perfect.</span></span></p>
<p><span class="koboSpan" id="kobo.1038.1">If you check the contents of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1039.1">input_file_a.py</span></strong><span class="koboSpan" id="kobo.1040.1">, you’ll see it has changed. </span><span class="koboSpan" id="kobo.1040.2">The first line in the file now reads </span><span class="No-Break"><span class="koboSpan" id="kobo.1041.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1042.1">
from input.database_helper import write_to_database</span></pre> <p><span class="koboSpan" id="kobo.1043.1">Likewise, if I open </span><strong class="source-inline"><span class="koboSpan" id="kobo.1044.1">input_file_b.py</span></strong><span class="koboSpan" id="kobo.1045.1">, I’ll find the input there as well. </span><span class="koboSpan" id="kobo.1045.2">PyCharm extracted the function to its own file, then changed every reference in every file to point to the </span><span class="No-Break"><span class="koboSpan" id="kobo.1046.1">new location.</span></span></p>
<p><span class="koboSpan" id="kobo.1047.1">Now, I realize I probably should have put this in its own module, and I realize you probably would have done this totally differently. </span><span class="koboSpan" id="kobo.1047.2">Before you go bashing me on Twitter, remember this book is about PyCharm, not software architecture. </span><span class="koboSpan" id="kobo.1047.3">I’m trying to keep it simple </span><span class="No-Break"><span class="koboSpan" id="kobo.1048.1">on purpose.</span></span></p>
<h1 id="_idParaDest-105"><a id="_idTextAnchor107"/><span class="koboSpan" id="kobo.1049.1">Documentation</span></h1>
<p><span class="koboSpan" id="kobo.1050.1">No programmer</span><a id="_idIndexMarker378"/><span class="koboSpan" id="kobo.1051.1"> can doubt the importance of documentation in software engineering and development. </span><span class="koboSpan" id="kobo.1051.2">That said, the process of creating documentation for a program can be quite tedious. </span><span class="koboSpan" id="kobo.1051.3">Furthermore, the end result might not even be effective if the person doing the documentation was not following </span><span class="No-Break"><span class="koboSpan" id="kobo.1052.1">standard practices.</span></span></p>
<p><span class="koboSpan" id="kobo.1053.1">Keeping that in mind, PyCharm looks to streamline this process of documentation and make it as straightforward and seamless as possible. </span><span class="koboSpan" id="kobo.1053.2">Regarding documentation, there are two components we will consider for this process: viewing and creating documentation. </span><span class="koboSpan" id="kobo.1053.3">We will learn that PyCharm offers great support for </span><span class="No-Break"><span class="koboSpan" id="kobo.1054.1">both processes.</span></span></p>
<h2 id="_idParaDest-106"><a id="_idTextAnchor108"/><span class="koboSpan" id="kobo.1055.1">Working with docstrings</span></h2>
<p><span class="koboSpan" id="kobo.1056.1">Documentation</span><a id="_idIndexMarker379"/><span class="koboSpan" id="kobo.1057.1"> in Python is known as docstrings, defined </span><a id="_idIndexMarker380"/><span class="koboSpan" id="kobo.1058.1">as a string literal that is placed before any of the statements in a module, function, class, or method in Python. </span><span class="koboSpan" id="kobo.1058.2">You can look at examples of Python docstrings by going into the source code of the various built-in Python functions. </span><span class="koboSpan" id="kobo.1058.3">It is also recommended that any custom API you write also has the appropriate docstrings for readability </span><span class="No-Break"><span class="koboSpan" id="kobo.1059.1">and maintainability.</span></span></p>
<p><span class="koboSpan" id="kobo.1060.1">The most noteworthy subtlety in creating docstrings is the practice of using triple-double quotes to surround a docstring (which we will see examples of in the next subsection). </span><span class="koboSpan" id="kobo.1060.2">For more </span><a id="_idIndexMarker381"/><span class="koboSpan" id="kobo.1061.1">details about docstring conventions, take a look at this PEP </span><span class="No-Break"><span class="koboSpan" id="kobo.1062.1">article: </span></span><a href="http://www.python.org/dev/peps/pep-0257/"><span class="No-Break"><span class="koboSpan" id="kobo.1063.1">www.python.org/dev/peps/pep-0257/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1064.1">.</span></span></p>
<h3><span class="koboSpan" id="kobo.1065.1">Creating documentation</span></h3>
<p><span class="koboSpan" id="kobo.1066.1">In this </span><a id="_idIndexMarker382"/><span class="koboSpan" id="kobo.1067.1">subsection, we will look into the process of writing a docstring for functions with the help of PyCharm. </span><span class="koboSpan" id="kobo.1067.2">Let’s </span><span class="No-Break"><span class="koboSpan" id="kobo.1068.1">get started.</span></span></p>
<p><span class="koboSpan" id="kobo.1069.1">Open the project in the sample source code in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1070.1">chapter-04/documentation</span></strong><span class="koboSpan" id="kobo.1071.1">. </span><span class="koboSpan" id="kobo.1071.2">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1072.1">prime_test.py</span></strong><span class="koboSpan" id="kobo.1073.1"> file, which looks </span><span class="No-Break"><span class="koboSpan" id="kobo.1074.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1075.1">
import sys
from math import sqrt
def prime_check(n: int) -&gt; bool:
  # TODO: docstring goes here
  if n &lt; 2:
    return False
  limit = int(sqrt(n)) + 1
  for i in range(2, limit):
    if n % i == 0:
      return False # return False if a divisor is found
  return True # return True if no divisor is found</span></pre> <p><span class="koboSpan" id="kobo.1076.1">The file goes</span><a id="_idIndexMarker383"/><span class="koboSpan" id="kobo.1077.1"> on after that, but the part I need you to focus on is the line right below the method signature for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1078.1">prime_check</span></strong><span class="koboSpan" id="kobo.1079.1"> function. </span><span class="koboSpan" id="kobo.1079.2">There is a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1080.1">TODO</span></strong><span class="koboSpan" id="kobo.1081.1"> there. </span><span class="koboSpan" id="kobo.1081.2">If you’re from a Spanish-speaking country, realize this doesn’t mean </span><em class="italic"><span class="koboSpan" id="kobo.1082.1">all</span></em><span class="koboSpan" id="kobo.1083.1">. </span><span class="koboSpan" id="kobo.1083.2">It refers to a “to-do” item in the code. </span><span class="koboSpan" id="kobo.1083.3">In this case, the original developer, who happens to be Quan Nguyen, the author of the first edition of this book, is stating he didn’t write the docstring for this function. </span><span class="koboSpan" id="kobo.1083.4">He is signaling here that he knows that, and he intends to come back and fix this later. </span><span class="koboSpan" id="kobo.1083.5">Let’s help him out with a little PyCharm magic. </span><span class="koboSpan" id="kobo.1083.6">Before you get too excited, I’m sad to report that there isn’t a tool in PyCharm that can read your code and generate the docstring. </span><span class="koboSpan" id="kobo.1083.7">Given how much developers hate writing documentation, I’ll wager there is a fast-and-furious effort underway somewhere to have AI do this. </span><span class="koboSpan" id="kobo.1083.8">But we’re sticking with what PyCharm lets us do out of </span><span class="No-Break"><span class="koboSpan" id="kobo.1084.1">the box.</span></span></p>
<p><span class="koboSpan" id="kobo.1085.1">Delete the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1086.1"># TODO</span></strong><span class="koboSpan" id="kobo.1087.1"> line and, in its place, type three double quotation marks (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1088.1">"""</span></strong><span class="koboSpan" id="kobo.1089.1">) and press </span><em class="italic"><span class="koboSpan" id="kobo.1090.1">Enter</span></em><span class="koboSpan" id="kobo.1091.1">. </span><span class="koboSpan" id="kobo.1091.2">You’ll find a generated docstring </span><span class="No-Break"><span class="koboSpan" id="kobo.1092.1">template appears:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1093.1">
"""
:param n:
:return:
"""</span></pre> <p><span class="koboSpan" id="kobo.1094.1">This template needs some filling-in in order to become a proper docstring. </span><span class="koboSpan" id="kobo.1094.2">Note the gap beneath the first set of triple quotes. </span><span class="koboSpan" id="kobo.1094.3">Here, you are expected to write about what the function does. </span><span class="koboSpan" id="kobo.1094.4">Maybe something </span><span class="No-Break"><span class="koboSpan" id="kobo.1095.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1096.1">
"""
Check whether an integer is a prime number of not.
</span><span class="koboSpan" id="kobo.1096.2">Generally, the function goes through all odd numbers
less than the square root of the input integer, and
checks to see if the input is divisible by that number.
</span><span class="koboSpan" id="kobo.1096.3">:param n:
:return:
"""</span></pre> <p><span class="koboSpan" id="kobo.1097.1">Below</span><a id="_idIndexMarker384"/><span class="koboSpan" id="kobo.1098.1"> that is a section for the parameters expected by the function. </span><span class="koboSpan" id="kobo.1098.2">Here, the function takes one argument called </span><strong class="source-inline"><span class="koboSpan" id="kobo.1099.1">n</span></strong><span class="koboSpan" id="kobo.1100.1">. </span><span class="koboSpan" id="kobo.1100.2">We should write a little bit about that parameter, including </span><span class="No-Break"><span class="koboSpan" id="kobo.1101.1">its type:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1102.1">
"""
Check whether an integer is a prime number of not.
</span><span class="koboSpan" id="kobo.1102.2">Generally, the function goes through all odd numbers
less than the square root of the input integer, and
checks to see if the input is divisible by that number.
</span><span class="koboSpan" id="kobo.1102.3">:param n: the integer to prime check
:return:
"""</span></pre> <p><span class="koboSpan" id="kobo.1103.1">The last part is the documentation for the </span><span class="No-Break"><span class="koboSpan" id="kobo.1104.1">return value:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1105.1">
"""
Check whether an integer is a prime number of not.
</span><span class="koboSpan" id="kobo.1105.2">Generally, the function goes through all odd numbers
less than the square root of the input integer, and
checks to see if the input is divisible by that number.
</span><span class="koboSpan" id="kobo.1105.3">:param n: the integer to prime check
:return: boolean
"""</span></pre> <p><span class="koboSpan" id="kobo.1106.1">Consider the</span><a id="_idIndexMarker385"/><span class="koboSpan" id="kobo.1107.1"> generated template of the docstring after we hit </span><em class="italic"><span class="koboSpan" id="kobo.1108.1">Return/Enter</span></em><span class="koboSpan" id="kobo.1109.1"> to expand the pair of triple-double quotes. </span><strong class="source-inline"><span class="koboSpan" id="kobo.1110.1">:param</span></strong><span class="koboSpan" id="kobo.1111.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1112.1">:return:</span></strong><span class="koboSpan" id="kobo.1113.1"> are part of the template and will be included every time we expand a docstring in the same way. </span><span class="koboSpan" id="kobo.1113.2">PyCharm allows us to change this format of docstring templates, making it highly customizable </span><span class="No-Break"><span class="koboSpan" id="kobo.1114.1">and accommodating.</span></span></p>
<h3><span class="koboSpan" id="kobo.1115.1">Customizing the docstring templates</span></h3>
<p><span class="koboSpan" id="kobo.1116.1">As usual, the</span><a id="_idIndexMarker386"/><span class="koboSpan" id="kobo.1117.1"> docstring templates are highly customizable. </span><span class="koboSpan" id="kobo.1117.2">You’ll find the customization settings by going into the </span><strong class="bold"><span class="koboSpan" id="kobo.1118.1">Settings</span></strong><span class="koboSpan" id="kobo.1119.1"> window, covered extensively in </span><a href="B19644_03.xhtml#_idTextAnchor052"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1120.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.1121.1">,</span><em class="italic"><span class="koboSpan" id="kobo.1122.1"> Customizing Interpreters and Virtual Environments</span></em><span class="koboSpan" id="kobo.1123.1">. </span><span class="koboSpan" id="kobo.1123.2">Just search on docstring, and you’ll find the areas that should capture your attention. </span><span class="koboSpan" id="kobo.1123.3">The first is shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1124.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1125.1">.32</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1126.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer148">
<span class="koboSpan" id="kobo.1127.1"><img alt="Figure 4.32: You can change the general format used to render your docstrings to one of several industry-standard formats" src="image/B19644_04_32.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1128.1">Figure 4.32: You can change the general format used to render your docstrings to one of several industry-standard formats</span></p>
<p><span class="koboSpan" id="kobo.1129.1">The other group of settings is part of the color scheme settings, which allow you to customize the </span><a id="_idIndexMarker387"/><span class="koboSpan" id="kobo.1130.1">color used to render the docstring in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1131.1">PyCharm editor.</span></span></p>
<h3><span class="koboSpan" id="kobo.1132.1">Viewing documentation</span></h3>
<p><span class="koboSpan" id="kobo.1133.1">Imagine a </span><a id="_idIndexMarker388"/><span class="koboSpan" id="kobo.1134.1">situation where you are using a specific method from one package, but you are not entirely sure which parameters the method takes in and/or what its return type is. </span><span class="koboSpan" id="kobo.1134.2">Therefore, you need to go online and look into the documentation of the package for that </span><span class="No-Break"><span class="koboSpan" id="kobo.1135.1">specific method.</span></span></p>
<p><span class="koboSpan" id="kobo.1136.1">As a PyCharm user, you can achieve the same thing with two simple actions: </span><strong class="bold"><span class="koboSpan" id="kobo.1137.1">Quick Definition</span></strong><span class="koboSpan" id="kobo.1138.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.1139.1">Quick Documentation</span></strong><span class="koboSpan" id="kobo.1140.1">. </span><span class="koboSpan" id="kobo.1140.2">Still using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1141.1">prime_check.py</span></strong><span class="koboSpan" id="kobo.1142.1"> script from the previous section, move your cursor to the line where we use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1143.1">math.sqrt()</span></strong><span class="koboSpan" id="kobo.1144.1"> function in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1145.1">prime_check()</span></strong><span class="koboSpan" id="kobo.1146.1"> function; it should be around </span><span class="No-Break"><span class="koboSpan" id="kobo.1147.1">line 19.</span></span></p>
<h3><span class="koboSpan" id="kobo.1148.1">Quick Documentation</span></h3>
<p><span class="koboSpan" id="kobo.1149.1">Let’s say we’d like </span><a id="_idIndexMarker389"/><span class="koboSpan" id="kobo.1150.1">to see the documentation of this function. </span><span class="koboSpan" id="kobo.1150.2">You can simply hover your mouse over the function call and wait a moment. </span><span class="koboSpan" id="kobo.1150.3">Alternatively, you can choose </span><strong class="bold"><span class="koboSpan" id="kobo.1151.1">View</span></strong><span class="koboSpan" id="kobo.1152.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1153.1">Quick Documentation</span></strong><span class="koboSpan" id="kobo.1154.1"> for this or its corresponding keyboard shortcut. </span><span class="koboSpan" id="kobo.1154.2">You will see a pop-up window showing documentation similar to </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1155.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1156.1">.33</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1157.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer149">
<span class="koboSpan" id="kobo.1158.1"><img alt="Figure 4.33: Quick Documentation shows the documentation for the selected function" src="image/B19644_04_33.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1159.1">Figure 4.33: Quick Documentation shows the documentation for the selected function</span></p>
<p><span class="koboSpan" id="kobo.1160.1">What’s </span><a id="_idIndexMarker390"/><span class="koboSpan" id="kobo.1161.1">more, you can also view the documentation for your own functions, methods, classes, and so on using the same action. </span><span class="koboSpan" id="kobo.1161.2">PyCharm’s indexing process finds and generates this information when you open </span><span class="No-Break"><span class="koboSpan" id="kobo.1162.1">the project.</span></span></p>
<p><span class="koboSpan" id="kobo.1163.1">If you move your cursor to the call to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1164.1">prime_check()</span></strong><span class="koboSpan" id="kobo.1165.1"> in the main scope in the following line (which should be around </span><span class="No-Break"><span class="koboSpan" id="kobo.1166.1">line 38</span></span><span class="No-Break"><span class="koboSpan" id="kobo.1167.1">):</span></span></p>
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1168.1">if prime_check(num):</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1169.1">After waiting a moment, you will be able to see the same docstring that we entered earlier, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1170.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1171.1">.34</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1172.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer150">
<span class="koboSpan" id="kobo.1173.1"><img alt="Figure 4.34: Quick Documentation shows the documentation for the selected function on line 38" src="image/B19644_04_34.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1174.1">Figure 4.34: Quick Documentation shows the documentation for the selected function on line 38</span></p>
<p><span class="koboSpan" id="kobo.1175.1">Note the format </span><a id="_idIndexMarker391"/><span class="koboSpan" id="kobo.1176.1">of the docstring in the documentation matches the documentation shown in </span><span class="No-Break"><span class="koboSpan" id="kobo.1177.1">the window.</span></span></p>
<h3><span class="koboSpan" id="kobo.1178.1">Quick definition</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.1179.1">Quick Definition</span></strong><span class="koboSpan" id="kobo.1180.1"> operates in the same manner as </span><strong class="bold"><span class="koboSpan" id="kobo.1181.1">Quick Documentation</span></strong><span class="koboSpan" id="kobo.1182.1">. </span><span class="koboSpan" id="kobo.1182.2">This is useful</span><a id="_idIndexMarker392"/><span class="koboSpan" id="kobo.1183.1"> when the documentation does not provide enough information, and you would like to see how a specific function is defined within the source code. </span><span class="koboSpan" id="kobo.1183.2">To do this, place your cursor at a specific API call, and go to </span><strong class="bold"><span class="koboSpan" id="kobo.1184.1">View</span></strong><span class="koboSpan" id="kobo.1185.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.1186.1">Quick Definition</span></strong><span class="koboSpan" id="kobo.1187.1"> to evoke </span><span class="No-Break"><span class="koboSpan" id="kobo.1188.1">the action.</span></span></p>
<p><span class="koboSpan" id="kobo.1189.1">For example, </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1190.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1191.1">.35</span></em><span class="koboSpan" id="kobo.1192.1"> shows the quick definition evoked on the call to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1193.1">prime_check()</span></strong><span class="koboSpan" id="kobo.1194.1"> in </span><span class="No-Break"><span class="koboSpan" id="kobo.1195.1">our example:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer151">
<span class="koboSpan" id="kobo.1196.1"><img alt="Figure 4.35: Quick Definition shows the actual code definition for the function, which naturally includes the docstring if one is present" src="image/B19644_04_35.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1197.1">Figure 4.35: Quick Definition shows the actual code definition for the function, which naturally includes the docstring if one is present</span></p>
<p><span class="koboSpan" id="kobo.1198.1">Overall </span><a id="_idIndexMarker393"/><span class="koboSpan" id="kobo.1199.1">PyCharm provides powerful options when it comes to dynamically viewing documentation and definitions within the IDE. </span><span class="koboSpan" id="kobo.1199.2">Significant time and energy can be saved when programmers do not have to switch from their development environment to look </span><span class="No-Break"><span class="koboSpan" id="kobo.1200.1">for documentation.</span></span></p>
<h1 id="_idParaDest-107"><a id="_idTextAnchor109"/><span class="koboSpan" id="kobo.1201.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.1202.1">Throughout this chapter, we examined PyCharm’s features regarding various aspects of programming, including code analysis, code completion, refactoring, and documenting. </span><span class="koboSpan" id="kobo.1202.2">In all of these processes, PyCharm’s intelligent code analyzer provides smart and convenient options for editing and fixing problems in your code in real time and in a </span><span class="No-Break"><span class="koboSpan" id="kobo.1203.1">dynamic way.</span></span></p>
<p><span class="koboSpan" id="kobo.1204.1">Aside from a wide number of options the intelligent code analyzer can support, PyCharm also allows users to customize the behavior of the analyzer to their liking. </span><span class="koboSpan" id="kobo.1204.2">This can be achieved in various sections of the general settings. </span><span class="koboSpan" id="kobo.1204.3">Overall, these support features look to improve your productivity as a developer in a way that is customized and beneficial </span><span class="No-Break"><span class="koboSpan" id="kobo.1205.1">to you.</span></span></p>
<p><span class="koboSpan" id="kobo.1206.1">In the next chapter, we will focus on a particular aspect of programming: version control. </span><span class="koboSpan" id="kobo.1206.2">We will learn about the specifics of the version control process with Git and how PyCharm supports and streamlines </span><span class="No-Break"><span class="koboSpan" id="kobo.1207.1">this process.</span></span></p>
<h1 id="_idParaDest-108"><a id="_idTextAnchor110"/><span class="koboSpan" id="kobo.1208.1">Questions</span></h1>
<ol>
<li><span class="koboSpan" id="kobo.1209.1">What levels of severity in terms of problems in a Python program are determined by PyCharm’s </span><span class="No-Break"><span class="koboSpan" id="kobo.1210.1">code analyzer?</span></span></li>
<li><span class="koboSpan" id="kobo.1211.1">What are some common problems that PyCharm can detect and help fix via its intelligent </span><span class="No-Break"><span class="koboSpan" id="kobo.1212.1">code analyzer?</span></span></li>
<li><span class="koboSpan" id="kobo.1213.1">How is PyCharm’s code completion support different </span><span class="No-Break"><span class="koboSpan" id="kobo.1214.1">from others?</span></span></li>
<li><span class="koboSpan" id="kobo.1215.1">What are some common code completion options that </span><span class="No-Break"><span class="koboSpan" id="kobo.1216.1">PyCharm offers?</span></span></li>
<li><span class="koboSpan" id="kobo.1217.1">What are the common causes for PyCharm’s code completion support </span><span class="No-Break"><span class="koboSpan" id="kobo.1218.1">not working?</span></span></li>
<li><span class="koboSpan" id="kobo.1219.1">What are some common refactoring options that </span><span class="No-Break"><span class="koboSpan" id="kobo.1220.1">PyCharm offers?</span></span></li>
</ol>
<h1 id="_idParaDest-109"><a id="_idTextAnchor111"/><span class="koboSpan" id="kobo.1221.1">Further reading</span></h1>
<ul>
<li><span class="koboSpan" id="kobo.1222.1">Jolt Awards: </span><em class="italic"><span class="koboSpan" id="kobo.1223.1">The Best Books For </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1224.1">Developers </span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1225.1">(</span></span><a href="http://informationweek.com"><span class="No-Break"><span class="koboSpan" id="kobo.1226.1">informationweek.com</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1227.1">)</span></span></li>
<li><span class="koboSpan" id="kobo.1228.1">Pylint home </span><span class="No-Break"><span class="koboSpan" id="kobo.1229.1">page:</span></span><span class="No-Break"> </span><a href="https://www.pylint.org/"><span class="No-Break"><span class="koboSpan" id="kobo.1230.1">https://www.pylint.org/</span></span></a></li>
<li><span class="koboSpan" id="kobo.1231.1">Murphy’s laws on </span><span class="No-Break"><span class="koboSpan" id="kobo.1232.1">technology: </span></span><a href="https://www.netlingo.com/word/murphys-laws-on-technology.php"><span class="No-Break"><span class="koboSpan" id="kobo.1233.1">https://www.netlingo.com/word/murphys-laws-on-technology.php</span></span></a></li>
<li><span class="koboSpan" id="kobo.1234.1">Be sure to check out the companion website for the book </span><span class="No-Break"><span class="koboSpan" id="kobo.1235.1">at </span></span><a href="https://www.pycharm-book.com"><span class="No-Break"><span class="koboSpan" id="kobo.1236.1">https://www.pycharm-book.com</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1237.1">.</span></span></li>
</ul>
</div>
</body></html>