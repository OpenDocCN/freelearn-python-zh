<html><head></head><body>
  <div id="sbo-rt-content"><div class="chapter" title="Chapter 4. Using the Selenium Python API for Element Interaction"><div class="titlepage"><div><div><h1 class="title"><a id="ch04"/>Chapter 4. Using the Selenium Python API for Element Interaction</h1></div></div></div><p>Web applications use HTML forms to send data to a server. HTML forms contain input elements such as text fields, checkboxes, radio buttons, submit buttons, and more. A form can also contain select lists, text areas, field sets, legends, and label elements.</p><p>A typical web application requires you to fill in lots of forms, starting from registering as a user or searching for products. Forms are enclosed in the HTML <code class="literal">&lt;form&gt;</code> tag. This tag specifies the method of submitting the data, either using the <code class="literal">GET</code> or <code class="literal">POST</code> method, and the address at which the data entered into the form should be submitted on the server.</p><p>In this chapter, we will cover the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Understanding more about the <code class="literal">WebDriver</code> and <code class="literal">WebElement</code> classes</li><li class="listitem" style="list-style-type: disc">Implementing tests that interact with the application using various methods and properties of the <code class="literal">WebDriver</code> and <code class="literal">WebElement</code> classes</li><li class="listitem" style="list-style-type: disc">Using the <code class="literal">Select</code> class to automate dropdowns and lists</li><li class="listitem" style="list-style-type: disc">Automating JavaScript alerts and browser navigation</li></ul></div><div class="section" title="Elements of HTML forms"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec19"/>Elements of HTML forms</h1></div></div></div><p>HTML forms are <a id="id208" class="indexterm"/>composed with different types of elements, including <code class="literal">&lt;form&gt;</code>, <code class="literal">&lt;input&gt;</code>, <code class="literal">&lt;button&gt;</code>, and <code class="literal">&lt;label&gt;</code> as shown in the following diagram. Web developers use these elements to design the web page to display data or accept data from users. The developers write HTML code for web pages defining these elements. However, as an end user, we see these elements as the <span class="strong"><strong>Graphical User Interface</strong></span> (<span class="strong"><strong>GUI</strong></span>) <a id="id209" class="indexterm"/>controls such as textboxes, labels, buttons, checkboxes, and radio buttons. The HTML code is hidden from the end users.</p><div class="mediaobject"><img src="images/3506OS_04_01.jpg" alt="Elements of HTML forms"/></div><p>Selenium WebDriver <a id="id210" class="indexterm"/>provides broad support for automating interaction with these elements as well as checking the functionality of the application.</p></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Understanding the WebDriver class"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec20"/>Understanding the WebDriver class</h1></div></div></div><p>The <code class="literal">WebDriver</code> <a id="id211" class="indexterm"/>class provides a number of properties or attributes for browser interaction. We can use the properties and methods of the <code class="literal">WebDriver</code> class to interact with the browser window, alerts, frames and pop-up windows. It also provides features to automate browser navigation, access cookies, capture screenshots, and so on. In this chapter, we will explore some of the most important features of the <code class="literal">WebDriver</code> class. The following table covers some of the most important properties and methods that we will be using in the rest of the book.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note11"/>Note</h3><p>For a complete <a id="id212" class="indexterm"/>list of properties and methods visit <a class="ulink" href="http://selenium.googlecode.com/git/docs/api/py/webdriver_remote/selenium.webdriver.remote.webdriver.html#module-selenium.webdriver.remote.webdriver">http://selenium.googlecode.com/git/docs/api/py/webdriver_remote/selenium.webdriver.remote.webdriver.html#module-selenium.webdriver.remote.webdriver</a>.</p></div></div><div class="section" title="Properties of the WebDriver class"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec22"/>Properties of the WebDriver class</h2></div></div></div><p>The <code class="literal">WebDriver</code> class <a id="id213" class="indexterm"/>implements the following properties for accessing the browser:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Property/attribute</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th><th style="text-align: left" valign="bottom">
<p>Example</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">current_url</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id214" class="indexterm"/>gets the URL of <a id="id215" class="indexterm"/>the current page displayed in the browser</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.current_url</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">current_window_handle</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id216" class="indexterm"/>gets <a id="id217" class="indexterm"/>the handle of the current window</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.current_window_handle</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">name</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id218" class="indexterm"/>gets the name of the <a id="id219" class="indexterm"/>underlying browser for this instance</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.name</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">orientation</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id220" class="indexterm"/>gets the current <a id="id221" class="indexterm"/>orientation of the device</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.orientation</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">page_source</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id222" class="indexterm"/>gets the source <a id="id223" class="indexterm"/>of the current page</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.page_source</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">title</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id224" class="indexterm"/>gets the title of the current <a id="id225" class="indexterm"/>page</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.title</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">window_handles</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id226" class="indexterm"/>gets the <a id="id227" class="indexterm"/>handles of all windows within the current session</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.window_handles</code>
</p>
</td></tr></tbody></table></div></div><div class="section" title="Methods of the WebDriver class"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec23"/>Methods of the WebDriver class</h2></div></div></div><p>The <code class="literal">WebDriver</code> <a id="id228" class="indexterm"/>class implements various methods to interact with the browser window, web pages, and the elements on these pages. Here is a list of some important methods:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Method</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th><th style="text-align: left" valign="bottom">
<p>Argument</p>
</th><th style="text-align: left" valign="bottom">
<p>Example</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">back()</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id229" class="indexterm"/>goes one step backward <a id="id230" class="indexterm"/>in the browser history in the current session.</p>
</td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.back()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">close()</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id231" class="indexterm"/>closes the current browser <a id="id232" class="indexterm"/>window.</p>
</td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.close()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">forward()</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id233" class="indexterm"/>goes one step forward <a id="id234" class="indexterm"/>in the browser history in the current session.</p>
</td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.forward()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">get(url)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id235" class="indexterm"/>navigates and loads a <a id="id236" class="indexterm"/>web page in the current browser session.</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">url</code> is the address of the website or web page to navigate</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.get("http://www.google.com")</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">maximize_window() </code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id237" class="indexterm"/>maximizes the current <a id="id238" class="indexterm"/>browser window.</p>
</td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.maximize_window()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">quit()</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id239" class="indexterm"/>quits the driver and <a id="id240" class="indexterm"/>closes all the associated windows.</p>
</td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.quit()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">refresh() </code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id241" class="indexterm"/>refreshes the current <a id="id242" class="indexterm"/>page displayed in the <a id="id243" class="indexterm"/>browser.</p>
</td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.refresh()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">switch_to.active_element()</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id244" class="indexterm"/>returns the element with <a id="id245" class="indexterm"/>focus or the <span class="emphasis"><em>body</em></span> if nothing else has focus.</p>
</td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.switch_to_active_element()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Switch.to_alert()</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id246" class="indexterm"/>switches the <a id="id247" class="indexterm"/>focus to an alert on the page.</p>
</td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.switch_to_alert()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">switch_to.default_content()</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id248" class="indexterm"/>switches the focus to <a id="id249" class="indexterm"/>the default frame.</p>
</td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.switch_to_default_content()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">switch_to.frame(frame_reference)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id250" class="indexterm"/>switches the focus to the specified <a id="id251" class="indexterm"/>frame, by index, name, or web element. This method also works on <code class="literal">IFRAMES</code>.</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">frame_reference</code>: This is the name of the window to switch to, an integer representing the index, or a web element that is a frame to switch to</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.switch_to_frame('frame_name') </code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">switch_to.window(window_name)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id252" class="indexterm"/>switches focus <a id="id253" class="indexterm"/>to the specified window.</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">window_name</code> is the name or window handle of the window to switch to.</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.switch_to_window('main')</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">implicitly_wait(time_to_wait)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This sets <a id="id254" class="indexterm"/>a sticky timeout to implicitly wait for an <a id="id255" class="indexterm"/>element to be found, or a command <a id="id256" class="indexterm"/>to complete. This method only needs to be called one time per session. To set the timeout for calls to <code class="literal">execute_async_script</code>, see <code class="literal">set_script_timeo</code>
<code class="literal">ut</code>.</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">time_to_wait</code> is the amount of time to wait (in seconds).</p>
</td><td style="text-align: left" valign="top"> </td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">set_page_load_timeout(time_to_wait)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id257" class="indexterm"/>sets the amount <a id="id258" class="indexterm"/>of time to wait for a page load to complete.</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">time_to_wait</code> is the amount of time to wait (in seconds).</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.set_page_load_timeout(30)</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">set_script_timeout(time_to_wait)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id259" class="indexterm"/>sets the amount of time that the <a id="id260" class="indexterm"/>script should wait during an <code class="literal">execute_async_script</code> call before throwing an error.</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">time_to_wait</code> is the amount of time to wait (in seconds).</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.set_script_timeout(30)</code>
</p>
</td></tr></tbody></table></div></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Understanding the WebElement class"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec21"/>Understanding the WebElement class</h1></div></div></div><p>We can <a id="id261" class="indexterm"/>interact with elements on a web page using the <code class="literal">WebElement</code> class. We can interact with a textbox, text area, button, radio buttons, checkbox, table, table row, table cell, div, and so on using the <code class="literal">WebElement</code> class.</p><p>The <code class="literal">WebElemet</code> class provides a number of properties or attributes and methods to interact with the elements. The next table covers some of the most important properties and methods that we will be using in <a id="id262" class="indexterm"/>the rest of the book. For a complete list of properties and methods, visit <a class="ulink" href="http://selenium.googlecode.com/git/docs/api/py/webdriver_remote/selenium.webdriver.remote.webelement.html#module-selenium.webdriver.remote.webelement">http://selenium.googlecode.com/git/docs/api/py/webdriver_remote/selenium.webdriver.remote.webelement.html#module-selenium.webdriver.remote.webelement</a>.</p><div class="section" title="Properties of the WebElement class"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec24"/>Properties of the WebElement class</h2></div></div></div><p>The <code class="literal">WebElement</code> class <a id="id263" class="indexterm"/>implements the following properties:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Property/attribute</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th><th style="text-align: left" valign="bottom">
<p>Example</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">size</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id264" class="indexterm"/>gets <a id="id265" class="indexterm"/>the size of the element</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">element.size</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">tag_name</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This gets <a id="id266" class="indexterm"/>this element's <a id="id267" class="indexterm"/>HTML tag name</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">element.tag_name</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">text</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id268" class="indexterm"/>gets <a id="id269" class="indexterm"/>the text of the element</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">element.text</code>
</p>
</td></tr></tbody></table></div></div><div class="section" title="Methods of the WebElement class"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec25"/>Methods of the WebElement class</h2></div></div></div><p>The <code class="literal">WebElement</code> <a id="id270" class="indexterm"/>class implements the following methods:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Method</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th><th style="text-align: left" valign="bottom">
<p>Argument</p>
</th><th style="text-align: left" valign="bottom">
<p>Example</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">clear()</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id271" class="indexterm"/>clears the content of the textbox <a id="id272" class="indexterm"/>or text area element.</p>
</td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top">
<p>
<code class="literal">element.clear()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">click()</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id273" class="indexterm"/>clicks <a id="id274" class="indexterm"/>the element.</p>
</td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top">
<p>
<code class="literal">element.click()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">get_attribute(name)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id275" class="indexterm"/>gets the attribute <a id="id276" class="indexterm"/>value from the element.</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">name</code> is the name of the attribute.</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">element.get_attribute("value")</code>
</p>
<p>
<code class="literal">Or</code>
</p>
<p>
<code class="literal">element.get_attribute("maxlength")</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">is_displayed()</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id277" class="indexterm"/>checks whether <a id="id278" class="indexterm"/>the element is visible to the user.</p>
</td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top">
<p>
<code class="literal">element.is_displayed()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">is_enabled() </code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id279" class="indexterm"/>checks whether the <a id="id280" class="indexterm"/>element is enabled.</p>
</td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top">
<p>
<code class="literal">element.is_enabled()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">is_selected()</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id281" class="indexterm"/>checks whether the element is selected. This method <a id="id282" class="indexterm"/>is used to check the selection of a radio button or checkbox.</p>
</td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top">
<p>
<code class="literal">element.is_selected()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">send_keys(*value)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id283" class="indexterm"/>simulates typing into <a id="id284" class="indexterm"/>the element.</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">Value</code> is a string for typing or setting form fields.</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">element.send_keys("foo")</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">submit()</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id285" class="indexterm"/>submits a form. If you <a id="id286" class="indexterm"/>call <a id="id287" class="indexterm"/>this method on an element, it will submit the parent form.</p>
</td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top">
<p>
<code class="literal">element.submit()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">value_of_css_property(property_name)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id288" class="indexterm"/>gets the value of a <a id="id289" class="indexterm"/>CSS property.</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">property_name</code> is the name of the CSS property.</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">element.value_of_css_property("background-color")</code>
</p>
</td></tr></tbody></table></div></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Working with forms, textboxes, checkboxes, and radio buttons"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec22"/>Working with forms, textboxes, checkboxes, and radio buttons</h1></div></div></div><p>We can <a id="id290" class="indexterm"/>use the <code class="literal">WebElement</code> class to automate the interaction on various HTML controls such as entering text in a textbox, clicking on a button, selecting an option in a <a id="id291" class="indexterm"/>checkbox or radio button, getting text and attribute values from the element, and more.</p><p>We saw the properties <a id="id292" class="indexterm"/>and methods provided by the <code class="literal">WebElement</code> class earlier in the chapter. In this section, we will use the <code class="literal">WebElement</code> class and its properties <a id="id293" class="indexterm"/>and methods to automate the create account feature of the sample application. So, let's create a test that validates the creation of a new user account in the sample application. We will fill out the form as shown in the following screenshot and submit our request. The system should then create a new user account:</p><div class="mediaobject"><img src="images/3506OS_04_02.jpg" alt="Working with forms, textboxes, checkboxes, and radio buttons"/></div><p>As you can see from the <a id="id294" class="indexterm"/>preceding screenshot, we need to fill out five <a id="id295" class="indexterm"/>textboxes <a id="id296" class="indexterm"/>and select a checkbox for <a id="id297" class="indexterm"/>the newsletter.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">First, create a new test class <code class="literal">RegisterNewUser</code> as shown in the following code:<div class="informalexample"><pre class="programlisting">from selenium import webdriver
import unittest

class RegisterNewUser(unittest.TestCase):
    def setUp(self):
        self.driver = webdriver.Firefox
        self.driver.implicitly_wait(30)
        self.driver.maximize_window()

        # navigate to the application home page
        self.driver.get("http://demo.magentocommerce.com/")</pre></div></li><li class="listitem">Add a <a id="id298" class="indexterm"/>test, <code class="literal">test_register_new_user(self)</code>, to the <code class="literal">RegisterNewUser</code> class.</li><li class="listitem">To open the <a id="id299" class="indexterm"/>login page, we need to click on the <span class="strong"><strong>Log In</strong></span> link on the <a id="id300" class="indexterm"/>home page. The code for the <span class="strong"><strong>Log In</strong></span> button is as <a id="id301" class="indexterm"/>follows:<div class="informalexample"><pre class="programlisting">    def test_register_new_user(self):
        driver = self.driver

        # click on Log In link to open Login page
        driver.find_element_by_link_text("Log In").click()</pre></div></li></ol></div><div class="section" title="Checking whether the element is displayed and enabled"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec26"/>Checking whether the element is displayed and enabled</h2></div></div></div><p>The <code class="literal">is_displayed()</code> method returns <code class="literal">TRUE</code> if the element is visible on the screen (the visible attribute is set to <code class="literal">TRUE</code>), otherwise it will return <code class="literal">FALSE</code>. Similarly, the <code class="literal">is_enabled()</code> <a id="id302" class="indexterm"/>method returns <code class="literal">TRUE</code> if the element is enabled, that is, the user can perform actions such as click, enter text, and so on. This method returns <code class="literal">FALSE</code> if element is disabled.</p><p>The customer login <a id="id303" class="indexterm"/>page has options to log into the system as registered users or create an account for new users. We can check whether the <span class="strong"><strong>Create an Account</strong></span> button is displayed to the user and it is enabled using the <code class="literal">is_displayed()</code> and <code class="literal">is_enabled()</code> methods of the <code class="literal">WebElement</code> class. Add the steps given in the following code to the test:</p><div class="informalexample"><pre class="programlisting"># get the Create Account button
        create_account_button = driver.find_element_by_xpath("//button[@title='Create an Account']")
        # check Create Account button is displayed and enabled
        self.assertTrue(create_account_button.is_displayed() and
                        create_account_button.is_enabled())</pre></div><p>We want to test the <code class="literal">Create an Account</code> functionality, so let's click on the <span class="strong"><strong>Create an Account</strong></span> button. This will display the <span class="strong"><strong>Create New Customer Account</strong></span> page. We can use the <code class="literal">WebDriver</code> class's <code class="literal">title</code> property to check whether the page title matches with what we expected, as shown in the following code:</p><div class="informalexample"><pre class="programlisting">    # click on Create Account button. This will display # new account
    create_account_button.click()

    # check title
    self.assertEquals("Create New Customer Account - Magento Commerce Demo Store", driver.title)</pre></div><p>On the <span class="strong"><strong>Create New Customer Account</strong></span> page, locate all the elements using the <code class="literal">find_element_by_*</code> methods <a id="id304" class="indexterm"/>as follows:</p><div class="informalexample"><pre class="programlisting">    # get all the fields from Create an Account form
    first_name = driver.find_element_by_id("firstname")
    last_name = driver.find_element_by_id("lastname")
    email_address = driver.find_element_by_id("email_address")
    news_letter_subscription = driver.find_element_by_id("is_subscribed")
    password = driver.find_element_by_id("password")
    confirm_password = driver.find_element_by_id("confirmation")
    submit_button = driver.find_element_by_xpath("//button[@title='Submit']")</pre></div></div><div class="section" title="Finding the element attribute value"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec27"/>Finding the element attribute value</h2></div></div></div><p>The <code class="literal">get_attribute()</code> method <a id="id305" class="indexterm"/>can be used to get the attribute values defined for an element. For example, there is a test that says the firstname and lastname <a id="id306" class="indexterm"/>textbox should have their max length defined to 255 characters. Here is the HTML code for the <code class="literal">firstname</code> textbox, where a <code class="literal">maxlength</code> attribute is defined and its value is <code class="literal">255</code> as shown in the following code:</p><div class="informalexample"><pre class="programlisting">&lt;input type="text" id="firstname" name="firstname" value="" title="First Name" maxlength="255" class="input-text required-entry"&gt;</pre></div><p>We can assert the <code class="literal">maxlength</code> attribute using the <code class="literal">get_attribute()</code> method of <code class="literal">WebElement</code> with the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">We need to pass the name of the attribute as an argument to the <code class="literal">get_attribute()</code> method:<div class="informalexample"><pre class="programlisting">        # check maxlength of first name and last name textbox 
        self.assertEqual("255", first_name.get_attribute("maxlength"))
        self.assertEqual("255", last_name.get_attribute("maxlength"))</pre></div></li><li class="listitem">Add the following <a id="id307" class="indexterm"/>steps to the test to make sure all the fields are displayed and enabled for the user:<div class="informalexample"><pre class="programlisting"># check all fields are enabled
        self.assertTrue(first_name.is_enabled() and last_name.is_enabled() 
          and email_address.is_enabled() and news_letter_subscription.is_enabled() 
          and password.is_enabled() and confirm_password.is_enabled() 
          and submit_button.is_enabled())</pre></div></li></ol></div></div><div class="section" title="Using the is_selected() method"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec28"/>Using the is_selected() method</h2></div></div></div><p>The <code class="literal">is_selected()</code> <a id="id308" class="indexterm"/>method works with checkboxes and radio buttons. We can use this method to know whether a checkbox or radio button is selected or not.</p><p>A checkbox or radio button is selected by performing a click operation using the <code class="literal">click()</code> method of the <code class="literal">WebElement</code> class. In this example, check whether the <span class="strong"><strong>Sign Up for Newsletter</strong></span> checkbox is unselected by default, as shown in the following code:</p><div class="informalexample"><pre class="programlisting"># check Sign Up for Newsletter is unchecked
        self.assertFalse(news_letter_subscription.is_selected())</pre></div></div><div class="section" title="Using the clear() and send_keys() methods"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec29"/>Using the clear() and send_keys() methods</h2></div></div></div><p>The <code class="literal">clear()</code> and <code class="literal">send_keys()</code> methods of the <code class="literal">WebElement</code> class applicable to the textbox or <a id="id309" class="indexterm"/>textarea are useful to clear the contents of the element and send <a id="id310" class="indexterm"/>text values as if a real user were typing on the keyboard. The <code class="literal">send_keys()</code> method takes the text to be entered in the element as an argument. Let's consider the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Let's add the given code to fill the fields using the <code class="literal">send_keys()</code> method:<div class="informalexample"><pre class="programlisting">        # fill out all the fields
        first_name.send_keys("Test")
        last_name.send_keys("User1")
        news_letter_subscription.click()
        email_address.send_keys("TestUser_150214_2200@example.com")
        password.send_keys("tester")
        confirm_password.send_keys("tester")</pre></div></li><li class="listitem">Finally, check whether the user is created by checking the welcome message. We can get the text from an element using the <code class="literal">text</code> property of the <code class="literal">WebElement</code> class:<div class="informalexample"><pre class="programlisting">        # check new user is registered
        self.assertEqual("Hello, Test User1!", driver.find_element_by_css_selector("p.hello &gt; strong").text)
        self.assertTrue(driver.find_element_by_link_text("Log Out").is_displayed())</pre></div></li><li class="listitem">Here is a complete <a id="id311" class="indexterm"/>test for the <code class="literal">Create An Account</code> <a id="id312" class="indexterm"/>functionality. Run this test and you will see all the operations on the <span class="strong"><strong>Create An Account</strong></span> page:<div class="informalexample"><pre class="programlisting">from selenium import webdriver
from time import gmtime, strftime
import unittest


class RegisterNewUser(unittest.TestCase):
    def setUp(self):
        self.driver = webdriver.Firefox()
        self.driver.implicitly_wait(30)
        self.driver.maximize_window()

        # navigate to the application home page
        self.driver.get("http://demo.magentocommerce.com/")

    def test_register_new_user(self):
        driver = self.driver

        # click on Log In link to open Login page
        driver.find_element_by_link_text("ACCOUNT").click()
        driver.find_element_by_link_text("My Account").click()

        # get the Create Account button
        create_account_button = \
            driver.find_element_by_link_text("CREATE AN ACCOUNT")

        # check Create Account button is displayed # and enabled
        self.assertTrue(create_account_button.is_displayed() and create_account_button.is_enabled())

        # click on Create Account button. This will # display new account
        create_account_button.click()

        # check title
        self.assertEquals("Create New Customer Account", driver.title)

        # get all the fields from Create an Account form
        first_name = driver.find_element_by_id("firstname")
        last_name = driver.find_element_by_id("lastname")
        email_address = driver.find_element_by_id("email_address")
        password = driver.find_element_by_id("password")
        confirm_password = driver.find_element_by_id("confirmation")
        news_letter_subscription = driver.find_element_by_id("is_subscribed")
        submit_button = driver.\
            find_element_by_xpath("//button[@title='Register']")

        # check maxlength of first name and # last name textbox
        self.assertEqual("255", first_name.get_attribute("maxlength"))
        self.assertEqual("255", last_name.get_attribute("maxlength"))

        # check all fields are enabled
        self.assertTrue(first_name.is_enabled() and last_name.is_enabled() and email_address.is_enabled() and news_letter_subscription.is_enabled() and password.is_enabled() and confirm_password.is_enabled() and submit_button.is_enabled())

        # check Sign Up for Newsletter is unchecked
        self.assertFalse(news_letter_subscription.is_selected())

        user_name = "user_" + strftime("%Y%m%d%H%M%S", gmtime())
        # fill out all the fields
        first_name.send_keys("Test")
        last_name.send_keys(user_name)
        news_letter_subscription.click()
        email_address.send_keys(user_name + "@example.com")
        password.send_keys("tester")
        confirm_password.send_keys("tester")

        # click Submit button to submit the form
        submit_button.click()

        # check new user is registered
        self.assertEqual("Hello, Test " + user_name + "!", driver.find_element_by_css_selector("p.hello &gt; strong").text)
        driver.find_element_by_link_text("ACCOUNT").click()
        self.assertTrue(driver.find_element_by_link_text("Log Out").is_displayed())

    def tearDown(self):
        self.driver.quit()

if __name__ == "__main__":
    unittest.main(verbosity=2)</pre></div></li></ol></div></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Working with dropdowns and lists"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec23"/>Working with dropdowns and lists</h1></div></div></div><p>Selenium <a id="id313" class="indexterm"/>WebDriver provides a special <code class="literal">Select</code> class to interact <a id="id314" class="indexterm"/>with the lists and dropdowns on a web page. For example, in the demo application, you can see a dropdown to select the language for the store. You can choose and set a language for the store as shown in the following screenshot:</p><div class="mediaobject"><img src="images/3506OS_04_03.jpg" alt="Working with dropdowns and lists"/></div><p>Dropdowns or lists are implemented with the <code class="literal">&lt;select&gt;</code> element in HTML. The options or choices are <a id="id315" class="indexterm"/>implemented with the <code class="literal">&lt;options&gt;</code> element within <a id="id316" class="indexterm"/>a <code class="literal">&lt;select&gt;</code> element as shown in the following HTML code:</p><div class="informalexample"><pre class="programlisting">&lt;select id="select-language" title="Your Language" onchange="window.location.href=this.value"&gt;
  &lt;option value="http://demo.magentocommerce.com/?___store=default&amp;amp;___from_store=default" selected="selected"&gt;English&lt;/option&gt;
  &lt;option value="http://demo.magentocommerce.com/?___store=french&amp;amp;___from_store=default"&gt;French&lt;/option&gt;
  &lt;option value="http://demo.magentocommerce.com/?___store=german&amp;amp;___from_store=default"&gt;German&lt;/option&gt;
&lt;/select&gt;</pre></div><p>Each <code class="literal">&lt;option&gt;</code> element has its attribute value defined and text that the user will see. For example, in the following code, the <code class="literal">&lt;option&gt;</code> value is set to the URL of the store and the text is set to the language, that is, <code class="literal">French</code>:</p><div class="informalexample"><pre class="programlisting">&lt;option value="http://demo.magentocommerce.com/customer/account/create/?___store=french&amp;amp;___from_store=default"&gt;French&lt;/option&gt;</pre></div><div class="section" title="Understanding the Select class"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec30"/>Understanding the Select class</h2></div></div></div><p>The <code class="literal">Select</code> class <a id="id317" class="indexterm"/>is a special class in Selenium that is used to interact with dropdowns or lists. It offers various methods and properties for user interaction.</p><p>The following <a id="id318" class="indexterm"/>table lists all the properties and methods from the <code class="literal">Select</code> class. You can find similar information at <a class="ulink" href="http://selenium.googlecode.com/git/docs/api/py/webdriver_support/selenium.webdriver.support.select.html#module-selenium.webdriver.support.select">http://selenium.googlecode.com/git/docs/api/py/webdriver_support/selenium.webdriver.support.select.html#module-selenium.webdriver.support.select</a>.</p></div><div class="section" title="Properties of the Select class"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec31"/>Properties of the Select class</h2></div></div></div><p>The <code class="literal">Select</code> class <a id="id319" class="indexterm"/>implements the following properties:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Property/attribute</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th><th style="text-align: left" valign="bottom">
<p>Example</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">all_selected_options</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id320" class="indexterm"/>gets a list of all the selected options <a id="id321" class="indexterm"/>belonging to the dropdown or list</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">select_element.all_selected_options</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">first_selected_option</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id322" class="indexterm"/>gets the first selected / currently selected <a id="id323" class="indexterm"/>option from the dropdown or list</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">select_element.first_selected_option</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">options</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id324" class="indexterm"/>gets a list of all options <a id="id325" class="indexterm"/>from the dropdown or list</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">select_element.options</code>
</p>
</td></tr></tbody></table></div></div><div class="section" title="Methods of the Select class"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec32"/>Methods of the Select class</h2></div></div></div><p>The <code class="literal">Select</code> <a id="id326" class="indexterm"/>class implements the following methods:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Method</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th><th style="text-align: left" valign="bottom">
<p>Argument</p>
</th><th style="text-align: left" valign="bottom">
<p>Example</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">deselect_all()</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id327" class="indexterm"/>clears all the selected entries from <a id="id328" class="indexterm"/>a multiselect dropdown or list</p>
</td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top">
<p>
<code class="literal">select_element.deselect_all()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">deselect_by_index(index)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id329" class="indexterm"/>deselects the option at the given index <a id="id330" class="indexterm"/>from the dropdown or list</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">index</code> is the index of the option to be deselected</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">select_element.deselect_by_index(1)</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">deselect_by_value(value)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id331" class="indexterm"/>deselects all options that have a value <a id="id332" class="indexterm"/>matching the argument from the dropdown or list</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">value</code> is the value attribute of the option to be deselected</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">select_element.deselect_by_value("foo")</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">deselect_by_visible_text(text)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id333" class="indexterm"/>deselects all the options <a id="id334" class="indexterm"/>that display text matching the argument from the dropdown or list</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">text</code> is the text value of the option to be deselected</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">select_element.deselect_by_visible_text("bar")</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">select_by_index(index)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id335" class="indexterm"/>selects an option at the <a id="id336" class="indexterm"/>given index from the dropdown or list</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">index</code> is the index of the option to be selected</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">select_element.select_by_index(1)</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">select_by_value(value)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id337" class="indexterm"/>selects all the options that have a value <a id="id338" class="indexterm"/>matching the argument from the dropdown or list</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">value</code> is the value attribute of the option to be selected</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">select_element.select_by_value("foo")</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">select_by_visible_text(text)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id339" class="indexterm"/>selects all the options that display the text matching the <a id="id340" class="indexterm"/>argument from the dropdown or list</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">text</code> is the text value of the option to be selected</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">select_element.select_by_visible_text("bar")</code>
</p>
</td></tr></tbody></table></div><p>Let's explore these properties and methods to test the language features of the demo application. We will add a new test to the home page test that we built in the previous chapters. This test checks whether the user has eight languages to select from. We will use the <code class="literal">options</code> property to first check the number of options and then get the text of each option in a list and check that list with an expected option list, as shown in the following code:</p><div class="informalexample"><pre class="programlisting">def test_language_options(self):
    # list of expected values in Language dropdown
    exp_options = ["ENGLISH", "FRENCH", "GERMAN"]

    # empty list for capturing actual options displayed # in the dropdown
    act_options = []

    # get the Your language dropdown as instance of Select class
    select_language = \
        Select(self.driver.find_element_by_id("select-language"))

    # check number of options in dropdown
    self.assertEqual(2, len(select_language.options))

    # get options in a list
    for option in select_language.options:
        act_options.append(option.text)

    # check expected options list with actual options list
    self.assertListEqual(exp_options, act_options)

    # check default selected option is English
    self.assertEqual("ENGLISH", select_language.first_selected_option.text)

    # select an option using select_by_visible text
    select_language.select_by_visible_text("German")

    # check store is now German
    self.assertTrue("store=german" in self.driver.current_url)

    # changing language will refresh the page,
    # we need to get find language dropdown once again
    select_language = \
       Select(self.driver.find_element_by_id("select-language"))
        select_language.select_by_index(0)</pre></div><p>The <code class="literal">options</code> property returns all the <code class="literal">&lt;option&gt;</code> elements defined for a dropdown or list. Each item in the options list is an instance of the <code class="literal">WebElement</code> class.</p><p>We can also check the default/current selected option using the <code class="literal">first_selected_option</code> property.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note12"/>Note</h3><p>The <code class="literal">all_selected_options</code> <a id="id341" class="indexterm"/>property is used to test multiselect dropdowns or lists.</p></div></div><p>Finally, select an item and check whether the store URL is changed based on the language selection using the following code:</p><div class="informalexample"><pre class="programlisting"># select an option using select_by_visible text
select_language.select_by_visible_text("German")

# check store is now German
self.assertTrue("store=german" in self.driver.current_url)</pre></div><p>Option(s) can be selected by their index (that is, their position in the list), by the value attribute or by the visible text. The <code class="literal">Select</code> class offers various <code class="literal">select_</code> methods to select the options. In this example, we used the <code class="literal">select_by_visible_text()</code> method to select an option. We can also deselect options using various <code class="literal">deselect_</code> methods.</p></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Working with alerts and pop-up windows"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec24"/>Working with alerts and pop-up windows</h1></div></div></div><p>Developers use <a id="id342" class="indexterm"/>JavaScript alerts or model dialogs to inform users about validation errors, warnings, to give a response for an action, accept an input value, and more. In this section, we will see how to handle alerts and pop-up windows with Selenium.</p><div class="section" title="Understanding the Alert class"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec33"/>Understanding the Alert class</h2></div></div></div><p>Selenium WebDriver <a id="id343" class="indexterm"/>provides the <code class="literal">Alert</code> class to handle JavaScript alerts. The <code class="literal">Alert</code> class contains methods for accepting, dismissing, inputting, and getting text from alerts.</p></div><div class="section" title="Properties of the Alert class"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec34"/>Properties of the Alert class</h2></div></div></div><p>The <code class="literal">Alert</code> class <a id="id344" class="indexterm"/>implements the following property:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Property/attribute</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th><th style="text-align: left" valign="bottom">
<p>Example</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">text</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id345" class="indexterm"/>gets <a id="id346" class="indexterm"/>text from the alert window</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">alert.text</code>
</p>
</td></tr></tbody></table></div></div><div class="section" title="Methods of the Alert class"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec35"/>Methods of the Alert class</h2></div></div></div><p>The <code class="literal">Alert</code> class <a id="id347" class="indexterm"/>implements the following methods:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Method</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th><th style="text-align: left" valign="bottom">
<p>Argument</p>
</th><th style="text-align: left" valign="bottom">
<p>Example</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">accept()</code>
</p>
</td><td style="text-align: left" valign="top">
<a id="id348" class="indexterm"/>
<a id="id349" class="indexterm"/>
<p>This will accept the JavaScript alert box that is click on the <span class="strong"><strong>OK</strong></span> button</p>
</td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top">
<p>
<code class="literal">alert.accept()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">dismiss()</code>
</p>
</td><td style="text-align: left" valign="top">
<a id="id350" class="indexterm"/>
<a id="id351" class="indexterm"/>
<p>This will dismiss the JavaScript alert box that is click on the <span class="strong"><strong>Cancel</strong></span> button</p>
</td><td style="text-align: left" valign="top"> </td><td style="text-align: left" valign="top">
<p>
<code class="literal">alert.dismiss()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">send_keys(*value)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id352" class="indexterm"/>simulates typing into <a id="id353" class="indexterm"/>the element</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">value</code> is a string for typing or setting form fields</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">alert.send_keys("foo")</code>
</p>
</td></tr></tbody></table></div><p>In the demo application, you can find the use of alerts to inform or warn the user. For example, when you add products for comparison and then remove one of the products or all the products from the comparison, the application shows you an alert similar to the one shown in following screenshot:</p><div class="mediaobject"><img src="images/3506OS_04_04.jpg" alt="Methods of the Alert class"/></div><p>We will implement a test that checks whether the <span class="strong"><strong>Clear All</strong></span> option in the <span class="strong"><strong>COMPARE PRODUCTS</strong></span> feature displays an alert window to the users asking whether they are sure about the removal of products from the comparison.</p><p>Create a new test <a id="id354" class="indexterm"/>class, <code class="literal">CompareProducts</code>, and add steps to search and add a product to compare as shown in the following code snippet:</p><div class="informalexample"><pre class="programlisting">from selenium import webdriver
import unittest


class CompareProducts(unittest.TestCase):
    def setUp(self):
        self.driver = webdriver.Firefox()
        self.driver.implicitly_wait(30)
        self.driver.maximize_window()
        self.driver.get("http://demo.magentocommerce.com/")

    def test_compare_products_removal_alert(self):
        # get the search textbox
        search_field = self.driver.find_element_by_name("q")
        search_field.clear()

        # enter search keyword and submit
        search_field.send_keys("phones")
        search_field.submit()

        # click the Add to compare link
        self.driver.\
            find_element_by_link_text("Add to Compare").click()</pre></div><p>Once a product is added for comparison by clicking on the <span class="strong"><strong>Add to Compare</strong></span> link, you will see the product added <a id="id355" class="indexterm"/>to the <span class="strong"><strong>COMPARE PRODUCTS</strong></span> section. You can also add another product for comparison. If you want to remove all products from comparison, you can do so by clicking on the <span class="strong"><strong>Clear All</strong></span> link from the <span class="strong"><strong>COMPARE PRODUCTS</strong></span> section. You will get an alert asking you whether you want to clear all the products. We can handle this alert using the <code class="literal">Alert</code> class. The <code class="literal">switch_to_alert()</code> method of the <code class="literal">WebDriver</code> class returns the instance of <code class="literal">Alert</code>. We can use this instance to read the message displayed on the alert and accept that alert, by clicking on the <span class="strong"><strong>OK</strong></span> button or dismissing the alert, by clicking on the <span class="strong"><strong>Cancel</strong></span> button. Add the following code to the test. This part reads and checks the alert message and then accepts the alert by calling <a id="id356" class="indexterm"/>the <code class="literal">accept()</code> method:</p><div class="informalexample"><pre class="programlisting">    # click on Remove this item link, this will display # an alert to the user
    self.driver.find_element_by_link_text("Clear All").click()

    # switch to the alert
    alert = self.driver.switch_to_alert()

    # get the text from alert
    alert_text = alert.text

    # check alert text
    self.assertEqual("Are you sure you would like to remove all products from your comparison?", alert_text)

    # click on Ok button
    alert.accept()

    def tearDown(self):
        self.driver.quit()

if __name__ == "__main__":
    unittest.main()</pre></div></div><div class="section" title="Automating browser navigation"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec36"/>Automating browser navigation</h2></div></div></div><p>Browsers provide <a id="id357" class="indexterm"/>various navigation methods to access the web pages from the browser history or by refreshing the current page and so on with the back, forward, refresh/reload buttons on the browser window's toolbar. The Selenium <a id="id358" class="indexterm"/>WebDriver API provides access to these buttons with various navigation methods. We can test the behavior of the application when these methods are used. The <code class="literal">WebDriver</code> class provides the following methods to perform browser navigation such as <a id="id359" class="indexterm"/>back, forward, and refresh:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Method</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th><th style="text-align: left" valign="bottom">
<p>Argument</p>
</th><th style="text-align: left" valign="bottom">
<p>Example</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">back()</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id360" class="indexterm"/>goes one step backward in the <a id="id361" class="indexterm"/>browser history of the current session</p>
</td><td style="text-align: left" valign="top">
<p>None</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.back()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">forward()</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id362" class="indexterm"/>goes one step forward in the browser <a id="id363" class="indexterm"/>history of the current session</p>
</td><td style="text-align: left" valign="top">
<p>None</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.forward()</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">refresh() </code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id364" class="indexterm"/>refreshes the <a id="id365" class="indexterm"/>current page displayed in the browser</p>
</td><td style="text-align: left" valign="top">
<p>None</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">driver.refresh()</code>
</p>
</td></tr></tbody></table></div><p>Here is an example <a id="id366" class="indexterm"/>that uses the browser navigation API to navigate the history and validate the state of the application:</p><div class="informalexample"><pre class="programlisting">import unittest
from selenium import webdriver
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions

class NavigationTest(unittest.TestCase):
    def setUp(self):
      # create a new Firefox session
      self.driver = webdriver.Chrome()
      self.driver.implicitly_wait(30)
      self.driver.maximize_window()

      # navigate to the application home page
      self.driver.get("http://www.google.com")

    def testBrowserNavigation(self):
      driver = self.driver
      # get the search textbox
      search_field = driver.find_element_by_name("q")
      search_field.clear()

      # enter search keyword and submit
      search_field.send_keys("selenium webdriver")
      search_field.submit()

      se_wd_link = driver.find_element_by_link_text("Selenium WebDriver")
      se_wd_link.click()
      self.assertEqual("Selenium WebDriver", driver.title)

      driver.back()
      self.assertTrue(WebDriverWait(self.driver, 10)
          .until(expected_conditions.title_is("selenium webdriver - Google Search")))

      driver.forward()
      self.assertTrue(WebDriverWait(self.driver, 10)
          .until(expected_conditions.title_is("Selenium WebDriver")))

      driver.refresh()
      self.assertTrue(WebDriverWait(self.driver, 10)
        .until(expected_conditions.title_is("Selenium WebDriver")))

    def tearDown(self):
      # close the browser window
      self.driver.quit()

if __name__ == '__main__':
    unittest.main()</pre></div></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec25"/>Summary</h1></div></div></div><p>In this chapter, you were introduced to the Selenium WebDriver API for interacting with various elements on a page. The Selenium WebDriver API offers various classes, properties, and methods to simulate the user actions and check the application states. We looked at various methods to automate elements such as textboxes, buttons, checkboxes, and dropdowns.</p><p>We created some tests that deal with alerts. We also looked at using browser navigation method and tested the navigation between pages.</p><p>In the next chapter, we will explore the Selenium API to handle synchronizing tests. This will help us in building reliable tests with Selenium.</p></div></div>
</body></html>