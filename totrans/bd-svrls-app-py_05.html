<html><head></head><body>
        

                            
                    <h1 class="header-title" id="calibre_pb_0">Logging and Monitoring</h1>
                
            
            
                
<p class="calibre2">We have learned about the concepts of serverless architectures and understood the basics and the internals of AWS's serverless service, AWS Lambda. We have also created some example serverless projects to understand the concepts better. During the course of our learning, we have also learned the basics of several other AWS services, such as alarms, SNS, SQS, S3 buckets, and CloudWatch.</p>
<p class="calibre2">In this chapter, we will learn about how to do the logging and monitoring for the serverless systems that we are building. Logging and monitoring software code and systems are very important, as they helps us with the telemetry and disaster recovery. Logging is a process where we store the logs emitted by our code or by our architecture as a whole. Monitoring is a process where we closely monitor the activities, status, and health of the components and processes in our code or architecture.</p>
<p class="calibre2">So, you will be learning how to set up and understand the monitoring suite of AWS Lambda, which is closely integrated with the monitoring service of AWS, the CloudWatch Dashboards. We will also learn about the logging service of AWS, the CloudWatch Logs service. Finally, we will also learn about and understand the distributed tracing and monitoring service of AWS, the CloudTrail service.</p>
<p class="calibre2">This chapter covers the following topics:</p>
<ul class="calibre9">
<li class="calibre10">Understanding CloudWatch</li>
<li class="calibre10">Understanding CloudTrail</li>
<li class="calibre10">Lambda's metrics in CloudWatch</li>
<li class="calibre10">Lambda's logs in CloudWatch</li>
<li class="calibre10">Logging statements in Lambda</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title" id="calibre_pb_0">Understanding CloudWatch</h1>
                
            
            
                
<p class="calibre2">As mentioned earlier, CloudWatch is the logging and monitoring service of AWS. We have already looked at and learned about the CloudWatch Alarms, which are a sub-feature of CloudWatch. We will now learn about the graphing suite of the service. Almost every service in the AWS environment has a way to send it's logs and metrics to CloudWatch for logging and monitoring purposes. Each service might have several metrics which can be monitored, depending on the function.</p>
<p class="calibre2">Similarly, AWS Lambda also has some metrics, such as the invocation count, the invocation's running time, and so on, which it sends to CloudWatch. It is also helpful to note that the developers can also send custom metrics to CloudWatch. So in the following steps, we shall be learning about the different parts and functions of AWS CloudWatch corresponding to AWS Lambda:</p>
<ol class="calibre13">
<li value="1" class="calibre10">Firstly, let us see what the CloudWatch console looks like and also get a feel for it by navigating around the console. Browse to <a href="https://signin.aws.amazon.com/signin?redirect_uri=https%3A%2F%2Fconsole.aws.amazon.com%2Fcloudwatch%2F%3Fstate%3DhashArgs%2523%26isauthcode%3Dtrue&amp;client_id=arn%3Aaws%3Aiam%3A%3A015428540659%3Auser%2Fcloudwatch&amp;forceMobileApp=0" class="calibre8">console.aws.amazon.com/cloudwatch/</a>:</li>
</ol>
<div><img src="img/00149.jpeg" class="calibre48"/></div>
<ol start="2" class="calibre13">
<li value="2" class="calibre10">As we can see, there is a lot of information in the CloudWatch console. So, we shall now try to understand each component one after the other. In the left side, we can see a list of options, which includes Dashboards, Alarms, Billing, and so on. We shall try to understand all of them and their functionality as part of understanding the CloudWatch console.</li>
</ol>
<ol start="3" class="calibre13">
<li value="3" class="calibre10">A dashboard here is a panel of CloudWatch Metrics that the user can configure. For example, a user might want to have a particular set of server (EC2) metrics at a single place to be able to monitor them better. This is where AWS CloudWatch Dashboards come into play. When you click on the Dashboards option on the left, you can see the Dashboards console, which looks like this:</li>
</ol>
<div><img src="img/00150.jpeg" class="calibre48"/></div>
<ol start="4" class="calibre13">
<li value="4" class="calibre10">Let us go ahead and create a new dashboard by clicking the blue Create dashboard button on the top left-hand side of the console. The following box appears:</li>
</ol>
<div><img src="img/00151.jpeg" class="calibre132"/></div>
<ol start="5" class="calibre13">
<li value="5" class="calibre10">This will take you to the next step, where you will be asked to select a widget type for the dashboard. There are four types of widgets which are currently available. The widget selection screen looks like this:</li>
</ol>
<div><img src="img/00152.jpeg" class="calibre133"/></div>
<ol start="6" class="calibre13">
<li value="6" class="calibre10">For the sake of this tutorial, I am choosing the Line style widget. You can choose whatever widget would fit your graphing style and the monitoring you need to do. Once you select a widget style and click the blue Configure button, you will be redirected to a wizard where you will be asked to add a metric as shown in the following screenshot:</li>
</ol>
<div><img src="img/00153.jpeg" class="calibre134"/></div>
<ol start="7" class="calibre13">
<li value="7" class="calibre10">Select one of the available metrics at the bottom and it will be added to the widget. Once you are done with selecting the metrics, click on the blue Create widget button in the lower-right part of the page as shown in the following screenshot:</li>
</ol>
<div><img src="img/00154.jpeg" class="calibre135"/></div>
<ol start="8" class="calibre13">
<li value="8" class="calibre10">Now, you can see the dashboard that you have just created in the Dashboards section:</li>
</ol>
<div><img src="img/00155.jpeg" class="calibre136"/></div>
<ol start="9" class="calibre13">
<li value="9" class="calibre10">We have successfully learned and created an AWS CloudWatch Dashboard. We will now move on to learning about CloudWatch Events. We have already learned about CloudWatch Alarms in the previous chapters, looking at both their functionality and how to create and work with them.</li>
<li value="10" class="calibre10">Click on the Events link in the CloudWatch menu on the left. You will be redirected to the page of CloudWatch Events, as shown in the following screenshot:</li>
</ol>
<div><img src="img/00156.jpeg" class="calibre137"/></div>
<ol start="11" class="calibre13">
<li value="11" class="calibre10">Once you click on the blue Create rule button, you will be redirected to the Events creation wizard, which looks like this:</li>
</ol>
<div><img src="img/00157.jpeg" class="calibre48"/></div>
<ol start="12" class="calibre13">
<li value="12" class="calibre10">There can be two types of events, namely Event Pattern and Schedule, each of which have different purposes. Here we will only learn about the Schedule type, as it comes in handy for scheduling Lambda functions:</li>
</ol>
<div><img src="img/00158.jpeg" class="calibre48"/></div>
<ol start="13" class="calibre13">
<li value="13" class="calibre10">The rate can be either set in terms of Minutes, Hours, or Days, or can be set as a cron expression, whichever way you are comfortable with. Now, the target needs to be selected. The target can be any valid Lambda function, as shown in the following drop-down menu:</li>
</ol>
<div><img src="img/00159.jpeg" class="calibre138"/></div>
<ol start="14" class="calibre13">
<li value="14" class="calibre10">Once you have selected the function, you can click on the blue Configure details at the bottom. It will take you to the Configure rule details page as shown in the following screenshot:</li>
</ol>
<div><img src="img/00160.jpeg" class="calibre48"/></div>
<ol start="15" class="calibre13">
<li value="15" class="calibre10">Once you enter the name and the description of the rule that you want to create, you can click on the blue Create rule button at the bottom. This will successfully create an event, and the same will be reflected in your CloudWatch console:</li>
</ol>
<div><img src="img/00161.jpeg" class="calibre48"/></div>
<p class="calibre34">We have successfully added a cron event for a Lambda function which means that Lambda will be invoked at regular intervals, as specified by the user in the settings of the event. </p>
<ol start="16" class="calibre13">
<li value="16" class="calibre10">Now, we shall try to understand the Logs feature of AWS CloudWatch. This is where the Lambda functions store their logs. You can click on the Logs link in the menu on the left-hand side to access the console of CloudWatch Logs:</li>
</ol>
<div><img src="img/00162.jpeg" class="calibre48"/></div>
<ol start="17" class="calibre13">
<li value="17" class="calibre10">We can see the complete list of logs for all of the Lambda functions we have ever created throughout the course of the book. When you click on a log group, you can find more details about it, and also options for customization. Each log stream is an invocation of the Lambda function that the log is associated with:</li>
</ol>
<div><img src="img/00163.jpeg" class="calibre48"/></div>
<ol start="18" class="calibre13">
<li value="18" class="calibre10">You can also make use of the additional functionality provided by CloudWatch for handling the logs data, which can be seen in the drop-down Actions menu in Log Groups:</li>
</ol>
<div><img src="img/00164.jpeg" class="calibre48"/></div>
<ol start="19" class="calibre13">
<li value="19" class="calibre10">Finally, we will wrap up by exploring and learning about the CloudWatch Metrics. The metrics console can be accessed by clicking on the Metrics option on the left-hand side of the CloudWatch console:</li>
</ol>
<div><img src="img/00165.jpeg" class="calibre139"/></div>
<ol start="20" class="calibre13">
<li value="20" class="calibre10">You can select any option in the menu at the bottom for graphing the metrics. For the purpose of this tutorial, I have added a Lambda metric, which is the number of errors in the function, <kbd class="calibre12">serverless-api</kbd>:</li>
</ol>
<div><img src="img/00166.jpeg" class="calibre140"/></div>


            

            
        
    

        

                            
                    <h1 class="header-title" id="calibre_pb_0">Understanding CloudTrail </h1>
                
            
            
                
<p class="calibre2">CloudTrail is another monitoring service of AWS where you can look at all of the events and trails that have happened in your AWS account. This service is a bit more detailed than the CloudWatch service in how it records and stores the events and trails.<br class="calibre5"/>
<br class="calibre5"/>
So, we shall explore and learn about this service in the following steps:<br class="calibre5"/></p>
<ol class="calibre13">
<li value="1" class="calibre10">The AWS CloudTrail's dashboard can be accessed at <a href="https://signin.aws.amazon.com/signin?redirect_uri=https%3A%2F%2Fconsole.aws.amazon.com%2Fcloudtrail%2Fhome%3Fstate%3DhashArgs%2523%26isauthcode%3Dtrue&amp;client_id=arn%3Aaws%3Aiam%3A%3A015428540659%3Auser%2Fcloudtrail&amp;forceMobileApp=0" class="calibre8">console.aws.amazon.com/cloudtrail/</a>:</li>
</ol>
<div><img src="img/00167.jpeg" class="calibre48"/></div>
<ol start="2" class="calibre13">
<li value="2" class="calibre10">The list of events in your AWS account can be seen on the left-hand side of the CloudTrail menu when you click on the Event history button. The Event history page looks like this:</li>
</ol>
<div><img src="img/00168.jpeg" class="calibre48"/></div>
<ol start="3" class="calibre13">
<li value="3" class="calibre10">The third functionality of CloudTrail is the trails. The user can set up trails for their AWS services, such as Lambda. The trails that have been set up can be found on the Trails dashboard. This can be accessed by going to the Trails console by clicking on the Trails option in the menu on the left-hand side:</li>
</ol>
<div><img src="img/00169.jpeg" class="calibre48"/></div>
<ol start="4" class="calibre13">
<li value="4" class="calibre10">Now, let us understand how to create a trail in the CloudTrail dashboard. You can go to the main dashboard of CloudTrail and click on the blue Create trail button. This will take you to the trail creation wizard:</li>
</ol>
<div><img src="img/00170.jpeg" class="calibre48"/></div>
<ol start="5" class="calibre13">
<li value="5" class="calibre10">You can enter the details of your trail here. You can leave the default options as they are for the Apply trail to all regions and the Management events options:</li>
</ol>
<div><img src="img/00171.jpeg" class="calibre48"/></div>
<ol start="6" class="calibre13">
<li value="6" class="calibre10">Now, moving on to the next setting, select the Lambda option and click on the Log all current and future functions in the options list. This will ensure that all of our Lambda functions are logged properly with CloudTrail:</li>
</ol>
<div><img src="img/00172.jpeg" class="calibre48"/><br class="title-page-name"/></div>
<ol start="7" class="calibre13">
<li value="7" class="calibre10">Now, in the final Storage location option, select an S3 bucket for storing the CloudTrail logs. This can be an already existing bucket or you can also ask CloudTrail to create a new bucket for this purpose. I am using an existing bucket:</li>
</ol>
<div><img src="img/00173.jpeg" class="calibre48"/></div>
<ol start="8" class="calibre13">
<li value="8" class="calibre10">After all of the details and settings have been configured accordingly, you can click on the blue Create trail button to create the trail. Now, you see the trail you have just created in your CloudTrail dashboard as shown in the following screenshot:</li>
</ol>
<div><img src="img/00174.jpeg" class="calibre48"/></div>
<ol start="9" class="calibre13">
<li value="9" class="calibre10">Now, when you click on the trail that you have just created, you can see all of the details with which it has been configured as shown in the following screenshot:</li>
</ol>
<div><img src="img/00175.jpeg" class="calibre48"/></div>
<ol start="10" class="calibre13">
<li value="10" class="calibre10">You can also notice a very interesting option that enables you to configure CloudWatch Logs along with SNS to notify you of any specific activities, for example when there is an error in a Lambda function:</li>
</ol>
<div><img src="img/00176.jpeg" class="calibre141"/></div>
<ol start="11" class="calibre13">
<li value="11" class="calibre10">And finally, you can also add tags to the trail, just like you can with the rest of your AWS services:</li>
</ol>
<div><img src="img/00177.gif" class="calibre142"/></div>
<ol start="12" class="calibre13">
<li value="12" class="calibre10">Additionally, let us understand how to configure CloudWatch Logs for our trail. So, for this you need to click on the blue Configure button in the CloudWatch Logs section above the Tags section:</li>
</ol>
<div><img src="img/00178.jpeg" class="calibre143"/></div>
<ol start="13" class="calibre13">
<li value="13" class="calibre10">When you click Continue, it takes you to the creation wizard where you need to configure the permissions accordingly with your IAM role settings. For the purpose of this tutorial, I have selected the Create a new IAM Role option as shown in the following screenshot:</li>
</ol>
<div><img src="img/00179.jpeg" class="calibre48"/></div>
<ol start="14" class="calibre13">
<li value="14" class="calibre10">After you have finished configuring the IAM role settings, you can click on the blue Allow button at the bottom. After a couple of seconds of validation, the CloudWatch Logs get configured, which you can see in the same CloudWatch Logs section here:</li>
</ol>
<div><img src="img/00180.jpeg" class="calibre48"/></div>


            

            
        
    

        

                            
                    <h1 class="header-title" id="calibre_pb_0">Lambda’s metrics in CloudWatch</h1>
                
            
            
                
<p class="calibre2">As we have learned and understood how the CloudWatch and the CloudTrail services work with respect to logging and monitoring, we shall move on to try and implement them for our Lambda function(s). In this section, you will learn about the types of metrics that Lambda possesses, which are monitored by CloudWatch, and how to create a dashboard with all those metrics.</p>
<p class="calibre2">Similar to previous sections in this chapter and book, we shall try and understand the concepts in the form of the following steps:</p>
<ol start="1" class="calibre13">
<li value="1" class="calibre10">When you navigate over to your AWS Lambda console, you will see the Lambda function which you have already created, in the list of available functions:</li>
</ol>
<div><img src="img/00181.jpeg" class="calibre48"/></div>
<ol start="2" class="calibre13">
<li value="2" class="calibre10">When you click on the function, you will see two available options on the top: Configuration and Monitoring. Navigate to the Monitoring section. You will see a dashboard of metrics, which contains the following:
<ul class="calibre20">
<li class="calibre10">Invocations</li>
<li class="calibre10">Duration</li>
<li class="calibre10">Errors</li>
<li class="calibre10">Throttles</li>
<li class="calibre10">Iterator age</li>
<li class="calibre10">DLQ errors</li>
</ul>
</li>
</ol>
<p class="packt_figref"><img src="img/00182.jpeg" class="calibre99"/></p>
<p>Invocations and duration</p>
<p class="packt_figref"><img src="img/00183.jpeg" class="calibre99"/></p>
<p>Errors and Throttles</p>
<p class="packt_figref"><img src="img/00184.jpeg" class="calibre99"/></p>
<p>Iterator age and DLQ errors</p>
<ol start="3" class="calibre13">
<li value="3" class="calibre10">Let us understand each of them in detail. The first metric is the Invocations metric, which has the time on the <em class="calibre28">x</em> axis and the number of invocations of the Lambda function on the <em class="calibre28">y </em>axis. This metric helps us understand when and how many times our Lambda function has been invocated:</li>
</ol>
<div><img src="img/00185.jpeg" class="calibre144"/></div>
<p class="calibre34">When you click Jump to Logs, it takes you to the CloudWatch Logs console of the Lambda invocations, which looks like this:</p>
<div><img src="img/00186.jpeg" class="calibre145"/></div>
<p class="calibre34">And when you click on the Jump to Metrics option, it will take you to the CloudWatch Metrics dashboard of that particular metric, which gives you a much more customized and granular graph of the same metric, which looks like this:</p>
<div><img src="img/00187.jpeg" class="calibre146"/></div>
<ol start="4" class="calibre13">
<li value="4" class="calibre10">The second metric in the Lambda's monitoring dashboard is the Duration metric, which tells you the duration of each invocation of our Lambda function. It also has time as the <em class="calibre28">X </em>axis, and the duration time in the <em class="calibre28">Y </em>axis in the unit of milliseconds. It also tells you the maximum, average, and the minimum duration of your Lambda function over a period of time:</li>
</ol>
<div><img src="img/00188.jpeg" class="calibre147"/></div>
<ol start="5" class="calibre13">
<li value="5" class="calibre10">Again, clicking on the Jump to Logs button will take you to the same page as that of the previous metric. Clicking on the Jump to Metrics button will take you to the CloudWatch metric page of the Duration metric, which looks like this:</li>
</ol>
<div><img src="img/00189.jpeg" class="calibre48"/></div>
<ol start="6" class="calibre13">
<li value="6" class="calibre10">The third metric is the Errors metric, which helps us keep a look out for errors in our invocations of the Lambda function. The <em class="calibre28">Y </em>axis is the number of errors while the <em class="calibre28">X </em>axis is the timeline:</li>
</ol>
<div><img src="img/00190.jpeg" class="calibre148"/></div>
<ol start="7" class="calibre13">
<li value="7" class="calibre10">The CloudWatch Dashboard of the same metric can be seen by clicking on the Jump to Metrics link:</li>
</ol>
<div><img src="img/00191.jpeg" class="calibre48"/></div>
<ol start="8" class="calibre13">
<li value="8" class="calibre10">The fourth metric is Throttles. This metric counts the number of times your Lambda functions have been throttled, which means the number of times the concurrent executions of the functions have breached the set limit of 1,000 per region. We won't encounter this metric very frequently as the Lambda functions which we build as examples in this book stay well within the concurrency limits: </li>
</ol>
<div><img src="img/00192.jpeg" class="calibre149"/></div>
<ol start="9" class="calibre13">
<li value="9" class="calibre10">By clicking on the Jump to Metrics link, we can also see this metric in our CloudWatch Metrics dashboard:</li>
</ol>
<div><img src="img/00193.jpeg" class="calibre48"/></div>
<ol start="10" class="calibre13">
<li value="10" class="calibre10">The fifth metric is the iterator age. This is only valid for functions which are triggered by the DynamoDB stream or the Kinesis stream. It gives the age of the last record which is processed by the function:</li>
</ol>
<div><img src="img/00194.jpeg" class="calibre150"/></div>
<p class="calibre34">The Jump to Metrics link takes you to the CloudWatch Metrics dashboard of this metric:</p>
<div><img src="img/00195.jpeg" class="calibre48"/></div>
<ol start="11" class="calibre13">
<li value="11" class="calibre10">The sixth and the last metric is the DLQ errors metric. This gives the number of errors that occurred while sending messages (failed event payloads) to a dead letter queue. Most often the errors would be caused due to faulty permission configurations and timeouts:</li>
</ol>
<div><img src="img/00196.jpeg" class="calibre151"/></div>
<p class="calibre34">The Jump to Metrics link will take you to the CloudWatch Metrics dashboard of the same metric:</p>
<div><img src="img/00197.jpeg" class="calibre48"/><strong class="calibre1"><br class="title-page-name"/></strong></div>


            

            
        
    

        

                            
                    <h1 class="header-title" id="calibre_pb_0">Lambda's logs in CloudWatch</h1>
                
            
            
                
<p class="calibre2">So far, we have learned about and understood the metrics of AWS Lambda in great detail. Now, we will move on to understanding the logs of the Lambda functions. As always, we will try to understand them via the following steps:</p>
<ol class="calibre13">
<li value="1" class="calibre10">Logs for AWS Lambda functions are stored in CloudWatch's Logs service. You can access the CloudWatch Logs service by going to the Logs dashboard by clicking on the main CloudWatch dashboard.</li>
</ol>
<ol start="2" class="calibre13">
<li value="2" class="calibre10">When you click on the logs of the serverless-api, /aws/lambda/serverless-api, in the list, we go to the log stream of the serverless API, which looks like this:</li>
</ol>
<div><img src="img/00198.jpeg" class="calibre48"/></div>
<ol start="3" class="calibre13">
<li value="3" class="calibre10">Each log stream here is a Lambda invocation. So, whenever your Lambda function is invoked, it creates a new log stream here. If the invocation is a part of Lambda's retry process, then the logs for that particular invocation will be written under the most recent log stream. A single log stream can contain several details. But firstly, let us look at what a particular log stream looks like:</li>
</ol>
<div><img src="img/00199.jpeg" class="calibre48"/></div>
<ol start="4" class="calibre13">
<li value="4" class="calibre10">Also, if you look closely, you can observe that Lambda's logs also give out information about the duration of the Lambda function's invocation, the duration for which it is billed for, and also the memory used by the function. These metrics help in understanding our functions' performance better and for further optimization and fine tuning:</li>
</ol>
<div><img src="img/00200.jpeg" class="calibre48"/></div>
<ol start="5" class="calibre13">
<li value="5" class="calibre10">There are several columns in CloudWatch Logs for you to select from, which are not shown in the preceding screenshots. These are the available options:</li>
</ol>
<div><img src="img/00201.jpeg" class="calibre48"/></div>
<p class="calibre34">So, when you select more of those, you will see them in your dashboard as columns. These come in handy when you're doing a much more fine-grained debugging of our Lambda functions:</p>
<div><img src="img/00202.jpeg" class="calibre48"/></div>


            

            
        
    

        

                            
                    <h1 class="header-title" id="calibre_pb_0">Logging statements in Lambda</h1>
                
            
            
                
<p class="calibre2">Logging your comments and errors clearly is always a good software practice. So, we shall now understand how to log from inside of Lambda functions. There are broadly two ways of logging inside Lambda functions. We shall now learn and understand them via examples from the following steps:</p>
<ol class="calibre13">
<li value="1" class="calibre10">The first way is to use Python's <kbd class="calibre12">logging</kbd> library. This is widely used as a standard practice for logging in Python scripts. We shall edit the code we have written previously for the serverless API and add in the logging statements in it. The code will look like this:</li>
</ol>
<div><img src="img/00203.jpeg" class="calibre48"/></div>
<p class="calibre34">The code which is in the preceding screenshot is as follows:</p>
<pre class="calibre17">import logging<br class="title-page-name"/>logger = logging.getLogger()<br class="title-page-name"/>logger.setLevel(logging.INFO)<br class="title-page-name"/>def lambda_handler(event, context):<br class="title-page-name"/> mobs = {<br class="title-page-name"/> "Sea": ["GoldFish", "Turtle", "Tortoise", "Dolphin", "Seal"],<br class="title-page-name"/> "Land": ["Labrador", "Cat", "Dalmatian", "German Shepherd",<br class="title-page-name"/> "Beagle", "Golden Retriever"],<br class="title-page-name"/> "Exotic": ["Iguana", "Rock Python"]<br class="title-page-name"/> }<br class="title-page-name"/> <br class="title-page-name"/> logger.info('got event{}'.format(event))<br class="title-page-name"/> logger.error('something went wrong')<br class="title-page-name"/> <br class="title-page-name"/> return 'Hello from Lambda!'<br class="title-page-name"/> #return {"type": mobs[event['type']]}</pre>
<ol start="2" class="calibre13">
<li value="2" class="calibre10">Now, when you run the Lambda function after saving, you can see a successful execution statement in green color, which looks like this:</li>
</ol>
<div><img src="img/00204.jpeg" class="calibre152"/></div>
<ol start="3" class="calibre13">
<li value="3" class="calibre10">When you click on the Details option, you can see the logging statements being executed clearly:</li>
</ol>
<div><img src="img/00205.jpeg" class="calibre153"/></div>
<ol start="4" class="calibre13">
<li value="4" class="calibre10">The next way of logging statements is by simply using the <kbd class="calibre12">print</kbd> statements in Python. It is the most common way of printing out logging statements in Python scripts. So, we shall add a <kbd class="calibre12">Hello from Lambda</kbd> print statement in our function code and see if we get the logs in our Lambda execution or not:</li>
</ol>
<div><img src="img/00206.jpeg" class="calibre48"/></div>
<p class="calibre34">The code for this Lambda function is as follows:</p>
<pre class="calibre154"> def lambda_handler(event, context):<br class="title-page-name"/> mobs = {<br class="title-page-name"/>     "Sea": ["GoldFish", "Turtle", "Tortoise", "Dolphin", "Seal"],<br class="title-page-name"/>     "Land": ["Labrador", "Cat", "Dalmatian", "German Shepherd",<br class="title-page-name"/>     "Beagle", "Golden Retriever"],<br class="title-page-name"/>     "Exotic": ["Iguana", "Rock Python"]<br class="title-page-name"/>}<br class="title-page-name"/>print 'Hello from Lambda!'<br class="title-page-name"/>return 1<br class="title-page-name"/>#return {"type": mobs[event['type']]}</pre>
<ol start="5" class="calibre13">
<li value="5" class="calibre10">When we click on Test for executing the code, we should see a green color message, which indicates a successful execution:</li>
</ol>
<div><img src="img/00207.jpeg" class="calibre155"/></div>
<ol start="6" class="calibre13">
<li value="6" class="calibre10">Again, just like we did previously, clicking on the Details toggle will give you the complete execution logs:</li>
</ol>
<div><img src="img/00208.jpeg" class="calibre156"/></div>
<ol start="7" class="calibre13">
<li value="7" class="calibre10">We can see the <kbd class="calibre12">Hello from Lambda</kbd> message too. Out of the two available logging options for our Lambda functions, it is always preferable to use the first option which is via the Python's logging module. This is because that module gives greater flexibility and helps you differentiate between info, error, and debug logs.</li>
</ol>


            

            
        
    

        

                            
                    <h1 class="header-title" id="calibre_pb_0">Summary</h1>
                
            
            
                
<p class="calibre2">In this chapter, we have learned about the monitoring and the logging capabilities of AWS. We also learned about the available monitoring and logging tools inside the AWS environment. We have also learned how to monitor our Lambda functions and how to set up logging for our Lambda functions. </p>
<p class="calibre2">We have learned about the logging and monitoring practices that are followed by the industry and the various ways one can log statements in Python from inside of a Lambda function.</p>
<p class="calibre2">In the next chapter, we will learn how to scale up our serverless architectures to become distributed and to be able to handle massive workloads while still preserving the positives of a serverless setup.</p>


            

            
        
    </body></html>