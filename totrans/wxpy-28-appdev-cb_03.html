<html><head></head><body>
  <div><div><div><div><div><h1 class="title"><a id="ch03"/>Chapter 3. Basic Building Blocks of a User Interface</h1></div></div></div><p>In this chapter, we will cover:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Creating Stock Buttons</li><li class="listitem" style="list-style-type: disc">Buttons, buttons, and more buttons</li><li class="listitem" style="list-style-type: disc">Offering options with<code class="literal"> CheckBoxes</code></li><li class="listitem" style="list-style-type: disc">Using the<code class="literal"> TextCtrl</code></li><li class="listitem" style="list-style-type: disc">Providing choices with the<code class="literal"> Choice</code> control</li><li class="listitem" style="list-style-type: disc">Adding<code class="literal"> Menus</code> and<code class="literal"> MenuBars</code></li><li class="listitem" style="list-style-type: disc">Working with<code class="literal"> ToolBars</code></li><li class="listitem" style="list-style-type: disc">How to use<code class="literal"> PopupMenus</code></li><li class="listitem" style="list-style-type: disc">Grouping controls with a<code class="literal"> StaticBox</code></li></ul></div><div><div><div><div><h1 class="title"><a id="ch03lvl1sec01"/>Introduction</h1></div></div></div><p>Even the most complex objects are typically created from many smaller, simpler objects or parts. The task of the application developer is to utilize these smaller parts and link them together in a way that is meaningful, in order to achieve the desired function of the application. In order to be able to build the application, it is necessary to know what parts are available to you.<a id="id100" class="indexterm"/>
</p><p>wxPython provides a large collection of classes and utilities. In fact, the basic collection is so rich that it is very much possible to construct a fully-functional application without inventing any of your own parts. So lets jump in and take a look at some of the most common and basic parts that can be found in nearly any desktop application.</p></div></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch03lvl1sec02"/>Creating Stock Buttons</h1></div></div></div><p>Nearly all applications have buttons in them and among the buttons there are many common ones such as Ok and Cancel that appear over and over again. In wxPython, these common buttons are known as Stock Buttons, because they are constructed by passing a Stock ID to the constructor of a<code class="literal"> Button.</code>
<a id="id101" class="indexterm"/>
</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec01"/>How to do it...</h2></div></div></div><p>Let's make a simple<code class="literal"> Panel</code> that has four<code class="literal"> Buttons</code> on it, to see how Stock Buttons can be created:<a id="id102" class="indexterm"/>
</p><div><pre class="programlisting">class MyPanel(wx.Panel):
    def __init__(self, parent):
        super(MyPanel, self).__init__(parent)

        # Make some buttons
        sizer = wx.BoxSizer(wx.HORIZONTAL)
        for bid in (wx.ID_OK, wx.ID_CANCEL,
                    wx.ID_APPLY, wx.ID_HELP):
            button = wx.Button(self, bid)
            sizer.Add(button, 0, wx.ALL, 5)
        self.SetSizer(sizer)

</pre></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec02"/>How it works...</h2></div></div></div><p>Common buttons are created by using a standard<code class="literal"> Button</code> with a Stock ID and no label. The framework will then create the correct type of button with the proper label for the current platform. Each platform has slightly different standards for these common buttons. By using Stock Buttons, these cross-platform differences can be handled by the framework. For example, take a look at the following two screenshots of the previous sample code being run on Windows 7 and OS X respectively.<a id="id103" class="indexterm"/>
</p><p>Screenshot of Windows 7:</p><div><img src="img/1780_03_01.jpg" alt="How it works..."/></div><p>Screenshot of OS X:</p><div><img src="img/1780_03_02.jpg" alt="How it works..."/></div><div><h3 class="title"><a id="note05"/>Note</h3><p>Platform Notice: On Linux, depending upon the version of GTK, Stock Buttons will also have the proper theme provided icon displayed on them as well.</p></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec03"/>There's more...<a id="id104" class="indexterm"/>
</h2></div></div></div><p>Stock buttons can be created from nearly all of the Stock IDs. If your text editor does not provide completion hints, here is a quick way to see all of the available Stock IDs: Just run the following code in your Python interpreter to introspect the<code class="literal"> wx</code> namespace for all of the ID constants.<a id="id105" class="indexterm"/>
</p><div><pre class="programlisting">import wx
for x in dir(wx):
    if x.startswith(‘ID_’):
        print x

</pre></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec04"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The<em> Utilizing Stock IDs</em> recipe in<a class="link" href="ch01.html" title="Chapter 1. Getting Started with wxPython"> Chapter 1</a>,<em> Getting Started with wxPython</em> contains a detailed discussion about the IDs used to construct Stock Buttons.</li><li class="listitem" style="list-style-type: disc">The<em> Buttons, buttons, and more buttons</em> recipe in this chapter shows how to use the other button classes available in wxPython.</li><li class="listitem" style="list-style-type: disc">The<em> Standard dialog button layout</em> recipe in Chapter 7,<em> Window Layout and Design</em> shows how Stock Buttons are used to achieve easy control layout in dialogs.</li></ul></div></div></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch03lvl1sec03"/>Buttons, buttons, and more buttons</h1></div></div></div><p>The regular<code class="literal"> Button</code> class only allows for displaying a label on the button. If this is a little too plain for the needs of your application, you're in luck. wxPython also provides a wide variety of other types of buttons that provide a different look and feel, as well as extended functionality. This recipe will introduce a number of the other button controls that are available in wxPython.<a id="id106" class="indexterm"/>
</p><div><h3 class="title"><a id="note06"/>Note</h3><p>Version Notice: The<code class="literal"> agw</code> package and<code class="literal"> GradientButton</code> class used in the following code are only available in wxPython 2.8.9.2 and later.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec05"/>How to do it...</h2></div></div></div><p>To see what these different<code class="literal"> Buttons</code> look like and what they can do, we will make a simple<code class="literal"> Panel</code> with some different examples of these additional button classes:<a id="id107" class="indexterm"/>
</p><div><pre class="programlisting">import wx
import wx.lib.platebtn as platebtn
import wx.lib.agw.gradientbutton as gradbtn

class ButtonTestPanel(wx.Panel):
    def __init__(self, parent):
        super(ButtonTestPanel, self).__init__(parent)

        # Attributes
        # Make a ToggleButton
        self.toggle = wx.ToggleButton(self,
                                      label="Toggle Button")

        # Make a BitmapButton
        bmp = wx.Bitmap("./face-monkey.png",
                        wx.BITMAP_TYPE_PNG)
        self.bmpbtn = wx.BitmapButton(self, bitmap=bmp)

        # Make a few PlateButton variants
        self.pbtn1 = pbtn.PlateButton(self,
                                      label="PlateButton")
        self.pbtn2 = pbtn.PlateButton(self, 
                                      label="PlateBmp",
                                      bmp=bmp)
        style = pbtn.PB_STYLE_SQUARE
        self.pbtn3 = pbtn.PlateButton(self,
                                      label="Square Plate",
                                      bmp=bmp,
                                      style=style)
        self.pbtn4 = pbtn.PlateButton(self,
                                      label="PlateMenu")
        menu = wx.Menu()
        menu.Append(wx.NewId(), text="Hello World")
        self.pbtn4.SetMenu(menu)

        # Gradient Buttons
        self.gbtn1 = gbtn.GradientButton(self,
                                         label="GradientBtn")
        self.gbtn2 = gbtn.GradientButton(self,
                                         label="GradientBmp",
                                         bitmap=bmp)

        # Layout
        vsizer = wx.BoxSizer(wx.VERTICAL)
        vsizer.Add(self.toggle, 0, wx.ALL, 12)
        vsizer.Add(self.bmpbtn, 0, wx.ALL, 12)
        hsizer1 = wx.BoxSizer(wx.HORIZONTAL)
        hsizer1.AddMany([(self.pbtn1, 0, wx.ALL, 5),
                        (self.pbtn2, 0, wx.ALL, 5),
                        (self.pbtn3, 0, wx.ALL, 5),
                        (self.pbtn4, 0, wx.ALL, 5)])
        vsizer.Add(hsizer1, 0, wx.ALL, 12)
        hsizer2 = wx.BoxSizer(wx.HORIZONTAL)
        hsizer2.AddMany([(self.gbtn1, 0, wx.ALL, 5),
                         (self.gbtn2, 0, wx.ALL, 5)])
        vsizer.Add(hsizer2, 0, wx.ALL, 12)
        self.SetSizer(vsizer)

</pre></div><p><a id="id108" class="indexterm"/>
This code generates the following window:</p><div><img src="img/1780_03_03.jpg" alt="How to do it..."/></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec06"/>How it works...</h2></div></div></div><p>This recipe shows the basic use of four different button classes, so let's take a look at each of them one by one to see what they can do.</p><div><div><div><div><h3 class="title"><a id="ch03lvl3sec01"/>ToggleButton<a id="id109" class="indexterm"/>
</h3></div></div></div><p>The<code class="literal"> ToggleButton</code> is another native button provided by wxPython. It is just like the standard<code class="literal"> Button</code>, but provides two states. The button will be toggled from its regular state to a pressed state when clicked on. A second click will toggle it back to its regular state once again.<a id="id110" class="indexterm"/>
</p></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec02"/>BitmapButton</h3></div></div></div><p>The<code class="literal"> BitmapButton</code> is a native platform button used for showing an image instead of label text. The usage of this button is just like the standard<code class="literal"> Button</code> except that it takes a<code class="literal"> Bitmap</code> as an argument instead of a label string. The<code class="literal"> Bitmap</code> for each state of when the button is being pressed or interacted with by the mouse can also be customized with the following methods:<a id="id111" class="indexterm"/>
</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Method</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SetBitmapDisabled</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Sets the Bitmap to show when the button is disabled.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SetBitmapFocus</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Sets the Bitmap to show when the button has the keyboard focus.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SetBitmapHover</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Sets the Bitmap to show when the mouse cursor is hovering over the button.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SetBitmapLabel</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Sets the default button (same as what is provided to the constructor). In the absence of other bitmaps, this one will be used for all states.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SetBitmapSelected</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Sets the Bitmap to use when the button is pressed.</p>
</td></tr></tbody></table></div></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec03"/>PlateButton</h3></div></div></div><p>The<code class="literal"> PlateButton</code> is an owner-drawn button class provided by the<code class="literal"> platebtn</code> module in<code class="literal"> wx.lib. PlateButtons</code> are a type of flat button control that will change its background colour when the mouse hovers over it or when it is clicked on. A<code class="literal"> PlateButton</code> can be displayed with just a label, with just a<code class="literal"> Bitmap</code>, with both a label and a<code class="literal"> Bitmap</code>, or any of the previous combinations plus as a drop-down<code class="literal"> Menu.</code>
<a id="id112" class="indexterm"/>
</p><p>The look and feel of the button can also be customized to control the color of the highlighting, the text label color, the button shape, and how the highlight is drawn. The<code class="literal"> PB_STYLE_SQUARE</code> style flag will make the button take up a square shape instead of using its default rounded edges and the<code class="literal"> PB_STYLE_GRADIENT</code> style flag will cause the background to be drawn as a gradient based on the highlighting colour. In addition to this customizability, the<code class="literal"> PlateButton</code> also fully implements the<code class="literal"> BitmapButton</code> API so it can be used as a drop-in replacement for a<code class="literal"> BitmapButton</code> in existing applications.</p></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec04"/>GradientButton</h3></div></div></div><p>The<code class="literal"> GradientButton</code> is very similar to the<code class="literal"> PlateButton</code>. The only difference is that it is not a flat button, it doesn't support a drop-down menu, and it is more flexible in what it allows for configuring the gradient colors.<a id="id113" class="indexterm"/>
</p></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec07"/>There's more...</h2></div></div></div><p>There are still quite a few more button implementations out there that you may find useful in your application.</p><div><div><div><div><h3 class="title"><a id="ch03lvl3sec05"/>GenericButtons</h3></div></div></div><p>
<code class="literal">GenericButtons</code> are a collection of classes in<code class="literal"> wx.lib.buttons</code> that provide some basic owner-drawn buttons as well as owner-drawn implementations of the native buttons that maintain the look of the native buttons but work around some limitations. For example, there is<code class="literal"> GenBitmapTextButton</code> which provides a bitmap button that also supports displaying a label, and<code class="literal"> GenBitmapToggleButton</code> which allows for a toggle button that shows a<code class="literal"> Bitmap.</code>
<a id="id114" class="indexterm"/>
</p></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec06"/>AquaButton</h3></div></div></div><p>
<code class="literal">AquaButtons</code> are an owner-drawn button class with a glassy appearance that approximates the look and feel of native Macintosh Aqua Buttons. Because the class is owner drawn, it will provide the same look and feel on all platforms. This class can be found in<code class="literal"> wx.lib.agw.aquabutton</code>.<a id="id115" class="indexterm"/>
</p></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec08"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The<em> Creating Stock Buttons</em> recipe in this chapter shows how to create standard buttons.</li></ul></div></div></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch03lvl1sec04"/>Offering options with CheckBoxes</h1></div></div></div><p>A<code class="literal"> CheckBox</code> is a common, basic control that allows for a user to select one of two or three states, depending on the style of<code class="literal"> CheckBox</code>, though it is typically associated with just a<code class="literal"> True</code> or<code class="literal"> False</code> state. In this recipe, we will take a look at how to use the<code class="literal"> CheckBox</code> control.<a id="id116" class="indexterm"/>
</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec09"/>How to do it...</h2></div></div></div><p>To see how<code class="literal"> CheckBoxes</code> work, we will create a little window with two different kinds of<code class="literal"> CheckBoxes</code> in it:<a id="id117" class="indexterm"/>
</p><div><pre class="programlisting">class CheckBoxFrame(wx.Frame):
    def __init__(self, *args, **kwargs):
        super(CheckBoxFrame, self).__init__(*args, **kwargs)

        # Attributes
        self.panel = wx.Panel(self)
        self.checkbox1 = wx.CheckBox(self.panel,
                                     label="2 State CheckBox")
        style = wx.CHK_3STATE|wx.CHK_ALLOW_3RD_STATE_FOR_USER
        self.checkbox2 = wx.CheckBox(self.panel,
                                     label="3 State CheckBox",
                                     style=style)

        # Layout
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.checkbox1, 0, wx.ALL, 15)
        sizer.Add(self.checkbox2, 0, wx.ALL, 15)
        self.panel.SetSizer(sizer)
        self.CreateStatusBar()

        # Event Handlers
        self.Bind(wx.EVT_CHECKBOX, self.OnCheck)

    def OnCheck(self, event):
        e_obj = event.GetEventObject()
        if e_obj == self.checkbox1:
            checked = self.checkbox1.GetValue()
            msg = "Two State Clicked: %s" % checked
            self.PushStatusText(msg)
        elif e_obj == self.checkbox2:
            state = self.checkbox2.Get3StateValue()
            msg = "Three State Clicked: %d" % state
            self.PushStatusText(msg)
        else:
            event.Skip()

<a id="id118" class="indexterm"/>
</pre></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec10"/>How it works...</h2></div></div></div><p>We created two<code class="literal"> CheckBoxes</code>; the first is the standard two-state<code class="literal"> CheckBox</code> and the second is a three-state<code class="literal"> CheckBox</code>. The state of a two state<code class="literal"> CheckBox</code> can be programmatically controlled through its<code class="literal"> GetValue</code> and<code class="literal"> SetValue</code> methods.<a id="id119" class="indexterm"/>
</p><p>The three-state checkbox is created by specifying the two style flags<code class="literal"> CHK_3STATE</code> and<code class="literal"> CHK_ALLOW_3RD_STATE_FOR_USER</code>. The second style flag can be omitted if you want to limit users from being able to set the undetermined state, so that it can only be done programmatically. Three-state checkboxes use the<code class="literal"> Get3StateValue</code> and<code class="literal"> Set3StateValue</code> methods with the following values to programmatically control the<code class="literal"> CheckBox</code> state:<a id="id120" class="indexterm"/>
</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">wx.CHK_CHECKED</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.CHK_UNCHECKED</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">wx.CHK_UNDETERMINED</code></li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec11"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The<em> Using a BoxSizer</em> recipe in<a class="link" href="ch07.html" title="Chapter 7. Window Layout and Design"> Chapter 7</a>,<em> Window Layout and Design</em> shows how to use the<code class="literal"> BoxSizer</code> class to control layout.</li></ul></div></div></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch03lvl1sec05"/>Using the TextCtrl</h1></div></div></div><p>The<code class="literal"> TextCtrl</code> is the basic means of allowing users to input textual data into an application. This control has many possible uses and modes of operation. This recipe will show how to create a simple login dialog that uses two<code class="literal"> TextCtrls</code> to provide input fields for the login name and password.<a id="id121" class="indexterm"/>
</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec12"/>How to do it...</h2></div></div></div><p>First, lets create the<code class="literal"> Dialog</code> class that will hold the other controls:<a id="id122" class="indexterm"/>
</p><div><pre class="programlisting">class LoginDialog(wx.Dialog):LoginDialog(wx.Dialog):
    def __init__(self, *args, **kwargs):
        super(LoginDialog, self).__init__(*args, **kwargs)wx.Dialog.__init__(self, *args, **kwargs)

        # Attributes
        self.panel = LoginPanel(self)

        # Layout
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.panel, 1, wx.EXPAND)
        self.SetSizer(sizer)
        self.SetInitialSize()

    def GetUsername(self):
        return self.panel.GetUsername()

    def GetPassword(self):
        return self.panel.GetPassword()

</pre></div><p>Next let's make the<code class="literal"> Panel</code> that will hold the<code class="literal"> TextCtlr</code> controls for the users to enter their login information into:<a id="id123" class="indexterm"/>
</p><div><pre class="programlisting">class LoginPanel(wx.Panel):
    def __init__(self, parent):
        super(LoginPanel, self).__init__(parent)

        # Attributes
        self._username = wx.TextCtrl(self)
        self._passwd = wx.TextCtrl(self, style=wx.TE_PASSWORD)

        # Layout
        sizer = wx.FlexGridSizer(2, 2, 8, 8)
        sizer.Add(wx.StaticText(self, label="Username:"),
                  0, wx.ALIGN_CENTER_VERTICAL)
        sizer.Add(self._username, 0, wx.EXPAND)
        sizer.Add(wx.StaticText(self, label="Password:"),
                  0, wx.ALIGN_CENTER_VERTICAL)
        sizer.Add(self._passwd, 0, wx.EXPAND)
        msizer = wx.BoxSizer(wx.VERTICAL)
        msizer.Add(sizer, 1, wx.EXPAND|wx.ALL, 20)
        btnszr = wx.StdDialogButtonSizer()
        button = wx.Button(self, wx.ID_OK)
        button.SetDefault()
        btnszr.AddButton(button)
        msizer.Add(btnszr, 0, wx.ALIGN_CENTER|wx.ALL, 12)
        btnszr.Realize()

        self.SetSizer(msizer)

    def GetUsername(self):
        return self._username.GetValue()

    def GetPassword(self):
        return self._passwd.GetValue()

<a id="id124" class="indexterm"/>
</pre></div><div><img src="img/1780_03_04.jpg" alt="How to do it..."/></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec13"/>How it works...</h2></div></div></div><p>We did a number of things in the previous code, but since the focus of this recipe is on the<code class="literal"> TextCtrl</code> object, let's start by taking a look at the two<code class="literal"> TextCtrl</code> object that we created.<a id="id125" class="indexterm"/>
</p><p>The first text control for the username is just a default<code class="literal"> TextCtrl</code> created with all of the default arguments. By default, a<code class="literal"> TextCtrl</code> object is created as a single line control. This creates just a simple text box that the user can type any arbitrary number of characters into.</p><p>The second text control uses the special<code class="literal"> TE_PASSWORD</code> style flag. This creates a<code class="literal"> TextCtrl</code> that will disguise its input with asterisk characters, just like you see in any password entry field in most applications or websites. As a user types in this control, each character that is typed in will be displayed as an asterisk, but the actual character values are stored internally by the control and can be accessed via<code class="literal"> GetValue</code>.</p><p>This dialog should be shown with<code class="literal"> ShowModal</code>, and when<code class="literal"> ShowModal</code> returns you can just retrieve the values by using the accessor methods<code class="literal"> GetUsername</code> and<code class="literal"> GetPassword</code> in order to perform the login validation.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec14"/>There's more...</h2></div></div></div><p>The<code class="literal"> TextCtrl</code> class has a fairly large collection of style flags that can be supplied to its constructor to modify its behavior for different use cases. Included below is a list of most-commonly-used style flags and a description of what each one does. The rest can be found in wxPython's online API documentation (<a class="ulink" href="http://wxpython.org/docs/api/">http://wxpython.org/docs/api/</a>).<a id="id126" class="indexterm"/>
</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Style flags</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.TE_PROCESS_ENTER</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Will cause the control to generate a<code class="literal"> wx.EVT_COMMAND_TEXT_ENTER</code> event when the<em> Enter</em> key is pressed.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.TE_PROCESS_TAB</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Allows a<code class="literal"> wx.EVT_CHAR</code> event to be issued when the<em> Tab</em> key is pressed. Without this style set, the<em> Tab</em> key will allow the user to tab into the next control in the window.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.TE_MULTILINE</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Allows the<code class="literal"> TextCtrl</code> to have multiple lines.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.TE_READONLY</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Makes the control read only, so that the user cannot enter text into it.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.TE_RICH2</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Use the<code class="literal"> RichText</code> version of the control. (only applicable on Windows).</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.TE_LEFT</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Aligns all text to the left-hand side of the control.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.TE_CENTER</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Aligns all text to the center of the control</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.TE_RIGHT</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Aligns all text to the right-hand side of the control.</p>
</td></tr></tbody></table></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec15"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The<em> Validating Input with validators</em> recipe in<a class="link" href="ch02.html" title="Chapter 2. Responding to Events"> Chapter 2</a>,<em> Responding to Events</em> shows how to use a Validator to validate user input.</li><li class="listitem" style="list-style-type: disc">The<em> Using a BoxSizer</em> recipe in<a class="link" href="ch07.html" title="Chapter 7. Window Layout and Design"> Chapter 7</a>,<em> Window Layout and Design</em> shows how to use the BoxSizer class to control layout</li></ul></div></div></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch03lvl1sec06"/>Providing choices with the Choice control</h1></div></div></div><p>The<code class="literal"> Choice</code> control is a means to allow the user to make a single selection from a list of possible selections. It does this by displaying the currently-selected choice and offering the list of other possible choices in a pop-up when the control is clicked on by the user. This makes it very efficient in its use of screen space.<a id="id127" class="indexterm"/>
</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec16"/>How to do it...</h2></div></div></div><p>To see how the<code class="literal"> Choice</code> control works, we will make a simple<code class="literal"> Panel</code> that has a<code class="literal"> Choice</code> control with three choices in it:<a id="id128" class="indexterm"/>
</p><div><pre class="programlisting">class ChoicePanel(wx.Panel):
    def __init__(self, parent):
        super(ChoicePanel, self).__init__(parent)

        # Attributes
        items = ["item 1", "item 2", "item 3"]
        self.choice = wx.Choice(self, choices=items)
        self.choice.SetSelection(0)

        # Layout
        sizer = wx.BoxSizer()
        sizer.Add(self.choice, 1,
                  wx.EXPAND|wx.ALL, 20)
        self.SetSizer(sizer)

        # Event Handlers
        self.Bind(wx.EVT_CHOICE, self.OnChoice)

    def OnChoice(self, event):
        selection = self.choice.GetStringSelection()
        index = self.choice.GetSelection()
        print "Selected Item: %d '%s'" % (index, selection)

</pre></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec17"/>How it works...</h2></div></div></div><p>The<code class="literal"> Choice</code> control manages a list of strings. The list of strings that the control contains can be specified either in the constructor or by calling the<code class="literal"> SetItems</code> method with a list of strings to put in the control. When clicked on, the control will display a pop-up list of all of the strings. After the user makes a selection, an<code class="literal"> EVT_CHOICE</code> event will be fired.<a id="id129" class="indexterm"/>
</p><div><h3 class="title"><a id="note07"/>Note</h3><p>Platform Notice: The<code class="literal"> Choice</code> control in Windows does not automatically select its first item when created. Due to this inconsistency, it is sometimes desirable to explicitly set the selection after creating the control, as we have done in this example, in order to ensure consistent behavior across platforms.</p></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec18"/>There's more...</h2></div></div></div><p>The items in the control can be manipulated or changed after the control has been created by using the following methods:</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Method</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Append</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Append a string to the end of the list managed by the control</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">AppendItems</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Append a list of strings to the list managed by the control</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Insert</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Insert a string into the list managed by the control</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SetItems</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Set the list of strings that the control displays</p>
</td></tr></tbody></table></div></div></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch03lvl1sec07"/>Adding Menus and MenuBars</h1></div></div></div><p>Most applications have menus. Menus are a means to providing the users of the application with a way to execute actions either by clicking on them or by using keyboard shortcuts that can be associated with each menu item. An application's menus consist of three components: a<code class="literal"> MenuBar, Menus</code>, and<code class="literal"> MenuItems</code>. The<code class="literal"> MenuBar</code> contains the<code class="literal"> Menus</code> and the<code class="literal"> Menus</code> contain the<code class="literal"> MenuItems</code>. This recipe will show how to add a<code class="literal"> MenuBar</code> with some Menus to a<code class="literal"> Frame</code>.<a id="id130" class="indexterm"/>
</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec19"/>How to do it...</h2></div></div></div><p>Here we will make a<code class="literal"> Frame</code> that has some<code class="literal"> Menu</code> options for controlling actions in a<code class="literal"> TextCtrl:</code>
<a id="id131" class="indexterm"/>
</p><div><pre class="programlisting">ID_READ_ONLY = wx.NewId()

class MenuFrame(wx.Frame):
    def __init__(self, *args, **kwargs):
        super(MenuFrame, self).__init__(*args, **kwargs)

        # Attributes
        self.panel = wx.Panel(self)
        self.txtctrl = wx.TextCtrl(self.panel,
                                   style=wx.TE_MULTILINE)

        # Layout
        sizer = wx.BoxSizer(wx.HORIZONTAL)
        sizer.Add(self.txtctrl, 1, wx.EXPAND)
        self.panel.SetSizer(sizer)
        self.CreateStatusBar() # For output display

        # Setup the Menu
        menub = wx.MenuBar()

        # File Menu
        filem = wx.Menu()
        filem.Append(wx.ID_OPEN, "Open\tCtrl+O")
        menub.Append(filem, "&amp;File")

        # Edit Menu
        editm = wx.Menu()
        editm.Append(wx.ID_COPY, "Copy\tCtrl+C")
        editm.Append(wx.ID_CUT, "Cut\tCtrl+X")
        editm.Append(wx.ID_PASTE, "Paste\tCtrl+V")
        editm.AppendSeparator()
        editm.Append(ID_READ_ONLY, "Read Only",
                     kind=wx.ITEM_CHECK)
        menub.Append(editm, "E&amp;dit")
        self.SetMenuBar(menub)

        # Event Handlers
        self.Bind(wx.EVT_MENU, self.OnMenu)

    def OnMenu(self, event):
        """Handle menu clicks"""
        evt_id = event.GetId()
        actions = { wx.ID_COPY  : self.txtctrl.Copy,
                    wx.ID_CUT   : self.txtctrl.Cut,
                    wx.ID_PASTE : self.txtctrl.Paste }
        action = actions.get(evt_id, None)
        if action:
            action()
        elif evt_id == ID_READ_ONLY:
            # Toggle enabled state
            self.txtctrl.Enable(not self.txtctrl.Enabled)
        elif evt_id == wx.ID_OPEN:
            dlg = wx.FileDialog(self, "Open File", 
                                style=wx.FD_OPEN)
            if dlg.ShowModal() == wx.ID_OK:
                fname = dlg.GetPath()
                handle = open(fname, 'r')
                self.txtctrl.SetValue(handle.read())
                handle.close()
        else:
            event.Skip()

<a id="id132" class="indexterm"/>
</pre></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec20"/>How it works...</h2></div></div></div><p>The first thing to look at is where we created the<code class="literal"> MenuBar</code> object. The<code class="literal"> MenuBar</code> is what we need to attach all of our<code class="literal"> Menus</code> to, and it will ultimately become responsible for managing them. Next we start to make our<code class="literal"> Menus</code>, which is a rather straightforward process. All that needs to be done is to call<code class="literal"> Append</code> for each new item that we wish to add to the<code class="literal"> Menu</code>.<a id="id133" class="indexterm"/>
</p><p>
<code class="literal">Append</code> accepts a few arguments, but the important one to notice is the one for the label. The string that we pass can have some special formatting options in it to setup keyboard shortcuts for the<code class="literal"> MenuItem</code>. Placing an '&amp;' before a letter in the label will setup a keyboard mnemonic that will allow for keyboard navigation to the item. More importantly, though, is that placing a<em> Tab</em> character (<code class="literal">\t</code>) followed by a shortcut option<em> Ctrl + C</em> will setup a keyboard shortcut to select the menu option and cause an<code class="literal"> EVT_MENU</code> event to be generated.<a id="id134" class="indexterm"/>
</p><div><h3 class="title"><a id="note08"/>Note</h3><p>Platform Notice: On OS X, the<em> Ctrl</em> keyword will be automatically translated to the Apple/Command key.</p></div><p>Finally, we just need to call<code class="literal"> Append</code> on our<code class="literal"> MenuBar</code> in order to add each of the<code class="literal"> Menus</code> that we created to it, and then finally call<code class="literal"> SetMenuBar</code> on the<code class="literal"> Frame</code> to add the<code class="literal"> MenuBar</code> to our<code class="literal"> Frame</code>.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec21"/>There's more...</h2></div></div></div><p>Menus have some additional functionality that we did not cover above. Following below are some references to a few more things that you can do with<code class="literal"> Menus</code>.</p><div><div><div><div><h3 class="title"><a id="ch03lvl3sec07"/>SubMenus</h3></div></div></div><p>
<code class="literal">Menus</code> can have submenus appended to them, via the<code class="literal"> AppendMenu</code> function.<a id="id135" class="indexterm"/>
</p></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec08"/>Customizing MenuItems</h3></div></div></div><p>
<code class="literal">MenuItems</code> are created when calling<code class="literal"> Append</code> on a<code class="literal"> Menu</code>. The<code class="literal"> Append</code> method takes a "kind" keyword parameter that can accept any of the following values:<a id="id136" class="indexterm"/>
</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Value</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.ITEM_NORMAL</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Default value</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.ITEM_SEPARATOR</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Creates a separator item. It's easier to just call<code class="literal"> AppendSeparator</code> than do this.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.ITEM_CHECK</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Adds a<code class="literal"> CheckBox</code> to the<code class="literal"> Menu</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.ITEM_RADIO</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Adds a<code class="literal"> RadioButton</code> to the<code class="literal"> Menu</code>.</p>
</td></tr></tbody></table></div><p>
<code class="literal">MenuItems</code> can also have<code class="literal"> Bitmaps</code> added to them by calling<code class="literal"> SetBitmap</code> on the<code class="literal"> MenuItem</code> object returned by calling<code class="literal"> Append</code> on the<code class="literal"> Menu</code>.</p><div><h3 class="title"><a id="note09"/>Note</h3><p>Platform Notice: On Linux/GTK,<code class="literal"> MenuItems</code> that use Stock IDs will automatically get system theme provided bitmaps associated with them.</p></div></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec22"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The<em> Utilizing Stock IDs</em> recipe in<a class="link" href="ch01.html" title="Chapter 1. Getting Started with wxPython"> Chapter 1</a>,<em> Getting Started with wxPython</em> discusses the use of the built-in standard control IDs.</li><li class="listitem" style="list-style-type: disc">The<em> Using UpdateUI events</em> recipe in<a class="link" href="ch02.html" title="Chapter 2. Responding to Events"> Chapter 2</a>, <em>Responding to Events</em> discusses how to use<code class="literal"> UpdateUI</code> events to manage the UI's state.</li></ul></div></div></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch03lvl1sec08"/>Working with ToolBars</h1></div></div></div><p>
<code class="literal">ToolBars</code> are a lot like<code class="literal"> Menus</code> in that they provide a means to link an action in the interface with an action in the application. They differ in that<code class="literal"> ToolBars</code> use images to represent actions and must be clicked on directly in order to initiate the action. They make for an easy point and click interface for the user to interact with. This recipe will show a custom<code class="literal"> ToolBar</code> class that automatically gets bitmaps from the system's<code class="literal"> ArtProvider</code>.<a id="id137" class="indexterm"/>
</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec23"/>How to do it...</h2></div></div></div><p>Let's start by defining our custom<code class="literal"> ToolBar</code> class, and then map some Stock IDs to art resource IDs:<a id="id138" class="indexterm"/>
</p><div><pre class="programlisting">ART_MAP = { wx.ID_CUT : wx.ART_CUT,
            wx.ID_COPY : wx.ART_COPY,
            wx.ID_PASTE : wx.ART_PASTE }

class EasyToolBar(wx.ToolBar):
    def AddEasyTool(self, id, shortHelp=u"", longHelp=u""):
        """Simplifies adding a tool to the toolbar
        @param id: Stock ID

        """
        assert id in ART_MAP, "Unknown Stock ID"
        art_id = ART_MAP.get(id)
        bmp = wx.ArtProvider.GetBitmap(art_id, wx.ART_TOOLBAR)
        self.AddSimpleTool(id, bmp, shortHelp, longHelp)

</pre></div><p>Now we can make use of this custom<code class="literal"> ToolBar</code> class anywhere that we want to have a<code class="literal"> ToolBar</code>. The following code snippet is a minimal example of creating an<code class="literal"> EasyToolBar</code> with three items:</p><div><pre class="programlisting">class ToolBarFrame(wx.Frame):
    def __init__(self, *args, **kwargs):
        super(ToolBarFrame, self).__init__(*args, **kwargs)

        # Setup the ToolBar
        toolb = EasyToolBar(self)
        toolb.AddEasyTool(wx.ID_CUT)
        toolb.AddEasyTool(wx.ID_COPY)
        toolb.AddEasyTool(wx.ID_PASTE)
        toolb.Realize()
        self.SetToolBar(toolb)

        # Event Handlers
        self.Bind(wx.EVT_TOOL, self.OnToolBar)

    def OnToolBar(self, event):
        print "ToolBarItem Clicked", event.GetId()

</pre></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec24"/>How it works...</h2></div></div></div><p>The<code class="literal"> EasyToolBar</code> class makes use of a map of stock IDs to art resource IDs. When the<code class="literal"> AddEasyTool</code> method is called, it will look up that art resource in the system's art provider. This simplifies the use of the<code class="literal"> ToolBar</code> by quite a bit since we don't need to repeat the code for getting the appropriate bitmap each time we want to add a tool.<a id="id139" class="indexterm"/>
</p><p>The<code class="literal"> ToolBarFrame</code> class shows an example of the use of the<code class="literal"> EasyToolBar</code>. Using a<code class="literal"> ToolBar</code> can be summed up in a four-step process. First, create the<code class="literal"> ToolBar</code>, second add the tools, third call<code class="literal"> Realize</code> to tell the<code class="literal"> ToolBar</code> that all of the tools have been added, and then fourth and finally call the<code class="literal"> SetToolBar</code> method of the<code class="literal"> Frame</code> in order to add the<code class="literal"> ToolBar</code> to the<code class="literal"> Frame</code>.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec25"/>There's more...</h2></div></div></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec09"/>ToolBar styles</h3></div></div></div><p>There a number of style flags that can be passed to a<code class="literal"> ToolBars</code> constructor to modify its appearance and behavior. Following is a list of some of the more useful ones:<a id="id140" class="indexterm"/>
</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Style flags</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.TB_DOCKABLE</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Allows the<code class="literal"> ToolBar</code> to be undocked from the<code class="literal"> Frame</code> (GTK Only)</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.TB_FLAT</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Makes the<code class="literal"> ToolBar</code> look flat (MSW and GTK ONLY)</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.TB_HORIZONTAL</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Horizontal tool layout</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.TB_VERTICAL</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Vertical tool layout</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.TB_TEXT</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Show labels below the tool icon</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.TB_NO_TOOLTIPS</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Don't show<code class="literal"> ToolTips</code> when tools are hovered over</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.TB_BOTTOM</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Put the<code class="literal"> ToolBar</code> at the bottom of the parent window</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wx.TB_RIGHT</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Put the<code class="literal"> ToolBar</code> at the right-hand side of the parent window</p>
</td></tr></tbody></table></div></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec10"/>Additional types of tools</h3></div></div></div><p>It is possible to add different types of tools or controls to a<code class="literal"> ToolBar</code> besides the standard icon tools. Here is a quick reference to some of these other<code class="literal"> ToolBar</code> methods.</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>ToolBar methods</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">AddControl</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Allows for a control such as a<code class="literal"> Button</code> to be added to the<code class="literal"> ToolBar</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">AddCheckLabelTool</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Adds a tool that can be toggled.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">AddRadioLabelTool</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Adds a tool that will work like a<code class="literal"> RadioButton</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">AddSeparator</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Adds a vertical line to the<code class="literal"> ToolBar</code> to separate items.</p>
</td></tr></tbody></table></div></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec11"/>Events</h3></div></div></div><p>
<code class="literal">ToolBar</code> tools will fire an<code class="literal"> EVT_TOOL</code> event when clicked on. If you already have a<code class="literal"> MenuItem</code> for the same ID that is bound to an<code class="literal"> EVT_MENU</code> event handler, it is not necessary to create a separate event handler for the tool event. The system will automatically route the tool event to your menu handler.<a id="id141" class="indexterm"/>
</p></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec26"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The<em> Adding Menus and MenuBars</em> recipe in this chapter discusses the use of menus and menu events, which are closely related to toolbars.</li><li class="listitem" style="list-style-type: disc">The<em> Customizing the ArtProvider</em> recipe in<a class="link" href="ch10.html" title="Chapter 10. Creating Components and Extending Functionality"> Chapter 10</a>,<em> Creating Components and Extending Functionality</em> includes further examples and information about retrieving bitmap resources.</li></ul></div></div></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch03lvl1sec09"/>How to use PopupMenus</h1></div></div></div><p>Pop-up menus (a.k.a context menus) are a useful way of providing context-sensitive access to actions when a user right clicks on a control or on a part of a window. Pop-up menus work the same way as a regular menu but require some special handling since there is no<code class="literal"> MenuBar</code> to manage them. This recipe will create a mixin class to help manage a pop-up menu.<a id="id142" class="indexterm"/>
</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec27"/>How to do it...</h2></div></div></div><p>Here we will define a mixin class to manage the creation and lifetime of a context menu:<a id="id143" class="indexterm"/>
</p><div><pre class="programlisting">class PopupMenuMixin(object):
    def __init__(self):
        super(PopupMenuMixin, self).__init__()

        # Attributes
        self._menu = None

        # Event Handlers
        self.Bind(wx.EVT_CONTEXT_MENU, self.OnContextMenu)

    def OnContextMenu(self, event):
        """Creates and shows the Menu"""
        if self._menu is not None:
            self._menu.Destroy()

        self._menu = wx.Menu()
        self.CreateContextMenu(self._menu)
        self.PopupMenu(self._menu)

    def CreateContextMenu(self, menu):
        """Override in subclass to create the menu"""
        raise NotImplementedError

</pre></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec28"/>How it works...</h2></div></div></div><p>This little mixin class is very generic and can be used with any type of window subclass to add custom context menu support. The subclass that uses this mixin must override the<code class="literal"> CreateContextMenu</code> method to make its own<code class="literal"> Menu</code>, and then the mixin will take care of the rest. Following is a minimal example of using the<code class="literal"> PopupMenuMixin</code> class. It will create a<code class="literal"> Panel</code> that has a context menu with three items on it; a more complete example is included in the example code that accompanies this topic.<a id="id144" class="indexterm"/>
</p><div><pre class="programlisting">class PanelWithMenu(wx.Panel, PopupMenuMixin):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        PopupMenuMixin.__init__(self)

    def CreateContextMenu(self, menu):
        """PopupMenuMixin Implementation"""
        menu.Append(wx.ID_CUT)
        menu.Append(wx.ID_COPY)
        menu.Append(wx.ID_PASTE)

</pre></div><p>The<code class="literal"> EVT_CONTEXT_MENU</code> is fired when a user right-clicks, or initiates a context menu from the keyboard. Because context menus can be shown in multiple ways, it is important to use<code class="literal"> EVT_CONTEXT_MENU</code> instead of using the mouse right-click event. Our mixin class will catch this event and first clean up any existing<code class="literal"> Menu</code>. Since pop-up menus do not have a<code class="literal"> MenuBar</code> to manage them, it is necessary to clean them up ourselves, otherwise, if they are not destroyed, they can cause memory leaks. Next, the subclass's<code class="literal"> CreateContextMenu</code> method will be called to add the items to the<code class="literal"> Menu</code>. Finally, we display the<code class="literal"> Menu</code> by calling the<code class="literal"> PopupMenu</code> method.</p><p>When a user clicks on an item in the<code class="literal"> Menu</code>, an<code class="literal"> EVT_MENU</code> event will be sent to the window that the pop-up menu belongs to. Hence, it is necessary to<code class="literal"> Bind</code> your own menu handlers to handle the<code class="literal"> MenuEvents</code>.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec29"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The<em> Adding Menus and MenuBars</em> recipe in this chapter shows how to create menu objects.</li><li class="listitem" style="list-style-type: disc">The<em> Using mixin classes</em> recipe in<a class="link" href="ch09.html" title="Chapter 9. Design Approaches and Techniques"> Chapter 9</a>,<em> Design Approaches and Techniques</em> discusses how to use mixin classes.</li></ul></div></div></div></div>


  <div><div><div><div><div><h1 class="title"><a id="ch03lvl1sec10"/>Grouping controls with a StaticBox</h1></div></div></div><p>The<code class="literal"> StaticBox</code> is a fairly simple control used to group other related controls together, by drawing a border around them that optionally includes a label. The usage of the<code class="literal"> StaticBox</code> control is a little different than other controls though, due to its relationship with the controls it contains. Hence, this recipe will show how to use a<code class="literal"> StaticBox</code>, and will give an explanation of some of its quirks.<a id="id145" class="indexterm"/>
</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec30"/>How to do it...</h2></div></div></div><p>To see how to add controls to a<code class="literal"> StaticBox</code>, let's make a<code class="literal"> Panel</code> class that has a<code class="literal"> StaticBox</code>, and add a few controls to it:<a id="id146" class="indexterm"/>
</p><div><pre class="programlisting">class MyPanel(wx.Panel):
    def __init__(self, parent):
        super(MyPanel, self).__init__(parent)

        # Layout
        sbox = wx.StaticBox(self, label="Box Label")
        sboxsz = wx.StaticBoxSizer(sbox, wx.VERTICAL)
        
        # Add some controls to the box
        cb = wx.CheckBox(self, label="Enable")
        sboxsz.Add(cb, 0, wx.ALL, 8)
        sizer = wx.BoxSizer(wx.HORIZONTAL)
        sizer.Add(wx.StaticText(self, label="Value:"))
        sizer.Add((5, 5))
        sizer.Add(wx.TextCtrl(self))
        sboxsz.Add(sizer, 0, wx.ALL, 8)8)

        msizer = wx.BoxSizer(wx.VERTICAL)
        msizer.Add(sboxsz, 0, wx.EXPAND|wx.ALL, 20)
        self.SetSizer(msizer)

</pre></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec31"/>How it works...</h2></div></div></div><p>Even though a<code class="literal"> StaticBox</code> is a container for other controls, it is actually a sibling of the controls that it contains, instead of being a parent window. The most important thing to remember when working with a<code class="literal"> StaticBox</code> is that it must be created before any of the controls that it will contain. If it is not created before its siblings, then they will have issues processing mouse events.<a id="id147" class="indexterm"/>
</p><p>The<code class="literal"> StaticBox</code> uses a<code class="literal"> StaticBoxSizer</code> to add the controls to the box, as well as to manage its size and to position the controls inside of it. The usage of a<code class="literal"> StaticBoxSizer</code> is used just like a regular<code class="literal"> BoxSizer</code> in all regards except that its constructor takes a<code class="literal"> StaticBox</code> as the first argument. Calling the<code class="literal"> Add</code> method of<code class="literal"> StaticBoxSizer</code> is used to then add the controls to the<code class="literal"> StaticBox</code>. Like with the<code class="literal"> BoxSizer</code>, the<code class="literal"> Add</code> method of<code class="literal"> StaticBoxSizer</code> takes the object being added as the first parameter, and then optionally the proportion, the sizer flags, and border keyword parameters.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec32"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The<em> Using</em> a<em> BoxSizer</em> recipe in<a class="link" href="ch07.html" title="Chapter 7. Window Layout and Design"> Chapter 7</a>,<em> Window Layout and Design</em> contains more examples of sizer-based control layout.</li></ul></div></div></div></div>
</body></html>