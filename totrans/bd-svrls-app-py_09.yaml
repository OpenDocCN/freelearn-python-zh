- en: Introduction to Microsoft Azure Functions
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Microsoft Azure Functions 简介
- en: So far, we have learned how to build serverless functions and serverless architectures
    using Python in the AWS environment. We have also learned about the settings and
    environment of the AWS Lambda tool in great detail. We shall now learn and explore
    its counterpart from Microsoft Azure Functions.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经学习了如何在 AWS 环境中使用 Python 构建 serverless 函数和 serverless 架构。我们还详细学习了 AWS
    Lambda 工具的设置和环境。现在，我们将学习和探索其 Microsoft Azure Functions 对应版本。
- en: 'In this chapter, you will learn how Microsoft Azure Functions work, what the
    Microsoft Azure Functions console looks like, and how to go about understanding
    the settings in the console. This chapter is divided into the following sections:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将学习 Microsoft Azure Functions 的工作原理，Azure Functions 控制台的外观，以及如何了解控制台中的设置。本章分为以下部分：
- en: Introduction to Microsoft Azure Functions
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microsoft Azure Functions 简介
- en: Creating your first Azure Function
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建您的第一个 Azure Function
- en: Understanding triggers
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解触发器
- en: Understanding logging and monitoring
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解日志记录和监控
- en: Best practices for writing Microsoft Azure Functions
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 编写 Microsoft Azure Functions 的最佳实践
- en: Introduction to Microsoft Azure Functions
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Microsoft Azure Functions 简介
- en: 'Microsoft Azure Functions is the Azure counterpart of AWS''s Lambda service.
    In this section, we will learn how to locate and navigate the Microsoft Azure
    Functions console. So, let''s start by performing the following steps:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft Azure Functions 是 AWS Lambda 服务的 Azure 对应服务。在本节中，我们将学习如何定位和导航 Microsoft
    Azure Functions 控制台。因此，让我们先执行以下步骤：
- en: 'You can locate the Azure Functions app by navigating to the All services tab
    on the left menu and typing out the function filter. You will now notice the Microsoft
    Azure Function''s service under the name, Function Apps:'
  id: totrans-10
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以通过导航到左侧菜单中的“所有服务”标签并输入函数过滤器来定位 Azure Functions 应用。现在，您将注意到名为“Function Apps”下的
    Microsoft Azure Function 服务：
- en: '![](img/00280.jpeg)'
  id: totrans-11
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00280.jpeg)'
- en: 'Once you click on that, you will be re-directed to the Function Apps console.
    For now, it will be empty if you haven''t created any functions. The console will
    look something like this:'
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦点击，您将被重定向到 Function Apps 控制台。目前，如果您还没有创建任何函数，它将是空的。控制台看起来可能如下所示：
- en: '![](img/00281.jpeg)'
  id: totrans-13
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00281.jpeg)'
- en: 'Now, let''s start with creating an Azure Function. To do so, we need to click
    on the Create a resource option on the left menu, then click on the Compute option
    from that list, and then select the Function App option from the subsequent list
    of options:'
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们开始创建一个 Azure Function。为此，我们需要点击左侧菜单中的“创建资源”选项，然后从该列表中点击“计算”选项，然后从随后的选项列表中选择“Function
    App”选项：
- en: '![](img/00282.jpeg)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00282.jpeg)'
- en: Microsoft Azure Functions come under the list of **Compute** resources on the
    dashboard. In the following sections, we will learn how to create Microsoft Azure
    Functions and also understand the different kinds of triggers and how they work.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft Azure Functions 在仪表板上的“计算”资源列表中。在以下部分，我们将学习如何创建 Microsoft Azure Functions，并了解不同的触发器及其工作方式。
- en: Creating your first Azure Function
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建您的第一个 Azure Function
- en: 'In this section, we will learn how to create and deploy an Azure Function.
    We will go through the process step by step in order to understand how each section
    of an Azure function works:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将学习如何创建和部署 Azure Function。我们将逐步进行，以便了解 Azure Function 的每个部分是如何工作的：
- en: 'When you click on the Functions App in the menu, you will be re-directed to
    the Function App creation wizard, as shown in the following screenshot:'
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当您在菜单中点击 Functions App 时，您将被重定向到 Function App 创建向导，如下截图所示：
- en: '![](img/00283.jpeg)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00283.jpeg)'
- en: 'Add the required information in the wizard accordingly. Choose Linux (Preview)
    as the OS. Then, click on the blue Create button at the bottom of the wizard:'
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据向导中的要求添加所需信息。选择 Linux（预览）作为操作系统。然后，点击向导底部的蓝色“创建”按钮：
- en: '![](img/00284.jpeg)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00284.jpeg)'
- en: 'Clicking on the Automation options at the bottom will open up a validation
    screen for automating Function deployments. This is not needed for this chapter.
    This will simply validate your Azure Function:'
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击底部的自动化选项将打开自动化 Function 部署的验证屏幕。这对于本章不是必需的。这只会验证您的 Azure Function：
- en: '![](img/00285.jpeg)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00285.jpeg)'
- en: 'Once you click Create, you will see the deployment in progress under the Notifications
    menu:'
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦点击创建，您将在“通知”菜单下看到正在进行的部署：
- en: '![](img/00286.jpeg)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00286.jpeg)'
- en: 'Once it has been successfully created, it will be reflected in your notifications
    list with a green-colored notification:'
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦成功创建，它将以绿色通知的形式反映在您的通知列表中：
- en: '![](img/00287.jpeg)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00287.jpeg)'
- en: 'Clicking on Go to resource will take you to the newly created Azure Function.
    The function console will look like this:'
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“转到资源”将带您进入新创建的 Azure 函数。函数控制台将看起来像这样：
- en: '![](img/00288.jpeg)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00288.jpeg)'
- en: We have successfully created an Azure Function. We will cover in more detail
    triggers, monitoring, and security in the forthcoming sections of this chapter.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已成功创建了一个 Azure 函数。我们将在本章的后续部分更详细地介绍触发器、监控和安全。
- en: Understanding triggers
  id: totrans-32
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解触发器
- en: 'In this section, we will look at how triggers work in Azures Function applications.
    We will also learn about the different types of triggers and their purpose. Perform
    the following steps:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将探讨 Azure 函数应用程序中触发器的工作原理。我们还将了解不同类型的触发器及其用途。执行以下步骤：
- en: 'In the left menu, click on the (+) symbol beside the Functions option for adding,
    removing, or editing a trigger:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧菜单中，点击“函数”选项旁边的 (+) 符号以添加、删除或编辑触发器：
- en: '![](img/00289.jpeg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00289.jpeg)'
- en: 'You will be taken to the function creation console, which looks like this:'
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将被带到函数创建控制台，其外观如下：
- en: '![](img/00290.jpeg)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00290.jpeg)'
- en: 'Azure does not have a lot of support for Python. So, in this console, let''s
    choose a custom function of our own. Click on Custom function under the Get Started
    on your own option at the bottom:'
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Azure 对 Python 的支持并不多。因此，在这个控制台中，让我们选择我们自己的自定义函数。在底部“自己开始”选项下点击“自定义函数”：
- en: '![](img/00291.jpeg)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00291.jpeg)'
- en: 'In the function creation wizard, enable the Experimental Language option in
    the right menu. Now, you will be able to see the Python option in the available
    languages:'
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在函数创建向导中，在右侧菜单中启用“实验性语言”选项。现在，您将能够在可用语言中看到 Python 选项：
- en: '![](img/00292.jpeg)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00292.jpeg)'
- en: 'There are two triggers that are available for the Python language. One is the
    HTTP trigger and the other is the Queue trigger**,** as seen in the following
    screenshot:'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于 Python 语言，有两个可用的触发器。一个是 HTTP 触发器，另一个是队列触发器**，如以下截图所示**：
- en: '![](img/00293.jpeg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00293.jpeg)'
- en: 'The HTTP trigger will trigger the function whenever it receives an HTTP request.
    When you click on it, you will notice options for adding different HTTP-related
    settings, such as authorization and name:'
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: HTTP 触发器会在接收到 HTTP 请求时触发函数。当您点击它时，您会注意到添加不同 HTTP 相关设置（如授权和名称）的选项：
- en: '![](img/00294.jpeg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00294.jpeg)'
- en: 'The next trigger is the Queue trigger. This will trigger the function whenever
    a message is added to the queue. We have done the same in AWS Lambda in one of
    our previous chapters too:'
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一个触发器是队列触发器。当队列中添加消息时，它将触发函数。我们也在我们之前的一个章节中在 AWS Lambda 中做了同样的事情：
- en: '![](img/00295.jpeg)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00295.jpeg)'
- en: Understanding logging and monitoring in Azures Functions
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解 Azure 函数中的日志记录和监控
- en: 'In this section, we will learn and understand the monitoring and logging mechanisms
    available to the user in Microsoft Azure Functions. Perform the following steps:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将学习和理解用户在 Microsoft Azure 函数中可用的监控和日志记录机制。执行以下步骤：
- en: 'By clicking on the Monitor option under the function, we can access the monitoring
    suite of that particular Azure Function:'
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过在函数下点击“监控”选项，我们可以访问特定 Azure 函数的监控套件：
- en: '![](img/00296.jpeg)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00296.jpeg)'
- en: 'The monitoring suite for the function that we created looks like this:'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们创建的函数的监控套件看起来如下：
- en: '![](img/00297.jpeg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00297.jpeg)'
- en: 'Now, click on the Open Application Insights option at the top of the menu.
    This will take you to the detailed monitoring page:'
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，点击菜单顶部的“打开应用洞察”选项。这将带您进入详细监控页面：
- en: '![](img/00298.jpeg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00298.jpeg)'
- en: 'If you scroll down, you will see the function-specific metrics, such as the
    server response times and request performance. This is very useful as it means
    we don''t need separate dashboards for monitoring all these statistics:'
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您向下滚动，您将看到特定于函数的指标，例如服务器响应时间和请求性能。这非常有用，因为它意味着我们不需要为监控所有这些统计数据而设置单独的仪表板：
- en: '![](img/00299.jpeg)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00299.jpeg)'
- en: Now that we have learned about Microsoft Azure Functions logging and monitoring,
    let's go through some best practices.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 既然我们已经了解了 Microsoft Azure 函数的日志记录和监控，让我们来探讨一些最佳实践。
- en: Best practices for writing Azure Functions
  id: totrans-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 编写 Azure 函数的最佳实践
- en: 'We have learned how to create, configure, and deploy Microsoft Azure Functions.
    We will now learn about the best practices for using them:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经学习了如何创建、配置和部署 Microsoft Azure Functions。现在我们将学习使用它们的最佳实践：
- en: 'Microsoft Azure Functions don''t have a huge support for Python like AWS Lambda.
    They have a very limited set of Python-based triggers. So, you need to write custom
    functions for most of them. Developers need to keep that in mind before taking
    a decision on using Microsoft Azure Functions. The languages supported by Microsoft
    Azure Functions are C#, F#, and JavaScript:'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与 AWS Lambda 相比，Microsoft Azure Functions 对 Python 的支持并不广泛。它们有一组非常有限的基于 Python
    的触发器。因此，您需要为大多数功能编写自定义函数。开发者在做出使用 Microsoft Azure Functions 的决定之前需要牢记这一点。Microsoft
    Azure Functions 支持的语言有 C#、F# 和 JavaScript：
- en: '![](img/00300.jpeg)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00300.jpeg)'
- en: 'The experimental languages that are supported by Microsoft Azure Functions
    are Bash, Batch, PHP, TypeScript, Python, and PowerShell:'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microsoft Azure Functions 支持的实验性语言包括 Bash、Batch、PHP、TypeScript、Python 和 PowerShell：
- en: '![](img/00301.jpeg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00301.jpeg)'
- en: 'Make sure you use the security settings properly to secure your functions.
    You can find all the settings you need in the Platform features options:'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保您正确使用安全设置以保护您的功能。您可以在平台功能选项中找到您需要的所有设置：
- en: '![](img/00302.jpeg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00302.jpeg)'
- en: Finally, use monitoring as much as possible, as it is crucial to log and monitor
    serverless functions. We have already gone through the monitoring details and
    the corresponding settings.
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，尽可能多地使用监控，因为它对于记录和监控无服务器功能至关重要。我们已经了解了监控细节和相应的设置。
- en: Summary
  id: totrans-68
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we learned about Microsoft Azure Functions and how to build
    them. We  learned about the various functionalities available, along with the
    available triggers for the Python runtime. We also learned and experimented with
    the logging and monitoring capabilities of Microsoft Azure Functions along with
    understanding and experimenting with the experimental features of Azure such as
    the additional runtimes apart from the standard set of languages it offers out
    of the box.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了 Microsoft Azure Functions 以及如何构建它们。我们了解了可用的各种功能，以及 Python 运行时的可用触发器。我们还学习了
    Microsoft Azure Functions 的日志记录和监控功能，并了解了 Azure 的实验性功能，例如除了它提供的标准语言集之外的附加运行时。我们进行了实验：
