<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:pls="http://www.w3.org/2005/01/pronunciation-lexicon" xmlns:ssml="http://www.w3.org/2001/10/synthesis">
<head>
  <meta charset="UTF-8"/>
  <title>Modules and Packages</title>
  <link type="text/css" rel="stylesheet" media="all" href="style.css"/>
  <link type="text/css" rel="stylesheet" media="all" href="core.css"/>
</head>
<body>
  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">Modules and Packages</h1>
            </header>

            <article>
                
<p>In the previous chapter, you learned about the Python functions. In this chapter, you will learn the Python modules. A Python module is the Python source file, which can consist of statements, classes, functions, and variables.&#160;</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">Modules </h1>
            </header>

            <article>
                
<p>Modules are code files meant to be used by other programs. In order to use a module, we use the&#160;<kbd>import</kbd> statement. A module can import other modules.&#160;</p>
<p>Let's discuss the simple Python program:</p>
<pre>def sum1(a,b):<br/> c = a+b<br/> return c<br/><br/>def mul1(a,b):<br/> c = a*b<br/> return c
</pre>
<p>The preceding code is a very easy and basic example. Let's save the program as <kbd>module1.py</kbd>. You can consider that the preceding program is the Python module. We will&#160;use <kbd>module1.py</kbd>. Consider, while making another program, you need multiplication or addition of two numbers. You need not make any function. You can take the advantage of&#160;<kbd>module1.py</kbd>.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">The import statement</h1>
            </header>

            <article>
                
<p>In order to use the functions and variables of the&#160;<kbd>module1.py</kbd> program, we will&#160;use the&#160;<kbd>import</kbd> statement. The syntax of the&#160;<kbd>import</kbd> statement is shown here:</p>
<pre>Import module1, module2, module 
</pre>
<p>In this way, you can import multiple modules. Let's make another program <kbd>mod1.py</kbd>, which will&#160;import <kbd>module1.py</kbd>:</p>
<pre> import module1<br/> x = 12<br/> y = 34<br/> print "Sum is ", module1.sum1(x,y)<br/> print "Multiple is ", module1.mul1(x,y)
</pre>
<p>As you know, the module contains statements and definitions and these statements and <span>definitions</span> are executed for the&#160;first time when the interpreter encounters the module name in the&#160;<kbd>import</kbd> statement. &#160;&#160;</p>
<p style="padding-left: 30px">In preceding code, the&#160;<kbd>module1</kbd> module gets&#160;executed when the interpreter encounters the&#160;<kbd>module1</kbd> name in the&#160;<kbd>import</kbd> statement. &#160;In order to use the module variables and functions, use the&#160;<kbd>module_name.variable</kbd>&#160;and <kbd>module_name.function()</kbd>&#160;notations. In the preceding code, we want to use the&#160;<kbd>sum1()</kbd> function of <kbd>module1</kbd>, that's why we use <kbd>module1.mul1()</kbd>.</p>
<p>Let's see the output:</p>
<div class="CDPAlignCenter CDPAlign"><img class="image-border" src="images/mod1.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of the mod1.py program</div>
<p>If you think it is tedious and time consuming to write <kbd>module1</kbd> with every function of <kbd>module1.py</kbd>, then Python allows you to use the&#160;<kbd>as</kbd> statement as shown. The syntax is given as follows:&#160;</p>
<pre>import module_name as new_name
</pre>
<p>Let's write a program <kbd>mod2.py</kbd>:</p>
<pre>import module1 as md<br/>x = 12<br/>y = 34<br/>print "Sum is ", md.sum1(x,y)<br/>print "Multiple is ", md.mul1(x,y)
</pre>
<p>In the preceding code,&#160;<kbd>module1</kbd> is used as <kbd>md</kbd>. Let's see the output:</p>
<div class="CDPAlignCenter CDPAlign"><img class="image-border" src="images/mod2.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of the mod2.py program</div>
<p>You can explicitly define the function as per your need. Consider we want only the&#160;<kbd>sum1()</kbd> function not <kbd>mul1()</kbd>. Syntax is given as <em>module-name import function-name</em></p>
<p>Let's write the code:</p>
<pre> from module1 import sum1<br/> x = 12<br/> y = 34<br/> print "Sum is ", sum1(x,y)
</pre>
<p>In the first line, I defined from where I am taking the&#160;<kbd>sum1()</kbd> function, then there will be no need to use <kbd>module1</kbd> with the function name. Let's see the output of the code:</p>
<div class="CDPAlignCenter CDPAlign"><img class="image-border" src="images/mod3.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of the mod3 program</div>
<p>Consider a module that contains many functions and you have to import all the functions. You can use the following statement as shown:</p>
<pre>from module-name import *
</pre>
<p>But I advise you don't use the preceding statement because if you are importing more than one module, then it is very difficult to identify which function is taken from which module. Let's take an example. Consider one more module named as <kbd>module2</kbd>:</p>
<pre>def sub1(a,b):<br/>    c = a-b<br/>    return c<br/><br/>def divide1(a,b):<br/>    c = a/b<br/>    return c
</pre>
<p>Now we have two modules&#160;<kbd>module1</kbd> and <kbd>module2</kbd>. We have defined <kbd>module1</kbd> earlier. Let's write the next program <kbd>mod4.py</kbd>:</p>
<pre> from module1 import *<br/> from module2 import *<br/> x = 36<br/> y = 12<br/> print "Sum is ", sum1(x,y)<br/> print "Substraction is ", sub1(x,y)<br/> print "after divide ", divide1(x,y)<br/> print "Multiplication is ", mul1(x,y)
</pre>
<p>In the preceding function, we imported all the functions of <kbd>module1</kbd> and <kbd>module2</kbd>. But it is very difficult to identify which function is coming from which module. The output of the program is as shown here:</p>
<div class="CDPAlignCenter CDPAlign"><img class="image-border" src="images/mod4.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of the mod4 program</div>
<p>However, Python offers you the built-in function <kbd>dir()</kbd>, which can be used to identify the functions. See the example <kbd>mod5.py</kbd>:</p>
<pre> import module1<br/> print dir(module1)
</pre>
<p>The output of the program is as shown here:</p>
<div class="CDPAlignCenter CDPAlign"><img class="image-border" src="images/mod5.jpg"/></div>
<p style="padding-left: 30px">The preceding is the output of the&#160;<kbd>mod5</kbd> program. After seeing the output, we can say that the&#160;<kbd>mul1()</kbd> and <kbd>sum1()</kbd> functions came from the&#160;<kbd>module1</kbd>&#160;module.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">Locating Python modules</h1>
            </header>

            <article>
                
<p>After encountering the&#160;<kbd>import</kbd> statement, the Python interpreter searches the module in the following sequence:</p>
<ol>
<li>The current directory, which contains the running script. I advise you, be sure, that the name of your program is different from the importing modules.</li>
<li><kbd>PYTHONPATH</kbd>&#160;has to be defined in the environment variable in Windows OS. Let's learn by example. Consider we move the&#160;<kbd>mod5.py</kbd> program to another directory as covered in the following&#160;screenshot.</li>
</ol>
<p style="padding-left: 90px">But the current directory does not contain any&#160;<kbd>module1</kbd>&#160;module. The output will&#160;be as shown here:</p>
<div class="CDPAlignCenter CDPAlign"><img class="image-border" src="images/Pythonpath1.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of mod5.py &#160;in a different directory&#160;</div>
<p style="padding-left: 90px">We are running the&#160;<kbd>mod5.py</kbd> program from <kbd>F:project_7daysmodulepack</kbd>. The output shown there is no&#160;<kbd>module1</kbd> module found. Let's set the <kbd>PYTHONPATH</kbd> variable as shown here:</p>
<div class="CDPAlignCenter CDPAlign"><img class="image-border" src="images/Pythonpathsetting.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Setting the PYTHONPATH variable</div>
<p style="padding-left: 90px">After setting <kbd>PYTHONPATH</kbd>, you will&#160;have to reboot your computer. After reboot, start the program again.</p>
<p style="padding-left: 90px"><span>The output will&#160;be as shown&#160;here:</span></p>
<div class="CDPAlignCenter CDPAlign"><img height="125" width="666" class="image-border" src="images/Pythonpath2.jpg"/></div>
<p style="padding-left: 90px">This is the output of the program after setting <kbd>PYTHONPATH</kbd>. Now you can see that there is no error, meaning the interpreter is able to find the&#160;<kbd>module1</kbd>&#160;module.</p>
<ol start="3">
<li>Here you have Python installed by default. If you want to know the installation path, you can check the <kbd>sys.path</kbd> variable in the&#160;<kbd>sys</kbd> module. Refer to&#160;the following example:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="321" width="395" class="image-border" src="images/syspath.jpg"/></div>
<div class="packt_figref CDPAlignCenter">A screenshot showing sys path</div>
<p>The <kbd>sys.path</kbd> returns a list of default paths.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">Compiled Python files</h1>
            </header>

            <article>
                
<p>Whenever <kbd>module1.py</kbd> and <kbd>module2.py</kbd> are successfully compiled, an attempt is made to write the compiled version to <kbd>module1.pyc</kbd> and <kbd>module2.pyc</kbd> respectively. Refer to&#160;the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img height="239" width="392" class="image-border" src="images/complied.jpg"/></div>
<div class="packt_figref CDPAlignCenter">A screenshot showing the compiled files</div>
<p>The contents of the compiled file is platform independent, so a Python module can be used by machines on different architectures.</p>
<p>Let's discuss a special scenario, consider Bob make a program named <kbd>myprog.py</kbd> as shown:</p>
<pre>def sum1(a,b):<br/>  c = a+b<br/>  return c<br/>  print "Sum is ", sum1(3,6)
</pre>
<p>Let's run it:</p>
<div class="CDPAlignCenter CDPAlign"><img height="101" width="522" class="image-border" src="images/main1.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of the myprog.py program</div>
<p>Bob's &#160;program is running successfully. Consider another user, Alice, who uses your program as a&#160;module.</p>
<p>Refer to Alice's program <kbd>alice1.py</kbd>:</p>
<pre>import myprog<br/>num = 10<br/>total = num+myprog.sum1(23,12)<br/>print "Alice total is ", total
</pre>
<p>The preceding program is very simple, just import <kbd>myprog.py</kbd> as a module and use the <kbd>sum1()</kbd> function of the&#160;<kbd>myprog</kbd> module. Let's see the output:</p>
<div class="CDPAlignCenter CDPAlign"><img class="image-border" src="images/main22.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of the alice1.py program</div>
<p>The program is running successfully. With the output from&#160;<kbd>alice1.py</kbd> the output of <kbd>myprog.py</kbd> is also printed, which is unwanted. Any user who imports&#160;<kbd>myprog.py</kbd> as a module unwantedly would get the output of <kbd>myprog.py</kbd>.&#160; To avoid this situation, we made some amendments in <kbd>myprog.py</kbd>.</p>
<p>You can see&#160;the new version of program <kbd>myprog.py</kbd>&#160;here:</p>
<pre>def sum1(a,b):<br/> c = a+b<br/> return c<br/><br/>if __name__ == '__main__' :<br/> print "Sum is ", sum1(3,6)
</pre>
<p>From the preceding code, what is&#160;the significance of <kbd>__name__</kbd> and <kbd>__main__</kbd>.&#160;<kbd>__name__</kbd> is a special variable that holds a string &#160;<kbd>"__main__"</kbd>. &#160;If the program is being imported from another program, then&#160;<kbd>__name__</kbd> would &#160;be set to the module's name.</p>
<p>Let's see the output of both the programs&#160;<kbd>myprog.py</kbd> and <kbd>alice1.py</kbd>:</p>
<div class="CDPAlignCenter CDPAlign"><img height="163" width="629" class="image-border" src="images/main2.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of the myprog.py and alice1.py programs</div>
<p>If you are still not getting the point of the&#160;<kbd>__name__</kbd> variable, let's discuss with examples. I have made temporary changes in the&#160;<kbd>myprog.py</kbd>&#160;program:</p>
<pre>def sum1(a,b):<br/> c = a+b<br/> return c<br/><br/>print "name is ", __name__<br/><br/>if __name__ == '__main__' :<br/> print "Sum is ", sum1(3,6)
</pre>
<p>Let's run both the programs&#160;<kbd>myprog.py</kbd> and <kbd>alice1.py</kbd>:</p>
<div class="CDPAlignCenter CDPAlign"><img height="154" width="607" class="image-border" src="images/main3.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of &#160;the myprog.py and alice1.py programs</div>
<p>So, in the preceding output, when <kbd>myprog.py</kbd> is being run, the&#160;<kbd>__name__</kbd> variable returns a string value <kbd>"__main__"</kbd>. Further, when <kbd>myprog</kbd> has been imported by another program as a module, then it returns&#160;a module named&#160;<kbd>myprog</kbd>. I hope everything is clear now.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">The Python package</h1>
            </header>

            <article>
                
<p style="padding-left: 30px">Python modules is a single file, whereas a Python package is a collection of modules. A package is a directory that&#160;contains Python modules and one additional file:&#160;<kbd>__init__.py</kbd>. What is the need of a package? Consider a team gets a project to convert the&#160;recording sound into MP3 format. One developer writes&#160;a code <kbd>rectomp3.py</kbd> to convert the recording voice to MP3 sound in the&#160;<kbd>sound_conversion</kbd>&#160;directory. After some time, the team gets new requirements to convert the recording voice to <kbd>.wav</kbd> format. Instead of writing in the&#160;<kbd>rectomp3.py</kbd> file, we write our own code&#160;<kbd>rectowav.py</kbd>&#160;file in <kbd>sound_conversion</kbd>. Then, a new requirement comes by where you need to convert&#160;the recording to WMA format. Again, a new author writes a new code <kbd>rectowma.py</kbd> file in the same directory <kbd>sound_conversion</kbd>. In this way, they make a package just adding one more file <kbd>__init__.py</kbd>. Let's take a&#160;practical example.</p>
<p>Here, you can see&#160;the code <kbd>rectomp3.py</kbd> in <kbd>sound_conversion</kbd>:</p>
<pre> #Written by Mohit<br/> def rec2mp3():<br/>    """<br/>    Converions code<br/>    """<br/>    return "recording voice converted to Mp3"
</pre>
<p>The preceding code is a dummy code, just for understanding. Let's see the second code <kbd>rectowav.py</kbd> in the same directory <kbd>sound_conversion</kbd>:</p>
<pre> #Written by Bhaskar<br/> def rec2wav():<br/>   """<br/>   Converions code<br/>   """<br/>   return"recording voice converted to wav"
</pre>
<p>The preceding code converts the recording voice to WAV format. Let's see the new code:</p>
<pre>#Written by Denim<br/>def rec2wma():<br/>  """<br/>  Converions code<br/>  """<br/>  return "recording voice converted to wma"
</pre>
<p>Now that all the code is written, make an empty file <kbd>__init__.py</kbd> in the directory <kbd>sound_conversion</kbd>. The <kbd>__init__.py</kbd>&#160;file can be an empty file, but it can also be used to import the module.&#160; Now our package is ready; let's import it. We will&#160;write a new program <kbd>voice_changer.py</kbd>. Put the program outside the directory <kbd>sound_conversion</kbd>. Refer to&#160;the program:</p>
<pre>from sound_conversion import rectomp3<br/>from sound_conversion.rectowma import rec2wma<br/>print rectomp3.rec2mp3()<br/>print rec2wma()
</pre>
<p>While executing the preceding file, the interpreter might give an error because the Python interpreter doesn't&#160;know the <kbd>sound_conversion</kbd> path as shown.</p>
<p>Set the <kbd>PYTHONPATH</kbd> as shown here:</p>
<div class="CDPAlignCenter CDPAlign"><img class="image-border" src="images/package1.jpg"/></div>
<p>The preceding screenshot also shows that the code is running. If you want to create <kbd>voice_changer.py</kbd> in another directory say <kbd>F:/</kbd>, let's copy and paste the code of <kbd>voice_changer.py</kbd> in <kbd>F:/</kbd> and run it. You might get an&#160;error if the interpreter is&#160;not able to find the package as shown here:</p>
<div class="CDPAlignCenter CDPAlign"><img class="image-border" src="images/packagerror.jpg"/></div>
<div class="packt_figref CDPAlignCenter">An output showing error</div>
<p>In the preceding code, we are getting the error <kbd>No module named sound_conversion</kbd>, which means the interpreter did not get the package or module. Let's edit the code. Refer to&#160;the code shown here:</p>
<pre> import sys<br/> sys.path.append("F:project_7daysmodulepackprograms")<br/> from sound_conversion import rectomp3<br/> from sound_conversion.rectowma import rec2wma<br/> print rectomp3.rec2mp3()<br/> print rec2wma()
</pre>
<p>In the&#160;<kbd>voice_changer1.py</kbd>&#160;program, we edit the <kbd>sys.path</kbd> for the program using <kbd>syntax sys.path.append("F:project_7daysmodulepackprograms")</kbd>&#160;. Let's see the output:</p>
<div class="CDPAlignCenter CDPAlign"><img class="image-border" src="images/pythonpaackgetlast.jpg"/></div>
<div class="packt_figref CDPAlignCenter">Output of the voice_chnager1.py program</div>
<p>The preceding screenshot shows that the&#160;code is running successfully. In this way, you can load the package and modules.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>


  <div id="sbo-rt-content"><section>

            <header>
                <h1 class="header-title">Summary</h1>
            </header>

            <article>
                
<p>In the&#160;<em>Module</em> section, you have learned how to make modules and how to import them. By using the&#160;<kbd>dir()</kbd> function, you can check the involved function in the modules. The Python package is a&#160;collection of modules: generally a Python package is a&#160;directory. You have learned how Python searches the modules and packages.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </div>
</body>
</html>