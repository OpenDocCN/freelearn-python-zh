<html><head></head><body>
<div id="_idContainer010">
<h1 class="chapter-number" id="_idParaDest-15"><a id="_idTextAnchor014"/><span class="koboSpan" id="kobo.1.1">1</span></h1>
<h1 id="_idParaDest-16"><a id="_idTextAnchor015"/><span class="koboSpan" id="kobo.2.1">Developing Trading Strategies – Why They Are Different</span></h1>
<p><span class="koboSpan" id="kobo.3.1">For many years, I traded in various markets, educated developers in trading, and taught some essential programming and algorithm (algo) development to traders. </span><span class="koboSpan" id="kobo.3.2">Eventually, I concluded that the main problem for both groups (the developers and traders) was not a lack of knowledge in programming, but an incorrect or insufficient understanding of the subject domain, that is, financial markets and </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">their mechanics.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">This was quite a surprise for me. </span><span class="koboSpan" id="kobo.5.2">I thought that coding, debugging, and handling errors should be the main obstacle, but in reality, the problem is in finding useful, correct, and adequate information about markets, their structure, and operations, especially in regard to algo trading. </span><span class="koboSpan" id="kobo.5.3">I don’t mean that it’s somehow undisclosed or otherwise hidden from the general audience – not at all. </span><span class="koboSpan" id="kobo.5.4">The problem is that it’s really hard to find a source that not only covers everything – from the market structure to money and risk management – but also shows clear connections between very specific features of a market and less-specific features that a trading algorithm should have in order to be successful in </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">this market.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">For example, many authors consider entries and exits in a trading strategy as something that can be executed immediately and with equal success at any moment, any time of the day. </span><span class="koboSpan" id="kobo.7.2">However, in the real market, this is not the case. </span><span class="koboSpan" id="kobo.7.3">I saw lots of strategies that only worked </span><em class="italic"><span class="koboSpan" id="kobo.8.1">on paper</span></em><span class="koboSpan" id="kobo.9.1"> because their developers didn’t take into consideration the fact that they were dealing with a real, complex structure with lots of limitations and shortcomings, and not with an abstract </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">idealistic model.</span></span></p>
<p><span class="koboSpan" id="kobo.11.1">This example is really primitive, but I hope it explains the most important point that is missed by many researchers and developers: we do not deal with abstract datasets and time series where each data point has an equal value and where any action can be taken at any moment with equal possibility; we work with a very complex structure that has lots of features that make this structure a </span><em class="italic"><span class="koboSpan" id="kobo.12.1">dynamic non-stationary system</span></em><span class="koboSpan" id="kobo.13.1">. </span><span class="koboSpan" id="kobo.13.2">And to be successful in algo trading, these features should be </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">accounted for.</span></span></p>
<p><span class="koboSpan" id="kobo.15.1">Without knowing how markets are organized and how they operate, our trading algorithms will inevitably fail sooner </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">or later.</span></span></p>
<p><span class="koboSpan" id="kobo.17.1">If put in a more positive manner, understanding the market will help us in making trading algorithms </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">more robust.</span></span></p>
<p><span class="koboSpan" id="kobo.19.1">This book is my humble attempt to bridge the gap between the world of quantitative trading (driven by numbers) and the real market (driven by humans). </span><span class="koboSpan" id="kobo.19.2">I am convinced that today, any long-term success in trading can be achieved only with good knowledge </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">of both.</span></span></p>
<p><span class="koboSpan" id="kobo.21.1">Let’s begin with the basics. </span><span class="koboSpan" id="kobo.21.2">We will learn about the very basic market terminology and the essential concept of a trading strategy, get familiar with the risk in various forms and aspects with a special focus on ordering and transactional risk, and also mention market data processing in a very </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">general sense.</span></span></p>
<p><span class="koboSpan" id="kobo.23.1">In this chapter, we will discuss the </span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.25.1">Trading strategies – it’s all about how you </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">manage risk</span></span></li>
<li><span class="koboSpan" id="kobo.27.1">Automated trading – operational risk and </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">regulatory limitations</span></span></li>
<li><span class="koboSpan" id="kobo.29.1">Making actual trading decisions – trading logic and </span><span class="No-Break"><span class="koboSpan" id="kobo.30.1">credit risk</span></span></li>
<li><span class="koboSpan" id="kobo.31.1">Ordering – </span><span class="No-Break"><span class="koboSpan" id="kobo.32.1">transactional risk</span></span></li>
<li><span class="koboSpan" id="kobo.33.1">The general architecture of a </span><span class="No-Break"><span class="koboSpan" id="kobo.34.1">trading application</span></span></li>
</ul>
<h1 id="_idParaDest-17"><a id="_idTextAnchor016"/><span class="koboSpan" id="kobo.35.1">Trading strategies – it’s all about how you manage risk</span></h1>
<p><span class="koboSpan" id="kobo.36.1">Let’s start from the beginning by giving definitions. </span><span class="koboSpan" id="kobo.36.2">I know it sounds like an academic textbook, but I promise that it’s going to get more and more interesting </span><span class="No-Break"><span class="koboSpan" id="kobo.37.1">very quickly.</span></span></p>
<p><span class="koboSpan" id="kobo.38.1">According to </span><a id="_idIndexMarker000"/><span class="koboSpan" id="kobo.39.1">Investopedia (</span><a href="https://www.investopedia.com/terms/t/trade.asp"><span class="koboSpan" id="kobo.40.1">https://www.investopedia.com/terms/t/trade.asp</span></a><span class="koboSpan" id="kobo.41.1">), </span><strong class="bold"><span class="koboSpan" id="kobo.42.1">trade</span></strong><span class="koboSpan" id="kobo.43.1"> is “</span><em class="italic"><span class="koboSpan" id="kobo.44.1">the voluntary exchange of goods or services between different economic actors</span></em><span class="koboSpan" id="kobo.45.1">.” </span><span class="koboSpan" id="kobo.45.2">This means that if I exchange </span><a id="_idIndexMarker001"/><span class="koboSpan" id="kobo.46.1">my money for meat or vegetables, then I am at a grocery market. </span><span class="koboSpan" id="kobo.46.2">If I exchange my money for obligations to buy or sell live cattle or wheat in the future, then I am in a derivatives market. </span><span class="koboSpan" id="kobo.46.3">And if I exchange my money for another type of money, I am in the </span><strong class="bold"><span class="koboSpan" id="kobo.47.1">foreign exchange</span></strong><span class="koboSpan" id="kobo.48.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.49.1">forex or </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.50.1">FX market</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.51.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.52.1">What I buy and sell in a particular market is called an </span><strong class="bold"><span class="koboSpan" id="kobo.53.1">asset</span></strong><span class="koboSpan" id="kobo.54.1">. </span><span class="koboSpan" id="kobo.54.2">If I buy or sell something that can be </span><a id="_idIndexMarker002"/><span class="koboSpan" id="kobo.55.1">delivered (wheat, gold, stocks, or even money) it’s called the </span><strong class="bold"><span class="koboSpan" id="kobo.56.1">underlying</span></strong><span class="koboSpan" id="kobo.57.1">. </span><span class="koboSpan" id="kobo.57.2">If I buy or sell an </span><a id="_idIndexMarker003"/><span class="koboSpan" id="kobo.58.1">obligation or the right to buy or sell the underlying at a certain price in the future, then it’s called </span><span class="No-Break"><span class="koboSpan" id="kobo.59.1">a </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.60.1">derivative</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.61.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.62.1">Underlying and derivatives are traded at </span><strong class="bold"><span class="koboSpan" id="kobo.63.1">trading venues</span></strong><span class="koboSpan" id="kobo.64.1"> – previously, physical locations such as </span><a id="_idIndexMarker004"/><span class="koboSpan" id="kobo.65.1">exchanges, but today, more electronic networks where traders, liquidity providers, market makers, and other market participants match </span><span class="No-Break"><span class="koboSpan" id="kobo.66.1">their orders.</span></span></p>
<p><span class="koboSpan" id="kobo.67.1">If I went to a grocery market to sell potatoes, then I am on the </span><strong class="bold"><span class="koboSpan" id="kobo.68.1">sell side</span></strong><span class="koboSpan" id="kobo.69.1">. </span><span class="koboSpan" id="kobo.69.2">If I came to buy potatoes, I am on the </span><strong class="bold"><span class="koboSpan" id="kobo.70.1">buy side</span></strong><span class="koboSpan" id="kobo.71.1">. </span><span class="koboSpan" id="kobo.71.2">In financial markets, buy-side market participants are mostly referred to as </span><strong class="bold"><span class="koboSpan" id="kobo.72.1">price takers</span></strong><span class="koboSpan" id="kobo.73.1"> (because they can only take prices offered by the sell side), and </span><a id="_idIndexMarker005"/><span class="koboSpan" id="kobo.74.1">sell-side market participants </span><a id="_idIndexMarker006"/><span class="koboSpan" id="kobo.75.1">are referred to as </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.76.1">price givers</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.77.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.78.1">Not all trading venues welcome everyone as a direct participant. </span><span class="koboSpan" id="kobo.78.2">Most of them work via a network of </span><strong class="bold"><span class="koboSpan" id="kobo.79.1">brokers</span></strong><span class="koboSpan" id="kobo.80.1"> – entities that accept orders from their clients and route them to one or more trading venues, possibly internally netting client positions and sometimes even acting as the counterparty for </span><span class="No-Break"><span class="koboSpan" id="kobo.81.1">their clients.</span></span></p>
<p><span class="koboSpan" id="kobo.82.1">In </span><a href="B19145_03.xhtml#_idTextAnchor044"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.83.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.84.1">, </span><em class="italic"><span class="koboSpan" id="kobo.85.1">FX Market Overview from a Developer’s Standpoint</span></em><span class="koboSpan" id="kobo.86.1">, we will consider all these entities in more detail to see why we should pay particular attention to their behavior and how to actually use them to make our trading strategies </span><span class="No-Break"><span class="koboSpan" id="kobo.87.1">more robust.</span></span></p>
<p><span class="koboSpan" id="kobo.88.1">Let’s proceed with a very quick look into the essence of a trading strategy and see the main risks that are natural to the systematic or algo </span><span class="No-Break"><span class="koboSpan" id="kobo.89.1">trading business.</span></span></p>
<h2 id="_idParaDest-18"><a id="_idTextAnchor017"/><span class="koboSpan" id="kobo.90.1">Trading strategies – how we make money in financial markets</span></h2>
<p><span class="koboSpan" id="kobo.91.1">A trading strategy is a set of </span><a id="_idIndexMarker007"/><span class="koboSpan" id="kobo.92.1">rules that tells me when to buy and when to sell the asset if I am on the buy side, or when and how much to offer to the market if I am on the sell side. </span><span class="koboSpan" id="kobo.92.2">But in any case, </span><em class="italic"><span class="koboSpan" id="kobo.93.1">the ultimate goal of a trading strategy is to </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.94.1">make money</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.95.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.96.1">If I am on the buy side, I can make money only in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.97.1">two ways:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.98.1">I buy low and I sell high, or vice versa (earning on the </span><span class="No-Break"><span class="koboSpan" id="kobo.99.1">price difference)</span></span></li>
<li><span class="koboSpan" id="kobo.100.1">I buy and </span><span class="No-Break"><span class="koboSpan" id="kobo.101.1">receive dividends</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.102.1">The former is called </span><strong class="bold"><span class="koboSpan" id="kobo.103.1">active trading</span></strong><span class="koboSpan" id="kobo.104.1">, and the latter is </span><a id="_idIndexMarker008"/><span class="koboSpan" id="kobo.105.1">normally called </span><strong class="bold"><span class="koboSpan" id="kobo.106.1">investing</span></strong><span class="koboSpan" id="kobo.107.1">, or getting </span><a id="_idIndexMarker009"/><span class="koboSpan" id="kobo.108.1">passive income. </span><span class="koboSpan" id="kobo.108.2">In this book, we will consider only </span><span class="No-Break"><span class="koboSpan" id="kobo.109.1">active trading.</span></span></p>
<p><span class="koboSpan" id="kobo.110.1">There are two major classes of active trading strategies on the buy side. </span><span class="koboSpan" id="kobo.110.2">The first one is called </span><strong class="bold"><span class="koboSpan" id="kobo.111.1">directional trading</span></strong><span class="koboSpan" id="kobo.112.1"> and in </span><a id="_idIndexMarker010"/><span class="koboSpan" id="kobo.113.1">essence, it’s when we buy, wait, and sell. </span><span class="koboSpan" id="kobo.113.2">If we manage to sell at a price greater </span><a id="_idIndexMarker011"/><span class="koboSpan" id="kobo.114.1">than the price at which we bought, we </span><span class="No-Break"><span class="koboSpan" id="kobo.115.1">make money.</span></span></p>
<p><span class="koboSpan" id="kobo.116.1">The second class </span><a id="_idIndexMarker012"/><span class="koboSpan" id="kobo.117.1">of buy-side trading strategies is </span><strong class="bold"><span class="koboSpan" id="kobo.118.1">arbitrage</span></strong><span class="koboSpan" id="kobo.119.1">. </span><span class="koboSpan" id="kobo.119.2">Such a strategy identifies moments when the same </span><a id="_idIndexMarker013"/><span class="koboSpan" id="kobo.120.1">asset is priced differently at different trading venues (so-called </span><em class="italic"><span class="koboSpan" id="kobo.121.1">real</span></em><span class="koboSpan" id="kobo.122.1"> or </span><em class="italic"><span class="koboSpan" id="kobo.123.1">pure</span></em><span class="koboSpan" id="kobo.124.1"> arbitrage), or when there is a tradable difference between the price of the underlying and a derivative, different derivatives, or even more complex setups that </span><a id="_idIndexMarker014"/><span class="koboSpan" id="kobo.125.1">consist of multiple instruments (so-called </span><strong class="bold"><span class="koboSpan" id="kobo.126.1">statistical arbitrage</span></strong><span class="koboSpan" id="kobo.127.1"> or </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.128.1">stat arb</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.129.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.130.1">Sounds a bit overwhelming? </span><span class="koboSpan" id="kobo.130.2">Don’t worry, we will now consider each case in </span><span class="No-Break"><span class="koboSpan" id="kobo.131.1">more detail.</span></span></p>
<h2 id="_idParaDest-19"><a id="_idTextAnchor018"/><span class="koboSpan" id="kobo.132.1">Trading app – what can be simpler?</span></h2>
<p><span class="koboSpan" id="kobo.133.1">At this point, if you have sufficient experience in application development and a reasonable knowledge of markets, you might exclaim </span><span class="No-Break"><span class="koboSpan" id="kobo.134.1">the following:</span></span></p>
<p><span class="koboSpan" id="kobo.135.1">“</span><em class="italic"><span class="koboSpan" id="kobo.136.1">Why do we need all this? </span><span class="koboSpan" id="kobo.136.2">It is so easy to build a trading application: you only need to get market data, calculate entry and exit orders, and send them to </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.137.1">the broker!</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.138.1">”</span></span></p>
<p><span class="koboSpan" id="kobo.139.1">So, the suggested general </span><a id="_idIndexMarker015"/><span class="koboSpan" id="kobo.140.1">architecture of a trading application from that standpoint may look as simple </span><span class="No-Break"><span class="koboSpan" id="kobo.141.1">as this:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer007">
<span class="koboSpan" id="kobo.142.1"><img alt="Figure 1.1 – Initial architecture of a trading application" src="image/B19145_1_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.143.1">Figure 1.1 – Initial architecture of a trading application</span></p>
<p><span class="koboSpan" id="kobo.144.1">However, as we will see very soon, this is an overly simplified view and it lacks at least one key feature that makes developing trading strategies different from developing other applications: it doesn’t include </span><span class="No-Break"><span class="koboSpan" id="kobo.145.1">risk management.</span></span></p>
<h2 id="_idParaDest-20"><a id="_idTextAnchor019"/><span class="koboSpan" id="kobo.146.1">So, what about that risk?</span></h2>
<p><span class="koboSpan" id="kobo.147.1">Before discussing ways to make money in trading, let’s first pay closer attention to avoiding losses – at least because according to all statistics, more than 70% of active traders, unfortunately, </span><span class="No-Break"><span class="koboSpan" id="kobo.148.1">lose money.</span></span></p>
<p><span class="koboSpan" id="kobo.149.1">Before we proceed, let me note that the following classification of risks does not fully correspond to official legal and academic classifications. </span><span class="koboSpan" id="kobo.149.2">This informal classification is used here for the sake of simplicity, to sort out rather complex matters quickly and with an acceptable degree </span><span class="No-Break"><span class="koboSpan" id="kobo.150.1">of comfort.</span></span></p>
<p><span class="koboSpan" id="kobo.151.1">All risks in active trading can be generally put into three major categories, </span><span class="No-Break"><span class="koboSpan" id="kobo.152.1">as follows:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.153.1">Operational risks</span></strong><span class="koboSpan" id="kobo.154.1"> are those </span><a id="_idIndexMarker016"/><span class="koboSpan" id="kobo.155.1">associated with how you </span><a id="_idIndexMarker017"/><span class="koboSpan" id="kobo.156.1">place trades and depend on your own business procedures as well as third parties, such as brokers, trading venues, </span><span class="No-Break"><span class="koboSpan" id="kobo.157.1">and regulators.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.158.1">Systemic risks</span></strong><span class="koboSpan" id="kobo.159.1"> are those </span><a id="_idIndexMarker018"/><span class="koboSpan" id="kobo.160.1">pertaining to the very </span><a id="_idIndexMarker019"/><span class="koboSpan" id="kobo.161.1">market itself and the logic of a </span><span class="No-Break"><span class="koboSpan" id="kobo.162.1">trading strategy.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.163.1">Transactional risks</span></strong><span class="koboSpan" id="kobo.164.1"> are those </span><a id="_idIndexMarker020"/><span class="koboSpan" id="kobo.165.1">that make the execution </span><a id="_idIndexMarker021"/><span class="koboSpan" id="kobo.166.1">of orders different from expectations; this is the main reason why many strategies that work </span><em class="italic"><span class="koboSpan" id="kobo.167.1">on paper</span></em><span class="koboSpan" id="kobo.168.1"> are unable to make money </span><span class="No-Break"><span class="koboSpan" id="kobo.169.1">in reality.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.170.1">Now that we are a bit more familiar with the idea of a trading strategy and know that the main problem any systematic trader should solve is risk mitigation, let’s dive a little deeper into risks specific to the algo </span><span class="No-Break"><span class="koboSpan" id="kobo.171.1">trading business.</span></span></p>
<h1 id="_idParaDest-21"><a id="_idTextAnchor020"/><span class="koboSpan" id="kobo.172.1">Automated trading – operational risk and regulatory limitations</span></h1>
<p><span class="koboSpan" id="kobo.173.1">Operational risk is the risk of direct or indirect loss resulting from inadequate or failed internal procedures, </span><a id="_idIndexMarker022"/><span class="koboSpan" id="kobo.174.1">people, and systems, or from external events (Bank for International Settlements, </span><em class="italic"><span class="koboSpan" id="kobo.175.1">Basel Committee on Banking Supervision</span></em><span class="koboSpan" id="kobo.176.1">, </span><em class="italic"><span class="koboSpan" id="kobo.177.1">Operational Risk Supporting Documentation to the New Basel Capital Accord</span></em><span class="koboSpan" id="kobo.178.1"> (Basel: BIS, 2002), p. </span><span class="No-Break"><span class="koboSpan" id="kobo.179.1">2, </span></span><a href="https://www.bis.org/publ/bcbsca07.pdf"><span class="No-Break"><span class="koboSpan" id="kobo.180.1">https://www.bis.org/publ/bcbsca07.pdf</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.181.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.182.1">Since, in this book, we will talk mostly about developing trading algos with Python and not about running a trading business, the main operational risk in this context could be that you don’t follow your </span><a id="_idIndexMarker023"/><span class="koboSpan" id="kobo.183.1">own strategy or intervene in the algorithmic trading </span><span class="No-Break"><span class="koboSpan" id="kobo.184.1">process discretionarily.</span></span></p>
<p><span class="koboSpan" id="kobo.185.1">Another risk that may be considered operational (although it is normally considered as money management) is the improper use of leverage. </span><span class="koboSpan" id="kobo.185.2">In essence, leverage is a credit line provided by the broker that allows you to buy more than you have in your account. </span><span class="koboSpan" id="kobo.185.3">If the leverage is too high, you are at risk of being unable to enter the market, or in certain cases, even worse – liquidating your positions that are rapidly </span><span class="No-Break"><span class="koboSpan" id="kobo.186.1">losing money.</span></span></p>
<p><span class="koboSpan" id="kobo.187.1">Broker risk can also be attributed to operational risks as the broker is the very entity that provides you </span><a id="_idIndexMarker024"/><span class="koboSpan" id="kobo.188.1">with access to the market, gives you a credit line to open positions, and does the clearing and settlement. </span><span class="koboSpan" id="kobo.188.2">Some brokers also act as market makers for their clients, netting their positions internally and acting as the counterparty for their own clients, which may lead to a conflict of interest, and even worse – loss of money if the broker didn’t have sufficient capital to perform </span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">these operations.</span></span></p>
<p><span class="koboSpan" id="kobo.190.1">Last, but not least, we should note that algorithmic and/or automated trading may be fully or partially prohibited </span><a id="_idIndexMarker025"/><span class="koboSpan" id="kobo.191.1">in certain jurisdictions. </span><span class="koboSpan" id="kobo.191.2">So always check with the respective market regulators to make sure you can run your algo trading </span><span class="No-Break"><span class="koboSpan" id="kobo.192.1">at all.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.193.1">Key takeaways</span></p>
<p class="callout"><span class="koboSpan" id="kobo.194.1">Always perform a background check of all counterparties, especially your broker. </span><span class="koboSpan" id="kobo.194.2">Be careful with leverage and check local regulatory documents on </span><span class="No-Break"><span class="koboSpan" id="kobo.195.1">algo trading.</span></span></p>
<p><span class="koboSpan" id="kobo.196.1">Enough on operational risk – at least for a quick start – and let’s move on to another kind of risk that is common for any trading activity but becomes particularly problematic for algo trading: the risk of basing trading decisions on incorrect </span><span class="No-Break"><span class="koboSpan" id="kobo.197.1">market data.</span></span></p>
<h1 id="_idParaDest-22"><a id="_idTextAnchor021"/><span class="koboSpan" id="kobo.198.1">Retrieving market data – quality and consistency as keys to success</span></h1>
<p><span class="koboSpan" id="kobo.199.1">Market data is often </span><a id="_idIndexMarker026"/><span class="koboSpan" id="kobo.200.1">considered something that cannot contribute to the overall risk in systematic trading. </span><span class="koboSpan" id="kobo.200.2">However, this is a massive mistake. </span><span class="koboSpan" id="kobo.200.3">There are two key risks associated with </span><span class="No-Break"><span class="koboSpan" id="kobo.201.1">market data:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.202.1">Issues with </span><span class="No-Break"><span class="koboSpan" id="kobo.203.1">receiving data</span></span></li>
<li><span class="koboSpan" id="kobo.204.1">Issues with </span><span class="No-Break"><span class="koboSpan" id="kobo.205.1">received data</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.206.1">In the next two subsections, we will dive deeper into the </span><span class="No-Break"><span class="koboSpan" id="kobo.207.1">preceding risks.</span></span></p>
<h2 id="_idParaDest-23"><a id="_idTextAnchor022"/><span class="koboSpan" id="kobo.208.1">Receiving data – when size does matter</span></h2>
<p><span class="koboSpan" id="kobo.209.1">There are two forms in which we get market data: real-time or historical. </span><span class="koboSpan" id="kobo.209.2">In both cases, we obtain it from a data </span><a id="_idIndexMarker027"/><span class="koboSpan" id="kobo.210.1">vendor, a broker, or directly from an exchange. </span><span class="koboSpan" id="kobo.210.2">The difference is that real-time data is used for actual trading (as it reflects what is going on in the market right now) and historical data is used only for research and development, to rebuild hypothetical trades and estimate the theoretical performance of a </span><span class="No-Break"><span class="koboSpan" id="kobo.211.1">trading algorithm.</span></span></p>
<p><span class="koboSpan" id="kobo.212.1">The issues with receiving data are mostly related to </span><span class="No-Break"><span class="koboSpan" id="kobo.213.1">real-time data.</span></span></p>
<p><span class="koboSpan" id="kobo.214.1">Let’s now add some more definitions as we need to acquire some common terminology to move on with market data </span><span class="No-Break"><span class="koboSpan" id="kobo.215.1">and ordering.</span></span></p>
<p><span class="koboSpan" id="kobo.216.1">A request to buy </span><a id="_idIndexMarker028"/><span class="koboSpan" id="kobo.217.1">an asset at a certain price is called a </span><strong class="bold"><span class="koboSpan" id="kobo.218.1">bid</span></strong><span class="koboSpan" id="kobo.219.1">. </span><span class="koboSpan" id="kobo.219.2">It’s like you go to a market and shout, “</span><em class="italic"><span class="koboSpan" id="kobo.220.1">I want to buy this asset at this price. </span><span class="koboSpan" id="kobo.220.2">Is anyone willing to sell it </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.221.1">to me?</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.222.1">”</span></span></p>
<p><span class="koboSpan" id="kobo.223.1">A request to sell an asset at a certain price is called an </span><strong class="bold"><span class="koboSpan" id="kobo.224.1">ask</span></strong><span class="koboSpan" id="kobo.225.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.226.1">offer</span></strong><span class="koboSpan" id="kobo.227.1">. </span><span class="koboSpan" id="kobo.227.2">It means that you are ready to sell it to anyone willing to accept </span><span class="No-Break"><span class="koboSpan" id="kobo.228.1">your price.</span></span></p>
<p><span class="koboSpan" id="kobo.229.1">In financial markets, both requests are realized by buy side traders with a </span><strong class="bold"><span class="koboSpan" id="kobo.230.1">limit order</span></strong><span class="koboSpan" id="kobo.231.1"> (see </span><a href="B19145_10.xhtml#_idTextAnchor171"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.232.1">Chapter 10</span></em></span></a><span class="koboSpan" id="kobo.233.1">, </span><em class="italic"><span class="koboSpan" id="kobo.234.1">Types of Orders and Their Simulation in Python</span></em><span class="koboSpan" id="kobo.235.1">, for a detailed discussion on types </span><span class="No-Break"><span class="koboSpan" id="kobo.236.1">of orders).</span></span></p>
<p><span class="koboSpan" id="kobo.237.1">When another counterparty agrees to place a trade at the order price, a new trade is registered and its information is included in the data stream and distributed across data vendors, brokers, and </span><a id="_idIndexMarker029"/><span class="koboSpan" id="kobo.238.1">other recipients. </span><span class="koboSpan" id="kobo.238.2">Such a record is called a </span><strong class="bold"><span class="koboSpan" id="kobo.239.1">tick</span></strong><span class="koboSpan" id="kobo.240.1">. </span><span class="koboSpan" id="kobo.240.2">In other words, a tick is a minimal piece of information in the market data and normally consists of the </span><span class="No-Break"><span class="koboSpan" id="kobo.241.1">following fields:</span></span></p>
<ul>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.242.1">date</span></strong></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.243.1">time</span></strong></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.244.1">price</span></strong></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.245.1">traded volume</span></strong></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.246.1">counterparty1</span></strong></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.247.1">counterparty2</span></strong></span></li>
</ul>
<p><span class="koboSpan" id="kobo.248.1">The last two fields contain information about actual counterparties and are normally not disclosed or </span><a id="_idIndexMarker030"/><span class="koboSpan" id="kobo.249.1">distributed to protect the market participants. </span><span class="koboSpan" id="kobo.249.2">Traded volume means the amount of the asset that was traded (number of contracts, or just the amount of money if we are talking </span><span class="No-Break"><span class="koboSpan" id="kobo.250.1">about forex).</span></span></p>
<p><span class="koboSpan" id="kobo.251.1">The main problem with receiving market data in its raw form is that it’s simply overwhelmingly huge. </span><span class="koboSpan" id="kobo.251.2">There are so many market participants and so many trading venues that streaming all transactions for just one asset (which is also called a “financial instrument”) may easily reach megabytes per second – receiving it is already a challenge by itself (don’t worry, we are not going to work with data feeds of this sort in this book). </span><span class="koboSpan" id="kobo.251.3">Next, even if we are able to receive a data stream with such a throughput, we need to store and handle this data somehow, and thus a very fast database is required. </span><span class="koboSpan" id="kobo.251.4">And finally, we need to be able to process this amount of data at an adequate speed, so we need blazingly </span><span class="No-Break"><span class="koboSpan" id="kobo.252.1">fast computers.</span></span></p>
<p><span class="koboSpan" id="kobo.253.1">But there is good news. </span><span class="koboSpan" id="kobo.253.2">Despite some strategies (mostly arbitrage and high-frequency trading), we do need raw market data in the format just described (also frequently referred to as </span><strong class="bold"><span class="koboSpan" id="kobo.254.1">time and sales</span></strong><span class="koboSpan" id="kobo.255.1"> data) to identify trading opportunities, as most directional trading </span><a id="_idIndexMarker031"/><span class="koboSpan" id="kobo.256.1">algorithms are far less sensitive to a lack of information about each and every trade. </span><span class="koboSpan" id="kobo.256.2">So, data vendors provide data in a compressed format. </span><span class="koboSpan" id="kobo.256.3">This becomes possible because most of the raw market data contains sequences of ticks with identical prices, and removing them won’t distort the price movements. </span><span class="koboSpan" id="kobo.256.4">This happens because there may be many market participants placing trades at the same price at almost the same time, so by excluding these sequences, we lose information about each transaction but retain information about any change in price. </span><span class="koboSpan" id="kobo.256.5">Such a market data stream is often referred to as </span><em class="italic"><span class="koboSpan" id="kobo.257.1">filtered</span></em><span class="koboSpan" id="kobo.258.1"> or </span><em class="italic"><span class="koboSpan" id="kobo.259.1">cleaned</span></em><span class="koboSpan" id="kobo.260.1">. </span><span class="koboSpan" id="kobo.260.2">Besides that, some trades are made at bids, others at asks, and while both bids and asks remain the same, these trades form sequences of trades where prices seem to be different. </span><span class="koboSpan" id="kobo.260.3">However, in reality, they are always at the distance of the difference between bids and asks. </span><span class="koboSpan" id="kobo.260.4">This difference doesn’t </span><a id="_idIndexMarker032"/><span class="koboSpan" id="kobo.261.1">mean that the market price changes. </span><span class="koboSpan" id="kobo.261.2">Such a phenomenon is called a </span><strong class="bold"><span class="koboSpan" id="kobo.262.1">bounce</span></strong><span class="koboSpan" id="kobo.263.1"> and is normally also excluded from </span><span class="No-Break"><span class="koboSpan" id="kobo.264.1">cleaned data.</span></span></p>
<p><span class="koboSpan" id="kobo.265.1">Some vendors and brokers go even further and send </span><em class="italic"><span class="koboSpan" id="kobo.266.1">snapshots</span></em><span class="koboSpan" id="kobo.267.1"> of the market data instead of a </span><a id="_idIndexMarker033"/><span class="koboSpan" id="kobo.268.1">filtered data stream. </span><span class="koboSpan" id="kobo.268.2">A snapshot is sent at regular time intervals, for example, 100 ms or 1 s, and contains only the </span><span class="No-Break"><span class="koboSpan" id="kobo.269.1">following information:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.270.1">Date</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.271.1">Time</span></span></li>
<li><span class="koboSpan" id="kobo.272.1">Price at the beginning of the interval (also known as </span><em class="italic"><span class="koboSpan" id="kobo.273.1">open</span></em><span class="koboSpan" id="kobo.274.1">, or </span><span class="No-Break"><span class="koboSpan" id="kobo.275.1">just </span></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.276.1">O</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.277.1">)</span></span></li>
<li><span class="koboSpan" id="kobo.278.1">Maximum price during the interval (also known as </span><em class="italic"><span class="koboSpan" id="kobo.279.1">high</span></em><span class="koboSpan" id="kobo.280.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.281.1">or </span></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.282.1">H</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.283.1">)</span></span></li>
<li><span class="koboSpan" id="kobo.284.1">Minimum price during the interval (also known as </span><em class="italic"><span class="koboSpan" id="kobo.285.1">low</span></em><span class="koboSpan" id="kobo.286.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.287.1">or </span></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.288.1">L</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.289.1">)</span></span></li>
<li><span class="koboSpan" id="kobo.290.1">Price at the end of the interval (also known as </span><em class="italic"><span class="koboSpan" id="kobo.291.1">close</span></em><span class="koboSpan" id="kobo.292.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.293.1">or </span></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.294.1">C</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.295.1">)</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.296.1">Traded volume</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.297.1">Therefore, instead of thousands of ticks, we receive only one tick with seven data fields. </span><span class="koboSpan" id="kobo.297.2">This approach dramatically reduces the throughput but is obviously somewhat destructive to the data, and snapshot data may not be suitable for </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">some strategies.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.299.1">Key takeaway</span></p>
<p class="callout"><span class="koboSpan" id="kobo.300.1">Be careful with choosing the source of data, especially for live trading, and always make sure it contains sufficient information for </span><span class="No-Break"><span class="koboSpan" id="kobo.301.1">your strategy.</span></span></p>
<h2 id="_idParaDest-24"><a id="_idTextAnchor023"/><span class="koboSpan" id="kobo.302.1">Received data – looking at it from a critical angle</span></h2>
<p><span class="koboSpan" id="kobo.303.1">After we have </span><a id="_idIndexMarker034"/><span class="koboSpan" id="kobo.304.1">successfully received the data, we should make sure it makes sense. </span><span class="koboSpan" id="kobo.304.2">Often, data, especially tick data, contains erroneous prices. </span><span class="koboSpan" id="kobo.304.3">These prices may be received due to a number of reasons, which we will discuss in detail in </span><a href="B19145_05.xhtml#_idTextAnchor086"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.305.1">Chapter 5</span></em></span></a><span class="koboSpan" id="kobo.306.1">, </span><em class="italic"><span class="koboSpan" id="kobo.307.1">Retrieving and Handling Market Data </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.308.1">with Python</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.309.1">.</span></span></p>
<p><em class="italic"><span class="koboSpan" id="kobo.310.1">Erroneous</span></em><span class="koboSpan" id="kobo.311.1">, otherwise known as </span><em class="italic"><span class="koboSpan" id="kobo.312.1">non-market</span></em><span class="koboSpan" id="kobo.313.1">, prices may cause trouble for systematic traders because a single </span><em class="italic"><span class="koboSpan" id="kobo.314.1">wrong</span></em><span class="koboSpan" id="kobo.315.1"> quote may trigger an algorithm to buy or sell something, and such a trade should not have happened according to the </span><span class="No-Break"><span class="koboSpan" id="kobo.316.1">strategy logic.</span></span></p>
<p><span class="koboSpan" id="kobo.317.1">Sometimes, these incorrect quotes can be seen if plotted on a chart. </span><span class="koboSpan" id="kobo.317.2">The human eye intuitively expects </span><a id="_idIndexMarker035"/><span class="koboSpan" id="kobo.318.1">data points to be within a certain reasonable range and easily catches the outliers, as can be seen in the </span><span class="No-Break"><span class="koboSpan" id="kobo.319.1">following chart:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer008">
<span class="koboSpan" id="kobo.320.1"><img alt="Figure 1.2 – Non-market prices seen on a tick chart" src="image/B19145_1_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.321.1">Figure 1.2 – Non-market prices seen on a tick chart</span></p>
<p><span class="koboSpan" id="kobo.322.1">In case we receive snapshots or other compressed data, there could be missing intervals when we receive no quotes. </span><span class="koboSpan" id="kobo.322.2">It can happen because of </span><span class="No-Break"><span class="koboSpan" id="kobo.323.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.324.1">The market is closed (scheduled or due to </span><span class="No-Break"><span class="koboSpan" id="kobo.325.1">an emergency)</span></span></li>
<li><span class="koboSpan" id="kobo.326.1">The data server </span><span class="No-Break"><span class="koboSpan" id="kobo.327.1">is down</span></span></li>
<li><span class="koboSpan" id="kobo.328.1">The connection </span><span class="No-Break"><span class="koboSpan" id="kobo.329.1">is broken</span></span></li>
</ul>
<p class="callout-heading"><span class="koboSpan" id="kobo.330.1">Key takeaway</span></p>
<p class="callout"><span class="koboSpan" id="kobo.331.1">A robust trading app should have a module capable of checking data consistency and </span><span class="No-Break"><span class="koboSpan" id="kobo.332.1">connection persistence.</span></span></p>
<p><span class="koboSpan" id="kobo.333.1">Alright, we are </span><a id="_idIndexMarker036"/><span class="koboSpan" id="kobo.334.1">now aware of the operational risks and know how harmful incorrectly handling market data could be. </span><span class="koboSpan" id="kobo.334.2">Anything else? </span><span class="koboSpan" id="kobo.334.3">Of course, here comes the main </span><span class="No-Break"><span class="koboSpan" id="kobo.335.1">risk: systemic.</span></span></p>
<h1 id="_idParaDest-25"><a id="_idTextAnchor024"/><span class="koboSpan" id="kobo.336.1">Making actual trading decisions – trading logic and credit risk</span></h1>
<p><span class="koboSpan" id="kobo.337.1">In directional trading, systemic risks are mostly realized when you or your trading strategy supposed the </span><a id="_idIndexMarker037"/><span class="koboSpan" id="kobo.338.1">price would go in one direction, but in reality, it went in the opposite direction. </span><span class="koboSpan" id="kobo.338.2">Don’t worry, this situation is absolutely normal for systematic trading, and no one can guarantee that any strategy will generate a win rate </span><span class="No-Break"><span class="koboSpan" id="kobo.339.1">of 100%.</span></span></p>
<p><span class="koboSpan" id="kobo.340.1">There are two major </span><a id="_idIndexMarker038"/><span class="koboSpan" id="kobo.341.1">types of trading strategies: data-driven and event-driven. </span><strong class="bold"><span class="koboSpan" id="kobo.342.1">Data-driven</span></strong><span class="koboSpan" id="kobo.343.1"> strategies analyze the price time series (which we discussed </span><a id="_idIndexMarker039"/><span class="koboSpan" id="kobo.344.1">in the </span><em class="italic"><span class="koboSpan" id="kobo.345.1">Retrieving market data – quality and consistency as keys to success</span></em><span class="koboSpan" id="kobo.346.1"> section) in order to find a certain pattern or sequence that then triggers an order. </span><span class="koboSpan" id="kobo.346.2">Event-driven strategies wait for a certain event to happen – for example, a </span><a id="_idIndexMarker040"/><span class="koboSpan" id="kobo.347.1">new tick at a certain price and with a certain volume, or a release of political news or economic indicators. </span><span class="koboSpan" id="kobo.347.2">In both cases, a trading app should have rules to not only open positions but also to liquidate them – again, based on price data or events (</span><span class="No-Break"><span class="koboSpan" id="kobo.348.1">or both).</span></span></p>
<p><span class="koboSpan" id="kobo.349.1">In general, if a strategy generates </span><em class="italic"><span class="koboSpan" id="kobo.350.1">some</span></em><span class="koboSpan" id="kobo.351.1"> wins and </span><em class="italic"><span class="koboSpan" id="kobo.352.1">some</span></em><span class="koboSpan" id="kobo.353.1"> losses, there are only two ways for it to </span><span class="No-Break"><span class="koboSpan" id="kobo.354.1">make money:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.355.1">Generate more wins </span><span class="No-Break"><span class="koboSpan" id="kobo.356.1">than losses</span></span></li>
<li><span class="koboSpan" id="kobo.357.1">Have the average win greater than the </span><span class="No-Break"><span class="koboSpan" id="kobo.358.1">average loss</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.359.1">If your trading algorithm does not have a routine that handles situations when the market goes against the position, then most likely, the average loss across a statistically significant number of trades will be greater than the average win, and it will become really problematic to make money with such </span><span class="No-Break"><span class="koboSpan" id="kobo.360.1">a strategy.</span></span></p>
<p><span class="koboSpan" id="kobo.361.1">Don’t forget that forex is traded using leverage, which means the ability to trade much greater amounts of money than you actually have in your account. </span><span class="koboSpan" id="kobo.361.2">In the case that your trading algorithm has poor risk management logic and incorrect position sizing, an open position may quickly drain your account to zero if the price goes the opposite way, and even worse – some brokers will even let you go negative and you will be left with debt instead </span><span class="No-Break"><span class="koboSpan" id="kobo.362.1">of profit.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.363.1">Key takeaway</span></p>
<p class="callout"><span class="koboSpan" id="kobo.364.1">Systemic risk management and position sizing algorithms are crucial parts of an algo </span><span class="No-Break"><span class="koboSpan" id="kobo.365.1">trading application.</span></span></p>
<p><span class="koboSpan" id="kobo.366.1">Systemic risk is very important, but there’s good news for systematic traders: it is possible to mitigate </span><a id="_idIndexMarker041"/><span class="koboSpan" id="kobo.367.1">this risk by carefully testing the strategy before going to production and adjusting it so the systemic risk is minimized. </span><span class="koboSpan" id="kobo.367.2">But there is one more risk that is hard to mitigate during the research and development phase: </span><span class="No-Break"><span class="koboSpan" id="kobo.368.1">transactional risk.</span></span></p>
<h1 id="_idParaDest-26"><a id="_idTextAnchor025"/><span class="koboSpan" id="kobo.369.1">Ordering – transactional risk</span></h1>
<p><span class="koboSpan" id="kobo.370.1">Transactional risks are </span><a id="_idIndexMarker042"/><span class="koboSpan" id="kobo.371.1">the real problem in the first place for arbitrage, but they also affect directional strategies. </span><span class="koboSpan" id="kobo.371.2">In simple terms, this is a risk of </span><span class="No-Break"><span class="koboSpan" id="kobo.372.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.373.1">Entering or exiting the market at a </span><span class="No-Break"><span class="koboSpan" id="kobo.374.1">wrong price</span></span></li>
<li><span class="koboSpan" id="kobo.375.1">Entering or exiting the market at a </span><span class="No-Break"><span class="koboSpan" id="kobo.376.1">wrong time</span></span></li>
<li><span class="koboSpan" id="kobo.377.1">Entering or exiting the market with a wrong </span><span class="No-Break"><span class="koboSpan" id="kobo.378.1">trading size</span></span></li>
<li><span class="koboSpan" id="kobo.379.1">Not entering or exiting the market </span><span class="No-Break"><span class="koboSpan" id="kobo.380.1">at all</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.381.1">All four situations are more than possible in all markets and are even quite frequent during periods of insufficient liquidity (see </span><a href="B19145_03.xhtml#_idTextAnchor044"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.382.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.383.1">, </span><em class="italic"><span class="koboSpan" id="kobo.384.1">FX Market Overview from a Developer’s Standpoint</span></em><span class="koboSpan" id="kobo.385.1">, for a more detailed discussion of </span><span class="No-Break"><span class="koboSpan" id="kobo.386.1">liquidity issues).</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.387.1">Key takeaway</span></p>
<p class="callout"><span class="koboSpan" id="kobo.388.1">Transactional risks are managed by a set of algorithms that are also an essential part of any </span><span class="No-Break"><span class="koboSpan" id="kobo.389.1">trading application.</span></span></p>
<p><span class="koboSpan" id="kobo.390.1">Well, it’s been quite a </span><a id="_idIndexMarker043"/><span class="koboSpan" id="kobo.391.1">trip across the various risks, and we now understand that the initial idea of a trading application with a simple and straightforward linear logic definitely won’t work in real life. </span><span class="koboSpan" id="kobo.391.2">Now, we can suggest something (unfortunately) more complex, but (fortunately) </span><span class="No-Break"><span class="koboSpan" id="kobo.392.1">more realistic.</span></span></p>
<h1 id="_idParaDest-27"><a id="_idTextAnchor026"/><span class="koboSpan" id="kobo.393.1">The general architecture of a trading application</span></h1>
<p><span class="koboSpan" id="kobo.394.1">Now, we can improve </span><a id="_idIndexMarker044"/><span class="koboSpan" id="kobo.395.1">our initial diagram (see </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.396.1">Figure 1</span></em></span><em class="italic"><span class="koboSpan" id="kobo.397.1">.1</span></em><span class="koboSpan" id="kobo.398.1">) representing the architecture of a trading application. </span><span class="koboSpan" id="kobo.398.2">Although it is still very general and high level, it now radically differs from what we suggested in </span><span class="No-Break"><span class="koboSpan" id="kobo.399.1">the beginning:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer009">
<span class="koboSpan" id="kobo.400.1"><img alt="Figure 1.3 – More complete general architecture of a trading app" src="image/B19145_1_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.401.1">Figure 1.3 – More complete general architecture of a trading app</span></p>
<p><span class="koboSpan" id="kobo.402.1">Here, we can see that the real trading application features a number of blocks or modules, and some of them receive feedback from others. </span><span class="koboSpan" id="kobo.402.2">After we have received market data, we should clean it up and add storage and retrieval facilities, as pieces of data may be reused in the following code. </span><span class="koboSpan" id="kobo.402.3">Then, we generate trading signals according to the strategy logic. </span><span class="koboSpan" id="kobo.402.4">But before sending these signals to the market in the form of orders, we should do some checks to make sure that the order size is comfortable for both the strategy </span><a id="_idIndexMarker045"/><span class="koboSpan" id="kobo.403.1">and the market. </span><span class="koboSpan" id="kobo.403.2">After that, we actually trade – send orders to the market controlling their execution. </span><span class="koboSpan" id="kobo.403.3">And finally, we track the open positions and manage exposure according to the running profit </span><span class="No-Break"><span class="koboSpan" id="kobo.404.1">or loss.</span></span></p>
<h1 id="_idParaDest-28"><a id="_idTextAnchor027"/><span class="koboSpan" id="kobo.405.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.406.1">In this chapter, we familiarized ourselves with the core terminology and key concepts of FX markets, learned about counterparties and transactions, understood the intrinsic issues with market data, reviewed various risks, and drafted the first mockup of a trading application’s architecture. </span><span class="koboSpan" id="kobo.406.2">We now know that a robust trading app is more about risk management, checking various situations that may happen in real life before and after the trade, and making corrections on the fly. </span><span class="koboSpan" id="kobo.406.3">This is what makes the development of trading </span><span class="No-Break"><span class="koboSpan" id="kobo.407.1">apps different.</span></span></p>
<p><span class="koboSpan" id="kobo.408.1">In the next chapter, let us see how using Python in algo trading helps improve the research and development of </span><span class="No-Break"><span class="koboSpan" id="kobo.409.1">trading applications.</span></span></p>
</div>
</body></html>