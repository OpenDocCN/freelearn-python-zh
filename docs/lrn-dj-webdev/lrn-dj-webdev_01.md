# 第一章：Django 简介

欢迎来到 Django 开发 2.0 版本！

Django 是一个网页开发框架，网页开发是一种技能。要掌握任何技能，可以遵循著名的"1 万小时"规则，即如果你练习任何东西达到那么长时间，你肯定会成为专家。但那是很长的时间，没有合适的计划，这可能会出错。非常出错。

那么，有没有更好的方法来实现你的目标？有！将你想学习的技能分解成更小的子技能，然后逐个掌握它们。 （程序员称之为"分而治之"规则。）你需要通过研究来确定最重要的子技能。子技能被频繁提及的次数越多，掌握它就越重要。

作为本书的作者，我请求您做出承诺，即在最初令人沮丧的时刻坚持学习本书。学习新技能时会感到沮丧，相信我：当你觉得太简单时，你是在做对的。

在本章中，我们将涵盖以下主题：

+   首先为什么要进行网页开发？

+   网页开发中的变化

+   网页开发中的 MVC 模式

+   为什么选择 Django

+   Django 内部

# 首先为什么要进行网页开发？

网站直接在全球观众面前给公司或产品留下第一印象。现在每个初创公司都有一个网站，这有助于向潜在客户或投资者推销他们的想法。

现在一切都在线，所以与其坐视变化，为什么不参与并学习编码呢？学习网页开发是你可以用时间做出的最有价值的投资之一。它不仅会通过让你找到更好的工作来使你受益，而且你还可以以非常简单和直接的方式将你的想法编码成原型。

网页开发必备的要素包括用户界面和用户体验，但遗憾的是这超出了本书的范围。

# 网页开发中的变化

网页开发在过去几年取得了巨大进步。一些改进列举如下：

+   **JavaScript**：从编写复杂的选择器到操作**文档对象模型**（**DOM**）。像**jQuery**和**AngularJs**这样的库使前端动态变得更简单。JavaScript 甚至发展出了构建生产就绪的服务器端框架**node.js**。

+   **浏览器**：从在各种浏览器上简单地打破页面发展到智能地恢复连接，告诉你哪个标签正在播放音乐，或者无缝地渲染实时游戏。

+   **开源**：使用他人编写的代码现在比编写自己的代码更可取。这帮助许多项目停止重复造轮子，**Django**就是最好的例子之一。

+   **API 作为脊柱**：今天的网络技术可能明天就不一样，或者数据可能不会以相同的方式或在相同的位置表示。换句话说，更多的设备将带有不同的屏幕尺寸。因此，最好将文本与视觉分开。

+   **用户界面**：过去，开发团队的宝贵时间被用户界面设计消耗。但是像**Bootstrap**和**Foundation**这样的框架使网页开发变得更加容易。

+   **敏捷开发**：在开发周期中快速前进对大多数初创公司是可以接受的。在软件开发周期开始时从未要求完整的需求。因此，持续的客户或利益相关者参与非常重要。Django 框架是这种开发的最合适的框架。正如 Django 的口号所说，"*完美主义者的网络框架，有截止日期*"

+   云计算的演变：这在 Web 应用程序的托管端发挥了重要作用，并为上线提供了更快、更可靠和更便宜的解决方案。

+   NoSQL 的诞生：大大降低成本，NoSQL 为开发人员提供了诸如“立即存储，稍后查找价值”和“一起存储任何东西”的自由，使其更适合云环境并具有更强的容错性。

# Web 开发中的 MVC 模式

在本书中，您将了解如何使用一个名为 Django 的 Model-View-Controller（MVC）Web 框架，它是用强大而流行的编程语言 Python 编写的。

MVC 基于分离表示的概念。分离表示的理念是在领域对象（模拟我们对真实世界的看法）和表示对象（我们在屏幕上看到的用户界面（UI）元素）之间进行清晰的划分。领域对象应完全独立，并且应该能够支持多个演示，可能同时进行。

这种模式的好处是显而易见的。有了它，设计师可以在不担心数据存储或管理的情况下工作在界面上。开发人员能够编写数据处理的逻辑，而不必深入了解演示细节。因此，MVC 模式迅速进入了 Web 语言，并且严肃的 Web 开发人员开始接受它而不是以前的技术。

本书强调利用 Django 和 Python 创建一个具有今天 Web 2.0 网站常见功能的微型博客 Web 应用程序。本书采用教程风格介绍概念并解释问题的解决方案。它不是 Python 或 Django 的参考手册，因为两者已经有很多资源。本书只假设对标准 Web 技术（HTML 和 CSS）和 Python 编程语言有工作知识。另一方面，Django 将在我们在各章节中构建功能时进行解释，直到我们实现拥有一个可工作的 Web 2.0 应用程序的目标。

## 多语言支持

Django 通过其内置的国际化系统支持多语言网站。对于那些在拥有多种语言的网站上工作的人来说，这可能非常有价值。该系统使翻译界面变得非常简单。

因此，总之，Django 提供了一组集成和成熟的组件，具有出色的文档，网址为[`www.djangoproject.com/documentation/`](http://www.djangoproject.com/documentation/)。

由于其庞大的开发人员和用户社区，现在学习 Web 开发框架的时机是最好的！

# 为什么选择 Django？

自 MVC 模式传播到 Web 开发以来，与大多数其他语言不同，Python 在 Web 框架方面有了相当多的选择。尽管一开始从众多选择中选择一个可能会令人困惑，但有几个竞争框架只能对 Python 社区有利。

Django 是 Python 的一个可用框架，所以问题是：它有什么特别之处，以至于成为本书的主题？

首先，Django 提供了一组紧密集成的组件。所有这些组件都是由 Django 团队自己开发的。Django 最初是作为一个内部框架开发的，用于管理一系列面向新闻的网站。后来，它的代码在互联网上发布，Django 团队继续使用开源模型进行开发。由于其根源，Django 的组件从一开始就被设计用于集成、可重用性和速度。

Django 的数据库组件，对象关系映射器（ORM），提供了数据模型和数据库引擎之间的桥梁。它支持大量的数据库系统，从一个引擎切换到另一个引擎只是改变一个配置文件的事情。如果决定从一个数据库引擎切换到另一个数据库引擎，这给开发人员带来了很大的灵活性。如果遇到问题，可以在这里找到驱动程序（二进制 Python 包）：[`www.lfd.uci.edu/~gohlke/pythonlibs/`](http://www.lfd.uci.edu/~gohlke/pythonlibs/)。

此外，Django 提供了一个整洁的开发环境。它带有一个轻量级的 Web 服务器用于开发和测试。当启用调试模式时，Django 提供非常彻底和详细的错误消息，包含大量的调试信息。所有这些都使得隔离和修复错误变得非常容易。

Django 通过其内置的国际化系统支持多语言网站。对于那些在拥有多种语言的网站上工作的人来说，这可能非常有价值。该系统使得翻译界面变得非常简单。

Django 具备一个 Web 框架所期望的标准功能。这些功能包括以下内容：

+   一个具有简单但可扩展语法的模板和文本过滤引擎

+   表单生成和验证 API

+   可扩展的身份验证系统

+   用于加速应用程序性能的缓存系统

+   一个用于生成 RSS 订阅的饲料框架

尽管 Django 没有提供简化使用 Ajax 的 JavaScript 库，但选择一个库并将其与 Django 集成是一件简单的事情，我们将在后面的章节中看到。

因此，总之，Django 提供了一套集成和成熟的组件，并拥有出色的文档，这要归功于其庞大的开发人员和用户社区。有了 Django，现在是学习 Web 开发框架的最佳时机！

## Django 内部

我们将提到一些使用 Django 进行更好的 Web 开发的重要原因。以下小节解释了一些最重要的功能。

### Django 是成熟的

许多公司直接在生产中使用 Django，并得到了来自世界各地开发人员的持续贡献。一些著名的网站包括**Pinterest**和**Quora**。它已经成为完美的 Web 开发框架。

### 电池包含

Django 遵循 Python 的**电池包含**哲学，这意味着 Django 带有许多在 Web 开发过程中解决常见问题的重要额外功能和选项。

### 组件和模块化框架之间紧密集成

Django 在与第三方模块集成方面非常灵活。存在一个流行的项目（例如数据库领域的**mongoDB**或**OpenID**主要的**SocialAuth**），它没有一个用于 Django 集成的**应用程序编程接口**（**API**）或完整的插件的可能性非常小。

### 对象关系映射器

这是 Django 项目中最重要的部分之一。Django 的数据库组件，ORM，为 Django 的**模态类**提供了封装、可移植性、安全性和表现力等功能，这些功能映射到配置的选择数据库。

### 清晰的 URL 设计

Django 中的 URL 系统非常灵活和强大。它允许您为应用程序中的 URL 定义模式，并定义 Python 函数来处理每个模式。

这使开发人员能够创建既人性化（避免 URL 以`.php`、`.aspx`等结尾的模式）又搜索引擎友好的 URL。

### 自动管理界面

Django 带有一个准备好使用的管理界面。这个界面使得管理应用程序数据变得轻而易举。它也非常灵活和可定制。

### 高级开发环境

此外，Django 提供了一个整洁的开发环境。它配备了一个轻量级的 Web 服务器用于开发和测试。当启用调试模式时，Django 提供非常彻底和详细的错误消息，带有大量的调试信息。所有这些都使得隔离和修复错误变得非常容易。

### Django 1.6 和 1.7 中的新功能

在最新版本 1.6 中，Django 带来了一些重大变化，其中一些如下：

+   Python 3 在此版本中得到了官方支持，这意味着它是稳定的，可以用于生产。

+   布局简单。添加了新的默认值，默认情况下添加了 Django 管理模板，并删除了 Sites 包。

+   添加了点击劫持防护。

+   默认数据库是 SQLite3。

+   随着旧的 API 被弃用，最大的变化是事务得到了改进。DB 层的自动提交默认已启用。

+   此版本中的 DB 连接是持久的。在 Django 1.5 之前，每个 HTTP 请求都会建立一个新连接，但从 1.6 开始，相同的连接将在请求之间重复使用。

+   时区默认为 UTC。

+   简单的应用集成。

+   可扩展的。

+   强大的配置机制。

+   如果没有模型，就不需要`models.py`文件。

+   为其子类添加了一个新方法。

+   允许将游标用作上下文管理器。

+   为国际化、表单和文件上传添加了许多功能。

+   它具有更好的功能来避免 CSRF。

+   除此之外，还引入了一个二进制字段，以及 HTML 5 输入字段（电子邮件、URL 和数字）。

您可以在此处详细阅读新添加的功能：[`docs.djangoproject.com/en/1.7/releases/1.7/`](https://docs.djangoproject.com/en/1.7/releases/1.7/)。

# 支持的数据库

Django 对数据有着很好和强大的尊重。正确地对数据进行建模，站点的其余部分就会顺理成章。尽管 Django 是为关系数据库设计的，但非官方的 NoSQL 实现也存在于 Django 中。以下是 Django 支持的关系数据库列表：

+   SQL：SQLite，MySQL 和 PostgreSQL。

+   SQLite：这是 Django 应用程序的默认数据库，主要用于测试目的。

+   PostgreSQL：这是一个广泛使用的开源关系型数据库。我们将基于此构建我们的微博示例。

### 注意

MySQL 和 PostgreSQL 是 Django 社区中最常用的两种数据库，而 PostgreSQL 是 Django 社区中最受欢迎的。

+   NoSQL：你的数据是否只需要一个表，无论是用户信息还是他们的评论等等？换句话说，是否可以没有插入数据的结构规则或嵌套数据，比如带有评论子文档数组的文章？听起来奇怪吗？是的，它是。在早期，人们使用的是唯一的关系数据库概念，但自从云计算时代开始，程序员们喜欢为每个可能的项目实现 NoSQL 架构。它不存储也不遵循任何正常形式。你不能使用连接，但使用它有许多其他优点。

App Engine、MongoDB、Elasticsearch、Cassandra 和 Redis 是 Django 支持的一些著名的 NoSQL 数据库。MongoDB 在 Django 社区中变得越来越受欢迎。

+   MongoDB：这是一个广泛使用的开源 NoSQL 文档型数据库。我们将用它来创建我们的第二个小型应用程序，用于 URL 缩短。

在本书中，我们将主要处理前述列表中的三个数据库，但其他数据库的实现几乎可以通过最小的配置更改来实现。

有许多由 Django 提供支持的知名网站。其中一些如下：

+   Pinterest：一个内容分享服务，特别是图片和视频

+   Disqus：一个博客评论托管服务

+   Quora：一个基于问题和答案的网站

+   Bitbucket：一个免费的 Git 和 mercurial 代码托管站点

+   **Mozilla Firefox**：**Mozilla**支持页面

# 使用本书您将学到的内容

本书侧重于构建微博网站应用程序，并向其添加常见的 Web 2.0 功能。其中一些功能如下：

+   创建 Django 视图、模型和控制器：这主要涉及学习 Django 框架，即如何在控制器上处理请求，在对存储在数据库中的模型进行必要的操作后呈现视图。

+   **标签和标签云**：在微博网站项目中，每条消息都将有一个带有**#**的标签。这些标签的映射将在本节中处理。

+   **内容定制和搜索**：根据关键词或标签搜索消息。

+   **Ajax 增强**：在搜索或标记期间使用 Ajax 进行自动完成，并对保存的消息或标记进行就地编辑。

+   **朋友网络**：列出个人资料的所有朋友并计算其他重要统计数据。

本书不是专注于教授各种 Django 功能，而是使用教程风格来教授如何使用 Django 实现这些功能。因此，它作为官方 Django 文档的补充资源，该文档可以在网上免费获取。

感兴趣吗？太棒了！准备好了吗？我保证这将既有趣又有意思。

# 总结

在本章中，我们了解了为什么网页开发正在获得优势以及 Web 技术领域发生了什么变化；如何利用 Python 和 Django 框架来利用新的 Web 技术；Django 实际上是什么以及我们可以用它实现什么；最后，支持 Django 的不同类型的数据库。

在下一章中，我们将介绍如何在各种操作系统上（如 Windows、Linux 和 Mac）安装 Python 和 Django，并使用 Django 平台设置我们的第一个项目。
