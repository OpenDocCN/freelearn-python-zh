# 前言

欢迎阅读《学习 Flask》，这本书将教会您使用 Flask 构建 Web 应用程序所需的必要技能，这是一个轻量级的 Python Web 框架。本书采用了一个以示例驱动的方法，旨在让您快速入门。实际示例与适量的背景信息相结合，以确保您不仅了解 Flask 开发的如何，还了解为什么。

Flask 最初是由 Armin Ronacher 在 2010 年作为复杂的愚人节恶作剧的一部分发布的。该项目吹嘘自己是“下一代 Python 微型 Web 框架”，并讽刺了类似微框架所流行的功能。尽管 Flask 原本是一个恶作剧，但作者们对该项目引起了许多人的严肃兴趣感到意外。

Flask 是一个建立在两个优秀库之上的微框架：Jinja2 模板引擎和 Werkzeug WSGI 工具包。尽管与其他框架（如 Django 和 Pylons）相比，Flask 是一个相对较新的框架，但它已经获得了大量忠实的追随者。Flask 为常见的 Web 开发任务提供了强大的工具，并鼓励采用自己的库来处理其他一切，使程序员有灵活性来选择最佳组件来构建他们的应用程序。每个 Flask 应用程序都是不同的，正如项目的文档所述，“Flask 很有趣”。

Flask 微框架在设计和 API 方面代表了与大多数其他流行的 Python Web 框架的不同，这导致许多新手开发人员问：“构建应用程序的正确方法是什么？” Flask 对于我们开发者应该如何构建应用程序并没有提供强烈的意见。相反，它提供了关于构建应用程序所需的意见。Flask 可以被认为是一组对象和函数，用于处理常见的 Web 任务，如将 URL 路由到代码、处理请求数据和渲染模板。虽然 Flask 提供的灵活性令人振奋，但它也可能导致混乱和糟糕的设计。

本书的目的是帮助您将这种灵活性视为机会。在本书的过程中，我们将构建并逐步增强一个由 Flask 驱动的博客网站。通过向网站添加新功能来介绍新概念。到本书结束时，我们将创建一个功能齐全的网站，您将对 Flask 及其常用扩展和库生态系统有着扎实的工作知识。

# 本书涵盖的内容

《第一章》《创建您的第一个 Flask 应用程序》以大胆宣言“Flask 很有趣”开始，这是当您查看官方 Flask 文档时看到的第一件事情之一，在本章中，您将了解为什么许多 Python 开发人员都同意这一观点。

《第二章》《使用 SQLAlchemy 的关系数据库》指出，关系数据库是几乎所有现代 Web 应用程序构建的基石。我们将使用 SQLAlchemy，这是一个强大的对象关系映射器，可以让我们抽象出多个数据库引擎的复杂性。在本章中，您将了解您早期选择的数据模型将影响随后代码的几乎每个方面。

《第三章》《模板和视图》涵盖了框架中最具代表性的两个组件：Jinja2 模板语言和 URL 路由框架。我们将完全沉浸在 Flask 中，看到我们的应用程序最终开始成形。随着我们在本章的进展，我们的应用程序将开始看起来像一个真正的网站。

第四章 *表单和验证*，向您展示如何使用表单直接通过由流行的 WTForms 库处理的网站修改博客内容。这是一个有趣的章节，因为我们将添加各种与网站交互的新方式。我们将创建与我们的数据模型一起工作的表单，并学习如何接收和验证用户数据。

第五章 *用户认证*，解释了如何向您的网站添加用户认证。能够区分一个用户和另一个用户使我们能够开发一整套新的功能。例如，我们将看到如何限制对创建、编辑和删除视图的访问，防止匿名用户篡改网站内容。我们还可以向用户显示他们的草稿帖子，但对其他人隐藏。

第六章 *建立管理仪表板*，向您展示如何为您的网站构建一个管理仪表板，使用优秀的 Flask-Admin。我们的管理仪表板将使特定选定的用户能够管理整个网站上的所有内容。实质上，管理站点将是数据库的图形前端，支持创建、编辑和删除应用程序表中的行的操作。

第七章 *AJAX 和 RESTful API*，使用 Flask-Restless 为博客应用程序创建 RESTful API。RESTful API 是一种强大的访问应用程序的方式，通过提供高度结构化的数据来表示它。Flask-Restless 与我们的 SQLAlchemy 模型非常配合，它还处理复杂的任务，如序列化和结果过滤。

第八章 *测试 Flask 应用*，介绍了如何编写覆盖博客应用程序所有部分的单元测试。我们将利用 Flask 的测试客户端来模拟“实时”请求。我们还将看到 Mock 库如何简化测试复杂的交互，如调用数据库等第三方服务。

第九章 *优秀的扩展*，教您如何使用流行的第三方扩展增强您的 Flask 安装。我们在整本书中都使用了扩展，但现在我们可以探索额外的安全性或功能，而几乎不费吹灰之力，可以很好地完善您的应用程序。

第十章 *部署您的应用程序*，教您如何安全地以自动化、可重复的方式部署您的 Flask 应用程序。我们将看看如何配置常用的 WSGI 能力服务器，如 Apache 和 Nginx，以及 Python Web 服务器 Gunicorn，为您提供多种选择。然后，我们将看到如何使用 SSL 安全地部分或整个网站，最后使用配置管理工具来自动化我们的部署。

# 本书所需内容

虽然 Python 在大多数操作系统上都能很好地运行，而且我们在本书中尽量保持了与操作系统无关的方法，但建议在使用本书时使用运行 Linux 发行版或 OS X 的计算机，因为 Python 已经安装并运行。Linux 发行版可以安装在计算机上或虚拟机中。几乎任何 Linux 发行版都可以，任何最新版本的 Ubuntu 都可以。

# 这本书适合谁

这本书适合任何想要将他们对 Python 的知识发展成可以在 Web 上使用的人。Flask 遵循 Python 的设计原则，任何了解 Python 甚至不了解 Python 的人都可以轻松理解。

# 约定

在本书中，您将找到许多文本样式，用于区分不同类型的信息。以下是这些样式的一些示例及其含义的解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名显示如下：“我们可以通过使用`include`指令来包含其他上下文。”

代码块设置如下：

```py
from app import api
from models import Comment

api.create_api(Comment, methods=['GET', 'POST'])
```

当我们希望引起您对代码块的特定部分的注意时，相关的行或项目会以粗体显示：

```py
{% block content %}
  {{ entry.body }}

  <h4 id="comment-form">Submit a comment</h4>
 {% include "entries/includes/comment_form.html" %}
{% endblock %}
```

任何命令行输入或输出都以以下方式书写：

```py
(blog) $ python manage.py db upgrade
INFO  [alembic.migration] Context impl SQLiteImpl.
INFO  [alembic.migration] Will assume non-transactional DDL.
INFO  [alembic.migration] Running upgrade 594ebac9ef0c -> 490b6bc5f73c, empty message

```

**新术语**和**重要单词**以粗体显示。您在屏幕上看到的单词，例如菜单或对话框中的单词，会以这样的方式出现在文本中：“您应该在空白白色页面上看到消息**Hello, Flask**显示。”

### 注意

警告或重要提示会出现在这样的框中。

### 提示

提示和技巧会以这样的方式出现。
