# 前言

Python 编程语言非常流行，用于各种应用。Python 语言设计得相对容易创建小型程序。为了创建更复杂的软件，我们需要掌握一些重要的编程和软件开发技能。

本书描述了在 Python 中创建程序的**面向对象**方法。它介绍了面向对象编程的术语，通过逐步示例展示软件设计和 Python 编程。它描述了如何利用继承和组合从单个元素构建软件。它展示了如何使用 Python 的内置异常和数据结构，以及 Python 标准库中的元素。本书用详细示例描述了多种常见设计模式。

本书涵盖了如何编写自动化测试以确认我们的软件是否正常工作。它还展示了如何使用 Python 中可用的各种并发库；这使得我们能够编写能够利用现代计算机中的多个核心和多个处理器的软件。一个扩展案例研究涵盖了一个简单的机器学习示例，展示了针对一个中等复杂问题的多种替代解决方案。

# 本书面向对象

本书针对的是对 Python 面向对象编程新手。它假设读者具备基本的 Python 技能。对于有其他面向对象编程语言背景的读者，本书将展示 Python 方法中的许多独特特性。

由于 Python 在数据科学和数据分析中的应用，本书涉及相关的数学和统计学概念。对这些领域的某些知识可以帮助使概念的应用更加具体。

# 本书涵盖的内容

本书分为四个主要部分。前六章提供了面向对象编程的核心原则和概念，以及这些如何在 Python 中实现。接下来的三章通过面向对象编程的视角深入研究了 Python 的内置功能。第十章、第十一章和第十二章探讨了多种常见设计模式以及如何在 Python 中处理这些模式。最后一部分涵盖了两个额外的主题：测试和并发。

*第一章*，*面向对象设计*，介绍了面向对象设计背后的核心概念。这为状态和行为、属性和方法以及对象如何分组为类提供了路线图。本章还探讨了封装、继承和组合。本章的案例研究引入了机器学习问题，这是一个*k*-最近邻（*k*-NN）分类器的实现。

*第二章*，*Python 中的对象*，展示了 Python 中类定义是如何工作的。这包括类型注解，称为类型提示，类定义，模块和包。我们将讨论类定义和封装的实际考虑因素。案例研究将开始实现*k*-NN 分类器的一些类。

*第三章*，*当对象相似时*，讨论了类之间是如何相互关联的。这包括如何利用继承和多继承。我们将探讨类层次结构中类的多态概念。案例研究将探讨用于寻找最近邻的距离计算的不同设计方案。

*第四章*，*预期意外情况*，仔细研究了 Python 的异常和异常处理。我们将探讨内置的异常层次结构。我们还将探讨如何定义独特的异常来反映独特的问题域或应用。在案例研究中，我们将应用异常来进行数据验证。

*第五章*，*何时使用面向对象编程*，更深入地探讨了设计技术。本章将探讨如何通过 Python 的属性实现属性。我们还将探讨用于处理对象集合的**管理器**的一般概念。案例研究将应用这些思想来扩展*k*-NN 分类器的实现。

*第六章*，*抽象基类和运算符重载*，深入探讨了抽象的概念以及 Python 如何支持抽象基类。这包括比较**鸭子类型**与更正式的`Protocol`定义方法。它还包括重载 Python 内置运算符的技术。它还将探讨元类以及如何使用它们来修改类构造。案例研究将重新定义一些现有类，以展示如何谨慎使用抽象来简化设计。

*第七章*，*Python 数据结构*，考察了 Python 的一些内置集合。本章探讨了元组、字典、列表和集合。它还探讨了如何通过提供类的一些常见功能来简化设计的数据类和命名元组。案例研究将修订一些早期的类定义，以利用这些新技术。

*第八章*，*面向对象编程与函数式编程的交集*，考察了 Python 中不是简单的类定义的结构。虽然 Python 的所有内容都是面向对象的，但函数定义允许我们创建可调用的对象，而不需要类定义的杂乱。我们还将探讨 Python 的上下文管理器结构和`with`语句。在案例研究中，我们将探讨避免一些类杂乱的不同设计方案。

*第九章*，*字符串、序列化和文件路径*，涵盖了对象如何序列化为字符串以及如何解析字符串来创建对象。我们将探讨几种物理格式，包括 Pickle、JSON 和 CSV。案例研究将回顾如何通过*k*-NN 分类器加载和处理样本数据。

*第十章*，*迭代器模式*，描述了 Python 中普遍存在的迭代概念。所有内置的集合都是可迭代的，这种设计模式是 Python 工作方式的核心。我们还将探讨 Python 的列表推导式和生成器函数。案例研究将回顾一些早期使用生成器表达式和列表推导式来划分测试和训练样本的设计。

*第十一章*，*常见设计模式*，探讨了常见的面向对象设计。这包括装饰器、观察者、策略、命令、状态和单例设计模式。

*第十二章*，*高级设计模式*，探讨了更高级的面向对象设计。这包括适配器、外观、享元、抽象工厂、组合和模板模式。

*第十三章*，*测试面向对象程序*，展示了如何使用`unittest`和`pytest`为 Python 应用程序提供一个自动化的单元测试套件。这将探讨一些更高级的测试技术，例如使用模拟对象来隔离待测试的单元。案例研究将展示如何为*第三章*中涵盖的距离计算创建测试用例。

*第十四章*，*并发*，探讨了如何利用多核和多处理器计算机系统快速进行计算，并编写对外部事件响应的软件。我们将探讨线程和进程多线程，以及 Python 的`asyncio`模块。案例研究将展示如何使用这些技术对*k*-NN 模型进行超参数调整。

# 为了充分利用本书

所有示例均使用 Python 3.9.5 进行测试。**mypy**工具，版本 0.812，用于确认类型提示的一致性。

一些示例依赖于互联网连接来收集数据。这些与网站的交互通常涉及小规模下载。

一些示例涉及 Python 内置标准库之外的包。在相关章节中，我们注明了这些包并提供了安装说明。所有这些额外的包都在 Python 包索引中，网址为[`pypi.org`](https://pypi.org)。

## 下载示例代码文件

该书的代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Python-Object-Oriented-Programming---4th-edition`](https://github.com/PacktPublishing/Python-Object-Oriented-Programming---4th-edition)。

我们还有其他来自我们丰富的图书和视频目录的代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们！

## 下载彩色图像

我们还提供包含本书中使用的截图/图表彩色图像的 PDF 文件。您可以从这里下载：[`static.packt-cdn.com/downloads/9781801077262_ColorImages.pdf`](https://static.packt-cdn.com/downloads/9781801077262_ColorImages.pdf)

## 使用的约定

在本书中使用了多种文本约定。

`CodeInText`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。例如：“您可以通过在`>>>`提示符处导入`antigravity`模块来确认 Python 正在运行。”

代码块设置如下：

```py
class Fizz:
    def member(self, v: int) -> bool:
        return v % 5 == 0 
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```py
class Fizz:
    **def member(self, v: int) -> bool:**
        return v % 5 == 0 
```

任何命令行输入或输出都如下所示：

```py
python -m pip install tox 
```

**粗体**：表示新术语、重要单词或您在屏幕上看到的单词，例如在菜单或对话框中。例如：“正式来说，一个对象是一组**数据**和相关的**行为**。”

警告或重要注意事项如下所示。

技巧和窍门如下所示。

# 联系我们

我们始终欢迎读者的反馈。

**一般反馈**：请发送电子邮件至`feedback@packtpub.com`，并在邮件主题中提及书籍标题。如果您对本书的任何方面有疑问，请通过`questions@packtpub.com`发送电子邮件给我们。

**勘误**：尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们将不胜感激，如果您能向我们报告这一点。请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击勘误提交表单链接，并输入详细信息。

**盗版**：如果您在互联网上发现我们作品的任何非法副本，我们将不胜感激，如果您能提供位置地址或网站名称。请通过`copyright@packtpub.com`发送链接与我们联系。

**如果您有兴趣成为作者**：如果您在某个主题上具有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问[`authors.packtpub.com`](http://authors.packtpub.com)。

# 分享您的想法

一旦您阅读了*《Python 面向对象编程，第四版》*，我们很乐意听听您的想法！请[点击此处直接访问此书的亚马逊评论页面](https://packt.link/r/1-801-07726-6)并分享您的反馈。

您的评论对我们和科技社区都很重要，并将帮助我们确保我们提供高质量的内容。
