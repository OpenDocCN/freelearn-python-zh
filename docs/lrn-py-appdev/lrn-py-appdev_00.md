# 前言

Python 是最广泛使用的动态编程语言之一。它支持丰富的库和框架，这些库和框架能够实现快速开发。这种快速的开发节奏往往伴随着自己的负担，可能会降低应用程序的整体质量、性能和可扩展性。本书将帮助你通过教授你如何构建和部署有趣的应用程序来提升你的 Python 技能水平。

从一个简单的程序开始，本书带你一步步设计和发展健壮且高效的应用程序。它以易于理解和有趣的方式触及了几个重要主题。

使用幻想主题作为解释各种概念的载体。在本书的整个过程中，你将遇到许多虚构的游戏角色。在你学习不同主题的同时，这些虚构的角色会与你交谈、提问并请求新功能。

每一章都针对应用程序开发的某个不同方面。最初的一些章节侧重于软件的健壮性、打包和发布应用程序代码。接下来的几章是关于通过使代码可扩展、可重用和可读来提高应用程序的寿命。你将学习到重构、单元测试、设计模式、文档和最佳实践。

在性能专题的三个章节中，涵盖了识别瓶颈和改进性能的技术。最后一章介绍了 GUI 开发。

# 需要注意的重要事项

+   本书使用有趣、基于文本的游戏主题作为解释各种应用程序开发方面的载体。然而，本书本身并不是关于开发游戏应用程序的！

+   每一章都将包含其自己的 Python 源代码文件集。尽管我们将讨论大部分代码，但你应该手头保留相关文件。有关更多详细信息，请参阅“下载示例代码”部分。

+   以下内容适用于阅读本书的电子版。本书中展示的大部分代码都是以图像形式创建的。为了获得更好的阅读体验，请尝试使用 100%的缩放比例，因为这些代码快照在缩放级别上应该看起来清晰。

+   练习的解答（如果有）通常不会提供。

+   本书提供了几个外部链接（URL）供进一步阅读。随着时间的推移，其中一些链接可能会失效。如果发生这种情况，请尝试使用适当的搜索词在网络上进行搜索。

+   一些经验丰富的读者可能会觉得代码解释有点冗长。在这种情况下，你可以查看本书支持材料中提供的代码。

# 非常重要提示，针对电子书阅读器

你在本书中看到的代码示例实际上是图像文件或代码快照。

这些图像的渲染质量将取决于你的 PDF 阅读器的页面显示分辨率和缩放级别。

如果你发现阅读此代码有困难，你可以在你的 PDF 或电子书阅读器中尝试以下操作：

+   将缩放级别设置为 100%

+   使用每英寸 96 像素或类似的页面显示分辨率

如果问题仍然存在，您可以尝试使用不同的分辨率。

如何设置这个分辨率？这取决于您的电子书阅读器。例如，如果您正在使用 Adobe Reader，请转到**编辑** | **首选项**，然后从左侧面板中选择**页面显示**。您将在右侧面板中看到**分辨率**作为选项。选择**96 像素/英寸**或类似选项，看看是否有助于更好地渲染图像。

# 本书涵盖的内容

第一章，*开发简单应用程序*，从安装必备条件和本书的主题开始。第一个程序是一个以脚本形式呈现的幻想文本游戏。然后使用函数开发这个程序的一个带有新功能的增量版本。随着更多功能的添加，代码变得难以管理。为了解决这个问题，游戏应用程序使用面向对象的概念进行了重新设计。这个应用程序现在成为接下来几章的参考版本。

第二章，*处理异常*，将教会您如何修复前面章节中编写的代码的明显问题。您将学习如何添加异常处理代码以使应用程序健壮。您还将了解`try…except…finally`子句、抛出和重新抛出异常、创建和使用自定义异常类等内容。

第三章，*模块化、打包、部署！*，将教会您如何模块化和打包前面章节中编写的代码。在准备好包之后，它将向您展示如何部署源分布、进行增量发布、设置私有 Python 包仓库以及将代码置于版本控制之下。

第四章，*文档和最佳实践*，深入探讨了编码标准，这是一套在开发代码时应遵循的指南。遵守这些标准可以对代码的可读性和代码的生命周期产生重大影响。在本章中，您将了解软件开发的重要方面之一，即代码文档和最佳实践。它从 reStructuredText 格式的介绍开始，并使用它来编写文档字符串。您将使用 Sphinx 文档生成器为代码创建 HTML 文档。本章还讨论了编写 Python 代码和使用 PyLint 检查代码质量的一些重要编码标准。

第五章, *单元测试和重构*，从介绍 Python 中的单元测试框架开始。你将为迄今为止开发的游戏应用程序编写一些单元测试。它涵盖了其他许多主题，例如在单元测试中使用 Mock 库以及使用代码覆盖率来衡量单元测试的有效性。本章的后半部分讨论了许多代码重构技术。这是利用前面章节中开发的代码的最后一章。接下来的章节将会有与相同高奇幻主题相关的简化示例。

第六章, *设计模式*，告诉你，在开发过程中，你经常会遇到一个反复出现的问题。很多时候，存在一个通用的解决方案或配方，它正好适用于这个问题。这通常被称为设计模式。本章向你介绍了一些常用的设计模式。它涵盖了策略、简单和抽象工厂、适配器模式。对于每种模式，一个简单的游戏场景将演示一个实际问题。你将学习设计模式如何帮助解决这个问题。每个模式都将使用 Python 方法实现。

第七章, *性能 – 识别瓶颈*，是关于性能提升的三章系列中的第一章。你将编写一个名为*黄金狩猎*的简单程序，它在调整一些参数之前看起来是无害的。参数调整揭示了性能问题。在本章中，你将识别代码中的耗时块。它涵盖了测量应用程序运行时间的基本方法，对代码进行性能分析以识别性能瓶颈，内存分析的基本知识，以及使用大 O 符号来表示计算复杂度。

第八章, *提高性能 – 第一部分*，教你如何修复上一章中识别的一些性能瓶颈。此外，你还将了解一些技术，例如算法更改、列表推导、生成器表达式、选择合适的数据结构等，以提高应用程序的性能。

第九章, *提高性能 – 第二部分，NumPy 和并行化*，是关于性能提升的最后一章，其中你将大幅提升*黄金狩猎*应用程序的性能。本章将向你介绍`NumPy`包。它还将介绍使用 Python 进行并行处理。

第十章，*简单 GUI 应用程序*，是最后一章，它将向你介绍简单 GUI 应用程序的开发。到目前为止，这些章节已经涵盖了使用命令行程序进行应用程序开发的几个关键方面。然而，在这一章中，你将学习关于 `Tkinter` 模块、MVC 架构，以及开发 第一章 中开发的第一个应用程序的 GUI 版本，*开发简单应用程序*。

# 你需要这本书的内容

本书中的代码与 Python 3.5 版本兼容。支持的代码包还提供了与版本 2.7.9 兼容的文件；然而，本书中假设使用的是 Python 3.5。有关需要安装的基本软件包的详细信息，请参阅 第一章 的 *安装先决条件* 部分，*开发简单应用程序*。此外，还有一些需要安装的 Python 软件包依赖项。大多数这些软件包可以使用 pip（Python 软件包管理器）安装。这些依赖项在需要它们的章节中提到。

# 这本书面向谁

你是否了解 Python 和面向对象编程的基础？

你是否愿意走得更远，学习使你的 Python 应用程序健壮、可扩展和高效的技巧？

如果你对这些问题的回答是肯定的，这本书就是为你准备的。它也适合那些有不同编程背景（例如 C++ 或 Java）并希望掌握 Python 应用程序开发的人。

如果以下任何一个陈述适用于你，这本书就不适合你：

+   你对 Python 完全陌生，或者没有 OOP 的背景。第一章涵盖了基础知识，但需要进一步理解。

+   你正在寻找关于特定应用领域的参考，例如 Web、GUI、数据库或游戏应用程序。除了 GUI 之外，本书不涵盖此类特定领域的话题。尽管如此，你在这本书中学到的技术应该为所有这些领域提供一个坚实的基础。

# 习惯用法

在这本书中，你会找到许多文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 账号显示如下：“`GoldHunt.find_coins` 方法有一些更改。”

代码块设置如下：

```py
results = pool.starmap_async(self.find_coins, 
                               zip(itertools.repeat(x_list), 
                                   itertools.repeat(y_list), 
                                   x_centers, 
```

任何命令行输入或输出都按以下方式编写：

```py
export PATH=$PATH:/usr/bin/

```

**新术语** 和 **重要词汇** 以粗体显示。你会在屏幕上看到的单词，例如在菜单或对话框中，在文本中显示如下：“如前所述，在安装时，你应该选择**将 Python 3.5 添加到 PATH 选项**。”

### 注意

警告或重要提示会出现在这样的框中。

### 提示

小技巧和窍门看起来像这样。

# 读者反馈

我们欢迎读者的反馈。告诉我们您对这本书的看法——您喜欢或不喜欢什么。读者反馈对我们很重要，因为它帮助我们开发出您真正能从中获得最大收益的标题。

要向我们发送一般反馈，请简单地发送电子邮件至 `<feedback@packtpub.com>`，并在邮件主题中提及书籍标题。

如果您在某个主题上具有专业知识，并且您对撰写或为书籍做出贡献感兴趣，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在你已经是 Packt 图书的骄傲拥有者，我们有许多事情可以帮助你从购买中获得最大收益。

## 下载示例代码

您可以从[`www.packtpub.com`](http://www.packtpub.com)的账户中下载本书的示例代码文件。如果您在其他地方购买了这本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

您可以通过以下步骤下载代码文件：

1.  使用您的电子邮件地址和密码登录或注册我们的网站。

1.  将鼠标指针悬停在顶部的**支持**标签上。

1.  点击顶部的**支持**标签。

1.  在**搜索**框中输入书籍名称。

1.  选择您想要下载代码文件的书籍。

1.  从下拉菜单中选择您购买此书的来源。

1.  点击**代码下载**。

你还可以通过点击 Packt Publishing 网站上书籍网页上的**代码文件**按钮下载代码文件。您可以通过在**搜索**框中输入书籍名称来访问此页面。请注意，您需要登录您的 Packt 账户。

文件下载完成后，请确保使用最新版本解压或提取文件夹，具体版本如下：

+   WinRAR / 7-Zip for Windows

+   Zipeg / iZip / UnRarX for Mac

+   7-Zip / PeaZip for Linux

本书代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Learning-Python-Application-Development`](https://github.com/PacktPublishing/Learning-Python-Application-Development)。我们还有其他来自我们丰富图书和视频目录的代码包可供选择，网址为[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)。去看看吧！

## 下载本书的颜色图像

我们还为您提供了一个包含本书中使用的截图/图表颜色图像的 PDF 文件。这些颜色图像将帮助您更好地理解输出的变化。您可以从[`www.packtpub.com/sites/default/files/downloads/LearningPythonApplicationDevelopment_ColorImages.pdf`](http://www.packtpub.com/sites/default/files/downloads/LearningPythonApplicationDevelopment_ColorImages.pdf)下载此文件。

## 错误列表

尽管我们已经尽一切努力确保内容的准确性，但错误仍然会发生。如果您在我们的某本书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以节省其他读者的挫败感，并帮助我们改进本书的后续版本。如果您发现任何勘误，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**勘误提交表单**链接，并输入您的勘误详情来报告它们。一旦您的勘误得到验证，您的提交将被接受，勘误将被上传到我们的网站或添加到该标题的勘误部分下的现有勘误列表中。

要查看之前提交的勘误表，请访问[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，并在搜索字段中输入书籍名称。所需信息将出现在**勘误**部分。

## 盗版

互联网上对版权材料的盗版是一个跨所有媒体的持续问题。在 Packt，我们非常重视保护我们的版权和许可证。如果您在互联网上发现任何形式的我们作品的非法副本，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

请通过`<copyright@packtpub.com>`与我们联系，并提供疑似盗版材料的链接。

我们感谢您在保护我们作者和我们为您提供有价值内容的能力方面的帮助。

## 问题

如果您对本书的任何方面有问题，您可以通过`<questions@packtpub.com>`联系我们，我们将尽力解决问题。
