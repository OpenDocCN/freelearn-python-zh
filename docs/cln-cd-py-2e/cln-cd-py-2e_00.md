# 前言

# 本书面向的对象

这本书适合所有对软件设计感兴趣或想了解更多 Python 知识的软件工程从业者。假设读者已经熟悉面向对象软件设计的原则，并且有编写代码的经验。

这本书将吸引那些想要学习良好的 Python 编码技术以从头开始创建项目或改进遗留系统以节省成本和提高效率的团队领导、软件架构师和高级软件工程师。

本书按内容复杂度递增的顺序组织。前几章涵盖了 Python 的基础知识，这是学习语言中可用的主要惯用语、函数和实用程序的好方法。目的不仅仅是用 Python 解决问题，而是以惯用的方式解决问题。

经验丰富的程序员也将从本书的主题中受益，因为一些章节涵盖了 Python 的高级主题，如装饰器、描述符和异步编程的介绍。它将帮助读者更深入地了解 Python，因为一些案例是从语言本身的内部进行分析的。

使用 Python 进行数据处理的科学家也可以从本书的内容中受益，为此，本书的几个部分致力于从头开始设置项目，包括工具、环境配置和发布软件的良好实践。

在本节第一句话中强调“从业者”这个词是值得的。这是一本采取实用主义方法的书籍。例子仅限于案例研究所需的内容，但也被设计成类似于真实软件项目的背景。这不是一本学术书籍，因此所做出的定义、所提出的评论和建议应谨慎对待。读者应批判性地、实用性地而不是教条性地审视这些建议。毕竟，实用性胜过纯粹性。

# 本书涵盖的内容

*第一章*，*介绍、代码格式化和工具*，是介绍读者在 Python 中设置开发环境所需的主要工具。我们涵盖了 Python 开发者建议了解的基本知识，以便有效地使用该语言。它还包括一些关于在项目中保持可读性代码的指南，例如静态分析工具、文档、类型检查和代码格式化。对编码标准的共同理解是好事，但仅依赖良好的意图是无法扩展的。这就是为什么本章以讨论更有效地工作的工具结束。

*第二章*，*Pythonic 代码*，探讨了 Python 中的第一个惯用语，这些惯用语我们将在接下来的章节中继续使用。我们涵盖了 Python 的特殊特性，它们应该如何被使用，以及在这一章中，我们开始围绕 Pythonic 代码通常质量更高的理念构建知识。

*第三章*，*良好代码的一般特性*，回顾了软件工程的一般原则，使重点放在编写更易于维护的代码上。从上一章获得的知识，我们审视了一般的清洁设计理念，以及它们如何在 Python 中实现。

*第四章*，*SOLID 原则*，涵盖了一组面向对象软件设计的设计原则。这个缩写是软件工程语言或术语的一部分，我们看到它们中的每一个如何应用于 Python。特别是，读者将学习依赖注入如何使代码更易于维护，这是一个在下一章中将非常有用的概念。

*第五章*，*使用装饰器改进我们的代码*，探讨了 Python 最伟大的特性之一。在理解了如何创建装饰器（用于函数和类）之后，我们将它们用于代码重用、分离责任和创建更细粒度的函数。本章的另一个有趣的学习点是，如何利用装饰器简化复杂和重复的函数签名。

*第六章*，*使用描述符让我们的对象更有价值*，探讨了 Python 中的描述符，将面向对象设计提升到了一个新的水平。虽然这是一个与框架和工具更相关的特性，但我们可以看到如何使用描述符来提高代码的可读性，以及代码的重用。本章回顾的内容将使读者对 Python 达到更高的理解水平。

*第七章*，*生成器、迭代器和异步编程*，首先展示了生成器是如何成为 Python 的一个绝佳特性的。迭代是 Python 的核心组件这一事实可能会让我们认为它引领了一种新的编程模型。通过一般地使用生成器和迭代器，我们可以以不同的方式思考我们编写程序的方式。从生成器中学到的经验教训，我们进一步学习 Python 中的协程和异步编程的基础。本章以解释异步编程和异步迭代的新的语法（以及新的魔法方法！）结束。

*第八章*，*单元测试和重构*，讨论了单元测试在声称可维护的任何代码库中的重要性。我们讨论重构作为代码库演变和维护的先决条件，以及单元测试对此的重要性。所有这些，都有适当的工具（主要是`unittest`和`pytest`模块）的支持。最后，我们了解到良好测试的秘密并不在于测试本身，而在于拥有可测试的代码。

*第九章*，*常见设计模式*，回顾了如何在 Python 中实现最常见的设计模式，不是从解决问题的角度出发，而是通过考察它们如何通过利用更好、更易于维护的解决方案来解决问题。本章提到了 Python 的一些特性，使得某些设计模式变得不明显，并采取了实用主义方法来实现其中的一些模式。我们讨论了其他（不那么“传统”）的、特定于 Python 的模式。

*第十章*，*整洁架构*，重点介绍了整洁代码是良好架构的基础。我们在第一章中提到的所有细节，以及沿途重新审视的所有其他内容，在系统部署时在整个设计中都将发挥关键作用。

# 要充分利用本书

预期读者具有一定的编程经验，并对 Python 语法的基础知识有所了解。此外，还假设读者具备基本编程知识，如结构化编程和面向对象设计知识。

要测试代码，您需要安装 Python，可以从[`www.python.org/downloads/`](https://www.python.org/downloads/)下载。代码在 Python 3.9+上运行，强烈建议创建虚拟环境。另外，代码也可以在 Docker 镜像中测试。

## 下载示例代码文件

本书代码包托管在 GitHub 上，网址为[`github.com/PacktPublishing/Clean-Code-in-Python-Second-Edition`](https://github.com/PacktPublishing/Clean-Code-in-Python-Second-Edition)。我们还有其他丰富的图书和视频的代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。请查看它们！

## 下载彩色图像

我们还提供了一份包含本书中使用的截图/图表的彩色图像的 PDF 文件。您可以从这里下载：[`static.packt-cdn.com/downloads/9781800560215_ColorImages.pdf`](https://static.packt-cdn.com/downloads/9781800560215_ColorImages.pdf)

## 使用的约定

本书使用了多种文本约定。

`CodeInText`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。例如；“然后，只需运行`pylint`命令就足以在代码中检查它。”

代码块设置如下：

```py
@dataclass
class Point:
    lat: float
    long: float 
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```py
setup(
    name="apptool",
    description="Description of the intention of the package",
    long_description=long_description,
) 
```

任何命令行输入或输出都如下所示：

```py
>>> locate.__annotations__
{'latitude': float, 'longitue': float, 'return': __main__.Point} 
```

**粗体**：表示新术语、重要词汇或您在屏幕上看到的词汇，例如在菜单或对话框中，也以这种方式出现在文本中。例如：“我们希望有一个更好的**关注点分离**的设计。”

警告或重要提示如下所示。

小技巧和窍门如下所示。

# 联系我们

我们欢迎读者的反馈。

**一般反馈**: 请通过`feedback@packtpub.com`发送邮件，并在邮件主题中提及书籍的标题。如果您对本书的任何方面有疑问，请通过`questions@packtpub.com`发送邮件给我们。

**勘误**: 尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们将不胜感激，如果您能向我们报告这一点。请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击勘误提交表单链接，并输入详细信息。

**盗版**: 如果您在互联网上以任何形式发现我们作品的非法副本，如果您能提供位置地址或网站名称，我们将不胜感激。请通过`copyright@packtpub.com`与我们联系，并附上材料的链接。

**如果您有兴趣成为作者**: 如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问[`authors.packtpub.com`](http://authors.packtpub.com)。

## 评论

请留下评论。一旦您阅读并使用过这本书，为何不在您购买它的网站上留下评论呢？潜在读者可以查看并使用您的客观意见来做出购买决定，Packt 可以了解您对我们产品的看法，我们的作者也可以看到他们对书籍的反馈。谢谢！

如需了解 Packt 的更多信息，请访问[packtpub.com](http://packtpub.com)。
