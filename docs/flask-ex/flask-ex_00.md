# 前言

理论上，没有什么是有效的，但每个人都知道为什么。实践中，一切都有效，但没有人知道为什么。在这里，我们结合理论和实践；没有什么有效，也没有人知道为什么！

学习计算机科学必须始终是理论和实践的结合；你需要知道你在做什么（理论），但你也需要知道如何去做（实践）。我学习如何创建 Web 应用程序的经验是，很少有老师找到了这种平衡的甜蜜点；要么我读了很多关于继承、虚拟环境和测试驱动开发的页面，想知道它们如何适用于我，要么我安装了一堆工具、框架和库，看着魔术发生，却不知道它是如何工作的。

接下来的内容，我希望是一个很好的平衡。从第一章开始，你将拥有一个 Flask Web 应用程序，全世界都可以访问，即使它只是用“你好，世界！”来欢迎访客，这也是相当实用的。在接下来的章节中，我们将一起构建三个有趣且有用的项目。总的来说，我们会尽可能地自己构建东西。虽然重新发明轮子不是好事，但在接触解决方案之前接触问题是很好的。在你写一行 CSS 之前学习 CSS 框架会让你感到困惑，你会想，“但我真的需要这个吗？”，对于许多其他框架和工具也是如此。因此，我们将从零开始，看看为什么这很困难，然后介绍工具来让我们的生活变得更容易。我认为这是理论和实践之间的理想平衡。

当我告诉别人我正在写一本关于 Flask 的书时，常见的回答是“为什么？已经有很多关于 Flask 的书和教程了。”这是一个合理的问题，对它的回答为这本书提供了一个很好的概述。《Flask 实例》与其他 Flask 教育材料不同，原因如下。

**我们不会让你陷入困境**

许多 Flask 教程向您展示如何开发一个 Flask 应用程序并在本地计算机上运行它，然后就结束了。这作为第一步是很好的，但如果您有兴趣构建 Web 应用程序，您可能希望它们能够在网络上访问，这样您的朋友、家人、同事和客户就可以在不经过您家的情况下欣赏到您的手工艺品。从我们的第一个项目开始，我们的应用程序将在虚拟专用服务器（VPS）上运行，并且可以被全世界访问。

**我们不会构建博客应用程序**

如果你读过任何 Web 应用程序开发教程，你一定会注意到几乎每一个教程都是关于如何使用 x 和 y 构建一个博客。我对博客示例感到相当厌倦（实际上，我再也不想看到有人告诉我如何构建博客了）。相反，你将学习如何使用 Flask 开发一些有趣、原创，甚至可能有用的项目。

**我们将专注于安全**

最近，网络犯罪已经成为一个热门词汇。可以说，我们几乎每天都会读到关于主要 Web 应用程序被黑客攻击的消息，这是因为很多开发人员不了解 SQL 注入、CSRF、XSS、如何存储密码等许多应该被视为基本知识的东西。在本书中，当我们开发这三个项目时，我们将花时间详细解释一些核心安全概念，并向您展示如何加固我们的应用程序，以防潜在的恶意攻击者。

**我们将提供深入的解释**

我们不仅会给你一些代码然后告诉你去运行它。在任何可能的情况下，我们都会解释我们在做什么，为什么这样做，以及我们是如何做的。这意味着你将能够从所有项目中汲取灵感，将它们与你自己的想法结合起来，在阅读完本书后立即开始构建原创内容。

因此，我希望这本书对你有所帮助，无论你是刚开始涉足计算机科学和编程世界，还是拥有著名大学的计算机科学学位，耳朵里充满了编译器理论，但现在想要构建一些实用和有趣的东西。希望你在完成这些项目时和我在组织它们时一样开心！

# 本书涵盖的内容

第一章，“你好，世界！”，教你如何设置我们的开发环境和 Web 服务器，并编写我们的第一个 Flask 应用程序。

第二章，“开始我们的头条新闻项目”，向您展示了当用户访问 URL 时如何运行 Python 代码以及如何向用户返回基本数据。我们还将看看如何使用 RSS 订阅自动获取最新的头条新闻。

第三章，“在我们的头条新闻项目中使用模板”，介绍了 Jinja 模板，并将它们整合到我们的头条新闻项目中。我们将展示如何通过从 Python 代码传递数据到模板文件来提供动态 HTML 内容。

第四章，“我们头条新闻项目的用户输入”，展示了如何从互联网上获取用户输入，并使用这些输入来定制我们将向用户展示的内容。我们将看看如何通过 JSON API 访问当前天气信息，并将这些信息包含在我们的头条新闻项目中。

第五章，“改善我们的头条新闻项目的用户体验”，指导您向我们的头条新闻项目添加 cookie，以便我们的应用程序可以记住我们用户的选择。我们还将通过添加一些基本的 CSS 来为我们的应用程序添加样式。

第六章，“构建交互式犯罪地图”，介绍了我们的新项目，即犯罪地图。我们将介绍关系数据库，在服务器上安装 MySQL，并了解如何从我们的 Flask 应用程序与我们的数据库交互。

第七章，“向我们的犯罪地图项目添加谷歌地图”，指导您添加谷歌地图小部件，并演示如何根据我们的数据库添加和删除地图上的标记。我们将添加一个带有各种输入的 HTML 表单，供用户提交新的犯罪信息，并显示现有的犯罪信息。

第八章，“在我们的犯罪地图项目中验证用户输入”，通过确保用户不能意外地或通过恶意制作的输入来破坏它，完善了我们的第二个项目。

第九章，“构建服务员呼叫应用程序”，介绍了我们的最终项目，这是一个在餐厅呼叫服务员到餐桌的应用程序。我们将介绍 Bootstrap，并设置一个使用 Bootstrap 作为前端的基本用户账户控制系统。

第十章，“在服务员呼叫项目中使用模板继承和 WTForms”，介绍了 Jinja 的模板继承功能，以便我们可以添加类似的页面而不重复代码。我们将使用 WTForms 库使我们的 Web 表单更容易构建和验证。

第十一章，“在我们的服务员呼叫项目中使用 MongoDB”，讨论了如何在服务器上安装和配置 MongoDB，并将其链接到我们的服务员呼叫项目。我们将通过向我们的数据库添加索引和向我们的应用程序添加一个网站图标来完成我们的最终项目。

附录，*未来的一瞥*，概述了一些重要的主题和技术，我们无法详细介绍，并指出了更多关于这些内容的学习指引。

# 本书需要什么

我们将使用的所有示例都假定您在开发机器上使用 Ubuntu 操作系统，并且可以访问运行 Ubuntu Server 的服务器（我们将在第一章讨论如何设置后者）。如果您强烈偏好另一个操作系统，并且已经设置了 Python 环境（包括 Python 包管理器 pip），那么这些示例将很容易转换。

本书中使用的所有其他软件和库都是免费提供的，我们将在需要时详细演示如何安装和配置它们。

# 本书适合谁

您是否看过 PHP 并讨厌那笨重的语法？或者，您是否看过.Net 并希望它更加开放和灵活？您是否尝试过 Python 中的 GUI 库，并发现它们难以使用？如果您对这些问题的任何一个答案是肯定的，那么这本书就是为您而写的。

本书还适用于那些了解 Python 基础知识并希望学习如何使用它构建具有 Web 前端的强大解决方案的人。

# 约定

在本书中，您将找到许多文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄显示如下："我们可以通过使用`include`指令来包含其他上下文。"

代码块设置如下：

```py
@app.route("/")
def get_news():
return "no news is good news"
```

当我们希望引起您对代码块的特定部分的注意时，相关行或项将以粗体显示：

```py
import feedparserfrom flask import Flask
app = Flask(__name__)BBC_FEED = "http://feeds.bbci.co.uk/news/rss.xml"
```

任何命令行输入或输出都以以下方式书写：

```py
sudo apt-get update
sudo apt-get install git

```

**新术语**和**重要单词**以粗体显示。例如，屏幕上看到的单词，例如菜单或对话框中的单词，会以这样的方式出现在文本中："单击**下一步**按钮将您移至下一个屏幕。"

### 注意

警告或重要说明显示在这样的框中。

### 提示

提示和技巧显示如下。
