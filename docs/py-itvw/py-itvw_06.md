# 第六章。Massimo Di Pierro

![Massimo Di Pierro](img/B08180_12_01.jpg)

Massimo Di Pierro 是一位意大利网络开发者、数据科学专家和讲师。在过去 15 年里，Massimo 在芝加哥的德保罗大学计算机学院担任教授。他是开源网络应用框架 web2py 的发明者和主要开发者，该框架是用 Python 编写的。Massimo 是全球开源 Python 项目的常规贡献者，并出版了三本关于 Python 的书籍，包括《Python 注释算法》。他在 Python 社区中的活跃工作使他被选为 Python 软件基金会（PSF）的成员。

> **讨论主题：web2py、Python 书籍、v2.7/v3.x。**
> 
> **在这里与 Massimo Di Pierro 取得联系：@mdipierro**

**Mike Driscoll**: 你是如何成为一名计算机程序员的？

**Massimo Di Pierro**: 所以我是一名物理学家，但实际上我是在中学时开始学习计算机编程的。我爸爸在家里有 IBM PC。他是一名 COBOL 程序员，他主要使用会计软件。

当我 13 岁时，我爸爸给我讲了一堂 COBOL 课。我和他一起去，他以为我只是跟着去，但我理解他在说什么，然后我有所领悟。我爸爸后来给我买了一台 Commodore 64，我开始用 BASIC 编程，后来又用 Pascal。

**Driscoll**: 你是如何接触到 Python 语言的？

**Di Pierro**: 那是在很久以后。我在英国读博士，那时我主要用 Fortran、C 和 C++编程。我的工作是在晶格量子色动力学领域，我的机器是 Cray T3E。那是我开始学习 Python 的时候。当时，Python 主要被用作自动化文件处理和脚本维护任务的工具。到 2004 年，它已经成为我最喜欢的语言。

**Driscoll**: 是有什么顿悟让你决定 Python 是你的最爱语言，还是你只是大量使用这个语言？

**Di Pierro**: 那么，当时很多现在存在的库要么不可用，要么不够成熟。

我真正喜欢 Python 的地方在于我可以进行内省：我可以询问一个函数它的参数是什么。所以使用 Python，我可以编写出在一定程度上能理解自己的代码。

> **Di Pierro: '使用 Python，我可以编写出在一定程度上能理解自己的代码。'**

我记得在多年前用 BASIC 做过类似的事情，但在 C++这样的语言中我无法轻易做到。我真的很喜欢编写能够重写自己的程序的想法。例如，我编写了一个名为 OCL 的库，它允许我在 Python 中装饰一些简单的函数，它们在运行时会被转换成 C 或 OpenCL，并以更高的速度运行（它使用 PyOpenCL）。

**Driscoll**: 那么，是什么让你创造了 web2py？

**Di Pierro**：所以 web2py 是在 2007 年开始的。当时，最受欢迎的两个 Python 框架是 Django 和 TurboGears。我有两个需求：我想在模型-视图-控制器架构中教授网络开发，而且我自己需要构建一些网络应用。

我当时正在评估 Django 和 TurboGears，并且我已经使用 Django 有一段时间了。我为联合国开发了一个内容管理系统，这是大学的一项无偿工作。所以我对 Django 非常了解，但我认为 Django 语法冗长，作为初学框架来说有点难以教授。

为了在 Django 中进行初始化，你需要对 Bash shell 和一些系统管理工具有所了解。当时我很多学生都没有这样的经验。所以我想要教授 Python 网络开发，但对我来说，通过所有这些工具到达那个点的工作量太大。我需要一个框架，它能下载一个文件，启动，并通过网络界面完成所有操作。

> **Di Pierro**：“我需要一个框架，它能下载一个文件，启动，并通过网络界面完成所有操作。”

我还在 TurboGears 上工作过，在很多方面我更喜欢它，但 TurboGears 正处于一个大的转型期。它是一个由组件组成的框架，很多组件正在被替换，因为它们没有得到维护。

TurboGears 似乎没有一个稳定的 API，因此它不适合我作为教学工具。所以我决定应用我所学的知识，构建一个我认为更容易开始的框架。我从未想过这个框架会像现在这样受欢迎。

> **Di Pierro**：“我决定应用我所学的知识，构建一个我认为更容易开始的框架。”

**Driscoll**：那么，你认为你在创建 web2py 的过程中学到的最重要的教训是什么？

**Di Pierro**：我学到的最重要的教训是建立社区的重要性。通过远程工作，我认识了很多很多人，尽管其中很多人我至今都没有见过。

当我开始开发 web2py 时，我对像 Git 这样的协作工具并不熟悉。web2py 的第一个版本使用了 Launchpad。我记得有人通过电子邮件给我发邮件提供帮助或提出建议。我对此并没有做好准备。

> **Di Pierro**：“我仍然认为能够与远程的人进行协作是一项关键技能，即使你并不认识他们。”

我不知道如何处理协作很多年。今天，我仍然认为能够与远程的人进行协作是一项关键技能，即使你并不认识他们。我的意思是，最终我认识并信任了他们。我最信任的一些人是我通过 web2py 认识的。

**Driscoll**：你有没有在 FaaS 或 Django 中看到任何你认为适合 web2py 的功能？

**迪·皮埃罗**：web2py 在很大程度上得益于 Django，因为许多想法都来自它，以及其他框架。然而，我们在 web2py 中添加了许多 Django 当时没有的特性。例如，更强的默认安全设置，如默认情况下总是转义字符串。这些框架有着非常不同的哲学。

有许多使用 Django 的项目，每个项目都有自己的名称和维护者。它们非常先进，维护得很好。在 web2py 中，我们试图将所有内容都放在一个包中，这样我们就不需要在框架之外有一个庞大的生态系统。

> **迪·皮埃罗**：“web2py 在很大程度上得益于 Django，因为许多想法都来自它，以及其他框架。”

web2py 中有许多来自其他框架的想法，但我相信我们在一些想法上有所改进。例如，web2py 中表单生成和处理的机制并不独特，但在开发时，它比竞争对手更好。

模型-视图-控制器设计架构主要来自 Django，URL 映射也非常相似。对于后者，我们提供了默认路由规则，就像在 Ruby on Rails 中一样。对于模板语言，我们决定我们不希望有一个特定领域的语言。相反，我们希望在模板中使用纯 Python，这与 Ruby on Rails 中的 ERB 模板语言有点相似，但使用 Python 语言。

在 web2py 中后来添加的其他特性，也受到了其他框架的启发。例如，我从 Flask 中喜欢的一个想法是线程局部变量的概念。所以线程局部变量允许任何模块访问当前的请求对象、当前响应对象或当前会话，即使代码是从其他地方导入的模块中根生的。我喜欢 Flask 处理这个问题的方法。

因此，确实有很多来自其他框架的想法，我认为彼此之间有很多学习。并不是每个人都承认这一点，但我很高兴承认这一点。

> **迪·皮埃罗**：“彼此之间有很多学习。并不是每个人都承认这一点，但我很高兴承认这一点。”

**德里斯科尔**：所以我看到你开始自出版书籍。这是怎么发生的？

**迪·皮埃罗**：我是一名学者，所以我应该写论文和写书。因为我正在为软件编写文档，所以我能够快速更新书籍内容的能力对我来说非常重要。自出版允许这样做。

我真的相信开源，不仅是对代码，而且在一般的教育内容上也是如此。我几乎以成本价自出版我的书籍，并免费提供下载。对我来说，使内容保持最新和快速提供是首要任务。

此外，如果我写一本书，那是因为我想让人们阅读它，而不是因为我认为可以从中获利。最终，内容的验证来自读者，而不是出版商。所以我发现自出版对我来说是理想的。话虽如此，一旦你完成了一本书，你就不想再碰它太多。相反，你想要写另一本书！

**德里斯科尔**：你在写书时遇到了哪些挑战需要克服？

**迪·皮耶罗**：首先，我不是母语为英语的人。所以我会写，但我倾向于犯很多错误。我花了很多时间来审查事情并确保它们被修复。

> **迪·皮耶罗**：“即使我认为自己是专家，这并不意味着我了解一个主题的所有内容。”

另一个挑战是，即使我认为自己是专家，这并不意味着我了解一个主题的所有内容。我总是有一个过程，那就是先写代码。然后我看代码，把代码变成论文或书籍。这样，我设法使文本与代码示例保持一致。如果你在写完文本后更改了代码，那么有时文本就会脱节，所以我真的很想确保我的示例尽可能好、尽可能完整。

围绕《web2py》这本书的一个挑战是，我收到了很多人在 GitHub 上提交给这本书的拉取请求。他们最初通过进行小的修正来做出贡献，但现在有时他们贡献得相当多。

跟踪贡献者很困难，因为我知道他们的 GitHub 名字，但无法正确地认可他们。人们总是给我发代码，但他们从未在致谢部分提交拉取请求。为了认可这些人，我需要做很多工作。

**德里斯科尔**：那么作为一个科学家或教师，你是如何看待 Python 帮助科学界的？

**迪·皮耶罗**：我发现 Python 已经发展得非常快，尤其是在科学界。特别是，我看到了随着 sklearn、TensorFlow 和 Keras 等机器学习工具的出现而带来的增长。

我记得当我 15 年前开始教学时，人们不知道 Python 是什么。一些同事反对将 Java 切换为 Python 作为主要教学语言。许多人认为 Python“仅仅是一种脚本语言”，并且非常专业化。

> **迪·皮耶罗**：“许多人认为 Python“仅仅是一种脚本语言”，并且非常专业化。”

现在，在我们教授的几乎每一门课程中，无论是神经网络课程、机器学习课程还是数据分析课程，几乎每个人都使用 Python。在这方面，事情真的发生了很大的变化。

> **迪·皮耶罗**：“我看到的最大问题是 Python 2 和 Python 3 之间的关系仍然是一个问题。”

我看到的主要问题是 Python 2 和 Python 3 之间的关系仍然是一个问题。在德保罗大学，我们几乎到处都在使用 Python 3，而行业仍然主要使用 Python 2，这在某些时候是个问题。

另一个问题是非常少的人使用 Python 3 中可用的新的异步逻辑。我认为 Python 的新异步逻辑非常强大，但它不像 JavaScript 的异步逻辑那样友好。真正喜欢事件驱动异步编程的人往往更倾向于选择 JavaScript（和 Node.js）而不是 Python。

> **迪皮埃罗**：“我认为 Python 的新异步逻辑非常强大，但它不像 JavaScript 的异步逻辑那样友好。”

**德里斯科尔**：“我实际上对开始支持 Python 2 的其他公司有点担心。如果他们继续支持 Python 2 而不是 Python 3，您认为这些分裂的小组会发生什么，尤其是那些跟随 Anaconda 或 Intel 的小组？”

**迪皮埃罗**：“嗯，我不争论 Python 3 比 Python 2 更好的事实，但我认为从 Python 2 迁移到 Python 3 是困难的。这不能完全自动化，通常它需要理解代码。人们不愿意去碰那些目前还在工作的事物。”

> **迪皮埃罗**：“我不争论 Python 3 比 Python 2 更好的事实，但我认为从 Python 2 迁移到 Python 3 是困难的。”

例如，Python 2 中的`str`函数将转换为字节字符串，但在 Python 3 中，它转换为 Unicode。这使得在没有实际通过代码并理解传递给函数的输入类型和预期的输出类型的情况下，从 Python 2 切换到 Python 3 变得不可能。

如果你的输入中没有奇怪的字符（比如不映射到 Unicode 的字节序列），那么简单的转换可能工作得很好。当这种情况发生时，你不知道代码是否在执行它原本应该执行的操作。以银行为例，他们有巨大的 Python 代码库，这些代码经过多年的开发和测试。他们不会轻易转换，因为这很难证明这种成本是合理的。考虑这一点：一些银行仍在使用 COBOL。

有工具可以帮助从 Python 2 迁移到 Python 3。我并不是这些工具的专家，所以我看到的大部分问题可能都有解决方案，但我并不知情。但每次我需要转换代码时，这个过程都没有我想象的那么简单。

**德里斯科尔**：您是否看到 Python 在数据科学领域的采用有任何挑战？

**迪皮埃罗**：“我认为数据科学家喜欢 Python。主要竞争对手是 R，我有一种印象，R 在经济学家和统计学家中更受欢迎。但我不认为 R 更受欢迎是因为它更好，只是因为它存在的时间更长，而且它更专注于这一点。”

R 语言已经存在很长时间了，人们都知道他们可以用 R 做些什么。那些精通这种语言的人并不觉得有必要学习其他的东西。R 语言始终专注于数据科学领域，因此那个社区的人对这种语言更为熟悉。

> **Di Pierro**: “我看到 Python 被越来越多人采用，最终可能会比 R 更受欢迎，用于数据科学。”

我不会将 R 语言与 Python 语言本身进行比较，而是将其与 pandas 库进行比较。我认为 Python 加上 pandas 在与 R 的比较中构成了一个很有说服力的案例。事实上，这正是我现在在机器学习课程中使用的方法。但我看到 Python 被越来越多人采用，最终可能会比 R 更受欢迎，用于数据科学。我毫不怀疑这一点将会发生。

**Driscoll**: 谢谢，Massimo Di Pierro。
