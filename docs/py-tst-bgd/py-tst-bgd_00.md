# 前言

就像任何程序员一样，你需要能够生成符合规范的可靠代码，这意味着你需要测试你的代码。在这本书中，你将学习如何使用技术和 Python 工具来减少测试中的工作量，同时使其更加有用——甚至有趣。

你将了解 Python 的几个自动化测试工具，以及它们旨在支持的理念和方法，如单元测试和测试驱动开发。完成之后，你将能够比以往任何时候都更快、更轻松地生成经过充分测试的代码，并且以一种不会分散你“真正”编程的方式完成。

# 本书涵盖的内容

第一章：*测试以娱乐和盈利*介绍了 Python 测试驱动开发和各种测试方法。

第二章：*Doctest：最简单的测试工具*介绍了 doctest 工具，并教你如何使用它。

第三章：*使用 Doctest 进行单元测试*介绍了单元测试和测试驱动开发的概念，并将 doctest 应用于创建单元测试。

第四章：*通过使用 Mock 对象打破紧密耦合*涵盖了 Mock 对象和 Python Mocker 工具。

第五章：*当 Doctest 不够用时：Unittest 来拯救*介绍了 unittest 框架，并讨论了何时它比 doctest 更受欢迎。

第六章：*运行测试：顺其自然*介绍了 Nose 测试运行器，并讨论了项目组织。

第七章：*开发测试驱动型项目*详细介绍了完整的测试驱动开发过程。

第八章：*使用 Twill 测试 Web 应用程序前端*将前几章中获得的知识应用于 Web 应用程序，并介绍了 Twill 工具。

第九章：*集成测试和系统测试*教授如何从单元测试构建到完整的软件系统测试。

第十章：*其他测试工具和技术*介绍了代码覆盖率和持续集成，并教授如何将自动化测试与版本控制系统相结合。

附录：*常见问题解答的答案*包含了所有常见问题解答的答案，按章节划分。

# 为本书所需的条件

要使用这本书，你需要一个可工作的 Python 解释器，最好是 2.6 版本系列之一。你还需要一个源代码编辑器，以及偶尔访问互联网。你需要足够熟悉你操作系统的文本界面——你的 DOS 提示符或命令外壳——以进行基本的目录管理和运行程序。

# 这本书面向的对象

如果你是一名 Python 开发者，并想为你的应用程序编写测试，这本书将帮助你入门，并展示学习测试的最简单方法。

你需要具备扎实的 Python 编程知识才能跟上。了解软件测试会有帮助，但不需要正式的测试知识，也不需要了解书中讨论的任何库。

# 习惯用法

在这本书中，你会发现几个经常出现的标题。

为了清楚地说明如何完成一个程序或任务，我们使用：

# 行动时间 - 标题

1.  行动 1

1.  行动 2

1.  行动 3

指令通常需要一些额外的解释，以便它们有意义，因此它们后面跟着：

## *刚才发生了什么？*

这个标题解释了你刚刚完成的任务或指令的工作原理。

你还会在书中找到一些其他的学习辅助工具，包括：

## 快速测验标题

这些是旨在帮助你测试自己理解的小型多项选择题。

## 尝试一下英雄式标题

这些设置了实际挑战，并为你提供了实验所学内容的想法。

你还会发现许多文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码词如下所示：“我们可以通过使用`include`指令来包含其他上下文。”

代码块如下设置：

```py
...     if node.right is not None:
...         assert isinstance(node.right, AVL)
...         assert node.right.key > node.key
...         right_height = node.right.height + 1
```

当我们希望引起你对代码块中特定部分的注意时，相关的行或项目将以粗体显示：

```py
...     if node.right is not None:
...         assert isinstance(node.right, AVL)
...         assert node.right.key > node.key
...         right_height = node.right.height + 1
```

任何命令行输入或输出如下所示：

```py
# cp /usr/src/asterisk-addons/configs/cdr_mysql.conf.sample
     /etc/asterisk/cdr_mysql.conf

```

**新术语**和**重要词汇**以粗体显示。你在屏幕上看到的词，例如在菜单或对话框中，在文本中如下所示：“点击 Next 按钮将你带到下一个屏幕”。

### 注意

警告或重要注意事项以这样的框显示。

### 小贴士

小技巧和窍门看起来像这样。

# 读者反馈

我们始终欢迎读者的反馈。告诉我们你对这本书的看法——你喜欢什么或可能不喜欢什么。读者反馈对我们开发你真正能从中获得最大收益的标题非常重要。

要发送一般反馈，只需发送电子邮件至`<feedback@packtpub.com>`，并在邮件主题中提及书名。

如果有你想让我们出版且需要看到的书籍，请通过 www.packtpub.com 上的**建议标题**表格或发送电子邮件至`<suggest@packtpub.com>`给我们留言。

如果您在某个主题上具有专业知识，并且您对撰写或参与一本书感兴趣，请参阅我们的作者指南 [www.packtpub.com/authors](https://www.packtpub.com/authors)。

# 客户支持

现在，您已经是 Packt 书籍的骄傲拥有者，我们有一些事情可以帮助您从您的购买中获得最大收益。

### 小贴士

**下载本书的示例代码**

访问 [`www.packtpub.com/files/code/8846_Code.zip`](http://www.packtpub.com/files/code/8846_Code.zip) 直接下载示例代码。

可下载的文件包含如何使用它们的说明。

## 勘误

尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在我们的书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以避免其他读者的挫败感，并帮助我们改进本书的后续版本。如果您发现任何勘误，请通过访问 [`www.packtpub.com/support`](http://www.packtpub.com/support)，选择您的书籍，点击**让我们知道**链接，并输入您的勘误详情来报告它们。一旦您的勘误得到验证，您的提交将被接受，勘误将被添加到任何现有的勘误列表中。任何现有的勘误都可以通过从 [`www.packtpub.com/support`](http://www.packtpub.com/support) 选择您的标题来查看。

## 侵权

互联网上版权材料的侵权是一个跨所有媒体的持续问题。在 Packt，我们非常重视我们版权和许可证的保护。如果您在互联网上发现我们作品的任何非法副本，无论形式如何，请立即提供位置地址或网站名称，以便我们可以追究补救措施。

请通过 `<copyright@packtpub.com>` 与我们联系，并提供疑似侵权材料的链接。

我们感谢您在保护我们的作者以及为我们带来有价值内容的能力方面的帮助。

## 询问

如果您在本书的任何方面遇到问题，可以通过 `<questions@packtpub.com>` 联系我们，我们将尽力解决。
