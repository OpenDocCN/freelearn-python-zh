# 前言

当你阅读这段文字时，你已经接触到了 Odoo，这是增长最快的开源 ERP 商业套件之一。Odoo 是一个功能齐全的开源平台，它帮助构建适用于各种行业的解决方案。如果你是开发者，你正坐在一座金矿上。如果你是最终用户，你将获得一个惊人的工具来简化你的业务流程，从售前到销售、库存和会计，一应俱全。

除了 Odoo 中可用的广泛应用程序列表，它就像一块美味的面团（嗯，这让你想起了令人垂涎的披萨吗？）可以根据你的需求进行塑形。技术上讲，它是一个非常灵活的 ORM 控制器（对象关系映射）驱动的应用程序开发框架，考虑到可扩展性而构建。遵循继承规则，功能/扩展和修改可以作为模块实现，这些模块被分类为应用程序。在这里提到 ORM，Odoo 展示了单体架构。

Odoo 17 开发食谱为开发者提供了一个坚实的平台，无论他们是初学者还是熟练者。代码片段涵盖了大多数问题和用例，解释的字段有助于准确开发模块，同时保持代码质量和可用性。作为额外的好处，*第二十五章*是一个特别的章节，它帮助开发者和非开发者快速生成原型。

这本书由整个 Serpent Consulting Services Pvt Ltd 团队编写和支持，每个人都贡献了自己的时间和精力，让梦想成真。

# 这本书面向的对象

这本书面向所有层次的开发者，需要至少了解面向对象编程，Python 是必备技能。即使是 Python 编程的新手也可以找到这本书适合。它旨在适应那些编程知识有限但强烈渴望学习的开发者。

偏好的开发编辑器是 PyCharm、Eclipse 或 Sublime，但预计大多数开发者将在基于 Ubuntu/Debian 的操作系统上运行 Odoo。代码示例有意保持简单和清晰，并配有详尽的解释，以促进理解。新手将从基础知识掌握概念，确保学习之旅愉快。

已经熟悉 Odoo 的资深开发者也应该在这本书中找到价值。它不仅增强了他们现有的知识，还提供了一个简单的方法来保持对最新 Odoo 版本的更新，其中显著的变化被突出显示。

最终，这本书旨在作为新人和资深开发者日常使用的坚实参考。此外，不同 Odoo 版本之间差异的文档将是对同时处理不同版本或移植模块的开发者有价值的资源。

# 这本书涵盖的内容

*第一章**,* 安装 Odoo 开发环境，解释了如何创建 Odoo 开发环境、启动 Odoo、创建配置文件以及激活 Odoo 的开发者工具。

*第二章**,* 管理 Odoo 服务器实例，提供了与从 GitHub 安装的附加组件一起工作的有用提示，以及如何组织实例的源代码。

*第三章**,* 创建 Odoo 附加模块，解释了 Odoo 附加模块的结构，并提供了从头开始创建简单模块的逐步指南。

*第四章**,* 应用模型，专注于 Odoo 模型结构，并解释了所有类型的字段及其属性。它还涵盖了通过扩展模块扩展现有数据库结构的技术。

*第五章**,* 基本服务器端开发，解释了在 Odoo 中执行 CRUD 操作的各种框架方法。本章还包括继承和扩展现有方法的不同方式。

*第六章**,* 管理模块数据，展示了如何将数据与您的模块代码一起打包。它还解释了当附加组件提供的数据模型在新版本中修改时，如何编写迁移脚本。

*第七章**,* 调试模块，提出了一些服务器端调试的策略，以及 Python 调试器的介绍。它还涵盖了在开发者模式下运行 Odoo 的技术。

*第八章**,* 高级服务器端开发技术，涵盖了 ORM 框架的更高级主题。这对于开发向导、SQL 视图、安装钩子、变更方法等非常有用。本章还解释了如何在数据库中执行原始 SQL 查询。

*第九章**,* 后端视图，解释了如何为您的数据模型编写业务视图以及如何从这些视图中调用服务器端方法。它涵盖了常规视图（列表视图、表单视图和搜索视图），以及一些复杂视图（看板、图形、日历、交叉表等）。

*第十章**,* 安全访问，解释了如何通过创建安全组、编写访问控制列表来定义给定模型上每个组可用的操作，以及在必要时编写记录级规则，来控制谁可以访问您的 Odoo 实例中的什么内容。

*第十一章**,* 国际化，展示了 Odoo 中语言翻译的工作方式。它展示了如何安装多种语言以及如何导入/导出翻译术语。

*第十二章**,* 自动化、工作流、电子邮件和打印，说明了 Odoo 中可用于实现记录业务流程的不同工具。它还展示了如何使用服务器操作和自动规则来支持业务规则。这还包括 QWeb 报告以生成动态 PDF 文档。

*第十三章**,* Web 服务器开发，涵盖了 Odoo Web 服务器的核心。它展示了如何创建自定义 URL 路由以在给定 URL 上提供数据，同时也展示了如何控制对这些 URL 的访问。

*第十四章**,* CMS 网站开发，展示了如何使用 Odoo 管理网站。它还展示了如何创建和修改美观的网页和 QWeb 模板。本章还包括如何创建具有选项的动态构建块。它包括一些专门用于管理 SEO、用户表单、UTM 跟踪、网站地图和获取访客位置信息的食谱。本章还突出了 Odoo 中多站点的最新概念。

*第十五章**,* Web 客户端开发，深入探讨了 Odoo 的 JavaScript 部分。它涵盖了如何创建新的字段小部件并调用服务器的 RPC。这还包括如何从头开始创建全新的视图。你还将学习如何创建入职导览。

*第十六章**,* Odoo Web 库（OWL），介绍了名为 OWL 的新客户端框架。它涵盖了 OWL 组件的生命周期。它还包括从头创建字段小部件的食谱。

*第十七章**,* 使用 Odoo 进行应用内购买，涵盖了与 Odoo 中最新 IAP 概念相关的所有内容。在本章中，你将学习如何创建 IAP 的客户和服务模块。你还将学习如何创建 IAP 账户并从最终用户那里提取 IAP 积分。

*第十八章**,* 自动化测试用例，包括如何编写和执行自动化测试用例。这包括服务器端和客户端测试用例。本章还涵盖了导览测试用例和设置无头 Chrome 以获取失败的测试用例的视频。

*第十九章**,* 使用 Odoo.sh 进行管理、部署和测试，解释了如何使用 PaaS 平台 Odoo.sh 来管理、部署和测试 Odoo 实例。它涵盖了如何管理不同类型的实例，例如生产、预发布和开发。本章还涵盖了 Odoo.sh 的各种配置选项。

*第二十章**,* Odoo 中的远程过程调用，涵盖了从外部应用程序连接 Odoo 实例的不同方法。本章教你如何通过 XML-RPC、JSON-RPC 和 oodoorpc 库连接到并访问 Odoo 实例的数据。

*第二十一章**,* 性能优化，解释了在 Odoo 中用于获得性能改进的不同概念和模式。本章包括预取、ORM 缓存和代码分析以检测性能问题。

*第二十二章**,* 销售点，涵盖了 PoS 应用程序中的定制。这包括用户界面的定制、添加新的操作按钮、修改业务流程和扩展客户食谱。

*第二十三章**,* 管理 Odoo 中的电子邮件，解释了如何在 Odoo 中管理电子邮件和聊天。它从配置邮件服务器开始，然后转向 Odoo 框架的邮件 API。本章还涵盖了 Jinja2 和 QWeb 邮件模板、表单视图中的聊天、字段日志和活动。

*第二十四章**,* 管理物联网盒，为您展示了物联网盒的最新硬件亮点。本章涵盖了如何配置、访问和调试物联网盒，还包括了将物联网盒与您的自定义附加组件集成的食谱。

*第二十五章**,* 深入探讨了模块开发的替代方法。虽然这通常不是最佳实现建议，但分析师可以使用本模块中概述的技术快速创建可能的设计、原型、报告或视图。

# 为了从这本书中获得最大收益

我们的主要且最有价值的建议仅仅是“实践”！每一章都提供了对开发方面的深入见解，因此应用您所学的内容至关重要。

为了充分利用这本书，我们建议您补充阅读有关 Python 编程语言、Ubuntu/Debian Linux 操作系统和 PostgreSQL 数据库的额外资源。

本书包含了 Odoo 的安装说明，因此您只需要 Ubuntu 20.04 或更高版本，或者任何其他基于 Linux 的操作系统。对于其他操作系统，您可以通过虚拟机使用它。如果您使用的是 Windows，您还可以将 Ubuntu 作为子系统安装：

| **本书涵盖的软件/硬件** | **操作系统要求** |
| --- | --- |
| Odoo 17 + Python 3.6 及以上 | Ubuntu 20.04 及以上 |

本书面向对 Python 编程语言有基本知识的开发者，因为 Odoo 后端运行在 Python 上。在 Odoo 中，数据文件是用 XML 创建的，因此需要具备基本的 XML 知识。

本书还涵盖了后端 JavaScript 框架、PoS 应用程序和网站构建器，这需要具备基本的 JavaScript、jQuery 和 Bootstrap 4 知识。Odoo 社区版是开源的，可以免费获取，但包括物联网、队列和仪表板在内的几个功能仅在企业版中可用，因此要跟随该食谱，您需要企业版。

要遵循*第二十四章*，“管理物联网盒”，您将需要 Raspberry Pi 3 Model B+，可在[`www.raspberrypi.org/products/raspberry-pi-3-model-b-plus/`](https://www.raspberrypi.org/products/raspberry-pi-3-model-b-plus/)找到。

**如果您正在使用本书的数字版，我们建议您亲自输入代码或从书的 GitHub 仓库（下一节中有一个链接）获取代码。这样做将帮助您避免与代码的复制和粘贴相关的任何潜在错误。**

# 下载示例代码文件

您可以从 GitHub（[`github.com/PacktPublishing/Odoo-17-Development-Cookbook-Fifth-Edition/tree/main`](https://github.com/PacktPublishing/Odoo-17-Development-Cookbook-Fifth-Edition/tree/main)）下载本书的示例代码文件。如果代码有更新，它将在 GitHub 仓库中更新。

我们还有来自我们丰富的书籍和视频目录中的其他代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

# 使用的约定

本书使用了多种文本约定。

`文本中的代码`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“鉴于`book`是一个浏览记录，我们可以通过将`book.id`作为`book_id`参数传递来简单地回收第一个示例中的函数，以提供相同的内容。”

代码块设置如下：

```py
@http.route('/my_library/books/json', type='json', auth='none')
def books_json(self):
records = request.env['library.book'].sudo().search([]) return records.read(['name'])
```

任何命令行输入或输出都按以下方式编写：

```py
$ ./odoo-bin -d mydb --i18n-export=mail.po --modules=mail
$ mv mail.po ./addons/mail/i18n/mail.pot
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词以粗体显示。以下是一个示例：“另一个重要用途是提供演示数据，当数据库创建时，如果选中了**加载演示数据**复选框，则会加载这些数据。”

小贴士或重要注意事项

看起来像这样。

# 部分

在本书中，您将找到几个频繁出现的标题（准备就绪、如何做…、它是如何工作的…、更多内容…和另请参阅）。

为了清楚地说明如何完成一个菜谱，请按照以下方式使用这些部分：

## 准备就绪

本节告诉您在菜谱中可以期待什么，并描述了如何设置任何软件或任何为菜谱所需的初步设置。

## 如何做…

本节包含遵循菜谱所需的步骤。

## 它是如何工作的…

本节通常包含对上一节发生情况的详细解释。

## 更多内容…

本节包含有关菜谱的附加信息，以便您对菜谱有更深入的了解。

## 另请参阅

本节提供对其他有用信息的有用链接。

# 联系我们

我们欢迎读者的反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请通过电子邮件发送给我们 customercare@packtpub.com，并在邮件主题中提及书名。

**勘误**：尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们将不胜感激，如果您能向我们报告，我们将非常感谢。请访问 [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata) 并填写表格。

**盗版**：如果您在互联网上发现任何形式的我们作品的非法副本，我们将不胜感激，如果您能提供位置地址或网站名称，我们将非常感谢。请通过电子邮件发送给我们 copyright@packt.com 并附上材料的链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问 [authors.packtpub.com.](http://authors.packtpub.com.)

# 分享您的想法

一旦您阅读了《Odoo 开发食谱》，我们非常乐意听到您的想法！请 [点击此处直接进入此书的 Amazon 评论页面](https://packt.link/r/1805124277) 并分享您的反馈。

您的评论对我们和科技社区都非常重要，并将帮助我们确保我们提供高质量的内容。

# 下载本书的免费 PDF 副本

感谢您购买本书！

您喜欢随时随地阅读，但无法携带您的印刷书籍到处走吗？

您选择的设备是否与您的电子书购买不兼容？

不要担心，现在，每购买一本 Packt 书籍，您都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何设备上阅读。直接从您最喜欢的技术书籍中搜索、复制和粘贴代码到您的应用程序中。

优惠远不止这些，您还可以获得独家折扣、时事通讯和每日免费内容的每日电子邮件。

按照以下简单步骤获取福利：

1.  扫描二维码或访问下面的链接

![](img/B20997_QR_Free_PDF.jpg)

[`packt.link/free-ebook/9781805124276`](https://packt.link/free-ebook/9781805124276)

2. 提交您的购买证明

3. 就这些！我们将直接将您的免费 PDF 和其他福利发送到您的电子邮件地址。
