# 前言

《物联网编程项目》是一本全面的实战指南，旨在通过一系列逐步提高的物联网项目使用树莓派和相关外围设备带你入门。

在初始阶段，你将接触到围绕树莓皮的基础概念和组件，包括对各种型号、附件（如顶部附加的硬件 HAT）和兼容操作系统的详细探索。你将通过参与展示树莓皮与实时数据接口和控制物理设备的项目的旅程开始你的物联网之旅，为更高级的任务奠定基础。

随着你继续前进，你将沉浸在开发网络服务和物联网应用中，创建实时数据显示和创新解决方案，如天气指示器应用程序。这些应用不仅提供 Python 编程和数据采集技能，而且进入物理世界，利用硬件组件创造有形的结果。

在书的中间部分，重点放在从头开始构建家庭安全系统。你将了解树莓派的通用输入/输出（GPIO）引脚、传感器集成以及使用消息队列遥测传输（MQTT）协议的动手报警系统开发。当我们创建基于 MQTT 的独立物联网报警模块及其相关外围设备时，将达到一个关键点。

在旅程的后半段，叙述进展到更高级和自动化的物联网项目。你将构建一个具有 LoRa 功能的物联网监测站，能够测量各种环境因素，包括空气质量。这个由电池供电的监测站通过 LoRa 与 LoRaWAN 网络通信数据，展示了物联网设备与更广泛的网络基础设施的集成，并强调了可持续的、电池供电的解决方案。

系列项目的巅峰之作是创建一个利用机器人操作系统（ROS）的物联网机器人汽车。这一高级项目指导你构建一辆能够通过 MQTT 在互联网上发送传感信息的机器人汽车，通过网页浏览器或其他应用程序实现远程控制。该项目代表了物联网掌握的巅峰，将机器人技术、网络通信和远程控制功能整合到一个统一系统中。

在整本书中，你将获得构建实用、现实世界物联网解决方案的知识和技能，通过持续的项目增强建议培养创造力和创新精神。从 Python 编程到硬件接口，本书促进了对物联网原理的丰富、多层次的理解，鼓励准备应对物联网领域中各种复杂问题的能力，并为有志于物联网的爱好者指明了开发强大、多功能和创新物联网解决方案的方向。

让我们开始吧！

# 本书面向对象

*物联网编程项目*面向对物联网世界充满热情的技术爱好者、业余爱好者和专业人士。本书涵盖了包括 Web 服务、LoRa 通信、树莓派、树莓派 Pico 和与 GPIO 交互在内的多个主题。您还将了解 ROS、构建机器人汽车和实现视觉识别。为了充分利用本书，您应该具备基本的编程、电子和网络知识。这本综合指南非常适合那些希望通过参与实际动手项目来扩展其在物联网方面的知识和技能的人。

# 本书涵盖内容

*第一章*, *理解树莓派*，在开始使用树莓派创建物联网项目之前，探讨了树莓派。

*第二章*, *利用树莓派使用 Web 服务*，深入探讨编写 Python 代码将我们的树莓派转变为物联网设备的过程，通过利用 Web 服务来获取数据并在 Sense HAT 上创建可视化显示。这为更高级的物联网 Web 服务开发奠定了基础，通过如股票行情、天气显示和决策者应用等实际项目。

*第三章*, *构建物联网天气指示器*，探讨了将伺服电机和 LED 与树莓派集成以创建实用的物联网天气指示器，利用其精度、控制和实时反馈能力来增强系统功能。

*第四章*, *构建物联网信息显示*，展示了如何使用带有树莓派品牌的 7 英寸触摸屏构建物联网信息显示，显示实时天气和当地交通信息。本章从探索兼容屏幕开始，最终 culminating in a comprehensive *dashboard* 项目。

*第五章*, *探索 GPIO*，通过构建物联网家庭安全应用，包括带有被动红外传感器（PIR）运动传感器、按钮和蜂鸣器的基本报警系统，更深入地探讨了树莓派和树莓派 Pico 上的 GPIO 端口功能。

*第六章*, *构建物联网报警模块*，通过使用树莓派 Pico W、公共 MQTT 服务器和 MQTTHQ 网络客户端构建物联网报警模块，来增强我们的基本报警系统，其中运动检测触发消息和远程蜂鸣器激活。这将为我们物联网家庭安全系统奠定基础。

*第七章*, *构建物联网按钮*，展示了如何使用紧凑的 M5Stack ATOM Matrix 和通用的树莓派 Pico W 构建物联网按钮的不同版本，这是我们物联网家庭安全系统的一个基本组件。

*第八章*, *创建物联网报警仪表盘*，介绍了使用带有 7 英寸触摸屏的 Raspberry Pi 5 创建物联网报警仪表盘，允许我们启用和禁用报警模块，查看 MQTT 通知，并显示报警位置地图，从而完成我们的高级物联网报警系统，具有全球应用能力。

*第九章*, *理解 LoRa*，探讨了物联网通信中的 LoRa（长距离的简称）技术，其在农业和智能城市中的应用，以及如何使用 Raspberry Pi Pico 和 Pico W 分别构建 LoRa 传感器发射器和接收器，展示了 LoRa 的广泛范围能力和高效的低功耗数据传输。

*第十章*, *将 LoRa 与互联网集成*，展示了如何使用我们配备 Raspberry Pi Pico W 的 LoRa 接收器将来自远程 LoRa 发射器的传感器数据发布到 MQTT 服务器，修改我们的模拟仪表天气指示器以利用这些数据，并探索各种物联网通信技术，如 LoRaWAN 和蜂窝网络。

*第十一章*, *介绍 ROS*，介绍了 ROS 在机器人领域的意义，如何在 Raspberry Pi 4 上安装 Ubuntu，以及使用 turtlesim 学习基本的 ROS 概念和操作，最终为我们构建高级物联网机器人 A.R.E.S.（高级机器人视觉系统）做准备。

*第十二章*, *创建物联网摇杆*，展示了如何使用 Raspberry Pi Pico WH 创建物联网摇杆。您将使用它来远程控制 ROS TurtleSim 机器人，基于之前的项目，并展示物联网在机器人领域的实际应用。

*第十三章*, *介绍高级机器人视觉系统（A.R.E.S.）*，专注于将 TurtleSim 虚拟机器人转换为名为 ARES 的现实生活机器人，该机器人具有可通过 VLC 媒体播放器访问的视频流，并由第十二章中的物联网摇杆控制。我们将使用 Raspberry Pi 进行感官输入，使用 Raspberry Pi Pico 进行电机、LED 和蜂鸣器控制，并配备 3D 打印框架。

*第十四章*, *将计算机视觉添加到 A.R.E.S.*，最终我们将向 ARES 添加计算机视觉，使其能够识别物体并发送文本警报。我们还将使用 OpenCV 和 You Only Look Once (YOLO)物体检测系统构建智能视频流应用。

# 为了充分利用这本书

您应该具备一些 Python 和 JavaScript 编程经验。重要技能包括能够使用 Raspberry Pi、Python 和 Web 服务创建物联网应用，以及参与由 Raspberry Pi 控制的机器人。

| **本书涵盖的软件/硬件** | **操作系统要求** |
| --- | --- |
| Python | Raspberry Pi OS 和 Ubuntu Linux |
| CircuitPython |  |
| MQTT |  |
| OpenCV |  |
| LoRa |  |
| ROS |  |
| Raspberry Pi |  |
| Raspberry Pi Pico |  |
| Raspberry Pi Sense HAT |  |
| 各种传感器（PIR 和温度） |  |
| M5Stack ATOM Matrix |  |
| Pico 机器人板 |  |

**如果你使用的是本书的数字版，我们建议你亲自输入代码或从本书的 GitHub 仓库（下一节中提供链接）获取代码。这样做将帮助你避免与代码的复制和粘贴相关的任何潜在错误。**

# 下载示例代码文件

你可以从 GitHub 下载本书的示例代码文件[`github.com/PacktPublishing/Internet-of-Things-Programming-Projects-2nd-Edition`](https://github.com/PacktPublishing/Internet-of-Things-Programming-Projects-2nd-Edition)。如果代码有更新，它将在 GitHub 仓库中更新。

我们还有其他来自我们丰富图书和视频目录的代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们！

# 使用的约定

本书使用了多种文本约定。

`文本中的代码`: 表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“我们定义了一个`activate_buzzer()`函数。”

代码块设置如下：

```py
    def timer_callback(self):
        if self.mqtt_message.should_draw_circle:
            self.vel_msg.linear.x = 1.0
            self.vel_msg.angular.z = 1.0
        else:
            self.vel_msg.linear.x = 0.0
            self.vel_msg.angular.z = 0.0
        self.publisher.publish(self.vel_msg)
```

**粗体**: 表示新术语、重要单词或你在屏幕上看到的单词。例如，菜单或对话框中的单词以**粗体**显示。以下是一个示例：“我们通过点击 Raspberry Pi 任务栏中的**菜单**图标，导航到**编程**类别，并选择**Thonny**来完成此操作。”

小贴士或重要提示

看起来像这样。

# 联系我们

欢迎你的反馈。

**一般反馈**: 如果你对本书的任何方面有疑问，请通过客户关怀@packtpub.com 给我们发邮件，并在邮件主题中提及书名。

**勘误**: 尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果你在这本书中发现了错误，我们将不胜感激，如果你能向我们报告这个错误。请访问[www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)并填写表格。

**盗版**: 如果你在互联网上以任何形式遇到我们作品的非法副本，如果你能提供位置地址或网站名称，我们将不胜感激。请通过版权@packt.com 与我们联系，并提供材料的链接。

**如果你有兴趣成为作者**: 如果你有一个你擅长的主题，并且你对撰写或为书籍做出贡献感兴趣，请访问[authors.packtpub.com](http://authors.packtpub.com)。

# 分享你的想法

一旦你阅读了《物联网编程项目》，我们很乐意听听你的想法！请[点击此处直接进入本书的亚马逊评论页面](https://packt.link/r/1835082955)并分享你的反馈。

你的评论对我们和科技社区非常重要，并将帮助我们确保我们提供高质量的内容。

# 下载这本书的免费 PDF 副本

感谢您购买本书！

你喜欢在路上阅读，但无法携带你的印刷书籍到处走吗？

你的电子书购买是否与你的选择设备不兼容？

别担心，现在每购买一本 Packt 书籍，你都可以免费获得该书的 DRM-free PDF 版本。

在任何地方、任何设备上阅读。直接从你最喜欢的技术书籍中搜索、复制和粘贴代码到你的应用程序中。

优惠远不止这些，你还可以获得独家折扣、时事通讯和每日邮箱中的精彩免费内容

按照以下简单步骤获取优惠：

1.  扫描下面的二维码或访问以下链接

![二维码](img/B21282_QR_Free_PDF.jpg)

[`packt.link/free-ebook/9781835082959`](https://packt.link/free-ebook/9781835082959)

1.  提交你的购买证明

1.  就这些！我们将直接将你的免费 PDF 和其他优惠发送到你的邮箱

# 第一部分：为物联网开发设置树莓派

在*第一部分*中，我们首先理解树莓派，然后我们将利用网络服务进行物联网应用，使用传感器和网页数据构建物联网天气指示器，并使用树莓派和触摸屏创建物联网信息显示，以实时更新天气和交通信息。

本部分包含以下章节：

+   *第一章*，*理解树莓派*

+   *第二章*，*使用树莓派利用网络服务*

+   *第三章*，*构建物联网天气指示器*

+   *第四章*，*构建物联网信息显示*
