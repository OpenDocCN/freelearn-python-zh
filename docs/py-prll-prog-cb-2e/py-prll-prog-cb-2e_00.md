# 前言

计算机行业的特点是寻求不断提高和高效性能，从网络、电信、航空电子领域的高端应用，到桌面计算机、笔记本电脑和视频游戏中的低功耗嵌入式系统。这种发展路径导致了多核系统，其中双核、四核和八核处理器只是未来向不断增加的计算核心数量扩展的起点。

然而，这种扩展不仅对半导体行业，也对能够进行并行计算的应用程序的开发构成了挑战。

**并行计算**实际上代表了同时使用多个计算资源来解决处理问题，这样它就可以在多个 CPU 上执行，将问题分解成可以同时处理的离散部分，其中每个部分进一步分解成可以在不同的 CPU 上串行执行的指令序列。

计算资源可以包括具有多个处理器的单个计算机、通过网络连接的任意数量的计算机，或者这两种方法的组合。并行计算一直被认为是计算技术的极致或未来，直到几年前，它还受到复杂系统和各种领域相关情况的数值模拟的推动：天气和气候预测、化学反应和核反应、人类基因组图谱、地震和地质活动、机械装置的行为（从假肢到航天飞机）、电子电路和制造过程。

现在，然而，越来越多的商业应用正日益要求开发速度更快的计算机来以复杂的方式处理大量数据。这类应用包括数据挖掘、并行数据库、石油勘探、网络搜索引擎、网络化商业服务、计算机辅助医疗诊断、跨国公司的管理、高级图形和虚拟现实（尤其是在视频游戏行业）、多媒体和视频网络技术，以及协作工作环境。

最后但同样重要的是，并行计算代表了尝试最大化那种无限但同时也越来越宝贵和稀缺的资源——时间。这就是为什么并行计算正从只为少数人保留的昂贵超级计算机的世界转向基于多个处理器、**图形处理单元**（**GPUs**）或少量互联计算机的经济解决方案，这些计算机可以克服串行计算的约束和单个 CPU 的限制。

为了介绍并行编程的概念，选择了最受欢迎的编程语言之一——**Python**。Python 的流行部分归因于其灵活性，因为它是一种被网页和桌面开发者、系统管理员和代码开发者、以及最近的数据科学家和机器学习工程师经常使用的语言。

从技术角度来看，在 Python 中，没有像 C 语言那样的独立编译阶段（例如，从源代码生成可执行文件）。由于其伪解释特性，Python 成为了一种可移植的语言。一旦编写了源代码，它就可以在大多数当前使用的平台上进行解释和执行，无论是来自苹果（macOS X）还是 PC（Microsoft Windows 和 GNU/Linux）。

Python 的另一个优点是其**易于学习**。任何人都可以在几天内学会使用它并编写他们的第一个应用程序。在这种情况下，语言的开放结构起着基本的作用，没有冗余的声明，因此与口语非常相似。最后，Python 是免费软件：不仅 Python 解释器和 Python 在我们应用程序中的使用是免费的，而且 Python 也可以根据完全开源许可证的规则自由修改和重新分发。

《Python 并行编程食谱，第二版》包含大量示例，为读者提供了解决实际问题的机会。它考察了并行架构的软件设计原则，强调程序清晰性的重要性，并避免使用复杂术语，而是使用清晰直接示例。

每个主题都作为完整的、可工作的 Python 程序的一部分进行介绍，始终跟随相关程序的输出。各个章节的模块化组织提供了一个经过验证的路径，沿着这个路径可以从最简单的论点过渡到最先进的论点，但它也适合只想学习几个特定问题的人。

# 本书面向对象

《Python 并行编程食谱，第二版》旨在为希望使用并行编程技术编写强大和高效代码的软件开发人员编写。阅读本书将使您掌握并行计算的基本和高级方面。

Python 编程语言易于使用，并允许非专业人士轻松应对并理解本书概述的主题。

# 本书涵盖内容

第一章，*Python 并行计算入门*，概述了并行编程架构和编程模型。本章介绍了 Python 编程语言，讨论了该语言的特点、易学易用性、可扩展性以及丰富的软件库和应用程序，所有这些都使 Python 成为任何应用程序，尤其是并行计算的有价值工具。

第二章，*基于线程的并行性*，讨论了使用`threading` Python 模块的线程并行性。读者将通过完整的编程示例学习如何同步和操作线程以实现他们的多线程应用程序。

第三章，*基于过程的并行性*，引导读者了解如何通过基于过程的途径并行化一个程序。一系列完整的示例将展示读者如何使用`multiprocessing` Python 模块。

第四章，*消息传递*，专注于消息传递交换通信系统。特别是，将用大量的应用示例来描述`mpi4py`库。

第五章，*异步编程*，解释了用于并发编程的异步模型。在某些方面，它比线程模型更简单，因为有一个单一的指令流，任务明确地放弃控制权而不是任意挂起。本章展示了读者如何使用`asyncyio`模块将每个任务组织成一系列必须以异步方式执行的小步骤。

第六章，*分布式 Python*，向读者介绍了分布式计算，这是将多个计算单元聚合起来以透明和一致的方式协同运行单个计算任务的过程。特别是，本章提供的示例应用程序描述了使用`socket`和 Celery 模块来管理分布式任务。

第七章，*云计算*，提供了与 Python 编程语言相关的主要云计算技术的概述。**PythonAnywhere**平台对于在云上部署 Python 应用程序非常有用，本章将对其进行考察。本章还包含示例应用程序，展示了**容器**和**无服务器**技术的使用。

第八章，*异构计算*，探讨了现代 GPU 在增加编程复杂性的代价下为数值计算提供突破性性能。实际上，GPU 的编程模型要求程序员手动管理 CPU 和 GPU 之间的数据传输。本章将通过编程示例和用例，教读者如何利用**PyCUDA**、**Numba**和**PyOpenCL**强大的 Python 模块来发挥 GPU 卡的计算能力。

第九章，*Python 调试和测试*，是介绍软件工程中两个重要主题的最后一章：调试和测试。特别是，以下 Python 框架将被描述：`winpdb-reborn`用于调试，以及`unittest`和`nose`用于软件测试。

# 要充分利用这本书

本书是*自包含的*：在开始阅读之前，唯一的基本要求是对编程的热情和对本书涵盖主题的好奇心。

# 下载示例代码文件

您可以从 [www.packt.com](http://www.packt.com) 的账户下载本书的示例代码文件。如果您在其他地方购买了这本书，您可以访问 [www.packtpub.com/support](https://www.packtpub.com/support) 并注册，以便将文件直接通过电子邮件发送给您。

您可以通过以下步骤下载代码文件：

1.  在 [www.packtpub.com](http://www.packtpub.com/support) 登录或注册。

1.  选择“支持”选项卡。

1.  点击“代码下载”。

1.  在搜索框中输入书籍名称，并遵循屏幕上的说明。

文件下载完成后，请确保您使用最新版本的以下软件解压或提取文件夹：

+   WinRAR/7-Zip for Windows

+   Zipeg/iZip/UnRarX for Mac

+   7-Zip/PeaZip for Linux

书籍的代码包也托管在 GitHub 上，网址为 [`github.com/PacktPublishing/Python-Parallel-Programming-Cookbook-Second-Edition`](https://github.com/PacktPublishing/Python-Parallel-Programming-Cookbook-Second-Edition)。我们还有其他来自我们丰富的图书和视频目录的代码包可供使用，网址为**[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)**。查看它们吧！

# 下载彩色图像

我们还提供了一份包含本书中使用的截图/图表彩色图像的 PDF 文件。您可以从这里下载：[`static.packt-cdn.com/downloads/9781789533736_ColorImages.pdf`](https://static.packt-cdn.com/downloads/9781789533736_ColorImages.pdf)。

# 使用的约定

本书使用了多种文本约定。

`CodeInText`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“可以通过使用`terminate`方法立即终止进程。”

代码块设置如下：

```py
import socket
port=60000
s =socket.socket()
host=socket.gethostname()
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```py
 p = multiprocessing.Process(target=foo)
 print ('Process before execution:', p, p.is_alive())
 p.start()
```

任何命令行输入或输出都应如下所示：

```py
> python server.py
```

**粗体**: 表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词在文本中显示如下。以下是一个示例：“转到系统属性 | 环境变量 | 用户或系统变量 | 新建。”

警告或重要注意事项看起来像这样。

小贴士和技巧看起来像这样。

# 部分

在这本书中，您将找到几个频繁出现的标题（*准备工作*、*如何做…*、*它是如何工作的…*、*更多内容…*和*参考以下内容*）。

要清楚地说明如何完成食谱，请按以下方式使用这些部分：

# 准备工作

本节告诉您在食谱中可以期待什么，并描述如何设置任何软件或任何为食谱所需的初步设置。

# 如何做…

本节包含遵循食谱所需的步骤。

# 它是如何工作的…

本节通常包含对上一节发生情况的详细解释。

# 更多内容…

本节包含有关食谱的附加信息，以便您对食谱有更深入的了解。

# 参考以下内容

本节提供了对食谱有用的其他信息的链接。

# 联系我们

我们欢迎读者的反馈。

**一般反馈**: 发送电子邮件至`feedback@packtpub.com`，并在邮件主题中提及书籍标题。如果您对本书的任何方面有疑问，请通过`questions@packtpub.com`发送电子邮件给我们。

**勘误**: 尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，如果您能向我们报告，我们将不胜感激。请访问[www.packtpub.com/support/errata](https://www.packtpub.com/support/errata)，选择您的书籍，点击勘误提交表单链接，并输入详细信息。

**盗版**: 如果您在互联网上以任何形式发现我们作品的非法副本，如果您能向我们提供位置地址或网站名称，我们将不胜感激。请通过`copyright@packtpub.com`与我们联系，并提供材料的链接。

**如果您有兴趣成为作者**: 如果您在某个主题上具有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问[authors.packtpub.com](http://authors.packtpub.com/)。

# 评论

请留下评论。一旦您阅读并使用过这本书，为何不在您购买它的网站上留下评论呢？潜在读者可以查看并使用您的客观意见来做出购买决定，Packt 公司可以了解您对我们产品的看法，我们的作者也可以看到他们对书籍的反馈。谢谢！

如需了解 Packt 的更多信息，请访问[packtpub.com](https://www.packtpub.com/).
