# 前言

如查尔斯·狄更斯在《双城记》中所写，“这是最好的时代，这是最坏的时代，这是智慧的时代，这是愚蠢的时代。”这些看似矛盾的话语完美地描述了变革和过渡时期的混乱和情绪。我们无疑正在经历一个与网络工程领域快速变化相似的时期。随着软件开发越来越多地融入所有工程堆栈，传统的命令行界面和垂直集成的网络控制方法不再是管理今天网络的最佳方式。

对于网络工程师来说，我们所看到的变革充满了激动人心的机遇，同时也充满挑战，尤其是对于那些需要快速适应并跟上步伐的人来说。这本书的编写旨在通过提供一份实用的指南来帮助网络专业人士缓解过渡，该指南涵盖了如何从传统平台过渡到基于软件驱动和开发实践的平台。

在这本书中，我们选择 Python 作为编程语言来掌握网络工程任务。Python 是一种易于学习的高级编程语言，可以有效补充网络工程师的创造力和解决问题的能力，从而简化日常操作。Python 正成为许多大型网络不可或缺的一部分，通过这本书，我希望与您分享我所学到的经验。

自从这本书的前三版出版以来，我有幸与许多读者进行了有趣而有意义的对话。我对前三版的成功感到谦卑，并认真对待了收到的反馈。在第四版中，我尝试融入许多新的库，用最新的软件和新的硬件平台更新了现有示例，增加了两个新章节，并对几个章节进行了重大修改。我相信这些变化更能反映当今的网络工程环境。

变革时期为技术进步提供了巨大的机遇。这本书中的概念和工具在我的职业生涯中帮助极大，我希望它们也能对您有所帮助。

# 这本书面向谁

这本书非常适合那些已经管理网络设备组并希望扩展他们使用 Python 和其他工具克服网络挑战知识的 IT 专业人士和运维工程师。建议具备基本的网络和 Python 知识。

# 这本书涵盖的内容

*第一章* *TCP/IP 协议套件和 Python 回顾*，回顾了今天互联网通信的基本技术，从 OSI 和客户端-服务器模型到 TCP、UDP 和 IP 套件。本章将回顾 Python 语言的基础知识，如类型、运算符、循环、函数和包。

*第二章* *2*，*低级网络设备交互*，使用实际示例来说明如何使用 Python 在网络上执行命令。它还将讨论在自动化中仅具有 CLI 接口的挑战。本章将在示例中使用 Pexpect、Paramiko、Netmiko 和 Nornir 库。

*第三章* *3*，*APIs 和意图驱动型网络*，讨论了支持**应用程序** **编程** **接口**（**APIs**）和其他高级交互方法的网络设备。它还说明了允许抽象低级任务同时关注网络工程师意图的工具。本章将包含有关 Cisco NX-API、Meraki、Juniper PyEZ、Arista Pyeapi 和 Vyatta VyOS 的讨论和示例。

*第四章* *4*，*Python 自动化框架 - Ansible*，讨论了 Ansible 的基础知识。Ansible 是一个基于 Python 的开源自动化框架。该框架在 API 之上再迈出一步，专注于声明性任务意图。在本章中，我们将介绍使用 Ansible 的优点及其高级架构，并查看一些 Ansible 与网络设备的实际示例。

*第五章* *5*，*网络工程师的 Docker 容器*，探讨了容器并解释了 Docker 是如何成为应用开发的新标准的。在本章中，我们将通过介绍整体概念和使用它构建示例应用程序来介绍 Docker 作为工具。

*第六章* *6*，*使用 Python 进行网络安全*，介绍了几个 Python 工具来帮助您保护您的网络。它将讨论使用 Scapy 进行安全测试、使用 Ansible 快速实施访问列表以及使用 Python 进行网络取证分析。

*第七章* *7*，*使用 Python 进行网络监控 - 第一部分*，涵盖了使用各种工具进行网络监控。本章包含了一些使用 SNMP 和 PySNMP 进行查询以获取设备信息的示例。将展示 Matplotlib 和 Pygal 示例来绘图结果。本章将以一个使用 Python 脚本作为输入源的 Cacti 示例结束。

*第八章* *8*，*使用 Python 进行网络监控 - 第二部分*，涵盖了更多的网络监控工具。本章将从使用 Graphviz 从 LLDP 信息中绘制网络开始。我们将转向使用基于推式的网络监控示例，使用 NetFlow 和其他技术。我们将使用 Python 解码流量包，并使用 ntop 来可视化结果。

*第九章* *9*，*使用 Python 构建网络 Web 服务*，展示了如何使用 Python Flask Web 框架来创建网络自动化的 API 端点。网络 API 提供了诸如将请求者从网络细节中抽象出来、合并和定制操作以及通过限制可用操作的暴露来提供更好的安全性等好处。

*第十章*，*异步 IO 简介*，涵盖了异步 IO，这是 Python 3 的新包，允许我们同时执行任务。我们将涵盖多进程、并行性、线程以及其他概念等主题。我们还将涵盖来自 Scrapli 项目的示例。

*第十一章*，*AWS 云网络*，展示了我们如何使用 AWS 构建一个功能强大且具有弹性的虚拟网络。我们将涵盖云服务、VPC 路由表、访问列表、弹性 IP、NAT 网关、Direct Connect 以及其他相关主题。

*第十二章*，*Azure 云网络*，涵盖了 Azure 提供的网络服务以及如何使用该服务构建网络服务。我们将讨论 Azure VNet、Express Route 和 VPN、Azure 网络负载均衡器以及其他相关网络服务。

*第十三章*，*使用 Elastic Stack 进行网络数据分析*，展示了我们如何使用 Elastic Stack 作为一套紧密集成的工具来帮助我们分析和监控我们的网络。我们将涵盖从安装、配置，到使用 Logstash 和 Beats 导入数据，以及使用 Elasticsearch 搜索数据，再到使用 Kibana 进行可视化的各个方面。

*第十四章*，*与 Git 协作*，说明了我们如何利用 Git 进行协作和代码版本控制。本章将使用 Git 进行网络操作的实际示例。

*第十五章*，*使用 GitLab 进行持续集成*，使用 GitLab 自动创建操作管道，这可以节省我们的时间并提高可靠性。

*第十六章*，*网络测试驱动开发*，解释了如何使用 Python 的`unittest`和`pytest`创建简单的测试来验证我们的代码。我们还将看到为我们的网络编写测试的示例，以验证可达性、网络延迟、安全性和网络事务。

# 要充分利用本书

要充分利用本书，建议您具备一些基本的动手网络操作知识和 Python 知识。大多数章节可以按任何顺序阅读，除了*第四章*和*第五章*，它们介绍了本书后面将使用的基础技术。除了本书开头介绍的基本软件和硬件工具外，各章还将介绍与各章相关的工具。

强烈建议您在您的网络实验室中遵循并实践所展示的示例。

## 下载示例代码文件

该书的代码包托管在 GitHub 上，地址为[`github.com/PacktPublishing/Mastering-Python-Networking-Fourth-Edition`](https://github.com/PacktPublishing/Mastering-Python-Networking-Fourth-Edition)。我们还有其他来自我们丰富图书和视频目录的代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。去看看吧！

## 下载彩色图片

我们还提供了一份包含本书中使用的截图/图表彩色图像的 PDF 文件。您可以从这里下载：[`packt.link/D2Ttl`](https://packt.link/D2Ttl)。

## 使用的约定

本书使用了多种文本约定。

`CodeInText`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。例如：“自动配置还生成了 Telnet 和 SSH 的`vty`访问权限。”

代码块按照以下方式设置：

```py
# This is a comment
print("hello world") 
```

任何命令行输入或输出都按照以下方式编写：

```py
$ python3
Python 3.10.6 (main, Nov  2 2022, 18:53:38) [GCC 11.3.0] on linux
Type "help", "copyright", "credits" or "license" for more information. 
```

**粗体**：表示新术语、重要单词或您在屏幕上看到的单词。例如，菜单或对话框中的单词在文本中显示如下。例如：“在下一节中，我们将继续讨论网络监控的 SNMP 主题，但使用一个功能齐全的网络监控系统，称为**Cacti**。”

警告或重要提示看起来像这样。

小贴士和技巧看起来像这样。

# 联系我们

我们读者的反馈总是受欢迎的。

如果您想联系作者，请访问[`members.networkautomation.community/`](https://members.networkautomation.community/)

**一般反馈**：请通过`feedback@packtpub.com`发送电子邮件，并在邮件主题中提及本书的标题。如果您对本书的任何方面有疑问，请通过`questions@packtpub.com`发送电子邮件给我们。

**勘误**：尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们将非常感激您向我们报告。请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，点击**提交勘误**，并填写表格。

**盗版**：如果您在互联网上遇到任何形式的我们作品的非法副本，我们将非常感激您提供位置地址或网站名称。请通过`copyright@packtpub.com`与我们联系，并提供材料的链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为本书做出贡献，请访问[`authors.packtpub.com`](http://authors.packtpub.com)。

# 分享您的想法

一旦您阅读了《精通 Python 网络，第四版》，我们非常乐意听到您的想法！请[点击此处直接访问该书的亚马逊评论页面](https://packt.link/r/180323461X)并分享您的反馈。

您的评论对我们和科技社区都非常重要，它将帮助我们确保我们提供高质量的内容。

# 下载本书的免费 PDF 副本

感谢您购买本书！

您喜欢在路上阅读，但无法携带您的印刷书籍到处走吗？

您的电子书购买是否与您选择的设备不兼容？

不要担心，现在，随着每本 Packt 书籍，您都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何设备上阅读。直接从您最喜欢的技术书籍中搜索、复制和粘贴代码到您的应用程序中。

优惠远不止这些，您还可以获得独家折扣、时事通讯和丰富的免费内容，每天直接发送到您的收件箱

按照以下简单步骤获取这些福利：

1.  扫描下面的二维码或访问以下链接

![](img/B18403_Free_PDF_QR.png)

[`packt.link/free-ebook/9781803234618`](https://packt.link/free-ebook/9781803234618)

1.  提交您的购买证明

1.  就这样！我们将直接将您的免费 PDF 和其他福利发送到您的邮箱
