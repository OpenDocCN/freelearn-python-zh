# 前言

Django 是一个开源的 Python Web 框架，它鼓励快速开发和清晰、实用的设计。它处理了 Web 开发中的许多繁琐工作，并为初学者程序员提供了一个相对平缓的学习曲线。Django 遵循 Python 的“电池包含”哲学，附带一套丰富且多功能性的模块，用于解决常见的 Web 开发问题。Django 的简单性与其强大的功能相结合，使其对新手和专家程序员都具有吸引力。Django 被设计为简单、灵活、可靠和可扩展。

现在，Django 被无数初创公司和大型组织如 Instagram、Spotify、Pinterest、Udemy、Robinhood 和 Coursera 所使用。在过去的几年里，Django 一直被全球开发者选为 Stack Overflow 年度开发者调查中最受欢迎的 Web 框架之一，这并非巧合。

本书将指导你通过使用 Django 开发专业 Web 应用的整个过程。本书侧重于通过从头构建多个项目来解释 Django Web 框架的工作原理。本书不仅涵盖了框架的最相关方面，还解释了如何将 Django 应用于各种不同的现实世界情况。

本书不仅教授 Django，还介绍了其他流行的技术，如 PostgreSQL、Redis、Celery、RabbitMQ 和 Memcached。你将在整本书中学习如何将这些技术集成到你的 Django 项目中，以创建高级功能并构建复杂的 Web 应用。

《Django 5 实例教程》将逐步引导你创建现实世界应用，解决常见问题，并实施最佳实践，采用易于跟随的步骤方法。

阅读本书后，你将很好地理解 Django 的工作原理以及如何构建完整的 Python Web 应用。

# 本书面向对象

本书应作为新接触 Django 的程序员入门指南。本书面向具有 Python 知识并希望以实用方式学习 Django 的开发者。也许你是 Django 的完全新手，或者你已经了解一些，但希望从中获得最大收益。本书将通过从头开始构建实际项目来帮助你掌握框架中最相关的领域。为了阅读本书，你需要熟悉编程概念。除了基本的 Python 知识外，还假设你有一些 HTML 和 JavaScript 的先验知识。

# 本书涵盖内容

本书涵盖了使用 Django 进行 Web 应用开发的多个主题。本书将指导你通过 17 个章节构建四个不同的功能齐全的 Web 应用。

+   博客应用（第一章至第三章）

+   图片书签网站（第四章至第七章）

+   在线商店（第八章至第十一章）

+   在线学习平台（第十二章至第十七章）

每一章都涵盖了几个 Django 功能。

*第一章，构建博客应用程序*，将通过博客应用程序向您介绍框架。您将创建基本的博客模型、视图、模板和 URL 来显示博客文章。您将学习如何使用 Django 的**对象关系映射器**（**ORM**）构建 QuerySets，并配置 Django 管理站点。

*第二章，增强博客的高级功能*，将教授您如何为您的博客添加分页，以及如何实现 Django 基于类的视图。您将学习使用 Django 发送电子邮件，处理表单和模型表单。您还将实现博客文章的评论系统。

*第三章，扩展您的博客应用程序*，探讨了如何集成第三方应用程序。本章将指导您创建标签系统，并学习如何构建复杂的 QuerySets 来推荐相似的文章。本章将教授您如何创建自定义模板标签和过滤器。您还将学习如何使用站点地图框架并为您的文章创建 RSS 源。您将通过使用 PostgreSQL 的全文搜索功能构建搜索引擎来完成您的博客应用程序。

*第四章，构建社交网站*，解释了如何构建社交网站。您将学习如何实现用户认证视图，并学会使用 Django 认证框架。您将实现用户注册，并通过自定义资料模型扩展用户模型。

*第五章，实现社交认证*，涵盖了实现社交认证和使用消息框架。您将创建自定义认证后端，并将社交认证与 Google 集成，使用 OAuth 2.0。您将学习如何使用`django-extensions`通过 HTTPS 运行开发服务器，并自定义社交认证管道来自动化用户资料创建。

*第六章，在您的网站上共享内容*，将教授您如何将您的社交应用程序转变为图片书签网站。您将为模型定义多对多关系，并创建一个集成到您项目中的 JavaScript 书签小工具。本章将向您展示如何生成图片缩略图。您还将学习如何使用 JavaScript 和 Django 实现异步 HTTP 请求，并实现无限滚动分页。

*第七章，跟踪用户行为*，将向您展示如何构建用户关注系统。您将通过创建用户活动流应用程序来完成您的图片书签网站。您将学习如何在模型之间创建通用关系并优化 QuerySets。

您将使用信号并实现反规范化。您将使用 Django 调试工具栏来获取相关调试信息。最后，您将集成 Redis 到您的项目中以计数图片查看次数，并使用 Redis 创建最常查看图片的排名。

*第八章，构建在线商店*，探讨了如何创建在线商店。您将为产品目录构建模型，并使用 Django 会话创建购物车。您将为购物车构建上下文处理器，并学习如何管理客户订单。本章将教会您如何使用 Celery 和 RabbitMQ 发送异步通知。您还将学习如何使用 Flower 监控 Celery。

*第九章，管理支付和订单*，解释了如何将支付网关集成到您的商店中。您将集成 Stripe Checkout 并在您的应用程序中接收异步支付通知。您将在管理站点中实现自定义视图，并自定义管理站点以导出 CSV 文件格式的订单。您还将学习如何动态生成 PDF 发票。

*第十章，扩展您的商店*，将教会您如何创建一个优惠券系统以应用于购物车。您将更新 Stripe Checkout 集成以实现优惠券折扣，并将优惠券应用于订单。您将使用 Redis 存储通常一起购买的产品，并利用这些信息构建一个产品推荐引擎。

*第十一章，为您的商店添加国际化*，将向您展示如何将国际化添加到您的项目中。您将学习如何生成和管理翻译文件，以及如何在 Python 代码和 Django 模板中翻译字符串。您将使用 Rosetta 来管理翻译并实现按语言 URL。您将学习如何使用`django-parler`来翻译模型字段以及如何使用 ORM 进行翻译。最后，您将使用`django-localflavor`创建一个本地化的表单字段。

*第十二章，构建电子学习平台*，将指导您创建电子学习平台。您将为项目添加固定数据，并为内容管理系统创建初始模型。您将使用模型继承来创建多态内容的数据模型。您将学习如何通过构建一个用于排序对象的字段来创建自定义模型字段。您还将实现 CMS 的认证视图。

*第十三章，创建内容管理系统*，将教会您如何使用基于类的视图和混入创建 CMS。您将使用 Django 的组和权限系统来限制对视图的访问，并实现表单集来编辑课程内容。您还将创建一个拖放功能，使用 JavaScript 和 Django 重新排序课程模块及其内容。

*第十四章，渲染和缓存内容*，将向你展示如何实现课程目录的公共视图。你将创建一个学生注册系统并管理学生选课。你将创建为课程模块渲染不同类型内容的功能。你将学习如何使用 Django 缓存框架缓存内容，并为你的项目配置 Memcached 和 Redis 缓存后端。最后，你将学习如何使用管理站点监控 Redis。

*第十五章，构建 API*，探讨了使用 Django REST 框架为你的项目构建 RESTful API。你将学习如何为你的模型创建序列化器并构建自定义 API 视图。你将处理 API 认证并为 API 视图实现权限。

你将学习如何构建 API 视图集和路由器。本章还将教你如何使用 Requests 库来消费你的 API。

*第十六章，构建聊天服务器*，解释了如何使用 Django Channels 为学生创建一个实时聊天服务器。你将学习如何实现依赖于异步通信通过 WebSockets 的功能。你将使用 Python 创建 WebSocket 消费者并实现 JavaScript WebSocket 客户端。你将使用 Redis 设置频道层，并学习如何使你的 WebSocket 消费者完全异步。你还将通过将聊天消息持久化到数据库中实现聊天历史。

*第十七章，上线*，将向你展示如何为多个环境创建设置，以及如何使用 PostgreSQL、Redis、uWSGI、NGINX 和 Daphne 与 Docker Compose 设置生产环境。你将学习如何通过 HTTPS 安全地提供你的项目，并使用 Django 系统检查框架。本章还将教你如何构建自定义中间件和创建自定义管理命令。

# 为了充分利用本书

+   你必须具备良好的 Python 工作知识。

+   你应该熟悉 HTML 和 JavaScript。

+   建议你通过官方 Django 文档中的教程第一部分到第三部分[`docs.djangoproject.com/en/5.0/intro/tutorial01/`](https://docs.djangoproject.com/en/5.0/intro/tutorial01/)进行学习。

## 下载示例代码文件

本书代码包托管在 GitHub 上，网址为[`github.com/PacktPublishing/Django-5-by-Example`](https://github.com/PacktPublishing/Django-5-by-Example)。我们还有其他来自我们丰富图书和视频目录的代码包，可在 https://github.com/PacktPublishing/找到。查看它们吧！

## 下载彩色图像

我们还提供了一个包含本书中使用的截图/图表彩色图像的 PDF 文件。你可以从这里下载：https://packt.link/gbp/9781805125457。

## 使用的约定

本书使用了多种文本约定。

`CodeInText`: 表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。例如：“编辑`shop`应用的`models.py`文件。”

代码块按以下方式设置：

```py
from django.contrib import admin
from .models import Post 
admin.site.register(Post) 
```

当我们希望将您的注意力引到代码块中的特定部分时，相关的行或项目将以粗体显示：

```py
INSTALLED_APPS = [
'django.contrib.admin',
'django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.messages',
'django.contrib.staticfiles',
**'blog.apps.BlogConfig'**,
] 
```

任何命令行输入或输出都按以下方式编写：

```py
python manage.py runserver 
```

**粗体**: 表示新术语、重要单词或屏幕上出现的单词。例如，菜单或对话框中的单词在文本中显示如下。例如：“从**管理**面板中选择**系统信息**。”

警告或重要说明看起来像这样。

技巧和窍门看起来像这样。

# 联系我们

我们始终欢迎读者的反馈。

**一般反馈**: 请通过电子邮件发送至 `feedback@packtpub.com`，并在邮件主题中提及本书的标题。如果您对本书的任何方面有疑问，请通过电子邮件发送至 `questions@packtpub.com`。

**勘误**: 尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在本书中发现错误，我们将不胜感激，如果您能向我们报告，请访问 http://www.packtpub.com/submit-errata，点击**提交勘误**并填写表格。

**盗版**: 如果您在互联网上以任何形式发现我们作品的非法副本，如果您能提供位置地址或网站名称，我们将不胜感激。请通过电子邮件发送至 `copyright@packtpub.com` 并附上材料的链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为本书做出贡献，请访问 [`authors.packtpub.com`](http://authors.packtpub.com)。

# 加入我们的 Discord 频道！

与其他用户、Django 开发专家和作者本人一起阅读本书。提问、为其他读者提供解决方案、通过 Ask Me Anything 会议与作者聊天，等等。扫描二维码或访问链接加入社区。

[`packt.link/Django5ByExample`](https://packt.link/Django5ByExample)

![二维码](img/QR_Code287089408934129031.png)

# 访问本书的专用网站

前往 [`djangobyexample.com/`](https://djangobyexample.com/) 了解更多关于本书以及过往读者对此的看法。

# 分享您的想法

读完 *Django 5 By Example, 第五版* 后，我们非常乐意听到您的想法！请[点击此处直接进入本书的亚马逊评论页面](https://packt.link/r/1805125451)并分享您的反馈。

您的评论对我们和科技社区都至关重要，并将帮助我们确保我们提供高质量的内容。

# 下载本书的免费 PDF 副本

感谢您购买本书！

您喜欢在路上阅读，但又无法携带您的印刷书籍到处走吗？

您的电子书购买是否与您选择的设备不兼容？

别担心，现在每购买一本 Packt 书籍，您都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何设备上阅读。直接从您喜欢的技术书籍中搜索、复制并粘贴代码到您的应用程序中。

优惠远不止于此，您还可以获得独家折扣、时事通讯和丰富的免费内容，每天直接发送到您的收件箱。

按照以下简单步骤获取优惠：

1.  扫描二维码或访问以下链接：

![](img/B21088_Free_PDF_QR.png)

[`packt.link/free-ebook/9781805125457`](https://packt.link/free-ebook/9781805125457)

1.  提交您的购买证明。

1.  就这些！我们将直接将免费 PDF 和其他优惠发送到您的电子邮件。
