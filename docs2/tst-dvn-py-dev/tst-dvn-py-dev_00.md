# 前言

现在，组织面临着交付频率不断上升的问题。每几年交付一个新版本的时光已经一去不复返。测试驱动开发过程使个人和团队能够交付既稳健又易于维护的代码。结合 Python 语言的快速开发速度，你就有了一个能够以市场要求的速度交付新功能的组合。

*《测试驱动 Python 开发》* 覆盖了端到端的单元测试过程，从第一个简单的测试到涉及多个组件和交互的复杂测试。

# 本书涵盖的内容

第一章, *开始测试驱动开发*，是介绍性的一章。它通过设定为什么我们需要 TDD 以及快速开始编写测试来引导你进入 TDD 过程。

第二章, *红-绿-重构 – TDD 循环*，更深入地探讨了 TDD 过程，随着我们编写更多的测试来驱动我们示例项目的实现。

第三章, *代码异味和重构*，探讨了常见的代码异味类型，我们回到我们的示例项目，清理我们发现的异味。TDD 的一个关键好处是它提供了一个安全网，这样我们就可以进入并清理混乱的代码。

第四章, *使用模拟对象进行交互测试*，展示了如何使用模拟来实现我们示例项目中依赖于其他系统的部分。你如何测试依赖于外部子系统的代码？我们在这里通过介绍模拟对象来回答这个问题。

第五章, *处理遗留代码*，讨论了我们经常需要清理或添加旧代码的功能，而这些旧代码没有现有的测试。本章通过处理我们示例应用中的一个模块来探讨实现这一点的策略。

第六章, *维护你的测试套件*，证明了单元测试也是代码，良好的编码实践同样适用于测试代码。这意味着需要保持它们良好的组织结构并且易于维护。本章涵盖了实现这一点的技术。

第七章, *使用 doctest 进行可执行文档*，通过处理我们应用程序的一个模块来介绍 doctest 的使用。

第八章, *使用 nose2 扩展 unittest*，让我们了解 nose2，这是一个强大的测试运行器和插件套件，它扩展了 unittest 框架。

第九章, *单元测试模式*，涵盖了单元测试的一些其他模式。我们了解到如何加快测试速度，以及如何运行特定的测试子集。我们还探讨了数据驱动测试和模拟模式。

第十章, *提高测试驱动开发的工具*，解释了一些流行的第三方工具，帮助我们改进我们的 TDD 实践。其中一些工具，如 pytest 和 trial，是具有独特功能的测试运行器。

附录 A, *练习题答案*，包含了本书中提出的练习题的答案。有众多可能的解决方案，每种方案都有其自身的优缺点。

附录 B, *使用较旧的 Python 版本*，描述了为了将本书中的技术应用于较旧版本的 Python 所需进行的更改，因为本书是为 Python 3.4 编写的。

# 您需要本书的内容

您需要以下软件来使用本书：Python 3.4、nose 2 和 lettuce。

# 本书面向的对象

本书旨在为希望使用测试驱动开发（TDD）原则来创建高效且健壮应用的 Python 开发者编写。为了从本书中获得最佳效果，您应该具备 Python 的开发经验。

# 习惯用法

在本书中，您将找到许多文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称如下所示："我们可以通过使用`include`指令来包含其他上下文。"

代码块设置如下：

```py
import unittest
class StockTest(unittest.TestCase):
    def test_price_of_a_new_stock_class_should_be_None(self):
        stock = Stock("GOOG")
        self.assertIsNone(stock.price)
if __name__ == "__main__":
    unittest.main()
```

当我们希望将您的注意力引向代码块中的特定部分时，相关的行或项目将以粗体显示：

```py
class Stock:
    LONG_TERM_TIMESPAN = 10
    SHORT_TERM_TIMESPAN = 5

```

任何命令行输入或输出都如下所示：

```py
python3 -m unittest discover

```

**新术语**和**重要词汇**以粗体显示。屏幕上看到的单词，例如在菜单或对话框中，在文本中如下所示："选择**发布 JUnit 测试结果报告**复选框，并输入 nose2 单元测试 XML 文件的位置。"

### 注意

警告或重要注意事项以如下方式显示：

### 小贴士

小贴士和技巧看起来像这样。

# 读者反馈

我们始终欢迎读者的反馈。请告诉我们您对这本书的看法——您喜欢或不喜欢的地方。读者反馈对我们很重要，因为它帮助我们开发出您真正能从中受益的标题。

要向我们发送一般反馈，请简单地发送电子邮件至 `<feedback@packtpub.com>`，并在邮件主题中提及本书的标题。

如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在，您是 Packt 图书的骄傲拥有者，我们有一些事情可以帮助您从您的购买中获得最大收益。

## 下载示例代码

您可以从[`www.packtpub.com`](http://www.packtpub.com)下载示例代码文件，适用于您购买的所有 Packt Publishing 书籍。如果您在其他地方购买了这本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

您也可以从[`github.com/siddhi/test_driven_python`](https://github.com/siddhi/test_driven_python)获取代码副本。

## 勘误

尽管我们已经尽最大努力确保内容的准确性，错误仍然可能发生。如果您在我们的某本书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以避免其他读者感到沮丧，并帮助我们改进本书的后续版本。如果您发现任何勘误，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**勘误提交表单**链接，并输入您的勘误详情来报告。一旦您的勘误得到验证，您的提交将被接受，勘误将被上传到我们的网站或添加到该标题的勘误部分下的现有勘误列表中。

要查看之前提交的勘误，请访问[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，并在搜索字段中输入书籍名称。所需信息将出现在**勘误**部分下。

## 盗版

互联网上版权材料的盗版是一个持续存在的问题，涉及所有媒体。在 Packt，我们非常重视保护我们的版权和许可证。如果您在互联网上发现任何形式的我们作品的非法副本，请立即向我们提供位置地址或网站名称，以便我们可以寻求补救措施。

请通过`<copyright@packtpub.com>`联系我们，并提供疑似盗版材料的链接。

我们感谢您的帮助，以保护我们的作者和我们为您提供有价值内容的能力。

## 询问

如果您对本书的任何方面有问题，您可以通过`<questions@packtpub.com>`联系我们，我们将尽力解决问题。
