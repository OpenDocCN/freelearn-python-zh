# 前言

为什么会有关于使用 ROS 学习机器人的新书？嗯，编程只是与机器人一起工作的很小一部分。如果你想真正擅长机器人技术，你还需要在其他领域具备技能：机电一体化、机器人仿真、自主导航和机器学习/强化学习。这四个主题中的每一个都是你在获得完整机器人技能的道路上需要掌握的构建模块。本书分为四个部分，每个部分都致力于这些构建模块之一。

第一部分，*物理机器人组装和测试*，侧重于机电一体化，并描述机器人的每个硬件部分，提供如何测试其配备的每个传感器和执行器的实际演示。本书的这一部分应帮助你理解移动机器人是如何工作的。

第二部分，*使用 Gazebo 进行机器人仿真*，涉及机器人仿真。在这里，我们介绍了 ROS 并开发了一个两轮机器人仿真，它模拟了实际机器人的物理特性和行为。我们将探讨数字孪生的概念，这是一个虚拟机器人，它是物理机器人的孪生兄弟。这是开发机器人应用的基本部分，因为它减少了与测试真实硬件相关的成本。数字孪生使我们能够加快开发过程，并将物理机器人的测试留到开发的高级阶段。

第三部分，*使用 SLAM 进行自主导航*，专注于**机器人导航**，这是移动机器人最常见的任务。最先进的算法和技术以实用的方式解释，首先是模拟，然后是使用物理机器人。

第四部分，*使用机器学习实现自适应机器人行为*，专注于**机器学习**和**强化学习**，这是机器人研究和实际机器人应用中最活跃的领域。通过使用这项技术，机器人能够从纯自动化的状态——即每个可能的行为或答案都被编码——过渡到灵活的行为机器，机器人能够通过学习数据以智能的方式对环境需求做出反应。这些数据可以来自机器人的先前经验，也可以从类似机器人的经验中收集。

要构建一个最先进的机器人应用，你首先需要掌握并组合这四个构建模块。结果将是我们通常所说的**智能机器人**。这就是你的任务——这就是你的挑战。

# 本书面向的对象

如果你是一名希望使用 ROS 构建 AI 机器人工程师，那么这本书就是为你准备的。希望开发自己的 ROS 机器人项目的技术人员和爱好者也会发现这本书是一个有用的资源。

# 本书涵盖的内容

第一章，*组装机器人*，提供了关于本书所有内容所基于的移动机器人的关键概念和实际组装指南。考虑到非常实用的方法，我们深入探讨了 GoPiGo3 的特性，使其成为学习机器人的理想且经济实惠的平台。通过完成 GoPiGo3 的组装，您将获得操作机器人典型组件所需的第一个手动技能。要购买 GoPiGo3 套件，您可以访问 [`www.dexterindustries.com/gopigo3/`](https://www.dexterindustries.com/gopigo3/)，并使用优惠券代码 `BRJAPON@PACKT` 获得折扣 10%。

第二章，*GoPiGo3 的单元测试*，为您提供了对 GoPiGo3 工作原理的实用见解。我们通过介绍 JupyterLab 环境，一个友好的界面，它采用由人类可读段落后跟 Python 代码片段组成的笔记本结构来实现这一点。您将为每个测试程序产生两个版本：JupyterLab 笔记本和纯 Python 脚本。使用这些编程工具，您将单独测试每个传感器/执行器，并检查其是否正常工作，同时了解背后的技术。

第三章，*ROS 入门*，解释了 ROS 的基本概念。它使用易于理解的语言介绍框架，避免使用非常技术性的描述。这是因为我们的主要目标是向您展示 ROS 在概念上的确切含义。在接下来的章节中，将提供深入的技术描述，以便您最终能够将 ROS 集成到您的项目中。

第四章，*创建虚拟双轮 ROS 机器人*，描述了如何构建一个简单的双轮机器人，它是 GoPiGo3 的数字孪生。该模型以**统一机器人描述格式**（**URDF**）编写，并通过 RViz 进行检查，RViz 是一个 ROS 工具，它提供了一个可配置的**图形用户界面**（**GUI**），允许用户显示他们所需的具体信息。RViz 可用于全局机器人可视化，以及在构建模型时调试特定功能。

第五章，*使用 Gazebo 模拟机器人行为*，教您如何将您的机器人数字定义（URDF 文件）插入到 Gazebo 的模拟环境中，Gazebo 是一个具有能够模拟真实行为的物理引擎。您还将了解如何检查和测试数字机器人，以确保其行为在现实中表现得很好。

第六章，*ROS 命令和工具编程*，向您介绍与 ROS 的命令行交互，并解释 ROS 命令的类型。我们将探讨 ROS 中最常用的通信模式，包括发布-订阅模型。为了处理您所有的 ROS 数据，您将了解 rqt，它简化了开发和调试应用程序的过程。此外，还介绍了 ROS 参数，以让您了解它们在高级别管理机器人配置方面的强大功能。

第七章，*机器人控制和仿真*，教您如何使用 GoPiGo3 设置真实机器人的 ROS 环境。我们将从使用笔记本电脑键盘的按键进行远程控制开始，然后过渡到更技术性的使用 ROS 主题的方法。本章将引导您从基于键盘和主题的手动控制到内部编程逻辑，以便您的机器人能够自主执行任务。

第八章，*使用 Gazebo 进行虚拟 SLAM 和导航*，通过实际方法和 GoPiGo3 的数字孪生探索**同时定位与建图**（**SLAM**）技术。您将了解为什么在正确导航之前需要 SLAM。仿真将在 Gazebo 中运行，这是具有物理引擎的 ROS 原生仿真工具，可以提供逼真的结果。

第九章，*机器人导航中的 SLAM*，将重点转向物理 GoPiGo3 机器人。本章突出了在真实环境中面对机器人任务时出现的许多细节和实际问题。仿真是一个好的开始，但通过在实际场景中执行任务来验证您的机器人按预期工作，才是真正的证明。本章是您深入了解机器人导航的起点，如果您想在这个领域继续发展，这将对您的知识库至关重要。

第十章，*在机器人学中应用机器学习*，旨在对机器人学中的机器学习主题进行温和的介绍，更倾向于直观理解而非复杂的数学公式，并侧重于理解该领域常用的概念。本章中使用的实际示例将涉及 GoPiGo3 的 Pi 摄像头识别物体。

第十一章，*使用 OpenAI Gym 进行机器学习*，基于简单场景提供了强化学习的理论背景。这一章节让你更好地理解在经典强化训练任务中幕后发生了什么。我们将继续使用实际例子来探索所提出的概念，并使用开源环境 OpenAI Gym，它使我们能够轻松测试来自训练代理、甚至是在 ROS 中驾驶机器人的不同算法。

第十二章，*通过强化学习实现目标*，在计算机视觉对象识别方面更进一步，表明 GoPiGo3 不仅能感知事物，还能采取步骤实现目标。我们的机器人在模拟的每一步都需要决定执行什么动作以实现目标。执行每个动作后，机器人将获得关于其做出的决策好坏的反馈，形式为奖励。经过一些训练后，奖励的激励将加强并巩固良好的决策。

# 要充分利用本书

本书采用实践方法来处理事物，并鼓励你使用物理机器人来实践你所学的知识。我们选择 GoPiGo3 ([`www.dexterindustries.com/gopigo3/`](https://www.dexterindustries.com/gopigo3/))，因为它具有模块化、适中的成本，并且基于 Raspberry Pi。你可以在全球范围内的在线商店购买 Raspberry Pi 板。在购买套件中的任何组件之前，我们建议你首先阅读第一章，*组装机器人*，以获取所有你需要购买的组件的基本信息。要购买 GoPiGo3 套件，你可以访问[`www.dexterindustries.com/gopigo3/`](https://www.dexterindustries.com/gopigo3/)，并使用优惠券代码`BRJAPON@PACKT`获得 10%的折扣。

为了充分利用本书，需要具备一些 Python 和/或 C++编程知识，以及熟悉如 Raspberry Pi 这样的单板计算机。

最后，你需要一台装有 Ubuntu 16.04 Xenial Xerus 或 Ubuntu 18.04 Bionic Beaver 的笔记本电脑。本书的代码已在这两个操作系统上进行了测试。如果你必须从头开始，我们建议你使用 Ubuntu 18.04，因为它是由 Canonical 提供的最新**长期支持**（**LTS**）版本，并将支持到 2023 年 4 月。

你需要的所有安装说明都包含在每个章节开头的*技术要求*部分。

# 下载示例代码文件

你可以从[www.packt.com](http://www.packt.com)上的账户下载本书的示例代码文件。如果你在其他地方购买了本书，你可以访问[www.packtpub.com/support](https://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给你。

您可以通过以下步骤下载代码文件：

1.  在[www.packt.com](http://www.packt.com)登录或注册。

1.  选择“支持”标签。

1.  点击“代码下载”。

1.  在“搜索”框中输入书名，并遵循屏幕上的说明。

文件下载后，请确保使用最新版本解压缩或提取文件夹。

+   Windows 上的 WinRAR/7-Zip

+   Mac 上的 Zipeg/iZip/UnRarX

+   Linux 上的 7-Zip/PeaZip

书籍的代码包也托管在 GitHub 上，地址为[`github.com/PacktPublishing/Hands-On-ROS-for-Robotics-Programming`](https://github.com/PacktPublishing/Hands-On-ROS-for-Robotics-Programming)。如果代码有更新，它将在现有的 GitHub 仓库中更新。

我们还有其他来自我们丰富图书和视频目录的代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

# 下载彩色图像

我们还提供了一份包含本书中使用的截图/图表彩色图像的 PDF 文件。您可以从这里下载：[`www.packtpub.com/sites/default/files/downloads/9781838551308_ColorImages.pdf`](http://www.packtpub.com/sites/default/files/downloads/9781838551308_ColorImages.pdf)。

# 代码实战

访问以下链接查看代码运行的视频：

[`bit.ly/2PrRpXF`](http://bit.ly/2PrRpXF)

# 使用的约定

本书使用了多种文本约定。

`CodeInText`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“似乎只有最后一行被执行，即`my_gopigo.left()`。”

代码块设置如下：

```py
msg_range.header.frame_id = "distance"
msg_range.radiation_type = Range.INFRARED
msg_range.min_range = 0.02
msg_range.max_range = 3.0
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```py
std_msgs/Header header
uint8 radiation_type
float32 field_of_view
float32 min_range
```

任何命令行输入或输出都如下所示：

```py
$ cd./Chapter2_Unit_Tests/drivingAround
$ python <name_of_script.py>
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词在文本中如下所示。以下是一个示例：“通过点击“检查生命体征”来检查生命体征。”

警告或重要提示如下所示。

小贴士和技巧如下所示。

# 联系我们

欢迎读者反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请在邮件主题中提及书名，并通过`customercare@packtpub.com`给我们发邮件。

**勘误表**：尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在本书中发现错误，我们将非常感激您向我们报告。请访问[www.packtpub.com/support/errata](https://www.packtpub.com/support/errata)，选择您的书，点击“勘误表提交表单”链接，并输入详细信息。

**盗版**: 如果您在互联网上以任何形式发现我们作品的非法副本，如果您能提供位置地址或网站名称，我们将不胜感激。请通过`copyright@packt.com`与我们联系，并附上材料的链接。

**如果您有兴趣成为作者**: 如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问 [authors.packtpub.com](http://authors.packtpub.com/)。

# 评论

请留下评论。一旦您阅读并使用过这本书，为何不在购买它的网站上留下评论呢？潜在读者可以查看并使用您的客观意见来做出购买决定，我们 Packt 可以了解您对我们产品的看法，我们的作者也可以看到他们对书籍的反馈。谢谢！

如需更多关于 Packt 的信息，请访问 [packt.com](http://www.packt.com/)。
