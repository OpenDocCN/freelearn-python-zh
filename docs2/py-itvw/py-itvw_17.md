# 第十七章。拉马洛·卢西亚诺

![拉马洛·卢西亚诺](img/B08180_03_01.jpg)

拉马洛·卢西亚诺是一位巴西软件工程师，也是 Python 软件基金会（PSF）的成员。他是 ThoughtWorks 的技术负责人，这是一家设计软件公司。拉马洛之前在巴西的银行、媒体和政府部门教授 Python 网络开发。他是《流畅的 Python》一书的作者，并担任巴西 Python 协会的理事四年。拉马洛经常在国际 Python 会议上发表演讲。他共同拥有培训公司 Python.pro.br，并共同创立了巴西的第一个黑客空间 Garoa Hacker Clube。

> **讨论主题：Python 书籍，APyB，v2.7/v3.x。**
> 
> **在这里了解拉马洛·卢西亚诺：@ramalhoorg**

**迈克·德里斯科尔**：你能简单介绍一下你自己吗，拉马洛？

**拉马洛·卢西亚诺**：当然，我是一个自学成才的程序员。我 1963 年出生于巴西。1978 年，我 15 岁的时候，看到 HP-25 计算器上运行着月球着陆游戏，对将可编程计算器和桌面游戏结合起来的可能性感到兴奋，那时我的主要爱好就是桌面游戏。

那年稍后，我父亲雇主给了他一个 TI-58 计算器，我立刻借了过来，再也没有归还。我的第一个有趣的程序是将月球着陆游戏从 HP 移植到 TI 语言（两者都是类似汇编的语言）。

1981 年，我在伊利诺伊州的哈里斯堡作为交换生度过了一年，我是两个志愿者之一，我们在高中图书馆刚刚收到的苹果 II 计算机上自学编程；学校里没有其他人知道如何使用它们。

回到巴西后，我的第一份工作是翻译苹果 II 软件手册到葡萄牙语，我的第二份工作是教授编程，这成为了我终身的热情。

> **拉马洛·卢西亚诺：'我的第二份工作是教授编程，这成为了我终身的热情。'**

从那时起，我大约一半的时间是作为程序员，一半的时间是作为教师。我曾担任 8 位教育软件程序员，CP/M 独立商业应用程序员，Windows 客户端-服务器应用程序员，Windows 和 macOS CD-ROM 程序员，以及巴西一些最早的门户网站在 Unix 上运行的系统后端程序员。

我有几家小公司（一个桌面出版局，一个软件公司和一家培训机构），现在我很自豪地成为 ThoughtWorks 的主顾问。

现在，我最喜欢做的编程类型是示例代码，用来说明语言、API 和平台中的新概念。我对开发者体验（DX）也非常感兴趣。我真的很享受挑战编写最简单的示例，既能展示一个想法，又仍然有趣（不仅仅是`foo`和`bar`的抽象）。这就是我为什么称自己为*站立式程序员*。

**德里斯科尔**：你为什么成为程序员？

**拉马洛**：我成为程序员是因为我喜欢编程的程度和我喜欢玩桌面游戏一样。

我看到了一个非常强烈的平行关系：一种语言提供的关键字和函数就像你在游戏中可用的棋子和其他游戏资源，你必须安排它们以实现预期的效果。语言语义就像游戏规则。如果一个语言有语法宏，那么这就好像在游戏中能够创建全新的棋子——这是一种非常强大的能力。

> **Luciano Ramalho: '我成为程序员是因为我享受编程，就像我享受玩桌面游戏一样。'**

除了有趣之外，编程让我们在世界上产生巨大的影响，我总是试图保持积极的影响。

**Driscoll**: 为什么是 Python？

**Ramalho**: 在 Python 之前，我学习了十多种语言，之后也至少学习了六种。但 Python 是我整个职业生涯中用得最久的一种语言。

正如俗话所说，Python 符合我的思维方式。我发现它既优雅又实用，简单而不简单化，一致而不僵化或限制。过了一段时间，我在 Python 社区也交了很多朋友，这成为了我坚持使用 Python 的一个巨大原因，即使有时我也渴望尝试不同的事物。

我在 1998 年偶然发现了 Python，当时我正在学习 Perl 5 的面向对象特性，这是我一直在使用的网络开发工具。当时，每当 Perl 邮件列表中有人询问如何以面向对象的方式完成某事时，就会提到 Python 的比较。在提到 Python 两三次之后，我决定去查找它。

> **Luciano Ramalho: '我阅读了 Guido van Rossum 的教程，并爱上了这门语言。它结合了 Perl 和 Java 的最佳品质。'**

我阅读了 Guido van Rossum 的教程，并爱上了这门语言。它结合了当时我使用最多的两种语言——Perl 和 Java——的最佳品质。Python 是一个真正的面向对象语言，拥有像 Java 一样的合理类库，但它也像 Perl 一样简洁实用，比两者都更易于阅读、一致且使用愉快。我认为 Python 是语言设计的杰作。

**Driscoll**: 你认为是什么让 Python 成为 AI 和机器学习如此好的语言？

**Ramalho**: 最重要且最直接的原因是 NumPy 和 SciPy 库使得 scikit-learn 等项目成为可能，而 scikit-learn 目前几乎是机器学习的既定标准工具。

NumPy、SciPy、scikit-learn 以及许多其他库最初被创建的原因是 Python 具有一些使它在科学计算方面非常吸引人的特性。Python 拥有简单且一致的语法，这使得编程对非软件工程师的人来说更加容易。

另一个原因是运算符重载，它使得代码可读且简洁。然后是 Python 的缓冲协议（PEP 3118），它是外部库在处理类似数组的结构时与 Python 高效交互的标准。最后，Python 受益于一个丰富的科学计算库生态系统，这吸引了更多的科学家，并形成了一个良性循环。

**Driscoll**：什么可以使 Python 成为 AI 和机器学习的更好语言？

**Ramalho**：Python 中 AI 和机器学习项目的最大挑战是在生产环境中部署，这些项目需要所有外部依赖。容器有很大帮助，但从来都不容易。

**Driscoll**：你是如何成为作家的，卢西亚诺？

**Ramalho**：*流畅的 Python*是我开始写的第四本书，但却是第一本完成的。写一本书需要花费很多时间，很容易低估所需的努力。

2013 年，我向 OSCON 提交了一个演讲提案，并被接受。在会议上，我带着 iPad 上的四张幻灯片走向 O'Reilly 展台：书名、关于我的介绍和两个大纲幻灯片。他们对此很感兴趣，并给了我一个书稿提案模板。几个月后，我签署了合同，并得到了一小笔预付款。

我最初是兼职写这本书。在那段时间里，编辑梅根·布兰切特是唯一阅读它的人。她给了我一些非常宝贵的指导，特别是在书的流程方面。

在项目进行到大约九个月的时候，第一个截止日期即将到来，我可能无法按时完成。O'Reilly 的合同中包含了一个条款，如果我有问题交付，可以强制指定合著者。但*流畅的 Python*对我来说是一个非常个人化的项目，所以我决定放弃所有其他的自由职业工作，只专注于这本书。

我又工作了九个月，可能每周大约 50 小时，最终完成了它。在第二阶段，技术编辑加入了项目。审稿人都是我钦佩的人：亚历克斯·马尔蒂、安娜·雷文斯克罗夫特、伦纳特·雷格布罗和莱昂纳多·罗查埃尔。维克多·斯廷纳专注于关于 asyncio 的章节，这是对我们其他人来说的新主题。他们都给了我很多优秀的反馈和鼓励。

**Driscoll**：你在写*流畅的 Python*中学到了什么？

**Ramalho**：我对 Python 学到了很多。在写作过程中，我探索了之前从未访问过的标准库部分。

我理解了独特的 Python 语言特性，如属性描述符和`yield from`表达式。我终于发现了为什么 Windows 上的 Python 程序没有问题打印到 cmd.exe 控制台，但将其输出重定向到文件时却会崩溃，出现`UnicodeEncodeError`。

我对 Python 学到了更多。我还学会了做自己的价值。对某个主题充满热情并深入了解它是创作内容的好基础。

> **拉马洛·卢西亚诺：'我还学会了做自己的价值。对某个主题充满热情并对其有深入了解是创造内容的好基础。'**

我是一个狂热的读者，这对写作至关重要。我对语言设计也非常有意见。作为一个读者，我总是对那些在写作中混淆事实和观点的技术作者感到烦恼，所以我提出了在每个章节末尾添加“肥皂箱”部分的想法。我可以提出我的观点，同时让读者清楚他们可以跳过这部分。肥皂箱部分很有趣，一些评论家也喜欢它们。所以这是一个例子，说明做自己是如何发挥得很好的。

Python 社区由那些热爱分享他们所知的人组成，他们应得到认可。因此，我记录了我在书中使用过的所有重要参考资料，包括不仅限于其他书籍，还有博客文章、视频，甚至 StackOverflow 的回答。我在“进一步阅读”部分与读者分享了这些笔记。这也是一些评论家赞扬本书的一个特点。

> ****拉马洛·卢西亚诺：'Python 社区由那些热爱分享他们所知的人组成，他们应得到认可。因此，我记录了所有重要的参考资料。'****

在个人层面，写作 *流畅的 Python* 并见证其在评论和销售中的成功，对我个人的自尊心来说是个巨大的提升，在我之前三次尝试写书失败之后。所以我想，一个教训就是坚持不懈，当你相信一个项目时，全力以赴是有回报的。

一些读者给了我很多宝贵的反馈，其中最积极的一位成为了我的好朋友：伊利亚斯·多内莱斯。所以另一个教训是，开放心态接受反馈，并给人们提供反馈的机会是非常重要的。

**德里斯科尔**：如果你可以重新开始，你会做些什么不同的事情？

**拉马洛**：我会写一本更短的书！我最初计划写 300 页，但最终变成了 770 页。

或者，我可以写五本更短的书，因为 *流畅的 Python* 从第二部分到第六部分都可以独立工作得很好。但这样一套书对读者来说可能更贵，也许不会带来同样的认可和销量。

我没有遗憾，因为我已经相信，无论发生什么，都是唯一可能发生的事情。我从作者布鲁斯·埃克尔那里学到了这一点，这是开放空间活动的一条规则。

> **拉马洛·卢西亚诺：'无论发生什么，都是唯一可能发生的事情。我从作者布鲁斯·埃克尔那里学到了这一点，这是开放空间活动的一条规则。'**

**德里斯科尔**：你是如何成为巴西 Python 协会联合创始人的？

**拉马洛**：巴西 Python 社区是在奥斯瓦尔多·桑塔纳创建的一些邮件列表和维基百科上自然成长的。我已经是用 Python 作为我的主要语言，并且为杂志写了一篇教程，但正是奥斯瓦尔多创建的维基百科鼓励我参与更广泛的社区。

我们中的许多人每年都会在 FISL 上聚在一起，这是巴西最大的 FOSS 会议。面对面见面，一起去喝啤酒，可以加强一个始于线上的社区，这真是令人难以置信。

> **Luciano Ramalho: '面对面见面，一起去喝啤酒，可以加强一个始于线上的社区，这真是令人难以置信。’**

Rodrigo Senra 组织了第一次巴西 Python 会议，Jean Ferri 组织了第二次。在没有正式支持实体的情况下举办这些会议是困难的：组织者不能以一个模糊的社区的名义签署合同、开具发票或收集赞助。所以在一个 FISL 上，我们决定创建巴西 Python 基金会。

当我们得知在巴西法律下“基金会”是一个保留词时，我们面临了几个月的官僚主义。为了成为一个基金会，我们需要一个五年的行动计划。我们需要一些员工，以及足够的捐赠来资助我们的员工和至少五年的所有计划。因此，我们不得不改变我们的计划，成为更谦逊的巴西 Python 协会（APyB）！

最后，我们由于我们的坚持和 Dorneles Tremea 的机智，他是我们的第一位管理总监，也是 APyB 的继任主席，所以我们成功了。

**Driscoll**: 我听说有些人质疑 APyB 的价值。你对这种批评有什么回应？

**Ramalho**: 是的，我知道有些人质疑 APyB 的有用性，毕竟这确实要求其志愿者主席和董事们投入一些时间。我在为 APyB 辩护的主要论点是，我们尝试过没有它，结果更糟。

**Driscoll**: 那么，你现在正在从事哪些开源项目？

**Ramalho**: 实际上，目前没有！我确实开始了`pingo`项目，这是一个为编程具有 GPIO 接口的设备而设计的设备无关 API。但我只成功吸引了 Lucas Vido 作为坚实的贡献者。我们都忙于其他事情，所以项目现在已经被搁置。我想重启它，但我不知道我何时能做那件事。

我的所有会议演讲和教程的代码和幻灯片都是开源内容。我有超过 50 个演示文稿可供任何人查看：[`speakerdeck.com/ramalho`](https://speakerdeck.com/ramalho)。所有这些演讲也都在 GitHub 的`/fluentpython`组织以及我的个人 GitHub 账户（`/ramalho`）上。

我已经开始编写用于学习 Go 的开源内容。我的下一个开源项目更有可能是一本或一些其他内容，而不是应用程序或库。

**Driscoll**: 哦，你考虑再写一本书真是太好了！那么，你有什么建议给有志于成为作家的人吗？

**Ramalho**: 嗯，我不是经济学家，但我认为写书和弹吉他一样有可能付账，所以不要为了钱而做，而是为了你对这个主题的热爱。

此外，要做好准备，迎接一段非常漫长的旅程。要有储蓄，这样你就可以在需要的时候抽出一些时间来写作。我知道的两位非常成功的作家告诉我，他们与合著者之间的许多经历都是不好的。所以我想，没有简单的方法可以摆脱作为作者的漫长而孤独的旅程！

**德里科**：你有没有考虑过自出版？

**拉马洛**：是的，我考虑过，但尽管有几种自出版选择，我认为如果你能的话，至少你的第一本书应该由一家好的出版社来出版。第一个原因是你会从一位优秀的编辑和你的技术审稿人那里得到所有支持。第二个原因是，当你的作品由一个知名品牌推广并装饰其封面时，你会得到的认可。

**德里科**：在你写书的时候，你是先写代码再开始写，还是不先写代码？

**拉马洛**：“我相信，代码示例是任何编程书籍的核心：没有优秀的例子，你不可能有一本优秀的书。”经典《图形 Java》书籍的作者大卫·吉亚里曾经写道，写一本编程书本质上就是提出启发性的例子，然后围绕它们进行解释。我采纳了他的建议，这对我的工作非常有效。

> **拉马洛·卢西亚诺**：“我相信，代码示例是任何编程书籍的核心：没有优秀的例子，你不可能有一本优秀的书。”

所以，虽然对我来说最困难的部分无疑是提出例子，但在我开始写作之前，我已经创建了很多代码。我绝对不是从一个空白的文本文件和一个空白的屏幕开始的！

在《流畅的 Python》中的一些例子和解释是我过去 10 多年教授和讲解 Python 时开发的。我还为这本书创造了更多特定的内容，实际上，我还创造了更多我从未在书中使用过的例子，因为它们要么变得过于复杂，要么我后来想到了更好的例子。

> **拉马洛·卢西亚诺**：“对于所有 Python 教师来说，这是一个很好的学习点：我们必须学会放弃我们的例子和写作。”

对于所有 Python 教师来说，这是一个很好的学习点：在必要时，我们必须学会放弃我们的例子和写作，无论我们投入了多少工作量。所以当我们作为教师和作者找到更好的方法，或者我们意识到我们已经做得太过分了，那么对于我们的读者来说，放手我们的例子并继续前进是很重要的。

我已经知道，当我着手写下一本书时，我会尝试放弃更多这样的材料。我也作为教师思考这个问题。作家和飞行员安东尼·德·圣埃克苏佩里在飞机设计背景下说过：“似乎完美不是当你没有更多东西可以添加时达到的，而是当你没有更多东西可以移除时。”

**德里科**：你对今天的 Python 最兴奋的是什么？

**Ramalho**: 除了 Python 在数据科学领域的巨大成功之外，我也对 `async/await` 关键字能够实现异步编程的潜力感到兴奋，这不仅可以通过标准的 `asyncio` 库实现，还可以通过如 Trio 这样的第三方库实现。

关于 Python 3.7，最让我兴奋的添加是 PEP 557，它引入了一种创建具有显式数据属性的标准方式。这是像 ORM 这样的库不得不反复重新发明的东西。

**Driscoll**: 你对 Python 2.7 有什么看法？人们应该迁移到最新版本吗？

**Ramalho**: 是的，人们应该完全转向 Python 3.6。这门语言正在稳步发展，而且大多数库已经移植了多年。然而，并不是每个人都能承担得起这样的转变。

> **Luciano Ramalho: '是的，人们应该完全转向 Python 3.6。这门语言正在稳步发展，而且大多数库已经移植了多年。'**

最棘手的部分是解决 `strings` 与 `bytes` 之间的问题。这是一个非常积极的改变，但无法自动化，因为在 Python 2.7 中，`strings` 有时被处理为人类文本，有时被处理为原始字节。

**Driscoll**: 你希望在未来 Python 版本中看到哪些变化？

**Ramalho**: 我希望看到全局解释器锁（GIL）被移除，这样我们就可以在执行 CPU 密集型工作时利用所有处理器核心。不幸的是，拉里·黑斯廷斯在 2017 年中期的最新努力似乎已经停滞。

主要问题是移除 GIL 将会破坏大多数（或所有，取决于你问谁）依赖于 Python/C API 的外部库。大多数人没有意识到的一个事实是，没有 GIL，用另一种语言为 Python 编写扩展将会复杂得多。所以，尽管我们希望 GIL 不存在，但在现实中，它是 Python 成功的基石。

Python 核心开发者埃里克·斯诺写道，GIL 更多的是公关问题。是的，使用 Python `threads` 或异步库可以编写高度并发的 I/O 密集型代码。但是当这样的项目增长或受到重压时，会出现 CPU 密集型瓶颈。这些瓶颈在多线程代码中非常难以找到，但由于 GIL，它们会减慢一切。

也许只有一小部分 Python 项目今天会受到 GIL 的严重影响，但 CPU 的核心越来越多，速度却没有加快，因此利用多个核心变得越来越重要 ([`mail.python.org/pipermail/python-ideas/2015-June/034177.html`](https://mail.python.org/pipermail/python-ideas/2015-June/034177.html) 或 [`lwn.net/Articles/650521/)`](https://lwn.net/Articles/650521/)).

**Driscoll**: 谢谢你，卢西亚诺·拉马洛。
