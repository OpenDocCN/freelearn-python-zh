# 前言

计算机科学的根本线索是计算机架构。这个主题曾经被称为计算机硬件，它关注的是物理计算机本身；也就是说，**中央处理单元**（**CPU**）、内存、总线和外设。计算机硬件与计算机软件相对立，后者适用于计算机执行的程序、应用程序和操作系统。

大多数用户对计算机硬件和架构的关注程度不亚于司机对车辆化油器操作的关心。然而，了解计算机架构在很多方面都是有用的，从如何高效地操作计算机到最大化其安全性。一个很好的类比是飞行员。他们学习如何驾驶飞机，而了解其发动机的工作原理被认为在处理异常情况、延长发动机寿命和最小化燃料消耗方面至关重要。

计算机架构是一个庞大的主题，大致分为三个相互关联的领域：`add P,A,B`，即将 A 加到 B 上，并将和放入 P。本书通过演示如何编写一个模拟计算机的程序来解释计算机架构。

计算机科学中处理计算机如何实现其架构动作的部分被称为计算机组织，这部分内容在很大程度上超出了本文的范围。计算机组织关注的是计算机的门电路和电路。

一本书无法全面地涵盖计算机的所有方面。在这里，我感兴趣的是探讨一个主题：指令集架构（ISA）。我将介绍计算机的指令集并解释其功能。我还会讨论不同类型的指令集；例如，大多数手机中使用的 ARM 处理器与 PC 和笔记本电脑核心的英特尔和 AMD 处理器非常不同。本书的第二部分，我们将专注于特定的计算机，并研究一个现实世界的架构，即 ARM 处理器。

这本书与众不同。有关于计算机架构的书，有关于 Python 的书，还有关于树莓派计算机的书。在这里，我们结合了这三个主题。然而，我并不是肤浅地处理这些主题，让读者对每个主题都只有浅薄和不满意的知识。

我的目的是介绍计算机架构及其指令集。也就是说，我将解释计算机在其原生指令（称为汇编语言）级别是如何工作的。我描述了指令的功能以及它是如何被读取、解释（即解码）和执行的。我还会讨论计算机实现的操作类型。

那么，Python 在这个体系中如何定位呢？Python 是一种流行的通用高级编程语言，可以在 PC、Apple Mac 和树莓派上免费使用。此外，Python 可能是最容易学习的计算机语言之一，而且功能非常强大。

人们通过实践来学习。我决定包含足够的 Python 代码，让读者能够构建一个简单的计算机模拟器，该模拟器可以读取机器级计算机指令并执行它。因为我将展示这个 Python 模拟器的工作原理，学生可以构建符合他们自己规格的计算机。他们可以实验指令集、寻址模式、指令格式等等。他们甚至可以根据自己的规格构建不同类型的计算机，例如，使用**复杂指令集计算机**（**CISC**）或**精简指令集计算机**（**RISC**）架构。CISC 和 RISC 提供了两种不同的计算机设计哲学。本质上，RISC 计算机具有固定长度的指令，只允许寄存器加载和存储内存操作，而 CISC 计算机可以具有可变长度的指令，并允许直接在内存上执行数据操作。实际上，RISC 和 CISC 之间的区别更为复杂。第一代微处理器都遵循 CISC 哲学。

读者可以构建计算机，因为他们可以用 Python 编写程序来执行特定计算机体系结构的目标语言，并且他们可以自己设计那种目标语言。

最受欢迎的计算机体系结构之一是 ARM 处理器，它被无数移动应用甚至苹果笔记本电脑所采用。这不仅是一个经济上占主导地位的处理器系列，而且由于其有趣和创新的架构以及相对平缓的学习曲线，它在教育领域也非常受欢迎。更好的是，这是低成本 Raspberry Pi 计算机所使用的处理器。您可以使用随计算机提供的软件工具在 Raspberry Pi 上运行 ARM 代码。您还可以使用免费软件在 Raspberry Pi 上运行 Python 程序。因此，Raspberry Pi 为学生提供了一个优秀的低成本机器，让他们能够以无需进一步投资硬件或软件的方式研究核心硬件主题。

# 这本书面向的对象

多年来，我一直在教授计算机体系结构，并使用模拟器来教授汇编语言。这种方法展示了指令做什么，但没有展示它们是如何做或如何设计、解码和执行的。我决定为课堂使用创建一个简单的指令模拟器。这本书就是从这个项目演变而来的。

我的目标受众可以分为四个主要群体，如下所示：

+   正在修读计算机体系结构课程并希望通过通过模拟自己的 CPU 来增强他们对计算机体系结构的体验的学生。这种方法将加深他们对计算机体系结构的了解，并增强他们对计算机设计师所面临的权衡的理解。

+   非计算机专业人士、普通人和那些想了解计算机工作原理的爱好者。通过使用 Python 作为设计语言并提供 Python 入门课程，我试图使本书对那些编程经验很少或没有经验的人变得易于理解。

+   树莓派用户。树莓派对计算机科学教育产生了巨大的影响。本书简要介绍了树莓派，并展示了如何使用 ARM 的本地语言编写汇编语言程序。此外，树莓派还提供了一个环境（Python 及其工具），使读者能够理解和模拟计算机。

+   想要学习 Python 的读者。尽管这不是一门正式的 Python 课程，但它提供了一个以目标为导向的 Python 入门介绍；也就是说，它将 Python 应用于实际示例。这种方法避免了传统课程的范围广泛，使得读者能够以相对较浅的学习曲线构建一个实际的应用程序。

+   我并没有假设初学者读者对计算机一无所知。本书假设读者对二进制算术和数制以及布尔变量的基本概念有非常基础的了解。

# 本书涵盖的内容

+   *第一章**，从有限状态机到计算机，*通过用于模拟简单控制系统的有限状态机引入了数字计算机的概念。从那里，我们引入了算法和程序的概念。一旦我们知道我们想让计算机做什么，我们就可以考虑我们需要实现计算机的内容。

+   *第二章**，Python 的高效入门，*提供了在 Python 中实现计算机所需的基本背景知识。 

+   *第三章**，计算机中的数据流，*展示了在程序执行过程中信息在计算机周围流动的方式。当我们用软件模拟程序时，我们必须实现的就是这种数据流。

+   *第四章**，构建解释器——第一步，*开始了通往模拟器的旅程。现在我们已经了解了计算机的概念和一点 Python，我们可以进一步描述计算机模拟器背后的基本思想。在本章中，我们还探讨了计算机指令的本质。

+   *第五章**，更多 Python 知识，*扩展了我们对 Python 的了解，并介绍了诸如 Python 字典等关键主题，这些工具极大地简化了计算机模拟器的设计。

+   *第六章**，TC1 汇编器和模拟器设计，*是本书的核心。在这里，我们讨论了模拟器的组件，然后提供了一个可以模拟假设教学计算机 TC1 的程序。

+   *第七章**，扩展 TC1*，为模拟器添加了更多功能，例如数据检查和创建新指令。

+   *第八章**，其他架构的模拟器*，探讨了不同类型的计算机架构并描述了替代的模拟器。

+   *第九章**，树莓派简介*，改变了方向。在这里，我们探讨了流行的树莓派及其核心的 ARM 处理器。特别是，我们学习了如何将程序输入 ARM 汇编语言并在调试模式下运行它。

+   *第十章**，深入探讨 ARM*，更详细地探讨了 ARM 的指令集，并为编写汇编语言程序提供了基础。

+   *第十一章**，ARM 寻址模式*，更详细地探讨了 ARM 的寻址模式并解释了一些其特殊功能。

+   *第十二章**，子程序和堆栈*，实际上是前一章的扩展，因为我们探讨了 ARM 如何使用其寻址模式来实现堆栈操作，这在汇编语言编程中非常重要。

# 为了充分利用本书

本书分为两部分。第一部分使用 Python 开发计算机模拟器，第二部分简要介绍了树莓派，并利用它作为教授 ARM 汇编语言编程的工具。

我使用装有 Windows 的 PC 来开发 Python 程序。读者可以使用基于 Windows 的系统、苹果 Mac 或任何基于 Linux 的计算机来开发 Python。所有必要的软件都是免费可用的。

当然，您可以使用树莓派本身来开发 Python。

为了编写 ARM 汇编语言程序并调试它们，您需要一个树莓派。这是一个单板计算机，需要电源、键盘、鼠标和显示器。我使用了树莓派 3 型号 A+和树莓派 4 型号 B 版本。

开发 Python 程序所需的软件可以从[`www.python.org`](https://www.python.org)免费获取。树莓派单板计算机不附带操作系统。您必须购买已安装操作系统的 SD 卡或自行下载。详细信息请参阅 https://www.raspberrypi.com/documentation/computers/getting-started.html。

**如果您使用的是本书的数字版，我们建议您亲自输入代码或从本书的 GitHub 仓库（下一节中提供链接）获取代码。这样做将帮助您避免与代码复制粘贴相关的任何潜在错误**。

# 下载示例代码文件

您可以从 GitHub 下载本书的示例代码文件，网址为[`github.com/PacktPublishing/Practical-Computer-Architecture-with-Python-and-ARM`](https://github.com/PacktPublishing/Practical-Computer-Architecture-with-Python-and-ARM)。如果代码有更新，它将在 GitHub 仓库中更新。

我们还有其他来自我们丰富的书籍和视频目录的代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

# 使用的约定

本书使用了多种文本约定。

`文本中的代码`：表示文本中的单词不是普通英语单词，而是属于程序中的单词。

`break`指令会退出`while`循环（即，执行将继续到循环的末尾之外 - 它是一种短路机制）。

为了吸引您对代码中功能的注意，我们有时会使用粗体字体或阴影来突出显示功能。考虑以下示例：

#后面的文本使用非等宽字体，并且是计算机忽略的注释：

```py

for i in range (0,6):         # Repeat six times 
```

# 联系我们

我们欢迎读者的反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请通过电子邮件发送给我们，邮箱地址为 customercare@packtpub.com，并在邮件主题中提及书名。

**勘误**：尽管我们已经尽一切努力确保我们内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们将非常感激您向我们报告。请访问[www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)并填写表格。

**盗版**：如果您在互联网上以任何形式遇到我们作品的非法副本，我们将非常感激您提供位置地址或网站名称。请通过 copyright@packt.com 与我们联系，并提供材料的链接。

**如果您想成为一名作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为本书做出贡献，请访问[authors.packtpub.com](http://authors.packtpub.com)。

# 分享您的想法

一旦您阅读了*《使用 Python 和 ARM 的实用计算机架构》*，我们很乐意听到您的想法！请[点击此处直接转到本书的亚马逊评论页面](https://packt.link/r/1-837-63667-2)并分享您的反馈。

您的评论对我们和科技社区都很重要，并将帮助我们确保我们提供高质量的内容。

# 下载本书的免费 PDF 副本

感谢您购买本书！

您喜欢在路上阅读，但无法携带您的印刷书籍到处走吗？

您的电子书购买是否与您选择的设备不兼容？

别担心，现在每购买一本 Packt 书籍，您都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何设备上阅读。直接从您喜欢的技术书籍中搜索、复制并粘贴代码到您的应用程序中。

优惠远不止这些，您还可以获得独家折扣、时事通讯和每日邮箱中的优质免费内容。

按照以下简单步骤获取优惠：

1.  扫描下面的二维码或访问以下链接

![下载此书的免费 PDF 副本](img/B19624_QR_Free_PDF.jpg)

https://packt.link/free-ebook/9781837636679

1.  提交您的购买证明

1.  就这么简单！我们将直接将您的免费 PDF 和其他优惠发送到您的邮箱
