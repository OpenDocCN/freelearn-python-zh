# 前言

目前有许多 Web 开发框架可供选择。Grok 是许多用 Python 编程语言编写的框架之一，但它可能是最不为人知的。本书是让更多人知道 Grok 可以非常适合许多类型的 Web 开发项目的第一步。

例如，Grok 基于一个名为 Zope Toolkit（ZTK）的软件库，这是一个用于 Python Web 开发的庞大库集合。ZTK 本身是超过十年工作的结果，始于 Zope Web 框架，这是 Python Web 框架中的第一个。

Grok 也是一个现代的 Web 框架，这意味着它也从像 Django 或 Ruby on Rails 这样的流行 Web 框架的创新中吸取了经验。总的来说，随着我们阅读本书，你会发现 Grok 是一个足够敏捷的框架，适用于小型应用程序，同时对于真正复杂的项目来说也足够强大。

# 本书涵盖的内容

第一章，了解 Grok 深入探讨了为什么 Grok 是 Python Web 开发的吸引人选择。你将了解 Grok 如何利用 Zope Toolkit 以及为什么这使得 Grok 强大且灵活。然后，将介绍 Grok 的一些最重要的概念。最后，你将简要了解 Grok 与其他 Web 开发框架的比较。

第二章，开始使用 Grok 展示了如何在不同的平台上安装 Python，以防你对它不熟悉。你将了解 Python 包索引（PyPI）是什么以及如何使用 EasyInstall 从网络上快速安装包。接下来，你将使用名为 grokproject 的工具创建并运行你的第一个项目。

第三章，视图解释了视图是什么以及在哪里定义 Grok 应用程序代码中的视图。对于模板，Grok 使用 ZPT 模板语言，因此你将学习如何使用它并看到最常见语句的实际应用示例。为了测试这一知识，我们将看到如何仅使用视图编写一个完整的 Grok 应用程序。其他涵盖的主题包括如何从网络请求中获取表单参数，如何向 Grok 应用程序添加静态资源，以及如何创建和使用额外的视图。

第四章，模型介绍了模型的概念以及它们与视图之间的关系。在其他关键主题中，你将学习如何在 ZODB 上持久化模型数据，以及如何结构化你的代码以保持显示逻辑与应用逻辑的分离。接下来，我们将了解容器是什么以及如何使用它。最后，我们将解释如何使用多个模型并将特定的视图关联到每个模型。

第五章，表单，将从自动表单的快速演示开始。我们将简要介绍接口和模式的概念，并展示它们如何用于自动生成表单。在其他方面，你将学习如何过滤字段并防止它们在表单中显示，以及如何更改表单模板和展示。

第六章，目录：面向对象的搜索引擎，将讨论如何使用名为目录的工具在数据库中搜索特定对象。我们将介绍目录是什么以及它是如何工作的，索引是什么以及它们是如何工作的，以及如何在目录中存储数据。接下来，我们将学习如何在目录上执行简单查询，以及如何利用这些知识为我们的应用创建一个搜索界面。

第七章，安全，将涵盖认证和授权。Grok 安全基于主体（用户）、权限和角色的概念。它有一个默认的安全策略，你将学习如何修改它。Grok 有一个可插拔的认证系统，允许我们设置自定义安全策略。我们将创建一个并学习如何管理用户。

第八章，应用展示和页面布局，处理基于视图组件概念的 Grok 布局和展示机制。我们将学习视图组件管理器和视图组件是什么，以及如何使用它们来定义布局。然后，我们将介绍层和皮肤的概念，这些概念允许 Grok 应用提供不同的展示和样式。最后，我们将为应用定义一个替代皮肤。

第九章，Grok 和 ZODB，将告诉我们更多关于 ZODB 的信息，包括如何利用其其他功能，如 blob 处理。我们还将了解一些关于 ZODB 维护和需要频繁打包数据库的需求。最后，我们将尝试将 ZODB 作为常规 Python 库在 Grok 外部使用。

第十章，掌握关系数据库，将帮助我们了解 Grok 在关系数据库访问方面提供了哪些功能。以下是一些我们将要涉及的具体内容：为什么 Grok 允许开发者轻松使用关系数据库很重要，什么是对象关系映射器，如何使用 SQLAlchemy 与 Grok 结合，以及如何更改我们的认证机制以使用关系数据库而不是 ZODB。

第十一章，Grok 背后的关键概念对 Grok 的支柱——Zope 组件架构的主要概念进行了更深入的探讨。我们将从解释主要的 ZCA 概念，如接口、适配器和工具，并使用前十章的代码进行说明开始。我们将通过使用一些模式来扩展我们的应用程序，了解 ZCA 的主要好处之一。最重要的是，我们将介绍如何在不修改其代码的情况下扩展一个包。

第十二章，Grokkers、火星人和敏捷配置将介绍 grokkers。Grokker 是一段代码，允许开发者通过在代码中进行声明而不是使用配置文件来使用框架功能。Grok 使用一个名为 Martian 的库来创建自己的 grokkers，我们也将看到如何创建自己的 grokkers。

第十三章，测试和调试简要说明了测试的重要性，然后解释了如何在 Grok 中进行测试。我们将从扩展 grokproject 提供的功能测试套件开始，然后继续介绍其他类型的测试。最后，我们将介绍一些调试工具，包括实时网络调试器。

第十四章，部署讨论了如何使用标准 paster 服务器来部署我们的应用程序。然后，我们将了解如何在 Apache 服务器后面运行应用程序，首先是通过使用简单的代理配置，然后是使用 mod_wsgi。最后，我们将探讨 ZEO 如何为我们提供应用程序的水平可伸缩性，并简要讨论如何通过添加缓存和负载均衡来使网站支持高流量负载。

# 你需要这本书什么

为了让这本书中的示例 Grok 应用程序运行，你需要的只是一个运行 Python 编程语言（版本 2.4 或 2.5）的联网计算机。在 Unix 环境中，你还需要一个 C 编译器。

# 本书面向对象

这本书是为那些想要创建网络应用程序但几乎没有网络开发经验的 Python 开发者准备的。如果你已经使用过其他网络框架，但正在寻找一个能够让你在不失去敏捷性的情况下创建更复杂应用程序的框架，你也将从这本书中受益。读者应大致了解网络应用程序是如何工作的。

# 习惯用法

在这本书中，你会找到许多不同风格的文本，用于区分不同类型的信息。以下是一些这些风格的示例及其含义的解释。

文本中的代码单词如下所示："现在我们有了 `title` 属性，我们可以修改 `index.pt` 模板，使其显示的不是旧文本"。

代码块是这样设置的：

```py
class SetTitle(grok.View):
def update(self,new_title):
self.context.title = new_title
def render(self):
return self.context.title

```

当我们希望引起你对代码块中特定部分的注意时，相关的行或项目将以粗体显示：

```py
# Comment this line to disable developer mode. This should be done in
# production
# devmode on 

```

任何命令行输入或输出都按如下方式编写：

```py
$ bin/paster serve --stop-daemon parts/etc/deploy.ini 

```

**新术语**和**重要词汇**以粗体显示。你在屏幕上看到的，例如在菜单或对话框中的单词，在文本中显示如下：“在**基本类**部分下有一个**提供的接口**部分。”。

### 注意

警告或重要提示以如下框的形式出现。

### 注意

小技巧和技巧以如下形式出现。

# 读者反馈

我们读者的反馈总是受欢迎的。让我们知道你对这本书的看法，你喜欢的或可能不喜欢的。读者反馈对我们开发你真正从中获得最大收益的标题非常重要。

要向我们发送一般反馈，只需发送一封电子邮件到 `<feedback@packtpub.com>`，并在邮件主题中提及书名。

如果你有一本书需要我们出版，请通过 [www.packtpub.com](http://www.packtpub.com) 上的**建议标题**表单或通过电子邮件 `<suggest@packtpub.com>` 发送给我们。

如果你在一个主题上具有专业知识，并且你对撰写或为关于该主题的书籍做出贡献感兴趣，请参阅我们的作者指南 [www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在你已经是 Packt 图书的骄傲拥有者，我们有许多事情可以帮助你从购买中获得最大收益。

### 小贴士

**下载本书的示例代码**

访问[`www.packtpub.com/files/code/7481_Code.zip`](http://www.packtpub.com/files/code/7481_Code.zip) 直接下载示例代码。

## 勘误

尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果你在我们的书中发现错误，可能是文本或代码中的错误，如果你能向我们报告，我们将不胜感激。这样做可以节省其他读者的挫败感，并帮助我们改进本书的后续版本。如果你发现任何勘误，请通过访问 [`www.packtpub.com/support`](http://www.packtpub.com/support)，选择你的书，点击**让我们知道**链接，并输入你的勘误详情。一旦你的勘误得到验证，你的提交将被接受，勘误将被上传到我们的网站，或添加到该标题的现有勘误列表中。任何现有勘误都可以通过从 [`www.packtpub.com/support`](http://www.packtpub.com/support) 选择你的标题来查看。

## 盗版

在互联网上对版权材料的盗版是所有媒体中持续存在的问题。在 Packt，我们非常重视我们版权和许可证的保护。如果你在网上发现我们作品的任何非法副本，无论形式如何，请立即提供位置地址或网站名称，以便我们可以追究补救措施。

请通过以下链接联系我们 `<copyright@packtpub.com>`，并提供涉嫌盗版材料的链接。

我们感谢您在保护我们作者方面的帮助，以及我们为您提供有价值内容的能力。

## 问题

如果您在本书的任何方面遇到问题，可以通过 `<questions@packtpub.com>` 联系我们，我们将尽力解决。
