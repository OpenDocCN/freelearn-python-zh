# 前言

软件的发展意味着随着时间的推移，系统变得越来越复杂，需要越来越多的开发者以协调的方式共同工作。随着规模的增加，一个一般结构由此产生。如果这个结构没有良好规划，可能会变得非常混乱且难以处理。

软件架构的挑战在于规划和设计这个结构。良好的架构使不同的团队能够相互交互，同时对自己的责任和目标有清晰的理解。

系统的架构应该设计得尽可能减少阻力，使得日常软件开发变得可能，从而能够添加功能和扩展系统。在运行中的系统中，架构也总是处于变化之中，可以进行调整和扩展，以故意和流畅的方式重塑不同的软件元素。

在这本书中，我们将看到软件架构的不同方面，从顶层到支持更高视角的一些较低级别的细节。本书分为四个部分，涵盖了生命周期中的所有不同方面：

+   在编写任何代码之前进行设计

+   使用经过验证的方法的架构模式

+   实际代码中的设计实现

+   持续的运营以涵盖变化，并验证一切是否按预期工作

在本书中，我们将涵盖所有这些方面的不同技术。

# 这本书面向的对象

这本书是为想要扩展他们对软件架构知识的软件开发者而写的，无论是经验丰富的开发者想要扩展和巩固他们对复杂系统的直觉，还是经验较少的开发者想要学习和成长，面对更大系统时拥有更广阔的视角。

我们将使用 Python 编写的代码作为示例。虽然你不需要成为专家，但一些基本的 Python 知识是推荐的。

# 这本书涵盖的内容

*第一章*，*软件架构简介*，介绍了软件架构是什么以及为什么它有用，以及提供了一个设计示例。

书的第一部分涵盖了在编写软件之前的*设计*阶段：

*第二章*，*API 设计*，展示了设计有用 API 的基本知识，这些 API 可以方便地抽象操作。

*第三章*，*数据建模*，讨论了存储系统的特性以及如何为应用程序设计适当的数据表示。

*第四章*，*数据层*，讨论了存储数据的代码处理，以及如何使其适合用途。

接下来，我们将展示一个部分，涵盖可用的不同*架构模式*，这些模式重用了经过验证的结构：

*第五章*，*十二要素应用方法*，展示了这种方法如何包括在操作网络服务时可能有用的良好实践，并且可以应用于各种情况。

*第六章*，*Web 服务器结构*，解释了网络服务和在确定操作和软件设计时需要考虑的不同元素。

*第七章*，*事件驱动结构*，描述了另一种异步工作的系统，它接收信息而不立即返回响应。

*第八章*，*高级事件驱动结构*，解释了异步系统的更高级用法以及可以创建的一些不同模式。

*第十章*，*微服务与单体*，介绍了这两种用于复杂系统的架构，并概述了它们之间的差异。

书中的*实现*部分涵盖了代码的编写方式：

*第十章*，*测试和 TDD*，讨论了测试的基础以及如何将测试驱动开发用于编码过程。

*第十一章*，*包管理*，遵循创建代码可重用部分的过程以及如何分发它们。

最后，最后一部分涉及*持续操作*，其中系统正在运行并需要同时进行监控、调整和更改：

*第十二章*，*日志记录*，描述了如何记录工作系统正在做什么。

*第十三章*，*度量*，讨论了聚合不同值以查看整个系统的行为。

*第十四章*，*性能分析*，解释了如何理解代码的执行以改进其性能。

*第十五章*，*调试*，涵盖了深入挖掘代码执行过程以查找和修复错误的过程。

*第十六章*，*持续架构*，描述了如何在运行系统中成功操作架构变更。

# 要充分利用本书

+   本书使用 Python 语言编写代码示例，并假设读者能够阅读它，尽管不需要专家水平。

+   对具有多个服务的复杂系统的先前接触将有助于理解软件架构所提出的不同挑战。这对有几年或更多经验的开发者来说应该是简单的。

+   熟悉网络服务和 REST 接口有助于更好地理解一些元素。

## 下载示例代码文件

本书代码包托管在 GitHub 上，网址为[`github.com/PacktPublishing/Python-Architecture-Patterns`](https://github.com/PacktPublishing/Python-Architecture-Patterns)。我们还有其他来自我们丰富图书和视频目录的代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

## 下载彩色图像

我们还提供了一份包含本书中使用的截图/图表的彩色图像的 PDF 文件。您可以从这里下载：[`static.packt-cdn.com/downloads/9781801819992_ColorImages.pdf`](https://static.packt-cdn.com/downloads/9781801819992_ColorImages.pdf) (_ColorImages.pdf_)

## 使用的约定

本书使用了多种文本约定。

`CodeInText`: 表示文本中的代码词汇、对象名称、模块名称、文件夹名称、文件名、文件扩展名、路径名、虚拟 URL 和用户输入。以下是一个示例：“在这个菜谱中，我们需要导入`requests`模块。”

代码块设置如下：

```py
def leonardo(number):

    if number in (0, 1):

        return 1

    # EXAMPLE COMMENT

    return leonardo(number - 1) + leonardo(number - 2) + 1 
```

注意，代码可能为了简洁和清晰而被编辑。当需要时，请参考 GitHub 上的完整代码。

任何命令行输入或输出都按以下方式编写（注意`$`符号）：

```py
$ python example_script.py parameters 
```

任何 Python 解释器中的输入都按以下方式编写（注意`>>>`符号）。预期输出将不带`>>>`符号：

```py
>>> import logging

>>> logging.warning('This is a warning')

WARNING:root:This is a warning 
```

要进入 Python 解释器，请使用不带参数的`python3`命令：

```py
$ python3

Python 3.9.7 (default, Oct 13 2021, 06:45:31)

[Clang 13.0.0 (clang-1300.0.29.3)] on darwin

Type "help", "copyright", "credits" or "license" for more information.

>>> 
```

任何命令行输入或输出都按以下方式编写：

```py
$ cp example.txt copy_of_example.txt 
```

**粗体**: 表示新术语、重要词汇或您在屏幕上看到的词汇，例如在菜单或对话框中，这些词汇在文本中也会这样显示。例如：“从**管理**面板中选择**系统信息**。”

警告或重要提示如下所示。

技巧和窍门如下所示。

# 联系我们

我们始终欢迎读者的反馈。

**一般反馈**：请通过`feedback@packtpub.com`发送电子邮件，并在邮件主题中提及书籍的标题。如果您对本书的任何方面有疑问，请通过`questions@packtpub.com`发送电子邮件给我们。

**勘误**: 尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们非常感谢您能向我们报告。请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击勘误提交表单链接，并输入详细信息。

**盗版**: 如果您在互联网上以任何形式发现我们作品的非法副本，我们非常感谢您能提供位置地址或网站名称。请通过`copyright@packtpub.com`与我们联系，并附上材料的链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问[`authors.packtpub.com`](http://authors.packtpub.com)。

# 分享您的想法

一旦您阅读了《Python 架构模式》，我们非常乐意听到您的想法！请[点击此处直接访问此书的亚马逊评论页面](https://packt.link/r/1801819998)并分享您的反馈。

您的评论对我们和科技社区都非常重要，它将帮助我们确保提供高质量的内容。
