- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: This is a book about software engineering principles applied to Python.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一本关于软件工程原则应用于Python的书。
- en: There are many books about software engineering, and many resources available
    with information about Python. The intersection of those two sets, though, is
    something that requires action, and that's the gap this book tries to bridge.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 关于软件工程有很多书籍，也有很多关于Python的信息资源。然而，这两个集合的交集需要行动，这就是这本书试图弥补的差距。
- en: It would not be realistic to cover all possible topics about software engineering
    in a single book because the field is so wide that there are entire books dedicated
    to certain topics. This book focuses on the main practices or principles of software
    engineering that will help us write more maintainable code, and how to write it
    by taking advantage of the features of Python at the same time.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在一本书中涵盖软件工程的所有可能主题是不现实的，因为这个领域是如此广阔，以至于有整本书专门讨论某些主题。这本书侧重于软件工程的主要实践或原则，这些实践或原则将帮助我们编写更易于维护的代码，并且同时利用Python的特性来编写它。
- en: 'A word to the wise: there is no single solution to a software problem. It''s
    usually about trade-offs. Each solution will have upsides and downsides, and some
    criteria must be followed to choose between them, accepting the costs and getting
    the benefits. There is usually no single best solution, but there are principles
    to be followed, and as long as we follow them we will be walking a much safer
    path. And that is what this book is about: inspiring the readers to follow principles
    and make the best choices, because even when facing difficulties, we will be much
    better off if we have followed good practices.'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 智者之言：解决软件问题没有单一的解决方案。通常涉及权衡。每种解决方案都有优势和劣势，必须遵循一些标准来在它们之间进行选择，接受成本并获得收益。通常没有单一的最佳解决方案，但有原则可循，只要我们遵循这些原则，我们就会走上更安全的道路。这本书的目的就是激励读者遵循原则并做出最佳选择，因为即使面临困难，如果我们遵循良好的实践，我们也会好得多。
- en: 'And, speaking of good practices, while some of the explanations follow established
    and proven principles, other parts are opinionated. But that doesn''t mean it
    has to be done in that particular way only. The author does not claim to be any
    sort of authority on the matter of clean code, because such a title cannot possible
    exist. The reader is encouraged to engage in critical thinking: take what works
    the best for your project, and feel free to disagree. Differences of opinions
    are encouraged as long as they yield an enlightening debate.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 说到良好的实践，虽然一些解释遵循已建立和经过验证的原则，其他部分则是主观的。但这并不意味着只能以这种特定的方式来完成。作者并不声称自己是任何一种清洁代码的权威，因为这样的头衔根本不存在。鼓励读者进行批判性思考：采用最适合您项目的方法，并且可以自由地提出异议。鼓励不同的观点，只要它们能产生启发性的辩论。
- en: My intention behind this book is to share the joys of Python, and idioms I have
    learned from experience, in the hope that readers will find them useful to elevate
    their expertise with the language.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 我写这本书的目的是分享Python的乐趣，以及我从经验中学到的习惯用法，希望读者会发现它们对提高他们的语言专业知识有用。
- en: The book explains the topics through code examples. These examples assume the
    latest version of Python at the time of this writing is used, namely Python 3.7,
    although future versions should be compatible as well. There are no peculiarities
    in the code that bind it to any particular platform, therefore with a Python interpreter,
    the code examples can be tested on any operating system.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书通过代码示例来解释主题。这些示例假定在撰写本文时使用的是Python的最新版本，即Python 3.7，尽管未来版本也应该兼容。代码中没有任何将其绑定到特定平台的特殊性，因此使用Python解释器，可以在任何操作系统上测试代码示例。
- en: In most of the examples, with the goal of keeping the code as simple as possible,
    the implementations and their tests are written in plain Python using just the
    standard libraries. In some chapters, extra libraries were needed, and in order
    to run the examples of those cases, instructions have been provided along with
    the respective `requirements.txt` file.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在大多数示例中，为了尽可能保持代码简单，实现及其测试都是使用纯Python编写的，只使用标准库。在一些章节中，需要额外的库，并且为了运行这些案例的示例，已经提供了相应的`requirements.txt`文件的说明。
- en: Throughout this book we will discover all the features Python has to offer to
    make our code better, more readable, and easier to maintain. We do so not only
    by exploring the features of the language, but also by analyzing how software
    engineering practices can be applied in Python. The reader will notice that some
    of the reference implementations differ in Python, other principles or patterns
    change slightly, and others might not be even applicable all along. Understanding
    each case represents an opportunity to understand Python more deeply.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我们将发现Python提供的所有功能，使我们的代码更好，更易读，更易于维护。我们不仅通过探索语言的特性来做到这一点，还通过分析软件工程实践如何应用于Python来实现。读者会注意到Python中一些参考实现的不同之处，其他原则或模式略有变化，有些甚至可能根本不适用。理解每种情况都代表着更深入地了解Python。
- en: Who this book is for
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 这本书适合谁
- en: This book is suitable for all software engineering practitioners who are interested
    in software design or learning more about Python. It is assumed that the reader
    is already familiar with the principles of object-oriented software design and
    has some experience writing code.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书适合所有对软件设计感兴趣或想了解更多关于Python的软件工程从业者。假定读者已经熟悉面向对象软件设计原则，并具有一定的编写代码经验。
- en: In terms of Python, the book is suitable for all levels. It's good for learning
    Python because it is organized in such a way that the content is in increasing
    order of complexity. The first chapters will cover the basics of Python, which
    is a good way to learn the main idioms, functions, and utilities available in
    the language. The idea is not just to solve some problems with Python, but to
    do so in an idiomatic way.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 就Python而言，本书适合所有级别的读者。它适合学习Python，因为它以递增的复杂性组织内容。最初的章节将涵盖Python的基础知识，这是学习主要习语、函数和语言中可用的实用程序的好方法。这个想法不仅仅是用Python解决一些问题，而是以一种惯用的方式来解决问题。
- en: Experienced programmers will also benefit from the topics in this book, as some
    sections cover advanced topics in Python, such as decorators, descriptors, and
    an introduction to asynchronous programming. It will help the reader discover
    more about Python because some of the cases are analyzed from the internals of
    the language itself.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 有经验的程序员也会从本书的主题中受益，因为一些部分涵盖了Python中的高级主题，如装饰器、描述符和异步编程的介绍。它将帮助读者更多地了解Python，因为其中一些案例是从语言本身的内部分析的。
- en: It is worth emphasizing the word *practitioners* in the first sentence of this
    section. This is a pragmatic book. Examples are limited to what the case of study
    requires, but are also intended to resemble the context of a real software project.
    It is not an academic book, and as such the definitions made, the remarks made,
    and the recommendations given are to be taken with caution. The reader is expected
    to examine these recommendations critically and pragmatically rather than dogmatically.
    After all, practicality beats purity.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 值得强调的是本节第一句中的“从业者”一词。这是一本务实的书。示例仅限于案例研究所需的内容，但也意在类似于真实软件项目的背景。这不是一本学术书，因此所做的定义、备注和建议应以谨慎的态度对待。读者应该以批判和务实的态度来审视这些建议，而不是教条地接受。毕竟，实用性胜过纯粹。
- en: What this book covers
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书涵盖的内容
- en: '[Chapter 1](bba62a64-dfe9-478f-9b33-6c3240d75f59.xhtml), *Introduction, Code
    Formatting, and Tools*, is an introduction to the main tools you need to set up
    a development environment in Python. We cover the basics a Python developer is
    recommended to know to start working with the language, as well as some guidelines
    for maintaining readable code in the project, such as tools for static analysis,
    documentation, type checking, and code formatting.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 第1章《介绍、代码格式和工具》是介绍你需要设置Python开发环境的主要工具。我们涵盖了Python开发人员建议了解的基础知识，以及一些维护项目中可读代码的指南，如静态分析工具、文档、类型检查和代码格式化。
- en: '[Chapter 2](c6a1dd9e-e567-4254-b5cf-1033b8b89c3d.xhtml), *Pythonic Code*, looks
    at the first idioms in Python, which we will continue to use in the following
    chapters. We cover the particular features of Python, how they should be used,
    and we start building knowledge around the idea that Pythonic code is in general
    much better quality code.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 第2章《Pythonic Code》探讨了Python中的第一个习语，我们将在接下来的章节中继续使用。我们涵盖了Python的特定特性，以及它们应该如何使用，并开始建立围绕Pythonic代码通常更高质量的代码的知识。
- en: '[Chapter 3](0aec97c9-5777-4cd5-8c76-134440c49402.xhtml), *General Traits of
    Good Code*, reviews general principles of software engineering that focus on writing
    maintainable code. We explore the idea and apply the concepts with the tools in
    the language.'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 第3章《良好代码的一般特征》回顾了专注于编写可维护代码的软件工程的一般原则。我们探讨了这个想法，并应用了语言中的工具。
- en: '[Chapter 4](532e5ff0-6f3d-44a5-b2a9-94c686bbd6ba.xhtml), *The SOLID Principles*,
    covers a set of design principles for object-oriented software design. This acronym
    is part of the language or jargon of software engineering, and we see how each
    one of them can be applied to Python. Arguably not all of them are entirely applicable
    due to the nature of the language.'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 第4章《SOLID原则》涵盖了面向对象软件设计的一组设计原则。这个首字母缩略词是软件工程的术语或行话的一部分，我们看到它们每一个如何应用到Python中。由于语言的性质，可以说并非所有原则都完全适用。
- en: '[Chapter 5](f5d9c7e4-4092-48de-a22c-564df482b021.xhtml), *Using Decorators
    to Improve Our Code*, looks at one of the greatest features of Python. After understanding
    how to create decorators (for functions and classes), we put them in action for
    reusing code, separating responsibilities, and creating more granular functions.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 第5章《使用装饰器改进我们的代码》探讨了Python最伟大的特性之一。在理解如何创建装饰器（用于函数和类）之后，我们将它们应用于重用代码、分离责任和创建更细粒度的函数。
- en: '[Chapter 6](1091614c-9831-4645-aaa6-140ae13f08d8.xhtml), *Getting More Out
    of Our Objects with Descriptors*, explores descriptors in Python, which take object-oriented
    design to a new level. While this is a feature more related to frameworks and
    tools, we can see how to improve the readability of our code with descriptors,
    and also reuse code.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 第6章《使用描述符更充分地利用我们的对象》探讨了Python中的描述符，它将面向对象设计提升到一个新的水平。虽然这是一个更与框架和工具相关的特性，但我们可以看到如何通过描述符来提高我们代码的可读性，并重用代码。
- en: '[Chapter 7](32503c77-5ff2-4d35-af0e-8d9300cfa357.xhtml), *Using Generators*,
    shows that generators are probably the best feature of Python. The fact that iteration
    is a core component of Python could make us think that it leads to a new programming
    paradigm. By using generators and iterators in general, we can think about the
    way we write our programs. With the lessons learned from generators, we go further
    and learn about coroutines in Python, and the basics of asynchronous programming.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 第7章《使用生成器》表明生成器可能是Python最好的特性。迭代是Python的核心组件，这可能让我们认为它导致了一种新的编程范式。通过使用生成器和迭代器，我们可以思考我们编写程序的方式。通过生成器学到的经验，我们进一步学习了Python中的协程和异步编程的基础知识。
- en: '[Chapter 8](9f77174d-125b-4fdc-8cfb-563d15edcb64.xhtml), *Unit Testing and
    Refactoring*, discusses the importance of unit tests in any code base that claims
    to be maintainable. The chapter reviews the importance of unit tests, and we explore
    the main frameworks for this (`unittest` and `pytest`).'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '[第8章](9f77174d-125b-4fdc-8cfb-563d15edcb64.xhtml)，*单元测试和重构*，讨论了在任何声称可维护的代码库中进行单元测试的重要性。该章节审查了单元测试的重要性，我们探讨了主要的框架（`unittest`和`pytest`）。'
- en: '[Chapter 9](dee5b4ed-34cd-4077-a5b4-83d4853e6e56.xhtml), *Common Design Patterns*,
    reviews how to implement the most common design patterns in Python, not from the
    point of view of solving a problem, but by examining how they solve problems by
    leveraging a better and more maintainable solution. The chapter mentions the peculiarities
    of Python that have made some of the design patterns invisible and takes a pragmatic
    approach to implement some of them.'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '[第9章](dee5b4ed-34cd-4077-a5b4-83d4853e6e56.xhtml)，*常见设计模式*，审查了如何在Python中实现最常见的设计模式，而不是从解决问题的角度，而是通过研究它们如何通过更好和更易维护的解决方案来解决问题。该章节提到了Python的一些特点，使得一些设计模式变得不可见，并采取了实用的方法来实现其中一些设计模式。'
- en: '[Chapter 10](87530c54-bf97-48c2-a557-de448cd690d4.xhtml), *Clean Architecture*,
    focuses on the idea that clean code is the base of a good architecture. All those
    details we mentioned in the first chapter, and everything else revisited along
    the way, will play a critical role in the entire design when the system is deployed.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '[第10章](87530c54-bf97-48c2-a557-de448cd690d4.xhtml)，*干净的架构*，着重于干净的代码是良好架构的基础这一观念。我们在第一章提到的所有细节，以及沿途重新审视的一切，在系统部署时将在整个设计中发挥关键作用。'
- en: To get the most out of this book
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 充分利用本书
- en: The reader should be familiarized with Python's syntax and have a valid Python
    interpreter installed, which can be downloaded from[ https://www.python.org/downloads/](https://www.python.org/downloads/)
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 读者应熟悉Python的语法，并安装有效的Python解释器，可从[https://www.python.org/downloads/](https://www.python.org/downloads/)下载。
- en: It is recommended to follow the examples in the book and test the code locally.
    For this, it is highly recommended to create a virtual environment with Python
    3.7 and run the code with this interpreter. Instructions to create a virtual environment
    can be found at [https://docs.python.org/3/tutorial/venv.html](https://docs.python.org/3/tutorial/venv.html).
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 建议按照本书中的示例并在本地测试代码。为此，强烈建议使用Python 3.7创建虚拟环境，并使用该解释器运行代码。有关创建虚拟环境的说明，请访问[https://docs.python.org/3/tutorial/venv.html](https://docs.python.org/3/tutorial/venv.html)。
- en: Download the example code files
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载示例代码文件
- en: You can download the example code files for this book from your account at [www.packtpub.com](http://www.packtpub.com).
    If you purchased this book elsewhere, you can visit [www.packtpub.com/support](http://www.packtpub.com/support)
    and register to have the files emailed directly to you.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从[www.packtpub.com](http://www.packtpub.com)的账户中下载本书的示例代码文件。如果您在其他地方购买了本书，可以访问[www.packtpub.com/support](http://www.packtpub.com/support)并注册，文件将直接通过电子邮件发送给您。
- en: 'You can download the code files by following these steps:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以按照以下步骤下载代码文件：
- en: Log in or register at [www.packtpub.com](http://www.packtpub.com/support).
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在[www.packtpub.com](http://www.packtpub.com/support)上登录或注册。
- en: Select the SUPPORT tab.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择SUPPORT选项卡。
- en: Click on Code Downloads & Errata.
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击“代码下载和勘误”。
- en: Enter the name of the book in the Search box and follow the onscreen instructions.
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在搜索框中输入书名，然后按照屏幕上的指示操作。
- en: 'Once the file is downloaded, please make sure that you unzip or extract the
    folder using the latest version of:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 文件下载完成后，请确保使用最新版本的解压缩软件解压缩文件夹：
- en: WinRAR/7-Zip for Windows
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows系统使用WinRAR/7-Zip
- en: Zipeg/iZip/UnRarX for Mac
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Mac系统使用Zipeg/iZip/UnRarX
- en: 7-Zip/PeaZip for Linux
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux系统使用7-Zip/PeaZip
- en: The code bundle for the book is also hosted on GitHub at [https://github.com/PacktPublishing/Clean-Code-in-Python](https://github.com/PacktPublishing/Clean-Code-in-Python). In
    case there's an update to the code, it will be updated on the existing GitHub
    repository.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 本书的代码包也托管在GitHub上，网址为[https://github.com/PacktPublishing/Clean-Code-in-Python](https://github.com/PacktPublishing/Clean-Code-in-Python)。如果代码有更新，将在现有的GitHub存储库上进行更新。
- en: We also have other code bundles from our rich catalog of books and videos available
    at **[https://github.com/PacktPublishing/](https://github.com/PacktPublishing/)**.
    Check them out!
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还提供来自我们丰富书籍和视频目录的其他代码包，可在**[https://github.com/PacktPublishing/](https://github.com/PacktPublishing/)**上查看！
- en: Conventions used
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用的约定
- en: There are a number of text conventions used throughout this book.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中使用了许多文本约定。
- en: '`CodeInText`: Indicates code words in text, database table names, folder names,
    filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles.
    Here is an example: "Then, just running the `pylint` command is enough to check
    it in the code."'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '`CodeInText`：表示文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟URL、用户输入和Twitter用户名。例如："然后，只需运行`pylint`命令就足以在代码中进行检查。"'
- en: 'A block of code is set as follows:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块设置如下：
- en: '[PRE0]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们希望引起您对代码块的特定部分的注意时，相关行或项目将以粗体显示：
- en: '[PRE1]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Any command-line input or output is written as follows:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 任何命令行输入或输出都以以下方式书写：
- en: '[PRE2]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '**Bold**: Indicates a new term, an important word, or words that you see onscreen.
    For example, words in menus or dialog boxes appear in the text like this. Here
    is an example: "Select System info from the Administration panel."'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词会以这种方式出现在文本中。例如："从管理面板中选择系统信息。"'
- en: Warnings or important notes appear like this.Tips and tricks appear like this.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 警告或重要提示会以这种方式出现。技巧和窍门会以这种方式出现。
