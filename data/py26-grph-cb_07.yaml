- en: Chapter 7. Combining Raster and Vector Pictures
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第7章. 合并光栅和矢量图片
- en: 'In this chapter, we will cover:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖：
- en: Simple animation of a GIF beach ball
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GIF沙滩球的简单动画
- en: The vector walking creature
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向量行走的生物
- en: Bird with shoes walking in the karroo
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在卡拉罗行走穿着鞋的鸟
- en: Making a partially transparent image with Gimp
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Gimp制作部分透明的图像
- en: Diplomat walking at the palace
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在宫殿里行走的外交官
- en: Spider in the forest
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 森林中的蜘蛛
- en: Moving band of images
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移动的图像带
- en: Continuous band of images
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 连续的图像带
- en: Endless background a passing cloudscape
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无尽的背景和飘过的云景
- en: Vector graphics as seen in [Chapter 2](ch02.html "Chapter 2. Drawing Fundamental
    Shapes"), *Drawing Fundamental Shapes* and [Chapter 3](ch03.html "Chapter 3. Handling
    Text"), *Handling Text* can be shrunk and expanded to any size and in any direction
    using simple algebra. They can be animated with rotations using basic trigonometry.
    Raster graphics are limited. They cannot be resized or rotated dynamically while
    the code is executing. They are more cumbersome. However, we can get tremendous
    effects when we combine both vector and raster graphics together. The one thing
    that Python cannot do is to rotate a `GIF` image by itself. There are ways of
    mimicking rotation reasonably but there are limitations you will appreciate after
    trying out some of these recipes. PIL can rotate them, but not dynamically on
    a Tkinter canvas. We explore some possibilities and workarounds here.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 如[第2章](ch02.html "第2章. 绘制基本形状")、*绘制基本形状*和[第3章](ch03.html "第3章. 处理文本")、*处理文本*中看到的矢量图形，可以通过简单的代数缩小和放大到任何大小和任何方向。它们可以通过基本的三角函数进行旋转动画。光栅图形是有限的。在代码执行时，它们不能动态地调整大小或旋转。它们更繁琐。然而，当我们结合矢量图形和光栅图形时，我们可以得到惊人的效果。Python不能自己旋转`GIF`图像。有方法可以合理地模拟旋转，但在尝试了一些这些食谱之后，你会欣赏到这些限制。PIL可以旋转它们，但不能在Tkinter画布上动态旋转。我们在这里探索一些可能性和解决方案。
- en: Because we are not altering and manipulating the actual properties of the images
    we do not need the Python Imaging Library (PIL) in this chapter. We need to work
    exclusively with `GIF` format images because that is what Tkinter deals with.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 因为我们在不改变和操作图像的实际属性，所以我们不需要在本章中使用Python Imaging Library (PIL)。我们需要专门使用`GIF`格式的图像，因为Tkinter就是处理这种格式的。
- en: We will also see how to use "The GIMP" as a tool to prepare images suitable
    for animation.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还将看到如何使用"The GIMP"作为工具来准备适合动画的图像。
- en: Simple animation of a GIF beach ball
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: GIF沙滩球的简单动画
- en: We want to animate a raster image, derived from a photograph.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 我们想要动画化一个光栅图像，该图像是从照片中提取的。
- en: To keep things simple and clear we are just going to move a photographic image
    (in `GIF` format) of a beach ball across a black background.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 为了保持简单和清晰，我们只是将沙滩球的摄影图像（`GIF`格式）在黑色背景上移动。
- en: Getting ready
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备中
- en: We need a suitable `GIF` image of an object that we want to animate. An example
    of one, named `beachball.gif` has been provided.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要一个合适的`GIF`图像，这是我们想要动画化的对象。一个例子，命名为`beachball.gif`，已经提供。
- en: How to do it...
  id: totrans-19
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: Copy a `.gif` file from somewhere and paste it into a directory where you want
    to keep your work-in-progress pictures.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 从某处复制一个`.gif`文件并将其粘贴到你想要保存工作进度图片的目录中。
- en: Ensure that the path in our computer's file system leads to the image to be
    used. In the example below the instruction `ball = PhotoImage(file = "constr/pics2/beachball.gif")`
    says that the image to be used will be found in a directory (folder) called `pics2`,
    which is a sub-folder of another folder called `constr`.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 确保我们计算机文件系统中的路径指向要使用的图像。在下面的例子中，指令`ball = PhotoImage(file = "constr/pics2/beachball.gif")`表示要使用的图像将在名为`pics2`的目录（文件夹）中找到，它是另一个名为`constr`的文件夹的子文件夹。
- en: Then execute the following code.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 然后执行以下代码。
- en: '[PRE0]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: How it works...
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The image of the beach ball is shifted across a canvas in exactly the same manner
    that was used in [Chapter 4](ch04.html "Chapter 4. Animation Principles"), *Animation
    Principles*. The difference now is that the photo type images always occupy a
    rectangular area of screen. The size of this box, called the bounding box, is
    the size of the image. We have used a black background so the black corners on
    the image of our beach ball cannot be seen.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 沙滩球的图像在画布上移动的方式与[第4章](ch04.html "第4章. 动画原理")、*动画原理*中使用的方式完全相同。现在的不同之处在于，照片类型的图像总是占据屏幕的矩形区域。这个框的大小，称为边界框，是图像的大小。我们使用了黑色背景，所以沙滩球图像上的黑色角落看不见。
- en: The vector walking creature
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 向量行走的生物
- en: We make a pair of walking legs using the vector graphics of [Chapter 2](ch02.html
    "Chapter 2. Drawing Fundamental Shapes"), *Drawing Fundamental Shapes* and [Chapter
    4](ch04.html "Chapter 4. Animation Principles"), *Animation Principles, Handling
    Text*. We want to use these legs together with pieces of raster images and see
    how far we can go in making appealing animations. We import Tkinter, math, and
    time modules. The math is needed to provide the trigonometry that sustains the
    geometric relations that move the parts of the leg in relation to each other.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用 [第 2 章](ch02.html "第 2 章。绘制基本形状") 的矢量图形和 [第 4 章](ch04.html "第 4 章。动画原理")
    的 *动画原理，处理文本*，制作一对行走腿。我们想使用这些腿与一些光栅图像的片段一起，看看我们能在制作吸引人的动画方面走多远。我们导入 Tkinter、math
    和 time 模块。数学是必要的，以提供维持腿部各部分之间几何关系的三角学。
- en: '![The vector walking creature](img/3845_07_01.jpg)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![矢量行走生物](img/3845_07_01.jpg)'
- en: Getting ready
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: We will be using Tkinter and time modules as was done in [Chapter 4](ch04.html
    "Chapter 4. Animation Principles"), again to animate the movement of lines and
    circles. You will see some trigonometry in the code. If you do not like mathematics
    you can just cut and paste the code without the need to understand exactly how
    the maths works. However, if you are a friend of mathematics it is fun to watch
    sine, cosine, and tangent working together to make a child smile.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用 Tkinter 和时间模块，就像在 [第 4 章](ch04.html "第 4 章。动画原理") 中所做的那样，再次用于动画线条和圆的运动。你将在代码中看到一些三角学。如果你不喜欢数学，你可以直接复制粘贴代码，无需理解数学是如何工作的。然而，如果你是数学的朋友，观看正弦、余弦和正切一起工作，让一个孩子微笑是很有趣的。
- en: How to do it...
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: Execute the program as shown in the previous image.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 按照前一个图像所示执行程序。
- en: '[PRE1]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: How it works...
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Without getting bogged down in detail, the strategy in the program consists
    of defining the motion of a foot while walking one stride. This motion is defined
    by eight relative positions given by the two lists `step_x (horizontal)` and `step_y
    (vertical)`. The motion of the hips is given by a separate pair of x- and y-positions
    `hip_x` and `hip_y`.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 不深入细节，程序中的策略包括在走一步时定义一只脚的运动。这种运动由两个列表 `step_x（水平）` 和 `step_y（垂直）` 给出的八个相对位置定义。臀部运动由一对单独的
    x 和 y 位置 `hip_x` 和 `hip_y` 给出。
- en: Trigonometry is used to work out the position of the knee on the assumption
    that the thigh and lower leg are the same length. The calculation is based on
    the sine rule taught in high school. Yes, we do learn useful things at school!
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 使用三角学来计算膝盖的位置，假设大腿和小腿的长度相同。计算基于高中教授的正弦法则。是的，我们在学校确实学到了有用的东西！
- en: The *time-animation regulation* instructions are assembled together as a function
    `animdelay()`.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 将 *时间动画调节* 指令组装成一个函数 `animdelay()`。
- en: There's more...
  id: totrans-38
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: In Python `math` module, two arc-tangent functions are available for calculating
    angles given the lengths of two adjacent sides. `atan2(y,x)` is the best because
    it takes care of the crazy things a tangent does on its way around a circle -
    tangent flicks from minus infinity to plus infinity as it passes through 90 degrees
    and any multiples thereof.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Python 的 `math` 模块中，有两个反正切函数可用于根据两个相邻边的长度计算角度。`atan2(y,x)` 是最好的，因为它处理了正切在圆周上运行时所做的疯狂事情——当它通过
    90 度及其倍数时，正切从负无穷大跳到正无穷大。
- en: A mathematical knee is quite happy to bend forward or backward in satisfying
    its equations. We make the sign of the angle negative for a backward-bending bird
    knee and positive for a forward bending mammalian knee.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 一个数学膝盖很乐意向前或向后弯曲以满足其方程。我们使角度的符号为负，以使向后弯曲的鸟膝盖为正，以使向前弯曲的哺乳动物膝盖为正。
- en: More Info Section 1
  id: totrans-41
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 更多信息部分 1
- en: This animated walking hips-and-legs is used in the recipes that follow this
    to make a bird walk in the desert, a diplomat in palace grounds, and a spider
    in a forest.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 这个动态的行走臀部和大腿动作被用于以下食谱中，制作沙漠中的鸟、宫殿地面的外交官和森林中的蜘蛛行走。
- en: Bird with shoes walking in the Karroo
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 Karroo 走路的穿鞋鸟
- en: We now coordinate the movement of four `GIF` images and the striding legs to
    make an Apteryx (a flightless bird like the kiwi) that walks.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在协调四个 `GIF` 图像和行走腿的动作，制作一只会走的 Apteryx（一种像几维鸟一样的不会飞的鸟）。
- en: '![Bird with shoes walking in the Karroo](img/3845_07_02.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![在 Karroo 走路的穿鞋鸟](img/3845_07_02.jpg)'
- en: Getting ready
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'We need the following `GIF` images:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要以下 `GIF` 图像：
- en: A background picture of a suitable landscape
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一幅合适的风景背景图
- en: A bird body without legs
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一只没有腿的鸟身体
- en: A pair of garish-colored shoes to make the viewer smile
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一双鲜艳颜色的鞋子，让人微笑
- en: The walking avian legs of the previous recipe
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 之前食谱中的行走鸟类腿
- en: The images used are `karroo.gif, apteryx1.gif`, and `shoe1.gif`. Note that the
    images of the bird and the shoe have transparent backgrounds which means there
    is no rectangular background to be seen surrounding the bird or the shoe. In the
    recipe following this one, we will see the simplest way to achieve the necessary
    transparency.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 使用的图像是`karroo.gif, apteryx1.gif`和`shoe1.gif`。请注意，鸟和鞋的图像具有透明背景，这意味着在鸟或鞋周围看不到矩形背景。在接下来的食谱中，我们将看到实现所需透明度的最简单方法。
- en: How to do it...
  id: totrans-53
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Execute the program shown in the usual way.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 以通常的方式执行程序。
- en: '[PRE2]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: How it works...
  id: totrans-56
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The same remarks concerning the trigonometry made in the previous recipe apply
    here. What we see here now is the ease with which vector objects and raster images
    can be combined once suitable `GIF` images have been prepared.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 之前食谱中对三角学所做的评论也适用于这里。我们现在看到的是，一旦准备好了合适的`GIF`图像，矢量对象和位图图像可以很容易地结合起来。
- en: There's more...
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: For teachers and their students who want to make lessons on a computer, these
    techniques offer all kinds of possibilities like history tours and re-enactments,
    geography tours, and, science experiments. Get the students to do projects telling
    stories. Animated year books?
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 对于想要在电脑上制作课程的教师及其学生，这些技术提供了各种可能性，如历史之旅和重演、地理之旅，以及科学实验。让学生们做项目讲述故事。动画年鉴？
- en: Making GIF images with transparent backgrounds using GIMP
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用GIMP制作具有透明背景的GIF图像
- en: We make an image with an opaque background into one with a transparent background
    using the free and open-source GIMP image editor.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用免费开源的GIMP图像编辑器将具有不透明背景的图像转换为具有透明背景的图像。
- en: Getting ready
  id: totrans-62
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: We can get **GIMP** (**GNU Image Manipulation Program**) at [http://www.gimp.org/](http://www.gimp.org/).
    There are versions that can be installed on Windows and Linux. GIMP is an excellent
    package and well-worth the effort of learning to use. It can be frustrating when
    you are not used to it so this particular recipe is devoted to describing the
    steps that will transform a `.png` image with an opaque background into a `.gif`
    image with a transparent background.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以在[http://www.gimp.org/](http://www.gimp.org/)获取**GIMP**（**GNU图像处理程序**）。有适用于Windows和Linux的版本。GIMP是一个优秀的软件包，值得学习如何使用。如果你不习惯它，可能会感到有些挫败，所以这个特定的食谱专门描述了将具有不透明背景的`.png`图像转换为具有透明背景的`.gif`图像的步骤。
- en: In Windows, you simply go to the website and click the **Download** button and
    it will install and can be used immediately. With Linux, it is often already installed.
    With any Debian-based Linux `sudo apt-get install gimp` should get it installed
    and you are ready to go.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在Windows系统中，你只需访问网站并点击**下载**按钮，它就会自动安装并立即可以使用。在Linux系统中，它通常已经预装了。对于基于Debian的Linux系统，使用`sudo
    apt-get install gimp`命令应该可以安装它，然后你就可以开始使用了。
- en: How to do it...
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: This recipe does not involve running Python code. Instead, it is a list of actions
    to perform with your mouse on the Gimp GUI. In the following instructions, click
    **Select** | **Invert** is the short-form for "Left-click on, select, then left-click
    on Invert".
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 这个食谱不涉及运行Python代码。相反，它是一系列在GIMP GUI上使用鼠标执行的操作。在以下说明中，点击**选择** | **反转**是“左键点击，选择，然后左键点击反转”的简称。
- en: Open GIMP and open the file `apteryx1.png`. This is a cartoon bird that has
    been drawn.![How to do it...](img/3845_07_03.jpg)
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开GIMP并打开文件`apteryx1.png`。这是一只已经画好的卡通鸟。[如何操作...](img/3845_07_03.jpg)
- en: Click **Windows** | **Dockable dialogs** | **Layers**. This will open up a display
    panel that shows all the layers making up the image we are working on. Watching
    what is going on with the layers is the secret to using GIMP.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**窗口** | **可停靠对话框** | **图层**。这将打开一个显示面板，显示我们正在工作的图像的所有图层。观察图层的变化是使用GIMP的秘诀。
- en: Click **Select** | **By color**, and then place the cursor arrow anywhere on
    the black portion of the image and click. You will see a shimmering dotted line
    around the outline of the bird. What we have done is to select for alteration
    only the black portions of the picture.![How to do it...](img/3845_07_04.jpg)
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**选择** | **按颜色**，然后将光标箭头放在图像的黑色部分上并点击。你将看到围绕鸟轮廓的闪烁虚线。我们所做的是仅选择图片中的黑色部分进行修改。[如何操作...](img/3845_07_04.jpg)
- en: Click **Select** | **Invert**. What this does is it changes the selection to
    everything except the black portion.
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**选择** | **反转**。这样做是将选择更改为除了黑色部分之外的所有内容。
- en: Click **Edit** | **Copy**. This picks up a copy of the selected portion (everything
    not black) and places it onto an invisible clipboard.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**编辑** | **复制**。这会选取所选部分的副本（除了黑色之外的所有内容）并将其放置在不可见的剪贴板上。
- en: Click **Edit** | **Paste**. This takes a copy from the clipboard and potentially
    pastes it onto our existing image. But until you have completed the next step,
    the pasted image is held in a kind of no-man's land.
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**编辑** | **粘贴**。这将从剪贴板复制内容，并可能将其粘贴到我们现有的图像上。但在你完成下一步之前，粘贴的图像将处于一种无人地带。
- en: Click **Layer** | **New**. This firmly places the pasted portion of the image
    onto its own separate layer. The layers are like sheets of clear glass with portions
    of a composite picture on it. When you work on them and change one layer, the
    others are unaltered.![How to do it...](img/3845_07_05.jpg)
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**图层** | **新建**。这会将图像粘贴部分牢固地放置在其自己的单独图层上。图层就像带有复合图像部分的透明玻璃片。当你对它们进行操作并更改一个图层时，其他图层保持不变。![如何操作...](img/3845_07_05.jpg)
- en: Right-click the **Backdrop layer** as shown, then click **Delete Layer**. This
    discards the Backdrop layer that consists of the original image. You will see
    there is only one layer left. It contains the bird image placed on a transparent
    background.![How to do it...](img/3845_07_06.jpg)
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击如图所示的**背景图层**，然后点击**删除图层**。这将丢弃由原始图像组成的背景图层。你会看到只剩下一个图层。它包含放置在透明背景上的鸟的图像。![如何操作...](img/3845_07_06.jpg)
- en: Click **File** | **Save as**. In the save window, type in `apteryx1.gif` for
    the file name.![How to do it...](img/3845_07_07.jpg)
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**文件** | **另存为**。在保存窗口中，输入`apteryx1.gif`作为文件名。![如何操作...](img/3845_07_07.jpg)
- en: Close GIMP. You will find your new `GIF` image with a transparent background
    in whatever folder you sent it to. In Linux systems, transparent areas are shown
    as a gray checker-board pattern.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭GIMP。你将在你发送到的任何文件夹中找到带有透明背景的新`GIF`图像。在Linux系统中，透明区域显示为灰色棋盘图案。
- en: How it works...
  id: totrans-77
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: All images used in this chapter that have areas which are transparent were prepared
    using GIMP this way. There are other ways to achieve this but this is possibly
    the most readily available one. The animations in this chapter consist of a smaller,
    partially transparent image moving across a larger opaque image.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中使用的所有具有透明区域的图像都是用这种方式准备的。还有其他方法可以实现这一点，但这可能是最易得的。本章中的动画由一个较小的、部分透明的图像在较大的不透明图像上移动组成。
- en: Diplomat walking at the palace
  id: totrans-79
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 外交官在宫殿中行走
- en: We now animate a dignified man using the same legs as before, appropriately
    colored. For the human style walk, we need to select the correct mammalian knee-bend
    angle option chosen in the code prior to interpreting.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在使用之前相同的腿，并适当着色，来动画化一个庄重的人。对于人类风格的行走，我们需要选择在代码中预先选择的正确的哺乳动物膝盖弯曲角度选项。
- en: '![Diplomat walking at the palace](img/3845_07_08.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![外交官在宫殿中行走](img/3845_07_08.jpg)'
- en: Getting ready
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'We need the following `GIF` images:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要以下`GIF`图像：
- en: A background picture of a suitable landscape
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个合适的风景背景图片
- en: A human body without legs
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个没有腿的人类身体
- en: A pair of sober shoes for dignity
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一双庄重的鞋子以彰显尊严
- en: The walking mammal legs
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 行走的哺乳动物腿
- en: The images used are `palace.gif, ambassador.gif`, and `ambassador_shoe1.gif`.
    As before, the images of the man and the shoe have transparent backgrounds.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 使用的图像是`palace.gif, ambassador.gif`和`ambassador_shoe1.gif`。和之前一样，人和鞋的图像都有透明的背景。
- en: How to do it...
  id: totrans-89
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Execute the program shown as before.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 执行之前显示的程序。
- en: '[PRE3]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: How it works...
  id: totrans-92
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The great possibilities offered through the use of image combining using the
    transparent channel in `GIF` images allows us to create studio-quality cartoon
    animations. The same remarks concerning the trigonometry made in the previous
    recipe apply here.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 通过使用`GIF`图像中的透明通道进行图像组合所提供的大量可能性，使我们能够创建工作室质量的卡通动画。关于之前菜谱中提到的三角学的评论也适用于此处。
- en: Spider in the forest
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 森林中的蜘蛛
- en: We now combine both mammal and bird leg motions to create a sinister-looking
    spider. We also introduce a moving background for the first time. No transparent
    images are used here as the entire spider is made of animated vector lines and
    ovals.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在结合哺乳动物和鸟类的腿的动作来创建一个看起来邪恶的蜘蛛。我们也是第一次引入移动背景。这里没有使用透明图像，因为整个蜘蛛是由动画矢量线和椭圆组成的。
- en: '![Spider in the forest](img/3845_07_09.jpg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![森林中的蜘蛛](img/3845_07_09.jpg)'
- en: Getting ready
  id: totrans-97
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Here, we need one long narrow strip image that is substantially wider than the
    Tkinter canvas provided. This not a problem and aids us in creating the illusion
    of a spider walking through an endless forest.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，我们需要一张长而窄的条带图片，其宽度远大于Tkinter画布提供的宽度。这并不是问题，并帮助我们创造蜘蛛穿越无尽森林的错觉。
- en: How to do it...
  id: totrans-99
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: Execute the program shown as before.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 按照之前的方式执行显示的程序。
- en: '[PRE4]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: How it works...
  id: totrans-102
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The essential art in making the spider walk acceptably is to adjust the length
    of stride, height of body above the ground, and thigh (leg segment) length to
    be consistent with each other. With slightly wrong adjustments, the legs roll
    over or appear made of very stretchy material.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 制作蜘蛛行走看起来合理的本质艺术在于调整步长、身体离地高度和腿（腿节）长度，使它们彼此一致。稍微调整错误，腿就会打滑或看起来是由非常有弹性的材料制成的。
- en: There is also the issue of how the spider's leg movements should be synchronized.
    In this recipe, we have opted to make the limbs move in paired sequences.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 还有蜘蛛腿运动同步的问题。在这个食谱中，我们选择让肢体以配对序列移动。
- en: There's more...
  id: totrans-105
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Real spiders have eight legs, not six as in this example. You could try to add
    the extra pair of legs as a challenge. Real spiders also have an extra pair of
    segments in each leg. Getting the leg trigonometry to work is an excellent challenge
    for the mathematically talented ones.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 真蜘蛛有八条腿，而不是像这个例子中的六条。你可以尝试添加额外的腿对作为一个挑战。真正的蜘蛛每条腿还有额外的节段。让腿的三角学工作对于数学天才来说是一个极好的挑战。
- en: Moving band of images
  id: totrans-107
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 移动的图片带
- en: We make a moving band of images like a slideshow. This differs from the typical
    slideshow by showing the images as a continuously moving strip with the images
    placed end to end.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 我们制作一个像幻灯片一样的移动图片带。这与典型的幻灯片不同，因为它显示的是一张连续移动的条带，图片被放置在末端到末端。
- en: '![Moving band of images](img/3845_07_10.jpg)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![移动的图片带](img/3845_07_10.jpg)'
- en: Getting ready
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'We need a set of four images, all of the same size. If they were not the same
    size, the program would still work but would not look well designed. The images
    provided for this code are: `brass_vase.gif, red_vase.gif, blue_vase.gif`, and
    `glass_vase.gif` and are 200 pixels high and 100 wide.'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要一套四张图片，所有图片大小相同。如果它们的大小不同，程序仍然可以工作，但看起来设计得不好。为这段代码提供的图片是：`brass_vase.gif,
    red_vase.gif, blue_vase.gif` 和 `glass_vase.gif`，高度为200像素，宽度为100像素。
- en: How to do it...
  id: totrans-112
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: Execute the program shown as before.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 按照之前的方式执行显示的程序。
- en: '[PRE5]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: How it works...
  id: totrans-115
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Each image has its own x position coordinate posn_x1, posn_x2 etc. A 'for' loop
    adjusts these positions by one pixel each time the loop is executed, causing the
    images to progressively shift to the left.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 每张图片都有自己的x位置坐标 posn_x1，posn_x2 等。一个 'for' 循环在每次循环执行时将这些位置调整一个像素，导致图片逐渐向左移动。
- en: Continuous band of images
  id: totrans-117
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 连续的图片带
- en: This recipe extends the position-adjusting mechanism used in the previous example
    to sustain a continuous strip of images.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 这个食谱扩展了之前示例中使用的位置调整机制，以维持连续的图片带。
- en: Getting ready
  id: totrans-119
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: We use the same set of four images that were used in the previous recipe.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用与之前食谱中相同的四张图片。
- en: How to do it...
  id: totrans-121
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: Execute the program shown in exactly the same way as before.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 按照之前完全相同的方式执行程序。
- en: '[PRE6]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: How it works...
  id: totrans-124
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The trick with this program is to reset the x position coordinates, `posn_1`,
    and so on, which control the position of each image on the canvas after the image
    has exited the canvas on the left. The position coordinates get reset to a position
    200 pixels off to the right of the canvas.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 这个程序的小技巧是重置x位置坐标，`posn_1` 等，这些坐标控制图片在画布上退出后画布上的位置。位置坐标被重置到画布右侧200像素的位置。
- en: Endless background
  id: totrans-126
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 无尽背景
- en: The next thing to achieve is to create what appears to be one practically infinitely
    wide panorama. We extend the technique used in the previous example and make a
    background image that appears to be endless.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个要实现的是创建一个看起来几乎是无限宽的全景。我们扩展了之前示例中使用的技术，制作了一个看起来似乎是无限长的背景图片。
- en: '![Endless background](img/3845_07_11.jpg)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![无尽背景](img/3845_07_11.jpg)'
- en: Getting ready
  id: totrans-129
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'We have provided a single image that has been doctored so that the right-hand
    edge fits exactly onto the left-hand edge to create an endless and continuous
    image if they are placed side by side. The GIMP image manipulation program was
    used to do this editing. In a very condensed explanation, we do the following:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 我们提供了一个经过处理的单一图像，其右侧边缘与左侧边缘完全吻合，如果它们并排放置，将创建一个无限连续的图像。在此编辑中使用了GIMP图像处理程序。用非常简化的解释来说，我们执行以下操作：
- en: We copy a portion of the image that does not have too much detail vertically
    where we make the cut.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们复制图像的一部分，这部分在垂直方向上细节不多，这是我们进行裁剪的地方。
- en: This is then pasted onto one end so that there is substantial overlap of the
    two images.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后将这部分粘贴到一端，以便两个图像有实质性的重叠。
- en: Then the top layer, containing the copy-and-pasted portion, has the eraser tool
    with a fuzzy edge applied so that we cannot see the transition from one image
    to the next.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，包含复制和粘贴部分的顶层应用了模糊边缘的橡皮擦工具，这样我们就看不到从一幅图像到另一幅图像的过渡。
- en: How to do it...
  id: totrans-134
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: Execute the following code.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下代码。
- en: '[PRE7]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: How it works...
  id: totrans-137
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: We use the same x coordinate position adjustment technique as we did in the
    previous recipe. This time we choose the position for readjustment to be a multiple
    of 574 which is the width, in pixels, of the cloudscape image. We also use the
    image of an airplane, on a transparent background. The airplane is kept stationary.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用与之前食谱中相同的x坐标位置调整技术。这次我们选择调整位置为574的倍数，这是云景图像的像素宽度。我们还使用了透明背景的飞机图像。飞机保持静止。
