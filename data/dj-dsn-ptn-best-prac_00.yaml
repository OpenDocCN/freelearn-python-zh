- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: Django is one of the most popular web frameworks in use today. It powers large
    websites, such as Pinterest, Instagram, Disqus, and NASA. With a few lines of
    code, you can rapidly build a functional and secure website that can scale to
    millions of users.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: Django是当今最受欢迎的Web框架之一。它为大型网站提供动力，例如Pinterest、Instagram、Disqus和NASA。只需几行代码，您就可以快速构建一个功能齐全且安全的网站，可以扩展到数百万用户。
- en: This book attempts to share solutions to several common design problems faced
    by Django developers. Sometimes, there are several solutions but we often wonder
    whether there is a recommended approach. Experienced developers frequently use
    certain idioms while deliberately avoiding certain others.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本书试图分享解决Django开发人员面临的几个常见设计问题的解决方案。有时，有几种解决方案，但我们经常想知道是否有推荐的方法。经验丰富的开发人员经常使用某些习惯用法，同时故意避免其他一些习惯用法。
- en: This book is a collection of such patterns and insights. It is organized into
    chapters each covering a key area of the framework, such as Models, or an aspect
    of web development, such as Debugging. The focus is on building clean, modular,
    and more maintainable code.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本书是这些模式和见解的集合。它分为几章，每章涵盖框架的一个关键领域，例如模型，或Web开发的一个方面，例如调试。重点是构建清洁、模块化和更易维护的代码。
- en: Every attempt has been made to present up-to-date information and use the latest
    versions. Django 1.7 comes loaded with exciting new features, such as built-in
    schema migrations and app reloading. Python 3.4 is the bleeding edge of the language
    with several new modules, such as asyncio. Both, both of which have been used
    here.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经尽力提供最新信息并使用最新版本。Django 1.7充满了令人兴奋的新功能，例如内置模式迁移和应用程序重新加载。Python 3.4是该语言的最前沿，具有几个新模块，例如asyncio。这两者都在这里使用了。
- en: Superheroes are a constant theme throughout the book. Most of the code examples
    are about building SuperBook—a social network of superheroes. As a novel way to
    present the challenges of a web development project, an exciting fictional narrative
    has been woven into each chapter in the form of story boxes.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 超级英雄是本书中的一个不断出现的主题。大多数代码示例都是关于构建SuperBook——一个超级英雄的社交网络。作为呈现Web开发项目挑战的一种新颖方式，每章都以故事框的形式编织了一个令人兴奋的虚构叙述。
- en: What this book covers
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书涵盖的内容
- en: '[Chapter 1](ch01.html "Chapter 1. Django and Patterns"), *Django and Patterns*,
    helps us understand Django better by telling us why it was created and how it
    has evolved over time. Then, it introduces design patterns, its importance, and
    several popular pattern collections.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[第1章](ch01.html "第1章 Django和模式")，“Django和模式”，通过告诉我们为什么创建Django以及它如何随着时间的推移而发展，帮助我们更好地理解Django。然后，介绍设计模式、其重要性和几种流行的模式集合。'
- en: '[Chapter 2](ch02.html "Chapter 2. Application Design"), *Application Design*,
    guides us through the early stages of an application life cycle, such as gathering
    requirements and creating mockups. We will also see how to break your project
    into modular apps through our running project—SuperBook.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[第2章](ch02.html "第2章 应用程序设计")，“应用程序设计”，指导我们通过应用程序生命周期的早期阶段，例如收集要求和创建模型。我们还将看到如何通过我们的运行项目SuperBook将项目分解为模块化应用程序。'
- en: '[Chapter 3](ch03.html "Chapter 3. Models"), *Models*, gives us insights into
    how models can be graphically represented, structured using several kinds of patterns,
    and later altered using migrations (built into Django 1.7).'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[第3章](ch03.html "第3章 模型")，“模型”，让我们了解模型如何以图形方式表示，使用几种模式进行结构化，并使用迁移（内置于Django
    1.7）进行后续更改。'
- en: '[Chapter 4](ch04.html "Chapter 4. Views and URLs"), *Views and URLs*, shows
    us how function-based views evolved into class-based views with the powerful mixin
    concept, familiarizes us with useful view patterns, and teaches us how short and
    meaningful URLs are designed.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[第4章](ch04.html "第4章 视图和URL")，“视图和URL”，向我们展示了如何将基于函数的视图演变为具有强大混合概念的基于类的视图，使我们熟悉有用的视图模式，并教会我们如何设计简短而有意义的URL。'
- en: '[Chapter 5](ch05.html "Chapter 5. Templates"), *Templates*, walks us through
    the Django template language constructs explaining their design choices, suggests
    how to organize template files, introduces handy template patterns, and points
    to several ways in which Bootstrap can be integrated and customized.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[第5章](ch05.html "第5章 模板")，“模板”，通过Django模板语言构造，解释其设计选择，建议如何组织模板文件，介绍方便的模板模式，并指出几种集成和自定义Bootstrap的方法。'
- en: '[Chapter 6](ch06.html "Chapter 6. Admin Interface"), *Admin Interface*, shows
    us how to use Django''s brilliant out-of-the box admin interface more effectively,
    and several ways to customize it, from enhancing the models to improving its default
    look and feel.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[第6章](ch06.html "第6章 管理界面")，“管理界面”，向我们展示了如何更有效地使用Django出色的开箱即用的管理界面，以及多种自定义方式，从增强模型到改进其默认外观和感觉。'
- en: '[Chapter 7](ch07.html "Chapter 7. Forms"), *Forms*, illustrates the often confusing
    forms workflow, different ways of rendering forms, how to improve a form''s appearance
    using crispy forms and various applied form patterns.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[第7章](ch07.html "第7章 表单")，“表单”，说明了常常令人困惑的表单工作流程，以及渲染表单的不同方式，如何使用crispy forms改善表单的外观以及各种应用表单模式。'
- en: '[Chapter 8](ch08.html "Chapter 8. Dealing with Legacy Code"), *Dealing with
    Legacy Code*, tackles the common issues with legacy Django projects, such as identifying
    the right version, locating the files, where to start reading a large codebase,
    and how to enhance legacy code by adding new functionality.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[第8章](ch08.html "第8章 处理遗留代码")，“处理遗留代码”，解决了遗留Django项目的常见问题，例如确定正确的版本、定位文件、从何处开始阅读大型代码库，以及如何通过添加新功能来增强遗留代码。'
- en: '[Chapter 9](ch09.html "Chapter 9. Testing and Debugging"), *Testing and Debugging*,
    gives us an overview of various testing and debugging tools and techniques, introduces
    test-driven development, mocking, logging, and debuggers.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '[第9章](ch09.html "第9章 测试和调试")，“测试和调试”，概述了各种测试和调试工具和技术，介绍了测试驱动开发、模拟、日志记录和调试器。'
- en: '[Chapter 10](ch10.html "Chapter 10. Security"), *Security*, familiarizes you
    with various web security threats and their countermeasures, and especially with
    how Django can protect you. Finally, a handy security checklist reminds you of
    commonly overlooked areas.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '[第10章](ch10.html "第10章 安全性")，*安全性*，使您熟悉各种Web安全威胁及其对策，特别是Django如何保护您。最后，一个方便的安全性检查表提醒您常常被忽视的领域。'
- en: '[Chapter 11](ch11.html "Chapter 11. Production-ready"), *Production-ready*,
    introduces a crash course in deploying a public-facing application beginning with
    choosing your web stack, understanding hosting options, and walking through a
    typical deployment process. We go into the details of monitoring and performance
    at this stage.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '[第11章](ch11.html "第11章 准备投产")，*准备投产*，介绍了部署面向公众的应用程序的速成课程，从选择Web堆栈开始，了解托管选项，并走过典型的部署过程。我们在这个阶段深入了解监控和性能的细节。'
- en: '[Appendix](apa.html "Appendix A. Python 2 versus Python 3"), *Python 2 versus
    Python 3*, introduces Python 3 to Python 2 developers. Starting off by showing
    the most relevant differences, while working in Django, we then move on to the
    new modules and tools offered in Python 3.'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '[附录](apa.html "附录 A. Python 2与Python 3")，*Python 2与Python 3*，向Python 2开发人员介绍了Python
    3。首先展示了最相关的差异，然后在Django中工作时，我们转向Python 3中提供的新模块和工具。'
- en: What you need for this book
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书需要什么
- en: 'You will just need a computer (PC or Mac) and Internet connectivity to start
    with. Then, ensure that the following are installed:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 您只需要一台计算机（PC或Mac）和互联网连接即可开始。然后，请确保已安装以下内容：
- en: Python 3.4 (or Python 2.7, after reading [Appendix](apa.html "Appendix A. Python
    2 versus Python 3"), *Python 2 Versus Python 3*) or later
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python 3.4（或Python 2.7，在阅读[附录](apa.html "附录 A. Python 2与Python 3")之后，*Python
    2与Python 3*）或更高版本
- en: Django 1.7 or later
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Django 1.7或更高版本
- en: Text editor (or a Python IDE)
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文本编辑器（或Python IDE）
- en: Web browser (the latest version, please)
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Web浏览器（请使用最新版本）
- en: 'I recommend working on a Linux-based system such as Ubuntu or Arch Linux. If
    you are on Windows, you can work on a Linux virtual machine using Vagrant or VirtualBox.
    Here is a full disclosure: I prefer command-line interfaces, Emacs, and eggs sunny-side
    up.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 我建议使用基于Linux的系统，如Ubuntu或Arch Linux。如果您使用Windows，可以使用Vagrant或VirtualBox在Linux虚拟机上工作。这里有一个充分的披露：我更喜欢命令行界面、Emacs和荷包蛋。
- en: 'Certain chapters might also require installing certain Python libraries or
    Django packages. They will be mentioned as, say—the `factory_boy` package. In
    most cases, they can be installed using `pip` as follows:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 某些章节可能需要安装特定的Python库或Django包。它们将被提及，比如说`factory_boy`包。在大多数情况下，它们可以使用`pip`进行安装，如下所示：
- en: '[PRE0]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Hence, it is highly recommended that you first create a separate virtual environment,
    as mentioned in [Chapter 2](ch02.html "Chapter 2. Application Design"), *Application
    Design*.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，强烈建议您首先创建一个单独的虚拟环境，如[第2章](ch02.html "第2章 应用程序设计")中所述，*应用程序设计*。
- en: Who this book is for
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 这本书是为谁准备的
- en: This book is aimed at developers who want insights into building highly maintainable
    websites using Django. It will help you gain a deeper understanding of the framework,
    but it will also familiarize you with several web development concepts.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 本书旨在帮助开发人员洞察使用Django构建高度可维护的网站。它将帮助您更深入地了解框架，但也会使您熟悉几个Web开发概念。
- en: It will be useful for beginners and experienced Django developers alike. It
    assumes that you are familiar with Python and have completed a basic tutorial
    on Django (try the official polls tutorial or a video tutorial from [http://arunrocks.com](http://arunrocks.com)).
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 它对于初学者和有经验的Django开发人员都很有用。它假设您熟悉Python，并已完成了Django的基本教程（尝试官方的投票教程或来自[http://arunrocks.com](http://arunrocks.com)的视频教程）。
- en: You do not have to be an expert in Django or Python. No prior knowledge of patterns
    is expected for reading this book. More specifically, this book is not about the
    classic Gang of Four patterns, though they might get mentioned.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 您不必是Django或Python的专家。阅读本书不需要对模式有先验知识。更具体地说，本书不是关于经典的四人帮模式，尽管它们可能会被提及。
- en: A lot of practical information here might not be unique to just Django, but
    to web development in general. By the end of this book, you should be a more efficient
    and pragmatic web developer.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的许多实用信息可能不仅仅适用于Django，而是适用于Web开发。在本书结束时，您应该是一个更高效和务实的Web开发人员。
- en: Conventions
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 惯例
- en: In this book, you will find a number of styles of text that distinguish between
    different kinds of information. Here are some examples of these styles, and an
    explanation of their meaning.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，您会发现许多文本样式，用于区分不同类型的信息。以下是一些这些样式的示例，以及它们的含义解释。
- en: 'Code words in text, folder names, filenames, package names and user input are
    shown as follows: "The `HttpResponse` object gets rendered into a string."'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 文本中的代码词、文件夹名称、文件名、包名称和用户输入显示如下：“`HttpResponse`对象被呈现为字符串。”
- en: 'A block of code is set as follows:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块设置如下：
- en: '[PRE1]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Any command-line (typically Unix) input or output is written as follows:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 任何命令行（通常是Unix）的输入或输出都写成如下形式：
- en: '[PRE2]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Lines beginning with the dollar prompt ($ sign) are to be input at the shell
    (but skip the prompt itself). Remaining lines are the system output, which might
    get trimmed using ellipsis (…) if it gets really long.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 以美元提示符（$符号）开头的行是要在shell中输入的（但跳过提示本身）。其余行是系统输出，如果输出非常长，可能会使用省略号（…）进行修剪。
- en: 'Each chapter (except the first) will have a story box styled as follows:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 每个章节（除了第一章）都将有一个故事框，样式如下：
- en: Note
  id: totrans-43
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '**SuperBook Chapter Title**'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '**超级书籍章节标题**'
- en: It was a dark and stormy night; silhouettes of the caped crusaders moved within
    the charred ruins of the vast Ricksonian Digital Library for Medieval Dark Arts.
    Picking up what looked like the half-melted case of a hard disk; Captain Obvious
    gritted his teeth and shouted, "We need backup!"
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 那是一个漆黑而风雨交加的夜晚；披着斗篷的超级英雄的剪影在烧焦的里克森数字图书馆的废墟中移动。捡起一块看起来像是半融化的硬盘盒；显而易见队长咬紧牙关喊道：“我们需要备份！”
- en: Story boxes are best read sequentially to follow the linear narrative.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 故事框最好按顺序阅读，以遵循线性叙事。
- en: Patterns described in this book are written in the format mentioned in the section
    named *Patterns in this Book* in [Chapter 1](ch01.html "Chapter 1. Django and
    Patterns"), *Django and Patterns*.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中描述的模式以《本书中的模式》一节中提到的格式编写，位于[第1章](ch01.html "第1章 Django 和模式") *Django 和模式*
    中。
- en: 'Tips and best practices are styled in the following manner:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 提示和最佳实践的风格如下：
- en: Tip
  id: totrans-49
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**Best Practice**'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 最佳实践
- en: Change your super suit every 5 years.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 每5年更换你的超级服装。
- en: '**New terms** and **important words** are shown in bold.'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '**新术语**和**重要单词**以粗体显示。'
