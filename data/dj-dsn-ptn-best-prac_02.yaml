- en: Chapter 2. Application Design
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第2章 应用程序设计
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Gathering requirements
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 收集需求
- en: Creating a concept document
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建概念文件
- en: HTML mockups
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: HTML模拟
- en: How to divide a project into Apps
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何将项目分成应用程序
- en: Whether to write a new app or reuse an existing one
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是写一个新应用程序还是重用现有的应用程序
- en: Best practices before starting a project
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 项目开始前的最佳实践
- en: Why Python 3?
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为什么选择Python 3？
- en: Starting the SuperBook project
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开始SuperBook项目
- en: Many novice developers approach a new project by beginning to write code right
    away. More often than not it leads to incorrect assumptions, unused features and
    lost time. Spending some time with your client in understanding core requirements
    even in a project short on time can yield incredible results. Managing requirements
    is a key skill worth learning.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 许多新手开发人员在开始新项目时会立即开始编写代码。往往会导致错误的假设、未使用的功能和浪费时间。即使在时间紧迫的项目中，花一些时间与客户一起了解核心需求，都能产生令人难以置信的结果。管理需求是值得学习的关键技能。
- en: How to gather requirements
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何收集需求
- en: '|   | *Innovation is not about saying yes to everything. It''s about saying
    NO to all but the most crucial features.* |   |'
  id: totrans-12
  prefs: []
  type: TYPE_TB
  zh: '| | *创新不是说YES，而是说NO，除了最关键的功能之外。* | |'
- en: '|   | --*Steve Jobs* |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
  zh: '| | --*史蒂夫·乔布斯* |'
- en: 'I saved several doomed projects by spending a few days with the client to carefully
    listen to their needs and set the right expectations. Armed with nothing but a
    pencil and paper (or their digital equivalents), the process is incredibly simple
    but effective. Here are some of the key points to remember while gathering requirements:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 通过花几天时间与客户仔细倾听他们的需求并设定正确的期望，我挽救了几个注定失败的项目。只带着一支铅笔和纸（或它们的数字化等价物），这个过程非常简单但有效。在收集需求时要记住以下一些关键点：
- en: Talk directly to the application owners even if they are not technical savvy.
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 直接与应用程序所有者交谈，即使他们不懂技术。
- en: Make sure you listen to their needs fully and note them.
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保你充分倾听他们的需求并记录下来。
- en: Don't use technical jargon such as "models". Keep it simple and use end-user
    friendly terms such as a "user profile".
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不要使用“模型”等技术术语。保持简单，使用终端用户友好的术语，如“用户资料”。
- en: Set the right expectations. If something is not technically feasible or difficult,
    make sure you tell them right away.
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设定正确的期望。如果某事在技术上不可行或困难，确保立即告诉他们。
- en: Sketch as much as possible. Humans are visual in nature. Websites more so. Use
    rough lines and stick figures. No need to be perfect.
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 尽可能多地进行素描。人类天生是视觉动物。网站更是如此。使用粗线和简笔画。不需要完美。
- en: Break down process flows such as user signup. Any multistep functionality needs
    to be drawn as boxes connected by arrows.
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 分解流程，如用户注册。任何多步功能都需要用箭头连接的框来绘制。
- en: Finally, work through the features list in the form of user stories or in any
    easy way to understand the form.
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，以用户故事的形式或任何易于理解的形式逐个处理功能列表。
- en: Play an active role in prioritizing the features into high, medium, or low buckets.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在将功能优先级划分为高、中、低桶时要积极参与。
- en: Be very, very conservative in accepting new features.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在接受新功能时要非常保守。
- en: Post-meeting, share your notes with everyone to avoid misinterpretations.
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 会后，与所有人分享你的笔记，以避免误解。
- en: The first meeting will be long (perhaps a day-long workshop or couple of hour-long
    meetings). Later, when these meetings become frequent, you can trim them down
    to 30 minutes or one hour.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 第一次会议会很长（可能是一整天的研讨会或几个小时的会议）。后来，当这些会议变得频繁时，你可以将它们缩短到30分钟或一个小时。
- en: The output of all this would be a one page write-up and a couple of poorly drawn
    sketches.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这一切的产出将是一个一页的写作和几张粗糙的素描。
- en: 'In this book, we have taken upon ourselves the noble project of building a
    social network called SuperBook for superheroes. A simple sketch based off our
    discussions with a bunch of randomly selected superheroes is shown as follows:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 在这本书中，我们自愿承担了一个崇高的项目，为超级英雄建立一个名为SuperBook的社交网络。根据我们与一群随机选择的超级英雄讨论的简单草图如下所示：
- en: '![How to gather requirements](img/6644OS_02_01.jpg)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![如何收集需求](img/6644OS_02_01.jpg)'
- en: A sketch of the SuperBook website in responsive design. Desktop (left) and smartphone
    (right) layouts are shown.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: SuperBook网站的响应式设计草图。显示了桌面（左）和智能手机（右）布局。
- en: Are you a story teller?
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 你是一个讲故事的人吗？
- en: So what is this one page write-up? It is a simple document that explains how
    it feels to use the site. In almost all the projects I have worked with, when
    someone new joins the team, they don't normally go through every bit of paperwork.
    He or she would be thrilled if they find a single-page document that quickly tells
    them what the site is meant to be.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 那么这个一页的写作是什么？这是一个简单的文件，解释了使用该网站的感受。在我参与的几乎所有项目中，当有新成员加入团队时，他们通常不会浏览每一份文件。如果他们找到一个简短的单页文件，快速告诉他们网站的意图，他们会感到高兴。
- en: You can call this document whatever you like—concept document, market requirements
    document, customer experience documentation, or even an Epic Fragile StoryLog™
    (patent pending). It really doesn't matter.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以随意称呼这个文件——概念文件、市场需求文件、客户体验文档，甚至是史诗脆弱故事日志™（专利申请中）。这真的无关紧要。
- en: The document should focus on the user experience rather than technical or implementation
    details. Make it short and interesting to read. In fact, Joel Spolsky's rule number
    one on documenting requirements is "Be Funny".
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 文件应该侧重于用户体验，而不是技术或实施细节。要简短有趣。事实上，Joel Spolsky在记录需求方面的第一条规则是“要幽默”。
- en: If possible, write about a typical user (*persona* in marketing speak), the
    problem they are facing, and how the web application solves it. Imagine how they
    would explain the experience to a friend. Try to capture this.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 如果可能的话，写一篇关于典型用户（在营销术语中称为“角色”）的文章，他们面临的问题以及Web应用程序如何解决它。想象他们如何向朋友解释这种体验。试着捕捉这一点。
- en: 'Here is a concept document for the SuperBook project:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 这是SuperBook项目的概念文件：
- en: Note
  id: totrans-36
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注
- en: '**The SuperBook concept**'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '**SuperBook概念**'
- en: The following interview was conducted after our website SuperBook was launched
    in the future. A 30 minute user test was conducted just prior to the interview.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 以下采访是在我们的网站SuperBook在未来推出后进行的。在采访之前进行了30分钟的用户测试。
- en: '**Please introduce yourself.**'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '**请介绍一下自己。**'
- en: My name is Aksel. I am a gray squirrel living in downtown New York. However,
    everyone calls me Acorn. My dad, T. Berry, a famous hip-hop star, used to call
    me that. I guess I was never good enough at singing to take up the family business.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 我的名字是阿克塞尔。我是一只灰松鼠，住在纽约市中心。不过，每个人都叫我橡子。我爸爸，著名的嘻哈明星T.贝瑞，过去常常叫我那个。我想我从来没有唱歌好到可以接手家族生意。
- en: Actually, in my early days, I was a bit of a kleptomaniac. I am allergic to
    nuts, you know. Other bros have it easy. They can just live off any park. I had
    to improvise—cafes, movie halls, amusement parks, and so on. I read labels very
    carefully too.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 事实上，在我早期，我有点偷窃癖。你知道，我对坚果过敏。其他兄弟们很容易就能在公园里生活。我不得不 improvisation——咖啡馆、电影院、游乐园等等。我也非常仔细地阅读标签。
- en: '**Ok, Acorn. Why do you think you were chosen for the user testing?**'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '**好的，橡子。你为什么认为你被选中进行用户测试？**'
- en: 'Probably, because I was featured in a NY Star special on lesser-known superheroes.
    I guess people find it amusing that a squirrel can use a MacBook (*Interviewer:
    this interview was conducted over chat*). Plus, I have the attention span of a
    squirrel.'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '可能是因为我曾在纽约星报上被介绍为一个不太知名的超级英雄。我猜人们觉得一个松鼠能用MacBook很有趣（采访者：这次采访是通过聊天进行的）。另外，我有一个松鼠一样的注意力。 '
- en: '**Based on what you saw, what is your opinion about SuperBook?**'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '**根据你看到的，你对SuperBook有什么看法？**'
- en: I think it is a fantastic idea. I mean, people see superheroes all the time.
    However, nobody cares about them. Most are lonely and antisocial. SuperBook could
    change that.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 我认为这是一个很棒的主意。我的意思是，人们经常看到超级英雄。然而，没有人关心他们。大多数都是孤独和反社会的。SuperBook可以改变这一点。
- en: '**What do you think is different about Superbook?**'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '**你认为Superbook有什么不同？**'
- en: It is built from the ground up for people like us. I mean, there is no "Work
    and Education" nonsense when you want to use your secret identity. Though I don't
    have one, I can understand why one would.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 它是为像我们这样的人从零开始构建的。我的意思是，当你想要使用你的秘密身份时，没有“工作和教育”的废话。虽然我没有，但我能理解为什么有人会有一个。
- en: '**Could you tell us briefly some of the features you noticed?**'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '**你能简要告诉我们你注意到的一些特点吗？**'
- en: 'Sure, I think this is a pretty decent social network, where you can:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，我认为这是一个相当不错的社交网络，你可以：
- en: Sign up with any user name (no more, "enter your real name", silliness)
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用任何用户名注册（不再需要“输入你的真实姓名”了，愚蠢的要求）
- en: Fans can follow people without having to add them as "friends"
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 粉丝可以关注别人，而不必把他们添加为“朋友”
- en: Make posts, comment on them, and re-share them
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发布帖子，对其进行评论，并重新分享
- en: Send a private post to another user
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 给另一个用户发送私人帖子
- en: Everything is easy. It doesn't take a superhuman effort to figure it out.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 一切都很容易。弄清楚它并不需要超人的努力。
- en: '**Thanks for your time, Acorn.**'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '**谢谢你的时间，橡子。**'
- en: HTML mockups
  id: totrans-56
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: HTML模型
- en: In the early days of building web applications, tools such as Photoshop and
    Flash were used extensively to get pixel-perfect mockups. They are hardly recommended
    or used anymore.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在构建Web应用程序的早期，工具如Photoshop和Flash被广泛使用来获得像素完美的模型。它们几乎不再被推荐或使用。
- en: Giving a native and consistent experience across smartphones, tablets, laptops,
    and other platforms is now considered more important than getting that pixel-perfect
    look. In fact, most web designers directly create layouts on HTML.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在智能手机、平板电脑、笔记本电脑和其他平台上提供本地和一致的体验现在被认为比获得像素完美的外观更重要。事实上，大多数网页设计师直接在HTML上创建布局。
- en: Creating an HTML mockup is a lot faster and easier than before. If your web
    designer is unavailable, developers can use a CSS framework such as Bootstrap
    or ZURB Foundation framework to create pretty decent mockups.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 创建HTML模型比以前快得多，也更容易。如果你的网页设计师不可用，开发人员可以使用CSS框架，如Bootstrap或ZURB Foundation框架来创建相当不错的模型。
- en: The goal of creating a mockup is to create a realistic preview of the website.
    It should not merely focus on details and polish to look closer to the final product
    compared to a sketch, but add interactivity as well. Make your static HTML come
    to life with working links and some simple JavaScript-driven interactivity.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 创建模型的目标是创建网站的真实预览。它不应该只关注细节和修饰，使其看起来比草图更接近最终产品，而且还应该增加交互性。用一些简单的JavaScript驱动的交互性，让你的静态HTML变得生动起来。
- en: A good mockup can give 80 percent of customer experience with less than 20 percent
    of the overall development effort.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 一个好的模型可以用不到总体开发工作量的20%来提供80%的客户体验。
- en: Designing the application
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设计应用程序
- en: When you have a fairly good idea of what you need to build, you can start to
    think about the implementation in Django. Once again, it is tempting to start
    coding away. However, when you spend a few minutes thinking about the design,
    you can find plenty of different ways to solve a design problem.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 当你对需要构建的东西有一个相当好的想法时，你可以开始考虑在Django中的实现。再一次，开始编码是很诱人的。然而，当你花几分钟思考设计时，你会发现解决设计问题的许多不同方法。
- en: You can also start designing tests first, as advocated in **Test-driven Design**
    (**TDD**) methodology. We will see more of the TDD approach in the testing chapter.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以首先开始设计测试，这是**测试驱动设计**（TDD）方法论所倡导的。我们将在测试章节中看到更多TDD方法的应用。
- en: Whichever approach you take, it is best to stop and think—"Which are the different
    ways in which I can implement this? What are the trade-offs? Which factors are
    more important in our context? Finally, which approach is the best?"
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你采取哪种方法，最好停下来思考一下——“我可以用哪些不同的方式来实现这个？有什么权衡？在我们的情境中哪些因素更重要？最后，哪种方法是最好的？”
- en: Experienced Django developers look at the overall project in different ways.
    Sticking to the DRY principle (or sometimes because they get lazy), they think—"Have
    I seen this functionality before? For instance, can this social login feature
    be implemented using a third-party package such as `django-all-auth`?"
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 有经验的Django开发人员以不同的方式看待整个项目。遵循DRY原则（有时是因为他们变懒了），他们会想——“我以前见过这个功能吗？例如，可以使用`django-all-auth`这样的第三方包来实现社交登录功能吗？”
- en: If they have to write the app themselves, they start thinking of various design
    patterns in the hope of an elegant design. However, they first need to break down
    a project at the top level into apps.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 如果他们必须自己编写应用程序，他们会开始考虑各种设计模式，希望能够设计出优雅的设计。然而，他们首先需要将项目在顶层分解为应用程序。
- en: Dividing a project into Apps
  id: totrans-68
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 将项目分成应用
- en: Django applications are called *projects*. A project is made up of several applications
    or *apps*. An app is a Python package that provides a set of features.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: Django应用程序称为*项目*。一个项目由多个应用程序或*应用*组成。应用是提供一组功能的Python包。
- en: Ideally, each app must be reusable. You can create as many apps as you need.
    Never be afraid to add more apps or refactor the existing ones into multiple apps.
    A typical Django project contains 15-20 apps.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 理想情况下，每个应用都必须是可重用的。您可以创建尽可能多的应用。永远不要害怕添加更多的应用或将现有的应用重构为多个应用。一个典型的Django项目包含15-20个应用。
- en: An important decision to make at this stage is whether to use a third-party
    Django app or build one from scratch. Third-party apps are ready-to-use apps,
    which are not built by you. Most packages are quick to install and set up. You
    can start using them in a few minutes.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个阶段做出的一个重要决定是是否使用第三方Django应用程序还是从头开始构建一个。第三方应用程序是现成的应用程序，不是由您构建的。大多数包都可以快速安装和设置。您可以在几分钟内开始使用它们。
- en: On the other hand, writing your own app often means designing and implementing
    the models, views, test cases, and so on yourself. Django will make no distinction
    between apps of either kind.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，编写自己的应用通常意味着自己设计和实现模型、视图、测试用例等。Django不会区分这两种类型的应用。
- en: Reuse or roll-your-own?
  id: totrans-73
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 重用还是自己编写？
- en: One of Django's biggest strengths is the huge ecosystem of third-party apps.
    At the time of writing, [djangopackages.com](http://djangopackages.com) lists
    more than 2,600 packages. You might find that your company or personal library
    has even more. Once your project is broken into apps and you know which kind of
    apps you need, you will need to take a call for each app—whether to write or reuse
    an existing one.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: Django最大的优势之一是庞大的第三方应用生态系统。在撰写本文时，[djangopackages.com](http://djangopackages.com)列出了2600多个包。您可能会发现您的公司或个人库甚至更多。一旦您的项目被分成应用程序，并且您知道需要哪种类型的应用程序，您将需要为每个应用程序做出决定——是编写还是重用现有的应用程序。
- en: 'It might sound easier to install and use a readily available app. However,
    it not as simple as it sounds. Let''s take a look at some third-party authentication
    apps for our project, and list the reasons why we didn''t use them for SuperBook
    at the time of writing:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 安装和使用现成的应用可能听起来更容易。然而，事实并不像听起来那么简单。让我们来看看我们项目中一些第三方身份验证应用，并列出我们在撰写本文时为SuperBook未使用它们的原因：
- en: '**Over-engineered for our needs**: We felt that `python-social-auth` with support
    for any social login was unnecessary'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**为我们的需求过度设计**: 我们觉得支持任何社交登录的`python-social-auth`是不必要的'
- en: '**Too specific**: Using `django-facebook` would mean tying our authentication
    to that provided by a specific website'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**太具体**: 使用`django-facebook`将意味着将我们的身份验证与特定网站提供的身份验证绑定在一起'
- en: '**Python dependencies**: One of the requirements of `django-allauth` is `python-openid`,
    which is not actively maintained or unapproved'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Python依赖**: `django-allauth`的要求之一是`python-openid`，这个包目前没有得到积极维护或批准。'
- en: '**Non-Python dependencies**: Some packages might have non-Python dependencies,
    such as Redis or Node.js, which have deployment overheads'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**非Python依赖**: 一些包可能具有非Python依赖项，例如Redis或Node.js，这会增加部署的开销'
- en: '**Not reusable**: Many of our own apps were not used because they were not
    very easy to reuse or were not written to be reusable'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**不可重用**: 我们自己的许多应用程序之所以没有被使用，是因为它们不太容易重用，或者没有被编写成可重用的'
- en: None of these packages are bad. They just don't meet our needs for now. They
    might be useful for a different project. In our case, the built-in Django `auth`
    app was good enough.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 这些包都不是坏的。它们只是暂时不符合我们的需求。它们可能对不同的项目有用。在我们的情况下，内置的Django `auth`应用程序已经足够好了。
- en: 'On the other hand, you might prefer to use a third-party app for some of the
    following reasons:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，您可能会因以下一些原因而更喜欢使用第三方应用程序：
- en: '**Too hard to get right**: Do your model''s instances need to form a tree?
    Use `django-mptt` for a database-efficient implementation'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**太难做到正确**: 您的模型实例需要形成一个树吗？使用`django-mptt`进行数据库高效实现'
- en: '**Best or recommended app for the job**: This changes over time but packages
    such as `django-redis` are the most recommended for their use case'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**最佳或推荐的应用程序**: 这会随时间而改变，但像`django-redis`这样的包是最推荐的用例'
- en: '**Missing batteries**: Many feel that packages such as `django-model-utils`
    and `django-extensions` should have been part of the framework'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**缺少功能**: 许多人认为`django-model-utils`和`django-extensions`等包应该是框架的一部分'
- en: '**Minimal dependencies**: This is always good in my book'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**最小依赖**: 这在我的书中总是很好的。'
- en: So, should you reuse apps and save time or write a new custom app? I would recommend
    that you try a third-party app in a sandbox. If you are an intermediate Django
    developer, then the next section will tell you how to try packages in a sandbox.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '那么，您是应该重用应用程序并节省时间，还是编写一个新的自定义应用程序？我建议您在沙盒中尝试第三方应用程序。如果您是一名中级Django开发人员，那么下一节将告诉您如何在沙盒中尝试包。 '
- en: My app sandbox
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 我的应用沙盒
- en: From time to time, you will come across several blog posts listing the "must-have
    Django packages". However, the best way to decide whether a package is appropriate
    for your project is Prototyping.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 不时地，您会看到一些博客文章列出了“必备的Django包”。然而，决定一个包是否适合您的项目的最佳方法是原型设计。
- en: Even if you have created a Python virtual environment for development, trying
    all these packages and later discarding them can litter your environment. So,
    I usually end up creating a separate virtual environment named "sandbox" purely
    for trying such apps. Then, I build a small project to understand how easy it
    is to use.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 即使您已经为开发创建了Python虚拟环境，尝试所有这些软件包然后将它们丢弃可能会污染您的环境。因此，我通常会创建一个名为“sandbox”的单独虚拟环境，纯粹用于尝试这些应用程序。然后，我构建一个小项目来了解使用起来有多容易。
- en: Later, if I am happy with my test drive of the app, I create a branch in my
    project using a version control tool such as Git to integrate the app. Then, I
    continue with coding and running tests in the branch until the necessary features
    are added. Finally, this branch will be reviewed and merged back to the mainline
    (sometimes called `master`) branch.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 稍后，如果我对应用程序的试用感到满意，我会使用Git等版本控制工具在我的项目中创建一个分支来集成该应用程序。然后，我会在分支中继续编码和运行测试，直到必要的功能被添加。最后，这个分支将被审查并合并回主线（有时称为`master`）分支。
- en: Which packages made it?
  id: totrans-92
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 哪些软件包成功了？
- en: 'To illustrate the process, our SuperBook project can be roughly broken down
    into the following apps (not the complete list):'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 为了说明这个过程，我们的SuperBook项目可以大致分为以下应用程序（不是完整的列表）：
- en: '**Authentication** (built-in `django.auth`): This app handles user signups,
    login, and logout'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**身份验证**（内置`django.auth`）：这个应用程序处理用户注册、登录和注销'
- en: '**Accounts** (custom): This app provides additional user profile information'
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**账户**（自定义）：这个应用程序提供额外的用户个人资料信息'
- en: '**Posts** (custom): This app provides posts and comments functionality'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**帖子**（自定义）：这个应用程序提供帖子和评论功能'
- en: '**Pows** (custom): This app tracks how many "pows" (upvotes or likes) any item
    gets'
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Pows**（自定义）：这个应用程序跟踪任何项目获得多少“pows”（点赞或喜欢）'
- en: '**Bootstrap forms** (crispy-forms): This app handles the form layout and styling'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Bootstrap forms**（crispy-forms）：这个应用程序处理表单布局和样式'
- en: Here, an app has been marked to be built from scratch (tagged "custom") or the
    third-party Django app that we would be using. As the project progresses, these
    choices might change. However, this is good enough for a start.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，一个应用程序被标记为从头开始构建（标记为“自定义”）或我们将使用的第三方Django应用程序。随着项目的进展，这些选择可能会改变。但是，这已经足够好了。
- en: Before starting the project
  id: totrans-100
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在开始项目之前
- en: 'While preparing a development environment, make sure that you have the following
    in place:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 在准备开发环境时，请确保以下内容已经就位：
- en: '**A fresh Python virtual environment**: Python 3 includes the `venv` module
    or you can install `virtualenv`. Both of them prevent polluting your global Python
    library.'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**一个新的Python虚拟环境**：Python 3包括`venv`模块，或者您可以安装`virtualenv`。它们都可以防止污染全局Python库。'
- en: '**Version control**: Always use a version control tool such as Git or Mercurial.
    They are life savers. You can also make changes much more confidently and fearlessly.'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**版本控制**：始终使用Git或Mercurial等版本控制工具。它们是救命稻草。您还可以更加自信和无畏地进行更改。'
- en: '**Choose a project template**: Django''s default project template is not the
    only option. Based on your needs try others such as `twoscoops` ([https://github.com/twoscoops/django-twoscoops-project](https://github.com/twoscoops/django-twoscoops-project))
    or `edge` ([https://github.com/arocks/edge](https://github.com/arocks/edge)).'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**选择一个项目模板**：Django的默认项目模板不是唯一的选择。根据您的需求，尝试其他模板，如`twoscoops`（[https://github.com/twoscoops/django-twoscoops-project](https://github.com/twoscoops/django-twoscoops-project)）或`edge`（[https://github.com/arocks/edge](https://github.com/arocks/edge)）。'
- en: '**Deployment pipeline**: I usually worry about this a bit later, but having
    an easy deployment process helps to show early progress. I prefer Fabric or Ansible.'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**部署流水线**：我通常会稍后再担心这个问题，但是拥有一个简单的部署流程有助于早期展示进展。我更喜欢Fabric或Ansible。'
- en: SuperBook – your mission, should you choose to accept it
  id: totrans-106
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: SuperBook-您的任务，如果您选择接受
- en: This book believes in a practical and pragmatic approach of demonstrating Django
    design patterns and the best practices through examples. For consistency, all
    our examples will be about building a social network project called SuperBook.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 本书认为通过示例演示Django设计模式和最佳实践的实际和务实的方法。为了保持一致，我们所有的例子都将围绕构建一个名为SuperBook的社交网络项目。
- en: SuperBook focusses exclusively on the niche and often neglected market segment
    of people with exceptional super powers. You are one of the developers in a team
    comprised of other developers, web designers, a marketing manager, and a project
    manager.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: SuperBook专注于被忽视的超能力人群的利基市场。您是一个开发团队中的开发人员，团队中还有其他开发人员、网页设计师、市场经理和项目经理。
- en: The project will be built in the latest version of Python (Version 3.4) and
    Django (Version 1.7) at the time of writing. Since the choice of Python 3 can
    be a contentious topic, it deserves a fuller explanation.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 该项目将在撰写时的最新版本的Python（版本3.4）和Django（版本1.7）中构建。由于选择Python 3可能是一个有争议的话题，它值得更详细的解释。
- en: Why Python 3?
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 为什么选择Python 3？
- en: While the development of Python 3 started in 2006, its first release, Python
    3.0, was released on December 3, 2008\. The main reasons for a backward incompatible
    version were—switching to Unicode for all strings, increased use of iterators,
    cleanup of deprecated features such as old-style classes, and some new syntactic
    additions such as the `nonlocal` statement.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管Python 3的开发始于2006年，但它的第一个版本Python 3.0是在2008年12月3日发布的。不向后兼容版本的主要原因是——将所有字符串切换为Unicode，增加迭代器的使用，清理弃用的特性，如旧式类，以及一些新的语法添加，如`nonlocal`语句。
- en: The reaction to Python 3 in the Django community was rather mixed. Even though
    the language changes between Version 2 and 3 were small (and over time, reduced),
    porting the entire Django codebase was a significant migration effort.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: Django社区对Python 3的反应相当复杂。尽管2和3版本之间的语言变化很小（并且随着时间的推移减少），但迁移整个Django代码库是一项重大的工作。
- en: On February 13, Django 1.5 became the first version to support Python 3\. Developers
    have clarified that, in future, Django will be written for Python 3 with an aim
    to be backward compatible to Python 2.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 2月13日，Django 1.5成为第一个支持Python 3的版本。开发人员已经明确表示，未来Django将使用Python 3编写，并旨在向后兼容Python
    2。
- en: 'For this book, Python 3 was ideal for the following reasons:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 对于本书来说，Python 3是理想的，原因如下：
- en: '**Better syntax**: This fixes a lot of ugly syntaxes, such as `izip`, `xrange`,
    and `__unicode__,` with the cleaner and more straightforward `zip`, `range`, and
    `__str__`.'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更好的语法**：这修复了很多丑陋的语法，比如`izip`，`xrange`和`__unicode__`，用更清晰、更直接的`zip`，`range`和`__str__`。'
- en: '**Sufficient third-party support**: Of the top 200 third-party libraries, more
    than 80 percent have Python 3 support.'
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**充分的第三方支持**：在前200个第三方库中，超过80％支持Python 3。'
- en: '**No legacy code**: We are creating a new project, rather than dealing with
    legacy code that needs to support an older version.'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**没有遗留代码**：我们正在创建一个新项目，而不是处理需要支持旧版本的遗留代码。'
- en: '**Default in modern platforms**: This is already the default Python interpreter
    in Arch Linux. Ubuntu and Fedora plan to complete the switch in a future release.'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**现代平台的默认设置**：这已经是Arch Linux中的默认Python解释器。Ubuntu和Fedora计划在将来的版本中完成切换。'
- en: '**It is easy**: From a Django development point of view, there are very few
    changes, and they can all be learnt in a few minutes.'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**它很容易**：从Django开发的角度来看，几乎没有什么变化，而且可以在几分钟内学会所有变化。'
- en: The last point is important. Even if you are using Python 2, this book will
    serve you fine. Read Appendix A to understand the changes. You will need to make
    only minimal adjustments to backport the example code.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一点很重要。即使你使用Python 2，这本书也会对你有所帮助。阅读附录A以了解这些变化。你只需要做最小的调整来回溯示例代码。
- en: Starting the project
  id: totrans-121
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 启动项目
- en: This section has the installation instructions for the SuperBook project, which
    contains all the example code used in this book. Do check the project's README
    file for the latest installation notes. It is recommended that you create a fresh
    directory, `superbook`, first that will contain the virtual environment and the
    project source code.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 本节包含了SuperBook项目的安装说明，其中包含了本书中使用的所有示例代码。请查看项目的README文件以获取最新的安装说明。建议您首先创建一个名为`superbook`的新目录，其中包含虚拟环境和项目源代码。
- en: 'Ideally, every Django project should be in its own separate virtual environment.
    This makes it easy to install, update, and delete packages without affecting other
    applications. In Python 3.4, using the built-in `venv` module is recommended since
    it also installs `pip` by default:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 理想情况下，每个Django项目都应该在自己单独的虚拟环境中。这样可以轻松安装、更新和删除软件包，而不会影响其他应用程序。在Python 3.4中，建议使用内置的`venv`模块，因为它默认还会安装`pip`：
- en: '[PRE0]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'These commands should work in most Unix-based operating systems. For installation
    instructions on other operating systems or detailed steps please refer to the
    README file at the Github repository: [https://github.com/DjangoPatternsBook/superbook](https://github.com/DjangoPatternsBook/superbook).
    In the first line, we are invoking the Python 3.4 executable as `python3`; do
    confirm if this is correct for your operating system and distribution.'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 这些命令应该在大多数基于Unix的操作系统中都能工作。有关其他操作系统的安装说明或详细步骤，请参阅Github存储库中的README文件：[https://github.com/DjangoPatternsBook/superbook](https://github.com/DjangoPatternsBook/superbook)。在第一行中，我们将Python
    3.4可执行文件称为`python3`；请确认这对于您的操作系统和发行版是否正确。
- en: The last export command might not be required in some cases. If running `pip
    freeze` lists your system packages rather than being empty, then you will need
    to enter this line.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些情况下，最后一个导出命令可能不是必需的。如果运行`pip freeze`列出的是系统包而不是空的，那么你需要输入这行。
- en: Tip
  id: totrans-127
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Before starting your Django project, create a fresh virtual environment.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始Django项目之前，请创建一个新的虚拟环境。
- en: 'Next, clone the example project from GitHub and install the dependencies:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，从GitHub克隆示例项目并安装依赖项：
- en: '[PRE1]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'If you would like to take a look at the finished SuperBook website, just run
    `migrate` and start the test server:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想看一下完成的SuperBook网站，只需运行`migrate`并启动测试服务器：
- en: '[PRE2]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: In Django 1.7, the `migrate` command has superseded the `syncdb` command. We
    also need to explicitly invoke the `createsuperuser` command to create a super
    user so that we can access the admin.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 在Django 1.7中，`migrate`命令已经取代了`syncdb`命令。我们还需要显式调用`createsuperuser`命令来创建一个超级用户，以便我们可以访问管理员。
- en: You can navigate to `http://127.0.0.1:8000` or the URL indicated in your terminal
    and feel free to play around with the site.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以访问`http://127.0.0.1:8000`或终端中指示的URL，并随意在网站上玩耍。
- en: Summary
  id: totrans-135
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: Beginners often underestimate the importance of a good requirements-gathering
    process. At the same time, it is important not to get bogged down with the details,
    because programming is inherently an exploratory process. The most successful
    projects spend the right amount of time preparing and planning before development
    so that it yields the maximum benefits.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 初学者经常低估了良好的需求收集过程的重要性。与此同时，重要的是不要被细节所困扰，因为编程本质上是一个探索过程。最成功的项目在开发之前花费适当的时间进行准备和规划，以获得最大的收益。
- en: We discussed many aspects of designing an application, such as creating interactive
    mockups or dividing it into reusable components called apps. We also discussed
    the steps to set up SuperBook, our example project.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 我们讨论了设计应用程序的许多方面，比如创建交互式模型或将其分成可重用的组件，称为应用程序。我们还讨论了设置我们的示例项目SuperBook的步骤。
- en: In the next chapter, we will take a look at each component of Django in detail
    and learn the design patterns and best practices around them.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将详细了解Django的每个组件，并学习围绕它们的设计模式和最佳实践。
