- en: Assessments
  id: totrans-0
  prefs: []
  type: TYPE_NORMAL
  zh: 评估
- en: Chapter 1
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第一章
- en: To keep your project-specific Python packages and dependencies isolated from
    other projects and the system-level Python packages.
  id: totrans-2
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将项目特定的Python软件包和依赖项与其他项目和系统级Python软件包隔离开来。
- en: No. You can always regenerate a virtual environment and reinstall packages.
  id: totrans-3
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不。您可以随时重新生成虚拟环境并重新安装软件包。
- en: To keep a list of all the Python packages (and versions) that your Python projects
    rely on. Having a maintained `requirements.txt` file allows you to reinstall all
    packages easily with the command `pip install -r requirements.txt`.
  id: totrans-4
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保持Python项目依赖的所有Python软件包（和版本）的列表。拥有一个维护良好的`requirements.txt`文件可以让您通过`pip install
    -r requirements.txt`命令轻松重新安装所有软件包。
- en: Make sure you are using the absolute path to the Python interpreter that is
    in the `bin` folder of your virtual environment.
  id: totrans-5
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保您使用的是虚拟环境的`bin`文件夹中的Python解释器的绝对路径。
- en: It activates a virtual environment so that all users of Python and pip are sandboxed
    to the virtual environment.
  id: totrans-6
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它激活了一个虚拟环境，以便Python和pip的所有用户都被隔离到虚拟环境中。
- en: '`deactivate`. If you type `exit` (and we all do it sometimes!), it exits the
    Terminal window or closes your remote SSH session! Grrrrr.'
  id: totrans-7
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`deactivate`。如果您输入`exit`（我们有时都会这样做！），它会退出终端窗口或关闭远程SSH会话！Grrrrr。'
- en: Yes, just change into the `projects` folder and activate the virtual environment.
  id: totrans-8
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 是的，只需切换到`projects`文件夹并激活虚拟环境。
- en: Python IDLE, but remember you need to use `python -m idlelib.idle [filename]
    &` in a virtual environment.
  id: totrans-9
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Python IDLE，但请记住，您需要在虚拟环境中使用`python -m idlelib.idle [filename] &`。
- en: Check that the I2C interface has been enabled in Raspbian.
  id: totrans-10
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查在Raspbian中是否已启用了I2C接口。
- en: Chapter 2
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第二章
- en: Sort by answer number so that you do not damage other components or the resistor...
    unless you understand how the different values will affect the electronic circuit
    and it's safe to do so.
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照答案编号排序，这样您就不会损坏其他组件或电阻器...除非您了解不同值将如何影响电子电路并且这样做是安全的。
- en: False. GPIO Zero is a wrapper on top of other GPIO libraries. It's designed
    to be easy to use for beginners by hiding away lower-level GPIO interfacing details.
  id: totrans-13
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 错误。GPIO Zero是其他GPIO库的封装。它旨在通过隐藏较低级别的GPIO接口细节，使初学者易于使用。
- en: False. In many scenarios, you are better off using mature higher-level packages
    as they will help speed up development. The Python API documentation also recommends
    this approach.
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 错误。在许多情况下，最好使用成熟的高级软件包，因为它们将有助于加快开发速度。Python API文档也推荐这种方法。
- en: No. An LED has positive (anode) and negative (cathode) terminals (legs) and
    must be connected the correct way around.
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不。LED具有正（阳极）和负（阴极）端子（腿），必须正确连接。
- en: There's a chance that there is a mismatch between the devices' time zone handling.
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 有可能设备的时区处理存在不匹配。
- en: '`signal.pause()`'
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`signal.pause()`'
- en: Chapter 3
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第三章
- en: We can create and configure an instance of `RequestParser`. We use this instance
    in our controller's handler methods such as `.get()` or `.post()` to validate
    the client's request.
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以创建和配置一个`RequestParser`的实例。我们在我们的控制器处理程序方法中使用这个实例，比如`.get()`或`.post()`来验证客户端的请求。
- en: WebSockets – a client and server built using Web Sockets can initiate a request
    to one another in either direction. This is in contrast to a RESTful API service
    where only the client can initiate a request to the server.
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: WebSockets - 使用Web Sockets构建的客户端和服务器可以在任何方向上相互发起请求。这与RESTful API服务形成对比，后者只有客户端可以向服务器发起请求。
- en: Flask-SocketIO does not include an in-built validation class like Flask-RESTful.
    You have to perform input validation manually. Alternatively, you could also find
    a suitable third-party Python module to use from PyPi.org.
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Flask-SocketIO不包括像Flask-RESTful那样的内置验证类。您必须手动执行输入验证。或者，您也可以从PyPi.org找到一个合适的第三方Python模块来使用。
- en: The `templates` folder is the default location where the Flask framework looks
    for template files. It's in this location where we store our HTML pages and templates.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`templates`文件夹是Flask框架查找模板文件的默认位置。在这个位置，我们存储我们的HTML页面和模板。'
- en: We should initialize event listeners and the web page content in the document
    ready function, which is called once the web page has been completely loaded.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们应该在文档准备好的函数中初始化事件侦听器和网页内容，这个函数在网页完全加载后调用。
- en: The command is `curl`. It is installed by default on most Unix-based operating
    systems.
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 命令是`curl`。它默认安装在大多数基于Unix的操作系统上。
- en: Changing the value property changes the PWM duty cycle for the LED. We visualize
    this as changing the brightness of the LED.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更改`value`属性会改变LED的PWM占空比。我们将这视为改变LED的亮度。
- en: Chapter 4
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第四章
- en: '**MQTT**, or **Message Queue Telemetry Protocol**, is a lightweight messaging
    protocol frequently used in distributed IoT networks.'
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**MQTT**，或**消息队列遥测协议**，是在分布式物联网网络中经常使用的轻量级消息协议。'
- en: Check the QoS levels, making sure they are either level 1 or 2.
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查QoS级别，确保它们是1级或2级。
- en: A `Will` message will be published on behalf of a client if that client abruptly
    disconnects from the broker without cleanly closing the connection first.
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果客户端突然断开与代理的连接而没有干净地关闭连接，将代表客户端发布`Will`消息。
- en: Both the published message and subscribing clients must use at least QoS level
    1, which ensures messages are delivered one or more times.
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 发布的消息和订阅的客户端都必须至少使用QoS级别1，这可以确保消息被传递一次或多次。
- en: Ideally, nothing should need to change in your Python code other than perhaps
    the broker host and port because MQTT is an open standard. The proviso is that
    the new broker is configured similarly to the broker being replaced – for example,
    both brokers are configured similarly to provide message retention or durable
    connection features to clients.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 理想情况下，除了可能需要更改代理主机和端口之外，您的Python代码不应该需要任何更改，因为MQTT是一个开放标准。前提是新代理配置与被替换的代理类似
    - 例如，两个代理都配置类似以为客户端提供消息保留或持久连接功能。
- en: You should subscribe to topics in an on successful connection-type handler.
    This way, if the client loses its broker connection, it can automatically reestablish
    topic subscriptions when it reconnects.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你应该在成功连接类型的处理程序中订阅主题。这样，如果客户端失去了与代理的连接，它可以在重新连接时自动重新建立主题订阅。
- en: Chapter 5
  id: totrans-33
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第五章
- en: '**SPI** (**Serial Peripheral Interface Circuit**). LED strips and matrices
    are common examples.'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**SPI**（串行外围接口电路）。LED灯带和矩阵是常见的例子。'
- en: You can refer to the device's official datasheet, or use the command-line tool
    i2cdetect, which lists the addresses of all connected I2C devices.
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以参考设备的官方数据表，或使用列出所有连接的I2C设备地址的命令行工具i2cdetect。
- en: Make sure you are using the correct pin numbering scheme expected by the library,
    and/or make sure you have configured the library to use the scheme you prefer
    if the library provides this option.
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保你使用的是库期望的正确引脚编号方案，并/或者确保你已经配置了库以使用你喜欢的方案，如果库提供了这个选项。
- en: The driver library is not built upon PiGPIO and therefore does not support remote
    GPIO.
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 驱动程序库不是建立在PiGPIO之上的，因此不支持远程GPIO。
- en: False. All GPIO pins are rated for 3.3 volts. Connecting any voltage higher
    than this can damage your Raspberry Pi.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 错误。所有的GPIO引脚额定电压为3.3伏特。连接任何高于这个电压的电压都可能损坏你的树莓派。
- en: The library you are using to drive the servo is most likely using software PWM
    to generate the PWM signals for the servo. Software PWM signals can be distorted
    when the Raspberry Pi's CPU gets busy.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你使用来驱动舵机的库很可能是使用软件PWM来生成舵机的PWM信号。当树莓派的CPU变得繁忙时，软件PWM信号可能会失真。
- en: If you are powering the servos from the 5-volt pin of your Raspberry Pi, it'll
    indicate that you are drawing too much power, effectively robbing the power from
    the Raspberry Pi. Ideally, the servos should be powered from an external power
    source.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你从树莓派的5伏特引脚为舵机供电，这将表明你正在吸取过多的电力，实际上是从树莓派中夺取电力。理想情况下，舵机应该由外部电源供电。
- en: Chapter 6
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第六章
- en: Generally speaking, yes. It's safe to try because a higher resistance results
    in a lower current in the circuit (Ohm's law) and 330Ω is relatively close to
    the desired 200Ω resistor.
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一般来说，是的。尝试是安全的，因为电阻越高，电路中的电流就越低（欧姆定律），而330Ω相对接近期望的200Ω电阻。
- en: The higher resistance has resulted in less current to the point that there is
    not enough current for the circuit to operate reliably.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更高的电阻导致了更少的电流，以至于电路没有足够的电流来可靠地工作。
- en: The amount of power to be dissipated by the resistor exceeds the resistor's
    power rating. In addition to using Ohm's law to determine a resistor value, you
    also need to calculate the expected power dissipation of the resistor and ensure
    that the resistor's power rating (in watts) exceeds your calculated value.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 电阻要耗散的功率超过了电阻的功率额定值。除了使用欧姆定律来确定电阻值之外，你还需要计算电阻的预期功率耗散，并确保电阻的功率额定值（以瓦特为单位）超过你计算出的值。
- en: 1 (one). An input GPIO pin connected to +3.3 volts is a logical high.
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 1（一）。连接到+3.3伏特的输入GPIO引脚是逻辑高。
- en: GPIO 21 is floating. It's not pulled up to +3.3 volts by a physical resistor
    or via code using a function call such as `pi.set_pull_up_down(21, pigpio.PUD_UP)`.
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: GPIO 21是浮动的。它没有通过物理电阻或者通过代码使用函数调用（例如`pi.set_pull_up_down(21, pigpio.PUD_UP)）`拉高到+3.3伏特。
- en: You must use a logic level converter. This could be a simple resistor-based
    voltage divider, a dedicated logic level converter IC or module, or any other
    form that can appropriately shift down 5 volts to 3.3 volts.
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你必须使用逻辑电平转换器。这可以是一个简单的基于电阻的电压分压器，一个专用的逻辑电平转换器IC或模块，或者任何其他可以适当将5伏特转换为3.3伏特的形式。
- en: False. A resistor voltage divider can only step down a voltage. However, remember
    that it may be possible to drive a 5-volt logic device using 3.3 volts as long
    as the 5-volt device registers 3.3 volts as a logical high.
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 错误。电阻分压器只能降低电压。但是，请记住，只要5伏特设备将3.3伏特注册为逻辑高，可能可以使用3.3伏特来驱动5伏特逻辑设备。
- en: Chapter 7
  id: totrans-49
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第七章
- en: MOSFETs are voltage-controlled components, while BJTs are current-controlled
    components.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: MOSFET是电压控制元件，而BJT是电流控制元件。
- en: You do not have a pull-down resistor on the MOSFET's gate leg, so it's left
    floating. The MOSFET discharges slowly and this is reflected as the motor is spinning
    down. Using a pull-down resistor ensures the MOSFET discharges promptly and becomes
    off.
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你在MOSFET的栅极上没有下拉电阻，所以它是悬空的。MOSFET放电缓慢，这反映在电机减速。使用下拉电阻可以确保MOSFET迅速放电并关闭。
- en: (a) Make sure the G, S, and D legs are connected correctly because different
    package styles (for example, T092 versus TP220) have their legs ordered differently.
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: （a）确保G、S和D腿正确连接，因为不同的封装样式（例如T092与TP220）它们的腿的顺序是不同的。
- en: (b) You also want to make sure that the MOSFET is logic-level compatible so
    that it can be controlled using a 3.3-volt voltage source.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: （b）你还要确保MOSFET是逻辑电平兼容的，这样它就可以使用3.3伏特的电压源进行控制。
- en: (c) Ensure that the voltage divider created between the pull-down resistor and
    the current limiting resistor allows >~3 volts into the MOSFET's gate leg.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: （c）确保在下拉电阻和限流电阻之间创建的电压分压器允许>〜3伏特进入MOSFET的栅极腿。
- en: Optocouplers and relays electrically isolate the input and output sides of a
    circuit. Transistors are in-circuit, and while they allow a low-current device
    to control a larger current device, both devices are still both electrically connected
    (for example, you will see a common ground connection).
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 光耦和继电器在电路的输入和输出端之间进行电气隔离。晶体管是在电路中的，虽然它们允许低电流设备控制更大的电流设备，但两个设备仍然都是电气连接的（例如，你会看到一个公共地连接）。
- en: Active low is where you make a GPIO low to turn on or activate the connected
    circuit. Active high is the opposite, in that we make the GPIO pin high to activate
    the connected circuit.
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 主动低是指使GPIO低电平以打开或激活连接的电路。主动高则相反，我们使GPIO引脚高电平以激活连接的电路。
- en: Code activated pull-down only becomes pull-down when the code is run, so the
    MOSFET gate is basically left floating until the code is run.
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 代码激活的下拉仅在运行代码时变为下拉，因此MOSFET门基本上是悬浮的，直到运行代码。
- en: The stall current is the current used by the motor when its staff has been,
    well, stalled – for example, forcefully stopped from turning. This is the maximum
    current that a motor will draw.
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 堵转电流是电机在其轴被强行停止旋转时使用的电流。这是电机将吸取的最大电流。
- en: There is no difference – they are two terms used interchangeably to describe
    the current a motor uses when it is spinning freely with no load attached to the
    motor's shaft.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 没有区别-它们是两个可互换使用的术语，用来描述电机在轴上没有负载的情况下自由旋转时所使用的电流。
- en: Chapter 8
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第8章
- en: Check that your power supply can deliver enough current (and voltage) to your
    LED strip. Current requirements increase in proportion with the number of LEDs
    you want to illuminate, and the color and brightness they are set to. An insufficient
    current can mean that the internal red/green/blue LEDs are not illuminated correctly
    and thus the colors are not as you expected.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查您的电源是否能够提供足够的电流（和电压）给LED灯带。电流需求随您想要点亮的LED数量以及它们设置的颜色和亮度而成比例增加。电流不足可能意味着内部的红/绿/蓝LED没有正确点亮，因此颜色不如您期望的那样。
- en: The absence of a Slave Select or Client Enable pin means that the APA102 takes
    full control of the SPI interface. This means that you cannot connect more than
    one SPI slave to an SPI pin (unless you employ additional electronics).
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 缺少从选择或客户端启用引脚意味着APA102完全控制SPI接口。这意味着您不能将多个SPI从设备连接到一个SPI引脚（除非您使用额外的电子设备）。
- en: First, check that your logic level converter is connected correctly. Secondly,
    it's possible that the logic level converter cannot convert logic levels fast
    enough to keep up with the SPI interface. Try lowering the SPI bus speed.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，检查您的逻辑电平转换器是否连接正确。其次，可能逻辑电平转换器无法快速转换逻辑电平以跟上SPI接口。尝试降低SPI总线速度。
- en: We use the **PIL** (**Python Imaging Library**) to create an in-memory image
    representing what we want to display. We then send this image to the OLED display
    for rendering.
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们使用**PIL**（**Python Imaging Library**）创建一个内存中的图像，代表我们想要显示的内容。然后将此图像发送到OLED显示器进行渲染。
- en: '**RTTTL** means **Ring Tone Text Transfer Language**, which is a ring-tone
    music format created by Nokia.'
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**RTTTL**意味着**Ring Tone Text Transfer Language**，这是由诺基亚创建的一个铃声音乐格式。'
- en: Chapter 9
  id: totrans-66
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第9章
- en: The DHT22 is a more accurate sensor, and it is capable of sensing a greater
    range of temperatures and humanities.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: DHT22是一种更精确的传感器，它能够感知更广泛的温度和湿度范围。
- en: The external pull-up resistor is optional because our Raspberry Pi can use its
    internal embedded pull-up resistor.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 外部上拉电阻是可选的，因为我们的树莓派可以使用其内部嵌入的上拉电阻。
- en: An LDR is a light-sensitive resistor. When used as part of a voltage-divider
    circuit, we turn the varying resistance into a varying voltage. This voltage can
    then be detected by an analog-to-digital converter such as the ADS1115, which
    is connected to your Raspberry Pi.
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: LDR是一种光敏电阻。当作为电压分压电路的一部分使用时，我们将变化的电阻转换为变化的电压。然后，这个电压可以被模拟到数字转换器（如连接到您的树莓派的ADS1115）检测到。
- en: Try varying the resistance of the fixed resistor in the voltage-divider circuit.
    Try higher-value resistances to make the LDR more sensitive in darker conditions.
    Try lower-resistance values to make the LDR more sensitive to brighter conditions.
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 尝试改变电压分压电路中固定电阻的电阻值。尝试更高阻值的电阻以使LDR在较暗的条件下更敏感。尝试更低的电阻值以使LDR对更明亮的条件更敏感。
- en: No two LDRs are identical when it comes to the resistances they measure. If
    you swap out an LDR in a circuit, re-calibrate the code just to be sure.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当涉及到它们测量的电阻时，没有两个LDR是相同的。如果在电路中更换LDR，请重新校准代码以确保。
- en: Water conducts electricity. It acts as a resistor between the two probe wires.
    This resistance is converted to a voltage by the voltage divider, and this is
    detectable by the ADS1115 ADC.
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 水传导电。它在两个探针线之间充当电阻。这种电阻通过电压分压器转换为电压，ADS1115 ADC可以检测到这种电压。
- en: Chapter 10
  id: totrans-73
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第10章
- en: We typically find default reference pulse widths of 1 ms for left, and 2 ms
    for rights used for the servos. In reality, the servos may need slightly adjusted
    pulse widths to reach their extreme rotation positions.
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们通常发现默认的参考脉冲宽度为1毫秒用于左，2毫秒用于右的舵机。实际上，舵机可能需要略微调整的脉冲宽度才能达到其极限旋转位置。
- en: You are applying a pulse width that is trying to rotate your servo beyond its
    physical limits.
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您正在应用尝试将舵机旋转到其物理极限之外的脉冲宽度。
- en: An H-bridge allows us to also change the rotation of a motor and apply a brake
    to quickly stop the motor spinning.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: H桥还允许我们改变电机的旋转并快速制动以停止电机旋转。
- en: Many factors affect the reliability of braking, including the IC and your motor.
    You can adopt PWM-style braking as an alternative braking technique.
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 许多因素影响制动的可靠性，包括IC和您的电机。您可以采用PWM式制动作为替代制动技术。
- en: Vibrating but not turning is often the symptom of a mismatch between the coil
    energizing order and the coil stepping sequence. You need to identify and ensure
    the stepper motor's coils are connected correctly and match the stepping sequence.
    Consulting your stepper motor's datasheet is the best place to start.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 振动但不转动通常是线圈通电顺序和线圈步进序列不匹配的症状。您需要确定并确保步进电机的线圈连接正确并匹配步进序列。查阅您的步进电机的数据表是开始的最佳地点。
- en: The L293D has a voltage drop of around 2 volts, so your motor is only getting
    around 3 volts. To compensate for this voltage drop, you would need a power source
    of 7 volts.
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: L293D的电压降约为2伏，因此您的电机只能获得约3伏。为了补偿这种电压降，您需要一个7伏的电源。
- en: No. The GPIO pins only supply 3.3 volts. While this might be just enough to
    rotate a 5-volt stepper motor, the current requirements of a stepper motor will
    exceed the safe limits of the Raspberry Pi GPIO pins.
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不。GPIO引脚只提供3.3伏。虽然这可能刚好足够旋转5伏的步进电机，但是步进电机的电流要求将超出树莓派GPIO引脚的安全限制。
- en: Chapter 11
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第11章
- en: No. A **passive infrared** (**PIR**) sensor can only detect abstract movement.
    You will need an active-type infrared sensor or a device like a thermal camera
    (and a lot more complex code) to extract richer movement information.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不。**被动红外**（PIR）传感器只能检测抽象的运动。您将需要一种主动型红外传感器或类似热成像相机的设备（以及更复杂的代码）来提取更丰富的运动信息。
- en: An ultrasonic sensor measures the round-trip timing of ultrasonic pulses, which
    is then used to calculate distance. Factors that affect the ultrasonic pulse timing
    or the speed-of-sound constant used therefore affect the calculated distance.
    Some examples include temperature since this affects the speed of sound, the material
    of the detected object (for example, does it absorb sound?), the size of the object,
    and its angle relative to the sensor.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 超声波传感器测量超声脉冲的往返时间，然后用于计算距离。影响超声脉冲时间或所用的声速常数的因素因此会影响计算出的距离。一些例子包括温度，因为这会影响声速，被检测物体的材料（例如，它是否吸收声音？），物体的大小以及其相对于传感器的角度。
- en: Both latching and non-latching Hall effect sensors output a digital signal –
    their output pin is either HIGH or LOW. In contrast, ratiometric Hall effect sensors
    output an analog signal (varying voltage) relative to how close they are to a
    magnetic field.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 锁定和非锁定霍尔效应传感器都输出数字信号-它们的输出引脚要么是高电平要么是低电平。相比之下，比例霍尔效应传感器输出与它们离磁场有多近的模拟信号（变化的电压）。
- en: The `callback_handler` function will be called whenever GPIO transitions to either a
    HIGH or LOW state.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`callback_handler`函数将在GPIO转换为高电平或低电平时调用。'
- en: So that the relative voltage drop across the resistor that sits between the
    5-volt source and the voltage-divider output (between the two resistors) is 3.3
    volts, that is, 5 volts * 2kΩ/(1kΩ + 2kΩ) = ~3.3 volts. If you reversed the resistor
    values in the circuit, the voltage-divider output would be ~1.7 volts, that is,
    5 volts * 1kΩ/(1kΩ + 2kΩ) = ~1.7 volts.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 因此，位于5伏特源和电压分压器输出（两个电阻之间）之间的电阻器上的相对电压降为3.3伏特，即5伏特*2kΩ/(1kΩ+2kΩ) = ~3.3伏特。如果您在电路中颠倒了电阻值，电压分压器输出将为~1.7伏特，即5伏特*1kΩ/(1kΩ+2kΩ)
    = ~1.7伏特。
- en: After consulting the datasheet for the HC-SR501 PIR sensor, we learn that its
    output pin always works at 3.3 volts even though it's powered from 5 volts, thus
    we did not need a voltage divider. (Note that, in practice, we ideally would also
    confirm this by our measurement.)
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在查阅HC-SR501 PIR传感器的数据表后，我们了解到它的输出引脚始终在3.3伏特工作，即使它是由5伏特供电的，因此我们不需要电压分压器。（请注意，在实践中，我们最好也通过我们的测量来确认这一点。）
- en: Chapter 12
  id: totrans-88
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第12章
- en: A publish-subscribe approach promotes a highly decoupled approach to programming.
    This can be beneficial when you have many components (for example, sensors) publishing
    data that simply needs to be consumed elsewhere in your program.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 发布-订阅方法促进了高度解耦的编程方法。当您有许多组件（例如传感器）发布数据，只需要在程序的其他地方消耗数据时，这可能是有益的。
- en: '**GIL** stands for **Global Interpreter Lock**. It''s a design aspect of the
    Python programming language that means only one thread ever has access to the
    Python interpreter at a time.'
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: GIL代表全局解释器锁。这是Python编程语言的一个设计方面，意味着一次只有一个线程可以访问Python解释器。
- en: A pure event loop (for example, one long while loop) can get complex as your
    program grows. The need for many state variables and non-trivial and intervening
    conditional tests (for example, if statements) can make the program logic hard
    to follow and debug.
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 纯事件循环（例如，一个长的while循环）在程序增长时可能会变得复杂。对许多状态变量和非平凡的和干预的条件测试（例如，if语句）的需求可能会使程序逻辑难以理解和调试。
- en: No. Every approach has its purpose. Event loops are fine when they are small
    and focused. It's only when they become large and are performing multiple actions
    that they become complex.
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不。每种方法都有其目的。事件循环在小而专注时是可以的。只有当它们变得庞大并执行多个操作时，它们才会变得复杂。
- en: When you are programming with threads, calling `join()` on another thread joins
    that thread to your current thread. Your current thread then blocks until all
    joined threads run methods complete. This is a simple way of synchronizing the
    completion of multiple threads.
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当您使用线程进行编程时，调用`join()`另一个线程会将该线程加入到当前线程。然后，您的当前线程将阻塞，直到所有加入的线程运行方法完成。这是同步多个线程完成的简单方法。
- en: 'Perhaps you are using a `sleep` statement (from the time library), such as `sleep(duration)`,
    which blocks for the full duration. Try using the approach in the following example,
    which will allow your program to remain responsive to a change in the value of `duration`:'
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 也许您正在使用`sleep`语句（来自`time`库），例如`sleep(duration)`，它会阻塞整个持续时间。尝试使用以下示例中的方法，这将使您的程序保持对`duration`值的更改的响应性：
- en: '[PRE0]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: No approach is superior. There is always more than one way to reach your programming
    goal in Python. The best approach, or combination of approaches, all depends on
    your project and what you are trying to achieve. The best approach can also be
    the one that is best for you based on your personal preferences and preferred
    programming style.
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 没有一种方法是优越的。在Python中，达到编程目标的方法总是不止一种。最佳方法或方法的组合完全取决于您的项目以及您想要实现的目标。最佳方法也可能是根据您的个人偏好和首选编程风格而为您最佳的方法。
- en: Chapter 13
  id: totrans-97
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第13章
- en: We used different temperatures to create a buffer so that we would not generate
    multiple triggers (and multiple emails) if the temperature hovered around a single
    temperature value.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们使用不同的温度创建一个缓冲区，这样我们就不会在温度围绕单个温度值徘徊时生成多个触发器（和多个电子邮件）。
- en: Using an intermediary meant we did not need to worry about a firewall, port
    forwarding, and other configurations necessary to expose your Raspberry Pi to
    the public internet.
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用中介者意味着我们不需要担心防火墙、端口转发和其他必要的配置，以将您的树莓派暴露给公共互联网。
- en: IFTTT is more consumer-focused, while Zapper is more business-focused in terms
    of the integrations it provides. Zapper will also allow you to create a more complex
    workflow, trigger, and action scenarios.
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: IFTTT更加面向消费者，而Zapper在提供集成方面更加面向企业。Zapper还允许您创建更复杂的工作流程、触发器和操作场景。
- en: No. ThingSpeak only consumes data to display on a dashboard. Some platforms,
    such as ThingBoard, will allow you to send data back to a device for the purposes
    of controlling that device.
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不，ThingSpeak只消耗数据以在仪表板上显示。一些平台，如ThingBoard，将允许您将数据发送回设备，以控制该设备。
- en: There is a maximum of three JSON properties available `– Value1`, `Value2`,
    and `Value3`.
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最多可以使用三个JSON属性`– Value1`、`Value2`和`Value3`。
- en: From ease and speed of development perspectives, IFTTT or Zapper would be a
    good choice, but you could certainly use AWS or one of the other major IoT platforms,
    or even Home Assistant.
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从开发的便捷性和速度的角度来看，IFTTT或Zapper都是不错的选择，但您当然也可以使用AWS或其他主要的物联网平台，甚至是Home Assistant。
- en: Chapter 14
  id: totrans-104
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第14章
- en: The use of PyPubSub was a design decision to decouple MQTT-related code and
    logic from hardware control code and logic, with the goal of making the code cleaner
    and easier to maintain.
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用PyPubSub是一个设计决策，旨在将与MQTT相关的代码和逻辑与硬件控制代码和逻辑分离，以使代码更清晰、更易于维护。
- en: The commands you speak when using the Google Assistant app are shown on your
    device as text, so it's easy to see how Google Assistant heard your spoken commands,
    and what was sent as textual commands to your IFTTT Applet.
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用Google助手应用程序时说的命令会显示在您的设备上，因此很容易看到Google助手是如何听到您说的命令，以及发送给您的IFTTT Applet的文本命令。
- en: You will need to build an integration service that marshals data between MQTT
    and the RESTful APIs (or, alternatively, identify a thirty-party service that
    does this – for example, check out [https://io.adafruit.com](https://io.adafruit.com) and
    their IFTTT service). IFTTT offers RESTful webhooks as an option to build custom
    integrations, however, it does not offer an MQTT option.
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您需要构建一个集成服务，用于在MQTT和RESTful API之间传输数据（或者，也可以找到一个第三方服务来做到这一点，例如，可以查看[https://io.adafruit.com](https://io.adafruit.com)和他们的IFTTT服务）。IFTTT提供RESTful
    webhooks作为构建自定义集成的选项，但它不提供MQTT选项。
- en: One option is to use MQTT, just like the example we covered in this chapter.
    If you connect multiple IoTrees using MQTT to a central MQTT broker, they all
    receive instructions together. A second option could be to build a WebSockets-based
    service and application (we covered this approach in [Chapter 3](b9f3d19f-a490-4752-ac4a-5607496dc3d9.xhtml),
    *Networking with RESTful APIs and Web Sockets Using Flask*).
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一种选择是使用MQTT，就像我们在本章中介绍的示例一样。如果您使用MQTT将多个IoTree连接到中央MQTT代理，它们将一起接收指令。第二个选择可能是构建基于WebSockets的服务和应用程序（我们在[第3章](b9f3d19f-a490-4752-ac4a-5607496dc3d9.xhtml)中介绍了这种方法，*使用Flask进行RESTful
    API和Web Sockets的网络连接*）。
- en: We used the free [dweet.io](http://dweet.io) service for practical convenience
    so what we did not have to worry about firewalls, port forwarding, and router
    configurations at your place (just in case this is something you are not experienced
    with). The free [dweet.io](http://dweet.io) service offers no security or privacy,
    so it is undesirable for many projects. If you like the idea of [dweet.io](http://dweet.io),
    there is [dweetpro.io](https://dweetpro.io), a paid alternative that offers security
    and many other features that are not available in the free version.
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们使用免费的[dweet.io](http://dweet.io)服务，因为这样做非常方便，这样我们就不必担心防火墙、端口转发和路由器配置（以防您没有相关经验）。免费的[dweet.io](http://dweet.io)服务不提供安全性或隐私性，因此对许多项目来说并不理想。如果您喜欢[dweet.io](http://dweet.io)的想法，还有[dweetpro.io](https://dweetpro.io)，这是一个付费的替代方案，提供了免费版本中不可用的安全性和许多其他功能。
- en: '`CURL` is a popular command-line tool that can be used to test RESTful APIs.
    Postman ([getpostman.com](https://getpostman.com)) is a popular GUI tool that
    can also be used for the same purpose.'
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`CURL`是一种常用的命令行工具，可用于测试RESTful API。Postman ([getpostman.com](https://getpostman.com))是一种常用的GUI工具，也可以用于相同的目的。'
- en: If you use the retained message features of the MQTT broker, each IoTree will
    receive the last message (for example, what color pattern to show) when it connects
    and therefore can initialize itself. We covered retained messages in [Chapter
    4](6947b564-6182-4ec9-998a-37f636c0bce6.xhtml), *Networking with MQTT, Python,
    and the Mosquitto MQTT Broker*.
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您使用MQTT代理的保留消息功能，每个IoTree在连接时都会收到最后一条消息（例如，要显示什么颜色模式），因此可以初始化自己。我们在《使用MQTT、Python和Mosquitto
    MQTT代理进行网络连接》[第4章](6947b564-6182-4ec9-998a-37f636c0bce6.xhtml)中介绍了保留消息。
- en: If your MQTT broker is running on the same Raspberry Pi as an IoTree and you
    restart this Raspberry Pi, all retained messages will be lost unless the Mosquitto
    MQTT broker has persistence enabled in its configuration. (Our configuration from [Chapter
    4](6947b564-6182-4ec9-998a-37f636c0bce6.xhtml), *Networking with MQTT, Python,
    and the Mosquitto MQTT Broker*, ensured persistence is enabled).
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您的MQTT代理运行在与IoTree相同的树莓派上，并且重新启动了这个树莓派，除非Mosquitto MQTT代理在其配置中启用了持久性，否则所有保留的消息都将丢失。（我们在[第4章](6947b564-6182-4ec9-998a-37f636c0bce6.xhtml)中的配置，*使用MQTT、Python和Mosquitto
    MQTT代理进行网络连接*，确保了持久性已启用）。
