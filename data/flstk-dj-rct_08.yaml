- en: '8'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '8'
- en: Social Media Posts
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç¤¾äº¤åª’ä½“å¸–å­
- en: Social media already has authentication added on the frontend side. We can now
    authenticate the user through registration or login, fetch the user data, and
    show it. Now that we can store JWT tokens, we can make requests to the API for
    any protected resources, and we will start with the `post` resource.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: ç¤¾äº¤åª’ä½“å·²ç»åœ¨å‰ç«¯æ·»åŠ äº†è®¤è¯ã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥é€šè¿‡æ³¨å†Œæˆ–ç™»å½•æ¥è®¤è¯ç”¨æˆ·ï¼Œè·å–ç”¨æˆ·æ•°æ®ï¼Œå¹¶æ˜¾ç¤ºå®ƒä»¬ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥å­˜å‚¨JWTä»¤ç‰Œï¼Œæˆ‘ä»¬å¯ä»¥å‘APIå‘é€è¯·æ±‚ä»¥è·å–ä»»ä½•å—ä¿æŠ¤çš„èµ„æºï¼Œæˆ‘ä»¬å°†ä»`post`èµ„æºå¼€å§‹ã€‚
- en: In this chapter, weâ€™ll focus on **CRUD** operations on posts. Weâ€™ll implement
    listing, creating, updating, and deleting post features. You will learn how to
    create and manage a Modal in React, how to handle a form from validation to submission,
    and how to design and integrate components into a React page.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†å…³æ³¨å¯¹å¸–å­çš„**CRUD**æ“ä½œã€‚æˆ‘ä»¬å°†å®ç°åˆ—å‡ºã€åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤å¸–å­åŠŸèƒ½ã€‚æ‚¨å°†å­¦ä¹ å¦‚ä½•åœ¨Reactä¸­åˆ›å»ºå’Œç®¡ç†æ¨¡æ€æ¡†ï¼Œå¦‚ä½•å¤„ç†ä»éªŒè¯åˆ°æäº¤çš„è¡¨å•ï¼Œä»¥åŠå¦‚ä½•è®¾è®¡å’Œé›†æˆç»„ä»¶åˆ°Reacté¡µé¢ä¸­ã€‚
- en: 'This chapter will cover the following topics:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬ç« å°†æ¶µç›–ä»¥ä¸‹ä¸»é¢˜ï¼š
- en: Listing posts in a feed
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åœ¨Feedä¸­åˆ—å‡ºå¸–å­
- en: Creating a post using a form
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è¡¨å•åˆ›å»ºå¸–å­
- en: Editing and deleting a post
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¼–è¾‘å’Œåˆ é™¤å¸–å­
- en: Liking a post
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç‚¹èµå¸–å­
- en: Technical requirements
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æŠ€æœ¯è¦æ±‚
- en: Make sure to have VS Code and an updated browser installed and configured on
    your machine. You can find the code of this chapter at [https://github.com/PacktPublishing/Full-stack-Django-and-React/tree/chap8](https://github.com/PacktPublishing/Full-stack-Django-and-React/tree/chap8).
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: ç¡®ä¿æ‚¨çš„æœºå™¨ä¸Šå·²å®‰è£…å¹¶é…ç½®äº†VS Codeå’Œæ›´æ–°çš„æµè§ˆå™¨ã€‚æ‚¨å¯ä»¥åœ¨[https://github.com/PacktPublishing/Full-stack-Django-and-React/tree/chap8](https://github.com/PacktPublishing/Full-stack-Django-and-React/tree/chap8)æ‰¾åˆ°æœ¬ç« çš„ä»£ç ã€‚
- en: Creating the UI
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åˆ›å»ºUI
- en: The REST API is ready to accept requests and list the API. For the next steps,
    ensure that the Django server is running on the machine at port `localhost:8000`.
    The first step is implementing a post feed with a ready design and UI. Before
    coding the components for reading, creating, updating, and deleting a component,
    we need to analyze the UI and also make sure we have the right configurations
    and components to ease the development with React. We will mostly build the navigation
    bar and the layout.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: REST APIå·²å‡†å¤‡å¥½æ¥å—è¯·æ±‚å¹¶åˆ—å‡ºAPIã€‚å¯¹äºä¸‹ä¸€æ­¥ï¼Œè¯·ç¡®ä¿DjangoæœåŠ¡å™¨åœ¨æœºå™¨ä¸Šçš„`localhost:8000`ç«¯å£è¿è¡Œã€‚ç¬¬ä¸€æ­¥æ˜¯å®ç°ä¸€ä¸ªå¸¦æœ‰ç°æˆè®¾è®¡å’ŒUIçš„å¸–å­æµã€‚åœ¨ç¼–å†™è¯»å–ã€åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤ç»„ä»¶çš„ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ†æUIï¼Œå¹¶ç¡®ä¿æˆ‘ä»¬æœ‰æ­£ç¡®çš„é…ç½®å’Œç»„ä»¶æ¥ç®€åŒ–ä½¿ç”¨Reactçš„å¼€å‘ã€‚æˆ‘ä»¬å°†ä¸»è¦æ„å»ºå¯¼èˆªæ å’Œå¸ƒå±€ã€‚
- en: 'Hereâ€™s the feed UI of the home page:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ä¸»é¡µçš„Feed UIï¼š
- en: '![Figure 8.1 â€“ Feed UI wireframe](img/Figure_8.01_B18221.jpg)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾8.1 â€“ Feed UIçº¿æ¡†å›¾](img/Figure_8.01_B18221.jpg)'
- en: Figure 8.1 â€“ Feed UI wireframe
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾8.1 â€“ Feed UIçº¿æ¡†å›¾
- en: 'In the following figure, we have another illustration representing the UI and
    the pageâ€™s structure. We are using flex columns, and weâ€™ll use Bootstrap flex
    components to design the page:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä»¥ä¸‹å›¾ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªè¡¨ç¤ºUIå’Œé¡µé¢ç»“æ„çš„å¦ä¸€ä¸ªæ’å›¾ã€‚æˆ‘ä»¬ä½¿ç”¨flexåˆ—ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Bootstrap flexç»„ä»¶æ¥è®¾è®¡é¡µé¢ï¼š
- en: '![Figure 8.2 â€“ Wireframe](img/Figure_8.02_B18221.jpg)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾8.2 â€“ çº¿æ¡†å›¾](img/Figure_8.02_B18221.jpg)'
- en: Figure 8.2 â€“ Wireframe
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾8.2 â€“ çº¿æ¡†å›¾
- en: The navigation bar will be available on other pages of the React application,
    and by making the navigation bar a component, itâ€™ll be reused. We can make the
    integration of the navigation bar easier by having a `Layout` component that will
    be used when building the pages. Letâ€™s start by adding the navigation bar component.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¼èˆªæ å°†åœ¨Reactåº”ç”¨çš„å…¶å®ƒé¡µé¢ä¸Šå¯ç”¨ï¼Œé€šè¿‡å°†å¯¼èˆªæ åšæˆç»„ä»¶ï¼Œå®ƒå¯ä»¥è¢«å¤ç”¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‹¥æœ‰ä¸€ä¸ª`Layout`ç»„ä»¶æ¥ç®€åŒ–å¯¼èˆªæ çš„é›†æˆï¼Œè¿™ä¸ªç»„ä»¶åœ¨æ„å»ºé¡µé¢æ—¶å°†è¢«ä½¿ç”¨ã€‚è®©æˆ‘ä»¬å…ˆæ·»åŠ å¯¼èˆªæ ç»„ä»¶ã€‚
- en: Adding the NavBar component
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ·»åŠ NavBarç»„ä»¶
- en: 'The `NavBar` component, or the navigation bar component, should help to quickly
    navigate the UI. Hereâ€™s an screenshot of the `NavBar` component:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '`NavBar`ç»„ä»¶ï¼Œæˆ–å¯¼èˆªæ ç»„ä»¶ï¼Œåº”è¯¥æœ‰åŠ©äºå¿«é€Ÿå¯¼èˆªUIã€‚ä»¥ä¸‹æ˜¯`NavBar`ç»„ä»¶çš„æˆªå›¾ï¼š'
- en: '![Figure 8.3 â€“ Navbar](img/Figure_8.03_B18221.jpg)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾8.3 â€“ Navbar](img/Figure_8.03_B18221.jpg)'
- en: Figure 8.3 â€“ Navbar
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾8.3 â€“ Navbar
- en: 'The `NavBar` will have three links:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '`NavBar`å°†åŒ…å«ä¸‰ä¸ªé“¾æ¥ï¼š'
- en: A link to redirect to the feed page (**1**)
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªé‡å®šå‘åˆ°Feedé¡µé¢çš„é“¾æ¥ï¼ˆ**1**ï¼‰
- en: A link to redirect to the profile page (**2**)
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªé‡å®šå‘åˆ°ä¸ªäººèµ„æ–™é¡µé¢çš„é“¾æ¥ï¼ˆ**2**ï¼‰
- en: A link to log out (**3**)
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªæ³¨é”€é“¾æ¥ï¼ˆ**3**ï¼‰
- en: Hereâ€™s a simple wireframe to better illustrate where the links will go.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„çº¿æ¡†å›¾ï¼Œä»¥æ›´å¥½åœ°è¯´æ˜é“¾æ¥å°†æ”¾ç½®çš„ä½ç½®ã€‚
- en: '![Figure 8.4 â€“ Wireframe of the navbar](img/Figure_8.04_B18221.jpg)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾8.4 â€“ Navbarçº¿æ¡†å›¾](img/Figure_8.04_B18221.jpg)'
- en: Figure 8.4 â€“ Wireframe of the navbar
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾8.4 â€“ Navbarçº¿æ¡†å›¾
- en: 'Letâ€™s add the component. Follow these steps to do so:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬æ·»åŠ è¿™ä¸ªç»„ä»¶ã€‚æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š
- en: 'Inside the `src/components/` directory, add a new file called `Navbar.jsx`.
    This file will contain the code for the `NavBar` component. Bootstrap already
    provides a `NavBar` component we can use. Letâ€™s start with the component definition
    and the necessary imports:'
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åœ¨`src/components/`ç›®å½•å†…ï¼Œæ·»åŠ ä¸€ä¸ªåä¸º`Navbar.jsx`çš„æ–°æ–‡ä»¶ã€‚æ­¤æ–‡ä»¶å°†åŒ…å«`NavBar`ç»„ä»¶çš„ä»£ç ã€‚Bootstrapå·²ç»æä¾›äº†ä¸€ä¸ªæˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„`NavBar`ç»„ä»¶ã€‚è®©æˆ‘ä»¬ä»ç»„ä»¶å®šä¹‰å’Œå¿…è¦çš„å¯¼å…¥å¼€å§‹ï¼š
- en: src/components/Navbar.jsx
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/Navbar.jsx
- en: '[PRE0]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'With the already written function, we can add the `NavBar` component and style
    it. `react-bootstrap` provides components that we can use to make the coding of
    our components faster. The props that the components require make the customization
    of these components easier:'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä½¿ç”¨å·²ç»ç¼–å†™çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ `NavBar`ç»„ä»¶å¹¶å¯¹å…¶è¿›è¡Œæ ·å¼åŒ–ã€‚`react-bootstrap`æä¾›äº†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„ç»„ä»¶ï¼Œå¯ä»¥ä½¿æˆ‘ä»¬ç»„ä»¶çš„ç¼–ç æ›´å¿«ã€‚ç»„ä»¶æ‰€éœ€çš„propsä½¿å¾—è¿™äº›ç»„ä»¶çš„å®šåˆ¶æ›´åŠ å®¹æ˜“ï¼š
- en: src/components/Navbar.jsx
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/Navbar.jsx
- en: '[PRE1]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Letâ€™s add the function that handles the logout:'
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬æ·»åŠ å¤„ç†ç™»å‡ºçš„å‡½æ•°ï¼š
- en: src/components/Navbar.jsx
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/Navbar.jsx
- en: '[PRE2]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: I will use a website that generates random avatars for the avatar. In the next
    chapter, weâ€™ll do a little exercise to add an upload profile picture feature,
    but the image generator will do the work for the moment.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘å°†ä½¿ç”¨ä¸€ä¸ªç”Ÿæˆéšæœºå¤´åƒçš„ç½‘ç«™ã€‚åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†è¿›è¡Œä¸€ä¸ªå°ç»ƒä¹ æ¥æ·»åŠ ä¸Šä¼ ä¸ªäººå¤´åƒçš„åŠŸèƒ½ï¼Œä½†æ­¤åˆ»å›¾åƒç”Ÿæˆå™¨å°†å®Œæˆè¿™é¡¹å·¥ä½œã€‚
- en: 'In the `src` directory, add a new file called `utils.js`. This file will contain
    functions that weâ€™ll reuse in the React application:'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åœ¨`src`ç›®å½•ä¸‹ï¼Œæ·»åŠ ä¸€ä¸ªåä¸º`utils.js`çš„æ–°æ–‡ä»¶ã€‚æ­¤æ–‡ä»¶å°†åŒ…å«æˆ‘ä»¬åœ¨Reactåº”ç”¨ç¨‹åºä¸­ä¼šé‡ç”¨çš„å‡½æ•°ï¼š
- en: src/utils.js
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: src/utils.js
- en: '[PRE3]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The `pravatar` service supports parameters in the URL and has over 60 images.
    We are using the Math library to generate a random number representing the imageâ€™s
    ID. We can now write the `Layout` component.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '`pravatar`æœåŠ¡æ”¯æŒURLä¸­çš„å‚æ•°ï¼Œå¹¶ä¸”æœ‰è¶…è¿‡60ä¸ªå›¾åƒã€‚æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨Mathåº“ç”Ÿæˆä¸€ä¸ªä»£è¡¨å›¾åƒIDçš„éšæœºæ•°ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥ç¼–å†™`Layout`ç»„ä»¶ã€‚'
- en: Adding the Layout component
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ·»åŠ Layoutç»„ä»¶
- en: A good React project has visual consistency but should also come with less repetition
    of code. For example, the navigation bar on this React project will be present
    on the home page but also on the profile page. When developing in HTML and CSS
    directly, we would have repeated the same piece of code for the navigation bar,
    but we can avoid the repetition using React by creating a `Layout` component.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªå¥½çš„Reacté¡¹ç›®åº”è¯¥å…·æœ‰è§†è§‰ä¸€è‡´æ€§ï¼Œä½†ä¹Ÿåº”è¯¥å‡å°‘ä»£ç çš„é‡å¤ã€‚ä¾‹å¦‚ï¼Œè¿™ä¸ªReacté¡¹ç›®çš„å¯¼èˆªæ å°†å‡ºç°åœ¨ä¸»é¡µä¸Šï¼Œä¹Ÿä¼šå‡ºç°åœ¨ä¸ªäººèµ„æ–™é¡µä¸Šã€‚å¦‚æœæˆ‘ä»¬ç›´æ¥åœ¨HTMLå’ŒCSSä¸­å¼€å‘ï¼Œæˆ‘ä»¬ä¼šé‡å¤ç›¸åŒçš„ä»£ç æ¥åˆ›å»ºå¯¼èˆªæ ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»º`Layout`ç»„ä»¶æ¥é¿å…é‡å¤ã€‚
- en: 'In the `src/components` directory, add a file called `Layout.jsx`. This file
    will contain the code for the `Layout` component:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨`src/components`ç›®å½•ä¸‹ï¼Œæ·»åŠ ä¸€ä¸ªåä¸º`Layout.jsx`çš„æ–‡ä»¶ã€‚æ­¤æ–‡ä»¶å°†åŒ…å«`Layout`ç»„ä»¶çš„ä»£ç ï¼š
- en: src/components/Layout.jsx
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/Layout.jsx
- en: '[PRE4]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'We have a new syntax here: `children`. In React, `children` is used for displaying
    whatever you include between the opening and closing tags when invoking a component.
    Hereâ€™s a simple example with an image component:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™é‡Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ–°çš„è¯­æ³•ï¼š`children`ã€‚åœ¨Reactä¸­ï¼Œ`children`ç”¨äºæ˜¾ç¤ºåœ¨è°ƒç”¨ç»„ä»¶æ—¶åœ¨æ‰“å¼€å’Œå…³é—­æ ‡ç­¾ä¹‹é—´åŒ…å«çš„å†…å®¹ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨å›¾åƒç»„ä»¶çš„ç®€å•ç¤ºä¾‹ï¼š
- en: '[PRE5]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The component can then be used, and we can add content or other components:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥ç»„ä»¶å¯ä»¥è¢«ä½¿ç”¨ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥æ·»åŠ å†…å®¹æˆ–å…¶ä»–ç»„ä»¶ï¼š
- en: '[PRE6]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Whenever the `Picture` component is invoked, `props.children` will also be displayed,
    which is just a reference to the componentâ€™s opening and closing tags. In our
    context, `props.children` will contain mostly the content of the pages of the
    React application.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯å½“è°ƒç”¨`Picture`ç»„ä»¶æ—¶ï¼Œ`props.children`ä¹Ÿä¼šæ˜¾ç¤ºï¼Œè¿™åªæ˜¯ä¸€ä¸ªå¯¹ç»„ä»¶æ‰“å¼€å’Œå…³é—­æ ‡ç­¾çš„å¼•ç”¨ã€‚åœ¨æˆ‘ä»¬çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œ`props.children`å°†åŒ…å«Reactåº”ç”¨ç¨‹åºé¡µé¢çš„å¤§éƒ¨åˆ†å†…å®¹ã€‚
- en: For example, on the home page, we have posts and profiles listed; these elements
    will be children of the `Layout` component. Without further ado, letâ€™s use the
    `Layout` component.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œåœ¨ä¸»é¡µä¸Šï¼Œæˆ‘ä»¬æœ‰å¸–å­å’Œä¸ªäººèµ„æ–™åˆ—è¡¨ï¼›è¿™äº›å…ƒç´ å°†æ˜¯`Layout`ç»„ä»¶çš„å­å…ƒç´ ã€‚ç°åœ¨å°±è®©æˆ‘ä»¬ä½¿ç”¨`Layout`ç»„ä»¶ã€‚
- en: Using the Layout component on the home page
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: åœ¨ä¸»é¡µä¸Šä½¿ç”¨Layoutç»„ä»¶
- en: 'Inside `Home.jsx`, weâ€™ll rewrite the code to use the `Layout` component. Hereâ€™s
    the new code:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨`Home.jsx`å†…éƒ¨ï¼Œæˆ‘ä»¬å°†é‡å†™ä»£ç ä»¥ä½¿ç”¨`Layout`ç»„ä»¶ã€‚ä»¥ä¸‹æ˜¯æ–°ä»£ç ï¼š
- en: src/pages/Home.jsx
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: src/pages/Home.jsx
- en: '[PRE7]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Great. Letâ€™s start by adding the input to create a new post, as shown in *Figure
    8**.2*.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: å¤ªå¥½äº†ã€‚è®©æˆ‘ä»¬é¦–å…ˆæ·»åŠ è¾“å…¥ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„å¸–å­ï¼Œå¦‚å›¾*å›¾8**.2*æ‰€ç¤ºã€‚
- en: Creating a post
  id: totrans-62
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: åˆ›å»ºå¸–å­
- en: 'To create and add posts, follow these steps:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: è¦åˆ›å»ºå’Œæ·»åŠ å¸–å­ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š
- en: In `src/components`, add a new directory called `posts`. This directory will
    contain all components used for the post feature. Weâ€™ll have components to create
    a post, display a post, and update a post.
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åœ¨ `src/components` ä¸­æ·»åŠ ä¸€ä¸ªåä¸º `posts` çš„æ–°ç›®å½•ã€‚æ­¤ç›®å½•å°†åŒ…å«ç”¨äºå¸–å­åŠŸèƒ½çš„æ‰€æœ‰ç»„ä»¶ã€‚æˆ‘ä»¬å°†æœ‰åˆ›å»ºå¸–å­ã€æ˜¾ç¤ºå¸–å­å’Œæ›´æ–°å¸–å­çš„ç»„ä»¶ã€‚
- en: Inside the newly created directory, add a file called `CreatePost.jsx`. This
    file will contain the code for the logic and the UI to make a post.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åœ¨æ–°åˆ›å»ºçš„ç›®å½•ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªåä¸º `CreatePost.jsx` çš„æ–‡ä»¶ã€‚æ­¤æ–‡ä»¶å°†åŒ…å«åˆ›å»ºå¸–å­æ‰€éœ€é€»è¾‘å’ŒUIçš„ä»£ç ã€‚
- en: 'What we have here is a UI component called `Modal`. `react-bootstrap` provides
    a modal-ready element that we can easily customize for our needs. Letâ€™s start
    by adding the needed imports and defining the component function:'
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¿™é‡Œæœ‰ä¸€ä¸ªåä¸º `Modal` çš„UIç»„ä»¶ã€‚`react-bootstrap` æä¾›äº†ä¸€ä¸ªä¸ºæ¨¡æ€å‡†å¤‡çš„å…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°æ ¹æ®æˆ‘ä»¬çš„éœ€æ±‚è¿›è¡Œå®šåˆ¶ã€‚è®©æˆ‘ä»¬é¦–å…ˆæ·»åŠ æ‰€éœ€çš„å¯¼å…¥å¹¶å®šä¹‰ç»„ä»¶å‡½æ•°ï¼š
- en: src/components/post/CreatePost.jsx
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/post/CreatePost.jsx
- en: '[PRE8]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The input for the post creation will be within the `Modal` component. As we
    did earlier, we will also add methods and state management for the form. But first,
    letâ€™s write the modal and the clickable input:'
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¸–å­åˆ›å»ºçš„è¾“å…¥å°†åœ¨ `Modal` ç»„ä»¶å†…ã€‚æ­£å¦‚æˆ‘ä»¬ä¹‹å‰æ‰€åšçš„é‚£æ ·ï¼Œæˆ‘ä»¬è¿˜å°†æ·»åŠ æ–¹æ³•å’ŒçŠ¶æ€ç®¡ç†ä»¥å¤„ç†è¡¨å•ã€‚ä½†é¦–å…ˆï¼Œè®©æˆ‘ä»¬ç¼–å†™æ¨¡æ€å’Œå¯ç‚¹å‡»çš„è¾“å…¥ï¼š
- en: src/components/post/CreatePost.jsx
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/post/CreatePost.jsx
- en: '[PRE9]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'We are first adding the input that will trigger the Modal to be displayed.
    A click on the modal will set the `show` state to `True`, the state that is used
    for opening the modal. Letâ€™s add the code for the modal:'
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬é¦–å…ˆæ·»åŠ å°†è§¦å‘æ¨¡æ€æ˜¾ç¤ºçš„è¾“å…¥ã€‚ç‚¹å‡»æ¨¡æ€å°† `show` çŠ¶æ€è®¾ç½®ä¸º `True`ï¼Œè¿™æ˜¯ç”¨äºæ‰“å¼€æ¨¡æ€çš„çŠ¶æ€ã€‚è®©æˆ‘ä»¬æ·»åŠ æ¨¡æ€çš„ä»£ç ï¼š
- en: src/components/post/CreatePost.jsx
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/post/CreatePost.jsx
- en: '[PRE10]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The UI for the modal is created. We need now to add the `handleSubmit` function
    and the other logic for the form handling:'
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æ¨¡æ€çš„UIå·²åˆ›å»ºã€‚æˆ‘ä»¬ç°åœ¨éœ€è¦æ·»åŠ  `handleSubmit` å‡½æ•°å’Œå…¶ä»–è¡¨å•å¤„ç†é€»è¾‘ï¼š
- en: src/components/post/CreatePost.jsx
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/post/CreatePost.jsx
- en: '[PRE11]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '![Figure 8.5 â€“ Create Post component](img/Figure_8.05_B18221.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾8.5 â€“ åˆ›å»ºå¸–å­ç»„ä»¶](img/Figure_8.05_B18221.jpg)'
- en: Figure 8.5 â€“ Create Post component
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾8.5 â€“ åˆ›å»ºå¸–å­ç»„ä»¶
- en: 'We are nearly done, but we need an essential feature for every action, such
    as form handling. We need to send feedback to the user to tell them whether their
    request has passed. In our context, when a user creates a post, weâ€™ll show a success
    toast or an error toast:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å‡ ä¹å®Œæˆäº†ï¼Œä½†æˆ‘ä»¬éœ€è¦æ¯ä¸ªåŠ¨ä½œçš„ä¸€ä¸ªåŸºæœ¬åŠŸèƒ½ï¼Œä¾‹å¦‚è¡¨å•å¤„ç†ã€‚æˆ‘ä»¬éœ€è¦å‘ç”¨æˆ·å‘é€åé¦ˆï¼Œå‘Šè¯‰ä»–ä»¬ä»–ä»¬çš„è¯·æ±‚æ˜¯å¦æˆåŠŸã€‚åœ¨æˆ‘ä»¬çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå½“ç”¨æˆ·åˆ›å»ºå¸–å­æ—¶ï¼Œæˆ‘ä»¬å°†æ˜¾ç¤ºæˆåŠŸåå¸æˆ–é”™è¯¯åå¸ï¼š
- en: '![Figure 8.6 â€“ A successful toast](img/Figure_8.06_B18221.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾8.6 â€“ æˆåŠŸçš„åå¸](img/Figure_8.06_B18221.jpg)'
- en: Figure 8.6 â€“ A successful toast
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾8.6 â€“ æˆåŠŸçš„åå¸
- en: The toast will be reused for post deletion and also updating. It will also be
    used for comment creation, modification, and deletion, as well as the profile
    modification that we will add later. We will add the `Toast` component in the
    next section.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: åå¸å°†è¢«ç”¨äºå¸–å­åˆ é™¤å’Œæ›´æ–°ã€‚å®ƒè¿˜å°†ç”¨äºè¯„è®ºåˆ›å»ºã€ä¿®æ”¹å’Œåˆ é™¤ï¼Œä»¥åŠæˆ‘ä»¬ç¨åå°†è¦æ·»åŠ çš„é…ç½®æ–‡ä»¶ä¿®æ”¹ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­æ·»åŠ  `Toast` ç»„ä»¶ã€‚
- en: Adding the Toast component
  id: totrans-84
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ·»åŠ åå¸ç»„ä»¶
- en: Letâ€™s quickly create a component called `Toaster` that we will use show toast
    in the React application.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å¿«é€Ÿåˆ›å»ºä¸€ä¸ªåä¸º `Toaster` çš„ç»„ä»¶ï¼Œæˆ‘ä»¬å°†åœ¨Reactåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å®ƒæ¥æ˜¾ç¤ºåå¸ã€‚
- en: 'In `src/components`, create a new file called `Toaster.jsx`. This file will
    contain the code for the `Toaster` component:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ `src/components` ä¸­åˆ›å»ºä¸€ä¸ªåä¸º `Toaster.jsx` çš„æ–°æ–‡ä»¶ã€‚æ­¤æ–‡ä»¶å°†åŒ…å« `Toaster` ç»„ä»¶çš„ä»£ç ï¼š
- en: src/components/Toaster.jsx
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/Toaster.jsx
- en: '[PRE12]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The `Toaster` component takes some props:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '`Toaster` ç»„ä»¶æ¥å—ä¸€äº›å±æ€§ï¼š'
- en: '`showToast`: The Boolean that is used to show the toast or not. Ideally, depending
    on the output we receive from a request on the server, weâ€™ll set the state to
    `true`, which will show the toast.'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`showToast`: ç”¨äºæ˜¾ç¤ºåå¸æˆ–éšè—çš„å¸ƒå°”å€¼ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæ ¹æ®æˆ‘ä»¬ä»æœåŠ¡å™¨è¯·æ±‚ä¸­æ”¶åˆ°çš„è¾“å‡ºï¼Œæˆ‘ä»¬å°†çŠ¶æ€è®¾ç½®ä¸º `true`ï¼Œè¿™å°†æ˜¾ç¤ºåå¸ã€‚'
- en: '`title`: This represents the title of the toast.'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`title`: è¿™è¡¨ç¤ºåå¸çš„æ ‡é¢˜ã€‚'
- en: '`message`: This conveys the message weâ€™ll be showing in the toast.'
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`message`: è¿™ä¼ è¾¾äº†æˆ‘ä»¬å°†è¦åœ¨åå¸ä¸­æ˜¾ç¤ºçš„æ¶ˆæ¯ã€‚'
- en: '`onClose`: The function that handles the closing of the toast. This function
    is essential; otherwise, the toast will never disappear.'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`onClose`: å¤„ç†åå¸å…³é—­åŠŸèƒ½çš„å‡½æ•°ã€‚æ­¤å‡½æ•°æ˜¯å¿…éœ€çš„ï¼›å¦åˆ™ï¼Œåå¸å°†æ°¸è¿œä¸ä¼šæ¶ˆå¤±ã€‚'
- en: '`type`: This represents the type of toast to show. In our context, weâ€™ll either
    use `success` or `danger`.'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`type`: è¿™è¡¨ç¤ºè¦æ˜¾ç¤ºçš„åå¸ç±»å‹ã€‚åœ¨æˆ‘ä»¬çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ `success` æˆ– `danger`ã€‚'
- en: Letâ€™s import this component in `CreatePost.jsx` and use it.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬åœ¨ `CreatePost.jsx` ä¸­å¯¼å…¥æ­¤ç»„ä»¶å¹¶ä½¿ç”¨å®ƒã€‚
- en: Adding toaster to post creation
  id: totrans-96
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: åœ¨åˆ›å»ºå¸–å­æ—¶æ·»åŠ åå¸
- en: 'In the `CreatePost.jsx` file, we will add new states that we will pass as props
    to the `Toaster` component:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨`CreatePost.jsx`æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å°†æ·»åŠ æ–°çš„çŠ¶æ€ï¼Œå¹¶å°†è¿™äº›çŠ¶æ€ä½œä¸ºpropsä¼ é€’ç»™`Toaster`ç»„ä»¶ï¼š
- en: src/components/post/CreatePost.jsx
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/post/CreatePost.jsx
- en: '[PRE13]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'We can import the `Toaster` component and pass the newly added states as props:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥å¯¼å…¥`Toaster`ç»„ä»¶ï¼Œå¹¶å°†æ–°æ·»åŠ çš„çŠ¶æ€ä½œä¸ºpropsä¼ é€’ï¼š
- en: src/components/post/CreatePost.jsx
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/post/CreatePost.jsx
- en: '[PRE14]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: And we are done writing the `CreatePost` component. For the next step, we need
    to integrate it into the home page.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å·²ç»å®Œæˆäº†`CreatePost`ç»„ä»¶çš„ç¼–å†™ã€‚å¯¹äºä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶é›†æˆåˆ°ä¸»é¡µä¸Šã€‚
- en: Adding the CreatePost component to the home page
  id: totrans-104
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å°†CreatePostç»„ä»¶æ·»åŠ åˆ°ä¸»é¡µ
- en: The `CreatePost` component is ready now, and we can use it. First, import it
    into the `Home.jsx` file and modify the UI.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '`CreatePost`ç»„ä»¶ç°åœ¨å·²å‡†å¤‡å¥½ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒã€‚é¦–å…ˆï¼Œå°†å…¶å¯¼å…¥åˆ°`Home.jsx`æ–‡ä»¶ä¸­ï¼Œå¹¶ä¿®æ”¹UIã€‚'
- en: 'The home page will have two parts:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸»é¡µå°†åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š
- en: The first part will contain the list of posts (**1** in *Figure 8**.7*)
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€éƒ¨åˆ†å°†åŒ…å«å¸–å­åˆ—è¡¨ï¼ˆ**1**è§*å›¾8**.7*ï¼‰
- en: The second part will include a list of five profiles (**2** in *Figure 8**.7*)
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¬¬äºŒéƒ¨åˆ†å°†åŒ…æ‹¬äº”ä¸ªé…ç½®æ–‡ä»¶åˆ—è¡¨ï¼ˆ**2**è§*å›¾8**.7*ï¼‰
- en: '![Figure 8.7 â€“ Structure of the home page](img/Figure_8.07_B18221.jpg)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾8.7 â€“ ä¸»é¡µç»“æ„](img/Figure_8.07_B18221.jpg)'
- en: Figure 8.7 â€“ Structure of the home page
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾8.7 â€“ ä¸»é¡µç»“æ„
- en: 'We can achieve the result quickly by using rows and columns components provided
    by `react-bootstrap`. We wonâ€™t focus on the second part (listing the profiles)
    for the moment. Letâ€™s ensure we have all **CRUD** operations for the post feature:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨`react-bootstrap`æä¾›çš„è¡Œå’Œåˆ—ç»„ä»¶å¿«é€Ÿå®ç°ç»“æœã€‚ç›®å‰æˆ‘ä»¬ä¸ä¼šå…³æ³¨ç¬¬äºŒéƒ¨åˆ†ï¼ˆåˆ—å‡ºé…ç½®æ–‡ä»¶ï¼‰ã€‚è®©æˆ‘ä»¬ç¡®ä¿æˆ‘ä»¬ä¸ºå¸–å­åŠŸèƒ½æœ‰æ‰€æœ‰**CRUD**æ“ä½œï¼š
- en: 'Inside the `Home.jsx` file, add the following content. Weâ€™ll start by importing
    and adding the rows:'
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åœ¨`Home.jsx`æ–‡ä»¶å†…éƒ¨ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚æˆ‘ä»¬å°†é¦–å…ˆå¯¼å…¥å¹¶æ·»åŠ è¡Œï¼š
- en: src/pages/Home.jsx
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: src/pages/Home.jsx
- en: '[PRE15]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Great! Make sure to save the changes, start the server, and go to the home
    page. Youâ€™ll have something similar to this:'
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¤ªå¥½äº†ï¼ç¡®ä¿ä¿å­˜æ›´æ”¹ï¼Œå¯åŠ¨æœåŠ¡å™¨ï¼Œç„¶åè½¬åˆ°ä¸»é¡µã€‚ä½ å°†çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹å†…å®¹ï¼š
- en: '![Figure 8.8 â€“ Create Post UI](img/Figure_8.08_B18221.jpg)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾8.8 â€“ åˆ›å»ºå¸–å­UI](img/Figure_8.08_B18221.jpg)'
- en: Figure 8.8 â€“ Create Post UI
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾8.8 â€“ åˆ›å»ºå¸–å­UI
- en: 'Click on the input, and a modal will show up. Type anything you want in the
    input and submit it. The modal will close, and youâ€™ll have a toast appearing at
    the top center of the page:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç‚¹å‡»è¾“å…¥æ¡†ï¼Œå°†å¼¹å‡ºä¸€ä¸ªæ¨¡æ€æ¡†ã€‚åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ä»»ä½•å†…å®¹å¹¶æäº¤ã€‚æ¨¡æ€æ¡†å°†å…³é—­ï¼Œä½ å°†åœ¨é¡µé¢é¡¶éƒ¨ä¸­å¤®çœ‹åˆ°ä¸€ä¸ªæç¤ºï¼š
- en: '![Figure 8.9 â€“ Toast after successful post creation](img/Figure_8.09_B18221.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾8.9 â€“ æˆåŠŸåˆ›å»ºå¸–å­åçš„æç¤º](img/Figure_8.09_B18221.jpg)'
- en: Figure 8.9 â€“ Toast after successful post creation
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾8.9 â€“ æˆåŠŸåˆ›å»ºå¸–å­åçš„æç¤º
- en: Great! We can now create posts using our React application. To make it possible,
    we have created a `Modal` component and a form with React Bootstrap to handle
    data validation and submission. And because feedback is an important aspect of
    user experience, we have added a toaster with React Bootstrap and integrated it
    with the `useContext` Hook to notify the user of the result of the requests.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: å¤ªå¥½äº†ï¼æˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨æˆ‘ä»¬çš„Reactåº”ç”¨ç¨‹åºåˆ›å»ºå¸–å­ã€‚ä¸ºäº†ä½¿å…¶æˆä¸ºå¯èƒ½ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª`Modal`ç»„ä»¶å’Œä¸€ä¸ªå¸¦æœ‰React Bootstrapçš„è¡¨å•æ¥å¤„ç†æ•°æ®éªŒè¯å’Œæäº¤ã€‚å¹¶ä¸”å› ä¸ºåé¦ˆæ˜¯ç”¨æˆ·ä½“éªŒçš„é‡è¦æ–¹é¢ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªä½¿ç”¨React
    Bootstrapçš„toasterï¼Œå¹¶å°†å…¶ä¸`useContext`é’©å­é›†æˆï¼Œä»¥é€šçŸ¥ç”¨æˆ·è¯·æ±‚çš„ç»“æœã€‚
- en: The next step is to list all the posts and add actions such as deletion and
    modification.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸‹ä¸€æ­¥æ˜¯åˆ—å‡ºæ‰€æœ‰å¸–å­å¹¶æ·»åŠ å¦‚åˆ é™¤å’Œä¿®æ”¹ç­‰æ“ä½œã€‚
- en: Listing posts on the home page
  id: totrans-123
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åœ¨ä¸»é¡µä¸Šåˆ—å‡ºå¸–å­
- en: Now that users can create posts, we need to list the posts on the home page
    but also allow the user to access them. This will require the creation of a component
    to display information about a post. As shown in *Figure 8**.1*, under the **Write
    a post** input, we have a list of posts. The home page structure is already added,
    so we need to add a component that will handle the logic behind showing information
    about a post.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ç”¨æˆ·å¯ä»¥åˆ›å»ºå¸–å­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸»é¡µä¸Šåˆ—å‡ºå¸–å­ï¼ŒåŒæ—¶ä¹Ÿå…è®¸ç”¨æˆ·è®¿é—®å®ƒä»¬ã€‚è¿™éœ€è¦åˆ›å»ºä¸€ä¸ªç»„ä»¶æ¥æ˜¾ç¤ºå¸–å­çš„ä¿¡æ¯ã€‚å¦‚å›¾*å›¾8**.1*æ‰€ç¤ºï¼Œåœ¨**å†™å¸–å­**è¾“å…¥æ¡†ä¸‹æ–¹ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¸–å­åˆ—è¡¨ã€‚ä¸»é¡µç»“æ„å·²ç»æ·»åŠ ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªç»„ä»¶æ¥å¤„ç†æ˜¾ç¤ºå¸–å­ä¿¡æ¯èƒŒåçš„é€»è¾‘ã€‚
- en: 'Hereâ€™s the flow to list the posts on the home page:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯åˆ—å‡ºä¸»é¡µä¸Šå¸–å­çš„æµç¨‹ï¼š
- en: We use the `swr` library to fetch a list of posts
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä½¿ç”¨`swr`åº“è·å–å¸–å­åˆ—è¡¨
- en: We loop through the list of posts and then pass a post as props to a component
    called `Post`, which will show data about a post
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬éå†å¸–å­åˆ—è¡¨ï¼Œç„¶åå°†å¸–å­ä½œä¸ºpropsä¼ é€’ç»™ä¸€ä¸ªåä¸º`Post`çš„ç»„ä»¶ï¼Œè¯¥ç»„ä»¶å°†æ˜¾ç¤ºå¸–å­çš„æ•°æ®
- en: Before starting to fetch data, letâ€™s create the `Post` component.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å¼€å§‹è·å–æ•°æ®ä¹‹å‰ï¼Œè®©æˆ‘ä»¬åˆ›å»º`Post`ç»„ä»¶ã€‚
- en: Writing the Post component
  id: totrans-129
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç¼–å†™å¸–å­ç»„ä»¶
- en: 'To create a `Post` component, follow these steps:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: è¦åˆ›å»ºä¸€ä¸ª`Post`ç»„ä»¶ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š
- en: 'Inside the `src/components/post/` directory, create a new file called `Post.jsx`.
    This file will contain the logic to show post data and logic such as like or remove
    like, deletion, and modification. Hereâ€™s a wireframe of the `Post` component:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åœ¨`src/components/post/`ç›®å½•å†…ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º`Post.jsx`çš„æ–°æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å°†åŒ…å«æ˜¾ç¤ºå¸–å­æ•°æ®å’Œå¦‚ç‚¹èµæˆ–å–æ¶ˆç‚¹èµã€åˆ é™¤å’Œä¿®æ”¹ç­‰é€»è¾‘ã€‚ä»¥ä¸‹æ˜¯`Post`ç»„ä»¶çš„çº¿æ¡†å›¾ï¼š
- en: '![Figure 8.10 â€“ Post component](img/Figure_8.10_B18221.jpg)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾8.10 â€“ å¸–å­ç»„ä»¶](img/Figure_8.10_B18221.jpg)'
- en: Figure 8.10 â€“ Post component
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾8.10 â€“ å¸–å­ç»„ä»¶
- en: 'To make things faster, we will work with the `Card` component provided by `react-bootstrap`.
    The `Card` component comes with a structure containing a title, body, and footer:'
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¸ºäº†ä½¿äº‹æƒ…æ›´å¿«ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨`react-bootstrap`æä¾›çš„`Card`ç»„ä»¶ã€‚`Card`ç»„ä»¶åŒ…å«ä¸€ä¸ªåŒ…å«æ ‡é¢˜ã€æ­£æ–‡å’Œé¡µè„šçš„ç»“æ„ï¼š
- en: src/components/post/Post.jsx
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/post/Post.jsx
- en: '[PRE16]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'The `Post` component accepts two props:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: '`Post`ç»„ä»¶æ¥å—ä¸¤ä¸ªå±æ€§ï¼š'
- en: The `post` object containing data about a post.
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åŒ…å«å¸–å­æ•°æ®çš„`post`å¯¹è±¡ã€‚
- en: The `refresh` function. This function will come from the SWR `posts` object,
    and SWR returns an object with a `mutate` method that can be used to trigger the
    fetching of data.
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`refresh`å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°å°†æ¥è‡ªSWRçš„`posts`å¯¹è±¡ï¼ŒSWRè¿”å›ä¸€ä¸ªåŒ…å«`mutate`æ–¹æ³•çš„å¯¹è±¡ï¼Œå¯ä»¥ç”¨æ¥è§¦å‘æ•°æ®çš„è·å–ã€‚'
- en: 'We also profited from adding the `handleLikeClick` function. Two actions can
    be passed to the function: either `like` or `remove_like`. If the request succeeds,
    we can refresh the posts. Great! Letâ€™s start by adding the `Card` body. Itâ€™ll
    contain the avatar of the author of the post, the name, and the time elapsed since
    the creation of the post:'
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¿˜ä»æ·»åŠ `handleLikeClick`å‡½æ•°ä¸­å—ç›Šã€‚å¯ä»¥å°†ä¸¤ä¸ªæ“ä½œä¼ é€’ç»™è¯¥å‡½æ•°ï¼šè¦ä¹ˆæ˜¯`like`ï¼Œè¦ä¹ˆæ˜¯`remove_like`ã€‚å¦‚æœè¯·æ±‚æˆåŠŸï¼Œæˆ‘ä»¬å¯ä»¥åˆ·æ–°å¸–å­ã€‚å¤ªå¥½äº†ï¼è®©æˆ‘ä»¬å…ˆæ·»åŠ `Card`çš„æ­£æ–‡ã€‚å®ƒå°†åŒ…å«å¸–å­çš„ä½œè€…å¤´åƒã€å§“åå’Œå¸–å­åˆ›å»ºä»¥æ¥çš„æ—¶é—´ï¼š
- en: src/components/post/Post.jsx
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/post/Post.jsx
- en: '[PRE17]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Go ahead and add the body of the post and the likes count:'
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç»§ç»­æ·»åŠ å¸–å­çš„æ­£æ–‡å’Œç‚¹èµæ•°ï¼š
- en: src/components/post/Post.jsx
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/post/Post.jsx
- en: '[PRE18]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'We can now move to the `Card` footer containing the like and comment UI. Letâ€™s
    start by adding the **Like** icon followed by text:'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç°åœ¨å¯ä»¥ç§»åŠ¨åˆ°åŒ…å«ç‚¹èµå’Œè¯„è®ºUIçš„`Card`é¡µè„šã€‚è®©æˆ‘ä»¬å…ˆæ·»åŠ **ç‚¹èµ**å›¾æ ‡ï¼Œç„¶åæ˜¯æ–‡æœ¬ï¼š
- en: src/components/post/Post.jsx
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/post/Post.jsx
- en: '[PRE19]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Now go ahead and add the **Comment** icon followed by the text:'
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç°åœ¨ç»§ç»­æ·»åŠ **è¯„è®º**å›¾æ ‡ï¼Œç„¶åæ˜¯æ–‡æœ¬ï¼š
- en: src/components/post/Post.jsx
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/post/Post.jsx
- en: '[PRE20]'
  id: totrans-151
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: The `Post` component is entirely written; we can use it on the home page now.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: '`Post`ç»„ä»¶å·²ç»å®Œå…¨ç¼–å†™å®Œæˆï¼›æˆ‘ä»¬ç°åœ¨å¯ä»¥åœ¨ä¸»é¡µä¸Šä½¿ç”¨å®ƒäº†ã€‚'
- en: Adding the Post component to the home page
  id: totrans-153
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å°†`Post`ç»„ä»¶æ·»åŠ åˆ°ä¸»é¡µ
- en: Letâ€™s now add our `Post` component to the home page.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å°†æŠŠæˆ‘ä»¬çš„`Post`ç»„ä»¶æ·»åŠ åˆ°ä¸»é¡µä¸Šã€‚
- en: 'In the `Home.jsx` file, import the `Post` component:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨`Home.jsx`æ–‡ä»¶ä¸­ï¼Œå¯¼å…¥`Post`ç»„ä»¶ï¼š
- en: src/pages/Home.jsx
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: src/pages/Home.jsx
- en: '[PRE21]'
  id: totrans-157
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'We can now use the components in the code by first fetching posts from the
    server:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç°åœ¨å¯ä»¥é€šè¿‡é¦–å…ˆä»æœåŠ¡å™¨è·å–å¸–å­æ¥åœ¨ä»£ç ä¸­ä½¿ç”¨è¿™äº›ç»„ä»¶ï¼š
- en: src/pages/Home.jsx
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: src/pages/Home.jsx
- en: '[PRE22]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'The `useSWR` Hook can accept some parameters, such as `refreshInterval`. Here,
    the returned data is refreshed every 10 seconds. We can now use these objects
    in the UI:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: '`useSWR`é’©å­å¯ä»¥æ¥å—ä¸€äº›å‚æ•°ï¼Œä¾‹å¦‚`refreshInterval`ã€‚åœ¨è¿™é‡Œï¼Œè¿”å›çš„æ•°æ®æ¯10ç§’åˆ·æ–°ä¸€æ¬¡ã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥åœ¨UIä¸­ä½¿ç”¨è¿™äº›å¯¹è±¡ï¼š'
- en: src/pages/Home.jsx
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: src/pages/Home.jsx
- en: '[PRE23]'
  id: totrans-163
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Great! After adding the `Post` component to the home page, you should have
    a similar result to this:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: å¤ªå¥½äº†ï¼åœ¨ä¸»é¡µä¸Šæ·»åŠ äº†`Post`ç»„ä»¶åï¼Œä½ åº”è¯¥ä¼šæœ‰ç±»ä¼¼è¿™æ ·çš„ç»“æœï¼š
- en: '![Figure 8.11 â€“ List of posts](img/Figure_8.11_B18221.jpg)'
  id: totrans-165
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾8.11 â€“ å¸–å­åˆ—è¡¨](img/Figure_8.11_B18221.jpg)'
- en: Figure 8.11 â€“ List of posts
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾8.11 â€“ å¸–å­åˆ—è¡¨
- en: 'You can click on the `Post` component has a **More** dropdown in the top-right
    corner:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥ç‚¹å‡»å³ä¸Šè§’çš„`Post`ç»„ä»¶çš„**æ›´å¤š**ä¸‹æ‹‰èœå•ï¼š
- en: '![Figure 8.12 â€“ Adding the more dropdown](img/Figure_8.12_B18221.jpg)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾8.12 â€“ æ·»åŠ æ›´å¤šä¸‹æ‹‰èœå•](img/Figure_8.12_B18221.jpg)'
- en: Figure 8.12 â€“ Adding the more dropdown
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾8.12 â€“ æ·»åŠ æ›´å¤šä¸‹æ‹‰èœå•
- en: '`react-bootstrap` provides a `Dropdown` component we can use to achieve the
    same result. In the `Post.jsx` file, import the `Dropdown` component from `react-bootstrap`.
    As we will add the logic for post deletion, letâ€™s also import the `Toaster` component:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: '`react-bootstrap`æä¾›äº†ä¸€ä¸ªæˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„`Dropdown`ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒè¾¾åˆ°ç›¸åŒçš„æ•ˆæœã€‚åœ¨`Post.jsx`æ–‡ä»¶ä¸­ï¼Œä»`react-bootstrap`å¯¼å…¥`Dropdown`ç»„ä»¶ã€‚ç”±äºæˆ‘ä»¬å°†æ·»åŠ å¸–å­åˆ é™¤çš„é€»è¾‘ï¼Œè®©æˆ‘ä»¬ä¹Ÿå¯¼å…¥`Toaster`ç»„ä»¶ï¼š'
- en: src/components/post/Post.jsx
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/post/Post.jsx
- en: '[PRE24]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'We then have to write the component we will pass to the `Dropdown` component
    as the title:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åæˆ‘ä»¬å¿…é¡»ç¼–å†™æˆ‘ä»¬å°†ä¼ é€’ç»™`Dropdown`ç»„ä»¶ä½œä¸ºæ ‡é¢˜çš„ç»„ä»¶ï¼š
- en: src/components/post/Post.jsx
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/post/Post.jsx
- en: '[PRE25]'
  id: totrans-175
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'We can now add the `Dropdown` component to the UI. We need to make it conditional
    so that only the author of the post can access these options. We will just retrieve
    the user from `localStorage` and compare `user.id` to `author.id`:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç°åœ¨å¯ä»¥å°†`Dropdown`ç»„ä»¶æ·»åŠ åˆ°UIä¸­ã€‚æˆ‘ä»¬éœ€è¦ä½¿å…¶æœ‰æ¡ä»¶ï¼Œä»¥ä¾¿åªæœ‰å¸–å­çš„ä½œè€…å¯ä»¥è®¿é—®è¿™äº›é€‰é¡¹ã€‚æˆ‘ä»¬åªéœ€ä»`localStorage`æ£€ç´¢ç”¨æˆ·ï¼Œå¹¶å°†`user.id`ä¸`author.id`è¿›è¡Œæ¯”è¾ƒï¼š
- en: src/components/post/Post.jsx
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/post/Post.jsx
- en: '[PRE26]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'Letâ€™s add the component UI and the `Toaster` component:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬æ·»åŠ ç»„ä»¶UIå’Œ`Toaster`ç»„ä»¶ï¼š
- en: src/components/post/Post.jsx
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/post/Post.jsx
- en: '[PRE27]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'The `Dropdown` component is also added to the toaster. Each time a post is
    deleted, a red toaster will pop up at the top center of the page:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: '`Dropdown`ç»„ä»¶ä¹Ÿè¢«æ·»åŠ åˆ°æç¤ºå™¨ä¸­ã€‚æ¯æ¬¡åˆ é™¤å¸–å­æ—¶ï¼Œé¡µé¢ä¸Šæ–¹ä¸­å¤®éƒ½ä¼šå¼¹å‡ºä¸€ä¸ªçº¢è‰²çš„æç¤ºå™¨ï¼š'
- en: '![Figure 8.13 â€“ Deleting a post](img/Figure_8.13_B18221.jpg)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾8.13 â€“ åˆ é™¤å¸–å­](img/Figure_8.13_B18221.jpg)'
- en: Figure 8.13 â€“ Deleting a post
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾8.13 â€“ åˆ é™¤å¸–å­
- en: The user can now delete their own post and the functionality is accessible directly
    from the `Post` component. We have explored how to use the `UseContex` Hook again
    and also how to create a dropdown using `react-bootstrap`.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: ç”¨æˆ·ç°åœ¨å¯ä»¥åˆ é™¤è‡ªå·±çš„å¸–å­ï¼Œå¹¶ä¸”è¿™ä¸ªåŠŸèƒ½å¯ä»¥ç›´æ¥ä»`Post`ç»„ä»¶ä¸­è®¿é—®ã€‚æˆ‘ä»¬å·²ç»æ¢è®¨äº†å¦‚ä½•å†æ¬¡ä½¿ç”¨`UseContex`é’©å­ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨`react-bootstrap`åˆ›å»ºä¸‹æ‹‰èœå•ã€‚
- en: The **CRUD** operations on the post feature are nearly done and only the update
    feature remains. Itâ€™s easy, and you will implement it as a small exercise, but
    Iâ€™ll add the necessary code and instructions to follow.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: å¸–å­åŠŸèƒ½çš„**CRUD**æ“ä½œå‡ ä¹å®Œæˆï¼Œåªå‰©ä¸‹æ›´æ–°åŠŸèƒ½ã€‚è¿™å¾ˆç®€å•ï¼Œä½ å°†ä½œä¸ºä¸€ä¸ªå°ç»ƒä¹ æ¥å®ç°å®ƒï¼Œä½†æˆ‘å°†æ·»åŠ å¿…è¦çš„ä»£ç å’Œè¯´æ˜ã€‚
- en: Updating a post
  id: totrans-187
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ›´æ–°å¸–å­
- en: 'As mentioned earlier, the implementation of this feature is a simple exercise.
    Hereâ€™s the flow the user will typically follow when modifying a post:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚å‰æ‰€è¿°ï¼Œè¿™ä¸ªåŠŸèƒ½çš„å®ç°æ˜¯ä¸€ä¸ªç®€å•çš„ç»ƒä¹ ã€‚ä»¥ä¸‹æ˜¯ç”¨æˆ·åœ¨ä¿®æ”¹å¸–å­æ—¶é€šå¸¸ä¼šéµå¾ªçš„æµç¨‹ï¼š
- en: Click on the **More** dropdown menu.
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç‚¹å‡»**æ›´å¤š**ä¸‹æ‹‰èœå•ã€‚
- en: Select the **Modify** option.
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: é€‰æ‹©**ä¿®æ”¹**é€‰é¡¹ã€‚
- en: A modal is shown with the body of the post, and the user can modify it.
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å°†æ˜¾ç¤ºä¸€ä¸ªåŒ…å«å¸–å­å†…å®¹çš„æ¨¡æ€æ¡†ï¼Œç”¨æˆ·å¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚
- en: Once itâ€™s done, the user saves, and the modal is closed.
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å®Œæˆåï¼Œç”¨æˆ·ä¿å­˜ï¼Œæ¨¡æ€æ¡†å…³é—­ã€‚
- en: A toast will pop up with the content **Post** **updated** **ğŸš€**.
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å°†å¼¹å‡ºä¸€ä¸ªåŒ…å«**å¸–å­** **æ›´æ–°** **ğŸš€**å†…å®¹çš„æç¤ºæ¡†ã€‚
- en: 'The feature is similar to `CreatePost.jsx`; the difference is that the `UpdatePost`
    component will receive a `post` object as props. Hereâ€™s the skeleton of the code:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªåŠŸèƒ½ä¸`CreatePost.jsx`ç±»ä¼¼ï¼›åŒºåˆ«åœ¨äº`UpdatePost`ç»„ä»¶å°†æ¥æ”¶ä¸€ä¸ª`post`å¯¹è±¡ä½œä¸ºå±æ€§ã€‚ä»¥ä¸‹æ˜¯ä»£ç çš„æ¡†æ¶ï¼š
- en: src/components/post/UpdatePost.jsx
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/post/UpdatePost.jsx
- en: '[PRE28]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'The component is called in the `Post.jsx` file and used like this:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥ç»„ä»¶åœ¨`Post.jsx`æ–‡ä»¶ä¸­è¢«è°ƒç”¨ï¼Œå¹¶åƒè¿™æ ·ä½¿ç”¨ï¼š
- en: src/components/post/Post.jsx
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/post/Post.jsx
- en: '[PRE29]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: Good luck with the exercise. You can find the solution at [https://github.com/PacktPublishing/Full-stack-Django-and-React/blob/main/social-media-react/src/components/posts/UpdatePost.jsx](https://github.com/PacktPublishing/Full-stack-Django-and-React/blob/main/social-media-react/src/components/posts/UpdatePost.jsx).
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: ç¥ä½ ç»ƒä¹ é¡ºåˆ©ã€‚ä½ å¯ä»¥åœ¨[https://github.com/PacktPublishing/Full-stack-Django-and-React/blob/main/social-media-react/src/components/posts/UpdatePost.jsx](https://github.com/PacktPublishing/Full-stack-Django-and-React/blob/main/social-media-react/src/components/posts/UpdatePost.jsx)æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚
- en: Minor refactoring
  id: totrans-201
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å°å‹é‡æ„
- en: 'Firstly, there is no refresh made when a new post is created. As we did for
    the `UpdatePost.jsx` component, we can also pass some props to the `CreatePost`
    component:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œåˆ›å»ºæ–°å¸–å­æ—¶ä¸ä¼šè¿›è¡Œåˆ·æ–°ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨`UpdatePost.jsx`ç»„ä»¶ä¸­æ‰€åšçš„é‚£æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å‘`CreatePost`ç»„ä»¶ä¼ é€’ä¸€äº›å±æ€§ï¼š
- en: src/pages/Home.jsx
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: src/pages/Home.jsx
- en: '[PRE30]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: And, we can call the `refresh` method when a post is successfully created:.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œå½“å¸–å­æˆåŠŸåˆ›å»ºæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨`refresh`æ–¹æ³•ï¼š
- en: src/components/posts/CreatePost.jsx
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/posts/CreatePost.jsx
- en: '[PRE31]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: Now, every time a user adds a post, he will see the newly created post on the
    Home page without the need of reloading the page.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œæ¯æ¬¡ç”¨æˆ·æ·»åŠ å¸–å­æ—¶ï¼Œä»–éƒ½ä¼šåœ¨ä¸»é¡µä¸Šçœ‹åˆ°æ–°åˆ›å»ºçš„å¸–å­ï¼Œè€Œæ— éœ€é‡æ–°åŠ è½½é¡µé¢ã€‚
- en: Secondly, the `Toaster` component is created but we need to think about how
    to call the component in the project. Letâ€™s not forget that this component is
    created to return feedback to the user about a successful or failed request, thus
    the component should be reusable in the whole project, which is what we've actually
    done, right?
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: å…¶æ¬¡ï¼Œ`Toaster`ç»„ä»¶å·²åˆ›å»ºï¼Œä½†æˆ‘ä»¬éœ€è¦è€ƒè™‘å¦‚ä½•åœ¨é¡¹ç›®ä¸­è°ƒç”¨è¯¥ç»„ä»¶ã€‚è®©æˆ‘ä»¬ä¸è¦å¿˜è®°ï¼Œè¿™ä¸ªç»„ä»¶æ˜¯ä¸ºäº†å‘ç”¨æˆ·è¿”å›å…³äºæˆåŠŸæˆ–å¤±è´¥çš„è¯·æ±‚çš„åé¦ˆè€Œåˆ›å»ºçš„ï¼Œå› æ­¤è¯¥ç»„ä»¶åº”è¯¥åœ¨æ•´ä¸ªé¡¹ç›®ä¸­å¯é‡ç”¨ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬å®é™…æ‰€åšçš„äº‹æƒ…ï¼Œå¯¹å§ï¼Ÿ
- en: Well, no, and this is not desirable as it will violate the `Toaster` component
    higher in the component hierarchy and then be able to call or show the toaster
    from any child component?
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: å—¯ï¼Œä¸æ˜¯çš„ï¼Œè¿™å¹¶ä¸ç†æƒ³ï¼Œå› ä¸ºå®ƒå°†è¿åç»„ä»¶å±‚æ¬¡ç»“æ„ä¸­æ›´é«˜çš„`Toaster`ç»„ä»¶ï¼Œç„¶åèƒ½å¤Ÿä»ä»»ä½•å­ç»„ä»¶ä¸­è°ƒç”¨æˆ–æ˜¾ç¤ºåå¸ï¼Ÿ
- en: '![Figure 8.14 â€“ Parent and child components](img/Figure_8.14_B18221.jpg)'
  id: totrans-211
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾8.14 â€“ çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶](img/Figure_8.14_B18221.jpg)'
- en: Figure 8.14 â€“ Parent and child components
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾8.14 â€“ çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶
- en: 'In the preceding figure, we will be able to trigger the display of a toaster
    in the project directly in a parent component from a child component (`CreatePost`).
    React provides an interesting way to manage state across parents and child components
    and this is called context. `Layout.jsx` file, create a new context using the
    `createContext` method:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å‰é¢çš„å›¾ä¸­ï¼Œæˆ‘ä»¬å°†èƒ½å¤Ÿä»å­ç»„ä»¶ï¼ˆ`CreatePost`ï¼‰ç›´æ¥åœ¨çˆ¶ç»„ä»¶ä¸­è§¦å‘é¡¹ç›®ä¸­åå¸çš„æ˜¾ç¤ºã€‚Reactæä¾›äº†ä¸€ç§æœ‰è¶£çš„æ–¹å¼æ¥ç®¡ç†çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶ä¹‹é—´çš„çŠ¶æ€ï¼Œè¿™è¢«ç§°ä¸ºä¸Šä¸‹æ–‡ã€‚åœ¨`Layout.jsx`æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨`createContext`æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸Šä¸‹æ–‡ï¼š
- en: src/components/Layout.jsx
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/Layout.jsx
- en: '[PRE32]'
  id: totrans-215
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'Then in the `Layout` component scope, letâ€™s define the state containing the
    data that the toaster will use to display information. We will also wrap the component
    JSX content inside the `Context` component and add a method to modify the state
    from any child components of the `Layout` component:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶ååœ¨`Layout`ç»„ä»¶çš„ä½œç”¨åŸŸå†…ï¼Œè®©æˆ‘ä»¬å®šä¹‰åŒ…å«åå¸å°†ç”¨äºæ˜¾ç¤ºä¿¡æ¯çš„æ•°æ®çš„çŠ¶æ€ã€‚æˆ‘ä»¬è¿˜å°†å°†ç»„ä»¶JSXå†…å®¹åŒ…è£¹åœ¨`Context`ç»„ä»¶å†…éƒ¨ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªæ–¹æ³•æ¥ä»`Layout`ç»„ä»¶çš„ä»»ä½•å­ç»„ä»¶ä¸­ä¿®æ”¹çŠ¶æ€ï¼š
- en: src/components/Layout.jsx
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: src/components/Layout.jsx
- en: '[PRE33]'
  id: totrans-218
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: In the preceding code, we have introduced a new function Hook called `useMemo`,
    which helps to memorize the context value (caching the value of the context) and
    avoid the creation of new objects every time there is a re-rendering of the `Layout`
    component.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å‰é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†ä¸€ä¸ªæ–°çš„å‡½æ•°Hookï¼Œç§°ä¸º`useMemo`ï¼Œå®ƒæœ‰åŠ©äºè®°ä½ä¸Šä¸‹æ–‡å€¼ï¼ˆç¼“å­˜ä¸Šä¸‹æ–‡çš„å€¼ï¼‰å¹¶é¿å…æ¯æ¬¡`Layout`ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶åˆ›å»ºæ–°å¯¹è±¡ã€‚
- en: 'We will then be able to access the `toaster` state and call the `setToaster`
    function from any child component:'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åï¼Œæˆ‘ä»¬å°†èƒ½å¤Ÿè®¿é—®`toaster`çŠ¶æ€å¹¶ä»ä»»ä½•å­ç»„ä»¶ä¸­è°ƒç”¨`setToaster`å‡½æ•°ï¼š
- en: '[PRE34]'
  id: totrans-221
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: Summary
  id: totrans-222
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ‘˜è¦
- en: In this chapter, weâ€™ve gone deeper into React programming by creating the components
    needed for the CRUD operations used in the post feature. We have covered concepts
    such as props passing, parent-children component creation, UI component customization,
    and modal creation. That led to the partial completion of the home page of the
    `Postagram` project. We also learned more about the `useState` and `useContext`
    Hooks and how they affect state in React. We have also learned how to create a
    `Dropdown` component, how to create a custom toaster, and the importance of layout
    in a React project.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡åˆ›å»ºç”¨äºå¸–å­åŠŸèƒ½çš„CRUDæ“ä½œæ‰€éœ€çš„ç»„ä»¶ï¼Œæ›´æ·±å…¥åœ°äº†è§£äº†Reactç¼–ç¨‹ã€‚æˆ‘ä»¬æ¶µç›–äº†è¯¸å¦‚å±æ€§ä¼ é€’ã€çˆ¶-å­ç»„ä»¶åˆ›å»ºã€UIç»„ä»¶å®šåˆ¶å’Œæ¨¡æ€æ¡†åˆ›å»ºç­‰æ¦‚å¿µã€‚è¿™å¯¼è‡´äº†`Postagram`é¡¹ç›®ä¸»é¡µçš„éƒ¨åˆ†å®Œæˆã€‚æˆ‘ä»¬è¿˜å­¦ä¹ äº†æ›´å¤šå…³äº`useState`å’Œ`useContext`Hooksä»¥åŠå®ƒä»¬å¦‚ä½•å½±å“Reactä¸­çš„çŠ¶æ€çš„çŸ¥è¯†ã€‚æˆ‘ä»¬è¿˜å­¦ä¹ äº†å¦‚ä½•åˆ›å»º`Dropdown`ç»„ä»¶ï¼Œå¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰åå¸ï¼Œä»¥åŠåœ¨Reacté¡¹ç›®ä¸­å¸ƒå±€çš„é‡è¦æ€§ã€‚
- en: In the next chapter, weâ€™ll focus on the CRUD operations of the comment feature.
    This will lead us to add a **Profile** page and a **Post** page to display comments.
    Weâ€™ll also make simple and quick assessments to add Like features to the comments
    too.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä¸“æ³¨äºè¯„è®ºåŠŸèƒ½çš„CRUDæ“ä½œã€‚è¿™å°†å¯¼è‡´æˆ‘ä»¬æ·»åŠ ä¸€ä¸ª**ä¸ªäººèµ„æ–™**é¡µé¢å’Œä¸€ä¸ª**å¸–å­**é¡µé¢æ¥æ˜¾ç¤ºè¯„è®ºã€‚æˆ‘ä»¬è¿˜å°†è¿›è¡Œç®€å•å¿«é€Ÿçš„è¯„ä¼°ï¼Œä»¥æ·»åŠ åˆ°è¯„è®ºä¸­çš„ç‚¹èµåŠŸèƒ½ã€‚
- en: Questions
  id: totrans-225
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: é—®é¢˜
- en: What is a modal?
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä»€ä¹ˆæ˜¯æ¨¡æ€æ¡†ï¼Ÿ
- en: What is a prop?
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä»€ä¹ˆæ˜¯å±æ€§ï¼Ÿ
- en: What is a children element in React?
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Reactä¸­çš„å­å…ƒç´ æ˜¯ä»€ä¹ˆï¼Ÿ
- en: What is a wireframe?
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä»€ä¹ˆæ˜¯çº¿æ¡†å›¾ï¼Ÿ
- en: What is the map method used in JSX?
  id: totrans-230
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: JSXä¸­ä½¿ç”¨çš„`map`æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ
- en: What is the usage of the `mutate` method on SWR objects?
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: SWRå¯¹è±¡ä¸Š`mutate`æ–¹æ³•çš„ç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿ
