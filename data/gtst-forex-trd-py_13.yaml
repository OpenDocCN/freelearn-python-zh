- en: '13'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '13'
- en: To Trade or Not to Trade – Performance Analysis
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 交易与否——性能分析
- en: 'In the previous chapter, we developed a simple trend-following strategy, ran
    a backtest, and generated our first equity curve (a visual representation of the
    strategy’s profits and losses over time). Intuitively, we already know that equity
    curves of profitable strategies should grow over time, and the steeper the growth,
    the better. At first glance, our strategy looks fit to this requirement, but of
    course, it would be better to be able to base our opinions on facts and not just
    emotions. So, we would like to have a quantitative metric that could be used as
    an indicator: if its value is greater than something, then the strategy is good.
    If it’s less, then the strategy is not good.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们开发了一个简单的趋势跟踪策略，进行了回测，并生成了我们的第一条权益曲线（策略随时间利润和损失的视觉表示）。直观地，我们已知盈利策略的权益曲线应该随时间增长，增长越陡峭，越好。乍一看，我们的策略似乎符合这一要求，但当然，如果能基于事实而不是情绪来发表意见会更好。因此，我们希望有一个可以用来作为指标的定量指标：如果其值大于某个值，则策略是好的。如果它更小，则策略不好。
- en: 'As you might have already guessed, such a single, universal metric does not
    exist. A trading strategy is quite a complex structure, even if its logic seems
    simplistic, and its performance should be analyzed from different standpoints.
    We are interested in knowing not only how much money a particular strategy could
    make but also how much we should put at stake as risk capital in order to achieve
    such a gain. Similarly, not only the overall net profit but also how profits (and
    losses!) are distributed over time matters. Ultimately, we want to be sure that
    the strategy is indeed tradable: that trades placed in the real market will be
    more or less similar to those emulated during the backtest.'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所猜想的，这样的单一、通用的指标并不存在。交易策略是一个非常复杂的结构，即使其逻辑看似简单，其表现也应该从不同的角度进行分析。我们感兴趣的不只是特定策略可能带来的多少金钱，还包括为了实现这样的收益我们应该投入多少作为风险资本。同样，不仅整体净利润，而且利润（和损失！）随时间分布的情况也很重要。最终，我们想要确保策略确实可交易：在真实市场中进行的交易将与回测期间模拟的交易或多或少相似。
- en: 'This chapter is very far from an ultimate guide on trading strategy performance
    analysis: this subject is so vast that it would require a separate book, if not
    multiple books. Here, we are going to consider the most essential metrics and
    see how they help assess a strategy’s performance and make our main decision –
    whether to give this strategy a try or set it aside.'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 这章远非交易策略性能分析的终极指南：这个主题如此广泛，以至于可能需要一本书，甚至多本书。在这里，我们将考虑最关键的指标，看看它们如何帮助评估策略的表现，并做出我们的主要决定——是否尝试这个策略或将其搁置。
- en: 'In this chapter, you will learn about the following topics:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将了解以下主题：
- en: Trade analysis
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 交易分析
- en: Average trade and trading costs
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 平均交易和交易成本
- en: Measuring performance – alpha and beta revisited
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 衡量性能——alpha和beta重访
- en: Net profit versus buy and hold
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 净利润与持有
- en: Drawdown
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 回撤
- en: The power of leverage – or how much do I need to trade it?
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 杠杆的力量——或者我需要交易多少？
- en: Trade analysis
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 交易分析
- en: As you remember, the difference between trading and investing is, broadly speaking,
    the number of trades. If you buy and hold a position in an asset for 1 year or
    more, then it’s an investment. If you buy, sell, and buy the same asset or different
    assets again multiple times during the same year, it’s trading.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所记，交易和投资之间的区别，从广义上讲，是交易的数量。如果你在资产中持有头寸1年或更长时间，那么它就是投资。如果你在同年内多次买卖同一资产或不同资产，那么它就是交易。
- en: Why a year?
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 为什么是一年？
- en: According to most tax laws, holding a position for 1 year and 1 day qualifies
    it as an investment, and any profit resulting from this activity is taxed at a
    discounted rate. If you held the position even for 1 day less than 1 year, it
    will be considered trading and the resulting profit will be taxed at a full income
    tax rate. This rule is applicable mostly to equities trading, but at least it
    makes sense to use 1 year as a reference term.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 根据大多数税法，持有头寸1年零1天可以将其视为投资，由此产生的任何利润将以折扣税率征税。如果你持有的头寸少于1年，则被视为交易，由此产生的利润将按全额收入税率征税。这条规则主要适用于股票交易，但至少使用1年作为参考期限是有意义的。
- en: So, the strategy is actively opening and closing positions during a given period.
    Regardless of the total net profit (or loss) for the entire period, first, and
    above all, we are interested in how much each trade contributes to the overall
    result – at least on average.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，策略在给定期间内积极开仓和平仓。无论整个期间的总净收益（或亏损）如何，首先，最重要的是，我们感兴趣的是每笔交易对整体结果贡献了多少——至少在平均意义上。
- en: Average trade and trading costs
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 平均交易和交易成本
- en: 'Average trade is one of the most essential yet simplistic metrics: it’s just
    the ratio of the total net profit achieved by a strategy to the total number of
    trades:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 平均交易是衡量指标中最基本且最简单的之一：它只是策略实现的总净收益与总交易次数的比率：
- en: '![](img/Formula_B19145_13_001.jpg)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![公式](img/Formula_B19145_13_001.jpg)'
- en: Why do we need this value?
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 我们为什么需要这个值？
- en: To answer this question, we should recall a few things from theory again.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 为了回答这个问题，我们应该再次回顾一下理论中的几个要点。
- en: In [*Chapter 3*](B19145_03.xhtml#_idTextAnchor044), *FX Market Overview from
    a Developer’s Standpoint*, we considered how markets are organized and learned
    that there is always a difference between the price at which we can buy and at
    which we can sell – the spread. Regardless of the type of orders used in the strategy,
    the market price must move for the distance of the spread *at the very least*,
    only to move the newly opened position from a negative zone to break even.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 在[*第3章*](B19145_03.xhtml#_idTextAnchor044)，[*从开发者角度的FX市场概述*]中，我们考虑了市场的组织方式，并了解到我们能够买入和卖出的价格之间总是存在差异——即点差。无论策略中使用的订单类型如何，市场价格至少必须移动点差距离，才能将新开仓位从负区域移动到盈亏平衡点。
- en: 'Besides that, don’t forget the various issues with liquidity and order execution
    that were considered in [*Chapter 10*](B19145_10.xhtml#_idTextAnchor171), *Types
    of Orders and Their Simulation in Python*. If the strategy uses market orders,
    it may encounter slippage, partial fills, or rejects (depending on the TIF specification,
    see the *Time in force: better control over execution* section in the same chapter).
    In any case, it’s just another cost of trading that should be covered by the strategy.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，别忘了在[*第10章*](B19145_10.xhtml#_idTextAnchor171)[*Python中订单类型及其模拟*]中考虑的各种流动性和订单执行问题。如果策略使用市价订单，它可能会遇到滑点、部分成交或拒绝（取决于TIF规范，参见同一章节中的[*时间有效：更好地控制执行*](B19145_10.xhtml#_idTextAnchor171)）。无论如何，这只是交易成本中应被策略覆盖的另一个成本。
- en: Finally, don’t forget that the broker and the trading venue will charge commissions,
    and this cost should also be absorbed by the trading strategy.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，别忘了经纪商和交易场所会收取佣金，这笔费用也应由交易策略承担。
- en: So, the average trade value should be greater than the sum of the spread, typical
    slippage, and broker and/or trading venue commissions. Only in this case can the
    strategy make money in the real market.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，平均交易价值应该大于点差、典型滑点以及经纪商和/或交易场所佣金的总额。只有在这种情况下，策略才能在真实市场中盈利。
- en: 'Let’s now look at real figures, based on the performance of the strategy that
    we developed in the previous chapter. In order to obtain the necessary values,
    let’s add a few lines to the strategy code. First, we will add a `list_of_orders`
    property to the `tradingSystemMetadata` class – here, we will save all executed
    orders. Next, in the `processOrders()` function, we will add the following statement
    right after the `if order[''Status''] == ''``Executed'':` line:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看基于我们在上一章中开发的策略表现的实际数据。为了获得必要的值，让我们在策略代码中添加几行。首先，我们将向`tradingSystemMetadata`类添加一个`list_of_orders`属性——在这里，我们将保存所有已执行的订单。接下来，在`processOrders()`函数中，我们将在`if
    order['Status'] == 'Executed':`行之后添加以下语句：
- en: '[PRE0]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'And finally, at the very end of the backtester’s code, right after `plt.plot(System.equity_timeseries)`
    (see the *Backtesting platform with historical data feed* section of [*Chapter
    11*](B19145_11.xhtml#_idTextAnchor186), *Backtesting and* *Theoretical Performance*):'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在回测代码的末尾，紧接在`plt.plot(System.equity_timeseries)`之后（参见[*第11章*](B19145_11.xhtml#_idTextAnchor186)的[*历史数据回测平台*](B19145_11.xhtml#_idTextAnchor186)，[*回测和理论表现*）：
- en: '[PRE1]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: If you run the backtesting now again with the same data (AUD/USD daily), you
    should get 37 total trades and an average trade value of about 79.41.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你现在再次使用相同的数据（澳元/美元每日数据）进行回测，你应该得到37笔总交易和平均交易价值约为79.41。
- en: Is that good or bad?
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 这好还是不好？
- en: Regarding the number of trades, generally speaking, the greater the number,
    the better. Why? Because all metrics used to assess the strategy performance are
    based on statistics, and statistics work best if the size of the dataset is significant.
    I am not going to go into details about the exact meaning of *significant* in
    this sense, as it’s too complex a subject, but for simplicity’s sake, let’s take
    it for granted that we need at least 20-30 data points so that statistical metrics
    start making sense. From this standpoint, 37 trades look satisfactory.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 关于交易次数，一般来说，次数越多越好。为什么？因为用来评估策略表现的指标都是基于统计的，而统计在数据集规模较大时效果最佳。我不会深入探讨这个意义上的“显著”的确切含义，因为这是一个过于复杂的话题，但为了简单起见，让我们假设我们需要至少20-30个数据点，这样统计指标才开始有意义。从这个角度来看，37次交易看起来是令人满意的。
- en: Now the average trade itself. Its value is 79.41, but in which units? Dollars?
    Australian dollars? Maybe something else?
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 现在来看平均交易本身。它的价值是79.41，但单位是什么？美元？澳大利亚元？也许还有其他？
- en: 'Here, we should recall that spot FX is always traded on margin (see the *Trade
    mechanics: again some terminology* section of [*Chapter 3*](B19145_03.xhtml#_idTextAnchor044),
    *FX Market Overview from a Developer’s Standpoint*) and that the value of 1 pip
    in money depends on the trading size. In the *Trading application with live data
    feed* section of [*Chapter 11*](B19145_11.xhtml#_idTextAnchor186), *Backtesting
    and Theoretical Performance*, we already pointed out that for backtesting, we
    may want to use a trading size that will make 1 pip equal to $1\. This is why
    we chose a trading size of 10,000 for the backtest and now we can interpret the
    average trade as *79.41 pips*. Then, we can finally decide whether it’s sufficient
    or not.'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们应该回忆一下即期外汇交易总是以保证金进行（参见[*第3章*](B19145_03.xhtml#_idTextAnchor044)的*交易机制：再次一些术语*部分，从开发者的角度来看的外汇市场概述）以及1个点的货币价值取决于交易规模。在[*第11章*](B19145_11.xhtml#_idTextAnchor186)的*带有实时数据流的交易应用*部分，*回测和理论表现*中，我们已经指出，对于回测，我们可能希望使用一个交易规模，使得1个点等于1美元。这就是为什么我们选择了10,000的交易规模进行回测，现在我们可以将平均交易解释为*79.41个点*。然后，我们最终可以决定这是否足够。
- en: 'Let’s sum up all trading costs that we mentioned here: spread, slippage, and
    commission.'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们总结一下这里提到的所有交易成本：点差、滑点费和佣金。
- en: Spread
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 点差
- en: Spreads depend on the liquidity provider or the broker (the latter often add
    their own fees into the spread, such a practice is called **markup**), and also
    on the time of day. An industry average spread for AUD/USD today is between 0.5
    and 2 pips with rare increases to 5 and more, typically before economic news.
    So, it would be safe to suppose that we should subtract 1 pip from the average
    trade value to account for the market spread during a somewhat less liquid time
    (remember that our strategy places orders at midnight, when liquidity is thinner
    than during regular work hours).
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '点差取决于流动性提供者或经纪商（后者通常将他们自己的费用添加到点差中，这种做法称为**加价**），以及一天中的时间。今天AUD/USD的行业平均点差在0.5到2个点之间，很少增加到5个点以上，通常在经济新闻发布前。因此，可以安全地假设我们应该从平均交易价值中减去1个点，以考虑到市场在相对流动性较低的时间段的点差（记住，我们的策略在午夜下单，那时流动性比正常工作时间要薄）。 '
- en: Note
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: If you use the unmodified `emulateBrokerExecution` function in the backtester
    code, then a spread of 0.5 pips is already included there. You can modify it every
    time you run a new strategy with a new currency pair, or remove it completely
    and subtract the spread from the resulting average trade.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用未经修改的`emulateBrokerExecution`函数进行回测代码，那么其中已经包含了0.5个点的点差。每次你用新的货币对运行新的策略时，都可以修改它，或者完全删除，并从最终的平均交易中减去点差。
- en: Slippage
  id: totrans-40
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 滑点费
- en: Slippage mostly depends on the trading size and liquidity in the order book.
    If the sizes of your orders never exceed top-of-book liquidity, then in the absolute
    majority of cases, the slippage would be zero. To get a more precise estimate,
    we need to analyze the top-of-book data at the time of the trade. If you trade
    with a retail broker, then you may have a hard time getting order book data –
    normally, brokers do not publish it. If you use a broker as an STP to get access
    directly to a trading venue, then you will get at least top-of-book data with
    volumes. Let’s do an estimate using LMAX data.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 滑点主要取决于订单簿中的交易规模和流动性。如果你的订单规模从未超过订单簿顶部的流动性，那么在绝大多数情况下，滑点将为零。为了得到更精确的估计，我们需要分析交易时的订单簿顶部数据。如果你通过零售经纪商交易，那么你可能很难获得订单簿数据——通常，经纪商不会公布它。如果你使用经纪商作为STP以直接访问交易场所，那么你将至少获得带有成交量的订单簿顶部数据。让我们使用LMAX数据来进行估计。
- en: Our strategy places trades only at end of the day, which is midnight (New York
    time, EST/EDT). This is not the most liquid time, but on average, we can see 50,000
    to 200,000 AUD at the top of the book at that time. So, if your order size doesn’t
    exceed 50,000 AUD, then you can safely assume that slippage will be negligible.
    However, if your order size exceeds 50,000 AUD, then most likely you will experience
    slippage of up to 1 pip – depending on the actual trading volume. If the trading
    size exceeds 500,000 AUD, then the slippage may increase to 2 pips and even more.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的战略只在每天结束时进行交易，即午夜（纽约时间，EST/EDT）。这不是最流动的时间，但平均来看，在那个时间我们可以看到50,000到200,000
    AUD在订单簿的顶部。因此，如果你的订单规模不超过50,000 AUD，那么你可以安全地假设滑点可以忽略不计。然而，如果你的订单规模超过50,000 AUD，那么你很可能会体验到高达1个点的滑点——这取决于实际的交易量。如果交易规模超过500,000
    AUD，那么滑点可能增加到2个点甚至更多。
- en: Which estimate should we use? How can you know which trading size you’re going
    to use?
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 我们应该使用哪个估计值？你如何知道你将使用哪个交易规模？
- en: 'Let’s again recall that the FX markets are traded on margin. This means that
    you don’t need to have the entire amount of money in the broker account to open
    a position: the broker will provide you with a credit line according to the leverage
    available according to your status: retail or professional. If you’re a retail
    trader, then most likely you will get a 30:1 leverage. If you’re a professional
    trader, then higher leverage such as 100:1 is available. However, as you will
    see later in this chapter (see the *The power of leverage – how much do I need
    to trade it?* section), it is highly unlikely that you’re going to use a leverage
    greater than 10:1\. Most likely, it is going to be somewhere in the vicinity of
    2:1-5:1\. In our example, in order to open a position of 200,000 AUD/USD with
    a leverage of 10:1, you will need approximately the following:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们再次回顾一下，外汇市场是以保证金交易。这意味着你不需要在经纪商账户中有全部的资金来开仓：经纪商将根据你的状态（零售或专业）提供的杠杆为你提供信用额度。如果你是零售交易员，那么你很可能会得到30:1的杠杆。如果你是专业交易员，那么100:1这样的高杠杆是可用的。然而，正如你将在本章后面看到的那样（见*杠杆的力量——我需要多少来交易它？*部分），你使用超过10:1的杠杆的可能性非常高。最有可能的是，它将在2:1-5:1的范围内。在我们的例子中，为了以10:1的杠杆开仓200,000
    AUD/USD的头寸，你需要大约以下金额：
- en: '![](img/Formula_B19145_13_002.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![公式](img/Formula_B19145_13_002.jpg)'
- en: 0.6918 is the average rate of AUD/USD for the last 52 weeks (a work year). In
    reality, you will need a bit more because the open position should be able to
    withstand a drawdown (see below in this chapter), but in essence, an estimate
    of about $15,000 seems adequate. Without any intention to count money in your
    pocket, let me suppose that if you’re a retail trader, then you will hardly open
    positions with a size greater than 200,000 AUD, so it is safe to suppose that
    a slippage of 1 pip would provide a sufficient overhead for our estimate.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 0.6918是过去52周（一个工作年）的平均AUD/USD汇率。实际上，你可能需要更多一些，因为开仓头寸应该能够承受回撤（见本章以下内容），但本质上，大约15,000美元的估计似乎是足够的。没有任何在口袋里数钱的意图，让我假设如果你是一个零售交易员，那么你几乎不会开仓超过200,000
    AUD的头寸，因此可以安全地假设1个点的滑点将为我们的估计提供足够的额外空间。
- en: Note
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: The main idea behind all our estimates is to suppose a theoretical worst scenario,
    something that probably won’t be realized in real trading. If the strategy is
    still able to make money on paper after we have accounted for all possible negative
    impacts, then it is probable that it’s going to make money in real life.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 我们所有估计背后的主要思想是假设一个理论上的最坏情况，这种情况在现实交易中可能不会实现。如果我们已经考虑了所有可能的负面影响后，策略仍然能在纸上赚钱，那么它很可能在现实生活中也能赚钱。
- en: However, if you work with a financial institution, then most likely the average
    order size can be multiplied at least 10 times, so slippage starts to play quite
    an important role. I’d suggest subtracting at least 1 pip per 100,000 in the order
    size to account for slippage in case trades are placed during an illiquid time
    such as at night.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，如果你与一家金融机构合作，那么平均订单量很可能会至少增加10倍，因此滑点开始发挥相当重要的作用。我建议在订单量中至少减去每10万1个点来考虑在夜间等流动性较差的时间进行交易时的滑点。
- en: Trading size, slippage, and execution
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 交易规模、滑点和执行
- en: In real life, orders whose size exceeds the top of the book are seldom sent
    directly to the market as market orders to avoid execution at unwanted prices.
    If you really need to fill a large order, consider rewriting the `processOrders()`
    function, splitting a large order into parts, and executing them one by one.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 在现实生活中，超过订单簿顶部的订单很少直接作为市价订单发送到市场，以避免在不受欢迎的价格执行。如果你真的需要填补一个大订单，考虑重新编写`processOrders()`函数，将大订单拆分成几部分，并逐一执行。
- en: Commission
  id: totrans-52
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 佣金
- en: The last part of trading costs seems to be the commission. Typically, a trading
    venue charges about 25-40 **dollars per million** (**DPM**). How do we recalculate
    it into dollar value for our trades?
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 交易成本的最后一部分似乎就是佣金。通常，一个交易场所会收取大约25-40 **美元每百万**（**DPM**）。我们如何将其重新计算成我们交易的美元价值？
- en: The trading size used in the backtest is 10,000 AUD/USD. This means we buy or
    sell 10,000 Australian dollars or (using an average rate of AUD/USD of about 0.6920)
    approximately 7000 US dollars. With a rate of 30 DPM, the broker commission would
    be around $0.21\. Now, if we recall that in our backtest $1 equals 1 pip, we can
    say that the commission makes about 0.21 pips.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在回测中使用的交易规模是10,000 AUD/USD。这意味着我们买入或卖出10,000澳大利亚元，或者（使用平均汇率AUD/USD约为0.6920）大约7000美元。以30
    DPM的费率计算，经纪商佣金大约为0.21美元。现在，如果我们回想一下在我们的回测中1美元等于1个点，我们可以这样说，佣金大约是0.21个点。
- en: So far, we calculated a realistic estimate for the spread, slippage, and broker
    commission. Is this all we should account for?
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经计算了合理的价差、滑点和经纪商佣金的估计值。这是我们应该考虑的全部吗？
- en: 'No, there is another cost that is very frequently forgotten by many traders:
    overnight swaps.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 不，还有另一个许多交易者经常忘记的成本：隔夜掉期。
- en: Overnight swaps
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 隔夜掉期
- en: 'In the *Economic news* section of [*Chapter 6*](B19145_06.xhtml#_idTextAnchor101),
    *Basics of Fundamental Analysis and Its Possible Use in FX Trading*, we already
    mentioned one of the most peculiar features of the FX market: the difference in
    interest rates between the two currencies in a pair. This difference may be positive
    and may be negative: for example, if the interest rate of the British pound is
    5% per annum and the interest rate of the Japanese yen is 0% per annum, then the
    difference for GBP/JPY is positive (5%) and the difference for JPY/GBP is negative
    (-5%).'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在[*第6章*](B19145_06.xhtml#_idTextAnchor101)的[*“基本面分析基础及其在FX交易中的可能应用”*](https://wiki.example.org/fundamentals_of_fundamental_analysis_and_its_possible_use_in_fx_trading)部分中，“*经济新闻*”部分我们已经提到了外汇市场最奇特的特征之一：一对货币之间的利率差异。这种差异可能是正的，也可能是负的：例如，如果英镑的年利率为5%，而日元的年利率为0%，那么GBP/JPY的差异为正（5%），而JPY/GBP的差异为负（-5%）。
- en: Once you hold an open position overnight (past the NY bank settlement time),
    you either receive interest (if the difference is positive) or pay the interest
    (if the difference is negative). In our example, if you buy GBP/JPY (or sell JPY/GBP,
    which is the same), then you receive interest, and if you sell GBP/JPY or buy
    JPY/GBP, then you pay interest.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你持有隔夜未平仓的头寸（超过纽约银行结算时间），你要么获得利息（如果差异为正），要么支付利息（如果差异为负）。在我们的例子中，如果你买入GBP/JPY（或卖出JPY/GBP，两者相同），那么你会获得利息；如果你卖出GBP/JPY或买入JPY/GBP，那么你需要支付利息。
- en: With our present strategy, we hold AUD/USD for multiple days, sometimes long,
    sometimes short, so we may receive or pay the interest depending on the side of
    the position and the current difference in interest rates.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的当前策略中，我们持有AUD/USD多日，有时长多，有时短空，所以我们可能会根据头寸方向和当前利率差异获得或支付利息。
- en: We have to account for these overnight fees, frequently referred to as **swaps**.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 我们必须考虑到这些隔夜费用，通常被称为**掉期**。
- en: Note
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 备注
- en: Do not confuse swaps with financial instruments, which we discussed in the *FX
    instruments* section in [*Chapter 3*](B19145_03.xhtml#_idTextAnchor044), *FX Market
    Overview from a* *Developer’s Standpoint*.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 不要将掉期与金融工具混淆，我们在[*第3章*](B19145_03.xhtml#_idTextAnchor044)的*“外汇工具”*部分进行了讨论，*“从开发者角度的外汇市场概述”*。
- en: 'However, it is surprisingly quite a non-trivial task. There are two problems
    here:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，这竟然是一个相当复杂的任务。这里有两个问题：
- en: First, these swap rates change over time because they are based on the interest
    rates set by central banks (usually referred to as the base rate) and these rates
    also change. So, we need historical data for base rates at the very least.
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 首先，这些掉期利率会随时间变化，因为它们是基于中央银行（通常称为基准利率）设定的利率，这些利率也会变化。所以，至少我们需要基准利率的历史数据。
- en: Second, each broker adds their own premium, or markup, to the base rate, and,
    in most cases, this premium is publicly unknown. Given that brokers do not store
    historical data for their overnight swap rates, it becomes problematic to reliably
    restore the history of interest rates differential in a currency pair.
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第二，每个经纪商都会在自己的基准利率上添加自己的溢价或加价，而且在大多数情况下，这种溢价是公开未知的。鉴于经纪商不存储他们的隔夜掉期利率的历史数据，可靠地恢复货币对利率差异的历史就变得有困难了。
- en: Nevertheless, we can make an attempt. First, we need historical interest rate
    data. It’s a bit less widespread than historical market data, but there are a
    few resources that provide it free of charge – for example, [Global-rates.com](https://Global-rates.com).
    Go to [https://www.global-rates.com/en/interest-rates/central-banks/central-banks.aspx](https://www.global-rates.com/en/interest-rates/central-banks/central-banks.aspx)
    and there you will find links to the Federal Reserve and the Reserve Bank of Australia
    interest rate data.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管如此，我们可以尝试一下。首先，我们需要历史利率数据。它比历史市场数据要少一些，但有一些资源可以免费提供——例如，[Global-rates.com](https://Global-rates.com)。访问[https://www.global-rates.com/en/interest-rates/central-banks/central-banks.aspx](https://www.global-rates.com/en/interest-rates/central-banks/central-banks.aspx)，在那里您将找到美联储和澳大利亚储备银行利率数据的链接。
- en: 'As you can see, the data changes quite infrequently, no more than once a month
    – because decisions on interest rates are made by a special central bank committee
    and normally they have monthly meetings. We don’t need to be absolutely precise
    in our calculations: in the long run, the overnight swap is going to be just a
    fraction of a pip, so it’s sufficient to sync data for up to a month. I copied
    the data into an Excel sheet and here’s what I got:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，数据变化相当不频繁，不超过每月一次——因为利率决策是由一个特殊的中央银行委员会做出的，并且通常他们每月都有会议。我们不需要在计算上绝对精确：从长远来看，隔夜掉期将只是几分之一个点，所以同步一个月的数据就足够了。我将数据复制到了Excel表格中，这是我的结果：
- en: '| **RBA** |  | **FED** |  | **Rates difference** |'
  id: totrans-69
  prefs: []
  type: TYPE_TB
  zh: '| **RBA** |  | **FED** |  | **利率差异** |'
- en: '| 12/06/22 | 3.10% | 12/14/22 | 4.50% | -1.40% |'
  id: totrans-70
  prefs: []
  type: TYPE_TB
  zh: '| 12/06/22 | 3.10% | 12/14/22 | 4.50% | -1.40% |'
- en: '| 11/01/22 | 2.85% | 11/02/22 | 4.00% | -1.15% |'
  id: totrans-71
  prefs: []
  type: TYPE_TB
  zh: '| 11/01/22 | 2.85% | 11/02/22 | 4.00% | -1.15% |'
- en: '| 10/04/22 | 2.60% |  | 3.25% | -0.65% |'
  id: totrans-72
  prefs: []
  type: TYPE_TB
  zh: '| 10/04/22 | 2.60% |  | 3.25% | -0.65% |'
- en: '| 09/06/22 | 2.35% | 09/21/22 | 3.25% | -0.90% |'
  id: totrans-73
  prefs: []
  type: TYPE_TB
  zh: '| 09/06/22 | 2.35% | 09/21/22 | 3.25% | -0.90% |'
- en: '| 08/02/22 | 1.85% | 07/28/22 | 2.50% | -0.65% |'
  id: totrans-74
  prefs: []
  type: TYPE_TB
  zh: '| 08/02/22 | 1.85% | 07/28/22 | 2.50% | -0.65% |'
- en: '| 07/06/22 | 1.35% | 06/15/22 | 1.75% | -0.40% |'
  id: totrans-75
  prefs: []
  type: TYPE_TB
  zh: '| 07/06/22 | 1.35% | 06/15/22 | 1.75% | -0.40% |'
- en: '| 06/07/22 | 0.85% | 05/04/22 | 1.00% | -0.15% |'
  id: totrans-76
  prefs: []
  type: TYPE_TB
  zh: '| 06/07/22 | 0.85% | 05/04/22 | 1.00% | -0.15% |'
- en: '| 05/03/22 | 0.35% | 03/16/22 | 0.50% | -0.15% |'
  id: totrans-77
  prefs: []
  type: TYPE_TB
  zh: '| 05/03/22 | 0.35% | 03/16/22 | 0.50% | -0.15% |'
- en: '| 11/03/20 | 0.10% | 03/15/20 | 0.25% | -0.15% |'
  id: totrans-78
  prefs: []
  type: TYPE_TB
  zh: '| 11/03/20 | 0.10% | 03/15/20 | 0.25% | -0.15% |'
- en: '| 03/19/20 | 0.25% | 03/03/20 | 1.25% | -1.00% |'
  id: totrans-79
  prefs: []
  type: TYPE_TB
  zh: '| 03/19/20 | 0.25% | 03/03/20 | 1.25% | -1.00% |'
- en: Table 13.1 – Historical central banks’ interest rates for RBA and the Fed
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 表13.1 – RBA和美联储的历史中央银行利率
- en: If we subtract the former from the latter, we will get the difference in interest
    rates for the AUD/USD currency pair. We can see that it changes from as low as
    0.15% to 1.4%. Now, the question is how much it means in money.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们从后者减去前者，我们将得到澳元/美元货币对之间的利率差异。我们可以看到，它从低至0.15%变化到1.4%。现在的问题是它在金钱上意味着多少。
- en: 'To calculate that, we should first recall that a year has 365 days and then
    we should divide the value in the last column of the table by 365\. Let’s do it
    with the latest value:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 要计算这个，我们首先应该回忆起一年有365天，然后我们应该将表格最后一列的值除以365。让我们用最新的值来做：
- en: '![](img/Formula_B19145_13_003.jpg)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Formula_B19145_13_003.jpg)'
- en: Next, we should multiply the daily interest by the trading size. In our example,
    we trade 10,000 AUD, so we multiply the daily interest by 10,000\. Finally, if
    we want to know the swap value in USD, not AUD, we should multiply the result
    by the actual exchange rate, that is, the market price of AUD/USD.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们应该将每日利息乘以交易量。在我们的例子中，我们交易10,000澳元，所以我们将每日利息乘以10,000。最后，如果我们想知道以美元计价的掉期价值，而不是澳元，我们应该将结果乘以实际的汇率，即澳元/美元的市场价格。
- en: 'I think here it’s become obvious that swap rates change not only because central
    banks change their interest rates but also because the market price of the currency
    pair changes. For our rough estimate, we may use the 52-week average of the spot
    price, and thus multiply the final result by 0.68\. Thus, in our example, we get:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 我想在这里已经很明显了，掉期利率的变化不仅是因为中央银行改变利率，还因为货币对的市场价格变化。为了我们的粗略估计，我们可以使用现货价格的52周平均值，因此将最终结果乘以0.68。因此，在我们的例子中，我们得到：
- en: '![](img/Formula_B19145_13_004.jpg)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Formula_B19145_13_004.jpg)'
- en: How do we interpret this result?
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 我们如何解释这个结果？
- en: 'This result means that if we buy 10,000 AUD/USD and hold this position overnight,
    then we pay 26 cents. Looks negligible, but only because a trading size of 10,000
    is quite small: don’t forget that the FX market is traded on margin, and even
    with a retail leverage of 30:1, you need only $300 in the account to be able to
    open a position of $10,000\. Quite often, retail trades are placed with 100,000
    of base currency and institutional trades normally *start* with 1,000,000\. If
    you hold a position of 100,000 overnight, you pay $2.6 – not much, but if you
    do it every night, then it gradually grows into a considerable amount. And if
    you trade as an institutional trader, then you start paying $26 every night, averaging
    $130 a week, and so on.'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 这个结果意味着，如果我们买入10,000澳元/美元并持有这个头寸过夜，那么我们需支付26美分。看起来微不足道，但仅仅是因为10,000的交易量相当小：别忘了外汇市场是按保证金交易的，即使零售杠杆为30:1，你只需要账户中有300美元就能开一个10,000美元的头寸。很多时候，零售交易都是以100,000为基础货币进行的，而机构交易通常*从*1,000,000开始。如果你持有100,000的头寸过夜，你需支付2.6美元——不多，但如果每晚都这样做，那么它逐渐积累成相当大的金额。如果你作为机构交易员进行交易，那么你每晚开始支付26美元，平均每周130美元，等等。
- en: Alright, I hear you saying, *“it’s clear that we pay when we are long AUD/USD,
    but if we’re short, we should receive an equivalent amount every night,* *shouldn’t
    we?”*
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 好吧，我听到你在说，“*很显然，当我们持有澳元/美元多头时，我们需要支付费用，但如果我们是空头，我们每晚应该收到等额的金额，不是吗？*”
- en: 'Unfortunately, real life is (as always) more complicated than any theory. The
    issue is that every broker adds their own markup to the overnight rate. There’s
    no surprise in it: brokers also have to borrow to provide you with a credit line,
    and they can’t borrow directly from a central bank, so for them, the interest
    rate will already be higher. This means that the negative values become even more
    negative, and positive values become... well, in most cases also negative! I encourage
    you to check the overnight swap rates with any broker, compare them with our calculated
    *fair values*, and see the difference. In reality, as of today (at the beginning
    of January 2023), the best overnight swap rate I could find was -$5.30 for a long
    position and -$0.30 for a short one for a trading size of 100,000 AUD/USD.'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 不幸的是，现实生活（就像往常一样）比任何理论都要复杂。问题是每个经纪商都会在自己的隔夜利率上添加自己的加价。这并不令人惊讶：经纪商也必须借款来为你提供信用额度，他们不能直接从中央银行借款，因此对他们来说，利率已经更高了。这意味着负值变得更负，而正值……好吧，在大多数情况下也是负的！我鼓励你检查任何经纪商的隔夜掉期利率，将它们与我们计算出的*公允价值*进行比较，看看差异。实际上，截至今天（2023年1月初），我能找到的最佳隔夜掉期利率是100,000澳元/美元多头头寸为-5.30美元，空头头寸为-0.30美元。
- en: Also, keep in mind that on Wednesday, you will be charged extra because we trade
    spot, and the spot is delivered on a T+2 basis (again, see the *FX instruments*
    section of [*Chapter 3*](B19145_03.xhtml#_idTextAnchor044), *FX Market Overview
    From a* *Developer’s Standpoint*).
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，请记住，在周三，你将需要额外支付费用，因为我们进行的是现货交易，现货是在T+2的基础上交付的（再次提醒，请参阅[*第3章*](B19145_03.xhtml#_idTextAnchor044)，*从开发者角度的外汇市场概述*)。
- en: We can use an estimate that in the absolutely worst case, we pay about 0.5 pips
    for the luxury of holding the position overnight. Pips – because, I hope, you
    remember that using a trading size of 10,000 AUD/USD allows us to interpret the
    result both in dollars and pips, which is very convenient for further calculations.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用一个估计，在最坏的情况下，我们为持有头寸过夜支付大约0.5个点的费用。点——因为，我希望，你记得使用10,000澳元/美元的交易规模可以使我们既以美元又以点来解释结果，这对于进一步的计算非常方便。
- en: And now! Finally! Let’s sum up all costs we’ve discussed so far.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 现在！终于！让我们总结一下到目前为止所讨论的所有成本。
- en: Trading Costs Calculation
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 交易成本计算
- en: Total trading costs per trade = 1 pip spread + 1 pip slippage + 0.21 pips commission
    + 0.5 pips overnight swap * 20 days in position on average = 2.71 pips.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 每笔交易的总交易成本 = 1个点差 + 1个点滑点 + 0.21个点佣金 + 0.5个点隔夜掉期 * 平均20天持有头寸 = 2.71个点。
- en: This is what we must subtract from the average trade, and if the remainder is
    still positive, then our strategy can make money, at least on paper.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 这是我们必须从平均交易中扣除的，如果剩余金额仍然是正数，那么我们的策略至少在纸上可以赚钱。
- en: Obviously, now we can see that an average trade of 79 pips is huge because all
    the costs, even taken with excess, hardly make 15% of the expected return. This
    is a truly great result, and it’s achievable only for long-term trading strategies.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，现在我们可以看到，平均79个点的交易量是巨大的，因为即使成本过高，也几乎无法达到预期回报的15%。这是一个真正了不起的结果，而且只有长期交易策略才能实现。
- en: Note
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: 'There is a strong relationship between the strategy’s position in the market,
    the average trade value for such a strategy, and the volatility of its returns:
    the longer we stay in a position, the greater the average trade we can expect
    and, unfortunately, the volatility of returns for such a strategy will also be
    greater. This fact can even be proven mathematically as a theorem, but it lies
    way beyond the scope of this book, so I suggest taking it for granted – for now.'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 策略在市场中的位置、此类策略的平均交易价值以及其回报的波动性之间存在密切关系：我们待在一个位置的时间越长，我们预期的平均交易量就越大，不幸的是，此类策略的回报波动性也会更大。这一事实甚至可以通过定理从数学上得到证明，但它远远超出了本书的范围，所以我现在建议你把它当作理所当然的事情。
- en: All in all, the trading costs analysis shows that our strategy is very robust
    in this regard (and believe me, most strategies you will develop yourself in the
    future won’t pass even this first test – but it’s normal for research and development).
    What’s next?
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 总体而言，交易成本分析显示，我们的策略在这方面非常稳健（并且相信我，你未来自己开发的绝大多数策略甚至无法通过这个第一个测试——但对于研究和开发来说这是正常的）。接下来是什么？
- en: Next, we have to revisit a couple of concepts that we already mentioned earlier
    in the book.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们必须重新审视本书中已经提到的一些概念。
- en: Measuring performance – alpha and beta revisited
  id: totrans-102
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 衡量性能——重提α和β
- en: 'In [*Chapter 9*](B19145_09.xhtml#_idTextAnchor152), *Trading Strategies and
    Their Core Elements*, we touched on two important concepts that are mainly used
    to analyze performance: alpha and beta. Back then, we looked at them from a slightly
    different angle: we were in search of opportunities to systematically make profits
    in the market and considered all these metrics only from that standpoint. However,
    don’t forget that they were originally suggested for evaluating the performance
    of an investment – if put in simple words, to judge whether the investment outperforms
    or *beats* the market or not.'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第9章](B19145_09.xhtml#_idTextAnchor152)《交易策略及其核心要素》中，我们提到了两个主要用于分析性能的重要概念：α和β。当时，我们从稍微不同的角度看待它们：我们是在寻找在市场上系统获利的机会，并且只从那个角度考虑所有这些指标。然而，不要忘记，它们最初是建议用于评估投资表现的——如果用简单的话说，就是判断投资是否优于或*击败*市场。
- en: Note
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: I will intentionally simplify the concepts of both alpha and beta and avoid
    exact mathematical formulae for their calculation. Using them requires good command
    of the theory of probabilities, and I know from my past experience that it’s the
    very domain of mathematics that causes a lot of confusion to many readers. So
    forgive me, math purists, but I just want these relatively complex subjects to
    be understood by everyone.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 我将故意简化α和β的概念，并避免使用它们的精确数学公式。使用它们需要良好的概率论理论掌握，并且我知道从我的以往经验来看，这正是许多读者感到困惑的数学领域。所以，请原谅我，数学纯粹主义者，但我只是想让每个人都能理解这些相对复杂的话题。
- en: Let’s start with alpha as the more common and simplistic metric.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从更常见且简单的指标α开始。
- en: Alpha in investment and trading
  id: totrans-107
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 投资和交易中的α
- en: Alpha stands for excess returns; this is the very metric that ultimately says
    whether you beat the market within the given time span.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: Alpha代表超额回报；这是最终决定你在给定时间段内是否战胜市场的指标。
- en: 'Normally, in capital management, alpha is calculated according to the following
    formula:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，在资本管理中，alpha是根据以下公式计算的：
- en: '![](img/Formula_B19145_13_005.jpg)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Formula_B19145_13_005.jpg)'
- en: Here, R means the return of a portfolio, ![](img/Formula_B19145_13_006.png)
    denotes the so-called *risk-free* rate of return, ![](img/Formula_B19145_13_007.png)
    represents the return of the benchmark, and ![](img/Formula_B19145_13_008.png)
    represents the volatility of returns (see the following).
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，R 代表投资组合的回报，![](img/Formula_B19145_13_006.png) 表示所谓的*无风险*回报率，![](img/Formula_B19145_13_007.png)
    代表基准回报，而![](img/Formula_B19145_13_008.png) 代表回报的波动性（见下文）。
- en: Sounds complex?
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 听起来很复杂吗？
- en: Well, it’s not as complex as it seems at first glance. We only need to understand
    the meaning of each element of this equation better.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 嗯，它并没有乍一看那么复杂。我们只需要更好地理解这个方程中每个元素的含义。
- en: Return, in general, refers to how much money was gained (or lost) per given
    period of time. Normally, in portfolio investment, returns are estimated by month
    and by year, in active trading, we also consider daily returns – in some cases,
    even more granular time frames.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，回报指的是在给定时间段内获得（或损失）的金额。在投资组合投资中，回报通常按月和按年估算，在主动交易中，我们也考虑日回报 – 在某些情况下，甚至更细的时间框架。
- en: It should be intuitively clear with the return of an investment or a trading
    strategy, but what is a *risk-free* rate of return? How anything in trading or
    investing can be risk-free?
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 对于投资的回报或交易策略的回报，这应该是直观的，但什么是*无风险*回报率？在交易或投资中，什么可以被认为是无风险的？
- en: Usually, a risk-free return is understood as the difference between the current
    respective bond yield and the inflation rate. For investments in the United States
    and denominated in US dollars, we can use Treasury bonds. For investments in the
    Eurozone and denominated in the euro, usually, German bonds are considered a *risk-free*
    investment, and so on.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，无风险回报被理解为当前各自债券收益率与通货膨胀率之间的差额。对于以美元计价的美国投资，我们可以使用国债。对于欧元区的投资，通常认为德国债券是一种*无风险*投资，等等。
- en: And now we again see a *benchmark*. As we discussed in the *Using currency rates
    as benchmark* section of [*Chapter 9*](B19145_09.xhtml#_idTextAnchor152), *Trading
    Strategies and Their Core Elements*, finding a proper benchmark for FX trading
    can be quite problematic. Therefore, we normally use the change in the price of
    the currency pair itself to see whether our strategy could do it any better than
    the market.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们又看到了一个*基准*。正如我们在[*第9章*](B19145_09.xhtml#_idTextAnchor152)的*使用货币汇率作为基准*部分所讨论的，*交易策略及其核心要素*，为外汇交易找到一个合适的基准可能相当困难。因此，我们通常使用货币对价格的变化来查看我们的策略是否比市场做得更好。
- en: 'If we want to illustrate all of this as simplistically as possible, we could
    use a linear model of both the market growth and returns with an assumption that
    ![](img/Formula_B19145_13_009.png) = 0 (no free lunch ever, right?) and ![](img/Formula_B19145_13_010.png)
    = 1 (the volatility of returns is exactly the same as the volatility of the market
    itself). If the *x*-axis represents time, for example, days, and the *y*-axis
    represents the return, then alpha happens to be the difference between the values
    of the two functions:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们想尽可能简单明了地说明这一切，我们可以使用市场增长和回报的线性模型，假设![](img/Formula_B19145_13_009.png) =
    0（没有免费的午餐，对吧？）和![](img/Formula_B19145_13_010.png) = 1（回报的波动性与市场本身的波动性完全相同）。例如，如果*x*轴代表时间，比如天数，而*y*轴代表回报，那么alpha恰好是两个函数值之间的差异：
- en: '![Figure 13.1 – Simplified model of returns and alpha](img/B19145_13_01.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![图13.1 – 返回和alpha的简化模型](img/B19145_13_01.jpg)'
- en: Figure 13.1 – Simplified model of returns and alpha
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.1 – 返回和alpha的简化模型
- en: 'To make the story about alpha complete, I should note that sometimes, especially
    analyzing the performance of active trading strategies rather than investment,
    alpha is supposed to be derived from the classical form of a linear equation:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 要使关于alpha的故事完整，我应该指出，有时，特别是在分析主动交易策略的表现而不是投资时，alpha被认为是从经典的线性方程形式中推导出来的：
- en: '![](img/Formula_B19145_13_011.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Formula_B19145_13_011.jpg)'
- en: 'As in our previous example, this is a very, very simplified model that shows
    how returns grow over time. If we assume that the market itself grows linearly
    and its growth rate is equal to 1 (y = x), then any ![](img/Formula_B19145_13_012.png)
    > 1 would mean that the investment’s returns grow faster than the market and that
    the investment actually beats the market. Similarly, any ![](img/Formula_B19145_13_013.png)<
    1 would mean that the investment’s returns grow slower than the market itself.
    In this case, even if this investment brings some money to an account, it does
    not beat the market: you can potentially make more by simply buying the market
    itself (stocks, commodities, and even currencies can constitute the respective
    market benchmark). This simple assumption is shown in the following figure:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们之前的例子，这是一个非常、非常简化的模型，展示了回报随时间增长的情况。如果我们假设市场本身以线性增长，其增长率为 1（y = x），那么任何 ![](img/Formula_B19145_13_012.png)
    > 1 就意味着投资的回报增长速度比市场快，并且投资实际上击败了市场。同样，任何 ![](img/Formula_B19145_13_013.png)< 1
    就意味着投资的回报增长速度比市场本身慢。在这种情况下，即使这项投资给账户带来一些资金，它也没有击败市场：你通过简单地购买市场本身（股票、商品甚至货币可以构成相应的市场基准）可能会赚得更多。这个简单的假设在下面的图中展示：
- en: '![](img/B19145_13_02.png)Figure 13.2 – Linear functions with ![](img/Formula_B19145_13_014.png)
    = 1, ![](img/Formula_B19145_13_015.png) > 1, and ![](img/Formula_B19145_13_016.png)
    < 1'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 13.2 – 线性函数，其中 ![](img/Formula_B19145_13_014.png) = 1, ![](img/Formula_B19145_13_015.png)
    > 1, 和 ![](img/Formula_B19145_13_016.png) < 1]'
- en: The benchmark (the market) is assumed to grow at a rate of ![](img/Formula_B19145_13_017.png)
    = 1 (black line). Any function with ![](img/Formula_B19145_13_017.png) > 1 (in
    our example ![](img/Formula_B19145_13_019.png) = 2) will grow faster, and any
    function with ![](img/Formula_B19145_13_020.png) < 1 (![](img/Formula_B19145_13_021.png)
    = 0.5 in our example) will grow slower than the benchmark.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 假设基准（市场）以 ![](img/Formula_B19145_13_017.png) = 1（黑色线条）的速度增长。任何 ![](img/Formula_B19145_13_017.png)
    > 1（在我们的例子中 ![](img/Formula_B19145_13_019.png) = 2）的函数将增长得更快，而任何 ![](img/Formula_B19145_13_020.png)
    < 1（在我们的例子中 ![](img/Formula_B19145_13_021.png) = 0.5）的函数将比基准增长得慢。
- en: Note
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 备注
- en: Such an interpretation of alpha is not common and cannot be used in classical
    capital management theory. I provided this unusual point of view only for your
    reference.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 这种对 alpha 的解释并不常见，且不能用于经典资本管理理论。我仅提供这个不寻常的观点供您参考。
- en: Now, I hope it’s more or less clear with alpha in all its aspects, but what
    about beta?
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我希望关于 alpha 的所有方面都更加清晰，但 beta 呢？
- en: Beta
  id: totrans-129
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 贝塔
- en: 'Beta is a measure of the volatility of returns. Remember the analogy of a road
    trip that we discussed in the *Beta – earn on volatility* section of [*Chapter
    9*](B19145_09.xhtml#_idTextAnchor152), *Trading Strategies and Their Core Elements*?
    Not only the fact that we were able to get from point A to point B matters but
    also how we got there, so how straight or winding the path was. If we want to
    illustrate this comparison, we can again use a linear function as the example
    of a straight path and the same linear function with a periodical component added
    to it as the example of a path with extra volatility:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 贝塔是衡量回报波动性的指标。还记得我们在 [*第 9 章*](B19145_09.xhtml#_idTextAnchor152) 的 *Beta – earn
    on volatility* 部分讨论的类比吗？不仅我们能从 A 点到达 B 点的事实很重要，而且我们如何到达那里，即路径的直或弯也很重要。如果我们想说明这种比较，我们可以再次使用线性函数作为直线路径的例子，以及添加周期性成分的相同线性函数作为额外波动路径的例子：
- en: '![Figure 13.3 – Linear function with and without added volatility](img/B19145_13_03.jpg)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.3 – 带有和未添加波动性的线性函数](img/B19145_13_03.jpg)'
- en: Figure 13.3 – Linear function with and without added volatility
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.3 – 带有和未添加波动性的线性函数
- en: We can see that both functions *get* from point **(0,0)** to **(2,2)**, but
    the linear one does it *faster*. Now, let’s imagine that both graphs illustrate
    the return on a certain investment. Then, the *x*-axis means time and the *y*-axis
    means the amount of money earned or lost during a certain period. Therefore, when
    we see that the curve is growing, this means that money is accumulating in the
    account, and when we see it going down, this means that the account is losing
    money.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到，两个函数都从点 **(0,0)** 到 **(2,2)**，但线性函数做得更快。现在，让我们想象这两个图表都描绘了某种投资的回报。那么，*x*-轴代表时间，*y*-轴代表在一定时期内赚得或损失的资金量。因此，当我们看到曲线在增长时，这意味着资金在账户中积累，而当我们看到它在下降时，这意味着账户在亏损。
- en: 'Now, let’s take periodical snapshots of the activity in our sample investments
    and measure two metrics:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们对我们的样本投资活动进行定期快照，并测量两个指标：
- en: How much the value changed from the time of the previous snapshot until the
    time of the current snapshot
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从上一个快照时间到当前快照时间的价值变化了多少
- en: How much the value changed during the snapshot inside a given period of time
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在给定时间段内的快照期间价值变化了多少
- en: 'In the following figure, I zoomed in and marked the corresponding values on
    the graph:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面的图中，我放大了并标记了图上的相应值：
- en: '![Figure 13.4 – Returns and their volatility in a simplified model](img/B19145_13_04.jpg)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![图13.4 – 简化模型中的回报及其波动性](img/B19145_13_04.jpg)'
- en: Figure 13.4 – Returns and their volatility in a simplified model
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.4 – 简化模型中的回报及其波动性
- en: In this example, we check the return (**R**) and volatility (**V**) at every
    integer value (1, 2, 3, and so on).
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，我们检查了回报（**R**）和波动性（**V**）在每一个整数值（1，2，3等等）。
- en: Let the difference between the previous value of the return (measured at 0)
    and the current value (1) be **ΔR**. In our example, ![](img/Formula_B19145_13_022.png).
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 让回报的前一个值（在0处测量）与当前值（1）之间的差值是**ΔR**。在我们的例子中，![](img/Formula_B19145_13_022.png)。
- en: Then we notice that the return first grows (from 0 to approximately 1.3) then
    falls down to about -0.65, then grows again to 1.6, then falls down to -0.15,
    and, finally, grows back to about 1.4\. So, during the snapshot period from 0
    to 1, the function already made several extremes, both maximums and minimums.
    Let **ΔV** be the difference between a local maximum and the next local minimum,
    which immediately follows this maximum (not vice versa!) In our example, ![](img/Formula_B19145_13_023.png).
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们注意到回报首先增长（从0到大约1.3），然后下降到大约-0.65，然后再次增长到1.6，然后下降到-0.15，最后再次增长到大约1.4。因此，在从0到1的快照期间，函数已经经历了几个极值，包括最大值和最小值。设**ΔV**为局部最大值与紧随其后的下一个局部最小值之间的差值，这个最小值紧随最大值之后（而不是相反！）在我们的例子中，![](img/Formula_B19145_13_023.png)。
- en: The value of **ΔV** is called **drawdown** and is one of the key performance
    metrics of any investment or trading strategy.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: ΔV的值被称为**回撤**，并且是任何投资或交易策略的关键性能指标之一。
- en: So, how can we now estimate (very roughly, but anyway) the beta of the returns?
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，我们如何现在估算（非常粗略，但无论如何）回报的beta值？
- en: 'We are interested in the ratio of the return to drawdown:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 我们对回报与回撤的比率感兴趣：
- en: '![](img/Formula_B19145_13_024.png)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Formula_B19145_13_024.png)'
- en: We want the value of this ratio to be as high as possible. If we have a choice
    between two or more strategies, then we prefer the one for which the ratio of
    return to drawdown is greater.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望这个比率的值尽可能高。如果我们有两个或更多策略可供选择，那么我们更喜欢回报与回撤比率更高的那个。
- en: In our example, the obvious choice would be a *linear* strategy because it delivers
    only gains without a single loss down the road. This means that this strategy
    has a value of ΔV = 0 and thus the ratio in question is infinite. Of course, it
    never happens in reality, but it gives a clear idea about the utopian goal of
    any investor.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的例子中，显然的选择是*线性*策略，因为它只会带来收益而没有损失。这意味着这种策略的价值ΔV = 0，因此所讨论的比率是无限的。当然，在现实中这种情况永远不会发生，但它清楚地说明了任何投资者乌托邦式目标。
- en: 'The second strategy features a ratio of return to a drawdown of about 0.77\.
    This means that although this strategy makes money, the investor will have quite
    a few desperate moments until it gets to the positive zone: the volatility of
    returns of this strategy is greater than the return itself!'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 第二种策略的特点是回报与回撤的比率约为0.77。这意味着尽管这种策略能赚钱，但投资者在进入正区之前会有很多绝望的时刻：这种策略的回报波动性大于回报本身！
- en: The approach that we have just considered is, of course, a very simplified one.
    In practical applications, beta is normally calculated as the volatility of returns
    compared not to returns on the same strategy or investment but to a benchmark,
    as with alpha and other investment performance metrics. Besides that, it would
    be more correct to evaluate not only the ratio of return to drawdown for the entire
    investment or trading period but to also calculate them first for a number of
    smaller periods, then average them, and finally calculate the dispersion of these
    values, thus understanding how this ratio changes over time or how consistent
    the volatility of returns is for this given strategy or investment.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 我们刚才考虑的方法当然是一个非常简化的方法。在实际应用中，贝塔通常被计算为回报的波动性，而不是与相同策略或投资的回报相比，而是与基准相比，就像alpha和其他投资绩效指标一样。除此之外，评估整个投资或交易期间的回报与回撤比率，以及首先计算多个较小期间的这些比率，然后平均它们，最后计算这些值的分散度，从而了解这个比率随时间的变化或这个给定策略或投资的回报波动性是否一致，这会更加正确。
- en: 'However, I promised to keep things simple in this book and not require specific
    knowledge from the theory of probabilities, so we won’t go that far during our
    first acquaintance with performance metrics. If you want to deep-dive into this
    very interesting and very complex subject, I recommend starting with a framework
    article at Investopedia ([https://www.investopedia.com/investing/measure-mutual-fund-risk](https://www.investopedia.com/investing/measure-mutual-fund-risk))
    and following all links provided there: very quickly, you will find yourself in
    the jungles of means, standard deviations, variance, and covariance, but in the
    long run, it’s going to be quite a rewarding experience.'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，我承诺在这本书中保持简单，不要求从概率论的理论中获取具体知识，所以在我们第一次接触绩效指标时，我们不会走得太远。如果你想深入了解这个非常有趣且非常复杂的话题，我建议从Investopedia上的框架文章开始（[https://www.investopedia.com/investing/measure-mutual-fund-risk](https://www.investopedia.com/investing/measure-mutual-fund-risk)），并跟随那里提供的所有链接：很快，你将发现自己置身于均值、标准差、方差和协方差的热带雨林中，但从长远来看，这将是一次相当有回报的经历。
- en: Important note
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: The suggested estimate of beta is not the same beta used in the classical capital
    management formula earlier in this chapter. It is introduced here only to explain
    the essence of the volatility of returns and better understand the basic performance
    metrics discussed next.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 本章前面提到的经典资本管理公式中使用的贝塔估计与这里建议的贝塔不同。这里引入它只是为了解释回报波动性的本质，更好地理解接下来讨论的基本绩效指标。
- en: Alright, we have refreshed our memory about both alpha and beta, but did you
    notice that so far we have been talking about alpha as a performance metric for
    investments? Is there any difference between investing and trading, and can we
    still use alpha to assess the performance of trading strategies?
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 好的，我们已经刷新了对alpha和beta的记忆，但你有没有注意到，到目前为止，我们一直在谈论alpha作为投资的绩效指标？投资和交易之间有什么区别，我们还能否继续使用alpha来评估交易策略的表现？
- en: The main difference between the two is that investing assumes buying an asset
    and holding it for a long time, while trading means that you actively buy and
    sell the asset during the same period of time. Therefore, with investment, we
    can potentially outperform the market by choosing assets that perform better than
    the broad market (by an index or any other benchmark), and in active trading,
    we try to outperform the asset itself by holding it for shorter periods of time.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 两者之间的主要区别在于，投资假设购买资产并长期持有，而交易意味着你在同一时间段内积极买卖资产。因此，在投资中，我们可以通过选择表现优于整个市场（通过指数或其他基准）的资产来有可能超越市场，而在主动交易中，我们试图通过持有较短的时间来超越资产本身。
- en: The main problem with using both alpha- and beta-related metrics to analyze
    the performance of trading strategies is the lack of relevant benchmarks suitable
    for this purpose. We already mentioned this problem in [*Chapter 9*](B19145_09.xhtml#_idTextAnchor152),
    *Trading Strategies and Their Core Elements*, and pointed out that it would make
    more sense to use specific FX benchmarks to assess the performance of FX trading
    strategies.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 使用alpha和beta相关指标来分析交易策略的表现的主要问题是缺乏适合此目的的相关基准。我们已经在[*第9章*](B19145_09.xhtml#_idTextAnchor152)《交易策略及其核心要素》中提到了这个问题，并指出使用特定的FX基准来评估FX交易策略的表现会更加合理。
- en: 'However, sometimes it is really difficult to find a suitable benchmark to compare
    apples to apples: for example, if we try to assess the performance of an intraday
    strategy that opens and closes multiple positions per day ideally, we should compare
    it to a similar intraday strategy used as a reference, but finding such a reference
    will be quite a challenge by itself! So, what do we do in order to adequately
    assess the performance of a trading strategy given that we don’t have a benchmark
    as such?'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，有时真的很难找到一个合适的基准来比较苹果和苹果：例如，如果我们试图评估日内策略的表现，该策略每天开仓和平仓多个头寸，理想情况下，我们应该将其与用作参考的类似日内策略进行比较，但找到这样的参考本身就是一个相当大的挑战！那么，在没有这样的基准的情况下，我们如何才能充分评估交易策略的表现呢？
- en: 'Well, this is why most of the performance metrics used to evaluate the trading
    strategy performance only use that same performance data, sometimes in conjunction
    with the asset price data. These metrics can be considered *proxies* to *true
    alpha* or *true beta*, and if put together, they can give quite a comprehensive
    analysis, which helps answer the main question of trading: whether to put money
    at stake with this strategy or not.'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 嗯，这就是为什么大多数用于评估交易策略表现的性能指标只使用相同的表现数据，有时与资产价格数据结合使用。这些指标可以被认为是*代理*对*真实alpha*或*真实beta*，如果结合起来，可以提供相当全面的分析，这有助于回答交易的主要问题：是否用这个策略下注。
- en: Let’s start with metrics that aim at estimating the alpha of a trading strategy
    returns.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从旨在估计交易策略回报alpha值的指标开始。
- en: Net profit versus buy and hold
  id: totrans-160
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 净利润与买入并持有
- en: This is the first thing to check after you have confirmed that the average trade
    is greater than the required absolute minimum to cover all trading costs. Buy
    and hold means that we buy the same quantity of the currency that we use in backtest,
    hold the position for the entire period of the backtest, and then look at the
    final **profit and loss** (**PnL**), on the last bar of the price time series.
    In our case, we should *buy* 10,000 AUD/USD, hold it for approximately 3 years,
    and look at the return from this single trade.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 这是在确认平均交易大于覆盖所有交易成本所需的绝对最低值之后需要检查的第一件事。买入并持有意味着我们购买与回测中使用的相同数量的货币，在整个回测期间持有该头寸，然后查看价格时间序列的最后一条记录上的最终**盈亏**（**PnL**）。在我们的例子中，我们应该*购买*10,000澳元/美元，持有大约3年，然后查看这笔单一交易的回报。
- en: 'I recommend comparing not only the net profits of the strategy and buy and
    hold but also the equity curves: this will give us an idea about the change in
    the equity over time in both scenarios.'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 我建议比较策略的净收益和买入并持有，以及权益曲线：这将让我们了解在两种情况下权益随时间的变化情况。
- en: 'Let’s quickly create the equity curve of a buy-and-hold strategy. As you remember,
    we isolated the trade logic into a separate function, `tradeLogic()`, so we only
    should rewrite the part between the `Trade logic starts here` and `Trade logic
    ends here` comments while keeping the rest of the code untouched. It’s a good
    idea to make a copy of the `tradeLogic()` function first and give it a proper
    name – for example, `buyAndHold()`, before making changes to the code:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们快速创建一个买入并持有策略的权益曲线。如您所记，我们将交易逻辑隔离到一个单独的函数中，`tradeLogic()`，因此我们只需重写`交易逻辑开始于此`和`交易逻辑结束于此`注释之间的部分，同时保持其余代码不变。首先复制`tradeLogic()`函数并给它一个合适的名字——例如，`buyAndHold()`，在修改代码之前是一个好主意：
- en: '[PRE2]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: As you can see, the only difference between `buyAndHold()` and `tradeLogic()`
    is that we removed all trade logic and replaced it with a single trade placed
    on the very first bar. No other trades are placed for the rest of the backtesting.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，`buyAndHold()`和`tradeLogic()`之间的唯一区别是我们移除了所有交易逻辑，并用在第一个条上的单一交易替换了它。在回测的其余部分不再放置其他交易。
- en: 'If we now run the backtest, we will see the equity curve of our hypothetical
    buy-and-hold *investment*. Note that the *x*- and *y*-axes mean the same as in
    the simplified illustrations: the *x*-axis represents time – in our backtest,
    days (because we use daily data in our backtest) – and the *y*-axis represents
    the returns.'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们现在运行回测，我们将看到我们假设的买入并持有*投资*的权益曲线。请注意，*x*轴和*y*轴的含义与简化插图中的相同：*x*轴代表时间——在我们的回测中，天数（因为我们使用的是日数据）——而*y*轴代表回报。
- en: '![Figure 13.5 – Buy-and-hold returns, AUD/USD](img/B19145_13_05.jpg)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![图13.5 – 买入并持有回报，澳元/美元](img/B19145_13_05.jpg)'
- en: Figure 13.5 – Buy-and-hold returns, AUD/USD
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.5 – 买入并持有回报，澳元/美元
- en: 'And the output in the console reads as follows:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 并且控制台输出如下：
- en: '[PRE3]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: This means that if we bought 10,000 Australian dollars for US dollars 3 years
    ago (and the historical price data starts in 2020), then we would have had a generous
    return of -153 dollars (!), which equals -1.53% (!) in 3 years. And this is even
    without saying that we had a drawdown of almost 1,500 dollars or 15% before we
    achieved such an incredible result.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着如果我们3年前用美元购买了10,000澳大利亚元（并且历史价格数据从2020年开始），那么我们就会获得丰厚的回报-153美元（！），相当于3年内的-1.53%（！）。而且这还没有提到在我们取得如此惊人的结果之前，我们几乎有1,500美元或15%的回撤。
- en: 'Well, I hope you got my sarcasm: now you can see why I always become very skeptical
    when I hear anything about *investments* in currency markets: even in such a brief
    timespan of 3 years, it’s very hard to find a currency pair that could deliver
    returns comparable to the *normal* state of a stock market (by *normal* here,
    I mean the bull market, when stock indices grow every year, quarter, and sometimes
    even every month. Let’s forget about bear markets for now, not to spoil such an
    idealistic picture). Without actively managing the positions (buying *and* selling),
    it would be impossible to achieve any acceptable returns in the FX markets. Let’s
    do the switch back – replace the `buyAndHold()` function with `tradeLogic()` and
    run the backtest again:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 好吧，我希望你感受到了我的讽刺：现在你可以看到为什么我总是对关于货币市场*投资*的任何说法都变得非常怀疑：即使在如此短暂的3年时间内，也很难找到一个能够提供与股票市场*常态*（在这里，我指的是牛市，当股票指数每年、每个季度甚至有时每月都在增长。让我们现在先不考虑熊市，以免破坏这样一个理想化的画面）相当的回报。如果不积极管理头寸（买入和卖出），在FX市场中实现任何可接受的回报都是不可能的。让我们切换回来——用`tradeLogic()`替换`buyAndHold()`函数，并再次运行回测：
- en: '![Figure 13.6 – Returns of the sample trend-following trading strategy, AUD/USD](img/B19145_13_06.jpg)'
  id: totrans-173
  prefs: []
  type: TYPE_IMG
  zh: '![图13.6 – 样本趋势跟踪交易策略的回报，澳元/美元](img/B19145_13_06.jpg)'
- en: Figure 13.6 – Returns of the sample trend-following trading strategy, AUD/USD
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.6 – 样本趋势跟踪交易策略的回报，澳元/美元
- en: 'And the console output now reads as follows:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 控制台输出现在如下所示：
- en: '[PRE4]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'This means that for the same test period of 3 years, we made almost $3,000
    by trading exactly the same size of 10,000 AUD/USD. Without any comments, it’s
    evident how this result surpasses the buy-and-hold strategy: it equals 30% in
    3 years compared to -1.53% for buy-and-hold.'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着在相同的3年测试期内，我们通过交易相同规模的10,000澳元/美元，赚取了近3,000美元。无需任何评论，就可以明显看出这个结果是如何超越买入并持有策略的：它在3年内等于30%，而买入并持有策略为-1.53%。
- en: Let’s calculate an estimate of alpha for our trend-following strategy. The strategy
    return is 30%, the *risk-free* rate of return could be estimated at -2.85% (3
    years of treasury bills at 4.25% yield minus inflation at 7.1% in 2022), the benchmark
    return at -1.53%, and given that the beta, or the volatility of returns, is at
    least no worse than the benchmark (which is obviously the case just looking at
    the two figures here), then the alpha for our strategy is about 31.53% in 3 years.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们计算一下趋势跟踪策略的alpha估计值。策略回报为30%，无风险回报率可以估计为-2.85%（3年期的国债收益率为4.25%，减去2022年的通货膨胀率7.1%），基准回报为-1.53%，鉴于贝塔值，或者说回报的波动性，至少不比基准差（仅从这两个图表来看，这显然是正确的），那么我们的策略在3年内的alpha大约为31.53%。
- en: 'So, we can say that the strategy has passed two checks: it has an average trade
    value that allows the strategy to actually trade (not only on paper), but it also
    generates alpha (outperforms the benchmark) and its returns are comparable to
    those of a conventional investment (for example, investing in the S&P 500 ETF
    would return about 18% in the same 3 years).'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们可以这样说，该策略已经通过了两个检验：它具有平均交易价值，这使得策略能够真正进行交易（而不仅仅是纸上谈兵），它还产生了alpha（优于基准），并且其回报与传统投资（例如，投资于标普500
    ETF在同样的3年内回报约为18%）相当。
- en: Let’s now move on to assessing the beta, or the volatility of returns. As noted
    previously, we are not going to provide the classical definition of beta used
    in capital management because it requires specific knowledge from the theory of
    probabilities. Instead, we will consider drawdown, the third most important metric
    after average trade and overall returns, and show why it can be used as a *proxy*
    to assess the volatility of returns.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们转向评估贝塔值，或者说回报的波动性。正如之前所提到的，我们不会提供在资本管理中使用的经典贝塔定义，因为它需要概率理论方面的特定知识。相反，我们将考虑回撤，这是平均交易和整体回报之后第三重要的指标，并展示为什么它可以作为评估回报波动性的*代理*。
- en: Drawdown
  id: totrans-181
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 回撤
- en: 'According to an article published on CFI (Maximum Drawdown: [https://corporate     financeinstitute.com/resources/capital-markets/maximum-drawdown/](https://corporatefinanceinstitute.com/resources/capital-markets/maximum-drawdown/)),
    “A maximum drawdown (MDD) measures the maximum fall in the value of the investment,
    as given by the difference between the value of the lowest trough and that of
    the highest peak before the trough.” We already saw an illustration of the drawdown
    in *Figure 13**.4* and it is quite easy to understand. However, real equity curves
    never look like ideal sine waves used for illustration purposes, so drawdown is
    not a constant value; it changes over time and these changes also may say a lot
    about the volatility of returns.'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 根据CFI（最大回撤：[https://corporatefinanceinstitute.com/resources/capital-markets/maximum-drawdown/](https://corporatefinanceinstitute.com/resources/capital-markets/maximum-drawdown/))上发布的一篇文章，“最大回撤（MDD）衡量投资价值的最大下跌，这是通过最低谷值与之前最高峰值的差来给出的。”我们已经在*图13*4中看到了回撤的说明，它相当容易理解。然而，实际的权益曲线永远不会像用于说明目的的理想正弦波那样看起来，因此回撤不是一个恒定值；它会随时间变化，这些变化也可能说很多关于回报波动性的信息。
- en: 'So, we want to calculate a new time series according to the following algorithm:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们想要根据以下算法计算一个新的时间序列：
- en: Let the first (leftmost) data point in the equity curve be the current historical
    high (maximum).
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让权益曲线的第一个（最左侧）数据点作为当前历史高点（最大值）。
- en: Compare the next value with the current one.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将下一个值与当前值进行比较。
- en: If the next value is greater than the current, let the next value be the new
    historical high.
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果下一个值大于当前值，则下一个值成为新的历史高点。
- en: If the next value is less than the current, store the difference between this
    value and the current historical high as the drawdown.
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果下一个值小于当前值，则将此值与当前历史高点之间的差值存储为回撤。
- en: Finish updating the drawdown when the equity curve makes a new historical high
    and repeat the entire algorithm.
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当权益曲线达到新的历史高点时完成回撤的更新，并重复整个算法。
- en: 'As you can see, if we work with time series or any other sequences, iterables,
    arrays, and so on, we can more efficiently realize the same calculation in just
    two steps:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，如果我们处理时间序列或任何其他序列，可迭代对象，数组等，我们可以在仅两步中更有效地实现相同的计算：
- en: Form a new sequence in which the next element is either equal to the preceding
    one or greater.
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 形成一个新序列，其中下一个元素要么等于前一个元素，要么更大。
- en: Subtract the original sequence from the resulting sequence.
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从结果序列中减去原始序列。
- en: This will give us a sequence of drawdowns.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 这将给我们一个回撤序列。
- en: To better understand what the drawdown is and how it is calculated, let’s consider
    a simple example.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更好地理解回撤是什么以及它是如何计算的，让我们考虑一个简单的例子。
- en: 'Let’s create a list containing a sequence of non-negative values:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们创建一个包含一系列非负值的列表：
- en: '[PRE5]'
  id: totrans-195
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Then, prepare an empty list where we’re going to store the result:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，准备一个空列表，我们将在这里存储结果：
- en: '[PRE6]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'And initialize a variable that is supposed to store the current high (maximum)
    in the initial list:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 并初始化一个变量，该变量应存储初始列表中的当前高点（最大值）：
- en: '[PRE7]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Now, we iterate over all elements in the list, `a`, compare them to the last
    maximum value, choose the new maximum, update it, and append it to the resulting
    list, `m`:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们遍历列表中的所有元素，`a`，将它们与最后一个最大值进行比较，选择新的最大值，更新它，并将其追加到结果列表`m`中：
- en: '[PRE8]'
  id: totrans-201
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'If you did everything correctly, then `m` should contain the following sequence:
    `[1, 2, 4, 4, 5, 8, 8, 8, 8, 9, 10]`. If we now subtract the original sequence,
    `a`, from `m`, then we get the series of drawdowns:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你一切操作正确，那么`m`应包含以下序列：`[1, 2, 4, 4, 5, 8, 8, 8, 8, 9, 10]`。如果我们现在从`m`中减去原始序列`a`，那么我们得到一系列回撤：
- en: '[PRE9]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: This returns `[0, 0, 0, -1, 0, 0, -1, -2, -6, 0, 0]`. This is the list of drawdowns
    calculated at every data point in the original sequence.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 这将返回`[0, 0, 0, -1, 0, 0, -1, -2, -6, 0, 0]`。这是在原始序列的每个数据点计算出的回撤列表。
- en: We can verify the result by scanning the data in the original sequence from
    left to right. The second element in `a` is greater than the first, so the drawdown
    is 0 and the latest high is 2\. The third element is greater than the latest high,
    so the drawdown is again 0, and the latest high is updated to 4\. The fourth element
    in `a` is less than the latest high by 1, so the fourth element in `m` is -1,
    and the latest high remains 4\. You can continue this calculation and make sure
    that all the drawdown values are calculated correctly – and that you now fully
    understand the meaning of the drawdown.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过从左到右扫描原始序列中的数据来验证结果。`a`中的第二个元素大于第一个，所以下跌为0，最新高点为2。第三个元素大于最新高点，所以下跌再次为0，最新高点更新为4。`a`中的第四个元素比最新高点低1，所以`m`中的第四个元素为-1，最新高点保持为4。你可以继续这个计算，并确保所有下跌值都计算正确——并且你现在完全理解了下跌的含义。
- en: 'There is a faster way of doing exactly this by using `numpy` arrays:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`numpy`数组可以更快地完成这个操作：
- en: '[PRE10]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'This simple code will generate the same sequence of drawdowns as before, the
    only difference now is that it’s going to be a `numpy` array rather than a native
    Python list:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 这段简单的代码将生成与之前相同的下跌序列，唯一的区别现在是将使用`numpy`数组而不是原生的Python列表：
- en: '[PRE11]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Now that we fully understand what drawdown is and how it can be calculated,
    let’s do it for the equity time series of our trend-following strategy.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们完全理解了什么是下跌以及它是如何计算的，让我们为我们趋势跟踪策略的权益时间序列进行计算。
- en: Firstly, and above all, we should add `import numpy` at the very beginning of
    the code, among other imports.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，最重要的是，我们应该在代码的非常开始处添加`import numpy`，以及其他导入。
- en: 'Next, let’s slightly modify the very end of the backtester code, where `matplotlib`
    `plot()` is called:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们稍微修改回测代码的末尾，其中调用`matplotlib`的`plot()`函数：
- en: '[PRE12]'
  id: totrans-213
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'You can see a new command: `plt.subplot()`. It is used to place multiple charts
    or graphs on the same canvas (see [*Chapter 8*](B19145_08.xhtml#_idTextAnchor130),
    *Data Visualization in FX Trading with Python*, to refresh your memory regarding
    the object model of `matplotlib` plots). To save time and space here, I recommend
    you have a glance at a tutorial at [https://www.w3schools.com/python/matplotlib_subplot.asp](https://www.w3schools.com/python/matplotlib_subplot.asp)
    to understand the meaning of `subplot()` parameters.'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以看到一个新的命令：`plt.subplot()`。它用于在同一画布上放置多个图表或图形（参见[*第8章*](B19145_08.xhtml#_idTextAnchor130)，*使用Python进行外汇交易中的数据可视化*，以刷新你对`matplotlib`绘图对象模型的记忆）。为了节省时间和空间，我建议你浏览一下[https://www.w3schools.com/python/matplotlib_subplot.asp](https://www.w3schools.com/python/matplotlib_subplot.asp)上的教程，以了解`subplot()`参数的含义。
- en: 'Now, if you have done everything correctly and run the backtest again (using,
    of course, the same source price data!), you will now see the same equity curve
    as before, but with the drawdown chart beneath it:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如果你已经正确地完成了所有操作并再次运行回测（当然，使用相同的源价格数据！），你现在将看到与之前相同的权益曲线，但下面是下跌图表：
- en: '![Figure 13.7 – Equity curve and drawdown of the sample trend-following strategy](img/B19145_13_07.jpg)'
  id: totrans-216
  prefs: []
  type: TYPE_IMG
  zh: '![图13.7 – 样本趋势跟踪策略的权益曲线和下跌](img/B19145_13_07.jpg)'
- en: Figure 13.7 – Equity curve and drawdown of the sample trend-following strategy
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.7 – 样本趋势跟踪策略的权益曲线和下跌
- en: Now, we know a lot more about our strategy, especially about the risks associated
    with it. Even without doing precise calculations (which can be quite complex)
    and taking only a surface look at the resulting graphs here, we can make a number
    of important conclusions, which we are going to consider in the very next section.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们对我们的策略了解得更多了，特别是关于与之相关的风险。即使没有进行精确的计算（这可能相当复杂）并且只是对生成的图表进行表面观察，我们也可以得出一些重要的结论，这些结论将在下一节中讨论。
- en: Risk/reward and return on drawdown
  id: totrans-219
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 风险/回报和下跌回报
- en: 'First of all, we want to understand whether drawdowns are distributed more
    or less evenly during the backtest period. This is very important because if there
    are significant drawdowns that appear at random, then it’s a warning sign: this
    means that there are some occasional processes in the market that are not accounted
    for by the model used in the trading strategy, and sooner or later, one of these
    processes may destroy the strategy completely.'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们想了解在回测期间下跌是否分布得更均匀或更不均匀。这非常重要，因为如果存在随机的重大下跌，那么这是一个警告信号：这意味着市场中有一些偶尔的过程没有被交易策略中使用的模型所考虑，迟早，这些过程中的一个可能会完全摧毁策略。
- en: Before we proceed, I recommend you refresh your memory about the mean and standard
    deviation, which we discussed in the *Volatility indicators* section of [*Chapter
    6*](B19145_06.xhtml#_idTextAnchor101), *Basics of Fundamental Analysis and Its
    Possible Use in* *FX Trading*.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们继续之前，我建议你回顾一下均值和标准差的概念，我们之前在[*第 6 章*](B19145_06.xhtml#_idTextAnchor101)的[*“波动性指标”*](B19145_06.xhtml#_idTextAnchor101)部分讨论过这些概念，*基本面分析基础及其在*
    *外汇交易* *中的可能用途*。
- en: 'We can quickly analyze the result by running the backtest in an interactive
    console and entering the following after the initial chart is displayed:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过在交互式控制台中运行回测并在初始图表显示后输入以下内容来快速分析结果：
- en: '[PRE13]'
  id: totrans-223
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'This calculates the mean drawdown. The following command returns the standard
    deviation of drawdowns:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 这计算了回撤的均值。以下命令返回回撤的标准差：
- en: '[PRE14]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Now, add three lines to the plot: the mean drawdown, mean minus 1 sigma, and
    mean minus 2 sigma:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，在图表中添加三条线：均值回撤、均值减去 1 个标准差和均值减去 2 个标准差：
- en: '[PRE15]'
  id: totrans-227
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'If you have done everything correctly, you should see something like this in
    the following figure:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你一切操作正确，你应该在下面的图中看到类似的内容：
- en: '![Figure 13.8 – Mean minus 1 and 2 sigma of drawdowns](img/B19145_13_08.jpg)'
  id: totrans-229
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.8 – 回撤的均值减去 1 和 2 个标准差](img/B19145_13_08.jpg)'
- en: Figure 13.8 – Mean minus 1 and 2 sigma of drawdowns
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.8 – 抽样均值减去 1 和 2 个标准差的回撤
- en: How do we interpret the result?
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 我们如何解释这个结果？
- en: Drawdowns that lie outside of 2 sigma (the bottom horizontal line in the chart)
    are so-called outliers. They deserve special attention because usually, they are
    caused by reasons not accounted for in the strategy logic. In our case, fortunately,
    they are not numerous and at least the very first one is easily explained by the
    market volatility at the beginning of the COVID-19 panic.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 位于 2 个标准差之外（图表中的底部水平线）的回撤被称为异常值。它们值得特别注意，因为通常它们是由策略逻辑中没有考虑到的因素引起的。在我们的例子中，幸运的是，这些异常值不多，而且至少第一个异常值可以很容易地用
    COVID-19 恐慌初期市场的波动性来解释。
- en: Drawdowns between mean and 2 sigma are distributed more or less evenly over
    time. This means that they are just systematic drawdowns caused by the imperfections
    of the market model used in the strategy.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 均值和 2 个标准差之间的回撤在时间上分布得或多或少均匀。这意味着它们只是由策略中使用的市场模型的不完美性引起的系统性回撤。
- en: Most of the drawdowns are above the mean value and again, they are distributed
    evenly along the time axis – so, this gives us hope that the market model is adequate
    for the market.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数回撤都高于均值，并且再次，它们沿着时间轴均匀分布——所以，这让我们有理由相信市场模型对市场是合适的。
- en: After an initial visual qualitative analysis, let’s go to numbers. The maximum
    drawdown (which also can be found by typing `min(dd)` in an interactive console
    or adding `print(min(dd))` to the code) of our strategy is 646 pips. Is it large
    or small? If you invest $10,000 and temporarily lose $646, this means that you
    risk about 6.5% of your account. This is a moderate-to-low-risk, which is considered
    acceptable to most investors.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行初步的定性分析之后，让我们转向数字。我们策略的最大回撤（也可以通过在交互式控制台中输入 `min(dd)` 或者在代码中添加 `print(min(dd))`
    来找到）为 646 点。这是大还是小？如果你投资 10,000 美元并暂时损失 646 美元，这意味着你承担了账户大约 6.5% 的风险。这是一个中等到低风险，这在大多数投资者看来是可以接受的。
- en: 'However, a more important metric is the risk-to-reward ratio. The meaning of
    this metric is quite intuitive: the less the ratio, the less the volatility of
    returns and thus the less the overall risk of investing.'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，一个更重要的指标是风险/回报比。这个指标的含义相当直观：比率越低，回报的波动性越小，因此整体投资风险也越小。
- en: Let’s do the simple math for our example. The total net profit of our strategy
    is slightly above 3,000 pips in 3 years. Even if we assume that it generates the
    same return each year (which is not the case), then on average, it returns about
    1,500 pips per annum. This means that by risking $646, we may expect about $1,500,
    so the risk/reward ratio is about 0.43.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们为我们的例子做简单的数学计算。我们的策略在 3 年内的总净盈利略高于 3,000 点。即使我们假设它每年都产生相同的回报（这并不成立），那么平均每年大约有
    1,500 点的回报。这意味着通过承担 646 美元的风险，我们可能期望获得大约 1,500 美元，因此风险/回报比约为 0.43。
- en: 'The sacramental question again: is that *good* or *bad*?'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 再次提出神圣的问题：这是*好*还是*坏*？
- en: Generally speaking, any risk/reward ratio less than 1 is good because this means
    that you risk less than you may expect to win. There are debates on the *optimal*
    value of the risk/reward ratio (along with *optimal* values for all other performance
    metrics) but most authors agree that any value less than 0.5 gives a potential
    green light to investing in a financial product.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 通常来说，任何小于1的风险/回报比都是好的，因为这意味着你冒的风险小于你可能期望赢得的。关于风险/回报比（以及所有其他性能指标）的*最优*值存在争议，但大多数作者认为任何小于0.5的值都为投资金融产品提供了潜在绿灯。
- en: Note
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Strictly speaking, the question about the risk/reward ratio is also closely
    connected to the problem of benchmarking. Unfortunately, this subject is too wide
    and too complex to be carefully considered in this book, but the provided rough
    estimates can work quite well as starting points for your research.
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 严格来说，关于风险/回报比的问题也与基准问题密切相关。不幸的是，这个主题过于广泛和复杂，无法在本书中仔细考虑，但提供的粗略估计可以作为你研究的起点。
- en: 'Another metric that is essentially the inverted risk/reward ratio is the return
    on drawdown. The only difference is that the latter is usually calculated as a
    percentage and not as a fractional value. The meaning of this metric is also very
    intuitive: it means the expected premium for the risk – the payoff we expect if
    we risk a certain amount of money.'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个本质上与风险/回报比相反的指标是回撤回报率。唯一的区别是后者通常以百分比计算，而不是以分数值计算。这个指标的含义也非常直观：它表示预期的风险溢价——如果我们冒一定数量的钱，我们期望的回报。
- en: In our example, the return on drawdown equals 1,500/646*100 = 232.2% in 2 years.
    In other words, you may expect about twice the amount of risk you can afford to
    allocate to this strategy.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的例子中，回撤回报率为1,500/646*100 = 232.2%，在2年内。换句话说，你可能会期望大约是你能承担分配给这个策略的风险的两倍。
- en: At this point, you may exclaim, *“why, but earlier in this chapter, we calculated
    an alpha of only about 30%, how come now we get such a* *huge return?”*
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一点上，你可能会惊呼，“为什么，但在这章的早期，我们计算出的alpha值只有大约30%，现在我们怎么得到了如此*巨大*的回报？”
- en: This is probably the most confusing part of FX trading and we will consider
    it in detail in the very next section.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 这可能是外汇交易中最令人困惑的部分，我们将在下一节详细讨论。
- en: The power of leverage – how much do I need to trade it?
  id: totrans-246
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 杠杆的力量——我需要多少来交易？
- en: 'Finally, we are about to answer the main question of any investor: how much
    do I have to have in my trading account and how much can I expect from it?'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们将回答任何投资者面临的主要问题：我需要在交易账户中有多少钱，以及我可以期望从中获得多少？
- en: Before we continue, let me draw your attention to the following important fact
    about FX trading.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们继续之前，让我提醒你注意关于外汇交易的一个重要事实。
- en: Note
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Do not confuse the return on investment as a performance metric with the actual
    return on actual investment!
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 不要将投资回报率作为性能指标与实际投资的实际回报率混淆！
- en: To understand it, we should again recall the essence of margin trading and how
    it differs from regular investment and trading without margins.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 要理解这一点，我们再次回顾杠杆交易的本质以及它与无杠杆的常规投资和交易有何不同。
- en: When you invest or trade without margin, you can buy only that amount of assets
    (equities, commodities, whatever) that cost the amount of money in your account.
    For example, if you trade stocks, and a stock’s price is $100, and you have $10,000
    in your account, then you can buy no more than 100 shares of the stock (actually
    a bit less because of trading costs).
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 当你进行无杠杆投资或交易时，你只能购买你账户中金额对应的资产（股票、商品等）。例如，如果你交易股票，股票价格为100美元，你账户中有10,000美元，那么你最多只能购买100股股票（实际上因为交易成本会少一些）。
- en: However, if you trade on margin, then you are supposed to have only a fraction
    of the full required amount, and the rest will be provided as a credit line by
    your broker. In our example with AUD/USD, if you have 10,000 US dollars in your
    account and your broker provides you with a retail leverage of 30:1, then you
    potentially can buy as much as ![](img/Formula_B19145_13_025.png) Australian dollars.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，如果你进行杠杆交易，那么你只需要支付所需金额的一部分，其余部分将由你的经纪人以信用额度提供。在我们的例子中，如果你账户中有10,000美元，你的经纪人提供30:1的零售杠杆，那么你理论上可以购买多达![img/Formula_B19145_13_025.png](img/Formula_B19145_13_025.png)澳大利亚元。
- en: The ability to purchase magnitudes more assets than otherwise possible with
    the amount in your trading account makes margin trading very attractive to many
    novice traders. However, leverage is a double-edged sword. Let’s do some simple
    math and see why it may be quite dangerous.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 能够用交易账户中的资金购买比通常可能购买更多的资产，这使得保证金交易对许多新手交易者非常有吸引力。然而，杠杆是一把双刃剑。让我们做一些简单的数学计算，看看为什么它可能非常危险。
- en: Do you remember that we consistently calculated everything in pips, and not
    in money? Now we can benefit from this because we only need to adjust the pip
    value according to the chosen leverage and scale all the performance metrics.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 你还记得我们一直以点数计算一切，而不是以货币计算吗？现在我们可以从中受益，因为我们只需要根据所选的杠杆调整点数价值，并按比例调整所有性能指标。
- en: So, when we traded 10,000 AUD/USD, the net return was about 3,000 pips, and
    the maximum drawdown was 646 pips. If we had the same $10,000 in our account,
    that would mean that we traded without leverage, and for unleveraged trading,
    the return indeed would make about 30% while the drawdown would remain acceptably
    low, around 6.5%.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，当我们交易10,000澳元/美元时，净回报大约是3,000点，最大回撤是646点。如果我们账户中有相同的10,000美元，这意味着我们没有使用杠杆进行交易，而对于无杠杆交易，回报确实会达到大约30%，而回撤将保持在可接受的低水平，大约6.5%。
- en: Now, we trade with a leverage of 30:1\. This means that a pip value now equals
    $30, not $1\. Then, the return would make $30 * 3000 = $90,000 – what a handsome
    profit! If we present this figure as percent growth over the initial investment,
    we will have an incredible value of 900% in just 3 years. So, margin trading is
    a great benefit and the way to go, isn’t it?
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们以30:1的杠杆进行交易。这意味着现在一个点的价值等于30美元，而不是1美元。那么，回报将是$30 * 3000 = $90,000——多么丰厚的利润！如果我们把这个数字作为初始投资的百分比增长来表示，那么在仅仅3年内，我们就会有一个令人难以置信的900%的价值。所以，保证金交易是一个巨大的好处，也是一条可行的道路，不是吗？
- en: But we forgot about the drawdown. We also have to scale it up, as now 1 pip
    costs $30\. This way, a drawdown of 646 pips translates into $30 * 646 = $19,380.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 但我们忘记了回撤。我们还需要将其放大，因为现在1点价值30美元。这样，646点的回撤就转化为$30 * 646 = $19,380。
- en: Oops.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 哎呀。
- en: 'The drawdown now is twice as much as the total initial capital in the account!
    This means that in reality, we would have never reached the expected return. Moreover,
    instead of making a profit, we would have lost all money in our account and faced
    a catastrophe notoriously known as a *margin call*: the situation when the broker
    calls for adding funds to your account because otherwise, the open position cannot
    be maintained. Most retail brokers do not wait until clients add funds to their
    accounts and simply liquidate such a position with a loss. Therefore, if we traded
    our strategy with a leverage of 30:1, we would have lost all money in the account
    during the very first drawdown.'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 现在的回撤是账户总初始资本的的两倍！这意味着实际上，我们从未达到预期的回报。此外，我们不仅没有盈利，反而会损失账户中所有的钱，面临一个臭名昭著的称为*保证金追缴*的灾难：当经纪商要求向账户添加资金时，否则，无法维持开放的头寸。大多数零售经纪商不会等到客户向他们的账户添加资金，而是简单地以损失了结这样的头寸。因此，如果我们以30:1的杠杆进行交易，我们会在第一次回撤时损失账户中所有的钱。
- en: So, how do we choose the acceptable leverage?
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，我们如何选择可接受的杠杆？
- en: With margin trading, we normally start from the opposite end. Instead of calculating
    the projected returns from the strategy metrics, first of all, we try to estimate
    a leverage that would allow our positions to remain open during the entire trading
    period.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 在保证金交易中，我们通常从相反的一端开始。不是首先从策略指标计算预期的回报，而是首先尝试估算一个杠杆，使得我们的头寸在整个交易期间保持开放。
- en: We know that the maximum drawdown is 646 pips and we have $10,000 in a trading
    account. Thus, the maximum possible leverage should make the pip value no greater
    than 10,000/646, which is about $15\. Therefore, the absolute maximum possible
    leverage is 15:1, which is twice as low as the 30:1 offered by the broker.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 我们知道最大回撤是646点，我们在交易账户中有10,000美元。因此，可能的最大杠杆应该使点数价值不超过10,000/646，大约是15美元。因此，绝对可能的最大杠杆是15:1，比经纪商提供的30:1低一半。
- en: Now, let’s have a critical look at the result.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们仔细看看结果。
- en: Can we trade our strategy with leverage of 15:1? Theoretically yes, practically
    no because in this case, the drawdown would make up 100% of the trading account.
    I can’t imagine any trader, not commenting on investors, who would be able to
    withstand such a drawdown, even just psychologically.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 我们能否以 15:1 的杠杆进行交易？从理论上讲，是的，但实际上不行，因为在这种情况下，回撤将占满整个交易账户。我无法想象任何交易者，更不用说投资者了，能够承受这样的回撤，即使只是心理上。
- en: 'In reality, the calculation of the right leverage is performed in the following
    sequence:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 在现实中，正确的杠杆计算按以下顺序进行：
- en: Define the maximum level of losses. This is not the maximum drawdown of a strategy,
    but the maximum drawdown acceptable by the investor.
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义最大损失水平。这并不是策略的最大回撤，而是投资者可接受的最大回撤。
- en: Calculate the pip value so that this acceptable level of losses would equal
    the strategy drawdown.
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算点值，以便这个可接受的损失水平等于策略的回撤。
- en: Define leverage as the ratio of the projected pip value to the original pip
    value.
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义杠杆为预期点值与原始点值的比率。
- en: Define the trading size as the original trading size multiplied by the leverage.
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义交易规模为原始交易规模乘以杠杆。
- en: Let’s calculate the leverage for our strategy with the assumption that an average
    investor can afford to withstand a drawdown of 10% of the initial investment.
    Let’s also assume that the initial investment is $10,000\. Therefore, the maximum
    loss in the account should not ever exceed $1,000\. With a maximum strategy drawdown
    of 646 pips, the value of 1 pip can be equal to $1,000/646 = $1.54\. So, we use
    leverage of just 1.5:1 (not 15:1, not 30:1, and of course not 100:1 as offered
    by many brokers!) Now, we recall that a pip value of $1 is obtained when we trade
    $10,000 per trade. We multiply the original trading size (10,000) by the leverage
    (1.5) and we get only 15,000 AUD/USD.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们假设一个平均投资者可以承受初始投资的 10% 的回撤，来计算我们策略的杠杆。让我们还假设初始投资是 $10,000。因此，账户中的最大损失永远不应超过
    $1,000。以 646 点的最大策略回撤计算，1 点的价值可以是 $1,000/646 = $1.54。所以，我们只使用 1.5:1 的杠杆（不是 15:1，不是
    30:1，当然也不是许多经纪商提供的 100:1！）现在，我们回想一下，当我们每笔交易 $10,000 时，我们可以获得 $1 的点值。我们将原始交易规模（10,000）乘以杠杆（1.5），我们得到只有
    15,000 AUD/USD。
- en: 'And what about returns? Previously we calculated two metrics – alpha and return
    on drawdown – and they gave two very different values: about 30% in the former
    case and over 200% in the latter. With our acceptable level of losses of 10% and
    leverage of 1.5:1, we expect a return of 3,000 pips * $1.5 = $4,500 in 2 years.
    This equals 45% of the initial investment of $10,000.'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，回报如何呢？之前我们计算了两个指标——alpha 和回撤回报——它们给出了两个非常不同的值：前者约为 30%，后者超过 200%。以我们可接受的
    10% 损失率和 1.5:1 的杠杆率计算，我们预计在 2 年内获得 3,000 点 * $1.5 = $4,500 的回报。这相当于初始投资 $10,000
    的 45%。
- en: Now, let’s cover the key takeaways from everything we discussed in this chapter.
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们总结本章中讨论的所有关键要点。
- en: Note
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 备注
- en: Alpha is calculated for an unleveraged investment and gives the lowest estimate
    of possible returns.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: Alpha 是针对无杠杆投资计算的，并给出了可能的最低回报估计。
- en: Return on drawdown is calculated for the maximum possible leverage and gives
    the upper estimate of possible returns (assuming that the drawdown may reach 100%
    of the initial investment).
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 回撤回报是根据最大可能的杠杆计算的，并给出了可能的回报上限估计（假设回撤可能达到初始投资的 100%）。
- en: The realistic return is calculated based on the chosen risk level and is always
    between alpha and the return on the drawdown.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 现实回报是基于所选风险水平计算的，并且始终介于 alpha 和回撤回报之间。
- en: Summary
  id: totrans-278
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: 'In this chapter, we familiarized ourselves with the most basic yet essential
    performance metrics. We understand now that there are three main aspects that
    help assess the strategy performance: trade analysis, alpha-related metrics such
    as returns, and beta-related metrics such as the volatility of returns and analysis
    of drawdowns. We learned about the main factors that always have a negative impact
    on performance, such as spread, slippage, commission, and overnight swaps, and
    we saw how we can realistically account for them in our assessment.'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们熟悉了最基本但最重要的性能指标。我们现在明白，有三个主要方面有助于评估策略性能：交易分析、与 alpha 相关的指标，如回报，以及与 beta
    相关的指标，如回报的波动性和回撤分析。我们了解了始终对性能产生负面影响的主要因素，例如点差、滑点、佣金和隔夜掉期，并了解了我们如何在评估中现实地考虑它们。
- en: We have had a surface peek into the basics of capital management and considered
    alpha and beta, in a simplified form, but at least in a helpful enough way to
    improve our judgments regarding strategy. Finally, we carefully considered the
    leverage, saw its double-edged nature, and adopted the correct way of choosing
    the leverage for markets traded on margin, such as FX.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经对资本管理的基础进行了初步了解，并考虑了阿尔法（alpha）和贝塔（beta），以简化的形式，但至少在帮助改善我们对策略的判断方面是足够的。最后，我们仔细考虑了杠杆，看到了它的双刃剑性质，并采用了为保证金交易市场，如外汇市场选择杠杆的正确方式。
- en: Of course, this chapter is only an introduction to the vast, complex, but interesting
    world of capital management and risk assessment, as this entire book is only an
    introduction to the world of systematic FX trading in general. However, even the
    basic facts and techniques considered in this book are enough to start your own
    homework. Hopefully, this homework is going to be perpetual – because any successful
    trader, in the long run, is a perpetual student of the market.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，本章只是对资本管理和风险评估这个庞大、复杂但有趣的世界的一个简介，正如整本书也只是在一般意义上介绍了系统外汇交易的世界。然而，即使本书中考虑的基本事实和技术也足以开始你自己的作业。希望这项作业能够持续下去——因为任何成功的交易员，从长远来看，都是市场的不懈学习者。
- en: I encourage you to test any idea you may come across – now that you know how
    to do it, critically analyze the results – using the approach outlined in this
    chapter, and continue your studies, using my remarks *“it is unfortunately outside
    the scope of this book”* as invitations to learn more yourself. One day, you may
    find that you operate a portfolio of various strategies running in a large number
    of markets, bringing you both mental satisfaction from decent work and quite a
    significant material reward.
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 我鼓励你测试你遇到的任何想法——既然你知道如何去做，就使用本章概述的方法，批判性地分析结果——并且继续你的学习，将我的评论“遗憾的是，这超出了本书的范围”作为自己进一步学习的邀请。有一天，你可能会发现你管理着一个在众多市场中运行的策略组合，这既给你带来了从体面的工作中获得的精神满足，也带来了相当可观的经济回报。
