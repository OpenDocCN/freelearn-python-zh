- en: Chapter 1. Django's Position on the Web
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章。Django在网络上的位置
- en: Web development has significantly evolved in recent years, particularly with
    the apparition of web frameworks. We will learn how to use the Django framework
    to create a complete website.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 近年来，Web开发发生了重大变化，特别是出现了Web框架。我们将学习如何使用Django框架创建一个完整的网站。
- en: 'In this chapter, we will discuss the following:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论以下内容：
- en: The changes in the Web
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络的变化
- en: A presentation of Django
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Django的介绍
- en: MVC development pattern
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MVC开发模式
- en: From Web 1.0 to Web 2.0
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从Web 1.0到Web 2.0
- en: The Web that you see today has not always been as it appears today. Indeed,
    many technologies such as CSS, AJAX, or the new HTML 5 version have improved the
    Web.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 今天你看到的网络并不总是像今天这样。事实上，许多技术，如CSS，AJAX或新的HTML 5版本都改进了网络。
- en: Web 1.0
  id: totrans-8
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 网络1.0
- en: 'The Web was born 25 years ago, thanks to growing new technologies. Two of these
    have been very decisive:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 25年前，由于不断增长的新技术，网络诞生了。其中两个非常决定性：
- en: The HTML language is a display language. It allows you to organize information
    with nested tags.
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: HTML语言是一种显示语言。它允许您使用嵌套标签组织信息。
- en: The HTTP protocol is a communication network protocol that allows a client and
    a server to communicate. The client is often a browser such as Firefox or Google
    Chrome, and the server is very often a web server such as Nginx, Apache, or Microsoft
    IIS.
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: HTTP协议是一种通信网络协议，允许客户端和服务器进行通信。客户端通常是Firefox或Google Chrome等浏览器，服务器往往是Nginx，Apache或Microsoft
    IIS等Web服务器。
- en: In the beginning, developers used the `<table>` tag to organize various elements
    of their page as the menu, header, or content. The images displayed on the web
    pages were of low resolutions to avoid the risk of making the page heavy. The
    only action that users could perform was to click on the hypertext links to navigate
    to other pages.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 起初，开发人员使用`<table>`标签来组织页面的各种元素，如菜单，标题或内容。网页上显示的图像分辨率较低，以避免使页面变得沉重。用户唯一能够执行的操作是点击超文本链接以导航到其他页面。
- en: 'These hypertext links enabled users to navigate from one page to another by
    sending only one type of data: the URL of the page. The **Uniform Resource Locator**
    (**URL**) defines a unique link to get resources such as an HTML page, picture,
    or PDF file. No data other than the URL was sent by the user.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 这些超文本链接使用户能够通过发送一种类型的数据（页面的URL）从一个页面导航到另一个页面。**统一资源定位符**（**URL**）定义了获取资源（如HTML页面，图片或PDF文件）的唯一链接。用户发送的数据除了URL之外没有其他数据。
- en: Web 2.0
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Web 2.0
- en: The term Web 2.0 was coined by Dale Dougherty, O'Reilly Media Company, and was
    mediated in October 2004 by Tim O'Reilly during the first Web 2.0 conference.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: Web 2.0这个术语是由Dale Dougherty，O'Reilly Media公司创造的，并在2004年10月由Tim O'Reilly在第一次Web
    2.0会议上传播。
- en: 'This new Web became interactive and reachable to beginners. It came as a gift
    to many technologies, including the following:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 这个新的网络变得互动和可达到初学者。它成为了许多技术的礼物，包括以下内容：
- en: The server-side languages such as PHP, **Java Server Page** (**JSP**), or ASP.
    These languages allow you to communicate with a database to deliver dynamic content.
    This also allows users to send data in HTML forms in order to process data using
    the web server.
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务器端语言，如PHP，**Java服务器页面**（**JSP**）或ASP。这些语言允许您与数据库通信以提供动态内容。这也允许用户通过HTML表单发送数据以便使用Web服务器处理数据。
- en: Databases store a lot of information. This information can be used to authenticate
    a user or display an item list from older to more recent entries.
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据库存储了大量信息。这些信息可以用来验证用户或显示从较旧到最近的条目列表。
- en: 'Client-side script such as JavaScript enables users to perform simple tasks
    without refreshing the page. **Asynchronous JavaScript and XML** (**AJAX**) brings
    an important feature to the current Web: asynchronous swapping between the client
    and the server. Thanks to this, there is no need to refresh the page in order
    to enjoy the website.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 客户端脚本，如JavaScript，使用户能够在不刷新页面的情况下执行简单的任务。**异步JavaScript和XML**（**AJAX**）为当前网络带来了一个重要的功能：客户端和服务器之间的异步交换。由于这一点，无需刷新页面即可享受网站。
- en: Today, Web 2.0 is everywhere, and it is a part of our everyday life. Facebook
    is a perfect example of a Web 2.0 site, with complete interaction between users
    and the storage of massive amounts of information in its database. Web applications
    have been popularized as webmails or Google web applications.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 如今，Web 2.0无处不在，它已成为我们日常生活的一部分。Facebook是Web 2.0网站的一个完美例子，用户之间完全互动，并在其数据库中存储了大量信息。Web应用程序已经被普及，如网络邮件或Google网络应用程序。
- en: It's in this philosophy that Django emerged.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 正是在这种哲学中，Django出现了。
- en: What is Django?
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 什么是Django？
- en: Django was born in 2003 in a press agency of Lawrence, Kansas. It is a web framework
    that uses Python to create websites. Its goal is to write very fast dynamic websites.
    In 2005, the agency decided to publish the Django source code in the BSD license.
    In 2008, the Django Software Foundation was created to support and advance Django.
    Version 1.00 of the framework was released a few months later.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: Django诞生于2003年堪萨斯州劳伦斯的一家新闻机构。它是一个使用Python创建网站的Web框架。它的目标是编写非常快速的动态网站。2005年，该机构决定以BSD许可证发布Django源代码。2008年，Django软件基金会成立以支持和推进Django。几个月后发布了框架的1.00版本。
- en: '![What is Django?](img/00002.jpeg)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: ！[什么是Django？]（img/00002.jpeg）
- en: Note
  id: totrans-25
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '**Django''s slogan**'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '**Django的口号**'
- en: The web framework for perfectionists with deadlines.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 完美主义者与截止日期的网络框架。
- en: Django's slogan is explicit. This framework was created to accelerate the development
    phase of a site, but not exclusively. Indeed, this framework uses the MVC pattern,
    which enables us to have a coherent architecture, as we will see in the next chapter.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: Django的口号很明确。这个框架是为了加速网站开发阶段而创建的，但并不是唯一的。事实上，这个框架使用了MVC模式，这使我们能够拥有一个一致的架构，正如我们将在下一章中看到的那样。
- en: Until 2013, Django was only compatible with Python version 2.x, but Django 1.5
    released on February 26, 2013, points towards the beginning of Python 3 compatibility.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 直到2013年，Django只兼容Python 2.x版本，但2013年2月26日发布的Django 1.5版本标志着Python 3兼容性的开始。
- en: Today, big organizations such as the Instagram mobile website, Mozilla.org,
    and Openstack.org are using Django.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 如今，像Instagram移动网站、Mozilla.org和Openstack.org这样的大型组织正在使用Django。
- en: Django – a web framework
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Django - 一个Web框架
- en: A framework is a set of software that organizes the architecture of an application
    and makes a developer's job easier. A framework can be adapted to different uses.
    It also gives practical tools to make a programmer's job faster. Thus, some features
    that are regularly used on a website can be automated, such as database administration
    and user management.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 框架是一组软件，它组织了应用程序的架构，并使开发人员的工作更加轻松。框架可以适应不同的用途。它还提供了实用工具，使程序员的工作更快。因此，一些在网站上经常使用的功能可以被自动化，比如数据库管理和用户管理。
- en: Once a programmer handles a framework, it greatly improves their productivity
    and the code quality.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦程序员掌握了一个框架，它会极大地提高他们的生产力和代码质量。
- en: The MVC framework
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: MVC框架
- en: 'Before the MVC framework existed, web programming mixed the database access
    code and the main code of the page. This returned an HTML page to the user. Even
    if we are storing CSS and JavaScript files in external files, server-side language
    codes are stored in one file that is shared between at least three languages:
    Python, SQL, and HTML.'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 在MVC框架存在之前，Web编程混合了数据库访问代码和页面的主要代码。这将HTML页面返回给用户。即使我们将CSS和JavaScript文件存储在外部文件中，服务器端语言代码仍然存储在至少三种语言之间共享的一个文件中：Python、SQL和HTML。
- en: 'The MVC pattern was created to separate logic from representation and have
    an internal architecture that is more tangible and real. The **Model-View-Controller**
    (**MVC**) represents the three application layers that the paradigm recommends:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: MVC模式是为了将逻辑与表示分离，并拥有更加具体和真实的内部架构而创建的。**模型-视图-控制器**（**MVC**）代表了该范式推荐的三个应用程序层：
- en: '**Models**: These represent data organization in a database. In simple words,
    we can say that each model defines a table in the database and the relations between
    other models. It''s thanks to them that every bit of data is stored in the database.'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**模型**：这些代表数据库中的数据组织。简单地说，我们可以说每个模型定义了数据库中的一个表以及其他模型之间的关系。多亏了它们，每一点数据都存储在数据库中。'
- en: '**Views**: These contain all the information that will be sent to the client.
    They make views that the final HTML document will generate. We can associate the
    HTML code with the views.'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**视图**：这些包含将发送给客户端的所有信息。它们生成最终的HTML文档。我们可以将HTML代码与视图关联起来。'
- en: '**Controllers**: These contain all the actions performed by the server and
    are not visible to the client. The controller checks whether the user is authenticated
    or it can generate the HTML code from a template.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**控制器**：这些包含服务器执行的所有操作，对客户端不可见。控制器检查用户是否经过身份验证，或者可以从模板生成HTML代码。'
- en: '![The MVC framework](img/00003.jpeg)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![MVC框架](img/00003.jpeg)'
- en: 'The following are the steps that are followed in an application with the MVC
    pattern:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在具有MVC模式的应用程序中遵循以下步骤：
- en: The client sends a request to the server asking to display a page.
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 客户端向服务器发送请求，要求显示一个页面。
- en: The controller uses a database through models. It can create, read, update,
    or delete any record or apply any logic to the retrieved data.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 控制器通过模型使用数据库。它可以创建、读取、更新或删除任何记录，或对检索到的数据应用任何逻辑。
- en: The model sends data from the database; for example, it sends a product list
    if we have an online shop.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模型从数据库发送数据；例如，如果我们有一个在线商店，它会发送产品列表。
- en: The controller injects data into a view to generate it.
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 控制器将数据注入视图以生成它。
- en: The view returns its content depending on the data given by the controller.
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 视图根据控制器提供的数据返回其内容。
- en: The controller returns the HTML content to the client.
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 控制器将HTML内容返回给客户端。
- en: The MVC pattern enables us to get coherence for each project's worker. In a
    web agency where there is a web designer and there are developers, the web designer
    is the head of the views. Given that views contain only the HTML code, the web
    designer will not be disturbed by the developer's code. Developers edit their
    models and controllers.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: MVC模式使我们能够为每个项目的工作者获得一致性。在一个有网页设计师和开发人员的网络代理公司中，网页设计师是视图的负责人。鉴于视图只包含HTML代码，网页设计师不会被开发人员的代码打扰。开发人员编辑他们的模型和控制器。
- en: Django, in particular, uses an MVT pattern. In this pattern, views are replaced
    by templates and controllers are replaced by views. In the rest of this book,
    we will be using MVT patterns. Hence, our HTML code will be templates, and our
    Python code will be views and models.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 特别是Django使用了MVT模式。在这种模式中，视图被模板替换，控制器被视图替换。在本书的其余部分，我们将使用MVT模式。因此，我们的HTML代码将是模板，我们的Python代码将是视图和模型。
- en: Why use Django?
  id: totrans-50
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为什么使用Django？
- en: 'The following is a nonexhaustive list of the advantages of using Django:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是使用Django的优势的非尽事例清单：
- en: Django is published under the BSD license, which assures that web applications
    can be used and modified freely without any problems; it's also free.
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Django是根据BSD许可发布的，这确保了Web应用程序可以自由使用和修改，而不会出现任何问题；它也是免费的。
- en: Django is fully customizable. Developers can adapt to it easily by creating
    modules or overridden framework methods.
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Django是完全可定制的。开发人员可以通过创建模块或覆盖框架方法来轻松地适应它。
- en: This modularity adds other advantages. There are a lot of Django modules that
    you can integrate into Django. You can get some help with other people's work
    because you will often find high-quality modules that you might need.
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这种模块化增加了其他优势。有很多Django模块可以集成到Django中。你可以得到一些帮助，因为你经常会找到你可能需要的高质量模块。
- en: Using Python in this framework allows you to have benefits from all Python libraries
    and assures a very good readability.
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在这个框架中使用Python可以让你享受所有Python库的好处，并确保非常好的可读性。
- en: Django is a framework whose main goal is perfection. It was specifically made
    for people who want clear code and a good architecture for their applications.
    It totally respects the **Don't Repeat Yourself** (**DRY**) philosophy, which
    means keeping the code simple without having to copy/paste the same parts in multiple
    places.
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Django是一个旨在完美的框架。它专门为那些希望为他们的应用程序编写清晰代码和良好架构的人而设计。它完全遵循“不要重复自己”（DRY）的理念，这意味着在多个地方保持代码简洁，而不必复制/粘贴相同的部分。
- en: With regards to quality, Django integrates lots of efficient ways to perform
    unit tests.
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关于质量，Django集成了许多有效的方法来执行单元测试。
- en: Django is supported by a good community. This is a very important asset because
    it allows you to resolve issues and fix bugs very fast. Thanks to the community,
    we can also find code examples that show the best practices.
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Django得到了一个良好的社区支持。这是一个非常重要的资产，因为它可以让您快速解决问题和修复错误。多亏了社区，我们还可以找到展示最佳实践的代码示例。
- en: Django has got some disadvantages too. When a developer starts to use a framework,
    he /she begins with a learning phase. The duration of this phase depends on the
    framework and the developer. The learning phase of Django is relatively short
    if the developer knows Python and object-oriented programming.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: Django也有一些缺点。当开发人员开始使用一个框架时，他/她会开始一个学习阶段。这个阶段的持续时间取决于框架和开发人员。如果开发人员了解Python和面向对象编程，那么Django的学习阶段相对较短。
- en: Also, it can happen that a new version of the framework is published that modifies
    some syntax. For example, the syntax of the URLs in the templates was changed
    with Version 1.5 of Django. (For more details, visit [https://docs.djangoproject.com/en/1.5/ref/templates/builtins/#url](https://docs.djangoproject.com/en/1.5/ref/templates/builtins/#url).)
    Despite this, the documentation provides details of each Django update.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 还可能出现一个新版本的框架发布，修改了一些语法。例如，Django 1.5版本改变了模板中URL的语法。（更多细节，请访问[https://docs.djangoproject.com/en/1.5/ref/templates/builtins/#url](https://docs.djangoproject.com/en/1.5/ref/templates/builtins/#url)。）尽管如此，文档提供了每个Django更新的详细信息。
- en: Summary
  id: totrans-61
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we studied the changes that have enabled the Web to evolve
    into Web 2.0\. We also studied the operation of MVC that separates logic from
    representation. We finished the chapter with an introduction to the Django framework.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们研究了使Web进化为Web 2.0的变化。我们还研究了将逻辑与表示分离的MVC的运作方式。最后，我们介绍了Django框架。
- en: In the next chapter, we will set up our development environment with Python,
    PIP, and Django.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将使用Python、PIP和Django建立我们的开发环境。
