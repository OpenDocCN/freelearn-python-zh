- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: MQTT is the preferred IoT publish-subscribe lightweight messaging protocol.
    Python is definitely one of the most popular programming languages. It is open
    source, multiplatform, and you can use it to develop any kind of application.
    If you develop IoT, web applications, mobile apps, or a combination of these solutions,
    you must learn how MQTT and its lightweight messaging system works. The combination
    of Python and MQTT makes it possible to develop powerful applications that communicate
    with sensors, different devices, and other applications. Of course, it is extremely
    important to take security into account when working with this protocol.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: MQTT是首选的物联网发布-订阅轻量级消息传递协议。Python绝对是最流行的编程语言之一。它是开源的，多平台的，您可以使用它开发任何类型的应用程序。如果您开发物联网、Web应用程序、移动应用程序或这些解决方案的组合，您必须学习MQTT及其轻量级消息传递系统的工作原理。Python和MQTT的结合使得开发能够与传感器、不同设备和其他应用程序进行通信的强大应用程序成为可能。当然，在使用该协议时，考虑安全性是非常重要的。
- en: Most of the time, when you work with complex IoT solutions coded in modern Python
    3.6, you will use different IoT boards that might use diverse operating systems.
    MQTT has its own specific vocabulary and different working modes. Learning MQTT
    is challenging, because it includes too many abstract concepts that require real-life
    examples to be easy to understand.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数情况下，当您使用现代Python 3.6编写的复杂物联网解决方案时，您将使用可能使用不同操作系统的不同物联网板。MQTT有自己的特定词汇和不同的工作模式。学习MQTT是具有挑战性的，因为它包含太多需要真实示例才能易于理解的抽象概念。
- en: 'This book will allow you to dive deep in to the latest version of the MQTT
    protocol: 3.1.1\. You will learn to work with the most recent Mosquitto MQTT server,
    command-line tools, and GUI tools to allow you to understand how everything works
    with MQTT and the possibilities that this protocol provides for your projects.
    You will learn security best practices and use them for a Mosquitto MQTT server.'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本书将使您深入了解最新版本的MQTT协议：3.1.1。您将学习如何使用最新的Mosquitto MQTT服务器、命令行工具和GUI工具，以便了解MQTT的一切工作原理以及该协议为您的项目提供的可能性。您将学习安全最佳实践，并将其用于Mosquitto
    MQTT服务器。
- en: Then, you will work with many real-life examples in Python 3.6\. You will control
    a vehicle, process commands, interact with actuators, and monitor a surf competition
    by exchanging MQTT messages with the Eclipse Paho MQTT client library. You will
    also work with a cloud-based, real-time MQTT provider.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，您将使用Python 3.6进行许多真实示例。您将通过与Eclipse Paho MQTT客户端库交换MQTT消息来控制车辆、处理命令、与执行器交互和监视冲浪比赛。您还将使用基于云的实时MQTT提供程序进行工作。
- en: You will be able to run the examples on a wide range of modern IoT boards, such
    as Raspberry Pi 3 Model B+, Qualcomm DragonBoard 410c, BeagleBone Black, MinnowBoard
    Turbot Quad-Core, LattePanda 2G, and UP Core 4GB. However, any other board that
    supports Python 3.6 will be able to run the samples.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 您将能够在各种现代物联网板上运行示例，例如Raspberry Pi 3 Model B+、Qualcomm DragonBoard 410c、BeagleBone
    Black、MinnowBoard Turbot Quad-Core、LattePanda 2G和UP Core 4GB。但是，任何支持Python 3.6的其他板都可以运行这些示例。
- en: Who this book is for
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书适合对象
- en: This book is aimed at Python developers who want to develop applications that
    can interact with other applications and devices, such as IoT boards, sensors,
    and actuators.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 本书面向希望开发能够与其他应用程序和设备交互的Python开发人员，例如物联网板、传感器和执行器。
- en: What this book covers
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书涵盖内容
- en: '[Chapter 1](d20ae00b-2bb7-4d81-b3eb-5c47215bce1f.xhtml), *Installing an MQTT
    3.1.1 Mosquitto Server*, starts our journey toward the usage of the preferred
    IoT publish-subscribe lightweight messaging protocol in diverse IoT solutions,
    combined with mobile apps and web applications. We will learn how MQTT and its
    lightweight messaging system work. We will understand the MQTT puzzle: clients,
    servers (formerly known as brokers), and connections. We will learn the procedures
    to install an MQTT 3.1.1 Mosquitto server in Linux, macOS, and Windows. We will
    learn special considerations for running a Mosquitto server on the Cloud (Azure,
    AWS, and other cloud providers).'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[第1章](d20ae00b-2bb7-4d81-b3eb-5c47215bce1f.xhtml)，*安装MQTT 3.1.1 Mosquitto服务器*，开始我们的旅程，使用首选的物联网发布-订阅轻量级消息传递协议在不同的物联网解决方案中，结合移动应用程序和Web应用程序。我们将学习MQTT及其轻量级消息传递系统的工作原理。我们将了解MQTT的谜题：客户端、服务器（以前称为代理）和连接。我们将学习在Linux、macOS和Windows上安装MQTT
    3.1.1 Mosquitto服务器的程序。我们将学习在云上（Azure、AWS和其他云提供商）运行Mosquitto服务器的特殊注意事项。'
- en: '[Chapter 2](790c1d9a-c895-481e-a1c1-94ea07694cb4.xhtml), *Using Command-Line
    and GUI Tools to Learn How MQTT Works*, teaches us to work with command-line and
    GUI tools to learn how MQTT works in detail. We will learn MQTT basics, the specific
    vocabulary for MQTT, and its working modes. We will use different utilities and
    diagrams to understand the most important concepts related to MQTT. We will understand
    everything we need to know before writing Python code to work with the MQTT protocol.
    We will work with the different Quality of Service levels, and we will analyze
    and compare their overheads.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[第2章](790c1d9a-c895-481e-a1c1-94ea07694cb4.xhtml)，*使用命令行和GUI工具学习MQTT的工作原理*，教我们如何使用命令行和GUI工具详细了解MQTT的工作原理。我们将学习MQTT的基础知识，MQTT的特定词汇和其工作模式。我们将使用不同的实用工具和图表来理解与MQTT相关的最重要的概念。我们将在编写Python代码与MQTT协议一起工作之前，了解一切必须知道的内容。我们将使用不同的服务质量级别，并分析和比较它们的开销。'
- en: '[Chapter 3](89bdce8f-72bc-4fda-82a0-5cab33fa4bd8.xhtml), *Securing an MQTT
    3.1.1 Mosquitto Server*, focuses on how to secure an MQTT 3.1.1 Mosquitto server.
    We will make all the necessary configurations to work with digital certificates
    to encrypt all the data sent between the MQTT clients and the server. We will
    use TLS, and we will learn to work with client certificates for each MQTT client.
    We will also learn to force the desired TLS protocol version.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[第3章](89bdce8f-72bc-4fda-82a0-5cab33fa4bd8.xhtml)，*保护MQTT 3.1.1 Mosquitto服务器*，着重介绍如何保护MQTT
    3.1.1 Mosquitto服务器。我们将进行所有必要的配置，以使用数字证书加密MQTT客户端和服务器之间发送的所有数据。我们将使用TLS，并学习如何为每个MQTT客户端使用客户端证书。我们还将学习如何强制所需的TLS协议版本。'
- en: '[Chapter 4](87908cb8-83ed-4b74-bfc5-dd0c4ddd93aa.xhtml), *Writing Code to Control
    a Vehicle with Python and MQTT Messages*, focuses on writing Python 3.x code to
    control a vehicle with MQTT messages delivered through encrypted connections (TLS
    1.2). We will write code that will be able to run on different popular IoT platforms,
    such as a Raspberry Pi 3 board. We will understand how we can leverage our knowledge
    of the MQTT protocol to build a solution based on requirements. We will learn
    to work with the latest version of the Eclipse Paho MQTT Python client library.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[第4章](87908cb8-83ed-4b74-bfc5-dd0c4ddd93aa.xhtml)，*使用Python和MQTT消息编写控制车辆的代码*，侧重于使用加密连接（TLS
    1.2）通过MQTT消息控制车辆的Python 3.x代码。我们将编写能够在不同流行的IoT平台上运行的代码，例如树莓派3板。我们将了解如何利用我们对MQTT协议的了解来构建基于需求的解决方案。我们将学习如何使用最新版本的Eclipse
    Paho MQTT Python客户端库。'
- en: '[Chapter 5](1fa4ce92-f009-4676-813f-bd4590593c27.xhtml), *Testing and Improving
    Our Vehicle Control Solution in Python*, outlines using our vehicle control solution
    with MQTT messages and Python code. We will learn how to process commands received
    in MQTT messages with Python code. We will write Python code to compose and send
    MQTT messages with commands. We will work with the blocking and threaded network
    loops, and we will understand the difference between them. Finally, we will take
    advantage of the last will and testament feature.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[第5章](1fa4ce92-f009-4676-813f-bd4590593c27.xhtml)，*测试和改进我们的Python车辆控制解决方案*，概述了如何使用MQTT消息和Python代码来处理我们的车辆控制解决方案。我们将学习如何使用Python代码处理接收到的MQTT消息中的命令。我们将编写Python代码来组成和发送带有命令的MQTT消息。我们将使用阻塞和线程化的网络循环，并理解它们之间的区别。最后，我们将利用遗嘱功能。'
- en: '[Chapter 6](dc244927-5db3-4108-a486-fa7f17f5f3ba.xhtml), *Monitoring a Surfing
    Competition with Cloud-Based Real-Time MQTT Providers and Python*, gets you started
    with writing Python code to use the PubNub cloud-based, real-time MQTT provider
    in combination with a Mosquitto MQTT server to monitor a surfing competition.
    We will build a solution from scratch by analyzing the requirements, and we will
    write Python code that will run on waterproof IoT boards connected to multiple
    sensors in surfboards. We will define the topics and commands, and we will work
    with a cloud-based MQTT server, in combination with the Mosquitto MQTT server
    used in the previous chapters.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[第6章](dc244927-5db3-4108-a486-fa7f17f5f3ba.xhtml)，*使用基于云的实时MQTT提供程序和Python监控冲浪比赛*，介绍了如何编写Python代码，使用PubNub基于云的实时MQTT提供程序与Mosquitto
    MQTT服务器结合，监控冲浪比赛。我们将通过分析需求从头开始构建一个解决方案，并编写Python代码，该代码将在连接到冲浪板上的多个传感器的防水IoT板上运行。我们将定义主题和命令，并与基于云的MQTT服务器一起使用，结合了前几章中使用的Mosquitto
    MQTT服务器。'
- en: '[Appendix](d9cf708f-f027-4bfa-a2d2-9fd3653165d9.xhtml), *Solutions*, the right
    answers for the *Test Your Knowledge* sections of each chapter are included in
    the appendix.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '[附录](d9cf708f-f027-4bfa-a2d2-9fd3653165d9.xhtml)，*解决方案*，每章的*测试你的知识*部分的正确答案都包含在附录中。'
- en: To get the most out of this book
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为了充分利用本书
- en: You need a basic knowledge of Python 3.6.x and IoT boards.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要对Python 3.6.x和IoT板有基本的了解。
- en: Download the example code files
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载示例代码文件
- en: You can download the example code files for this book from your account at [www.packtpub.com](http://www.packtpub.com).
    If you purchased this book elsewhere, you can visit [www.packtpub.com/support](http://www.packtpub.com/support)
    and register to have the files emailed directly to you.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从[www.packtpub.com](http://www.packtpub.com)的帐户中下载本书的示例代码文件。如果您在其他地方购买了本书，可以访问[www.packtpub.com/support](http://www.packtpub.com/support)并注册，以便直接通过电子邮件接收文件。
- en: 'You can download the code files by following these steps:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以按照以下步骤下载代码文件：
- en: Log in or register at [www.packtpub.com](http://www.packtpub.com/support).
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录或注册[www.packtpub.com](http://www.packtpub.com/support)。
- en: Select the SUPPORT tab.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择支持选项卡。
- en: Click on Code Downloads & Errata.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击“代码下载和勘误”。
- en: Enter the name of the book in the Search box and follow the onscreen instructions.
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在搜索框中输入书名，然后按照屏幕上的说明操作。
- en: 'Once the file is downloaded, please make sure that you unzip or extract the
    folder using the latest version of:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 下载文件后，请确保使用最新版本的解压缩或提取文件夹：
- en: WinRAR/7-Zip for Windows
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: WinRAR/7-Zip for Windows
- en: Zipeg/iZip/UnRarX for Mac
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Zipeg/iZip/UnRarX for Mac
- en: 7-Zip/PeaZip for Linux
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 7-Zip/PeaZip for Linux
- en: The code bundle for the book is also hosted on GitHub at [https://github.com/PacktPublishing/Hands-On-MQTT-Programming-with-Python](https://github.com/PacktPublishing/Hands-On-MQTT-Programming-with-Python). In
    case there's an update to the code, it will be updated on the existing GitHub
    repository.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 该书的代码包也托管在GitHub上，网址为[https://github.com/PacktPublishing/Hands-On-MQTT-Programming-with-Python](https://github.com/PacktPublishing/Hands-On-MQTT-Programming-with-Python)。如果代码有更新，将在现有的GitHub存储库中更新。
- en: We also have other code bundles from our rich catalog of books and videos available
    at **[https://github.com/PacktPublishing/](https://github.com/PacktPublishing/)**.
    Check them out!
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还有其他代码包，来自我们丰富的书籍和视频目录，可以在**[https://github.com/PacktPublishing/](https://github.com/PacktPublishing/)**上找到。去看看吧！
- en: Download the color images
  id: totrans-31
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载彩色图片
- en: 'We also provide a PDF file that has color images of the screenshots/diagrams
    used in this book. You can download it here: [http://www.packtpub.com/sites/default/files/downloads/HandsOnMQTTProgrammingwithPython_ColorImages.pdf](http://www.packtpub.com/sites/default/files/downloads/HandsOnMQTTProgrammingwithPython_ColorImages.pdf).'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还提供了一个PDF文件，其中包含本书中使用的屏幕截图/图表的彩色图片。您可以在这里下载：[http://www.packtpub.com/sites/default/files/downloads/HandsOnMQTTProgrammingwithPython_ColorImages.pdf](http://www.packtpub.com/sites/default/files/downloads/HandsOnMQTTProgrammingwithPython_ColorImages.pdf)。
- en: Conventions used
  id: totrans-33
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用的约定
- en: There are a number of text conventions used throughout this book.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中使用了许多文本约定。
- en: '`CodeInText`: Indicates code words in text, database table names, folder names,
    filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles.
    Here is an example: "Mount the downloaded `WebStorm-10*.dmg` disk image file as
    another disk in your system."'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '`CodeInText`：表示文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟URL、用户输入和Twitter句柄。例如："将下载的`WebStorm-10*.dmg`磁盘映像文件挂载为系统中的另一个磁盘。"'
- en: 'A block of code is set as follows:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块设置如下：
- en: '[PRE0]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们希望引起您对代码块的特定部分的注意时，相关行或项目会以粗体显示：
- en: '[PRE1]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Any command-line input or output is written as follows:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 任何命令行输入或输出都以以下方式书写：
- en: '[PRE2]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '**Bold**: Indicates a new term, an important word, or words that you see onscreen.
    For example, words in menus or dialog boxes appear in the text like this. Here
    is an example: "Select System info from the Administration panel."'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词会在文本中以这种方式出现。例如："从管理面板中选择系统信息。"'
- en: Warnings or important notes appear like this.Tips and tricks appear like this.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 警告或重要提示会以这种方式出现。技巧和窍门会以这种方式出现。
- en: Get in touch
  id: totrans-44
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 联系方式
